Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Mon Aug 25 18:48:14 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Mon Aug 25 18:48:14 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $236,357,621
Annual Return: 33.72%
Sharpe Ratio: 1.26347
Sortino Ratio: 1.134
Max Drawdown: -61.9%
Avg Drawdown: -11.9%
Normalized Score: -1.033
Lookback periods: [32, 59, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,154,513,583
Annual Return: 39.98%
Sharpe Ratio: 1.31751
Sortino Ratio: 1.265
Max Drawdown: -64.8%
Avg Drawdown: -13.4%
Normalized Score: -0.682
Lookback periods: [147, 196, 234] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $717,671,905
Annual Return: 38.07%
Sharpe Ratio: 1.32537
Sortino Ratio: 1.234
Max Drawdown: -61.8%
Avg Drawdown: -12.2%
Normalized Score: -0.644
Lookback periods: [47, 154, 247] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $815,587,767
Annual Return: 38.58%
Sharpe Ratio: 1.35653
Sortino Ratio: 1.263
Max Drawdown: -59.3%
Avg Drawdown: -12.2%
Normalized Score: -0.490
Lookback periods: [31, 126, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,499,987,627
Annual Return: 41.04%
Sharpe Ratio: 1.40388
Sortino Ratio: 1.313
Max Drawdown: -63.7%
Avg Drawdown: -12.2%
Normalized Score: -0.341
Lookback periods: [56, 143, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,811,469,031
Annual Return: 41.81%
Sharpe Ratio: 1.41656
Sortino Ratio: 1.350
Max Drawdown: -52.3%
Avg Drawdown: -12.8%
Normalized Score: -0.069
Lookback periods: [93, 102, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 22sRunning iteration 51/1500... Est. remaining: 17m 3sRunning iteration 61/1500... Est. remaining: 16m 4sRunning iteration 71/1500... Est. remaining: 15m 22sRunning iteration 81/1500... Est. remaining: 14m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $858,353,509
Annual Return: 38.79%
Sharpe Ratio: 1.43402
Sortino Ratio: 1.310
Max Drawdown: -51.1%
Avg Drawdown: -10.6%
Normalized Score: -0.031
Lookback periods: [36, 57, 114] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 42sRunning iteration 101/1500... Est. remaining: 14m 18sbest_combination: {'lookbacks': [36, 57, 114], 'score': np.float64(-0.03149059577263161), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $992,684,986
Annual Return: 39.37%
Sharpe Ratio: 1.47659
Sortino Ratio: 1.362
Max Drawdown: -44.8%
Avg Drawdown: -9.6%
Normalized Score: 0.332
Lookback periods: [30, 94, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 53sRunning iteration 131/1500... Est. remaining: 13m 37sRunning iteration 141/1500... Est. remaining: 13m 21sRunning iteration 151/1500... Est. remaining: 13m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,438,236,659
Annual Return: 46.38%
Sharpe Ratio: 1.54068
Sortino Ratio: 1.493
Max Drawdown: -60.4%
Avg Drawdown: -12.2%
Normalized Score: 0.386
Lookback periods: [118, 157, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 13m 4sRunning iteration 171/1500... Est. remaining: 12m 52sRunning iteration 181/1500... Est. remaining: 12m 40sRunning iteration 191/1500... Est. remaining: 12m 29sRunning iteration 201/1500... Est. remaining: 12m 18sbest_combination: {'lookbacks': [118, 157, 180], 'score': np.float64(0.386301766689704), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 8sRunning iteration 221/1500... Est. remaining: 11m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,418,270,979
Annual Return: 47.08%
Sharpe Ratio: 1.55442
Sortino Ratio: 1.515
Max Drawdown: -59.0%
Avg Drawdown: -10.7%
Normalized Score: 0.615
Lookback periods: [141, 171, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 11m 56sRunning iteration 241/1500... Est. remaining: 11m 48sRunning iteration 251/1500... Est. remaining: 11m 39sRunning iteration 261/1500... Est. remaining: 11m 30sRunning iteration 271/1500... Est. remaining: 11m 22sRunning iteration 281/1500... Est. remaining: 11m 13sRunning iteration 291/1500... Est. remaining: 11m 5sRunning iteration 301/1500... Est. remaining: 10m 57sbest_combination: {'lookbacks': [141, 171, 178], 'score': np.float64(0.61480681993447), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 50sRunning iteration 321/1500... Est. remaining: 10m 42sRunning iteration 331/1500... Est. remaining: 10m 35sRunning iteration 341/1500... Est. remaining: 10m 28sRunning iteration 351/1500... Est. remaining: 10m 21sRunning iteration 361/1500... Est. remaining: 10m 14sRunning iteration 371/1500... Est. remaining: 10m 7sRunning iteration 381/1500... Est. remaining: 10m 1sRunning iteration 391/1500... Est. remaining: 9m 54sRunning iteration 401/1500... Est. remaining: 9m 47sbest_combination: {'lookbacks': [141, 171, 178], 'score': np.float64(0.61480681993447), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 40sRunning iteration 421/1500... Est. remaining: 9m 34sRunning iteration 431/1500... Est. remaining: 9m 28sRunning iteration 441/1500... Est. remaining: 9m 21sRunning iteration 451/1500... Est. remaining: 9m 15sRunning iteration 461/1500... Est. remaining: 9m 9sRunning iteration 471/1500... Est. remaining: 9m 3sRunning iteration 481/1500... Est. remaining: 8m 57sRunning iteration 491/1500... Est. remaining: 8m 51sRunning iteration 501/1500... Est. remaining: 8m 46sbest_combination: {'lookbacks': [141, 171, 178], 'score': np.float64(0.61480681993447), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 40sRunning iteration 521/1500... Est. remaining: 8m 34sRunning iteration 531/1500... Est. remaining: 8m 28sRunning iteration 541/1500... Est. remaining: 8m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,211,568,581
Annual Return: 49.07%
Sharpe Ratio: 1.61032
Sortino Ratio: 1.570
Max Drawdown: -55.6%
Avg Drawdown: -11.3%
Normalized Score: 0.864
Lookback periods: [135, 157, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 19sRunning iteration 561/1500... Est. remaining: 8m 13sRunning iteration 571/1500... Est. remaining: 8m 8sRunning iteration 581/1500... Est. remaining: 8m 2sRunning iteration 591/1500... Est. remaining: 7m 56sRunning iteration 601/1500... Est. remaining: 7m 51sbest_combination: {'lookbacks': [135, 157, 188], 'score': np.float64(0.8636530158481545), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 45sRunning iteration 621/1500... Est. remaining: 7m 39sRunning iteration 631/1500... Est. remaining: 7m 34sRunning iteration 641/1500... Est. remaining: 7m 28sRunning iteration 651/1500... Est. remaining: 7m 22sRunning iteration 661/1500... Est. remaining: 7m 17sRunning iteration 671/1500... Est. remaining: 7m 11sRunning iteration 681/1500... Est. remaining: 7m 6sRunning iteration 691/1500... Est. remaining: 7m 0sRunning iteration 701/1500... Est. remaining: 6m 55sbest_combination: {'lookbacks': [135, 157, 188], 'score': np.float64(0.8636530158481545), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 49sRunning iteration 721/1500... Est. remaining: 6m 44sRunning iteration 731/1500... Est. remaining: 6m 38sRunning iteration 741/1500... Est. remaining: 6m 33sRunning iteration 751/1500... Est. remaining: 6m 28sRunning iteration 761/1500... Est. remaining: 6m 22sRunning iteration 771/1500... Est. remaining: 6m 17sRunning iteration 781/1500... Est. remaining: 6m 11sRunning iteration 791/1500... Est. remaining: 6m 6sRunning iteration 801/1500... Est. remaining: 6m 1sbest_combination: {'lookbacks': [135, 157, 188], 'score': np.float64(0.8636530158481545), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 55sRunning iteration 821/1500... Est. remaining: 5m 50sRunning iteration 831/1500... Est. remaining: 5m 45sRunning iteration 841/1500... Est. remaining: 5m 39sRunning iteration 851/1500... Est. remaining: 5m 34sRunning iteration 861/1500... Est. remaining: 5m 29sRunning iteration 871/1500... Est. remaining: 5m 23sRunning iteration 881/1500... Est. remaining: 5m 18sRunning iteration 891/1500... Est. remaining: 5m 13sRunning iteration 901/1500... Est. remaining: 5m 7sbest_combination: {'lookbacks': [135, 157, 188], 'score': np.float64(0.8636530158481545), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 2sRunning iteration 921/1500... Est. remaining: 4m 57sRunning iteration 931/1500... Est. remaining: 4m 51sRunning iteration 941/1500... Est. remaining: 4m 46sRunning iteration 951/1500... Est. remaining: 4m 41sRunning iteration 961/1500... Est. remaining: 4m 36sRunning iteration 971/1500... Est. remaining: 4m 31sRunning iteration 981/1500... Est. remaining: 4m 25sRunning iteration 991/1500... Est. remaining: 4m 20sRunning iteration 1001/1500... Est. remaining: 4m 15sbest_combination: {'lookbacks': [135, 157, 188], 'score': np.float64(0.8636530158481545), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 10sRunning iteration 1021/1500... Est. remaining: 4m 5sRunning iteration 1031/1500... Est. remaining: 3m 59sRunning iteration 1041/1500... Est. remaining: 3m 54sRunning iteration 1051/1500... Est. remaining: 3m 49sRunning iteration 1061/1500... Est. remaining: 3m 44sRunning iteration 1071/1500... Est. remaining: 3m 39sRunning iteration 1081/1500... Est. remaining: 3m 34sRunning iteration 1091/1500... Est. remaining: 3m 28sRunning iteration 1101/1500... Est. remaining: 3m 23sbest_combination: {'lookbacks': [135, 157, 188], 'score': np.float64(0.8636530158481545), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 18sRunning iteration 1121/1500... Est. remaining: 3m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,227,459,180
Annual Return: 42.66%
Sharpe Ratio: 1.53345
Sortino Ratio: 1.434
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 0.902
Lookback periods: [42, 44, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1131/1500... Est. remaining: 3m 8sRunning iteration 1141/1500... Est. remaining: 3m 3sRunning iteration 1151/1500... Est. remaining: 2m 58sRunning iteration 1161/1500... Est. remaining: 2m 53sRunning iteration 1171/1500... Est. remaining: 2m 47sRunning iteration 1181/1500... Est. remaining: 2m 42sRunning iteration 1191/1500... Est. remaining: 2m 37sRunning iteration 1201/1500... Est. remaining: 2m 32sbest_combination: {'lookbacks': [42, 44, 136], 'score': np.float64(0.9023461013687533), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 27sRunning iteration 1221/1500... Est. remaining: 2m 22sRunning iteration 1231/1500... Est. remaining: 2m 16sRunning iteration 1241/1500... Est. remaining: 2m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,755,358,967
Annual Return: 43.54%
Sharpe Ratio: 1.57883
Sortino Ratio: 1.473
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.085
Lookback periods: [42, 45, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1251/1500... Est. remaining: 2m 7sRunning iteration 1261/1500... Est. remaining: 2m 1sRunning iteration 1271/1500... Est. remaining: 1m 56sRunning iteration 1281/1500... Est. remaining: 1m 51sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [42, 45, 128], 'score': np.float64(1.0852472434086287), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 36sRunning iteration 1321/1500... Est. remaining: 1m 31sRunning iteration 1331/1500... Est. remaining: 1m 26sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,114,574,484
Annual Return: 44.05%
Sharpe Ratio: 1.58340
Sortino Ratio: 1.485
Max Drawdown: -34.9%
Avg Drawdown: -8.7%
Normalized Score: 1.103
Lookback periods: [42, 45, 121] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [42, 45, 121], 'score': np.float64(1.1034520146641795), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.6 minutes
Best normalized score: 1.10
best_combination: {'lookbacks': [42, 45, 121], 'score': np.float64(1.1034520146641795), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 45, 121] (score: 1.1035)

Monte Carlo simulation completed in 12.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 45, 121] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,114,574,484.08
Average Annualized Gain: 44.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Mon Aug 25 19:00:58 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $160,215,597
Annual Return: 32.23%
Sharpe Ratio: 1.11796
Sortino Ratio: 1.021
Max Drawdown: -58.7%
Avg Drawdown: -13.5%
Normalized Score: -1.568
Lookback periods: [49, 130, 278] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $524,997,725
Annual Return: 36.83%
Sharpe Ratio: 1.23632
Sortino Ratio: 1.170
Max Drawdown: -66.9%
Avg Drawdown: -14.2%
Normalized Score: -1.187
Lookback periods: [113, 126, 240] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $929,471,923
Annual Return: 39.11%
Sharpe Ratio: 1.31558
Sortino Ratio: 1.251
Max Drawdown: -65.7%
Avg Drawdown: -14.0%
Normalized Score: -0.810
Lookback periods: [85, 176, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,247,801,792
Annual Return: 40.29%
Sharpe Ratio: 1.34735
Sortino Ratio: 1.299
Max Drawdown: -64.9%
Avg Drawdown: -13.4%
Normalized Score: -0.578
Lookback periods: [172, 274, 274] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 32m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,444,986,368
Annual Return: 44.47%
Sharpe Ratio: 1.45079
Sortino Ratio: 1.419
Max Drawdown: -63.8%
Avg Drawdown: -11.9%
Normalized Score: 0.079
Lookback periods: [169, 176, 230] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,001,715,794
Annual Return: 42.22%
Sharpe Ratio: 1.47550
Sortino Ratio: 1.394
Max Drawdown: -52.3%
Avg Drawdown: -12.1%
Normalized Score: 0.165
Lookback periods: [92, 92, 119] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 25m 19sRunning iteration 31/1500... Est. remaining: 20m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,547,224,831
Annual Return: 44.59%
Sharpe Ratio: 1.46105
Sortino Ratio: 1.424
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.290
Lookback periods: [162, 170, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 19m 8sRunning iteration 51/1500... Est. remaining: 17m 34sRunning iteration 61/1500... Est. remaining: 16m 31sRunning iteration 71/1500... Est. remaining: 15m 42sRunning iteration 81/1500... Est. remaining: 15m 4sRunning iteration 91/1500... Est. remaining: 14m 33sRunning iteration 101/1500... Est. remaining: 14m 8sbest_combination: {'lookbacks': [162, 170, 198], 'score': np.float64(0.29033993519764756), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 47sRunning iteration 121/1500... Est. remaining: 13m 28sRunning iteration 131/1500... Est. remaining: 13m 13sRunning iteration 141/1500... Est. remaining: 12m 58sRunning iteration 151/1500... Est. remaining: 12m 47sRunning iteration 161/1500... Est. remaining: 12m 35sRunning iteration 171/1500... Est. remaining: 12m 25sRunning iteration 181/1500... Est. remaining: 12m 15sRunning iteration 191/1500... Est. remaining: 12m 6sRunning iteration 201/1500... Est. remaining: 11m 57sbest_combination: {'lookbacks': [162, 170, 198], 'score': np.float64(0.29033993519764756), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 49sRunning iteration 221/1500... Est. remaining: 11m 40sRunning iteration 231/1500... Est. remaining: 11m 32sRunning iteration 241/1500... Est. remaining: 11m 25sRunning iteration 251/1500... Est. remaining: 11m 17sRunning iteration 261/1500... Est. remaining: 11m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,542,276,218
Annual Return: 46.46%
Sharpe Ratio: 1.50000
Sortino Ratio: 1.459
Max Drawdown: -59.5%
Avg Drawdown: -11.5%
Normalized Score: 0.434
Lookback periods: [181, 192, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/1500... Est. remaining: 11m 8sRunning iteration 281/1500... Est. remaining: 11m 1sRunning iteration 291/1500... Est. remaining: 10m 55sRunning iteration 301/1500... Est. remaining: 10m 48sbest_combination: {'lookbacks': [181, 192, 201], 'score': np.float64(0.43406746255650397), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,197,822,825
Annual Return: 40.13%
Sharpe Ratio: 1.44788
Sortino Ratio: 1.351
Max Drawdown: -35.3%
Avg Drawdown: -9.1%
Normalized Score: 0.534
Lookback periods: [41, 49, 60] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/1500... Est. remaining: 10m 39sRunning iteration 331/1500... Est. remaining: 10m 32sRunning iteration 341/1500... Est. remaining: 10m 25sRunning iteration 351/1500... Est. remaining: 10m 19sRunning iteration 361/1500... Est. remaining: 10m 12sRunning iteration 371/1500... Est. remaining: 10m 5sRunning iteration 381/1500... Est. remaining: 9m 59sRunning iteration 391/1500... Est. remaining: 9m 53sRunning iteration 401/1500... Est. remaining: 9m 46sbest_combination: {'lookbacks': [41, 49, 60], 'score': np.float64(0.5338735009185823), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,313,873,619
Annual Return: 40.50%
Sharpe Ratio: 1.46864
Sortino Ratio: 1.372
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 0.608
Lookback periods: [40, 50, 55] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 9m 43sRunning iteration 421/1500... Est. remaining: 9m 36sRunning iteration 431/1500... Est. remaining: 9m 30sRunning iteration 441/1500... Est. remaining: 9m 23sRunning iteration 451/1500... Est. remaining: 9m 17sRunning iteration 461/1500... Est. remaining: 9m 10sRunning iteration 471/1500... Est. remaining: 9m 4sRunning iteration 481/1500... Est. remaining: 8m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,269,462,199
Annual Return: 42.74%
Sharpe Ratio: 1.53581
Sortino Ratio: 1.442
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 0.924
Lookback periods: [41, 52, 54] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 8m 54sRunning iteration 501/1500... Est. remaining: 8m 47sbest_combination: {'lookbacks': [41, 52, 54], 'score': np.float64(0.9239026154762249), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 41sRunning iteration 521/1500... Est. remaining: 8m 35sRunning iteration 531/1500... Est. remaining: 8m 29sRunning iteration 541/1500... Est. remaining: 8m 23sRunning iteration 551/1500... Est. remaining: 8m 17sRunning iteration 561/1500... Est. remaining: 8m 11sRunning iteration 571/1500... Est. remaining: 8m 5sRunning iteration 581/1500... Est. remaining: 7m 59sRunning iteration 591/1500... Est. remaining: 7m 53sRunning iteration 601/1500... Est. remaining: 7m 48sbest_combination: {'lookbacks': [41, 52, 54], 'score': np.float64(0.9239026154762249), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 42sRunning iteration 621/1500... Est. remaining: 7m 36sRunning iteration 631/1500... Est. remaining: 7m 30sRunning iteration 641/1500... Est. remaining: 7m 25sRunning iteration 651/1500... Est. remaining: 7m 19sRunning iteration 661/1500... Est. remaining: 7m 13sRunning iteration 671/1500... Est. remaining: 7m 8sRunning iteration 681/1500... Est. remaining: 7m 2sRunning iteration 691/1500... Est. remaining: 6m 57sRunning iteration 701/1500... Est. remaining: 6m 51sbest_combination: {'lookbacks': [41, 52, 54], 'score': np.float64(0.9239026154762249), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 45sRunning iteration 721/1500... Est. remaining: 6m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,171,924,280
Annual Return: 42.56%
Sharpe Ratio: 1.54012
Sortino Ratio: 1.450
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 0.951
Lookback periods: [41, 51, 52] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 6m 36sRunning iteration 741/1500... Est. remaining: 6m 30sRunning iteration 751/1500... Est. remaining: 6m 25sRunning iteration 761/1500... Est. remaining: 6m 19sRunning iteration 771/1500... Est. remaining: 6m 14sRunning iteration 781/1500... Est. remaining: 6m 8sRunning iteration 791/1500... Est. remaining: 6m 3sRunning iteration 801/1500... Est. remaining: 5m 57sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(0.9512175511457587), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 52sRunning iteration 821/1500... Est. remaining: 5m 47sRunning iteration 831/1500... Est. remaining: 5m 41sRunning iteration 841/1500... Est. remaining: 5m 36sRunning iteration 851/1500... Est. remaining: 5m 30sRunning iteration 861/1500... Est. remaining: 5m 25sRunning iteration 871/1500... Est. remaining: 5m 20sRunning iteration 881/1500... Est. remaining: 5m 15sRunning iteration 891/1500... Est. remaining: 5m 9sRunning iteration 901/1500... Est. remaining: 5m 4sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(0.9512175511457587), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 59sRunning iteration 921/1500... Est. remaining: 4m 53sRunning iteration 931/1500... Est. remaining: 4m 48sRunning iteration 941/1500... Est. remaining: 4m 43sRunning iteration 951/1500... Est. remaining: 4m 38sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 17sRunning iteration 1001/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(0.9512175511457587), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(0.9512175511457587), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(0.9512175511457587), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(0.9512175511457587), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(0.9512175511457587), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.3 minutes
Best normalized score: 0.95
best_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(0.9512175511457587), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 51, 52] (score: 0.9512)

Monte Carlo simulation completed in 12.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 51, 52] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 105 selections (25.2%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pine: 87 selections (20.9%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $2,171,924,279.55
Average Annualized Gain: 42.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Mon Aug 25 19:13:26 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,078,285,139
Annual Return: 39.70%
Sharpe Ratio: 1.31335
Sortino Ratio: 1.267
Max Drawdown: -66.4%
Avg Drawdown: -13.6%
Normalized Score: -1.016
Lookback periods: [209, 224, 270] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,433,846,571
Annual Return: 43.02%
Sharpe Ratio: 1.40663
Sortino Ratio: 1.367
Max Drawdown: -63.3%
Avg Drawdown: -12.5%
Normalized Score: -0.436
Lookback periods: [144, 160, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,115,316,671
Annual Return: 42.45%
Sharpe Ratio: 1.42629
Sortino Ratio: 1.355
Max Drawdown: -56.9%
Avg Drawdown: -12.8%
Normalized Score: -0.355
Lookback periods: [97, 157, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,404,585,871
Annual Return: 42.97%
Sharpe Ratio: 1.45514
Sortino Ratio: 1.386
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: -0.133
Lookback periods: [94, 132, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 32sRunning iteration 31/1500... Est. remaining: 18m 27sRunning iteration 41/1500... Est. remaining: 16m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,925,093,729
Annual Return: 42.06%
Sharpe Ratio: 1.45831
Sortino Ratio: 1.375
Max Drawdown: -52.3%
Avg Drawdown: -10.0%
Normalized Score: 0.175
Lookback periods: [42, 107, 108] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 16m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,909,752,148
Annual Return: 46.73%
Sharpe Ratio: 1.51284
Sortino Ratio: 1.472
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.216
Lookback periods: [179, 194, 207] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 3sRunning iteration 71/1500... Est. remaining: 15m 22sRunning iteration 81/1500... Est. remaining: 14m 51sRunning iteration 91/1500... Est. remaining: 14m 26sRunning iteration 101/1500... Est. remaining: 14m 4sbest_combination: {'lookbacks': [179, 194, 207], 'score': np.float64(0.21626115926120218), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,408,716,693
Annual Return: 40.79%
Sharpe Ratio: 1.42196
Sortino Ratio: 1.340
Max Drawdown: -43.0%
Avg Drawdown: -9.7%
Normalized Score: 0.278
Lookback periods: [47, 50, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 45sRunning iteration 131/1500... Est. remaining: 13m 30sRunning iteration 141/1500... Est. remaining: 13m 15sRunning iteration 151/1500... Est. remaining: 13m 2sRunning iteration 161/1500... Est. remaining: 12m 49sRunning iteration 171/1500... Est. remaining: 12m 38sRunning iteration 181/1500... Est. remaining: 12m 28sRunning iteration 191/1500... Est. remaining: 12m 19sRunning iteration 201/1500... Est. remaining: 12m 9sbest_combination: {'lookbacks': [47, 50, 153], 'score': np.float64(0.2781653184767146), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 1sRunning iteration 221/1500... Est. remaining: 11m 52sRunning iteration 231/1500... Est. remaining: 11m 44sRunning iteration 241/1500... Est. remaining: 11m 36sRunning iteration 251/1500... Est. remaining: 11m 28sRunning iteration 261/1500... Est. remaining: 11m 20sRunning iteration 271/1500... Est. remaining: 11m 13sRunning iteration 281/1500... Est. remaining: 11m 5sRunning iteration 291/1500... Est. remaining: 10m 58sRunning iteration 301/1500... Est. remaining: 10m 51sbest_combination: {'lookbacks': [47, 50, 153], 'score': np.float64(0.2781653184767146), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 44sRunning iteration 321/1500... Est. remaining: 10m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $824,006,574
Annual Return: 38.62%
Sharpe Ratio: 1.41734
Sortino Ratio: 1.306
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 0.476
Lookback periods: [43, 44, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 331/1500... Est. remaining: 10m 35sRunning iteration 341/1500... Est. remaining: 10m 28sRunning iteration 351/1500... Est. remaining: 10m 22sRunning iteration 361/1500... Est. remaining: 10m 16sRunning iteration 371/1500... Est. remaining: 10m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,053,073,806
Annual Return: 39.61%
Sharpe Ratio: 1.42965
Sortino Ratio: 1.337
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 0.507
Lookback periods: [47, 80, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 10m 6sRunning iteration 391/1500... Est. remaining: 10m 0sRunning iteration 401/1500... Est. remaining: 9m 53sbest_combination: {'lookbacks': [47, 80, 98], 'score': np.float64(0.5067121310218706), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 47sRunning iteration 421/1500... Est. remaining: 9m 41sRunning iteration 431/1500... Est. remaining: 9m 34sRunning iteration 441/1500... Est. remaining: 9m 28sRunning iteration 451/1500... Est. remaining: 9m 22sRunning iteration 461/1500... Est. remaining: 9m 16sRunning iteration 471/1500... Est. remaining: 9m 10sRunning iteration 481/1500... Est. remaining: 9m 4sRunning iteration 491/1500... Est. remaining: 8m 58sRunning iteration 501/1500... Est. remaining: 8m 52sbest_combination: {'lookbacks': [47, 80, 98], 'score': np.float64(0.5067121310218706), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 46sRunning iteration 521/1500... Est. remaining: 8m 40sRunning iteration 531/1500... Est. remaining: 8m 34sRunning iteration 541/1500... Est. remaining: 8m 28sRunning iteration 551/1500... Est. remaining: 8m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,672,754,668
Annual Return: 41.49%
Sharpe Ratio: 1.46430
Sortino Ratio: 1.383
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.631
Lookback periods: [49, 80, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 8m 18sRunning iteration 571/1500... Est. remaining: 8m 12sRunning iteration 581/1500... Est. remaining: 8m 7sRunning iteration 591/1500... Est. remaining: 8m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,575,990,285
Annual Return: 41.24%
Sharpe Ratio: 1.47372
Sortino Ratio: 1.380
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 0.647
Lookback periods: [50, 74, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/1500... Est. remaining: 7m 57sbest_combination: {'lookbacks': [50, 74, 98], 'score': np.float64(0.6471894193165701), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 51sRunning iteration 621/1500... Est. remaining: 7m 45sRunning iteration 631/1500... Est. remaining: 7m 40sRunning iteration 641/1500... Est. remaining: 7m 34sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 23sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 11sRunning iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 0sbest_combination: {'lookbacks': [50, 74, 98], 'score': np.float64(0.6471894193165701), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 55sRunning iteration 721/1500... Est. remaining: 6m 49sRunning iteration 731/1500... Est. remaining: 6m 44sRunning iteration 741/1500... Est. remaining: 6m 38sRunning iteration 751/1500... Est. remaining: 6m 33sRunning iteration 761/1500... Est. remaining: 6m 27sRunning iteration 771/1500... Est. remaining: 6m 22sRunning iteration 781/1500... Est. remaining: 6m 16sRunning iteration 791/1500... Est. remaining: 6m 11sRunning iteration 801/1500... Est. remaining: 6m 6sbest_combination: {'lookbacks': [50, 74, 98], 'score': np.float64(0.6471894193165701), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 0sRunning iteration 821/1500... Est. remaining: 5m 55sRunning iteration 831/1500... Est. remaining: 5m 49sRunning iteration 841/1500... Est. remaining: 5m 44sRunning iteration 851/1500... Est. remaining: 5m 38sRunning iteration 861/1500... Est. remaining: 5m 33sRunning iteration 871/1500... Est. remaining: 5m 28sRunning iteration 881/1500... Est. remaining: 5m 22sRunning iteration 891/1500... Est. remaining: 5m 17sRunning iteration 901/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [50, 74, 98], 'score': np.float64(0.6471894193165701), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 6sRunning iteration 921/1500... Est. remaining: 5m 1sRunning iteration 931/1500... Est. remaining: 4m 56sRunning iteration 941/1500... Est. remaining: 9m 36sRunning iteration 951/1500... Est. remaining: 9m 23sRunning iteration 961/1500... Est. remaining: 15m 43sRunning iteration 971/1500... Est. remaining: 15m 18sRunning iteration 981/1500... Est. remaining: 23m 39sRunning iteration 991/1500... Est. remaining: 23m 0sRunning iteration 1001/1500... Est. remaining: 24m 11sbest_combination: {'lookbacks': [50, 74, 98], 'score': np.float64(0.6471894193165701), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 23m 31sRunning iteration 1021/1500... Est. remaining: 26m 40sRunning iteration 1031/1500... Est. remaining: 26m 19sRunning iteration 1041/1500... Est. remaining: 25m 33sRunning iteration 1051/1500... Est. remaining: 24m 51sRunning iteration 1061/1500... Est. remaining: 24m 20sRunning iteration 1071/1500... Est. remaining: 23m 35sRunning iteration 1081/1500... Est. remaining: 22m 59sRunning iteration 1091/1500... Est. remaining: 22m 15sRunning iteration 1101/1500... Est. remaining: 21m 33sbest_combination: {'lookbacks': [50, 74, 98], 'score': np.float64(0.6471894193165701), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 20m 51sRunning iteration 1121/1500... Est. remaining: 20m 9sRunning iteration 1131/1500... Est. remaining: 19m 29sRunning iteration 1141/1500... Est. remaining: 18m 49sRunning iteration 1151/1500... Est. remaining: 18m 9sRunning iteration 1161/1500... Est. remaining: 17m 31sRunning iteration 1171/1500... Est. remaining: 16m 52sRunning iteration 1181/1500... Est. remaining: 16m 15sRunning iteration 1191/1500... Est. remaining: 15m 38sRunning iteration 1201/1500... Est. remaining: 15m 1sbest_combination: {'lookbacks': [50, 74, 98], 'score': np.float64(0.6471894193165701), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 14m 25sRunning iteration 1221/1500... Est. remaining: 13m 49sRunning iteration 1231/1500... Est. remaining: 13m 14sRunning iteration 1241/1500... Est. remaining: 12m 40sRunning iteration 1251/1500... Est. remaining: 12m 6sRunning iteration 1261/1500... Est. remaining: 11m 32sRunning iteration 1271/1500... Est. remaining: 10m 59sRunning iteration 1281/1500... Est. remaining: 10m 26sRunning iteration 1291/1500... Est. remaining: 9m 54sRunning iteration 1301/1500... Est. remaining: 9m 22sbest_combination: {'lookbacks': [50, 74, 98], 'score': np.float64(0.6471894193165701), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 8m 50sRunning iteration 1321/1500... Est. remaining: 8m 19sRunning iteration 1331/1500... Est. remaining: 7m 49sRunning iteration 1341/1500... Est. remaining: 7m 18sRunning iteration 1351/1500... Est. remaining: 6m 48sRunning iteration 1361/1500... Est. remaining: 6m 19sRunning iteration 1371/1500... Est. remaining: 5m 50sRunning iteration 1381/1500... Est. remaining: 5m 21sRunning iteration 1391/1500... Est. remaining: 4m 52sRunning iteration 1401/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [50, 74, 98], 'score': np.float64(0.6471894193165701), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 3m 56sRunning iteration 1421/1500... Est. remaining: 3m 29sRunning iteration 1431/1500... Est. remaining: 3m 2sRunning iteration 1441/1500... Est. remaining: 2m 35sRunning iteration 1451/1500... Est. remaining: 2m 8sRunning iteration 1461/1500... Est. remaining: 1m 42sRunning iteration 1471/1500... Est. remaining: 1m 16sRunning iteration 1481/1500... Est. remaining: 0m 50sRunning iteration 1491/1500... Est. remaining: 0m 25s
Monte Carlo simulation completed in 62.6 minutes
Best normalized score: 0.65
best_combination: {'lookbacks': [50, 74, 98], 'score': np.float64(0.6471894193165701), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 74, 98] (score: 0.6472)

Monte Carlo simulation completed in 62.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 74, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 116 selections (27.9%)
2. naz100_hma: 96 selections (23.1%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $1,575,990,285.23
Average Annualized Gain: 41.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Mon Aug 25 20:16:07 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,829,942,543
Annual Return: 41.85%
Sharpe Ratio: 1.37330
Sortino Ratio: 1.326
Max Drawdown: -66.6%
Avg Drawdown: -13.5%
Normalized Score: -0.651
Lookback periods: [166, 188, 282] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,537,680,644
Annual Return: 43.20%
Sharpe Ratio: 1.43260
Sortino Ratio: 1.385
Max Drawdown: -57.2%
Avg Drawdown: -13.3%
Normalized Score: -0.196
Lookback periods: [138, 141, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $574,904,315
Annual Return: 37.19%
Sharpe Ratio: 1.35578
Sortino Ratio: 1.259
Max Drawdown: -36.0%
Avg Drawdown: -10.4%
Normalized Score: -0.094
Lookback periods: [41, 64, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 20m 4sRunning iteration 31/1500... Est. remaining: 17m 19sRunning iteration 41/1500... Est. remaining: 15m 48sRunning iteration 51/1500... Est. remaining: 14m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,362,924,738
Annual Return: 48.21%
Sharpe Ratio: 1.59469
Sortino Ratio: 1.551
Max Drawdown: -56.0%
Avg Drawdown: -11.2%
Normalized Score: 0.899
Lookback periods: [136, 156, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 14m 43sRunning iteration 71/1500... Est. remaining: 14m 11sRunning iteration 81/1500... Est. remaining: 13m 46sRunning iteration 91/1500... Est. remaining: 13m 25sRunning iteration 101/1500... Est. remaining: 13m 10sbest_combination: {'lookbacks': [136, 156, 186], 'score': np.float64(0.8991522991234959), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 56sRunning iteration 121/1500... Est. remaining: 12m 42sRunning iteration 131/1500... Est. remaining: 12m 30sRunning iteration 141/1500... Est. remaining: 12m 19sRunning iteration 151/1500... Est. remaining: 12m 8sRunning iteration 161/1500... Est. remaining: 11m 59sRunning iteration 171/1500... Est. remaining: 11m 51sRunning iteration 181/1500... Est. remaining: 11m 42sRunning iteration 191/1500... Est. remaining: 11m 34sRunning iteration 201/1500... Est. remaining: 11m 26sbest_combination: {'lookbacks': [136, 156, 186], 'score': np.float64(0.8991522991234959), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 19sRunning iteration 221/1500... Est. remaining: 11m 12sRunning iteration 231/1500... Est. remaining: 11m 4sRunning iteration 241/1500... Est. remaining: 10m 57sRunning iteration 251/1500... Est. remaining: 10m 50sRunning iteration 261/1500... Est. remaining: 10m 43sRunning iteration 271/1500... Est. remaining: 10m 36sRunning iteration 281/1500... Est. remaining: 10m 29sRunning iteration 291/1500... Est. remaining: 10m 22sRunning iteration 301/1500... Est. remaining: 10m 15sbest_combination: {'lookbacks': [136, 156, 186], 'score': np.float64(0.8991522991234959), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 9sRunning iteration 321/1500... Est. remaining: 10m 3sRunning iteration 331/1500... Est. remaining: 9m 56sRunning iteration 341/1500... Est. remaining: 9m 50sRunning iteration 351/1500... Est. remaining: 9m 44sRunning iteration 361/1500... Est. remaining: 9m 38sRunning iteration 371/1500... Est. remaining: 9m 33sRunning iteration 381/1500... Est. remaining: 9m 27sRunning iteration 391/1500... Est. remaining: 9m 22sRunning iteration 401/1500... Est. remaining: 9m 16sbest_combination: {'lookbacks': [136, 156, 186], 'score': np.float64(0.8991522991234959), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 11sRunning iteration 421/1500... Est. remaining: 9m 5sRunning iteration 431/1500... Est. remaining: 9m 0sRunning iteration 441/1500... Est. remaining: 10m 57sRunning iteration 451/1500... Est. remaining: 10m 48sRunning iteration 461/1500... Est. remaining: 10m 39sRunning iteration 471/1500... Est. remaining: 10m 30sRunning iteration 481/1500... Est. remaining: 10m 21sRunning iteration 491/1500... Est. remaining: 10m 13sRunning iteration 501/1500... Est. remaining: 10m 4sbest_combination: {'lookbacks': [136, 156, 186], 'score': np.float64(0.8991522991234959), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 56sRunning iteration 521/1500... Est. remaining: 9m 47sRunning iteration 531/1500... Est. remaining: 9m 39sRunning iteration 541/1500... Est. remaining: 9m 31sRunning iteration 551/1500... Est. remaining: 9m 24sRunning iteration 561/1500... Est. remaining: 9m 16sRunning iteration 571/1500... Est. remaining: 9m 8sRunning iteration 581/1500... Est. remaining: 9m 1sRunning iteration 591/1500... Est. remaining: 8m 53sRunning iteration 601/1500... Est. remaining: 8m 46sbest_combination: {'lookbacks': [136, 156, 186], 'score': np.float64(0.8991522991234959), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 39sRunning iteration 621/1500... Est. remaining: 8m 32sRunning iteration 631/1500... Est. remaining: 8m 25sRunning iteration 641/1500... Est. remaining: 8m 17sRunning iteration 651/1500... Est. remaining: 8m 10sRunning iteration 661/1500... Est. remaining: 8m 3sRunning iteration 671/1500... Est. remaining: 7m 56sRunning iteration 681/1500... Est. remaining: 7m 50sRunning iteration 691/1500... Est. remaining: 7m 43sRunning iteration 701/1500... Est. remaining: 7m 36sbest_combination: {'lookbacks': [136, 156, 186], 'score': np.float64(0.8991522991234959), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 30sRunning iteration 721/1500... Est. remaining: 7m 23sRunning iteration 731/1500... Est. remaining: 7m 17sRunning iteration 741/1500... Est. remaining: 7m 10sRunning iteration 751/1500... Est. remaining: 7m 3sRunning iteration 761/1500... Est. remaining: 6m 57sRunning iteration 771/1500... Est. remaining: 6m 50sRunning iteration 781/1500... Est. remaining: 6m 44sRunning iteration 791/1500... Est. remaining: 6m 38sRunning iteration 801/1500... Est. remaining: 6m 31sbest_combination: {'lookbacks': [136, 156, 186], 'score': np.float64(0.8991522991234959), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 25sRunning iteration 821/1500... Est. remaining: 6m 19sRunning iteration 831/1500... Est. remaining: 6m 13sRunning iteration 841/1500... Est. remaining: 6m 6sRunning iteration 851/1500... Est. remaining: 6m 0sRunning iteration 861/1500... Est. remaining: 5m 54sRunning iteration 871/1500... Est. remaining: 5m 48sRunning iteration 881/1500... Est. remaining: 5m 42sRunning iteration 891/1500... Est. remaining: 5m 36sRunning iteration 901/1500... Est. remaining: 5m 30sbest_combination: {'lookbacks': [136, 156, 186], 'score': np.float64(0.8991522991234959), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 24sRunning iteration 921/1500... Est. remaining: 5m 19sRunning iteration 931/1500... Est. remaining: 5m 13sRunning iteration 941/1500... Est. remaining: 5m 7sRunning iteration 951/1500... Est. remaining: 5m 1sRunning iteration 961/1500... Est. remaining: 4m 55sRunning iteration 971/1500... Est. remaining: 4m 49sRunning iteration 981/1500... Est. remaining: 4m 44sRunning iteration 991/1500... Est. remaining: 4m 38sRunning iteration 1001/1500... Est. remaining: 4m 32sbest_combination: {'lookbacks': [136, 156, 186], 'score': np.float64(0.8991522991234959), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 26sRunning iteration 1021/1500... Est. remaining: 4m 20sRunning iteration 1031/1500... Est. remaining: 4m 15sRunning iteration 1041/1500... Est. remaining: 4m 9sRunning iteration 1051/1500... Est. remaining: 4m 3sRunning iteration 1061/1500... Est. remaining: 3m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,585,481,996
Annual Return: 49.22%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.572
Max Drawdown: -57.2%
Avg Drawdown: -10.7%
Normalized Score: 1.065
Lookback periods: [138, 157, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1071/1500... Est. remaining: 3m 53sRunning iteration 1081/1500... Est. remaining: 3m 47sRunning iteration 1091/1500... Est. remaining: 3m 41sRunning iteration 1101/1500... Est. remaining: 3m 36sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(1.0649754172198365), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 30sRunning iteration 1121/1500... Est. remaining: 3m 25sRunning iteration 1131/1500... Est. remaining: 3m 19sRunning iteration 1141/1500... Est. remaining: 3m 13sRunning iteration 1151/1500... Est. remaining: 3m 8sRunning iteration 1161/1500... Est. remaining: 3m 2sRunning iteration 1171/1500... Est. remaining: 2m 57sRunning iteration 1181/1500... Est. remaining: 2m 51sRunning iteration 1191/1500... Est. remaining: 2m 46sRunning iteration 1201/1500... Est. remaining: 2m 40sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(1.0649754172198365), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 35sRunning iteration 1221/1500... Est. remaining: 2m 29sRunning iteration 1231/1500... Est. remaining: 2m 24sRunning iteration 1241/1500... Est. remaining: 2m 18sRunning iteration 1251/1500... Est. remaining: 2m 13sRunning iteration 1261/1500... Est. remaining: 2m 8sRunning iteration 1271/1500... Est. remaining: 2m 2sRunning iteration 1281/1500... Est. remaining: 1m 57sRunning iteration 1291/1500... Est. remaining: 1m 51sRunning iteration 1301/1500... Est. remaining: 1m 46sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(1.0649754172198365), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 41sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 30sRunning iteration 1341/1500... Est. remaining: 1m 25sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 14sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(1.0649754172198365), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.2 minutes
Best normalized score: 1.06
best_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(1.0649754172198365), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [138, 157, 171] (score: 1.0650)

Monte Carlo simulation completed in 13.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [138, 157, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,585,481,995.89
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Mon Aug 25 20:29:25 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $437,557,761
Annual Return: 36.12%
Sharpe Ratio: 1.23452
Sortino Ratio: 1.157
Max Drawdown: -65.5%
Avg Drawdown: -14.9%
Normalized Score: -1.524
Lookback periods: [74, 108, 118] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $662,665,992
Annual Return: 37.76%
Sharpe Ratio: 1.25099
Sortino Ratio: 1.202
Max Drawdown: -70.8%
Avg Drawdown: -13.5%
Normalized Score: -1.284
Lookback periods: [136, 225, 280] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,879,013,473
Annual Return: 41.96%
Sharpe Ratio: 1.39366
Sortino Ratio: 1.345
Max Drawdown: -63.7%
Avg Drawdown: -12.4%
Normalized Score: -0.359
Lookback periods: [229, 241, 293] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,217,903,437
Annual Return: 44.18%
Sharpe Ratio: 1.45362
Sortino Ratio: 1.416
Max Drawdown: -65.2%
Avg Drawdown: -12.9%
Normalized Score: -0.061
Lookback periods: [147, 168, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 30sRunning iteration 21/1500... Est. remaining: 21m 7sRunning iteration 31/1500... Est. remaining: 18m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,256,742,805
Annual Return: 44.23%
Sharpe Ratio: 1.46620
Sortino Ratio: 1.416
Max Drawdown: -59.2%
Avg Drawdown: -13.1%
Normalized Score: 0.038
Lookback periods: [147, 149, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 6sRunning iteration 51/1500... Est. remaining: 15m 54sRunning iteration 61/1500... Est. remaining: 15m 7sRunning iteration 71/1500... Est. remaining: 14m 31sRunning iteration 81/1500... Est. remaining: 14m 3sRunning iteration 91/1500... Est. remaining: 13m 40sRunning iteration 101/1500... Est. remaining: 13m 21sbest_combination: {'lookbacks': [147, 149, 160], 'score': np.float64(0.037767981070503345), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 4sRunning iteration 121/1500... Est. remaining: 12m 50sRunning iteration 131/1500... Est. remaining: 12m 37sRunning iteration 141/1500... Est. remaining: 12m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,367,223,048
Annual Return: 44.37%
Sharpe Ratio: 1.44785
Sortino Ratio: 1.404
Max Drawdown: -60.2%
Avg Drawdown: -11.7%
Normalized Score: 0.093
Lookback periods: [167, 192, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,113,504,629
Annual Return: 45.21%
Sharpe Ratio: 1.51425
Sortino Ratio: 1.465
Max Drawdown: -61.6%
Avg Drawdown: -12.4%
Normalized Score: 0.274
Lookback periods: [108, 144, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 12m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,511,569,384
Annual Return: 45.59%
Sharpe Ratio: 1.51420
Sortino Ratio: 1.473
Max Drawdown: -58.5%
Avg Drawdown: -12.6%
Normalized Score: 0.343
Lookback periods: [140, 149, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 12m 34sRunning iteration 171/1500... Est. remaining: 12m 22sRunning iteration 181/1500... Est. remaining: 12m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,129,931,634
Annual Return: 46.13%
Sharpe Ratio: 1.51935
Sortino Ratio: 1.472
Max Drawdown: -56.4%
Avg Drawdown: -12.4%
Normalized Score: 0.441
Lookback periods: [129, 149, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 12m 9sRunning iteration 201/1500... Est. remaining: 11m 59sbest_combination: {'lookbacks': [129, 149, 181], 'score': np.float64(0.4408578192477918), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 50sRunning iteration 221/1500... Est. remaining: 11m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,000,785,417
Annual Return: 47.45%
Sharpe Ratio: 1.56386
Sortino Ratio: 1.523
Max Drawdown: -58.5%
Avg Drawdown: -11.5%
Normalized Score: 0.715
Lookback periods: [129, 155, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 11m 41sRunning iteration 241/1500... Est. remaining: 11m 33sRunning iteration 251/1500... Est. remaining: 11m 25sRunning iteration 261/1500... Est. remaining: 11m 16sRunning iteration 271/1500... Est. remaining: 11m 8sRunning iteration 281/1500... Est. remaining: 11m 0sRunning iteration 291/1500... Est. remaining: 10m 53sRunning iteration 301/1500... Est. remaining: 10m 45sbest_combination: {'lookbacks': [129, 155, 179], 'score': np.float64(0.7148542482047899), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 38sRunning iteration 321/1500... Est. remaining: 10m 31sRunning iteration 331/1500... Est. remaining: 10m 24sRunning iteration 341/1500... Est. remaining: 10m 17sRunning iteration 351/1500... Est. remaining: 10m 10sRunning iteration 361/1500... Est. remaining: 10m 4sRunning iteration 371/1500... Est. remaining: 9m 57sRunning iteration 381/1500... Est. remaining: 9m 51sRunning iteration 391/1500... Est. remaining: 9m 44sRunning iteration 401/1500... Est. remaining: 9m 38sbest_combination: {'lookbacks': [129, 155, 179], 'score': np.float64(0.7148542482047899), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 32sRunning iteration 421/1500... Est. remaining: 9m 25sRunning iteration 431/1500... Est. remaining: 9m 19sRunning iteration 441/1500... Est. remaining: 9m 13sRunning iteration 451/1500... Est. remaining: 9m 7sRunning iteration 461/1500... Est. remaining: 9m 1sRunning iteration 471/1500... Est. remaining: 8m 55sRunning iteration 481/1500... Est. remaining: 8m 49sRunning iteration 491/1500... Est. remaining: 8m 43sRunning iteration 501/1500... Est. remaining: 8m 37sbest_combination: {'lookbacks': [129, 155, 179], 'score': np.float64(0.7148542482047899), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 32sRunning iteration 521/1500... Est. remaining: 8m 26sRunning iteration 531/1500... Est. remaining: 8m 21sRunning iteration 541/1500... Est. remaining: 8m 15sRunning iteration 551/1500... Est. remaining: 8m 9sRunning iteration 561/1500... Est. remaining: 8m 4sRunning iteration 571/1500... Est. remaining: 7m 58sRunning iteration 581/1500... Est. remaining: 7m 52sRunning iteration 591/1500... Est. remaining: 7m 47sRunning iteration 601/1500... Est. remaining: 7m 41sbest_combination: {'lookbacks': [129, 155, 179], 'score': np.float64(0.7148542482047899), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 36sRunning iteration 621/1500... Est. remaining: 7m 30sRunning iteration 631/1500... Est. remaining: 7m 24sRunning iteration 641/1500... Est. remaining: 7m 19sRunning iteration 651/1500... Est. remaining: 7m 14sRunning iteration 661/1500... Est. remaining: 7m 8sRunning iteration 671/1500... Est. remaining: 7m 3sRunning iteration 681/1500... Est. remaining: 6m 57sRunning iteration 691/1500... Est. remaining: 6m 52sRunning iteration 701/1500... Est. remaining: 6m 47sbest_combination: {'lookbacks': [129, 155, 179], 'score': np.float64(0.7148542482047899), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 42sRunning iteration 721/1500... Est. remaining: 6m 36sRunning iteration 731/1500... Est. remaining: 6m 31sRunning iteration 741/1500... Est. remaining: 6m 26sRunning iteration 751/1500... Est. remaining: 6m 21sRunning iteration 761/1500... Est. remaining: 6m 16sRunning iteration 771/1500... Est. remaining: 6m 10sRunning iteration 781/1500... Est. remaining: 6m 5sRunning iteration 791/1500... Est. remaining: 6m 0sRunning iteration 801/1500... Est. remaining: 5m 55sbest_combination: {'lookbacks': [129, 155, 179], 'score': np.float64(0.7148542482047899), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 49sRunning iteration 821/1500... Est. remaining: 5m 44sRunning iteration 831/1500... Est. remaining: 5m 39sRunning iteration 841/1500... Est. remaining: 5m 34sRunning iteration 851/1500... Est. remaining: 5m 28sRunning iteration 861/1500... Est. remaining: 5m 23sRunning iteration 871/1500... Est. remaining: 5m 18sRunning iteration 881/1500... Est. remaining: 5m 13sRunning iteration 891/1500... Est. remaining: 5m 8sRunning iteration 901/1500... Est. remaining: 5m 2sbest_combination: {'lookbacks': [129, 155, 179], 'score': np.float64(0.7148542482047899), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 57sRunning iteration 921/1500... Est. remaining: 4m 52sRunning iteration 931/1500... Est. remaining: 4m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,213,508,617
Annual Return: 44.18%
Sharpe Ratio: 1.60541
Sortino Ratio: 1.499
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.159
Lookback periods: [40, 51, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 4m 43sRunning iteration 951/1500... Est. remaining: 4m 37sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 17sRunning iteration 1001/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [40, 51, 97], 'score': np.float64(1.1591016846923203), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,584,980,362
Annual Return: 44.63%
Sharpe Ratio: 1.60474
Sortino Ratio: 1.512
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.161
Lookback periods: [36, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1031/1500... Est. remaining: 3m 57sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 21sbest_combination: {'lookbacks': [36, 52, 95], 'score': np.float64(1.160668124116471), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 16sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [36, 52, 95], 'score': np.float64(1.160668124116471), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [36, 52, 95], 'score': np.float64(1.160668124116471), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [36, 52, 95], 'score': np.float64(1.160668124116471), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.16
best_combination: {'lookbacks': [36, 52, 95], 'score': np.float64(1.160668124116471), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [36, 52, 95] (score: 1.1607)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [36, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 102 selections (24.5%)
2. naz100_hma: 99 selections (23.8%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 77 selections (18.5%)
5. cash: 60 selections (14.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,584,980,362.48
Average Annualized Gain: 44.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Mon Aug 25 20:41:57 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $553,863,873
Annual Return: 37.04%
Sharpe Ratio: 1.31470
Sortino Ratio: 1.218
Max Drawdown: -59.9%
Avg Drawdown: -12.2%
Normalized Score: -0.578
Lookback periods: [52, 61, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,984,402,245
Annual Return: 42.18%
Sharpe Ratio: 1.42385
Sortino Ratio: 1.359
Max Drawdown: -61.8%
Avg Drawdown: -12.2%
Normalized Score: -0.146
Lookback periods: [104, 131, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,912,530,693
Annual Return: 42.03%
Sharpe Ratio: 1.50941
Sortino Ratio: 1.414
Max Drawdown: -53.3%
Avg Drawdown: -10.0%
Normalized Score: 0.251
Lookback periods: [49, 51, 61] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 28sRunning iteration 21/1500... Est. remaining: 19m 50sRunning iteration 31/1500... Est. remaining: 17m 5sRunning iteration 41/1500... Est. remaining: 15m 45sRunning iteration 51/1500... Est. remaining: 14m 57sRunning iteration 61/1500... Est. remaining: 14m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,639,480,642
Annual Return: 45.71%
Sharpe Ratio: 1.49745
Sortino Ratio: 1.458
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.286
Lookback periods: [155, 167, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 14m 18sRunning iteration 81/1500... Est. remaining: 13m 53sRunning iteration 91/1500... Est. remaining: 13m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,304,078,564
Annual Return: 47.01%
Sharpe Ratio: 1.55699
Sortino Ratio: 1.505
Max Drawdown: -56.4%
Avg Drawdown: -11.7%
Normalized Score: 0.434
Lookback periods: [139, 148, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 13m 31sbest_combination: {'lookbacks': [139, 148, 149], 'score': np.float64(0.43449227316281325), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 15sRunning iteration 121/1500... Est. remaining: 13m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,063,089,297
Annual Return: 42.34%
Sharpe Ratio: 1.53148
Sortino Ratio: 1.428
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 0.633
Lookback periods: [47, 56, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 0sRunning iteration 141/1500... Est. remaining: 12m 46sRunning iteration 151/1500... Est. remaining: 12m 34sRunning iteration 161/1500... Est. remaining: 12m 23sRunning iteration 171/1500... Est. remaining: 12m 12sRunning iteration 181/1500... Est. remaining: 12m 2sRunning iteration 191/1500... Est. remaining: 11m 53sRunning iteration 201/1500... Est. remaining: 11m 44sbest_combination: {'lookbacks': [47, 56, 83], 'score': np.float64(0.6328159783540771), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 36sRunning iteration 221/1500... Est. remaining: 11m 28sRunning iteration 231/1500... Est. remaining: 11m 20sRunning iteration 241/1500... Est. remaining: 11m 12sRunning iteration 251/1500... Est. remaining: 11m 5sRunning iteration 261/1500... Est. remaining: 10m 58sRunning iteration 271/1500... Est. remaining: 10m 50sRunning iteration 281/1500... Est. remaining: 10m 43sRunning iteration 291/1500... Est. remaining: 10m 37sRunning iteration 301/1500... Est. remaining: 10m 30sbest_combination: {'lookbacks': [47, 56, 83], 'score': np.float64(0.6328159783540771), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 23sRunning iteration 321/1500... Est. remaining: 10m 17sRunning iteration 331/1500... Est. remaining: 10m 10sRunning iteration 341/1500... Est. remaining: 10m 4sRunning iteration 351/1500... Est. remaining: 9m 57sRunning iteration 361/1500... Est. remaining: 9m 51sRunning iteration 371/1500... Est. remaining: 9m 44sRunning iteration 381/1500... Est. remaining: 9m 38sRunning iteration 391/1500... Est. remaining: 9m 32sRunning iteration 401/1500... Est. remaining: 9m 26sbest_combination: {'lookbacks': [47, 56, 83], 'score': np.float64(0.6328159783540771), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 20sRunning iteration 421/1500... Est. remaining: 9m 15sRunning iteration 431/1500... Est. remaining: 9m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,873,723,324
Annual Return: 43.71%
Sharpe Ratio: 1.57476
Sortino Ratio: 1.470
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 0.778
Lookback periods: [47, 52, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 6sRunning iteration 451/1500... Est. remaining: 9m 0sRunning iteration 461/1500... Est. remaining: 8m 54sRunning iteration 471/1500... Est. remaining: 8m 48sRunning iteration 481/1500... Est. remaining: 8m 42sRunning iteration 491/1500... Est. remaining: 8m 37sRunning iteration 501/1500... Est. remaining: 8m 31sbest_combination: {'lookbacks': [47, 52, 80], 'score': np.float64(0.7777407955418347), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 25sRunning iteration 521/1500... Est. remaining: 8m 20sRunning iteration 531/1500... Est. remaining: 8m 14sRunning iteration 541/1500... Est. remaining: 8m 9sRunning iteration 551/1500... Est. remaining: 8m 3sRunning iteration 561/1500... Est. remaining: 7m 58sRunning iteration 571/1500... Est. remaining: 7m 52sRunning iteration 581/1500... Est. remaining: 7m 47sRunning iteration 591/1500... Est. remaining: 7m 41sRunning iteration 601/1500... Est. remaining: 7m 36sbest_combination: {'lookbacks': [47, 52, 80], 'score': np.float64(0.7777407955418347), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 31sRunning iteration 621/1500... Est. remaining: 7m 26sRunning iteration 631/1500... Est. remaining: 7m 20sRunning iteration 641/1500... Est. remaining: 7m 15sRunning iteration 651/1500... Est. remaining: 7m 10sRunning iteration 661/1500... Est. remaining: 7m 4sRunning iteration 671/1500... Est. remaining: 6m 59sRunning iteration 681/1500... Est. remaining: 6m 53sRunning iteration 691/1500... Est. remaining: 6m 48sRunning iteration 701/1500... Est. remaining: 6m 43sbest_combination: {'lookbacks': [47, 52, 80], 'score': np.float64(0.7777407955418347), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 38sRunning iteration 721/1500... Est. remaining: 6m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,735,062,491
Annual Return: 43.51%
Sharpe Ratio: 1.57624
Sortino Ratio: 1.472
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 0.781
Lookback periods: [47, 53, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 6m 28sRunning iteration 741/1500... Est. remaining: 6m 23sRunning iteration 751/1500... Est. remaining: 6m 18sRunning iteration 761/1500... Est. remaining: 6m 13sRunning iteration 771/1500... Est. remaining: 6m 7sRunning iteration 781/1500... Est. remaining: 6m 2sRunning iteration 791/1500... Est. remaining: 5m 57sRunning iteration 801/1500... Est. remaining: 5m 52sbest_combination: {'lookbacks': [47, 53, 87], 'score': np.float64(0.7811510122668133), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 46sRunning iteration 821/1500... Est. remaining: 5m 41sRunning iteration 831/1500... Est. remaining: 5m 36sRunning iteration 841/1500... Est. remaining: 5m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,403,635,225
Annual Return: 44.41%
Sharpe Ratio: 1.59365
Sortino Ratio: 1.503
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 0.831
Lookback periods: [48, 50, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 5m 27sRunning iteration 861/1500... Est. remaining: 5m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,178,387,168
Annual Return: 44.13%
Sharpe Ratio: 1.58750
Sortino Ratio: 1.494
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 0.860
Lookback periods: [47, 53, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 871/1500... Est. remaining: 5m 17sRunning iteration 881/1500... Est. remaining: 5m 12sRunning iteration 891/1500... Est. remaining: 5m 7sRunning iteration 901/1500... Est. remaining: 5m 2sbest_combination: {'lookbacks': [47, 53, 90], 'score': np.float64(0.8598949358084568), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,622,827,200
Annual Return: 44.68%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 0.933
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 921/1500... Est. remaining: 4m 52sRunning iteration 931/1500... Est. remaining: 4m 47sRunning iteration 941/1500... Est. remaining: 4m 42sRunning iteration 951/1500... Est. remaining: 4m 37sRunning iteration 961/1500... Est. remaining: 4m 31sRunning iteration 971/1500... Est. remaining: 4m 26sRunning iteration 981/1500... Est. remaining: 4m 21sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(0.9332755765333719), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 50sRunning iteration 1051/1500... Est. remaining: 3m 45sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(0.9332755765333719), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 0.939
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(0.9392309037986823), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(0.9392309037986823), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,193,447,128
Annual Return: 45.29%
Sharpe Ratio: 1.62415
Sortino Ratio: 1.538
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.000
Lookback periods: [47, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,398,891,000
Annual Return: 45.49%
Sharpe Ratio: 1.64063
Sortino Ratio: 1.549
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.015
Lookback periods: [46, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [46, 51, 95], 'score': np.float64(1.0152701353710165), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,008,937,375
Annual Return: 46.03%
Sharpe Ratio: 1.67914
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.117
Lookback periods: [41, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.12
best_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.1165966627366948), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 52, 98] (score: 1.1166)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,008,937,374.54
Average Annualized Gain: 46.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Mon Aug 25 20:54:31 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $271,681,557
Annual Return: 34.26%
Sharpe Ratio: 1.20596
Sortino Ratio: 1.126
Max Drawdown: -59.2%
Avg Drawdown: -12.7%
Normalized Score: -1.113
Lookback periods: [26, 171, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,407,907,163
Annual Return: 40.78%
Sharpe Ratio: 1.33740
Sortino Ratio: 1.292
Max Drawdown: -74.5%
Avg Drawdown: -13.9%
Normalized Score: -0.788
Lookback periods: [246, 252, 257] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $957,729,369
Annual Return: 39.23%
Sharpe Ratio: 1.35153
Sortino Ratio: 1.270
Max Drawdown: -55.0%
Avg Drawdown: -12.8%
Normalized Score: -0.486
Lookback periods: [93, 173, 295] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,843,822,817
Annual Return: 43.67%
Sharpe Ratio: 1.44433
Sortino Ratio: 1.407
Max Drawdown: -67.4%
Avg Drawdown: -12.7%
Normalized Score: -0.184
Lookback periods: [126, 130, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 26sRunning iteration 21/1500... Est. remaining: 21m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,101,736,272
Annual Return: 42.42%
Sharpe Ratio: 1.41683
Sortino Ratio: 1.363
Max Drawdown: -55.1%
Avg Drawdown: -12.9%
Normalized Score: -0.149
Lookback periods: [102, 134, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,076,038,592
Annual Return: 43.99%
Sharpe Ratio: 1.44781
Sortino Ratio: 1.404
Max Drawdown: -64.6%
Avg Drawdown: -12.3%
Normalized Score: -0.091
Lookback periods: [179, 250, 298] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 0sRunning iteration 41/1500... Est. remaining: 17m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,780,297,225
Annual Return: 43.57%
Sharpe Ratio: 1.42945
Sortino Ratio: 1.388
Max Drawdown: -59.0%
Avg Drawdown: -12.0%
Normalized Score: -0.041
Lookback periods: [157, 176, 232] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 17m 16sRunning iteration 61/1500... Est. remaining: 16m 16sRunning iteration 71/1500... Est. remaining: 15m 32sRunning iteration 81/1500... Est. remaining: 14m 57sRunning iteration 91/1500... Est. remaining: 14m 29sRunning iteration 101/1500... Est. remaining: 14m 6sbest_combination: {'lookbacks': [157, 176, 232], 'score': np.float64(-0.040705712991511156), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,079,376,641
Annual Return: 45.17%
Sharpe Ratio: 1.47183
Sortino Ratio: 1.434
Max Drawdown: -59.9%
Avg Drawdown: -11.5%
Normalized Score: 0.169
Lookback periods: [172, 202, 218] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 1sRunning iteration 121/1500... Est. remaining: 13m 43sRunning iteration 131/1500... Est. remaining: 13m 27sRunning iteration 141/1500... Est. remaining: 13m 13sRunning iteration 151/1500... Est. remaining: 12m 59sRunning iteration 161/1500... Est. remaining: 12m 47sRunning iteration 171/1500... Est. remaining: 12m 35sRunning iteration 181/1500... Est. remaining: 12m 23sRunning iteration 191/1500... Est. remaining: 12m 12sRunning iteration 201/1500... Est. remaining: 12m 2sbest_combination: {'lookbacks': [172, 202, 218], 'score': np.float64(0.16902186910333872), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 53sRunning iteration 221/1500... Est. remaining: 11m 44sRunning iteration 231/1500... Est. remaining: 11m 35sRunning iteration 241/1500... Est. remaining: 11m 26sRunning iteration 251/1500... Est. remaining: 11m 18sRunning iteration 261/1500... Est. remaining: 11m 10sRunning iteration 271/1500... Est. remaining: 11m 2sRunning iteration 281/1500... Est. remaining: 10m 54sRunning iteration 291/1500... Est. remaining: 10m 46sRunning iteration 301/1500... Est. remaining: 10m 39sbest_combination: {'lookbacks': [172, 202, 218], 'score': np.float64(0.16902186910333872), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 32sRunning iteration 321/1500... Est. remaining: 10m 25sRunning iteration 331/1500... Est. remaining: 10m 19sRunning iteration 341/1500... Est. remaining: 10m 12sRunning iteration 351/1500... Est. remaining: 10m 6sRunning iteration 361/1500... Est. remaining: 9m 59sRunning iteration 371/1500... Est. remaining: 9m 53sRunning iteration 381/1500... Est. remaining: 9m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,356,564,023
Annual Return: 47.04%
Sharpe Ratio: 1.54653
Sortino Ratio: 1.503
Max Drawdown: -57.2%
Avg Drawdown: -12.2%
Normalized Score: 0.409
Lookback periods: [128, 159, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 9m 44sRunning iteration 401/1500... Est. remaining: 9m 38sbest_combination: {'lookbacks': [128, 159, 180], 'score': np.float64(0.4090055453858034), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 32sRunning iteration 421/1500... Est. remaining: 9m 26sRunning iteration 431/1500... Est. remaining: 9m 20sRunning iteration 441/1500... Est. remaining: 9m 13sRunning iteration 451/1500... Est. remaining: 9m 7sRunning iteration 461/1500... Est. remaining: 9m 1sRunning iteration 471/1500... Est. remaining: 8m 55sRunning iteration 481/1500... Est. remaining: 8m 50sRunning iteration 491/1500... Est. remaining: 8m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,198,913,221
Annual Return: 46.93%
Sharpe Ratio: 1.54495
Sortino Ratio: 1.502
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.455
Lookback periods: [138, 154, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 8m 40sbest_combination: {'lookbacks': [138, 154, 178], 'score': np.float64(0.45492991008714034), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 35sRunning iteration 521/1500... Est. remaining: 8m 29sRunning iteration 531/1500... Est. remaining: 8m 24sRunning iteration 541/1500... Est. remaining: 8m 18sRunning iteration 551/1500... Est. remaining: 8m 12sRunning iteration 561/1500... Est. remaining: 8m 7sRunning iteration 571/1500... Est. remaining: 8m 1sRunning iteration 581/1500... Est. remaining: 7m 56sRunning iteration 591/1500... Est. remaining: 7m 50sRunning iteration 601/1500... Est. remaining: 7m 44sbest_combination: {'lookbacks': [138, 154, 178], 'score': np.float64(0.45492991008714034), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 39sRunning iteration 621/1500... Est. remaining: 7m 33sRunning iteration 631/1500... Est. remaining: 7m 28sRunning iteration 641/1500... Est. remaining: 7m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,528,333,839
Annual Return: 41.12%
Sharpe Ratio: 1.50296
Sortino Ratio: 1.388
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 0.543
Lookback periods: [42, 47, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,967,849,215
Annual Return: 42.15%
Sharpe Ratio: 1.54162
Sortino Ratio: 1.437
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 0.678
Lookback periods: [42, 47, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 7m 20sRunning iteration 661/1500... Est. remaining: 7m 14sRunning iteration 671/1500... Est. remaining: 7m 9sRunning iteration 681/1500... Est. remaining: 7m 3sRunning iteration 691/1500... Est. remaining: 6m 58sRunning iteration 701/1500... Est. remaining: 6m 52sbest_combination: {'lookbacks': [42, 47, 89], 'score': np.float64(0.6777531865878987), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,411,382,225
Annual Return: 42.99%
Sharpe Ratio: 1.55758
Sortino Ratio: 1.473
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 0.878
Lookback periods: [44, 45, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,225,677,556
Annual Return: 44.19%
Sharpe Ratio: 1.61341
Sortino Ratio: 1.516
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 0.991
Lookback periods: [41, 47, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 6m 44sRunning iteration 731/1500... Est. remaining: 6m 38sRunning iteration 741/1500... Est. remaining: 6m 33sRunning iteration 751/1500... Est. remaining: 6m 28sRunning iteration 761/1500... Est. remaining: 6m 22sRunning iteration 771/1500... Est. remaining: 6m 17sRunning iteration 781/1500... Est. remaining: 6m 11sRunning iteration 791/1500... Est. remaining: 6m 6sRunning iteration 801/1500... Est. remaining: 6m 1sbest_combination: {'lookbacks': [41, 47, 98], 'score': np.float64(0.9909701805915996), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 55sRunning iteration 821/1500... Est. remaining: 5m 50sRunning iteration 831/1500... Est. remaining: 5m 44sRunning iteration 841/1500... Est. remaining: 5m 39sRunning iteration 851/1500... Est. remaining: 5m 34sRunning iteration 861/1500... Est. remaining: 5m 28sRunning iteration 871/1500... Est. remaining: 5m 23sRunning iteration 881/1500... Est. remaining: 5m 18sRunning iteration 891/1500... Est. remaining: 5m 12sRunning iteration 901/1500... Est. remaining: 5m 7sbest_combination: {'lookbacks': [41, 47, 98], 'score': np.float64(0.9909701805915996), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 2sRunning iteration 921/1500... Est. remaining: 4m 56sRunning iteration 931/1500... Est. remaining: 4m 51sRunning iteration 941/1500... Est. remaining: 4m 46sRunning iteration 951/1500... Est. remaining: 4m 40sRunning iteration 961/1500... Est. remaining: 4m 35sRunning iteration 971/1500... Est. remaining: 4m 30sRunning iteration 981/1500... Est. remaining: 4m 25sRunning iteration 991/1500... Est. remaining: 4m 19sRunning iteration 1001/1500... Est. remaining: 4m 14sbest_combination: {'lookbacks': [41, 47, 98], 'score': np.float64(0.9909701805915996), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 9sRunning iteration 1021/1500... Est. remaining: 4m 4sRunning iteration 1031/1500... Est. remaining: 3m 58sRunning iteration 1041/1500... Est. remaining: 3m 53sRunning iteration 1051/1500... Est. remaining: 3m 48sRunning iteration 1061/1500... Est. remaining: 3m 43sRunning iteration 1071/1500... Est. remaining: 3m 38sRunning iteration 1081/1500... Est. remaining: 3m 32sRunning iteration 1091/1500... Est. remaining: 3m 27sRunning iteration 1101/1500... Est. remaining: 3m 22sbest_combination: {'lookbacks': [41, 47, 98], 'score': np.float64(0.9909701805915996), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 17sRunning iteration 1121/1500... Est. remaining: 3m 12sRunning iteration 1131/1500... Est. remaining: 3m 7sRunning iteration 1141/1500... Est. remaining: 3m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,642,825,404
Annual Return: 44.70%
Sharpe Ratio: 1.61701
Sortino Ratio: 1.514
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.054
Lookback periods: [42, 45, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1151/1500... Est. remaining: 2m 57sRunning iteration 1161/1500... Est. remaining: 2m 52sRunning iteration 1171/1500... Est. remaining: 2m 46sRunning iteration 1181/1500... Est. remaining: 2m 41sRunning iteration 1191/1500... Est. remaining: 2m 36sRunning iteration 1201/1500... Est. remaining: 2m 31sbest_combination: {'lookbacks': [42, 45, 97], 'score': np.float64(1.0537807839728182), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 26sRunning iteration 1221/1500... Est. remaining: 2m 21sRunning iteration 1231/1500... Est. remaining: 2m 16sRunning iteration 1241/1500... Est. remaining: 2m 11sRunning iteration 1251/1500... Est. remaining: 2m 6sRunning iteration 1261/1500... Est. remaining: 2m 1sRunning iteration 1271/1500... Est. remaining: 1m 56sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [42, 45, 97], 'score': np.float64(1.0537807839728182), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [42, 45, 97], 'score': np.float64(1.0537807839728182), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 1.05
best_combination: {'lookbacks': [42, 45, 97], 'score': np.float64(1.0537807839728182), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 45, 97] (score: 1.0538)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 45, 97] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 105 selections (25.2%)
2. naz100_hma: 94 selections (22.6%)
3. naz100_pine: 83 selections (20.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,642,825,404.30
Average Annualized Gain: 44.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Mon Aug 25 21:07:09 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $82,015,478
Annual Return: 29.70%
Sharpe Ratio: 1.04744
Sortino Ratio: 0.951
Max Drawdown: -62.2%
Avg Drawdown: -14.0%
Normalized Score: -2.049
Lookback periods: [60, 104, 290] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $940,067,892
Annual Return: 39.15%
Sharpe Ratio: 1.29173
Sortino Ratio: 1.240
Max Drawdown: -64.8%
Avg Drawdown: -13.0%
Normalized Score: -0.753
Lookback periods: [126, 126, 212] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,265,614,266
Annual Return: 40.35%
Sharpe Ratio: 1.33997
Sortino Ratio: 1.293
Max Drawdown: -70.0%
Avg Drawdown: -12.8%
Normalized Score: -0.587
Lookback periods: [161, 200, 226] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,133,800,072
Annual Return: 39.91%
Sharpe Ratio: 1.33072
Sortino Ratio: 1.278
Max Drawdown: -62.3%
Avg Drawdown: -13.0%
Normalized Score: -0.576
Lookback periods: [181, 265, 286] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,790,807,661
Annual Return: 41.76%
Sharpe Ratio: 1.38312
Sortino Ratio: 1.331
Max Drawdown: -65.1%
Avg Drawdown: -12.6%
Normalized Score: -0.331
Lookback periods: [116, 187, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $847,456,290
Annual Return: 38.74%
Sharpe Ratio: 1.40077
Sortino Ratio: 1.299
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 0.097
Lookback periods: [46, 57, 81] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 36m 17sRunning iteration 21/1500... Est. remaining: 24m 17sRunning iteration 31/1500... Est. remaining: 20m 13sRunning iteration 41/1500... Est. remaining: 18m 8sRunning iteration 51/1500... Est. remaining: 16m 48sRunning iteration 61/1500... Est. remaining: 15m 54sRunning iteration 71/1500... Est. remaining: 15m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,503,912,775
Annual Return: 44.54%
Sharpe Ratio: 1.46282
Sortino Ratio: 1.415
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.192
Lookback periods: [161, 179, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 15m 6sRunning iteration 91/1500... Est. remaining: 14m 40sRunning iteration 101/1500... Est. remaining: 14m 17sbest_combination: {'lookbacks': [161, 179, 189], 'score': np.float64(0.19210632253975476), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,822,156,619
Annual Return: 43.64%
Sharpe Ratio: 1.49695
Sortino Ratio: 1.416
Max Drawdown: -52.3%
Avg Drawdown: -10.8%
Normalized Score: 0.340
Lookback periods: [84, 87, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 12sRunning iteration 121/1500... Est. remaining: 13m 54sRunning iteration 131/1500... Est. remaining: 13m 37sRunning iteration 141/1500... Est. remaining: 13m 21sRunning iteration 151/1500... Est. remaining: 13m 7sRunning iteration 161/1500... Est. remaining: 12m 54sRunning iteration 171/1500... Est. remaining: 12m 41sRunning iteration 181/1500... Est. remaining: 12m 30sRunning iteration 191/1500... Est. remaining: 12m 20sRunning iteration 201/1500... Est. remaining: 12m 9sbest_combination: {'lookbacks': [84, 87, 155], 'score': np.float64(0.33983445950283253), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 0sRunning iteration 221/1500... Est. remaining: 11m 51sRunning iteration 231/1500... Est. remaining: 11m 42sRunning iteration 241/1500... Est. remaining: 11m 34sRunning iteration 251/1500... Est. remaining: 11m 26sRunning iteration 261/1500... Est. remaining: 11m 18sRunning iteration 271/1500... Est. remaining: 11m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,590,590,832
Annual Return: 47.19%
Sharpe Ratio: 1.52861
Sortino Ratio: 1.494
Max Drawdown: -62.5%
Avg Drawdown: -12.6%
Normalized Score: 0.422
Lookback periods: [153, 157, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/1500... Est. remaining: 11m 8sRunning iteration 291/1500... Est. remaining: 11m 1sRunning iteration 301/1500... Est. remaining: 10m 53sbest_combination: {'lookbacks': [153, 157, 183], 'score': np.float64(0.42151967857161454), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 46sRunning iteration 321/1500... Est. remaining: 10m 39sRunning iteration 331/1500... Est. remaining: 10m 32sRunning iteration 341/1500... Est. remaining: 10m 25sRunning iteration 351/1500... Est. remaining: 10m 18sRunning iteration 361/1500... Est. remaining: 10m 11sRunning iteration 371/1500... Est. remaining: 10m 5sRunning iteration 381/1500... Est. remaining: 9m 58sRunning iteration 391/1500... Est. remaining: 9m 52sRunning iteration 401/1500... Est. remaining: 9m 45sbest_combination: {'lookbacks': [153, 157, 183], 'score': np.float64(0.42151967857161454), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 39sRunning iteration 421/1500... Est. remaining: 9m 33sRunning iteration 431/1500... Est. remaining: 9m 27sRunning iteration 441/1500... Est. remaining: 9m 20sRunning iteration 451/1500... Est. remaining: 9m 14sRunning iteration 461/1500... Est. remaining: 9m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,604,103,822
Annual Return: 46.51%
Sharpe Ratio: 1.53751
Sortino Ratio: 1.494
Max Drawdown: -63.4%
Avg Drawdown: -11.7%
Normalized Score: 0.460
Lookback periods: [135, 178, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 9m 5sRunning iteration 481/1500... Est. remaining: 8m 59sRunning iteration 491/1500... Est. remaining: 8m 53sRunning iteration 501/1500... Est. remaining: 8m 47sbest_combination: {'lookbacks': [135, 178, 205], 'score': np.float64(0.4598272564201789), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,586,934,399
Annual Return: 47.19%
Sharpe Ratio: 1.53758
Sortino Ratio: 1.503
Max Drawdown: -60.6%
Avg Drawdown: -11.6%
Normalized Score: 0.546
Lookback periods: [165, 188, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 38sRunning iteration 531/1500... Est. remaining: 8m 32sRunning iteration 541/1500... Est. remaining: 8m 26sRunning iteration 551/1500... Est. remaining: 8m 21sRunning iteration 561/1500... Est. remaining: 8m 15sRunning iteration 571/1500... Est. remaining: 8m 9sRunning iteration 581/1500... Est. remaining: 8m 3sRunning iteration 591/1500... Est. remaining: 7m 57sRunning iteration 601/1500... Est. remaining: 7m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,983,884,034
Annual Return: 48.97%
Sharpe Ratio: 1.58723
Sortino Ratio: 1.541
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.802
Lookback periods: [181, 190, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [181, 190, 205], 'score': np.float64(0.8015459479304873), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 48sRunning iteration 621/1500... Est. remaining: 7m 42sRunning iteration 631/1500... Est. remaining: 7m 37sRunning iteration 641/1500... Est. remaining: 7m 31sRunning iteration 651/1500... Est. remaining: 7m 25sRunning iteration 661/1500... Est. remaining: 7m 19sRunning iteration 671/1500... Est. remaining: 7m 14sRunning iteration 681/1500... Est. remaining: 7m 8sRunning iteration 691/1500... Est. remaining: 7m 3sRunning iteration 701/1500... Est. remaining: 6m 57sbest_combination: {'lookbacks': [181, 190, 205], 'score': np.float64(0.8015459479304873), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 52sRunning iteration 721/1500... Est. remaining: 6m 46sRunning iteration 731/1500... Est. remaining: 6m 41sRunning iteration 741/1500... Est. remaining: 6m 35sRunning iteration 751/1500... Est. remaining: 6m 30sRunning iteration 761/1500... Est. remaining: 6m 24sRunning iteration 771/1500... Est. remaining: 6m 19sRunning iteration 781/1500... Est. remaining: 6m 13sRunning iteration 791/1500... Est. remaining: 6m 8sRunning iteration 801/1500... Est. remaining: 6m 2sbest_combination: {'lookbacks': [181, 190, 205], 'score': np.float64(0.8015459479304873), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 57sRunning iteration 821/1500... Est. remaining: 5m 52sRunning iteration 831/1500... Est. remaining: 5m 46sRunning iteration 841/1500... Est. remaining: 5m 41sRunning iteration 851/1500... Est. remaining: 5m 36sRunning iteration 861/1500... Est. remaining: 5m 30sRunning iteration 871/1500... Est. remaining: 5m 25sRunning iteration 881/1500... Est. remaining: 5m 20sRunning iteration 891/1500... Est. remaining: 5m 14sRunning iteration 901/1500... Est. remaining: 5m 9sbest_combination: {'lookbacks': [181, 190, 205], 'score': np.float64(0.8015459479304873), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 4sRunning iteration 921/1500... Est. remaining: 4m 58sRunning iteration 931/1500... Est. remaining: 4m 53sRunning iteration 941/1500... Est. remaining: 4m 48sRunning iteration 951/1500... Est. remaining: 4m 43sRunning iteration 961/1500... Est. remaining: 4m 37sRunning iteration 971/1500... Est. remaining: 4m 32sRunning iteration 981/1500... Est. remaining: 4m 27sRunning iteration 991/1500... Est. remaining: 4m 22sRunning iteration 1001/1500... Est. remaining: 4m 17sbest_combination: {'lookbacks': [181, 190, 205], 'score': np.float64(0.8015459479304873), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 11sRunning iteration 1021/1500... Est. remaining: 4m 6sRunning iteration 1031/1500... Est. remaining: 5m 2sRunning iteration 1041/1500... Est. remaining: 4m 55sRunning iteration 1051/1500... Est. remaining: 9m 21sRunning iteration 1061/1500... Est. remaining: 9m 6sRunning iteration 1071/1500... Est. remaining: 14m 56sRunning iteration 1081/1500... Est. remaining: 14m 29sRunning iteration 1091/1500... Est. remaining: 16m 54sRunning iteration 1101/1500... Est. remaining: 19m 16sbest_combination: {'lookbacks': [181, 190, 205], 'score': np.float64(0.8015459479304873), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 18m 39sRunning iteration 1121/1500... Est. remaining: 19m 30sRunning iteration 1131/1500... Est. remaining: 21m 26sRunning iteration 1141/1500... Est. remaining: 20m 42sRunning iteration 1151/1500... Est. remaining: 22m 7sRunning iteration 1161/1500... Est. remaining: 21m 45sRunning iteration 1171/1500... Est. remaining: 20m 58sRunning iteration 1181/1500... Est. remaining: 21m 28sRunning iteration 1191/1500... Est. remaining: 20m 38sRunning iteration 1201/1500... Est. remaining: 19m 50sbest_combination: {'lookbacks': [181, 190, 205], 'score': np.float64(0.8015459479304873), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 19m 2sRunning iteration 1221/1500... Est. remaining: 18m 14sRunning iteration 1231/1500... Est. remaining: 17m 28sRunning iteration 1241/1500... Est. remaining: 16m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,625,692,246
Annual Return: 49.24%
Sharpe Ratio: 1.59189
Sortino Ratio: 1.548
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.861
Lookback periods: [178, 188, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1251/1500... Est. remaining: 15m 57sRunning iteration 1261/1500... Est. remaining: 15m 12sRunning iteration 1271/1500... Est. remaining: 14m 28sRunning iteration 1281/1500... Est. remaining: 13m 45sRunning iteration 1291/1500... Est. remaining: 13m 2sRunning iteration 1301/1500... Est. remaining: 12m 20sbest_combination: {'lookbacks': [178, 188, 205], 'score': np.float64(0.8612515765046714), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 11m 38sRunning iteration 1321/1500... Est. remaining: 10m 57sRunning iteration 1331/1500... Est. remaining: 10m 16sRunning iteration 1341/1500... Est. remaining: 9m 36sRunning iteration 1351/1500... Est. remaining: 8m 57sRunning iteration 1361/1500... Est. remaining: 8m 18sRunning iteration 1371/1500... Est. remaining: 7m 39sRunning iteration 1381/1500... Est. remaining: 7m 1sRunning iteration 1391/1500... Est. remaining: 6m 24sRunning iteration 1401/1500... Est. remaining: 5m 47sbest_combination: {'lookbacks': [178, 188, 205], 'score': np.float64(0.8612515765046714), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 5m 10sRunning iteration 1421/1500... Est. remaining: 4m 34sRunning iteration 1431/1500... Est. remaining: 3m 58sRunning iteration 1441/1500... Est. remaining: 3m 23sRunning iteration 1451/1500... Est. remaining: 2m 48sRunning iteration 1461/1500... Est. remaining: 2m 13sRunning iteration 1471/1500... Est. remaining: 1m 39sRunning iteration 1481/1500... Est. remaining: 1m 6sRunning iteration 1491/1500... Est. remaining: 0m 32s
Monte Carlo simulation completed in 81.8 minutes
Best normalized score: 0.86
best_combination: {'lookbacks': [178, 188, 205], 'score': np.float64(0.8612515765046714), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [178, 188, 205] (score: 0.8613)

Monte Carlo simulation completed in 81.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [178, 188, 205] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 120 selections (28.8%)
2. sp500_hma: 100 selections (24.0%)
3. naz100_pine: 84 selections (20.2%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 42 selections (10.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,625,692,245.53
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Mon Aug 25 22:29:07 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $407,388,638
Annual Return: 35.83%
Sharpe Ratio: 1.21583
Sortino Ratio: 1.144
Max Drawdown: -70.3%
Avg Drawdown: -14.2%
Normalized Score: -1.446
Lookback periods: [102, 210, 242] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $834,025,359
Annual Return: 38.67%
Sharpe Ratio: 1.32650
Sortino Ratio: 1.244
Max Drawdown: -52.3%
Avg Drawdown: -12.2%
Normalized Score: -0.645
Lookback periods: [82, 124, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,638,600,792
Annual Return: 41.40%
Sharpe Ratio: 1.36963
Sortino Ratio: 1.321
Max Drawdown: -62.2%
Avg Drawdown: -12.3%
Normalized Score: -0.499
Lookback periods: [135, 162, 221] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,212,589,494
Annual Return: 42.63%
Sharpe Ratio: 1.45335
Sortino Ratio: 1.389
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: -0.106
Lookback periods: [88, 127, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,684,135,679
Annual Return: 45.75%
Sharpe Ratio: 1.48908
Sortino Ratio: 1.456
Max Drawdown: -61.4%
Avg Drawdown: -11.8%
Normalized Score: 0.081
Lookback periods: [154, 176, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 53sRunning iteration 41/1500... Est. remaining: 17m 5sRunning iteration 51/1500... Est. remaining: 15m 56sRunning iteration 61/1500... Est. remaining: 15m 8sRunning iteration 71/1500... Est. remaining: 14m 34sRunning iteration 81/1500... Est. remaining: 14m 5sRunning iteration 91/1500... Est. remaining: 13m 41sRunning iteration 101/1500... Est. remaining: 13m 22sbest_combination: {'lookbacks': [154, 176, 199], 'score': np.float64(0.08100015770939836), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 4sRunning iteration 121/1500... Est. remaining: 12m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,346,458,397
Annual Return: 47.03%
Sharpe Ratio: 1.53057
Sortino Ratio: 1.499
Max Drawdown: -61.3%
Avg Drawdown: -11.5%
Normalized Score: 0.274
Lookback periods: [153, 158, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 12m 50sRunning iteration 141/1500... Est. remaining: 12m 37sRunning iteration 151/1500... Est. remaining: 12m 25sRunning iteration 161/1500... Est. remaining: 12m 14sRunning iteration 171/1500... Est. remaining: 12m 3sRunning iteration 181/1500... Est. remaining: 11m 54sRunning iteration 191/1500... Est. remaining: 11m 44sRunning iteration 201/1500... Est. remaining: 11m 36sbest_combination: {'lookbacks': [153, 158, 161], 'score': np.float64(0.2741744843929081), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 27sRunning iteration 221/1500... Est. remaining: 11m 19sRunning iteration 231/1500... Est. remaining: 11m 12sRunning iteration 241/1500... Est. remaining: 11m 5sRunning iteration 251/1500... Est. remaining: 10m 57sRunning iteration 261/1500... Est. remaining: 10m 50sRunning iteration 271/1500... Est. remaining: 10m 43sRunning iteration 281/1500... Est. remaining: 10m 36sRunning iteration 291/1500... Est. remaining: 10m 30sRunning iteration 301/1500... Est. remaining: 10m 23sbest_combination: {'lookbacks': [153, 158, 161], 'score': np.float64(0.2741744843929081), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 17sRunning iteration 321/1500... Est. remaining: 10m 10sRunning iteration 331/1500... Est. remaining: 10m 4sRunning iteration 341/1500... Est. remaining: 9m 58sRunning iteration 351/1500... Est. remaining: 9m 52sRunning iteration 361/1500... Est. remaining: 9m 46sRunning iteration 371/1500... Est. remaining: 9m 40sRunning iteration 381/1500... Est. remaining: 9m 34sRunning iteration 391/1500... Est. remaining: 9m 28sRunning iteration 401/1500... Est. remaining: 9m 22sbest_combination: {'lookbacks': [153, 158, 161], 'score': np.float64(0.2741744843929081), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 16sRunning iteration 421/1500... Est. remaining: 9m 10sRunning iteration 431/1500... Est. remaining: 9m 4sRunning iteration 441/1500... Est. remaining: 8m 59sRunning iteration 451/1500... Est. remaining: 8m 53sRunning iteration 461/1500... Est. remaining: 8m 47sRunning iteration 471/1500... Est. remaining: 8m 42sRunning iteration 481/1500... Est. remaining: 8m 36sRunning iteration 491/1500... Est. remaining: 8m 31sRunning iteration 501/1500... Est. remaining: 8m 25sbest_combination: {'lookbacks': [153, 158, 161], 'score': np.float64(0.2741744843929081), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 20sRunning iteration 521/1500... Est. remaining: 8m 14sRunning iteration 531/1500... Est. remaining: 8m 9sRunning iteration 541/1500... Est. remaining: 8m 3sRunning iteration 551/1500... Est. remaining: 7m 58sRunning iteration 561/1500... Est. remaining: 7m 53sRunning iteration 571/1500... Est. remaining: 7m 47sRunning iteration 581/1500... Est. remaining: 7m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,482,951,125
Annual Return: 47.12%
Sharpe Ratio: 1.53116
Sortino Ratio: 1.496
Max Drawdown: -59.0%
Avg Drawdown: -10.5%
Normalized Score: 0.388
Lookback periods: [158, 161, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 7m 38sRunning iteration 601/1500... Est. remaining: 7m 33sbest_combination: {'lookbacks': [158, 161, 170], 'score': np.float64(0.38790862198159015), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,378,202,912
Annual Return: 47.06%
Sharpe Ratio: 1.53935
Sortino Ratio: 1.514
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.401
Lookback periods: [158, 162, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 7m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,264,609,576
Annual Return: 48.16%
Sharpe Ratio: 1.57445
Sortino Ratio: 1.545
Max Drawdown: -55.0%
Avg Drawdown: -11.1%
Normalized Score: 0.559
Lookback periods: [159, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 7m 20sRunning iteration 641/1500... Est. remaining: 7m 15sRunning iteration 651/1500... Est. remaining: 7m 10sRunning iteration 661/1500... Est. remaining: 7m 5sRunning iteration 671/1500... Est. remaining: 6m 59sRunning iteration 681/1500... Est. remaining: 6m 54sRunning iteration 691/1500... Est. remaining: 6m 49sRunning iteration 701/1500... Est. remaining: 6m 44sbest_combination: {'lookbacks': [159, 162, 169], 'score': np.float64(0.55861835305184), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 38sRunning iteration 721/1500... Est. remaining: 6m 33sRunning iteration 731/1500... Est. remaining: 6m 28sRunning iteration 741/1500... Est. remaining: 6m 23sRunning iteration 751/1500... Est. remaining: 6m 18sRunning iteration 761/1500... Est. remaining: 6m 12sRunning iteration 771/1500... Est. remaining: 6m 7sRunning iteration 781/1500... Est. remaining: 6m 2sRunning iteration 791/1500... Est. remaining: 5m 57sRunning iteration 801/1500... Est. remaining: 5m 52sbest_combination: {'lookbacks': [159, 162, 169], 'score': np.float64(0.55861835305184), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 47sRunning iteration 821/1500... Est. remaining: 5m 41sRunning iteration 831/1500... Est. remaining: 5m 36sRunning iteration 841/1500... Est. remaining: 5m 31sRunning iteration 851/1500... Est. remaining: 5m 26sRunning iteration 861/1500... Est. remaining: 5m 21sRunning iteration 871/1500... Est. remaining: 5m 16sRunning iteration 881/1500... Est. remaining: 5m 11sRunning iteration 891/1500... Est. remaining: 5m 5sRunning iteration 901/1500... Est. remaining: 5m 0sbest_combination: {'lookbacks': [159, 162, 169], 'score': np.float64(0.55861835305184), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 55sRunning iteration 921/1500... Est. remaining: 4m 50sRunning iteration 931/1500... Est. remaining: 4m 45sRunning iteration 941/1500... Est. remaining: 4m 40sRunning iteration 951/1500... Est. remaining: 4m 35sRunning iteration 961/1500... Est. remaining: 4m 30sRunning iteration 971/1500... Est. remaining: 4m 25sRunning iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 15sRunning iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [159, 162, 169], 'score': np.float64(0.55861835305184), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 4sRunning iteration 1021/1500... Est. remaining: 3m 59sRunning iteration 1031/1500... Est. remaining: 3m 54sRunning iteration 1041/1500... Est. remaining: 3m 49sRunning iteration 1051/1500... Est. remaining: 3m 44sRunning iteration 1061/1500... Est. remaining: 3m 39sRunning iteration 1071/1500... Est. remaining: 3m 34sRunning iteration 1081/1500... Est. remaining: 3m 29sRunning iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [159, 162, 169], 'score': np.float64(0.55861835305184), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4sRunning iteration 1141/1500... Est. remaining: 2m 59sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [159, 162, 169], 'score': np.float64(0.55861835305184), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,713,807,355
Annual Return: 48.39%
Sharpe Ratio: 1.57922
Sortino Ratio: 1.549
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.598
Lookback periods: [156, 162, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.5977499869194717), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.5977499869194717), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 0.60
best_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.5977499869194717), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 162, 168] (score: 0.5977)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 162, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 112 selections (26.9%)
2. sp500_hma: 107 selections (25.7%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 80 selections (19.2%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,713,807,354.78
Average Annualized Gain: 48.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Mon Aug 25 22:41:40 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $103,633,914
Annual Return: 30.57%
Sharpe Ratio: 1.05595
Sortino Ratio: 0.971
Max Drawdown: -69.0%
Avg Drawdown: -15.3%
Normalized Score: -2.150
Lookback periods: [54, 271, 280] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $144,416,903
Annual Return: 31.83%
Sharpe Ratio: 1.13361
Sortino Ratio: 1.029
Max Drawdown: -69.2%
Avg Drawdown: -13.6%
Normalized Score: -1.838
Lookback periods: [38, 187, 262] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $199,854,577
Annual Return: 33.07%
Sharpe Ratio: 1.14302
Sortino Ratio: 1.053
Max Drawdown: -55.2%
Avg Drawdown: -13.8%
Normalized Score: -1.516
Lookback periods: [80, 156, 284] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $966,852,502
Annual Return: 39.26%
Sharpe Ratio: 1.28871
Sortino Ratio: 1.243
Max Drawdown: -62.0%
Avg Drawdown: -13.2%
Normalized Score: -0.851
Lookback periods: [199, 223, 230] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,431,704,087
Annual Return: 40.85%
Sharpe Ratio: 1.33640
Sortino Ratio: 1.299
Max Drawdown: -67.3%
Avg Drawdown: -13.2%
Normalized Score: -0.723
Lookback periods: [144, 170, 229] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,020,622,624
Annual Return: 39.48%
Sharpe Ratio: 1.34670
Sortino Ratio: 1.281
Max Drawdown: -63.2%
Avg Drawdown: -12.3%
Normalized Score: -0.699
Lookback periods: [44, 153, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,539,584,928
Annual Return: 41.15%
Sharpe Ratio: 1.34774
Sortino Ratio: 1.306
Max Drawdown: -63.1%
Avg Drawdown: -12.6%
Normalized Score: -0.591
Lookback periods: [192, 236, 270] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 25m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,537,258,412
Annual Return: 41.14%
Sharpe Ratio: 1.39734
Sortino Ratio: 1.316
Max Drawdown: -55.0%
Avg Drawdown: -12.7%
Normalized Score: -0.398
Lookback periods: [78, 156, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 22m 3sRunning iteration 41/1500... Est. remaining: 19m 28sRunning iteration 51/1500... Est. remaining: 17m 51sRunning iteration 61/1500... Est. remaining: 16m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,925,707,757
Annual Return: 43.79%
Sharpe Ratio: 1.56414
Sortino Ratio: 1.477
Max Drawdown: -35.2%
Avg Drawdown: -9.0%
Normalized Score: 0.653
Lookback periods: [42, 44, 112] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 16m 17sRunning iteration 81/1500... Est. remaining: 15m 36sRunning iteration 91/1500... Est. remaining: 15m 3sRunning iteration 101/1500... Est. remaining: 14m 34sbest_combination: {'lookbacks': [42, 44, 112], 'score': np.float64(0.6533276750497599), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 11sRunning iteration 121/1500... Est. remaining: 13m 51sRunning iteration 131/1500... Est. remaining: 13m 32sRunning iteration 141/1500... Est. remaining: 13m 16sRunning iteration 151/1500... Est. remaining: 13m 4sRunning iteration 161/1500... Est. remaining: 12m 51sRunning iteration 171/1500... Est. remaining: 12m 39sRunning iteration 181/1500... Est. remaining: 12m 28sRunning iteration 191/1500... Est. remaining: 12m 18sRunning iteration 201/1500... Est. remaining: 12m 9sbest_combination: {'lookbacks': [42, 44, 112], 'score': np.float64(0.6533276750497599), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 59sRunning iteration 221/1500... Est. remaining: 11m 50sRunning iteration 231/1500... Est. remaining: 11m 42sRunning iteration 241/1500... Est. remaining: 11m 33sRunning iteration 251/1500... Est. remaining: 11m 25sRunning iteration 261/1500... Est. remaining: 11m 17sRunning iteration 271/1500... Est. remaining: 11m 9sRunning iteration 281/1500... Est. remaining: 11m 1sRunning iteration 291/1500... Est. remaining: 10m 53sRunning iteration 301/1500... Est. remaining: 10m 46sbest_combination: {'lookbacks': [42, 44, 112], 'score': np.float64(0.6533276750497599), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 39sRunning iteration 321/1500... Est. remaining: 10m 32sRunning iteration 331/1500... Est. remaining: 10m 25sRunning iteration 341/1500... Est. remaining: 10m 18sRunning iteration 351/1500... Est. remaining: 10m 11sRunning iteration 361/1500... Est. remaining: 10m 4sRunning iteration 371/1500... Est. remaining: 9m 58sRunning iteration 381/1500... Est. remaining: 9m 51sRunning iteration 391/1500... Est. remaining: 9m 45sRunning iteration 401/1500... Est. remaining: 9m 39sbest_combination: {'lookbacks': [42, 44, 112], 'score': np.float64(0.6533276750497599), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 33sRunning iteration 421/1500... Est. remaining: 9m 26sRunning iteration 431/1500... Est. remaining: 9m 20sRunning iteration 441/1500... Est. remaining: 9m 15sRunning iteration 451/1500... Est. remaining: 9m 9sRunning iteration 461/1500... Est. remaining: 9m 3sRunning iteration 471/1500... Est. remaining: 8m 57sRunning iteration 481/1500... Est. remaining: 8m 51sRunning iteration 491/1500... Est. remaining: 8m 45sRunning iteration 501/1500... Est. remaining: 8m 39sbest_combination: {'lookbacks': [42, 44, 112], 'score': np.float64(0.6533276750497599), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 33sRunning iteration 521/1500... Est. remaining: 8m 27sRunning iteration 531/1500... Est. remaining: 8m 21sRunning iteration 541/1500... Est. remaining: 8m 16sRunning iteration 551/1500... Est. remaining: 8m 10sRunning iteration 561/1500... Est. remaining: 8m 5sRunning iteration 571/1500... Est. remaining: 7m 59sRunning iteration 581/1500... Est. remaining: 11m 4sRunning iteration 591/1500... Est. remaining: 28m 4sRunning iteration 601/1500... Est. remaining: 27m 25sbest_combination: {'lookbacks': [42, 44, 112], 'score': np.float64(0.6533276750497599), 'visits': 1}
Running iteration 611/1500... Est. remaining: 26m 48sRunning iteration 621/1500... Est. remaining: 26m 11sRunning iteration 631/1500... Est. remaining: 25m 35sRunning iteration 641/1500... Est. remaining: 25m 1sRunning iteration 651/1500... Est. remaining: 24m 27sRunning iteration 661/1500... Est. remaining: 23m 54sRunning iteration 671/1500... Est. remaining: 23m 22sRunning iteration 681/1500... Est. remaining: 22m 50sRunning iteration 691/1500... Est. remaining: 22m 20sRunning iteration 701/1500... Est. remaining: 21m 50sbest_combination: {'lookbacks': [42, 44, 112], 'score': np.float64(0.6533276750497599), 'visits': 1}
Running iteration 711/1500... Est. remaining: 21m 21sRunning iteration 721/1500... Est. remaining: 20m 52sRunning iteration 731/1500... Est. remaining: 20m 24sRunning iteration 741/1500... Est. remaining: 19m 57sRunning iteration 751/1500... Est. remaining: 19m 31sRunning iteration 761/1500... Est. remaining: 19m 5sRunning iteration 771/1500... Est. remaining: 18m 39sRunning iteration 781/1500... Est. remaining: 18m 14sRunning iteration 791/1500... Est. remaining: 17m 50sRunning iteration 801/1500... Est. remaining: 17m 26sbest_combination: {'lookbacks': [42, 44, 112], 'score': np.float64(0.6533276750497599), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,044,423,444
Annual Return: 43.95%
Sharpe Ratio: 1.58557
Sortino Ratio: 1.492
Max Drawdown: -35.2%
Avg Drawdown: -9.1%
Normalized Score: 0.700
Lookback periods: [41, 42, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 811/1500... Est. remaining: 17m 3sRunning iteration 821/1500... Est. remaining: 16m 40sRunning iteration 831/1500... Est. remaining: 16m 18sRunning iteration 841/1500... Est. remaining: 15m 55sRunning iteration 851/1500... Est. remaining: 15m 33sRunning iteration 861/1500... Est. remaining: 15m 12sRunning iteration 871/1500... Est. remaining: 14m 51sRunning iteration 881/1500... Est. remaining: 14m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,135,243,294
Annual Return: 44.07%
Sharpe Ratio: 1.58988
Sortino Ratio: 1.504
Max Drawdown: -35.2%
Avg Drawdown: -8.9%
Normalized Score: 0.740
Lookback periods: [41, 44, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 14m 11sRunning iteration 901/1500... Est. remaining: 13m 51sbest_combination: {'lookbacks': [41, 44, 110], 'score': np.float64(0.7396477808350552), 'visits': 1}
Running iteration 911/1500... Est. remaining: 13m 31sRunning iteration 921/1500... Est. remaining: 13m 12sRunning iteration 931/1500... Est. remaining: 12m 53sRunning iteration 941/1500... Est. remaining: 12m 34sRunning iteration 951/1500... Est. remaining: 12m 15sRunning iteration 961/1500... Est. remaining: 11m 57sRunning iteration 971/1500... Est. remaining: 11m 39sRunning iteration 981/1500... Est. remaining: 11m 22sRunning iteration 991/1500... Est. remaining: 11m 4sRunning iteration 1001/1500... Est. remaining: 10m 47sbest_combination: {'lookbacks': [41, 44, 110], 'score': np.float64(0.7396477808350552), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 10m 30sRunning iteration 1021/1500... Est. remaining: 10m 14sRunning iteration 1031/1500... Est. remaining: 9m 57sRunning iteration 1041/1500... Est. remaining: 9m 41sRunning iteration 1051/1500... Est. remaining: 9m 25sRunning iteration 1061/1500... Est. remaining: 9m 9sRunning iteration 1071/1500... Est. remaining: 8m 54sRunning iteration 1081/1500... Est. remaining: 8m 38sRunning iteration 1091/1500... Est. remaining: 8m 23sRunning iteration 1101/1500... Est. remaining: 8m 8sbest_combination: {'lookbacks': [41, 44, 110], 'score': np.float64(0.7396477808350552), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 7m 53sRunning iteration 1121/1500... Est. remaining: 7m 39sRunning iteration 1131/1500... Est. remaining: 7m 24sRunning iteration 1141/1500... Est. remaining: 7m 10sRunning iteration 1151/1500... Est. remaining: 6m 56sRunning iteration 1161/1500... Est. remaining: 6m 42sRunning iteration 1171/1500... Est. remaining: 6m 28sRunning iteration 1181/1500... Est. remaining: 6m 14sRunning iteration 1191/1500... Est. remaining: 6m 1sRunning iteration 1201/1500... Est. remaining: 5m 48sbest_combination: {'lookbacks': [41, 44, 110], 'score': np.float64(0.7396477808350552), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 5m 34sRunning iteration 1221/1500... Est. remaining: 5m 21sRunning iteration 1231/1500... Est. remaining: 5m 8sRunning iteration 1241/1500... Est. remaining: 4m 55sRunning iteration 1251/1500... Est. remaining: 4m 43sRunning iteration 1261/1500... Est. remaining: 4m 30sRunning iteration 1271/1500... Est. remaining: 4m 18sRunning iteration 1281/1500... Est. remaining: 4m 5sRunning iteration 1291/1500... Est. remaining: 3m 53sRunning iteration 1301/1500... Est. remaining: 3m 41sbest_combination: {'lookbacks': [41, 44, 110], 'score': np.float64(0.7396477808350552), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 3m 29sRunning iteration 1321/1500... Est. remaining: 3m 17sRunning iteration 1331/1500... Est. remaining: 3m 5sRunning iteration 1341/1500... Est. remaining: 2m 54sRunning iteration 1351/1500... Est. remaining: 2m 42sRunning iteration 1361/1500... Est. remaining: 2m 31sRunning iteration 1371/1500... Est. remaining: 2m 20sRunning iteration 1381/1500... Est. remaining: 2m 8sRunning iteration 1391/1500... Est. remaining: 1m 57sRunning iteration 1401/1500... Est. remaining: 1m 46sbest_combination: {'lookbacks': [41, 44, 110], 'score': np.float64(0.7396477808350552), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 35sRunning iteration 1421/1500... Est. remaining: 1m 24sRunning iteration 1431/1500... Est. remaining: 1m 13sRunning iteration 1441/1500... Est. remaining: 1m 2sRunning iteration 1451/1500... Est. remaining: 0m 52sRunning iteration 1461/1500... Est. remaining: 0m 41sRunning iteration 1471/1500... Est. remaining: 0m 31sRunning iteration 1481/1500... Est. remaining: 0m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,585,442,247
Annual Return: 44.63%
Sharpe Ratio: 1.59302
Sortino Ratio: 1.498
Max Drawdown: -35.2%
Avg Drawdown: -9.0%
Normalized Score: 0.756
Lookback periods: [42, 44, 106] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1491/1500... Est. remaining: 0m 10s
Monte Carlo simulation completed in 25.7 minutes
Best normalized score: 0.76
best_combination: {'lookbacks': [42, 44, 106], 'score': np.float64(0.7557455513877799), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 44, 106] (score: 0.7557)

Monte Carlo simulation completed in 25.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 44, 106] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 105 selections (25.2%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pine: 85 selections (20.4%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 55 selections (13.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,585,442,247.29
Average Annualized Gain: 44.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Mon Aug 25 23:07:29 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $383,744,415
Annual Return: 35.60%
Sharpe Ratio: 1.25603
Sortino Ratio: 1.160
Max Drawdown: -64.1%
Avg Drawdown: -13.3%
Normalized Score: -1.166
Lookback periods: [61, 88, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $563,127,212
Annual Return: 37.11%
Sharpe Ratio: 1.28699
Sortino Ratio: 1.194
Max Drawdown: -55.0%
Avg Drawdown: -13.3%
Normalized Score: -0.909
Lookback periods: [93, 126, 280] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $857,408,383
Annual Return: 38.78%
Sharpe Ratio: 1.32535
Sortino Ratio: 1.247
Max Drawdown: -62.5%
Avg Drawdown: -13.9%
Normalized Score: -0.810
Lookback periods: [91, 118, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,349,060,576
Annual Return: 42.88%
Sharpe Ratio: 1.41961
Sortino Ratio: 1.368
Max Drawdown: -64.1%
Avg Drawdown: -12.3%
Normalized Score: -0.304
Lookback periods: [228, 240, 248] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,022,786,906
Annual Return: 43.92%
Sharpe Ratio: 1.44188
Sortino Ratio: 1.392
Max Drawdown: -59.0%
Avg Drawdown: -12.5%
Normalized Score: -0.143
Lookback periods: [141, 186, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 28sRunning iteration 31/1500... Est. remaining: 18m 54sRunning iteration 41/1500... Est. remaining: 17m 1sRunning iteration 51/1500... Est. remaining: 15m 53sRunning iteration 61/1500... Est. remaining: 15m 5sRunning iteration 71/1500... Est. remaining: 14m 31sRunning iteration 81/1500... Est. remaining: 14m 5sRunning iteration 91/1500... Est. remaining: 13m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,848,260,011
Annual Return: 44.93%
Sharpe Ratio: 1.47967
Sortino Ratio: 1.443
Max Drawdown: -56.9%
Avg Drawdown: -12.4%
Normalized Score: 0.052
Lookback periods: [128, 148, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,402,487,840
Annual Return: 45.49%
Sharpe Ratio: 1.52076
Sortino Ratio: 1.481
Max Drawdown: -63.7%
Avg Drawdown: -12.1%
Normalized Score: 0.123
Lookback periods: [165, 248, 273] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 13m 54sbest_combination: {'lookbacks': [165, 248, 273], 'score': np.float64(0.12301454264825869), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 34sRunning iteration 121/1500... Est. remaining: 13m 16sRunning iteration 131/1500... Est. remaining: 13m 0sRunning iteration 141/1500... Est. remaining: 12m 46sRunning iteration 151/1500... Est. remaining: 12m 33sRunning iteration 161/1500... Est. remaining: 12m 21sRunning iteration 171/1500... Est. remaining: 12m 10sRunning iteration 181/1500... Est. remaining: 11m 59sRunning iteration 191/1500... Est. remaining: 11m 50sRunning iteration 201/1500... Est. remaining: 11m 41sbest_combination: {'lookbacks': [165, 248, 273], 'score': np.float64(0.12301454264825869), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 32sRunning iteration 221/1500... Est. remaining: 11m 24sRunning iteration 231/1500... Est. remaining: 11m 16sRunning iteration 241/1500... Est. remaining: 11m 8sRunning iteration 251/1500... Est. remaining: 11m 1sRunning iteration 261/1500... Est. remaining: 10m 54sRunning iteration 271/1500... Est. remaining: 10m 46sRunning iteration 281/1500... Est. remaining: 10m 39sRunning iteration 291/1500... Est. remaining: 10m 32sRunning iteration 301/1500... Est. remaining: 10m 25sbest_combination: {'lookbacks': [165, 248, 273], 'score': np.float64(0.12301454264825869), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 19sRunning iteration 321/1500... Est. remaining: 10m 12sRunning iteration 331/1500... Est. remaining: 10m 6sRunning iteration 341/1500... Est. remaining: 10m 0sRunning iteration 351/1500... Est. remaining: 9m 53sRunning iteration 361/1500... Est. remaining: 9m 47sRunning iteration 371/1500... Est. remaining: 9m 41sRunning iteration 381/1500... Est. remaining: 9m 35sRunning iteration 391/1500... Est. remaining: 9m 29sRunning iteration 401/1500... Est. remaining: 9m 23sbest_combination: {'lookbacks': [165, 248, 273], 'score': np.float64(0.12301454264825869), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 17sRunning iteration 421/1500... Est. remaining: 9m 11sRunning iteration 431/1500... Est. remaining: 9m 6sRunning iteration 441/1500... Est. remaining: 9m 0sRunning iteration 451/1500... Est. remaining: 8m 54sRunning iteration 461/1500... Est. remaining: 8m 49sRunning iteration 471/1500... Est. remaining: 8m 43sRunning iteration 481/1500... Est. remaining: 8m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,103,467,057
Annual Return: 46.11%
Sharpe Ratio: 1.51481
Sortino Ratio: 1.480
Max Drawdown: -64.1%
Avg Drawdown: -11.4%
Normalized Score: 0.152
Lookback periods: [139, 158, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 8m 34sRunning iteration 501/1500... Est. remaining: 8m 29sbest_combination: {'lookbacks': [139, 158, 163], 'score': np.float64(0.1517552251946599), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 23sRunning iteration 521/1500... Est. remaining: 8m 17sRunning iteration 531/1500... Est. remaining: 8m 12sRunning iteration 541/1500... Est. remaining: 8m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,762,646,556
Annual Return: 46.63%
Sharpe Ratio: 1.52418
Sortino Ratio: 1.485
Max Drawdown: -58.5%
Avg Drawdown: -11.5%
Normalized Score: 0.256
Lookback periods: [144, 157, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,463,656,046
Annual Return: 47.11%
Sharpe Ratio: 1.54592
Sortino Ratio: 1.506
Max Drawdown: -59.1%
Avg Drawdown: -11.7%
Normalized Score: 0.325
Lookback periods: [146, 157, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 5sRunning iteration 561/1500... Est. remaining: 8m 0sRunning iteration 571/1500... Est. remaining: 7m 54sRunning iteration 581/1500... Est. remaining: 7m 49sRunning iteration 591/1500... Est. remaining: 7m 43sRunning iteration 601/1500... Est. remaining: 7m 38sbest_combination: {'lookbacks': [146, 157, 169], 'score': np.float64(0.32471026353934335), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,147,361,865
Annual Return: 48.10%
Sharpe Ratio: 1.56971
Sortino Ratio: 1.537
Max Drawdown: -56.9%
Avg Drawdown: -10.9%
Normalized Score: 0.491
Lookback periods: [156, 161, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/1500... Est. remaining: 7m 34sRunning iteration 621/1500... Est. remaining: 7m 29sRunning iteration 631/1500... Est. remaining: 7m 23sRunning iteration 641/1500... Est. remaining: 7m 18sRunning iteration 651/1500... Est. remaining: 7m 12sRunning iteration 661/1500... Est. remaining: 7m 7sRunning iteration 671/1500... Est. remaining: 7m 2sRunning iteration 681/1500... Est. remaining: 6m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,780,558,436
Annual Return: 48.88%
Sharpe Ratio: 1.58666
Sortino Ratio: 1.551
Max Drawdown: -58.5%
Avg Drawdown: -11.7%
Normalized Score: 0.525
Lookback periods: [149, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 6m 52sRunning iteration 701/1500... Est. remaining: 6m 47sbest_combination: {'lookbacks': [149, 154, 156], 'score': np.float64(0.5250099963009941), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 42sRunning iteration 721/1500... Est. remaining: 6m 36sRunning iteration 731/1500... Est. remaining: 6m 31sRunning iteration 741/1500... Est. remaining: 6m 25sRunning iteration 751/1500... Est. remaining: 6m 20sRunning iteration 761/1500... Est. remaining: 6m 15sRunning iteration 771/1500... Est. remaining: 6m 10sRunning iteration 781/1500... Est. remaining: 6m 4sRunning iteration 791/1500... Est. remaining: 5m 59sRunning iteration 801/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [149, 154, 156], 'score': np.float64(0.5250099963009941), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 49sRunning iteration 821/1500... Est. remaining: 5m 43sRunning iteration 831/1500... Est. remaining: 5m 38sRunning iteration 841/1500... Est. remaining: 5m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,958,098,996
Annual Return: 48.50%
Sharpe Ratio: 1.58703
Sortino Ratio: 1.551
Max Drawdown: -58.5%
Avg Drawdown: -11.1%
Normalized Score: 0.529
Lookback periods: [144, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 5m 29sRunning iteration 861/1500... Est. remaining: 5m 24sRunning iteration 871/1500... Est. remaining: 5m 18sRunning iteration 881/1500... Est. remaining: 5m 13sRunning iteration 891/1500... Est. remaining: 5m 8sRunning iteration 901/1500... Est. remaining: 5m 3sbest_combination: {'lookbacks': [144, 155, 156], 'score': np.float64(0.5285931001459384), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 58sRunning iteration 921/1500... Est. remaining: 4m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,585,481,996
Annual Return: 49.22%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.572
Max Drawdown: -57.2%
Avg Drawdown: -10.7%
Normalized Score: 0.657
Lookback periods: [138, 157, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 4m 48sRunning iteration 941/1500... Est. remaining: 4m 43sRunning iteration 951/1500... Est. remaining: 4m 38sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 17sRunning iteration 1001/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(0.6573616986289524), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 7sRunning iteration 1021/1500... Est. remaining: 4m 2sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 21sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(0.6573616986289524), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 16sRunning iteration 1121/1500... Est. remaining: 3m 11sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(0.6573616986289524), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(0.6573616986289524), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(0.6573616986289524), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 0.66
best_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(0.6573616986289524), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [138, 157, 171] (score: 0.6574)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [138, 157, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,585,481,995.89
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 23:20:04 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $899,113,638
Annual Return: 38.97%
Sharpe Ratio: 1.31563
Sortino Ratio: 1.254
Max Drawdown: -65.1%
Avg Drawdown: -14.2%
Normalized Score: -1.176
Lookback periods: [95, 148, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,217,163,660
Annual Return: 44.18%
Sharpe Ratio: 1.43854
Sortino Ratio: 1.401
Max Drawdown: -67.0%
Avg Drawdown: -13.5%
Normalized Score: -0.258
Lookback periods: [145, 194, 216] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 34sRunning iteration 21/1500... Est. remaining: 18m 13sRunning iteration 31/1500... Est. remaining: 16m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,571,214,861
Annual Return: 44.62%
Sharpe Ratio: 1.46892
Sortino Ratio: 1.427
Max Drawdown: -59.5%
Avg Drawdown: -11.7%
Normalized Score: -0.001
Lookback periods: [147, 158, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 15m 40sRunning iteration 51/1500... Est. remaining: 14m 51sRunning iteration 61/1500... Est. remaining: 14m 16sRunning iteration 71/1500... Est. remaining: 13m 50sRunning iteration 81/1500... Est. remaining: 13m 29sRunning iteration 91/1500... Est. remaining: 13m 12sRunning iteration 101/1500... Est. remaining: 12m 58sbest_combination: {'lookbacks': [147, 158, 160], 'score': np.float64(-0.0008524456007368176), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 45sRunning iteration 121/1500... Est. remaining: 12m 34sRunning iteration 131/1500... Est. remaining: 12m 23sRunning iteration 141/1500... Est. remaining: 12m 13sRunning iteration 151/1500... Est. remaining: 12m 4sRunning iteration 161/1500... Est. remaining: 11m 55sRunning iteration 171/1500... Est. remaining: 11m 46sRunning iteration 181/1500... Est. remaining: 11m 38sRunning iteration 191/1500... Est. remaining: 11m 31sRunning iteration 201/1500... Est. remaining: 11m 24sbest_combination: {'lookbacks': [147, 158, 160], 'score': np.float64(-0.0008524456007368176), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 17sRunning iteration 221/1500... Est. remaining: 11m 10sRunning iteration 231/1500... Est. remaining: 11m 3sRunning iteration 241/1500... Est. remaining: 10m 57sRunning iteration 251/1500... Est. remaining: 10m 50sRunning iteration 261/1500... Est. remaining: 10m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,059,881,210
Annual Return: 46.84%
Sharpe Ratio: 1.53282
Sortino Ratio: 1.487
Max Drawdown: -62.7%
Avg Drawdown: -12.3%
Normalized Score: 0.344
Lookback periods: [140, 159, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/1500... Est. remaining: 10m 43sRunning iteration 281/1500... Est. remaining: 10m 37sRunning iteration 291/1500... Est. remaining: 10m 31sRunning iteration 301/1500... Est. remaining: 10m 25sbest_combination: {'lookbacks': [140, 159, 201], 'score': np.float64(0.34374276447983776), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 19sRunning iteration 321/1500... Est. remaining: 10m 13sRunning iteration 331/1500... Est. remaining: 10m 7sRunning iteration 341/1500... Est. remaining: 10m 1sRunning iteration 351/1500... Est. remaining: 9m 55sRunning iteration 361/1500... Est. remaining: 9m 49sRunning iteration 371/1500... Est. remaining: 9m 43sRunning iteration 381/1500... Est. remaining: 9m 37sRunning iteration 391/1500... Est. remaining: 9m 32sRunning iteration 401/1500... Est. remaining: 9m 26sbest_combination: {'lookbacks': [140, 159, 201], 'score': np.float64(0.34374276447983776), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 20sRunning iteration 421/1500... Est. remaining: 9m 15sRunning iteration 431/1500... Est. remaining: 9m 9sRunning iteration 441/1500... Est. remaining: 9m 4sRunning iteration 451/1500... Est. remaining: 8m 58sRunning iteration 461/1500... Est. remaining: 8m 53sRunning iteration 471/1500... Est. remaining: 8m 47sRunning iteration 481/1500... Est. remaining: 8m 42sRunning iteration 491/1500... Est. remaining: 8m 36sRunning iteration 501/1500... Est. remaining: 8m 31sbest_combination: {'lookbacks': [140, 159, 201], 'score': np.float64(0.34374276447983776), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 26sRunning iteration 521/1500... Est. remaining: 8m 20sRunning iteration 531/1500... Est. remaining: 8m 15sRunning iteration 541/1500... Est. remaining: 8m 9sRunning iteration 551/1500... Est. remaining: 8m 4sRunning iteration 561/1500... Est. remaining: 7m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,577,652,426
Annual Return: 47.19%
Sharpe Ratio: 1.53347
Sortino Ratio: 1.502
Max Drawdown: -58.5%
Avg Drawdown: -12.3%
Normalized Score: 0.438
Lookback periods: [144, 156, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 7m 55sRunning iteration 581/1500... Est. remaining: 7m 50sRunning iteration 591/1500... Est. remaining: 7m 44sRunning iteration 601/1500... Est. remaining: 7m 39sbest_combination: {'lookbacks': [144, 156, 188], 'score': np.float64(0.4381118624831868), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 34sRunning iteration 621/1500... Est. remaining: 7m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,954,696,002
Annual Return: 48.00%
Sharpe Ratio: 1.54707
Sortino Ratio: 1.517
Max Drawdown: -60.2%
Avg Drawdown: -11.8%
Normalized Score: 0.566
Lookback periods: [150, 158, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 7m 25sRunning iteration 641/1500... Est. remaining: 7m 19sRunning iteration 651/1500... Est. remaining: 7m 14sRunning iteration 661/1500... Est. remaining: 7m 9sRunning iteration 671/1500... Est. remaining: 7m 3sRunning iteration 681/1500... Est. remaining: 6m 58sRunning iteration 691/1500... Est. remaining: 6m 53sRunning iteration 701/1500... Est. remaining: 6m 47sbest_combination: {'lookbacks': [150, 158, 198], 'score': np.float64(0.5660246383809084), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 42sRunning iteration 721/1500... Est. remaining: 6m 37sRunning iteration 731/1500... Est. remaining: 6m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,196,940,720
Annual Return: 48.12%
Sharpe Ratio: 1.56564
Sortino Ratio: 1.535
Max Drawdown: -58.5%
Avg Drawdown: -12.1%
Normalized Score: 0.630
Lookback periods: [142, 155, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 6m 28sRunning iteration 751/1500... Est. remaining: 6m 22sRunning iteration 761/1500... Est. remaining: 6m 17sRunning iteration 771/1500... Est. remaining: 6m 12sRunning iteration 781/1500... Est. remaining: 6m 7sRunning iteration 791/1500... Est. remaining: 6m 1sRunning iteration 801/1500... Est. remaining: 5m 56sbest_combination: {'lookbacks': [142, 155, 188], 'score': np.float64(0.6296446023280976), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 51sRunning iteration 821/1500... Est. remaining: 5m 46sRunning iteration 831/1500... Est. remaining: 5m 41sRunning iteration 841/1500... Est. remaining: 5m 35sRunning iteration 851/1500... Est. remaining: 5m 30sRunning iteration 861/1500... Est. remaining: 5m 25sRunning iteration 871/1500... Est. remaining: 5m 20sRunning iteration 881/1500... Est. remaining: 5m 15sRunning iteration 891/1500... Est. remaining: 5m 10sRunning iteration 901/1500... Est. remaining: 5m 4sbest_combination: {'lookbacks': [142, 155, 188], 'score': np.float64(0.6296446023280976), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,008,436,608
Annual Return: 48.02%
Sharpe Ratio: 1.57023
Sortino Ratio: 1.523
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.642
Lookback periods: [139, 159, 202] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 5m 0sRunning iteration 921/1500... Est. remaining: 4m 55sRunning iteration 931/1500... Est. remaining: 4m 50sRunning iteration 941/1500... Est. remaining: 4m 45sRunning iteration 951/1500... Est. remaining: 4m 40sRunning iteration 961/1500... Est. remaining: 4m 34sRunning iteration 971/1500... Est. remaining: 4m 29sRunning iteration 981/1500... Est. remaining: 4m 24sRunning iteration 991/1500... Est. remaining: 4m 19sRunning iteration 1001/1500... Est. remaining: 4m 14sbest_combination: {'lookbacks': [139, 159, 202], 'score': np.float64(0.6415793800226217), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 9sRunning iteration 1021/1500... Est. remaining: 4m 4sRunning iteration 1031/1500... Est. remaining: 3m 58sRunning iteration 1041/1500... Est. remaining: 3m 53sRunning iteration 1051/1500... Est. remaining: 3m 48sRunning iteration 1061/1500... Est. remaining: 3m 43sRunning iteration 1071/1500... Est. remaining: 3m 38sRunning iteration 1081/1500... Est. remaining: 3m 33sRunning iteration 1091/1500... Est. remaining: 3m 28sRunning iteration 1101/1500... Est. remaining: 3m 22sbest_combination: {'lookbacks': [139, 159, 202], 'score': np.float64(0.6415793800226217), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,645,654,507
Annual Return: 48.82%
Sharpe Ratio: 1.59417
Sortino Ratio: 1.558
Max Drawdown: -58.3%
Avg Drawdown: -11.7%
Normalized Score: 0.788
Lookback periods: [146, 159, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1121/1500... Est. remaining: 3m 13sRunning iteration 1131/1500... Est. remaining: 3m 8sRunning iteration 1141/1500... Est. remaining: 3m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,348,608,494
Annual Return: 48.69%
Sharpe Ratio: 1.60400
Sortino Ratio: 1.560
Max Drawdown: -56.0%
Avg Drawdown: -10.8%
Normalized Score: 0.848
Lookback periods: [135, 157, 206] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1151/1500... Est. remaining: 2m 58sRunning iteration 1161/1500... Est. remaining: 2m 53sRunning iteration 1171/1500... Est. remaining: 2m 48sRunning iteration 1181/1500... Est. remaining: 2m 42sRunning iteration 1191/1500... Est. remaining: 2m 37sRunning iteration 1201/1500... Est. remaining: 2m 32sbest_combination: {'lookbacks': [135, 157, 206], 'score': np.float64(0.8483094083226093), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 27sRunning iteration 1221/1500... Est. remaining: 2m 22sRunning iteration 1231/1500... Est. remaining: 2m 17sRunning iteration 1241/1500... Est. remaining: 2m 12sRunning iteration 1251/1500... Est. remaining: 2m 7sRunning iteration 1261/1500... Est. remaining: 2m 1sRunning iteration 1271/1500... Est. remaining: 1m 56sRunning iteration 1281/1500... Est. remaining: 1m 51sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [135, 157, 206], 'score': np.float64(0.8483094083226093), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 36sRunning iteration 1321/1500... Est. remaining: 1m 31sRunning iteration 1331/1500... Est. remaining: 1m 26sRunning iteration 1341/1500... Est. remaining: 1m 21sRunning iteration 1351/1500... Est. remaining: 1m 16sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [135, 157, 206], 'score': np.float64(0.8483094083226093), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.7 minutes
Best normalized score: 0.85
best_combination: {'lookbacks': [135, 157, 206], 'score': np.float64(0.8483094083226093), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 157, 206] (score: 0.8483)

Monte Carlo simulation completed in 12.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 157, 206] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 116 selections (27.9%)
2. sp500_hma: 112 selections (26.9%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 40 selections (9.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,348,608,494.00
Average Annualized Gain: 48.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 23:32:51 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $311,569,664
Annual Return: 34.79%
Sharpe Ratio: 1.18839
Sortino Ratio: 1.110
Max Drawdown: -64.8%
Avg Drawdown: -15.9%
Normalized Score: -1.266
Lookback periods: [71, 117, 125] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,510,617,833
Annual Return: 41.07%
Sharpe Ratio: 1.36918
Sortino Ratio: 1.305
Max Drawdown: -59.0%
Avg Drawdown: -12.8%
Normalized Score: -0.403
Lookback periods: [85, 192, 206] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,024,404,406
Annual Return: 42.27%
Sharpe Ratio: 1.41064
Sortino Ratio: 1.364
Max Drawdown: -66.2%
Avg Drawdown: -12.9%
Normalized Score: -0.294
Lookback periods: [136, 251, 276] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 21sRunning iteration 21/1500... Est. remaining: 19m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,912,876,510
Annual Return: 43.77%
Sharpe Ratio: 1.41728
Sortino Ratio: 1.382
Max Drawdown: -66.0%
Avg Drawdown: -12.7%
Normalized Score: -0.199
Lookback periods: [146, 191, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 7sRunning iteration 41/1500... Est. remaining: 16m 32sRunning iteration 51/1500... Est. remaining: 15m 32sRunning iteration 61/1500... Est. remaining: 14m 48sRunning iteration 71/1500... Est. remaining: 14m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,018,657,168
Annual Return: 43.92%
Sharpe Ratio: 1.44123
Sortino Ratio: 1.392
Max Drawdown: -63.1%
Avg Drawdown: -12.2%
Normalized Score: -0.114
Lookback periods: [190, 243, 276] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 14m 13sRunning iteration 91/1500... Est. remaining: 13m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,578,253,186
Annual Return: 47.19%
Sharpe Ratio: 1.52073
Sortino Ratio: 1.485
Max Drawdown: -59.9%
Avg Drawdown: -12.0%
Normalized Score: 0.267
Lookback periods: [181, 196, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 13m 48sbest_combination: {'lookbacks': [181, 196, 198], 'score': np.float64(0.26723849345673745), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 31sRunning iteration 121/1500... Est. remaining: 13m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,081,855,893
Annual Return: 44.00%
Sharpe Ratio: 1.55108
Sortino Ratio: 1.470
Max Drawdown: -51.1%
Avg Drawdown: -9.8%
Normalized Score: 0.317
Lookback periods: [49, 50, 104] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,192,128,835
Annual Return: 48.12%
Sharpe Ratio: 1.55723
Sortino Ratio: 1.511
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.403
Lookback periods: [178, 186, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 13m 8sRunning iteration 151/1500... Est. remaining: 12m 55sRunning iteration 161/1500... Est. remaining: 12m 42sRunning iteration 171/1500... Est. remaining: 12m 31sRunning iteration 181/1500... Est. remaining: 12m 21sRunning iteration 191/1500... Est. remaining: 12m 11sRunning iteration 201/1500... Est. remaining: 12m 1sbest_combination: {'lookbacks': [178, 186, 205], 'score': np.float64(0.40276122946284376), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 51sRunning iteration 221/1500... Est. remaining: 11m 42sRunning iteration 231/1500... Est. remaining: 11m 32sRunning iteration 241/1500... Est. remaining: 11m 24sRunning iteration 251/1500... Est. remaining: 11m 16sRunning iteration 261/1500... Est. remaining: 11m 8sRunning iteration 271/1500... Est. remaining: 11m 0sRunning iteration 281/1500... Est. remaining: 10m 53sRunning iteration 291/1500... Est. remaining: 10m 45sRunning iteration 301/1500... Est. remaining: 10m 38sbest_combination: {'lookbacks': [178, 186, 205], 'score': np.float64(0.40276122946284376), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 31sRunning iteration 321/1500... Est. remaining: 10m 24sRunning iteration 331/1500... Est. remaining: 10m 17sRunning iteration 341/1500... Est. remaining: 10m 11sRunning iteration 351/1500... Est. remaining: 10m 4sRunning iteration 361/1500... Est. remaining: 9m 58sRunning iteration 371/1500... Est. remaining: 9m 52sRunning iteration 381/1500... Est. remaining: 9m 45sRunning iteration 391/1500... Est. remaining: 9m 39sRunning iteration 401/1500... Est. remaining: 9m 33sbest_combination: {'lookbacks': [178, 186, 205], 'score': np.float64(0.40276122946284376), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 27sRunning iteration 421/1500... Est. remaining: 9m 21sRunning iteration 431/1500... Est. remaining: 9m 15sRunning iteration 441/1500... Est. remaining: 9m 9sRunning iteration 451/1500... Est. remaining: 9m 3sRunning iteration 461/1500... Est. remaining: 8m 57sRunning iteration 471/1500... Est. remaining: 8m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,718,446,473
Annual Return: 43.48%
Sharpe Ratio: 1.54853
Sortino Ratio: 1.463
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 0.484
Lookback periods: [41, 51, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 8m 48sRunning iteration 491/1500... Est. remaining: 8m 42sRunning iteration 501/1500... Est. remaining: 8m 36sbest_combination: {'lookbacks': [41, 51, 110], 'score': np.float64(0.48400748360441737), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 31sRunning iteration 521/1500... Est. remaining: 8m 25sRunning iteration 531/1500... Est. remaining: 8m 19sRunning iteration 541/1500... Est. remaining: 8m 14sRunning iteration 551/1500... Est. remaining: 8m 8sRunning iteration 561/1500... Est. remaining: 8m 2sRunning iteration 571/1500... Est. remaining: 7m 57sRunning iteration 581/1500... Est. remaining: 7m 51sRunning iteration 591/1500... Est. remaining: 7m 46sRunning iteration 601/1500... Est. remaining: 7m 40sbest_combination: {'lookbacks': [41, 51, 110], 'score': np.float64(0.48400748360441737), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 35sRunning iteration 621/1500... Est. remaining: 7m 29sRunning iteration 631/1500... Est. remaining: 7m 24sRunning iteration 641/1500... Est. remaining: 7m 18sRunning iteration 651/1500... Est. remaining: 7m 13sRunning iteration 661/1500... Est. remaining: 7m 7sRunning iteration 671/1500... Est. remaining: 7m 2sRunning iteration 681/1500... Est. remaining: 6m 56sRunning iteration 691/1500... Est. remaining: 6m 51sRunning iteration 701/1500... Est. remaining: 6m 46sbest_combination: {'lookbacks': [41, 51, 110], 'score': np.float64(0.48400748360441737), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 40sRunning iteration 721/1500... Est. remaining: 6m 35sRunning iteration 731/1500... Est. remaining: 6m 30sRunning iteration 741/1500... Est. remaining: 6m 25sRunning iteration 751/1500... Est. remaining: 6m 19sRunning iteration 761/1500... Est. remaining: 6m 14sRunning iteration 771/1500... Est. remaining: 6m 9sRunning iteration 781/1500... Est. remaining: 6m 3sRunning iteration 791/1500... Est. remaining: 5m 58sRunning iteration 801/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [41, 51, 110], 'score': np.float64(0.48400748360441737), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 48sRunning iteration 821/1500... Est. remaining: 5m 42sRunning iteration 831/1500... Est. remaining: 5m 37sRunning iteration 841/1500... Est. remaining: 5m 32sRunning iteration 851/1500... Est. remaining: 5m 27sRunning iteration 861/1500... Est. remaining: 5m 22sRunning iteration 871/1500... Est. remaining: 5m 17sRunning iteration 881/1500... Est. remaining: 5m 11sRunning iteration 891/1500... Est. remaining: 5m 6sRunning iteration 901/1500... Est. remaining: 5m 1sbest_combination: {'lookbacks': [41, 51, 110], 'score': np.float64(0.48400748360441737), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 56sRunning iteration 921/1500... Est. remaining: 4m 51sRunning iteration 931/1500... Est. remaining: 4m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,255,162,069
Annual Return: 44.23%
Sharpe Ratio: 1.59045
Sortino Ratio: 1.496
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 0.603
Lookback periods: [41, 50, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 4m 41sRunning iteration 951/1500... Est. remaining: 4m 36sRunning iteration 961/1500... Est. remaining: 4m 31sRunning iteration 971/1500... Est. remaining: 4m 26sRunning iteration 981/1500... Est. remaining: 4m 21sRunning iteration 991/1500... Est. remaining: 4m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,790,802,718
Annual Return: 43.59%
Sharpe Ratio: 1.59792
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -7.6%
Normalized Score: 0.618
Lookback periods: [44, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [44, 51, 98], 'score': np.float64(0.6179770605374848), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,008,937,375
Annual Return: 46.03%
Sharpe Ratio: 1.67914
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 0.896
Lookback periods: [41, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(0.8959585428512588), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(0.8959585428512588), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(0.8959585428512588), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(0.8959585428512588), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 0.90
best_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(0.8959585428512588), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 52, 98] (score: 0.8960)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,008,937,374.54
Average Annualized Gain: 46.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 23:45:23 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,006,220,532
Annual Return: 39.43%
Sharpe Ratio: 1.31398
Sortino Ratio: 1.261
Max Drawdown: -69.6%
Avg Drawdown: -13.7%
Normalized Score: -0.775
Lookback periods: [100, 197, 213] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,806,471,477
Annual Return: 41.80%
Sharpe Ratio: 1.37189
Sortino Ratio: 1.332
Max Drawdown: -70.9%
Avg Drawdown: -14.1%
Normalized Score: -0.544
Lookback periods: [122, 166, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,535,930,414
Annual Return: 43.19%
Sharpe Ratio: 1.41439
Sortino Ratio: 1.376
Max Drawdown: -65.5%
Avg Drawdown: -12.9%
Normalized Score: -0.279
Lookback periods: [145, 160, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,399,166,817
Annual Return: 44.41%
Sharpe Ratio: 1.44773
Sortino Ratio: 1.421
Max Drawdown: -60.1%
Avg Drawdown: -11.5%
Normalized Score: -0.025
Lookback periods: [152, 172, 228] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 4sRunning iteration 41/1500... Est. remaining: 16m 30sRunning iteration 51/1500... Est. remaining: 15m 29sRunning iteration 61/1500... Est. remaining: 14m 46sRunning iteration 71/1500... Est. remaining: 14m 15sRunning iteration 81/1500... Est. remaining: 13m 50sRunning iteration 91/1500... Est. remaining: 13m 29sRunning iteration 101/1500... Est. remaining: 13m 12sbest_combination: {'lookbacks': [152, 172, 228], 'score': np.float64(-0.025118534193351118), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 57sRunning iteration 121/1500... Est. remaining: 12m 43sRunning iteration 131/1500... Est. remaining: 12m 31sRunning iteration 141/1500... Est. remaining: 12m 20sRunning iteration 151/1500... Est. remaining: 12m 10sRunning iteration 161/1500... Est. remaining: 12m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,112,249,687
Annual Return: 42.44%
Sharpe Ratio: 1.51110
Sortino Ratio: 1.408
Max Drawdown: -57.8%
Avg Drawdown: -11.2%
Normalized Score: -0.002
Lookback periods: [47, 54, 111] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 12m 0sRunning iteration 181/1500... Est. remaining: 11m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,703,497,618
Annual Return: 47.27%
Sharpe Ratio: 1.52979
Sortino Ratio: 1.488
Max Drawdown: -64.6%
Avg Drawdown: -11.5%
Normalized Score: 0.245
Lookback periods: [184, 189, 213] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,695,449,986
Annual Return: 47.85%
Sharpe Ratio: 1.55153
Sortino Ratio: 1.516
Max Drawdown: -59.7%
Avg Drawdown: -12.0%
Normalized Score: 0.350
Lookback periods: [150, 155, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 11m 59sRunning iteration 201/1500... Est. remaining: 11m 50sbest_combination: {'lookbacks': [150, 155, 173], 'score': np.float64(0.3499672224231745), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 41sRunning iteration 221/1500... Est. remaining: 11m 32sRunning iteration 231/1500... Est. remaining: 11m 24sRunning iteration 241/1500... Est. remaining: 11m 17sRunning iteration 251/1500... Est. remaining: 11m 9sRunning iteration 261/1500... Est. remaining: 11m 1sRunning iteration 271/1500... Est. remaining: 10m 54sRunning iteration 281/1500... Est. remaining: 10m 47sRunning iteration 291/1500... Est. remaining: 10m 40sRunning iteration 301/1500... Est. remaining: 10m 33sbest_combination: {'lookbacks': [150, 155, 173], 'score': np.float64(0.3499672224231745), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 26sRunning iteration 321/1500... Est. remaining: 10m 20sRunning iteration 331/1500... Est. remaining: 10m 13sRunning iteration 341/1500... Est. remaining: 10m 7sRunning iteration 351/1500... Est. remaining: 10m 0sRunning iteration 361/1500... Est. remaining: 9m 54sRunning iteration 371/1500... Est. remaining: 9m 48sRunning iteration 381/1500... Est. remaining: 9m 42sRunning iteration 391/1500... Est. remaining: 9m 36sRunning iteration 401/1500... Est. remaining: 9m 30sbest_combination: {'lookbacks': [150, 155, 173], 'score': np.float64(0.3499672224231745), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 24sRunning iteration 421/1500... Est. remaining: 9m 18sRunning iteration 431/1500... Est. remaining: 9m 12sRunning iteration 441/1500... Est. remaining: 9m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,413,950,065
Annual Return: 47.08%
Sharpe Ratio: 1.55727
Sortino Ratio: 1.516
Max Drawdown: -58.5%
Avg Drawdown: -11.7%
Normalized Score: 0.353
Lookback periods: [140, 150, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 4sRunning iteration 461/1500... Est. remaining: 8m 58sRunning iteration 471/1500... Est. remaining: 8m 52sRunning iteration 481/1500... Est. remaining: 8m 47sRunning iteration 491/1500... Est. remaining: 8m 41sRunning iteration 501/1500... Est. remaining: 8m 35sbest_combination: {'lookbacks': [140, 150, 158], 'score': np.float64(0.3533876565712547), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 30sRunning iteration 521/1500... Est. remaining: 8m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,051,479,965
Annual Return: 48.05%
Sharpe Ratio: 1.57316
Sortino Ratio: 1.534
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.465
Lookback periods: [143, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 8m 20sRunning iteration 541/1500... Est. remaining: 8m 15sRunning iteration 551/1500... Est. remaining: 8m 9sRunning iteration 561/1500... Est. remaining: 8m 4sRunning iteration 571/1500... Est. remaining: 7m 58sRunning iteration 581/1500... Est. remaining: 7m 52sRunning iteration 591/1500... Est. remaining: 7m 47sRunning iteration 601/1500... Est. remaining: 7m 41sbest_combination: {'lookbacks': [143, 155, 156], 'score': np.float64(0.4650935898618426), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 36sRunning iteration 621/1500... Est. remaining: 7m 30sRunning iteration 631/1500... Est. remaining: 7m 25sRunning iteration 641/1500... Est. remaining: 7m 20sRunning iteration 651/1500... Est. remaining: 7m 14sRunning iteration 661/1500... Est. remaining: 7m 9sRunning iteration 671/1500... Est. remaining: 7m 4sRunning iteration 681/1500... Est. remaining: 6m 58sRunning iteration 691/1500... Est. remaining: 6m 53sRunning iteration 701/1500... Est. remaining: 6m 48sbest_combination: {'lookbacks': [143, 155, 156], 'score': np.float64(0.4650935898618426), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 42sRunning iteration 721/1500... Est. remaining: 6m 37sRunning iteration 731/1500... Est. remaining: 6m 32sRunning iteration 741/1500... Est. remaining: 6m 27sRunning iteration 751/1500... Est. remaining: 6m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,530,650,800
Annual Return: 48.29%
Sharpe Ratio: 1.59047
Sortino Ratio: 1.551
Max Drawdown: -56.7%
Avg Drawdown: -11.8%
Normalized Score: 0.497
Lookback periods: [135, 155, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 6m 17sRunning iteration 771/1500... Est. remaining: 6m 12sRunning iteration 781/1500... Est. remaining: 6m 7sRunning iteration 791/1500... Est. remaining: 6m 1sRunning iteration 801/1500... Est. remaining: 5m 56sbest_combination: {'lookbacks': [135, 155, 187], 'score': np.float64(0.4974079009752135), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 51sRunning iteration 821/1500... Est. remaining: 5m 46sRunning iteration 831/1500... Est. remaining: 5m 40sRunning iteration 841/1500... Est. remaining: 5m 35sRunning iteration 851/1500... Est. remaining: 5m 30sRunning iteration 861/1500... Est. remaining: 5m 25sRunning iteration 871/1500... Est. remaining: 5m 20sRunning iteration 881/1500... Est. remaining: 5m 14sRunning iteration 891/1500... Est. remaining: 5m 9sRunning iteration 901/1500... Est. remaining: 5m 4sbest_combination: {'lookbacks': [135, 155, 187], 'score': np.float64(0.4974079009752135), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 59sRunning iteration 921/1500... Est. remaining: 4m 54sRunning iteration 931/1500... Est. remaining: 4m 49sRunning iteration 941/1500... Est. remaining: 4m 43sRunning iteration 951/1500... Est. remaining: 4m 38sRunning iteration 961/1500... Est. remaining: 4m 33sRunning iteration 971/1500... Est. remaining: 4m 28sRunning iteration 981/1500... Est. remaining: 4m 23sRunning iteration 991/1500... Est. remaining: 4m 18sRunning iteration 1001/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [135, 155, 187], 'score': np.float64(0.4974079009752135), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 7sRunning iteration 1021/1500... Est. remaining: 4m 2sRunning iteration 1031/1500... Est. remaining: 3m 57sRunning iteration 1041/1500... Est. remaining: 3m 52sRunning iteration 1051/1500... Est. remaining: 3m 47sRunning iteration 1061/1500... Est. remaining: 3m 42sRunning iteration 1071/1500... Est. remaining: 3m 37sRunning iteration 1081/1500... Est. remaining: 3m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,761,006,284
Annual Return: 48.87%
Sharpe Ratio: 1.60712
Sortino Ratio: 1.567
Max Drawdown: -58.5%
Avg Drawdown: -10.9%
Normalized Score: 0.588
Lookback periods: [136, 155, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1091/1500... Est. remaining: 3m 27sRunning iteration 1101/1500... Est. remaining: 3m 22sbest_combination: {'lookbacks': [136, 155, 171], 'score': np.float64(0.5875737285415724), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 17sRunning iteration 1121/1500... Est. remaining: 3m 12sRunning iteration 1131/1500... Est. remaining: 3m 7sRunning iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 56sRunning iteration 1161/1500... Est. remaining: 2m 51sRunning iteration 1171/1500... Est. remaining: 2m 46sRunning iteration 1181/1500... Est. remaining: 2m 41sRunning iteration 1191/1500... Est. remaining: 2m 36sRunning iteration 1201/1500... Est. remaining: 2m 31sbest_combination: {'lookbacks': [136, 155, 171], 'score': np.float64(0.5875737285415724), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 26sRunning iteration 1221/1500... Est. remaining: 2m 21sRunning iteration 1231/1500... Est. remaining: 2m 16sRunning iteration 1241/1500... Est. remaining: 2m 11sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [136, 155, 171], 'score': np.float64(0.5875737285415724), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [136, 155, 171], 'score': np.float64(0.5875737285415724), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 0.59
best_combination: {'lookbacks': [136, 155, 171], 'score': np.float64(0.5875737285415724), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 155, 171] (score: 0.5876)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 155, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 115 selections (27.6%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,761,006,283.65
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 23:58:04 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $185,198,359
Annual Return: 32.78%
Sharpe Ratio: 1.15922
Sortino Ratio: 1.058
Max Drawdown: -66.5%
Avg Drawdown: -13.2%
Normalized Score: -1.294
Lookback periods: [44, 124, 211] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $258,465,800
Annual Return: 34.06%
Sharpe Ratio: 1.19374
Sortino Ratio: 1.099
Max Drawdown: -55.0%
Avg Drawdown: -11.7%
Normalized Score: -1.034
Lookback periods: [43, 75, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $970,833,423
Annual Return: 39.28%
Sharpe Ratio: 1.37781
Sortino Ratio: 1.283
Max Drawdown: -63.4%
Avg Drawdown: -12.1%
Normalized Score: -0.422
Lookback periods: [52, 115, 117] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,632,151,648
Annual Return: 41.38%
Sharpe Ratio: 1.38306
Sortino Ratio: 1.324
Max Drawdown: -63.9%
Avg Drawdown: -12.9%
Normalized Score: -0.319
Lookback periods: [108, 134, 206] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,810,429,591
Annual Return: 41.81%
Sharpe Ratio: 1.37729
Sortino Ratio: 1.326
Max Drawdown: -62.7%
Avg Drawdown: -12.9%
Normalized Score: -0.304
Lookback periods: [144, 197, 233] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,069,498,118
Annual Return: 39.67%
Sharpe Ratio: 1.44391
Sortino Ratio: 1.349
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 0.030
Lookback periods: [50, 64, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 45sRunning iteration 41/1500... Est. remaining: 17m 38sRunning iteration 51/1500... Est. remaining: 16m 23sRunning iteration 61/1500... Est. remaining: 15m 31sRunning iteration 71/1500... Est. remaining: 14m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,591,147,905
Annual Return: 45.67%
Sharpe Ratio: 1.49692
Sortino Ratio: 1.452
Max Drawdown: -60.8%
Avg Drawdown: -11.5%
Normalized Score: 0.209
Lookback periods: [149, 198, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 14m 43sRunning iteration 91/1500... Est. remaining: 14m 16sRunning iteration 101/1500... Est. remaining: 13m 54sbest_combination: {'lookbacks': [149, 198, 205], 'score': np.float64(0.20942602031932286), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,885,851,394
Annual Return: 41.98%
Sharpe Ratio: 1.50792
Sortino Ratio: 1.401
Max Drawdown: -37.7%
Avg Drawdown: -9.2%
Normalized Score: 0.251
Lookback periods: [42, 45, 142] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 13m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,770,897,019
Annual Return: 46.63%
Sharpe Ratio: 1.51721
Sortino Ratio: 1.477
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.308
Lookback periods: [166, 178, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 45sRunning iteration 131/1500... Est. remaining: 13m 28sRunning iteration 141/1500... Est. remaining: 13m 12sRunning iteration 151/1500... Est. remaining: 12m 58sRunning iteration 161/1500... Est. remaining: 12m 45sRunning iteration 171/1500... Est. remaining: 12m 33sRunning iteration 181/1500... Est. remaining: 12m 22sRunning iteration 191/1500... Est. remaining: 12m 11sRunning iteration 201/1500... Est. remaining: 12m 1sbest_combination: {'lookbacks': [166, 178, 201], 'score': np.float64(0.30812158534528344), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 52sRunning iteration 221/1500... Est. remaining: 11m 43sRunning iteration 231/1500... Est. remaining: 11m 34sRunning iteration 241/1500... Est. remaining: 11m 26sRunning iteration 251/1500... Est. remaining: 11m 18sRunning iteration 261/1500... Est. remaining: 11m 10sRunning iteration 271/1500... Est. remaining: 11m 2sRunning iteration 281/1500... Est. remaining: 10m 55sRunning iteration 291/1500... Est. remaining: 10m 47sRunning iteration 301/1500... Est. remaining: 10m 40sbest_combination: {'lookbacks': [166, 178, 201], 'score': np.float64(0.30812158534528344), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 33sRunning iteration 321/1500... Est. remaining: 10m 26sRunning iteration 331/1500... Est. remaining: 10m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,565,059,631
Annual Return: 46.48%
Sharpe Ratio: 1.51891
Sortino Ratio: 1.475
Max Drawdown: -56.0%
Avg Drawdown: -12.1%
Normalized Score: 0.312
Lookback periods: [138, 157, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 341/1500... Est. remaining: 10m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,798,438,911
Annual Return: 46.65%
Sharpe Ratio: 1.51911
Sortino Ratio: 1.482
Max Drawdown: -59.6%
Avg Drawdown: -11.5%
Normalized Score: 0.321
Lookback periods: [158, 185, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 351/1500... Est. remaining: 10m 14sRunning iteration 361/1500... Est. remaining: 10m 8sRunning iteration 371/1500... Est. remaining: 10m 1sRunning iteration 381/1500... Est. remaining: 9m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,898,058,902
Annual Return: 46.72%
Sharpe Ratio: 1.52163
Sortino Ratio: 1.490
Max Drawdown: -61.4%
Avg Drawdown: -11.5%
Normalized Score: 0.326
Lookback periods: [155, 173, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 9m 52sRunning iteration 401/1500... Est. remaining: 9m 46sbest_combination: {'lookbacks': [155, 173, 199], 'score': np.float64(0.3264375972554181), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 39sRunning iteration 421/1500... Est. remaining: 9m 33sRunning iteration 431/1500... Est. remaining: 9m 27sRunning iteration 441/1500... Est. remaining: 9m 20sRunning iteration 451/1500... Est. remaining: 9m 14sRunning iteration 461/1500... Est. remaining: 9m 8sRunning iteration 471/1500... Est. remaining: 9m 2sRunning iteration 481/1500... Est. remaining: 8m 56sRunning iteration 491/1500... Est. remaining: 8m 50sRunning iteration 501/1500... Est. remaining: 8m 44sbest_combination: {'lookbacks': [155, 173, 199], 'score': np.float64(0.3264375972554181), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 38sRunning iteration 521/1500... Est. remaining: 8m 32sRunning iteration 531/1500... Est. remaining: 8m 27sRunning iteration 541/1500... Est. remaining: 8m 21sRunning iteration 551/1500... Est. remaining: 8m 15sRunning iteration 561/1500... Est. remaining: 8m 9sRunning iteration 571/1500... Est. remaining: 8m 4sRunning iteration 581/1500... Est. remaining: 7m 58sRunning iteration 591/1500... Est. remaining: 7m 52sRunning iteration 601/1500... Est. remaining: 7m 47sbest_combination: {'lookbacks': [155, 173, 199], 'score': np.float64(0.3264375972554181), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,009,824,784
Annual Return: 46.80%
Sharpe Ratio: 1.52701
Sortino Ratio: 1.482
Max Drawdown: -60.4%
Avg Drawdown: -11.7%
Normalized Score: 0.329
Lookback periods: [159, 180, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 7m 37sRunning iteration 631/1500... Est. remaining: 7m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,409,029,112
Annual Return: 47.08%
Sharpe Ratio: 1.53156
Sortino Ratio: 1.496
Max Drawdown: -60.8%
Avg Drawdown: -12.2%
Normalized Score: 0.344
Lookback periods: [155, 181, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 7m 28sRunning iteration 651/1500... Est. remaining: 7m 22sRunning iteration 661/1500... Est. remaining: 7m 17sRunning iteration 671/1500... Est. remaining: 7m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,811,927,628
Annual Return: 43.62%
Sharpe Ratio: 1.55133
Sortino Ratio: 1.465
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 0.492
Lookback periods: [52, 52, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 7m 7sRunning iteration 691/1500... Est. remaining: 7m 2sRunning iteration 701/1500... Est. remaining: 6m 56sbest_combination: {'lookbacks': [52, 52, 100], 'score': np.float64(0.492168490793538), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 51sRunning iteration 721/1500... Est. remaining: 6m 45sRunning iteration 731/1500... Est. remaining: 6m 40sRunning iteration 741/1500... Est. remaining: 6m 34sRunning iteration 751/1500... Est. remaining: 6m 28sRunning iteration 761/1500... Est. remaining: 6m 23sRunning iteration 771/1500... Est. remaining: 6m 17sRunning iteration 781/1500... Est. remaining: 6m 12sRunning iteration 791/1500... Est. remaining: 6m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,674,489,488
Annual Return: 43.41%
Sharpe Ratio: 1.57494
Sortino Ratio: 1.483
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 0.542
Lookback periods: [47, 48, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 801/1500... Est. remaining: 6m 2sbest_combination: {'lookbacks': [47, 48, 95], 'score': np.float64(0.5416861370420294), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 57sRunning iteration 821/1500... Est. remaining: 5m 51sRunning iteration 831/1500... Est. remaining: 5m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,901,175,952
Annual Return: 43.75%
Sharpe Ratio: 1.59380
Sortino Ratio: 1.501
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 0.618
Lookback periods: [44, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 841/1500... Est. remaining: 5m 41sRunning iteration 851/1500... Est. remaining: 5m 36sRunning iteration 861/1500... Est. remaining: 5m 31sRunning iteration 871/1500... Est. remaining: 5m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,684,798,936
Annual Return: 44.75%
Sharpe Ratio: 1.61683
Sortino Ratio: 1.527
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 0.703
Lookback periods: [47, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 881/1500... Est. remaining: 5m 21sRunning iteration 891/1500... Est. remaining: 5m 15sRunning iteration 901/1500... Est. remaining: 5m 10sbest_combination: {'lookbacks': [47, 52, 96], 'score': np.float64(0.7030034844954297), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 4sRunning iteration 921/1500... Est. remaining: 4m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,236,710,918
Annual Return: 46.22%
Sharpe Ratio: 1.66334
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 0.891
Lookback periods: [46, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 4m 54sRunning iteration 941/1500... Est. remaining: 4m 49sRunning iteration 951/1500... Est. remaining: 4m 44sRunning iteration 961/1500... Est. remaining: 4m 38sRunning iteration 971/1500... Est. remaining: 4m 33sRunning iteration 981/1500... Est. remaining: 4m 28sRunning iteration 991/1500... Est. remaining: 4m 22sRunning iteration 1001/1500... Est. remaining: 4m 17sbest_combination: {'lookbacks': [46, 52, 95], 'score': np.float64(0.8907146290565479), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 12sRunning iteration 1021/1500... Est. remaining: 4m 6sRunning iteration 1031/1500... Est. remaining: 4m 1sRunning iteration 1041/1500... Est. remaining: 3m 56sRunning iteration 1051/1500... Est. remaining: 3m 51sRunning iteration 1061/1500... Est. remaining: 3m 45sRunning iteration 1071/1500... Est. remaining: 3m 40sRunning iteration 1081/1500... Est. remaining: 3m 35sRunning iteration 1091/1500... Est. remaining: 3m 30sRunning iteration 1101/1500... Est. remaining: 3m 24sbest_combination: {'lookbacks': [46, 52, 95], 'score': np.float64(0.8907146290565479), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 19sRunning iteration 1121/1500... Est. remaining: 3m 14sRunning iteration 1131/1500... Est. remaining: 3m 9sRunning iteration 1141/1500... Est. remaining: 3m 3sRunning iteration 1151/1500... Est. remaining: 2m 58sRunning iteration 1161/1500... Est. remaining: 2m 53sRunning iteration 1171/1500... Est. remaining: 2m 48sRunning iteration 1181/1500... Est. remaining: 2m 43sRunning iteration 1191/1500... Est. remaining: 2m 38sRunning iteration 1201/1500... Est. remaining: 2m 32sbest_combination: {'lookbacks': [46, 52, 95], 'score': np.float64(0.8907146290565479), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 27sRunning iteration 1221/1500... Est. remaining: 2m 22sRunning iteration 1231/1500... Est. remaining: 2m 17sRunning iteration 1241/1500... Est. remaining: 2m 12sRunning iteration 1251/1500... Est. remaining: 2m 7sRunning iteration 1261/1500... Est. remaining: 2m 1sRunning iteration 1271/1500... Est. remaining: 1m 56sRunning iteration 1281/1500... Est. remaining: 1m 51sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [46, 52, 95], 'score': np.float64(0.8907146290565479), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 36sRunning iteration 1321/1500... Est. remaining: 1m 31sRunning iteration 1331/1500... Est. remaining: 1m 26sRunning iteration 1341/1500... Est. remaining: 1m 21sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [46, 52, 95], 'score': np.float64(0.8907146290565479), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.6 minutes
Best normalized score: 0.89
best_combination: {'lookbacks': [46, 52, 95], 'score': np.float64(0.8907146290565479), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [46, 52, 95] (score: 0.8907)

Monte Carlo simulation completed in 12.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [46, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 81 selections (19.5%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 54 selections (13.0%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,236,710,918.02
Average Annualized Gain: 46.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 322m 28s
End time: Tue Aug 26 00:10:42 EDT 2025
Average time per successful run: 21m 29s
==============================================================
✓ All runs completed successfully!
