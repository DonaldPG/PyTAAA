Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Start time: Sun Aug 24 21:41:40 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Sun Aug 24 21:41:40 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,620,463,197
Annual Return: 45.69%
Sharpe Ratio: 1.49214
Sortino Ratio: 1.437
Max Drawdown: -63.3%
Avg Drawdown: -12.9%
Normalized Score: -0.158
Lookback periods: [105, 129, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,356,098,015
Annual Return: 45.45%
Sharpe Ratio: 1.49819
Sortino Ratio: 1.447
Max Drawdown: -61.8%
Avg Drawdown: -12.1%
Normalized Score: 0.010
Lookback periods: [135, 143, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,935,313,692
Annual Return: 46.75%
Sharpe Ratio: 1.53851
Sortino Ratio: 1.501
Max Drawdown: -60.7%
Avg Drawdown: -12.7%
Normalized Score: 0.200
Lookback periods: [102, 178, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 20m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,396,183,122
Annual Return: 44.41%
Sharpe Ratio: 1.45663
Sortino Ratio: 1.393
Max Drawdown: -53.2%
Avg Drawdown: -11.2%
Normalized Score: 0.208
Lookback periods: [92, 125, 127] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 34sRunning iteration 41/1500... Est. remaining: 16m 55sRunning iteration 51/1500... Est. remaining: 15m 52sRunning iteration 61/1500... Est. remaining: 15m 6sRunning iteration 71/1500... Est. remaining: 14m 33sRunning iteration 81/1500... Est. remaining: 14m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,377,153,718
Annual Return: 47.05%
Sharpe Ratio: 1.52540
Sortino Ratio: 1.490
Max Drawdown: -59.0%
Avg Drawdown: -12.3%
Normalized Score: 0.321
Lookback periods: [129, 153, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 9sRunning iteration 101/1500... Est. remaining: 13m 52sbest_combination: {'lookbacks': [129, 153, 156], 'score': np.float64(0.3214869868787734), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,139,230,379
Annual Return: 49.04%
Sharpe Ratio: 1.58684
Sortino Ratio: 1.573
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.859
Lookback periods: [175, 179, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 36sRunning iteration 131/1500... Est. remaining: 13m 22sRunning iteration 141/1500... Est. remaining: 13m 9sRunning iteration 151/1500... Est. remaining: 12m 55sRunning iteration 161/1500... Est. remaining: 12m 45sRunning iteration 171/1500... Est. remaining: 12m 34sRunning iteration 181/1500... Est. remaining: 12m 24sRunning iteration 191/1500... Est. remaining: 12m 14sRunning iteration 201/1500... Est. remaining: 12m 5sbest_combination: {'lookbacks': [175, 179, 183], 'score': np.float64(0.8594066295115237), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,581,476,872
Annual Return: 47.79%
Sharpe Ratio: 1.58551
Sortino Ratio: 1.528
Max Drawdown: -52.3%
Avg Drawdown: -9.6%
Normalized Score: 1.160
Lookback periods: [94, 134, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/1500... Est. remaining: 12m 3sRunning iteration 221/1500... Est. remaining: 11m 55sRunning iteration 231/1500... Est. remaining: 11m 46sRunning iteration 241/1500... Est. remaining: 11m 38sRunning iteration 251/1500... Est. remaining: 11m 30sRunning iteration 261/1500... Est. remaining: 11m 22sRunning iteration 271/1500... Est. remaining: 11m 14sRunning iteration 281/1500... Est. remaining: 11m 9sRunning iteration 291/1500... Est. remaining: 11m 1sRunning iteration 301/1500... Est. remaining: 10m 54sbest_combination: {'lookbacks': [94, 134, 145], 'score': np.float64(1.1604063513593483), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 47sRunning iteration 321/1500... Est. remaining: 10m 41sRunning iteration 331/1500... Est. remaining: 10m 35sRunning iteration 341/1500... Est. remaining: 10m 29sRunning iteration 351/1500... Est. remaining: 10m 22sRunning iteration 361/1500... Est. remaining: 10m 16sRunning iteration 371/1500... Est. remaining: 10m 9sRunning iteration 381/1500... Est. remaining: 10m 3sRunning iteration 391/1500... Est. remaining: 9m 56sRunning iteration 401/1500... Est. remaining: 9m 51sbest_combination: {'lookbacks': [94, 134, 145], 'score': np.float64(1.1604063513593483), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 44sRunning iteration 421/1500... Est. remaining: 9m 38sRunning iteration 431/1500... Est. remaining: 9m 32sRunning iteration 441/1500... Est. remaining: 9m 25sRunning iteration 451/1500... Est. remaining: 9m 19sRunning iteration 461/1500... Est. remaining: 9m 13sRunning iteration 471/1500... Est. remaining: 9m 7sRunning iteration 481/1500... Est. remaining: 9m 2sRunning iteration 491/1500... Est. remaining: 8m 56sRunning iteration 501/1500... Est. remaining: 8m 50sbest_combination: {'lookbacks': [94, 134, 145], 'score': np.float64(1.1604063513593483), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 45sRunning iteration 521/1500... Est. remaining: 8m 39sRunning iteration 531/1500... Est. remaining: 8m 34sRunning iteration 541/1500... Est. remaining: 8m 28sRunning iteration 551/1500... Est. remaining: 8m 22sRunning iteration 561/1500... Est. remaining: 8m 17sRunning iteration 571/1500... Est. remaining: 8m 11sRunning iteration 581/1500... Est. remaining: 8m 5sRunning iteration 591/1500... Est. remaining: 8m 0sRunning iteration 601/1500... Est. remaining: 7m 54sbest_combination: {'lookbacks': [94, 134, 145], 'score': np.float64(1.1604063513593483), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 48sRunning iteration 621/1500... Est. remaining: 7m 43sRunning iteration 631/1500... Est. remaining: 7m 38sRunning iteration 641/1500... Est. remaining: 7m 32sRunning iteration 651/1500... Est. remaining: 7m 27sRunning iteration 661/1500... Est. remaining: 7m 22sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 12sRunning iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [94, 134, 145], 'score': np.float64(1.1604063513593483), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 56sRunning iteration 721/1500... Est. remaining: 6m 51sRunning iteration 731/1500... Est. remaining: 6m 45sRunning iteration 741/1500... Est. remaining: 6m 40sRunning iteration 751/1500... Est. remaining: 6m 34sRunning iteration 761/1500... Est. remaining: 6m 29sRunning iteration 771/1500... Est. remaining: 6m 24sRunning iteration 781/1500... Est. remaining: 6m 18sRunning iteration 791/1500... Est. remaining: 6m 13sRunning iteration 801/1500... Est. remaining: 6m 7sbest_combination: {'lookbacks': [94, 134, 145], 'score': np.float64(1.1604063513593483), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 2sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 41sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [94, 134, 145], 'score': np.float64(1.1604063513593483), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [94, 134, 145], 'score': np.float64(1.1604063513593483), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [94, 134, 145], 'score': np.float64(1.1604063513593483), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 10sRunning iteration 1151/1500... Est. remaining: 3m 5sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 54sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 44sRunning iteration 1201/1500... Est. remaining: 2m 39sbest_combination: {'lookbacks': [94, 134, 145], 'score': np.float64(1.1604063513593483), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 34sRunning iteration 1221/1500... Est. remaining: 2m 28sRunning iteration 1231/1500... Est. remaining: 2m 23sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 7sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 51sRunning iteration 1301/1500... Est. remaining: 1m 46sbest_combination: {'lookbacks': [94, 134, 145], 'score': np.float64(1.1604063513593483), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 30sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 14sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [94, 134, 145], 'score': np.float64(1.1604063513593483), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.2 minutes
Best normalized score: 1.16
best_combination: {'lookbacks': [94, 134, 145], 'score': np.float64(1.1604063513593483), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [94, 134, 145] (score: 1.1604)

Monte Carlo simulation completed in 13.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [94, 134, 145] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 125 selections (30.0%)
2. naz100_hma: 102 selections (24.5%)
3. naz100_pi: 75 selections (18.0%)
4. naz100_pine: 73 selections (17.5%)
5. cash: 41 selections (9.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $7,581,476,871.78
Average Annualized Gain: 47.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Sun Aug 24 21:54:59 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $343,597,893
Annual Return: 35.17%
Sharpe Ratio: 1.24847
Sortino Ratio: 1.132
Max Drawdown: -65.2%
Avg Drawdown: -15.0%
Normalized Score: -2.308
Lookback periods: [73, 77, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,373,040,026
Annual Return: 40.68%
Sharpe Ratio: 1.41999
Sortino Ratio: 1.313
Max Drawdown: -55.0%
Avg Drawdown: -12.5%
Normalized Score: -0.581
Lookback periods: [62, 115, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 16sRunning iteration 21/1500... Est. remaining: 18m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,288,201,489
Annual Return: 40.42%
Sharpe Ratio: 1.39625
Sortino Ratio: 1.306
Max Drawdown: -52.3%
Avg Drawdown: -12.1%
Normalized Score: -0.489
Lookback periods: [91, 100, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 17m 21sRunning iteration 41/1500... Est. remaining: 15m 53sRunning iteration 51/1500... Est. remaining: 15m 1sRunning iteration 61/1500... Est. remaining: 14m 26sRunning iteration 71/1500... Est. remaining: 14m 5sRunning iteration 81/1500... Est. remaining: 13m 50sRunning iteration 91/1500... Est. remaining: 13m 39sRunning iteration 101/1500... Est. remaining: 13m 30sbest_combination: {'lookbacks': [91, 100, 148], 'score': np.float64(-0.4890553735800406), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 17sRunning iteration 121/1500... Est. remaining: 13m 3sRunning iteration 131/1500... Est. remaining: 12m 53sRunning iteration 141/1500... Est. remaining: 12m 44sRunning iteration 151/1500... Est. remaining: 12m 33sRunning iteration 161/1500... Est. remaining: 12m 24sRunning iteration 171/1500... Est. remaining: 12m 14sRunning iteration 181/1500... Est. remaining: 12m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,277,622,444
Annual Return: 40.39%
Sharpe Ratio: 1.40722
Sortino Ratio: 1.321
Max Drawdown: -52.3%
Avg Drawdown: -12.0%
Normalized Score: -0.455
Lookback periods: [91, 98, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 12m 6sRunning iteration 201/1500... Est. remaining: 11m 57sbest_combination: {'lookbacks': [91, 98, 171], 'score': np.float64(-0.4545507932027159), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 50sRunning iteration 221/1500... Est. remaining: 11m 43sRunning iteration 231/1500... Est. remaining: 11m 35sRunning iteration 241/1500... Est. remaining: 11m 27sRunning iteration 251/1500... Est. remaining: 11m 20sRunning iteration 261/1500... Est. remaining: 11m 13sRunning iteration 271/1500... Est. remaining: 11m 6sRunning iteration 281/1500... Est. remaining: 10m 59sRunning iteration 291/1500... Est. remaining: 10m 52sRunning iteration 301/1500... Est. remaining: 10m 45sbest_combination: {'lookbacks': [91, 98, 171], 'score': np.float64(-0.4545507932027159), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,555,117,144
Annual Return: 43.22%
Sharpe Ratio: 1.43978
Sortino Ratio: 1.390
Max Drawdown: -59.0%
Avg Drawdown: -12.5%
Normalized Score: -0.324
Lookback periods: [172, 173, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 10m 42sRunning iteration 321/1500... Est. remaining: 10m 35sRunning iteration 331/1500... Est. remaining: 10m 29sRunning iteration 341/1500... Est. remaining: 10m 22sRunning iteration 351/1500... Est. remaining: 10m 15sRunning iteration 361/1500... Est. remaining: 10m 9sRunning iteration 371/1500... Est. remaining: 10m 3sRunning iteration 381/1500... Est. remaining: 9m 56sRunning iteration 391/1500... Est. remaining: 9m 50sRunning iteration 401/1500... Est. remaining: 9m 44sbest_combination: {'lookbacks': [172, 173, 196], 'score': np.float64(-0.32403330235966454), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,360,743,478
Annual Return: 45.45%
Sharpe Ratio: 1.51079
Sortino Ratio: 1.444
Max Drawdown: -60.5%
Avg Drawdown: -13.0%
Normalized Score: -0.080
Lookback periods: [158, 178, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 35sRunning iteration 431/1500... Est. remaining: 9m 29sRunning iteration 441/1500... Est. remaining: 9m 23sRunning iteration 451/1500... Est. remaining: 9m 17sRunning iteration 461/1500... Est. remaining: 9m 11sRunning iteration 471/1500... Est. remaining: 9m 5sRunning iteration 481/1500... Est. remaining: 8m 59sRunning iteration 491/1500... Est. remaining: 8m 53sRunning iteration 501/1500... Est. remaining: 8m 47sbest_combination: {'lookbacks': [158, 178, 200], 'score': np.float64(-0.07979873348268862), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 42sRunning iteration 521/1500... Est. remaining: 8m 36sRunning iteration 531/1500... Est. remaining: 8m 30sRunning iteration 541/1500... Est. remaining: 8m 25sRunning iteration 551/1500... Est. remaining: 8m 19sRunning iteration 561/1500... Est. remaining: 8m 13sRunning iteration 571/1500... Est. remaining: 8m 8sRunning iteration 581/1500... Est. remaining: 8m 2sRunning iteration 591/1500... Est. remaining: 7m 57sRunning iteration 601/1500... Est. remaining: 7m 51sbest_combination: {'lookbacks': [158, 178, 200], 'score': np.float64(-0.07979873348268862), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 45sRunning iteration 621/1500... Est. remaining: 7m 40sRunning iteration 631/1500... Est. remaining: 7m 34sRunning iteration 641/1500... Est. remaining: 7m 29sRunning iteration 651/1500... Est. remaining: 7m 23sRunning iteration 661/1500... Est. remaining: 7m 18sRunning iteration 671/1500... Est. remaining: 7m 13sRunning iteration 681/1500... Est. remaining: 7m 7sRunning iteration 691/1500... Est. remaining: 7m 2sRunning iteration 701/1500... Est. remaining: 6m 57sbest_combination: {'lookbacks': [158, 178, 200], 'score': np.float64(-0.07979873348268862), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 51sRunning iteration 721/1500... Est. remaining: 6m 46sRunning iteration 731/1500... Est. remaining: 6m 40sRunning iteration 741/1500... Est. remaining: 6m 35sRunning iteration 751/1500... Est. remaining: 6m 30sRunning iteration 761/1500... Est. remaining: 6m 24sRunning iteration 771/1500... Est. remaining: 6m 19sRunning iteration 781/1500... Est. remaining: 6m 14sRunning iteration 791/1500... Est. remaining: 6m 8sRunning iteration 801/1500... Est. remaining: 6m 3sbest_combination: {'lookbacks': [158, 178, 200], 'score': np.float64(-0.07979873348268862), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 58sRunning iteration 821/1500... Est. remaining: 5m 52sRunning iteration 831/1500... Est. remaining: 5m 47sRunning iteration 841/1500... Est. remaining: 5m 42sRunning iteration 851/1500... Est. remaining: 5m 37sRunning iteration 861/1500... Est. remaining: 5m 31sRunning iteration 871/1500... Est. remaining: 5m 26sRunning iteration 881/1500... Est. remaining: 5m 21sRunning iteration 891/1500... Est. remaining: 5m 15sRunning iteration 901/1500... Est. remaining: 5m 10sbest_combination: {'lookbacks': [158, 178, 200], 'score': np.float64(-0.07979873348268862), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 5sRunning iteration 921/1500... Est. remaining: 5m 0sRunning iteration 931/1500... Est. remaining: 4m 54sRunning iteration 941/1500... Est. remaining: 4m 49sRunning iteration 951/1500... Est. remaining: 4m 44sRunning iteration 961/1500... Est. remaining: 4m 39sRunning iteration 971/1500... Est. remaining: 4m 34sRunning iteration 981/1500... Est. remaining: 4m 28sRunning iteration 991/1500... Est. remaining: 4m 23sRunning iteration 1001/1500... Est. remaining: 4m 18sbest_combination: {'lookbacks': [158, 178, 200], 'score': np.float64(-0.07979873348268862), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 13sRunning iteration 1021/1500... Est. remaining: 4m 7sRunning iteration 1031/1500... Est. remaining: 4m 2sRunning iteration 1041/1500... Est. remaining: 3m 57sRunning iteration 1051/1500... Est. remaining: 3m 52sRunning iteration 1061/1500... Est. remaining: 3m 47sRunning iteration 1071/1500... Est. remaining: 3m 41sRunning iteration 1081/1500... Est. remaining: 3m 36sRunning iteration 1091/1500... Est. remaining: 3m 31sRunning iteration 1101/1500... Est. remaining: 3m 26sbest_combination: {'lookbacks': [158, 178, 200], 'score': np.float64(-0.07979873348268862), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 21sRunning iteration 1121/1500... Est. remaining: 3m 15sRunning iteration 1131/1500... Est. remaining: 3m 10sRunning iteration 1141/1500... Est. remaining: 3m 5sRunning iteration 1151/1500... Est. remaining: 3m 0sRunning iteration 1161/1500... Est. remaining: 2m 55sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 44sRunning iteration 1191/1500... Est. remaining: 2m 39sRunning iteration 1201/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [158, 178, 200], 'score': np.float64(-0.07979873348268862), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 13sRunning iteration 1251/1500... Est. remaining: 2m 8sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [158, 178, 200], 'score': np.float64(-0.07979873348268862), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [158, 178, 200], 'score': np.float64(-0.07979873348268862), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: -0.08
best_combination: {'lookbacks': [158, 178, 200], 'score': np.float64(-0.07979873348268862), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [158, 178, 200] (score: -0.0798)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [158, 178, 200] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 126 selections (30.3%)
2. naz100_pine: 92 selections (22.1%)
3. naz100_hma: 80 selections (19.2%)
4. naz100_pi: 72 selections (17.3%)
5. cash: 46 selections (11.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,360,743,478.02
Average Annualized Gain: 45.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Sun Aug 24 22:07:58 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $527,330,387
Annual Return: 36.85%
Sharpe Ratio: 1.26281
Sortino Ratio: 1.179
Max Drawdown: -58.3%
Avg Drawdown: -12.5%
Normalized Score: -1.440
Lookback periods: [57, 130, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,282,278,874
Annual Return: 42.76%
Sharpe Ratio: 1.40092
Sortino Ratio: 1.366
Max Drawdown: -61.1%
Avg Drawdown: -11.9%
Normalized Score: -0.437
Lookback periods: [163, 165, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,215,486,981
Annual Return: 44.18%
Sharpe Ratio: 1.46127
Sortino Ratio: 1.419
Max Drawdown: -59.9%
Avg Drawdown: -12.3%
Normalized Score: -0.171
Lookback periods: [134, 179, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,812,347,997
Annual Return: 44.89%
Sharpe Ratio: 1.46245
Sortino Ratio: 1.425
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.101
Lookback periods: [157, 163, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,055,331,893
Annual Return: 46.84%
Sharpe Ratio: 1.52764
Sortino Ratio: 1.491
Max Drawdown: -58.2%
Avg Drawdown: -11.3%
Normalized Score: 0.486
Lookback periods: [157, 158, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 34sRunning iteration 41/1500... Est. remaining: 17m 40sRunning iteration 51/1500... Est. remaining: 16m 21sRunning iteration 61/1500... Est. remaining: 15m 36sRunning iteration 71/1500... Est. remaining: 15m 5sRunning iteration 81/1500... Est. remaining: 14m 36sRunning iteration 91/1500... Est. remaining: 14m 13sRunning iteration 101/1500... Est. remaining: 13m 53sbest_combination: {'lookbacks': [157, 158, 161], 'score': np.float64(0.48606404466188546), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 36sRunning iteration 121/1500... Est. remaining: 13m 20sRunning iteration 131/1500... Est. remaining: 13m 8sRunning iteration 141/1500... Est. remaining: 12m 55sRunning iteration 151/1500... Est. remaining: 12m 45sRunning iteration 161/1500... Est. remaining: 12m 34sRunning iteration 171/1500... Est. remaining: 12m 24sRunning iteration 181/1500... Est. remaining: 12m 15sRunning iteration 191/1500... Est. remaining: 12m 6sRunning iteration 201/1500... Est. remaining: 11m 57sbest_combination: {'lookbacks': [157, 158, 161], 'score': np.float64(0.48606404466188546), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 49sRunning iteration 221/1500... Est. remaining: 11m 42sRunning iteration 231/1500... Est. remaining: 11m 35sRunning iteration 241/1500... Est. remaining: 11m 28sRunning iteration 251/1500... Est. remaining: 11m 21sRunning iteration 261/1500... Est. remaining: 11m 14sRunning iteration 271/1500... Est. remaining: 11m 7sRunning iteration 281/1500... Est. remaining: 11m 1sRunning iteration 291/1500... Est. remaining: 10m 54sRunning iteration 301/1500... Est. remaining: 10m 48sbest_combination: {'lookbacks': [157, 158, 161], 'score': np.float64(0.48606404466188546), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 41sRunning iteration 321/1500... Est. remaining: 10m 35sRunning iteration 331/1500... Est. remaining: 10m 29sRunning iteration 341/1500... Est. remaining: 10m 23sRunning iteration 351/1500... Est. remaining: 10m 16sRunning iteration 361/1500... Est. remaining: 10m 10sRunning iteration 371/1500... Est. remaining: 10m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,899,399,564
Annual Return: 48.48%
Sharpe Ratio: 1.58803
Sortino Ratio: 1.547
Max Drawdown: -56.0%
Avg Drawdown: -12.0%
Normalized Score: 0.760
Lookback periods: [136, 157, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 10m 2sRunning iteration 391/1500... Est. remaining: 9m 56sRunning iteration 401/1500... Est. remaining: 9m 50sbest_combination: {'lookbacks': [136, 157, 187], 'score': np.float64(0.759508568182265), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 44sRunning iteration 421/1500... Est. remaining: 9m 38sRunning iteration 431/1500... Est. remaining: 9m 32sRunning iteration 441/1500... Est. remaining: 9m 27sRunning iteration 451/1500... Est. remaining: 9m 21sRunning iteration 461/1500... Est. remaining: 9m 15sRunning iteration 471/1500... Est. remaining: 9m 9sRunning iteration 481/1500... Est. remaining: 9m 3sRunning iteration 491/1500... Est. remaining: 8m 57sRunning iteration 501/1500... Est. remaining: 8m 51sbest_combination: {'lookbacks': [136, 157, 187], 'score': np.float64(0.759508568182265), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 46sRunning iteration 521/1500... Est. remaining: 8m 40sRunning iteration 531/1500... Est. remaining: 8m 34sRunning iteration 541/1500... Est. remaining: 8m 28sRunning iteration 551/1500... Est. remaining: 8m 22sRunning iteration 561/1500... Est. remaining: 8m 17sRunning iteration 571/1500... Est. remaining: 8m 11sRunning iteration 581/1500... Est. remaining: 8m 5sRunning iteration 591/1500... Est. remaining: 8m 0sRunning iteration 601/1500... Est. remaining: 7m 54sbest_combination: {'lookbacks': [136, 157, 187], 'score': np.float64(0.759508568182265), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 49sRunning iteration 621/1500... Est. remaining: 7m 44sRunning iteration 631/1500... Est. remaining: 7m 38sRunning iteration 641/1500... Est. remaining: 7m 33sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 22sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 11sRunning iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 0sbest_combination: {'lookbacks': [136, 157, 187], 'score': np.float64(0.759508568182265), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 56sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 45sRunning iteration 741/1500... Est. remaining: 6m 39sRunning iteration 751/1500... Est. remaining: 6m 34sRunning iteration 761/1500... Est. remaining: 6m 29sRunning iteration 771/1500... Est. remaining: 6m 23sRunning iteration 781/1500... Est. remaining: 6m 18sRunning iteration 791/1500... Est. remaining: 6m 13sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [136, 157, 187], 'score': np.float64(0.759508568182265), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 2sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 51sRunning iteration 841/1500... Est. remaining: 5m 46sRunning iteration 851/1500... Est. remaining: 5m 41sRunning iteration 861/1500... Est. remaining: 5m 35sRunning iteration 871/1500... Est. remaining: 5m 30sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [136, 157, 187], 'score': np.float64(0.759508568182265), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 27sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [136, 157, 187], 'score': np.float64(0.759508568182265), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [136, 157, 187], 'score': np.float64(0.759508568182265), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,562,177,613
Annual Return: 48.78%
Sharpe Ratio: 1.58698
Sortino Ratio: 1.546
Max Drawdown: -57.9%
Avg Drawdown: -11.7%
Normalized Score: 0.767
Lookback periods: [149, 159, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [149, 159, 200], 'score': np.float64(0.7672109049902989), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,539,283,687
Annual Return: 48.77%
Sharpe Ratio: 1.58802
Sortino Ratio: 1.550
Max Drawdown: -57.9%
Avg Drawdown: -11.8%
Normalized Score: 0.768
Lookback periods: [148, 159, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [148, 159, 200], 'score': np.float64(0.7677919361839333), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [148, 159, 200], 'score': np.float64(0.7677919361839333), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 0.77
best_combination: {'lookbacks': [148, 159, 200], 'score': np.float64(0.7677919361839333), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [148, 159, 200] (score: 0.7678)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [148, 159, 200] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 116 selections (27.9%)
2. sp500_hma: 112 selections (26.9%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,539,283,687.27
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Sun Aug 24 22:21:09 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,121,791,339
Annual Return: 39.86%
Sharpe Ratio: 1.33745
Sortino Ratio: 1.281
Max Drawdown: -58.5%
Avg Drawdown: -13.4%
Normalized Score: -1.055
Lookback periods: [84, 153, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,129,610,025
Annual Return: 39.89%
Sharpe Ratio: 1.38221
Sortino Ratio: 1.303
Max Drawdown: -55.0%
Avg Drawdown: -11.3%
Normalized Score: -0.539
Lookback periods: [63, 118, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,723,982,129
Annual Return: 44.79%
Sharpe Ratio: 1.45360
Sortino Ratio: 1.425
Max Drawdown: -65.2%
Avg Drawdown: -13.1%
Normalized Score: -0.412
Lookback periods: [152, 153, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,184,481,439
Annual Return: 44.14%
Sharpe Ratio: 1.47464
Sortino Ratio: 1.427
Max Drawdown: -57.3%
Avg Drawdown: -12.4%
Normalized Score: -0.074
Lookback periods: [117, 134, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,815,621,169
Annual Return: 44.89%
Sharpe Ratio: 1.49068
Sortino Ratio: 1.449
Max Drawdown: -60.5%
Avg Drawdown: -11.9%
Normalized Score: 0.025
Lookback periods: [102, 148, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 35m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,483,777,824
Annual Return: 45.57%
Sharpe Ratio: 1.49829
Sortino Ratio: 1.450
Max Drawdown: -57.2%
Avg Drawdown: -12.5%
Normalized Score: 0.118
Lookback periods: [124, 157, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 25m 11sRunning iteration 31/1500... Est. remaining: 20m 43sRunning iteration 41/1500... Est. remaining: 18m 24sRunning iteration 51/1500... Est. remaining: 17m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,265,415,771
Annual Return: 46.24%
Sharpe Ratio: 1.50921
Sortino Ratio: 1.467
Max Drawdown: -59.7%
Avg Drawdown: -11.9%
Normalized Score: 0.226
Lookback periods: [148, 156, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 42sRunning iteration 71/1500... Est. remaining: 16m 3sRunning iteration 81/1500... Est. remaining: 15m 30sRunning iteration 91/1500... Est. remaining: 15m 1sRunning iteration 101/1500... Est. remaining: 14m 38sbest_combination: {'lookbacks': [148, 156, 162], 'score': np.float64(0.2259866470859632), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 17sRunning iteration 121/1500... Est. remaining: 13m 59sRunning iteration 131/1500... Est. remaining: 13m 43sRunning iteration 141/1500... Est. remaining: 13m 28sRunning iteration 151/1500... Est. remaining: 13m 15sRunning iteration 161/1500... Est. remaining: 13m 1sRunning iteration 171/1500... Est. remaining: 12m 50sRunning iteration 181/1500... Est. remaining: 12m 39sRunning iteration 191/1500... Est. remaining: 12m 29sRunning iteration 201/1500... Est. remaining: 12m 19sbest_combination: {'lookbacks': [148, 156, 162], 'score': np.float64(0.2259866470859632), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 10sRunning iteration 221/1500... Est. remaining: 12m 1sRunning iteration 231/1500... Est. remaining: 11m 52sRunning iteration 241/1500... Est. remaining: 11m 44sRunning iteration 251/1500... Est. remaining: 11m 36sRunning iteration 261/1500... Est. remaining: 11m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,901,236,811
Annual Return: 46.73%
Sharpe Ratio: 1.52829
Sortino Ratio: 1.495
Max Drawdown: -60.7%
Avg Drawdown: -11.7%
Normalized Score: 0.338
Lookback periods: [147, 158, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/1500... Est. remaining: 11m 27sRunning iteration 281/1500... Est. remaining: 11m 19sRunning iteration 291/1500... Est. remaining: 11m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,569,521,227
Annual Return: 48.31%
Sharpe Ratio: 1.55681
Sortino Ratio: 1.517
Max Drawdown: -61.2%
Avg Drawdown: -11.7%
Normalized Score: 0.541
Lookback periods: [149, 189, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 301/1500... Est. remaining: 11m 10sbest_combination: {'lookbacks': [149, 189, 189], 'score': np.float64(0.5409753117594294), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 3sRunning iteration 321/1500... Est. remaining: 10m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,245,593,243
Annual Return: 48.64%
Sharpe Ratio: 1.57106
Sortino Ratio: 1.537
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: 0.666
Lookback periods: [178, 180, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 331/1500... Est. remaining: 10m 52sRunning iteration 341/1500... Est. remaining: 10m 45sRunning iteration 351/1500... Est. remaining: 10m 38sRunning iteration 361/1500... Est. remaining: 10m 31sRunning iteration 371/1500... Est. remaining: 10m 24sRunning iteration 381/1500... Est. remaining: 10m 17sRunning iteration 391/1500... Est. remaining: 10m 11sRunning iteration 401/1500... Est. remaining: 10m 4sbest_combination: {'lookbacks': [178, 180, 184], 'score': np.float64(0.6661660487793759), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 58sRunning iteration 421/1500... Est. remaining: 9m 51sRunning iteration 431/1500... Est. remaining: 9m 45sRunning iteration 441/1500... Est. remaining: 9m 38sRunning iteration 451/1500... Est. remaining: 9m 32sRunning iteration 461/1500... Est. remaining: 9m 26sRunning iteration 471/1500... Est. remaining: 9m 20sRunning iteration 481/1500... Est. remaining: 9m 14sRunning iteration 491/1500... Est. remaining: 9m 8sRunning iteration 501/1500... Est. remaining: 9m 2sbest_combination: {'lookbacks': [178, 180, 184], 'score': np.float64(0.6661660487793759), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 56sRunning iteration 521/1500... Est. remaining: 8m 49sRunning iteration 531/1500... Est. remaining: 8m 44sRunning iteration 541/1500... Est. remaining: 8m 38sRunning iteration 551/1500... Est. remaining: 8m 32sRunning iteration 561/1500... Est. remaining: 8m 26sRunning iteration 571/1500... Est. remaining: 8m 20sRunning iteration 581/1500... Est. remaining: 8m 14sRunning iteration 591/1500... Est. remaining: 8m 8sRunning iteration 601/1500... Est. remaining: 8m 3sbest_combination: {'lookbacks': [178, 180, 184], 'score': np.float64(0.6661660487793759), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,853,484,876
Annual Return: 48.45%
Sharpe Ratio: 1.56322
Sortino Ratio: 1.523
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.729
Lookback periods: [177, 189, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/1500... Est. remaining: 7m 59sRunning iteration 621/1500... Est. remaining: 7m 53sRunning iteration 631/1500... Est. remaining: 7m 48sRunning iteration 641/1500... Est. remaining: 7m 42sRunning iteration 651/1500... Est. remaining: 7m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,093,595,677
Annual Return: 49.02%
Sharpe Ratio: 1.59046
Sortino Ratio: 1.548
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.796
Lookback periods: [178, 186, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 33sRunning iteration 671/1500... Est. remaining: 7m 27sRunning iteration 681/1500... Est. remaining: 7m 21sRunning iteration 691/1500... Est. remaining: 7m 16sRunning iteration 701/1500... Est. remaining: 7m 10sbest_combination: {'lookbacks': [178, 186, 189], 'score': np.float64(0.7961122866468313), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 5sRunning iteration 721/1500... Est. remaining: 7m 0sRunning iteration 731/1500... Est. remaining: 6m 54sRunning iteration 741/1500... Est. remaining: 6m 49sRunning iteration 751/1500... Est. remaining: 6m 43sRunning iteration 761/1500... Est. remaining: 6m 38sRunning iteration 771/1500... Est. remaining: 6m 32sRunning iteration 781/1500... Est. remaining: 6m 26sRunning iteration 791/1500... Est. remaining: 6m 21sRunning iteration 801/1500... Est. remaining: 6m 15sbest_combination: {'lookbacks': [178, 186, 189], 'score': np.float64(0.7961122866468313), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 10sRunning iteration 821/1500... Est. remaining: 6m 4sRunning iteration 831/1500... Est. remaining: 5m 59sRunning iteration 841/1500... Est. remaining: 5m 53sRunning iteration 851/1500... Est. remaining: 5m 48sRunning iteration 861/1500... Est. remaining: 5m 42sRunning iteration 871/1500... Est. remaining: 5m 37sRunning iteration 881/1500... Est. remaining: 5m 31sRunning iteration 891/1500... Est. remaining: 5m 26sRunning iteration 901/1500... Est. remaining: 5m 20sbest_combination: {'lookbacks': [178, 186, 189], 'score': np.float64(0.7961122866468313), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 15sRunning iteration 921/1500... Est. remaining: 5m 9sRunning iteration 931/1500... Est. remaining: 5m 4sRunning iteration 941/1500... Est. remaining: 4m 58sRunning iteration 951/1500... Est. remaining: 4m 53sRunning iteration 961/1500... Est. remaining: 4m 47sRunning iteration 971/1500... Est. remaining: 4m 42sRunning iteration 981/1500... Est. remaining: 4m 36sRunning iteration 991/1500... Est. remaining: 4m 31sRunning iteration 1001/1500... Est. remaining: 4m 25sbest_combination: {'lookbacks': [178, 186, 189], 'score': np.float64(0.7961122866468313), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 20sRunning iteration 1021/1500... Est. remaining: 4m 15sRunning iteration 1031/1500... Est. remaining: 4m 9sRunning iteration 1041/1500... Est. remaining: 4m 4sRunning iteration 1051/1500... Est. remaining: 3m 58sRunning iteration 1061/1500... Est. remaining: 3m 53sRunning iteration 1071/1500... Est. remaining: 3m 48sRunning iteration 1081/1500... Est. remaining: 3m 42sRunning iteration 1091/1500... Est. remaining: 3m 37sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [178, 186, 189], 'score': np.float64(0.7961122866468313), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 26sRunning iteration 1121/1500... Est. remaining: 3m 21sRunning iteration 1131/1500... Est. remaining: 3m 16sRunning iteration 1141/1500... Est. remaining: 3m 10sRunning iteration 1151/1500... Est. remaining: 3m 5sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 54sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 44sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [178, 186, 189], 'score': np.float64(0.7961122866468313), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 33sRunning iteration 1221/1500... Est. remaining: 2m 28sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [178, 186, 189], 'score': np.float64(0.7961122866468313), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,399,279,624
Annual Return: 48.71%
Sharpe Ratio: 1.57126
Sortino Ratio: 1.534
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.826
Lookback periods: [176, 188, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1381/1500... Est. remaining: 1m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,114,733,081
Annual Return: 49.43%
Sharpe Ratio: 1.59573
Sortino Ratio: 1.563
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.863
Lookback periods: [178, 185, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [178, 185, 188], 'score': np.float64(0.8629308374114346), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.2 minutes
Best normalized score: 0.86
best_combination: {'lookbacks': [178, 185, 188], 'score': np.float64(0.8629308374114346), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [178, 185, 188] (score: 0.8629)

Monte Carlo simulation completed in 13.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [178, 185, 188] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 121 selections (29.1%)
2. sp500_hma: 102 selections (24.5%)
3. naz100_pine: 84 selections (20.2%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,114,733,080.54
Average Annualized Gain: 49.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Sun Aug 24 22:34:30 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $742,018,681
Annual Return: 38.21%
Sharpe Ratio: 1.29997
Sortino Ratio: 1.223
Max Drawdown: -67.3%
Avg Drawdown: -13.9%
Normalized Score: -1.717
Lookback periods: [89, 142, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $703,895,800
Annual Return: 38.00%
Sharpe Ratio: 1.30878
Sortino Ratio: 1.220
Max Drawdown: -55.0%
Avg Drawdown: -12.5%
Normalized Score: -1.108
Lookback periods: [59, 138, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,183,579,367
Annual Return: 42.58%
Sharpe Ratio: 1.41775
Sortino Ratio: 1.372
Max Drawdown: -57.0%
Avg Drawdown: -13.7%
Normalized Score: -0.568
Lookback periods: [131, 147, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,487,588,581
Annual Return: 41.01%
Sharpe Ratio: 1.38534
Sortino Ratio: 1.325
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: -0.385
Lookback periods: [101, 104, 115] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,997,234,314
Annual Return: 43.89%
Sharpe Ratio: 1.45786
Sortino Ratio: 1.410
Max Drawdown: -56.4%
Avg Drawdown: -12.7%
Normalized Score: -0.160
Lookback periods: [130, 148, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 16sRunning iteration 31/1500... Est. remaining: 19m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,966,135,788
Annual Return: 45.05%
Sharpe Ratio: 1.48759
Sortino Ratio: 1.448
Max Drawdown: -55.0%
Avg Drawdown: -11.6%
Normalized Score: 0.264
Lookback periods: [131, 132, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 22sRunning iteration 51/1500... Est. remaining: 17m 6sRunning iteration 61/1500... Est. remaining: 16m 15sRunning iteration 71/1500... Est. remaining: 15m 38sRunning iteration 81/1500... Est. remaining: 15m 5sRunning iteration 91/1500... Est. remaining: 14m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,764,067,982
Annual Return: 46.63%
Sharpe Ratio: 1.51360
Sortino Ratio: 1.471
Max Drawdown: -57.2%
Avg Drawdown: -11.7%
Normalized Score: 0.391
Lookback periods: [154, 157, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 14m 32sbest_combination: {'lookbacks': [154, 157, 171], 'score': np.float64(0.3913947686063236), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 11sRunning iteration 121/1500... Est. remaining: 13m 52sRunning iteration 131/1500... Est. remaining: 13m 35sRunning iteration 141/1500... Est. remaining: 13m 20sRunning iteration 151/1500... Est. remaining: 13m 7sRunning iteration 161/1500... Est. remaining: 12m 55sRunning iteration 171/1500... Est. remaining: 12m 43sRunning iteration 181/1500... Est. remaining: 12m 34sRunning iteration 191/1500... Est. remaining: 12m 24sRunning iteration 201/1500... Est. remaining: 12m 15sbest_combination: {'lookbacks': [154, 157, 171], 'score': np.float64(0.3913947686063236), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,383,610,679
Annual Return: 47.68%
Sharpe Ratio: 1.55306
Sortino Ratio: 1.511
Max Drawdown: -59.0%
Avg Drawdown: -10.7%
Normalized Score: 0.688
Lookback periods: [156, 158, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 12m 5sRunning iteration 231/1500... Est. remaining: 11m 56sRunning iteration 241/1500... Est. remaining: 11m 48sRunning iteration 251/1500... Est. remaining: 11m 41sRunning iteration 261/1500... Est. remaining: 11m 35sRunning iteration 271/1500... Est. remaining: 11m 29sRunning iteration 281/1500... Est. remaining: 11m 23sRunning iteration 291/1500... Est. remaining: 11m 18sRunning iteration 301/1500... Est. remaining: 11m 12sbest_combination: {'lookbacks': [156, 158, 183], 'score': np.float64(0.6883437527964218), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 4sRunning iteration 321/1500... Est. remaining: 10m 57sRunning iteration 331/1500... Est. remaining: 10m 50sRunning iteration 341/1500... Est. remaining: 10m 42sRunning iteration 351/1500... Est. remaining: 10m 35sRunning iteration 361/1500... Est. remaining: 10m 28sRunning iteration 371/1500... Est. remaining: 10m 21sRunning iteration 381/1500... Est. remaining: 10m 14sRunning iteration 391/1500... Est. remaining: 10m 7sRunning iteration 401/1500... Est. remaining: 10m 0sbest_combination: {'lookbacks': [156, 158, 183], 'score': np.float64(0.6883437527964218), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 54sRunning iteration 421/1500... Est. remaining: 9m 48sRunning iteration 431/1500... Est. remaining: 9m 41sRunning iteration 441/1500... Est. remaining: 9m 35sRunning iteration 451/1500... Est. remaining: 9m 29sRunning iteration 461/1500... Est. remaining: 9m 22sRunning iteration 471/1500... Est. remaining: 9m 16sRunning iteration 481/1500... Est. remaining: 9m 10sRunning iteration 491/1500... Est. remaining: 9m 4sRunning iteration 501/1500... Est. remaining: 8m 58sbest_combination: {'lookbacks': [156, 158, 183], 'score': np.float64(0.6883437527964218), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 53sRunning iteration 521/1500... Est. remaining: 8m 47sRunning iteration 531/1500... Est. remaining: 8m 42sRunning iteration 541/1500... Est. remaining: 8m 36sRunning iteration 551/1500... Est. remaining: 8m 31sRunning iteration 561/1500... Est. remaining: 8m 25sRunning iteration 571/1500... Est. remaining: 8m 20sRunning iteration 581/1500... Est. remaining: 8m 14sRunning iteration 591/1500... Est. remaining: 8m 8sRunning iteration 601/1500... Est. remaining: 8m 2sbest_combination: {'lookbacks': [156, 158, 183], 'score': np.float64(0.6883437527964218), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,884,667,196
Annual Return: 48.93%
Sharpe Ratio: 1.58796
Sortino Ratio: 1.552
Max Drawdown: -59.7%
Avg Drawdown: -11.5%
Normalized Score: 0.768
Lookback periods: [150, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/1500... Est. remaining: 7m 58sRunning iteration 621/1500... Est. remaining: 7m 53sRunning iteration 631/1500... Est. remaining: 7m 47sRunning iteration 641/1500... Est. remaining: 7m 41sRunning iteration 651/1500... Est. remaining: 7m 36sRunning iteration 661/1500... Est. remaining: 7m 30sRunning iteration 671/1500... Est. remaining: 7m 25sRunning iteration 681/1500... Est. remaining: 7m 19sRunning iteration 691/1500... Est. remaining: 7m 14sRunning iteration 701/1500... Est. remaining: 7m 8sbest_combination: {'lookbacks': [150, 155, 172], 'score': np.float64(0.7679574960742979), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 3sRunning iteration 721/1500... Est. remaining: 6m 57sRunning iteration 731/1500... Est. remaining: 6m 52sRunning iteration 741/1500... Est. remaining: 6m 46sRunning iteration 751/1500... Est. remaining: 6m 41sRunning iteration 761/1500... Est. remaining: 6m 35sRunning iteration 771/1500... Est. remaining: 6m 30sRunning iteration 781/1500... Est. remaining: 6m 24sRunning iteration 791/1500... Est. remaining: 6m 18sRunning iteration 801/1500... Est. remaining: 6m 13sbest_combination: {'lookbacks': [150, 155, 172], 'score': np.float64(0.7679574960742979), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 7sRunning iteration 821/1500... Est. remaining: 6m 2sRunning iteration 831/1500... Est. remaining: 5m 56sRunning iteration 841/1500... Est. remaining: 5m 51sRunning iteration 851/1500... Est. remaining: 5m 45sRunning iteration 861/1500... Est. remaining: 5m 40sRunning iteration 871/1500... Est. remaining: 5m 34sRunning iteration 881/1500... Est. remaining: 5m 29sRunning iteration 891/1500... Est. remaining: 5m 23sRunning iteration 901/1500... Est. remaining: 5m 18sbest_combination: {'lookbacks': [150, 155, 172], 'score': np.float64(0.7679574960742979), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 12sRunning iteration 921/1500... Est. remaining: 5m 7sRunning iteration 931/1500... Est. remaining: 5m 2sRunning iteration 941/1500... Est. remaining: 4m 56sRunning iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,067,170,128
Annual Return: 48.56%
Sharpe Ratio: 1.59763
Sortino Ratio: 1.543
Max Drawdown: -56.1%
Avg Drawdown: -11.8%
Normalized Score: 0.804
Lookback periods: [135, 158, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 971/1500... Est. remaining: 4m 41sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 30sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [135, 158, 181], 'score': np.float64(0.8036202223426561), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 3sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 47sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [135, 158, 181], 'score': np.float64(0.8036202223426561), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [135, 158, 181], 'score': np.float64(0.8036202223426561), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [135, 158, 181], 'score': np.float64(0.8036202223426561), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,483,818,570
Annual Return: 48.27%
Sharpe Ratio: 1.57982
Sortino Ratio: 1.538
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.827
Lookback periods: [139, 157, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [139, 157, 174], 'score': np.float64(0.827291285873415), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 0.83
best_combination: {'lookbacks': [139, 157, 174], 'score': np.float64(0.827291285873415), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 157, 174] (score: 0.8273)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 157, 174] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 111 selections (26.7%)
3. naz100_pi: 77 selections (18.5%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,483,818,570.19
Average Annualized Gain: 48.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Sun Aug 24 22:47:42 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $492,701,598
Annual Return: 36.58%
Sharpe Ratio: 1.26244
Sortino Ratio: 1.174
Max Drawdown: -52.3%
Avg Drawdown: -12.5%
Normalized Score: -1.283
Lookback periods: [82, 117, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,474,200,084
Annual Return: 40.97%
Sharpe Ratio: 1.36690
Sortino Ratio: 1.318
Max Drawdown: -65.9%
Avg Drawdown: -13.3%
Normalized Score: -1.089
Lookback periods: [134, 167, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,904,769,870
Annual Return: 42.02%
Sharpe Ratio: 1.40484
Sortino Ratio: 1.359
Max Drawdown: -59.2%
Avg Drawdown: -13.3%
Normalized Score: -0.659
Lookback periods: [115, 138, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,612,363,468
Annual Return: 43.32%
Sharpe Ratio: 1.41790
Sortino Ratio: 1.378
Max Drawdown: -59.0%
Avg Drawdown: -12.1%
Normalized Score: -0.295
Lookback periods: [168, 177, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,952,500,676
Annual Return: 42.12%
Sharpe Ratio: 1.40733
Sortino Ratio: 1.351
Max Drawdown: -52.3%
Avg Drawdown: -12.3%
Normalized Score: -0.284
Lookback periods: [96, 101, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,849,234,271
Annual Return: 44.93%
Sharpe Ratio: 1.48588
Sortino Ratio: 1.435
Max Drawdown: -59.0%
Avg Drawdown: -12.3%
Normalized Score: -0.013
Lookback periods: [134, 159, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 50sRunning iteration 31/1500... Est. remaining: 20m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $856,521,386
Annual Return: 38.78%
Sharpe Ratio: 1.39283
Sortino Ratio: 1.292
Max Drawdown: -34.7%
Avg Drawdown: -9.9%
Normalized Score: 0.238
Lookback periods: [50, 61, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 19m 27sRunning iteration 51/1500... Est. remaining: 17m 55sRunning iteration 61/1500... Est. remaining: 16m 59sRunning iteration 71/1500... Est. remaining: 16m 12sRunning iteration 81/1500... Est. remaining: 15m 40sRunning iteration 91/1500... Est. remaining: 15m 12sRunning iteration 101/1500... Est. remaining: 14m 46sbest_combination: {'lookbacks': [50, 61, 87], 'score': np.float64(0.23795032859847548), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 25sRunning iteration 121/1500... Est. remaining: 14m 7sRunning iteration 131/1500... Est. remaining: 13m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,495,511,993
Annual Return: 47.13%
Sharpe Ratio: 1.55246
Sortino Ratio: 1.506
Max Drawdown: -62.7%
Avg Drawdown: -11.4%
Normalized Score: 0.399
Lookback periods: [137, 156, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 13m 46sRunning iteration 151/1500... Est. remaining: 13m 32sRunning iteration 161/1500... Est. remaining: 13m 18sRunning iteration 171/1500... Est. remaining: 13m 5sRunning iteration 181/1500... Est. remaining: 12m 53sRunning iteration 191/1500... Est. remaining: 12m 42sRunning iteration 201/1500... Est. remaining: 12m 32sbest_combination: {'lookbacks': [137, 156, 190], 'score': np.float64(0.39936415770599887), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 22sRunning iteration 221/1500... Est. remaining: 12m 13sRunning iteration 231/1500... Est. remaining: 12m 4sRunning iteration 241/1500... Est. remaining: 11m 56sRunning iteration 251/1500... Est. remaining: 11m 48sRunning iteration 261/1500... Est. remaining: 11m 40sRunning iteration 271/1500... Est. remaining: 11m 32sRunning iteration 281/1500... Est. remaining: 11m 24sRunning iteration 291/1500... Est. remaining: 11m 16sRunning iteration 301/1500... Est. remaining: 11m 8sbest_combination: {'lookbacks': [137, 156, 190], 'score': np.float64(0.39936415770599887), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 1sRunning iteration 321/1500... Est. remaining: 10m 54sRunning iteration 331/1500... Est. remaining: 10m 47sRunning iteration 341/1500... Est. remaining: 10m 41sRunning iteration 351/1500... Est. remaining: 10m 34sRunning iteration 361/1500... Est. remaining: 10m 27sRunning iteration 371/1500... Est. remaining: 10m 21sRunning iteration 381/1500... Est. remaining: 10m 14sRunning iteration 391/1500... Est. remaining: 10m 9sRunning iteration 401/1500... Est. remaining: 10m 4sbest_combination: {'lookbacks': [137, 156, 190], 'score': np.float64(0.39936415770599887), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 59sRunning iteration 421/1500... Est. remaining: 9m 53sRunning iteration 431/1500... Est. remaining: 9m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,648,710,579
Annual Return: 41.43%
Sharpe Ratio: 1.49626
Sortino Ratio: 1.401
Max Drawdown: -37.0%
Avg Drawdown: -10.1%
Normalized Score: 0.668
Lookback periods: [51, 55, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 43sRunning iteration 451/1500... Est. remaining: 9m 37sRunning iteration 461/1500... Est. remaining: 9m 31sRunning iteration 471/1500... Est. remaining: 9m 24sRunning iteration 481/1500... Est. remaining: 9m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,163,910,399
Annual Return: 42.54%
Sharpe Ratio: 1.52658
Sortino Ratio: 1.431
Max Drawdown: -35.7%
Avg Drawdown: -9.6%
Normalized Score: 0.976
Lookback periods: [50, 52, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 9m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,747,595,443
Annual Return: 44.82%
Sharpe Ratio: 1.59530
Sortino Ratio: 1.503
Max Drawdown: -35.6%
Avg Drawdown: -9.1%
Normalized Score: 1.462
Lookback periods: [50, 54, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 9m 11sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.4615576319031878), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 5sRunning iteration 521/1500... Est. remaining: 8m 59sRunning iteration 531/1500... Est. remaining: 8m 52sRunning iteration 541/1500... Est. remaining: 8m 46sRunning iteration 551/1500... Est. remaining: 8m 40sRunning iteration 561/1500... Est. remaining: 8m 34sRunning iteration 571/1500... Est. remaining: 8m 28sRunning iteration 581/1500... Est. remaining: 8m 22sRunning iteration 591/1500... Est. remaining: 8m 16sRunning iteration 601/1500... Est. remaining: 8m 10sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.4615576319031878), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 4sRunning iteration 621/1500... Est. remaining: 7m 58sRunning iteration 631/1500... Est. remaining: 7m 52sRunning iteration 641/1500... Est. remaining: 7m 46sRunning iteration 651/1500... Est. remaining: 7m 40sRunning iteration 661/1500... Est. remaining: 7m 35sRunning iteration 671/1500... Est. remaining: 7m 29sRunning iteration 681/1500... Est. remaining: 7m 23sRunning iteration 691/1500... Est. remaining: 7m 17sRunning iteration 701/1500... Est. remaining: 7m 11sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.4615576319031878), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 6sRunning iteration 721/1500... Est. remaining: 7m 0sRunning iteration 731/1500... Est. remaining: 6m 54sRunning iteration 741/1500... Est. remaining: 6m 48sRunning iteration 751/1500... Est. remaining: 6m 43sRunning iteration 761/1500... Est. remaining: 6m 37sRunning iteration 771/1500... Est. remaining: 6m 32sRunning iteration 781/1500... Est. remaining: 6m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,007,517,603
Annual Return: 45.10%
Sharpe Ratio: 1.59306
Sortino Ratio: 1.502
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.527
Lookback periods: [51, 54, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 6m 22sRunning iteration 801/1500... Est. remaining: 6m 17sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.526611296046665), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 11sRunning iteration 821/1500... Est. remaining: 6m 5sRunning iteration 831/1500... Est. remaining: 6m 0sRunning iteration 841/1500... Est. remaining: 5m 54sRunning iteration 851/1500... Est. remaining: 5m 49sRunning iteration 861/1500... Est. remaining: 5m 43sRunning iteration 871/1500... Est. remaining: 5m 37sRunning iteration 881/1500... Est. remaining: 5m 32sRunning iteration 891/1500... Est. remaining: 5m 26sRunning iteration 901/1500... Est. remaining: 5m 21sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.526611296046665), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 15sRunning iteration 921/1500... Est. remaining: 5m 10sRunning iteration 931/1500... Est. remaining: 5m 4sRunning iteration 941/1500... Est. remaining: 4m 59sRunning iteration 951/1500... Est. remaining: 4m 53sRunning iteration 961/1500... Est. remaining: 4m 48sRunning iteration 971/1500... Est. remaining: 4m 42sRunning iteration 981/1500... Est. remaining: 4m 37sRunning iteration 991/1500... Est. remaining: 4m 31sRunning iteration 1001/1500... Est. remaining: 4m 26sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.526611296046665), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 20sRunning iteration 1021/1500... Est. remaining: 4m 15sRunning iteration 1031/1500... Est. remaining: 4m 10sRunning iteration 1041/1500... Est. remaining: 4m 4sRunning iteration 1051/1500... Est. remaining: 3m 59sRunning iteration 1061/1500... Est. remaining: 3m 53sRunning iteration 1071/1500... Est. remaining: 3m 48sRunning iteration 1081/1500... Est. remaining: 3m 42sRunning iteration 1091/1500... Est. remaining: 3m 37sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.526611296046665), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 26sRunning iteration 1121/1500... Est. remaining: 3m 21sRunning iteration 1131/1500... Est. remaining: 3m 16sRunning iteration 1141/1500... Est. remaining: 3m 10sRunning iteration 1151/1500... Est. remaining: 3m 5sRunning iteration 1161/1500... Est. remaining: 3m 0sRunning iteration 1171/1500... Est. remaining: 2m 54sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 44sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.526611296046665), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 33sRunning iteration 1221/1500... Est. remaining: 2m 28sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.526611296046665), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.526611296046665), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.53
best_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.526611296046665), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [51, 54, 83] (score: 1.5266)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [51, 54, 83] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 53 selections (12.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,007,517,603.28
Average Annualized Gain: 45.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Sun Aug 24 23:00:57 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $290,041,441
Annual Return: 34.51%
Sharpe Ratio: 1.20813
Sortino Ratio: 1.112
Max Drawdown: -62.2%
Avg Drawdown: -12.3%
Normalized Score: -1.931
Lookback periods: [60, 79, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,032,766,482
Annual Return: 39.53%
Sharpe Ratio: 1.33723
Sortino Ratio: 1.274
Max Drawdown: -59.7%
Avg Drawdown: -13.3%
Normalized Score: -1.126
Lookback periods: [92, 149, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,540,236,168
Annual Return: 43.20%
Sharpe Ratio: 1.44389
Sortino Ratio: 1.403
Max Drawdown: -61.6%
Avg Drawdown: -12.3%
Normalized Score: -0.360
Lookback periods: [116, 146, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,905,808,920
Annual Return: 44.99%
Sharpe Ratio: 1.45930
Sortino Ratio: 1.423
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.056
Lookback periods: [175, 182, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 50sRunning iteration 31/1500... Est. remaining: 18m 35sRunning iteration 41/1500... Est. remaining: 16m 57sRunning iteration 51/1500... Est. remaining: 15m 54sRunning iteration 61/1500... Est. remaining: 15m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,749,914,556
Annual Return: 46.62%
Sharpe Ratio: 1.53399
Sortino Ratio: 1.508
Max Drawdown: -56.1%
Avg Drawdown: -11.8%
Normalized Score: 0.487
Lookback periods: [133, 133, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 3sRunning iteration 81/1500... Est. remaining: 14m 41sRunning iteration 91/1500... Est. remaining: 14m 17sRunning iteration 101/1500... Est. remaining: 13m 57sbest_combination: {'lookbacks': [133, 133, 172], 'score': np.float64(0.48667643581659614), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 39sRunning iteration 121/1500... Est. remaining: 13m 23sRunning iteration 131/1500... Est. remaining: 13m 10sRunning iteration 141/1500... Est. remaining: 12m 58sRunning iteration 151/1500... Est. remaining: 12m 47sRunning iteration 161/1500... Est. remaining: 12m 38sRunning iteration 171/1500... Est. remaining: 12m 29sRunning iteration 181/1500... Est. remaining: 12m 19sRunning iteration 191/1500... Est. remaining: 12m 10sRunning iteration 201/1500... Est. remaining: 12m 1sbest_combination: {'lookbacks': [133, 133, 172], 'score': np.float64(0.48667643581659614), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,268,777,947
Annual Return: 47.61%
Sharpe Ratio: 1.56041
Sortino Ratio: 1.522
Max Drawdown: -58.5%
Avg Drawdown: -11.7%
Normalized Score: 0.580
Lookback periods: [144, 156, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/1500... Est. remaining: 12m 0sRunning iteration 221/1500... Est. remaining: 11m 52sRunning iteration 231/1500... Est. remaining: 11m 44sRunning iteration 241/1500... Est. remaining: 11m 36sRunning iteration 251/1500... Est. remaining: 11m 28sRunning iteration 261/1500... Est. remaining: 11m 21sRunning iteration 271/1500... Est. remaining: 11m 13sRunning iteration 281/1500... Est. remaining: 11m 6sRunning iteration 291/1500... Est. remaining: 10m 58sRunning iteration 301/1500... Est. remaining: 10m 51sbest_combination: {'lookbacks': [144, 156, 178], 'score': np.float64(0.5796380652216925), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 44sRunning iteration 321/1500... Est. remaining: 10m 38sRunning iteration 331/1500... Est. remaining: 10m 31sRunning iteration 341/1500... Est. remaining: 10m 25sRunning iteration 351/1500... Est. remaining: 10m 18sRunning iteration 361/1500... Est. remaining: 10m 12sRunning iteration 371/1500... Est. remaining: 10m 5sRunning iteration 381/1500... Est. remaining: 9m 59sRunning iteration 391/1500... Est. remaining: 9m 53sRunning iteration 401/1500... Est. remaining: 9m 47sbest_combination: {'lookbacks': [144, 156, 178], 'score': np.float64(0.5796380652216925), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 41sRunning iteration 421/1500... Est. remaining: 9m 34sRunning iteration 431/1500... Est. remaining: 9m 28sRunning iteration 441/1500... Est. remaining: 9m 22sRunning iteration 451/1500... Est. remaining: 9m 16sRunning iteration 461/1500... Est. remaining: 9m 10sRunning iteration 471/1500... Est. remaining: 9m 5sRunning iteration 481/1500... Est. remaining: 8m 59sRunning iteration 491/1500... Est. remaining: 8m 53sRunning iteration 501/1500... Est. remaining: 8m 47sbest_combination: {'lookbacks': [144, 156, 178], 'score': np.float64(0.5796380652216925), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 41sRunning iteration 521/1500... Est. remaining: 8m 36sRunning iteration 531/1500... Est. remaining: 8m 30sRunning iteration 541/1500... Est. remaining: 8m 25sRunning iteration 551/1500... Est. remaining: 8m 19sRunning iteration 561/1500... Est. remaining: 8m 14sRunning iteration 571/1500... Est. remaining: 8m 9sRunning iteration 581/1500... Est. remaining: 8m 3sRunning iteration 591/1500... Est. remaining: 7m 58sRunning iteration 601/1500... Est. remaining: 7m 52sbest_combination: {'lookbacks': [144, 156, 178], 'score': np.float64(0.5796380652216925), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 47sRunning iteration 621/1500... Est. remaining: 7m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,355,346,176
Annual Return: 47.04%
Sharpe Ratio: 1.52846
Sortino Ratio: 1.498
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.666
Lookback periods: [157, 164, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 7m 37sRunning iteration 641/1500... Est. remaining: 7m 32sRunning iteration 651/1500... Est. remaining: 7m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,184,914,201
Annual Return: 47.56%
Sharpe Ratio: 1.55198
Sortino Ratio: 1.514
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.782
Lookback periods: [157, 161, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 23sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 12sRunning iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [157, 161, 175], 'score': np.float64(0.7816615172251822), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 55sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 44sRunning iteration 741/1500... Est. remaining: 6m 39sRunning iteration 751/1500... Est. remaining: 6m 33sRunning iteration 761/1500... Est. remaining: 6m 28sRunning iteration 771/1500... Est. remaining: 6m 22sRunning iteration 781/1500... Est. remaining: 6m 17sRunning iteration 791/1500... Est. remaining: 6m 12sRunning iteration 801/1500... Est. remaining: 6m 6sbest_combination: {'lookbacks': [157, 161, 175], 'score': np.float64(0.7816615172251822), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 1sRunning iteration 821/1500... Est. remaining: 5m 55sRunning iteration 831/1500... Est. remaining: 5m 50sRunning iteration 841/1500... Est. remaining: 5m 45sRunning iteration 851/1500... Est. remaining: 5m 39sRunning iteration 861/1500... Est. remaining: 5m 34sRunning iteration 871/1500... Est. remaining: 5m 29sRunning iteration 881/1500... Est. remaining: 5m 23sRunning iteration 891/1500... Est. remaining: 5m 18sRunning iteration 901/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [157, 161, 175], 'score': np.float64(0.7816615172251822), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,762,261,239
Annual Return: 48.41%
Sharpe Ratio: 1.57534
Sortino Ratio: 1.541
Max Drawdown: -55.0%
Avg Drawdown: -10.8%
Normalized Score: 0.947
Lookback periods: [156, 162, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 5m 8sRunning iteration 921/1500... Est. remaining: 5m 3sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 52sRunning iteration 951/1500... Est. remaining: 4m 47sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 36sRunning iteration 981/1500... Est. remaining: 4m 31sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 20sbest_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(0.9473196142913041), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 3m 59sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(0.9473196142913041), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(0.9473196142913041), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(0.9473196142913041), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(0.9473196142913041), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 0.95
best_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(0.9473196142913041), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 162, 173] (score: 0.9473)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 162, 173] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 112 selections (26.9%)
2. sp500_hma: 107 selections (25.7%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 80 selections (19.2%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,762,261,239.28
Average Annualized Gain: 48.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Sun Aug 24 23:14:04 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-24T23:14:04.225330
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.0935
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,208,925,127
Annual Return: 40.17%
Sharpe Ratio: 1.35335
Sortino Ratio: 1.277
Max Drawdown: -57.2%
Avg Drawdown: -12.7%
Normalized Score: -0.861
Lookback periods: [59, 151, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,388,114,137
Annual Return: 42.95%
Sharpe Ratio: 1.40673
Sortino Ratio: 1.363
Max Drawdown: -65.9%
Avg Drawdown: -13.1%
Normalized Score: -0.748
Lookback periods: [142, 196, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,169,571,273
Annual Return: 42.55%
Sharpe Ratio: 1.46655
Sortino Ratio: 1.367
Max Drawdown: -55.8%
Avg Drawdown: -11.2%
Normalized Score: -0.096
Lookback periods: [52, 109, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,997,693,067
Annual Return: 45.09%
Sharpe Ratio: 1.47481
Sortino Ratio: 1.434
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.090
Lookback periods: [163, 179, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 34sRunning iteration 21/1500... Est. remaining: 22m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,397,080,169
Annual Return: 46.35%
Sharpe Ratio: 1.51467
Sortino Ratio: 1.477
Max Drawdown: -55.0%
Avg Drawdown: -11.3%
Normalized Score: 0.512
Lookback periods: [156, 163, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 57sRunning iteration 41/1500... Est. remaining: 18m 2sRunning iteration 51/1500... Est. remaining: 16m 52sRunning iteration 61/1500... Est. remaining: 16m 2sRunning iteration 71/1500... Est. remaining: 15m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,394,647,572
Annual Return: 40.74%
Sharpe Ratio: 1.47915
Sortino Ratio: 1.372
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.688
Lookback periods: [50, 57, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 15m 21sRunning iteration 91/1500... Est. remaining: 14m 55sRunning iteration 101/1500... Est. remaining: 14m 32sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 13sRunning iteration 121/1500... Est. remaining: 13m 56sRunning iteration 131/1500... Est. remaining: 13m 40sRunning iteration 141/1500... Est. remaining: 13m 25sRunning iteration 151/1500... Est. remaining: 13m 12sRunning iteration 161/1500... Est. remaining: 13m 0sRunning iteration 171/1500... Est. remaining: 12m 49sRunning iteration 181/1500... Est. remaining: 12m 39sRunning iteration 191/1500... Est. remaining: 12m 29sRunning iteration 201/1500... Est. remaining: 12m 20sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 11sRunning iteration 221/1500... Est. remaining: 12m 2sRunning iteration 231/1500... Est. remaining: 11m 54sRunning iteration 241/1500... Est. remaining: 11m 46sRunning iteration 251/1500... Est. remaining: 11m 38sRunning iteration 261/1500... Est. remaining: 11m 31sRunning iteration 271/1500... Est. remaining: 11m 23sRunning iteration 281/1500... Est. remaining: 11m 16sRunning iteration 291/1500... Est. remaining: 11m 9sRunning iteration 301/1500... Est. remaining: 11m 2sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 55sRunning iteration 321/1500... Est. remaining: 10m 48sRunning iteration 331/1500... Est. remaining: 10m 41sRunning iteration 341/1500... Est. remaining: 10m 35sRunning iteration 351/1500... Est. remaining: 10m 28sRunning iteration 361/1500... Est. remaining: 10m 22sRunning iteration 371/1500... Est. remaining: 10m 17sRunning iteration 381/1500... Est. remaining: 10m 10sRunning iteration 391/1500... Est. remaining: 10m 4sRunning iteration 401/1500... Est. remaining: 9m 59sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,582,419,979
Annual Return: 48.32%
Sharpe Ratio: 1.58304
Sortino Ratio: 1.546
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.848
Lookback periods: [144, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 52sRunning iteration 431/1500... Est. remaining: 9m 46sRunning iteration 441/1500... Est. remaining: 9m 40sRunning iteration 451/1500... Est. remaining: 9m 33sRunning iteration 461/1500... Est. remaining: 9m 27sRunning iteration 471/1500... Est. remaining: 9m 21sRunning iteration 481/1500... Est. remaining: 9m 15sRunning iteration 491/1500... Est. remaining: 9m 9sRunning iteration 501/1500... Est. remaining: 9m 3sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 57sRunning iteration 521/1500... Est. remaining: 8m 51sRunning iteration 531/1500... Est. remaining: 8m 45sRunning iteration 541/1500... Est. remaining: 8m 39sRunning iteration 551/1500... Est. remaining: 8m 33sRunning iteration 561/1500... Est. remaining: 8m 27sRunning iteration 571/1500... Est. remaining: 8m 21sRunning iteration 581/1500... Est. remaining: 8m 16sRunning iteration 591/1500... Est. remaining: 8m 10sRunning iteration 601/1500... Est. remaining: 8m 4sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 59sRunning iteration 621/1500... Est. remaining: 7m 53sRunning iteration 631/1500... Est. remaining: 7m 47sRunning iteration 641/1500... Est. remaining: 7m 41sRunning iteration 651/1500... Est. remaining: 7m 36sRunning iteration 661/1500... Est. remaining: 7m 30sRunning iteration 671/1500... Est. remaining: 7m 24sRunning iteration 681/1500... Est. remaining: 7m 19sRunning iteration 691/1500... Est. remaining: 7m 13sRunning iteration 701/1500... Est. remaining: 7m 8sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 2sRunning iteration 721/1500... Est. remaining: 6m 57sRunning iteration 731/1500... Est. remaining: 6m 51sRunning iteration 741/1500... Est. remaining: 6m 46sRunning iteration 751/1500... Est. remaining: 6m 40sRunning iteration 761/1500... Est. remaining: 6m 35sRunning iteration 771/1500... Est. remaining: 6m 29sRunning iteration 781/1500... Est. remaining: 6m 24sRunning iteration 791/1500... Est. remaining: 6m 19sRunning iteration 801/1500... Est. remaining: 6m 13sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 8sRunning iteration 821/1500... Est. remaining: 6m 3sRunning iteration 831/1500... Est. remaining: 5m 57sRunning iteration 841/1500... Est. remaining: 5m 52sRunning iteration 851/1500... Est. remaining: 5m 47sRunning iteration 861/1500... Est. remaining: 5m 41sRunning iteration 871/1500... Est. remaining: 5m 36sRunning iteration 881/1500... Est. remaining: 5m 31sRunning iteration 891/1500... Est. remaining: 5m 25sRunning iteration 901/1500... Est. remaining: 5m 20sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 15sRunning iteration 921/1500... Est. remaining: 5m 9sRunning iteration 931/1500... Est. remaining: 5m 4sRunning iteration 941/1500... Est. remaining: 4m 59sRunning iteration 951/1500... Est. remaining: 4m 53sRunning iteration 961/1500... Est. remaining: 4m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,317,831,913
Annual Return: 48.19%
Sharpe Ratio: 1.57092
Sortino Ratio: 1.539
Max Drawdown: -55.0%
Avg Drawdown: -10.8%
Normalized Score: 0.919
Lookback periods: [157, 162, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 971/1500... Est. remaining: 4m 43sRunning iteration 981/1500... Est. remaining: 4m 38sRunning iteration 991/1500... Est. remaining: 4m 32sRunning iteration 1001/1500... Est. remaining: 4m 27sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 21sRunning iteration 1021/1500... Est. remaining: 4m 16sRunning iteration 1031/1500... Est. remaining: 4m 11sRunning iteration 1041/1500... Est. remaining: 4m 5sRunning iteration 1051/1500... Est. remaining: 4m 0sRunning iteration 1061/1500... Est. remaining: 3m 54sRunning iteration 1071/1500... Est. remaining: 3m 49sRunning iteration 1081/1500... Est. remaining: 3m 44sRunning iteration 1091/1500... Est. remaining: 3m 38sRunning iteration 1101/1500... Est. remaining: 3m 33sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 28sRunning iteration 1121/1500... Est. remaining: 3m 22sRunning iteration 1131/1500... Est. remaining: 3m 17sRunning iteration 1141/1500... Est. remaining: 3m 11sRunning iteration 1151/1500... Est. remaining: 3m 6sRunning iteration 1161/1500... Est. remaining: 3m 1sRunning iteration 1171/1500... Est. remaining: 2m 55sRunning iteration 1181/1500... Est. remaining: 2m 50sRunning iteration 1191/1500... Est. remaining: 2m 45sRunning iteration 1201/1500... Est. remaining: 2m 39sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 34sRunning iteration 1221/1500... Est. remaining: 2m 28sRunning iteration 1231/1500... Est. remaining: 2m 23sRunning iteration 1241/1500... Est. remaining: 2m 18sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 7sRunning iteration 1271/1500... Est. remaining: 2m 2sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 51sRunning iteration 1301/1500... Est. remaining: 1m 46sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 30sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,917,251,564
Annual Return: 48.48%
Sharpe Ratio: 1.59337
Sortino Ratio: 1.560
Max Drawdown: -58.2%
Avg Drawdown: -10.7%
Normalized Score: 0.920
Lookback periods: [146, 156, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.3 minutes
Best normalized score: 0.92
best_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [156, 161, 168] (score: 1.0935)

Monte Carlo simulation completed in 13.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [146, 156, 162] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 111 selections (26.7%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,917,251,563.74
Average Annualized Gain: 48.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Sun Aug 24 23:27:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,994,957,625
Annual Return: 43.88%
Sharpe Ratio: 1.44634
Sortino Ratio: 1.408
Max Drawdown: -60.9%
Avg Drawdown: -12.3%
Normalized Score: -0.269
Lookback periods: [145, 163, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,753,031,477
Annual Return: 47.89%
Sharpe Ratio: 1.57279
Sortino Ratio: 1.539
Max Drawdown: -62.4%
Avg Drawdown: -11.6%
Normalized Score: 0.529
Lookback periods: [128, 154, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,895,728,112
Annual Return: 47.96%
Sharpe Ratio: 1.55056
Sortino Ratio: 1.522
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.650
Lookback periods: [175, 185, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 20m 15sRunning iteration 31/1500... Est. remaining: 17m 35sRunning iteration 41/1500... Est. remaining: 16m 9sRunning iteration 51/1500... Est. remaining: 15m 17sRunning iteration 61/1500... Est. remaining: 14m 42sRunning iteration 71/1500... Est. remaining: 14m 14sRunning iteration 81/1500... Est. remaining: 13m 52sRunning iteration 91/1500... Est. remaining: 13m 34sRunning iteration 101/1500... Est. remaining: 13m 17sbest_combination: {'lookbacks': [175, 185, 189], 'score': np.float64(0.6502443841367782), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 6sRunning iteration 121/1500... Est. remaining: 12m 54sRunning iteration 131/1500... Est. remaining: 12m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,553,756,918
Annual Return: 43.22%
Sharpe Ratio: 1.55111
Sortino Ratio: 1.467
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.295
Lookback periods: [50, 50, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 12m 45sRunning iteration 151/1500... Est. remaining: 12m 35sRunning iteration 161/1500... Est. remaining: 12m 26sRunning iteration 171/1500... Est. remaining: 12m 16sRunning iteration 181/1500... Est. remaining: 12m 8sRunning iteration 191/1500... Est. remaining: 12m 0sRunning iteration 201/1500... Est. remaining: 11m 52sbest_combination: {'lookbacks': [50, 50, 102], 'score': np.float64(1.2951231057172277), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 44sRunning iteration 221/1500... Est. remaining: 11m 36sRunning iteration 231/1500... Est. remaining: 11m 28sRunning iteration 241/1500... Est. remaining: 11m 22sRunning iteration 251/1500... Est. remaining: 11m 15sRunning iteration 261/1500... Est. remaining: 11m 8sRunning iteration 271/1500... Est. remaining: 11m 1sRunning iteration 281/1500... Est. remaining: 10m 54sRunning iteration 291/1500... Est. remaining: 10m 49sRunning iteration 301/1500... Est. remaining: 10m 42sbest_combination: {'lookbacks': [50, 50, 102], 'score': np.float64(1.2951231057172277), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 36sRunning iteration 321/1500... Est. remaining: 10m 29sRunning iteration 331/1500... Est. remaining: 10m 23sRunning iteration 341/1500... Est. remaining: 10m 17sRunning iteration 351/1500... Est. remaining: 10m 11sRunning iteration 361/1500... Est. remaining: 10m 5sRunning iteration 371/1500... Est. remaining: 9m 59sRunning iteration 381/1500... Est. remaining: 9m 53sRunning iteration 391/1500... Est. remaining: 9m 47sRunning iteration 401/1500... Est. remaining: 9m 41sbest_combination: {'lookbacks': [50, 50, 102], 'score': np.float64(1.2951231057172277), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 35sRunning iteration 421/1500... Est. remaining: 9m 29sRunning iteration 431/1500... Est. remaining: 9m 24sRunning iteration 441/1500... Est. remaining: 9m 18sRunning iteration 451/1500... Est. remaining: 9m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,674,526,590
Annual Return: 43.41%
Sharpe Ratio: 1.56783
Sortino Ratio: 1.473
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.385
Lookback periods: [50, 51, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 9m 9sRunning iteration 471/1500... Est. remaining: 9m 4sRunning iteration 481/1500... Est. remaining: 8m 58sRunning iteration 491/1500... Est. remaining: 8m 52sRunning iteration 501/1500... Est. remaining: 8m 46sbest_combination: {'lookbacks': [50, 51, 102], 'score': np.float64(1.3846840530189115), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 41sRunning iteration 521/1500... Est. remaining: 8m 35sRunning iteration 531/1500... Est. remaining: 8m 29sRunning iteration 541/1500... Est. remaining: 8m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,005,011
Annual Return: 43.90%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.535
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 21sRunning iteration 561/1500... Est. remaining: 8m 15sRunning iteration 571/1500... Est. remaining: 8m 10sRunning iteration 581/1500... Est. remaining: 8m 5sRunning iteration 591/1500... Est. remaining: 7m 59sRunning iteration 601/1500... Est. remaining: 7m 54sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.5346297552910149), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 48sRunning iteration 621/1500... Est. remaining: 7m 42sRunning iteration 631/1500... Est. remaining: 7m 37sRunning iteration 641/1500... Est. remaining: 7m 31sRunning iteration 651/1500... Est. remaining: 7m 26sRunning iteration 661/1500... Est. remaining: 7m 20sRunning iteration 671/1500... Est. remaining: 7m 15sRunning iteration 681/1500... Est. remaining: 7m 9sRunning iteration 691/1500... Est. remaining: 7m 3sRunning iteration 701/1500... Est. remaining: 6m 58sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.5346297552910149), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 53sRunning iteration 721/1500... Est. remaining: 6m 47sRunning iteration 731/1500... Est. remaining: 6m 42sRunning iteration 741/1500... Est. remaining: 6m 36sRunning iteration 751/1500... Est. remaining: 6m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.670
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 6m 27sRunning iteration 771/1500... Est. remaining: 6m 21sRunning iteration 781/1500... Est. remaining: 6m 16sRunning iteration 791/1500... Est. remaining: 6m 11sRunning iteration 801/1500... Est. remaining: 6m 6sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.6699565789556323), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.673
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 811/1500... Est. remaining: 6m 1sRunning iteration 821/1500... Est. remaining: 5m 56sRunning iteration 831/1500... Est. remaining: 5m 51sRunning iteration 841/1500... Est. remaining: 5m 45sRunning iteration 851/1500... Est. remaining: 5m 40sRunning iteration 861/1500... Est. remaining: 5m 35sRunning iteration 871/1500... Est. remaining: 5m 29sRunning iteration 881/1500... Est. remaining: 5m 24sRunning iteration 891/1500... Est. remaining: 5m 18sRunning iteration 901/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6729045491906427), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 8sRunning iteration 921/1500... Est. remaining: 5m 2sRunning iteration 931/1500... Est. remaining: 4m 57sRunning iteration 941/1500... Est. remaining: 4m 52sRunning iteration 951/1500... Est. remaining: 4m 46sRunning iteration 961/1500... Est. remaining: 4m 41sRunning iteration 971/1500... Est. remaining: 4m 36sRunning iteration 981/1500... Est. remaining: 4m 30sRunning iteration 991/1500... Est. remaining: 4m 25sRunning iteration 1001/1500... Est. remaining: 4m 20sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6729045491906427), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 4sRunning iteration 1041/1500... Est. remaining: 3m 59sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 43sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 22sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 1.94
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9365)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Sun Aug 24 23:40:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,014,958,449
Annual Return: 39.46%
Sharpe Ratio: 1.34613
Sortino Ratio: 1.282
Max Drawdown: -64.5%
Avg Drawdown: -13.8%
Normalized Score: -1.347
Lookback periods: [105, 122, 132] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $934,319,154
Annual Return: 39.13%
Sharpe Ratio: 1.35708
Sortino Ratio: 1.276
Max Drawdown: -52.3%
Avg Drawdown: -12.0%
Normalized Score: -0.703
Lookback periods: [92, 99, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,420,036,599
Annual Return: 44.43%
Sharpe Ratio: 1.48436
Sortino Ratio: 1.433
Max Drawdown: -58.2%
Avg Drawdown: -12.1%
Normalized Score: -0.015
Lookback periods: [122, 148, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,437,909,836
Annual Return: 45.52%
Sharpe Ratio: 1.48222
Sortino Ratio: 1.455
Max Drawdown: -59.7%
Avg Drawdown: -12.2%
Normalized Score: 0.058
Lookback periods: [145, 175, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,247,964,031
Annual Return: 45.34%
Sharpe Ratio: 1.48445
Sortino Ratio: 1.441
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.161
Lookback periods: [167, 179, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 18sRunning iteration 31/1500... Est. remaining: 20m 2sRunning iteration 41/1500... Est. remaining: 18m 0sRunning iteration 51/1500... Est. remaining: 16m 46sRunning iteration 61/1500... Est. remaining: 15m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,842,803,404
Annual Return: 45.89%
Sharpe Ratio: 1.48659
Sortino Ratio: 1.454
Max Drawdown: -59.1%
Avg Drawdown: -11.5%
Normalized Score: 0.237
Lookback periods: [158, 161, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,651,341,780
Annual Return: 47.23%
Sharpe Ratio: 1.56109
Sortino Ratio: 1.525
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.563
Lookback periods: [141, 147, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 16m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,272,564,667
Annual Return: 40.37%
Sharpe Ratio: 1.45434
Sortino Ratio: 1.357
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.641
Lookback periods: [50, 56, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 15m 55sRunning iteration 91/1500... Est. remaining: 15m 25sRunning iteration 101/1500... Est. remaining: 14m 57sbest_combination: {'lookbacks': [50, 56, 101], 'score': np.float64(0.6411065057106891), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 33sRunning iteration 121/1500... Est. remaining: 14m 11sRunning iteration 131/1500... Est. remaining: 13m 53sRunning iteration 141/1500... Est. remaining: 13m 37sRunning iteration 151/1500... Est. remaining: 13m 22sRunning iteration 161/1500... Est. remaining: 13m 8sRunning iteration 171/1500... Est. remaining: 12m 55sRunning iteration 181/1500... Est. remaining: 12m 44sRunning iteration 191/1500... Est. remaining: 12m 33sRunning iteration 201/1500... Est. remaining: 12m 24sbest_combination: {'lookbacks': [50, 56, 101], 'score': np.float64(0.6411065057106891), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 14sRunning iteration 221/1500... Est. remaining: 12m 5sRunning iteration 231/1500... Est. remaining: 11m 56sRunning iteration 241/1500... Est. remaining: 11m 48sRunning iteration 251/1500... Est. remaining: 11m 40sRunning iteration 261/1500... Est. remaining: 11m 33sRunning iteration 271/1500... Est. remaining: 11m 25sRunning iteration 281/1500... Est. remaining: 11m 17sRunning iteration 291/1500... Est. remaining: 11m 10sRunning iteration 301/1500... Est. remaining: 11m 2sbest_combination: {'lookbacks': [50, 56, 101], 'score': np.float64(0.6411065057106891), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 55sRunning iteration 321/1500... Est. remaining: 10m 48sRunning iteration 331/1500... Est. remaining: 10m 42sRunning iteration 341/1500... Est. remaining: 10m 35sRunning iteration 351/1500... Est. remaining: 10m 29sRunning iteration 361/1500... Est. remaining: 10m 22sRunning iteration 371/1500... Est. remaining: 10m 17sRunning iteration 381/1500... Est. remaining: 10m 10sRunning iteration 391/1500... Est. remaining: 10m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,729,671,416
Annual Return: 48.39%
Sharpe Ratio: 1.59054
Sortino Ratio: 1.558
Max Drawdown: -62.4%
Avg Drawdown: -11.2%
Normalized Score: 0.689
Lookback periods: [136, 154, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 10m 1sbest_combination: {'lookbacks': [136, 154, 172], 'score': np.float64(0.6886854388889638), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,239,074,003
Annual Return: 48.15%
Sharpe Ratio: 1.58684
Sortino Ratio: 1.548
Max Drawdown: -58.5%
Avg Drawdown: -11.3%
Normalized Score: 0.753
Lookback periods: [136, 155, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 51sRunning iteration 431/1500... Est. remaining: 9m 45sRunning iteration 441/1500... Est. remaining: 9m 39sRunning iteration 451/1500... Est. remaining: 9m 32sRunning iteration 461/1500... Est. remaining: 9m 26sRunning iteration 471/1500... Est. remaining: 9m 20sRunning iteration 481/1500... Est. remaining: 9m 14sRunning iteration 491/1500... Est. remaining: 9m 8sRunning iteration 501/1500... Est. remaining: 9m 2sbest_combination: {'lookbacks': [136, 155, 178], 'score': np.float64(0.7531603671380692), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 56sRunning iteration 521/1500... Est. remaining: 8m 50sRunning iteration 531/1500... Est. remaining: 8m 44sRunning iteration 541/1500... Est. remaining: 8m 38sRunning iteration 551/1500... Est. remaining: 8m 33sRunning iteration 561/1500... Est. remaining: 8m 27sRunning iteration 571/1500... Est. remaining: 8m 21sRunning iteration 581/1500... Est. remaining: 8m 15sRunning iteration 591/1500... Est. remaining: 8m 10sRunning iteration 601/1500... Est. remaining: 8m 4sbest_combination: {'lookbacks': [136, 155, 178], 'score': np.float64(0.7531603671380692), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 58sRunning iteration 621/1500... Est. remaining: 7m 53sRunning iteration 631/1500... Est. remaining: 7m 47sRunning iteration 641/1500... Est. remaining: 7m 41sRunning iteration 651/1500... Est. remaining: 7m 36sRunning iteration 661/1500... Est. remaining: 7m 30sRunning iteration 671/1500... Est. remaining: 7m 25sRunning iteration 681/1500... Est. remaining: 7m 19sRunning iteration 691/1500... Est. remaining: 7m 14sRunning iteration 701/1500... Est. remaining: 7m 9sbest_combination: {'lookbacks': [136, 155, 178], 'score': np.float64(0.7531603671380692), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 3sRunning iteration 721/1500... Est. remaining: 6m 58sRunning iteration 731/1500... Est. remaining: 6m 52sRunning iteration 741/1500... Est. remaining: 6m 47sRunning iteration 751/1500... Est. remaining: 6m 41sRunning iteration 761/1500... Est. remaining: 6m 36sRunning iteration 771/1500... Est. remaining: 6m 30sRunning iteration 781/1500... Est. remaining: 6m 25sRunning iteration 791/1500... Est. remaining: 6m 19sRunning iteration 801/1500... Est. remaining: 6m 14sbest_combination: {'lookbacks': [136, 155, 178], 'score': np.float64(0.7531603671380692), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 8sRunning iteration 821/1500... Est. remaining: 6m 2sRunning iteration 831/1500... Est. remaining: 5m 57sRunning iteration 841/1500... Est. remaining: 5m 51sRunning iteration 851/1500... Est. remaining: 5m 46sRunning iteration 861/1500... Est. remaining: 5m 40sRunning iteration 871/1500... Est. remaining: 5m 35sRunning iteration 881/1500... Est. remaining: 5m 29sRunning iteration 891/1500... Est. remaining: 5m 24sRunning iteration 901/1500... Est. remaining: 5m 18sbest_combination: {'lookbacks': [136, 155, 178], 'score': np.float64(0.7531603671380692), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 13sRunning iteration 921/1500... Est. remaining: 5m 7sRunning iteration 931/1500... Est. remaining: 5m 2sRunning iteration 941/1500... Est. remaining: 4m 56sRunning iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 40sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 29sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [136, 155, 178], 'score': np.float64(0.7531603671380692), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [136, 155, 178], 'score': np.float64(0.7531603671380692), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [136, 155, 178], 'score': np.float64(0.7531603671380692), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,994,258,474
Annual Return: 48.52%
Sharpe Ratio: 1.59167
Sortino Ratio: 1.555
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.890
Lookback periods: [128, 157, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [128, 157, 173], 'score': np.float64(0.8903613752425077), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,488,709,085
Annual Return: 48.75%
Sharpe Ratio: 1.60116
Sortino Ratio: 1.564
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.962
Lookback periods: [136, 154, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [136, 154, 171], 'score': np.float64(0.9621418934422425), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 0.96
best_combination: {'lookbacks': [136, 154, 171], 'score': np.float64(0.9621418934422425), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 154, 171] (score: 0.9621)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 154, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 111 selections (26.7%)
3. naz100_pi: 77 selections (18.5%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,488,709,085.32
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Sun Aug 24 23:53:39 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $363,011,395
Annual Return: 35.38%
Sharpe Ratio: 1.24457
Sortino Ratio: 1.150
Max Drawdown: -73.3%
Avg Drawdown: -14.6%
Normalized Score: -2.474
Lookback periods: [61, 102, 135] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $834,615,264
Annual Return: 38.68%
Sharpe Ratio: 1.31424
Sortino Ratio: 1.245
Max Drawdown: -56.4%
Avg Drawdown: -13.0%
Normalized Score: -1.115
Lookback periods: [89, 132, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,933,595,912
Annual Return: 43.80%
Sharpe Ratio: 1.45776
Sortino Ratio: 1.412
Max Drawdown: -58.2%
Avg Drawdown: -13.2%
Normalized Score: -0.302
Lookback periods: [115, 145, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,874,174,215
Annual Return: 44.96%
Sharpe Ratio: 1.49568
Sortino Ratio: 1.447
Max Drawdown: -56.8%
Avg Drawdown: -12.7%
Normalized Score: 0.038
Lookback periods: [135, 140, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 34m 13sRunning iteration 21/1500... Est. remaining: 23m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,267,675,730
Annual Return: 46.98%
Sharpe Ratio: 1.57488
Sortino Ratio: 1.531
Max Drawdown: -56.6%
Avg Drawdown: -11.5%
Normalized Score: 0.626
Lookback periods: [115, 132, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 20sRunning iteration 41/1500... Est. remaining: 18m 13sRunning iteration 51/1500... Est. remaining: 16m 54sRunning iteration 61/1500... Est. remaining: 16m 1sRunning iteration 71/1500... Est. remaining: 15m 22sRunning iteration 81/1500... Est. remaining: 14m 50sRunning iteration 91/1500... Est. remaining: 14m 25sRunning iteration 101/1500... Est. remaining: 14m 3sbest_combination: {'lookbacks': [115, 132, 134], 'score': np.float64(0.6263049808487607), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 45sRunning iteration 121/1500... Est. remaining: 13m 30sRunning iteration 131/1500... Est. remaining: 13m 16sRunning iteration 141/1500... Est. remaining: 13m 4sRunning iteration 151/1500... Est. remaining: 12m 54sRunning iteration 161/1500... Est. remaining: 12m 44sRunning iteration 171/1500... Est. remaining: 12m 33sRunning iteration 181/1500... Est. remaining: 12m 23sRunning iteration 191/1500... Est. remaining: 12m 14sRunning iteration 201/1500... Est. remaining: 12m 5sbest_combination: {'lookbacks': [115, 132, 134], 'score': np.float64(0.6263049808487607), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 58sRunning iteration 221/1500... Est. remaining: 11m 50sRunning iteration 231/1500... Est. remaining: 11m 41sRunning iteration 241/1500... Est. remaining: 11m 34sRunning iteration 251/1500... Est. remaining: 11m 26sRunning iteration 261/1500... Est. remaining: 11m 19sRunning iteration 271/1500... Est. remaining: 11m 12sRunning iteration 281/1500... Est. remaining: 11m 4sRunning iteration 291/1500... Est. remaining: 10m 58sRunning iteration 301/1500... Est. remaining: 10m 51sbest_combination: {'lookbacks': [115, 132, 134], 'score': np.float64(0.6263049808487607), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,853,484,876
Annual Return: 48.45%
Sharpe Ratio: 1.56322
Sortino Ratio: 1.523
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.729
Lookback periods: [177, 189, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 10m 49sRunning iteration 321/1500... Est. remaining: 10m 42sRunning iteration 331/1500... Est. remaining: 10m 35sRunning iteration 341/1500... Est. remaining: 10m 29sRunning iteration 351/1500... Est. remaining: 10m 22sRunning iteration 361/1500... Est. remaining: 10m 16sRunning iteration 371/1500... Est. remaining: 10m 9sRunning iteration 381/1500... Est. remaining: 10m 3sRunning iteration 391/1500... Est. remaining: 9m 57sRunning iteration 401/1500... Est. remaining: 9m 50sbest_combination: {'lookbacks': [177, 189, 190], 'score': np.float64(0.7292286938267525), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 44sRunning iteration 421/1500... Est. remaining: 9m 38sRunning iteration 431/1500... Est. remaining: 9m 32sRunning iteration 441/1500... Est. remaining: 9m 26sRunning iteration 451/1500... Est. remaining: 9m 20sRunning iteration 461/1500... Est. remaining: 9m 14sRunning iteration 471/1500... Est. remaining: 9m 8sRunning iteration 481/1500... Est. remaining: 9m 3sRunning iteration 491/1500... Est. remaining: 8m 57sRunning iteration 501/1500... Est. remaining: 8m 51sbest_combination: {'lookbacks': [177, 189, 190], 'score': np.float64(0.7292286938267525), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 46sRunning iteration 521/1500... Est. remaining: 8m 40sRunning iteration 531/1500... Est. remaining: 8m 35sRunning iteration 541/1500... Est. remaining: 8m 29sRunning iteration 551/1500... Est. remaining: 8m 24sRunning iteration 561/1500... Est. remaining: 8m 18sRunning iteration 571/1500... Est. remaining: 8m 13sRunning iteration 581/1500... Est. remaining: 8m 7sRunning iteration 591/1500... Est. remaining: 8m 1sRunning iteration 601/1500... Est. remaining: 7m 55sbest_combination: {'lookbacks': [177, 189, 190], 'score': np.float64(0.7292286938267525), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 50sRunning iteration 621/1500... Est. remaining: 7m 44sRunning iteration 631/1500... Est. remaining: 7m 39sRunning iteration 641/1500... Est. remaining: 7m 33sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 22sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 12sRunning iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [177, 189, 190], 'score': np.float64(0.7292286938267525), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 55sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 45sRunning iteration 741/1500... Est. remaining: 6m 39sRunning iteration 751/1500... Est. remaining: 6m 34sRunning iteration 761/1500... Est. remaining: 6m 28sRunning iteration 771/1500... Est. remaining: 6m 23sRunning iteration 781/1500... Est. remaining: 6m 17sRunning iteration 791/1500... Est. remaining: 6m 12sRunning iteration 801/1500... Est. remaining: 6m 6sbest_combination: {'lookbacks': [177, 189, 190], 'score': np.float64(0.7292286938267525), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 1sRunning iteration 821/1500... Est. remaining: 5m 56sRunning iteration 831/1500... Est. remaining: 5m 50sRunning iteration 841/1500... Est. remaining: 5m 45sRunning iteration 851/1500... Est. remaining: 5m 40sRunning iteration 861/1500... Est. remaining: 5m 34sRunning iteration 871/1500... Est. remaining: 5m 29sRunning iteration 881/1500... Est. remaining: 5m 24sRunning iteration 891/1500... Est. remaining: 5m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,847,966,055
Annual Return: 49.33%
Sharpe Ratio: 1.59844
Sortino Ratio: 1.554
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.865
Lookback periods: [181, 189, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [181, 189, 193], 'score': np.float64(0.8654607073808916), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 3sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [181, 189, 193], 'score': np.float64(0.8654607073808916), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [181, 189, 193], 'score': np.float64(0.8654607073808916), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,670,729,374
Annual Return: 48.83%
Sharpe Ratio: 1.59702
Sortino Ratio: 1.556
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.878
Lookback periods: [141, 158, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,896,021,360
Annual Return: 48.93%
Sharpe Ratio: 1.60999
Sortino Ratio: 1.571
Max Drawdown: -58.5%
Avg Drawdown: -11.0%
Normalized Score: 0.942
Lookback periods: [139, 155, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,706,082,411
Annual Return: 49.27%
Sharpe Ratio: 1.62158
Sortino Ratio: 1.576
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 1.048
Lookback periods: [139, 156, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [139, 156, 178], 'score': np.float64(1.0476459723065261), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [139, 156, 178], 'score': np.float64(1.0476459723065261), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [139, 156, 178], 'score': np.float64(1.0476459723065261), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.05
best_combination: {'lookbacks': [139, 156, 178], 'score': np.float64(1.0476459723065261), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 156, 178] (score: 1.0476)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 156, 178] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 112 selections (26.9%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 42 selections (10.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,706,082,411.33
Average Annualized Gain: 49.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 00:06:54 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,161,916,440
Annual Return: 40.01%
Sharpe Ratio: 1.38214
Sortino Ratio: 1.296
Max Drawdown: -55.0%
Avg Drawdown: -11.6%
Normalized Score: -0.581
Lookback periods: [64, 118, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,500,498,153
Annual Return: 43.14%
Sharpe Ratio: 1.45251
Sortino Ratio: 1.394
Max Drawdown: -56.9%
Avg Drawdown: -12.4%
Normalized Score: -0.231
Lookback periods: [104, 139, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,492,737,091
Annual Return: 47.13%
Sharpe Ratio: 1.52552
Sortino Ratio: 1.481
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.426
Lookback periods: [178, 194, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 18sRunning iteration 21/1500... Est. remaining: 21m 50sRunning iteration 31/1500... Est. remaining: 18m 33sRunning iteration 41/1500... Est. remaining: 16m 50sRunning iteration 51/1500... Est. remaining: 15m 51sRunning iteration 61/1500... Est. remaining: 15m 11sRunning iteration 71/1500... Est. remaining: 14m 39sRunning iteration 81/1500... Est. remaining: 14m 15sRunning iteration 91/1500... Est. remaining: 13m 56sRunning iteration 101/1500... Est. remaining: 13m 39sbest_combination: {'lookbacks': [178, 194, 200], 'score': np.float64(0.4255570255794428), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 24sRunning iteration 121/1500... Est. remaining: 13m 11sRunning iteration 131/1500... Est. remaining: 13m 0sRunning iteration 141/1500... Est. remaining: 12m 50sRunning iteration 151/1500... Est. remaining: 12m 41sRunning iteration 161/1500... Est. remaining: 12m 31sRunning iteration 171/1500... Est. remaining: 12m 22sRunning iteration 181/1500... Est. remaining: 12m 13sRunning iteration 191/1500... Est. remaining: 12m 5sRunning iteration 201/1500... Est. remaining: 11m 57sbest_combination: {'lookbacks': [178, 194, 200], 'score': np.float64(0.4255570255794428), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,578,895,253
Annual Return: 46.49%
Sharpe Ratio: 1.54613
Sortino Ratio: 1.503
Max Drawdown: -57.3%
Avg Drawdown: -11.5%
Normalized Score: 0.482
Lookback periods: [111, 136, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 11m 51sRunning iteration 231/1500... Est. remaining: 11m 44sRunning iteration 241/1500... Est. remaining: 11m 36sRunning iteration 251/1500... Est. remaining: 11m 29sRunning iteration 261/1500... Est. remaining: 11m 22sRunning iteration 271/1500... Est. remaining: 11m 16sRunning iteration 281/1500... Est. remaining: 11m 9sRunning iteration 291/1500... Est. remaining: 11m 2sRunning iteration 301/1500... Est. remaining: 10m 56sbest_combination: {'lookbacks': [111, 136, 145], 'score': np.float64(0.4824014718412021), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 49sRunning iteration 321/1500... Est. remaining: 10m 42sRunning iteration 331/1500... Est. remaining: 10m 36sRunning iteration 341/1500... Est. remaining: 10m 30sRunning iteration 351/1500... Est. remaining: 10m 23sRunning iteration 361/1500... Est. remaining: 10m 17sRunning iteration 371/1500... Est. remaining: 10m 11sRunning iteration 381/1500... Est. remaining: 10m 5sRunning iteration 391/1500... Est. remaining: 9m 59sRunning iteration 401/1500... Est. remaining: 9m 53sbest_combination: {'lookbacks': [111, 136, 145], 'score': np.float64(0.4824014718412021), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 47sRunning iteration 421/1500... Est. remaining: 9m 41sRunning iteration 431/1500... Est. remaining: 9m 34sRunning iteration 441/1500... Est. remaining: 9m 28sRunning iteration 451/1500... Est. remaining: 9m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,399,319,990
Annual Return: 47.69%
Sharpe Ratio: 1.57454
Sortino Ratio: 1.538
Max Drawdown: -61.3%
Avg Drawdown: -11.5%
Normalized Score: 0.556
Lookback periods: [135, 153, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 9m 19sRunning iteration 471/1500... Est. remaining: 9m 13sRunning iteration 481/1500... Est. remaining: 9m 7sRunning iteration 491/1500... Est. remaining: 9m 2sRunning iteration 501/1500... Est. remaining: 8m 56sbest_combination: {'lookbacks': [135, 153, 158], 'score': np.float64(0.5555472769274145), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 50sRunning iteration 521/1500... Est. remaining: 8m 44sRunning iteration 531/1500... Est. remaining: 8m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,968,431,076
Annual Return: 49.37%
Sharpe Ratio: 1.63056
Sortino Ratio: 1.585
Max Drawdown: -56.8%
Avg Drawdown: -10.7%
Normalized Score: 1.123
Lookback periods: [135, 157, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 30sRunning iteration 561/1500... Est. remaining: 8m 24sRunning iteration 571/1500... Est. remaining: 8m 19sRunning iteration 581/1500... Est. remaining: 8m 13sRunning iteration 591/1500... Est. remaining: 8m 7sRunning iteration 601/1500... Est. remaining: 8m 2sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.1232085761396196), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 56sRunning iteration 621/1500... Est. remaining: 7m 50sRunning iteration 631/1500... Est. remaining: 7m 45sRunning iteration 641/1500... Est. remaining: 7m 39sRunning iteration 651/1500... Est. remaining: 7m 34sRunning iteration 661/1500... Est. remaining: 7m 28sRunning iteration 671/1500... Est. remaining: 7m 22sRunning iteration 681/1500... Est. remaining: 7m 17sRunning iteration 691/1500... Est. remaining: 7m 11sRunning iteration 701/1500... Est. remaining: 7m 6sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.1232085761396196), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 0sRunning iteration 721/1500... Est. remaining: 6m 55sRunning iteration 731/1500... Est. remaining: 6m 50sRunning iteration 741/1500... Est. remaining: 6m 44sRunning iteration 751/1500... Est. remaining: 6m 39sRunning iteration 761/1500... Est. remaining: 6m 34sRunning iteration 771/1500... Est. remaining: 6m 28sRunning iteration 781/1500... Est. remaining: 6m 23sRunning iteration 791/1500... Est. remaining: 6m 17sRunning iteration 801/1500... Est. remaining: 6m 12sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.1232085761396196), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 6sRunning iteration 821/1500... Est. remaining: 6m 1sRunning iteration 831/1500... Est. remaining: 5m 56sRunning iteration 841/1500... Est. remaining: 5m 50sRunning iteration 851/1500... Est. remaining: 5m 45sRunning iteration 861/1500... Est. remaining: 5m 40sRunning iteration 871/1500... Est. remaining: 5m 34sRunning iteration 881/1500... Est. remaining: 5m 29sRunning iteration 891/1500... Est. remaining: 5m 24sRunning iteration 901/1500... Est. remaining: 5m 18sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.1232085761396196), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 13sRunning iteration 921/1500... Est. remaining: 5m 8sRunning iteration 931/1500... Est. remaining: 5m 2sRunning iteration 941/1500... Est. remaining: 4m 57sRunning iteration 951/1500... Est. remaining: 4m 52sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 41sRunning iteration 981/1500... Est. remaining: 4m 36sRunning iteration 991/1500... Est. remaining: 4m 30sRunning iteration 1001/1500... Est. remaining: 4m 25sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.1232085761396196), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 20sRunning iteration 1021/1500... Est. remaining: 4m 14sRunning iteration 1031/1500... Est. remaining: 4m 9sRunning iteration 1041/1500... Est. remaining: 4m 4sRunning iteration 1051/1500... Est. remaining: 3m 59sRunning iteration 1061/1500... Est. remaining: 3m 53sRunning iteration 1071/1500... Est. remaining: 3m 48sRunning iteration 1081/1500... Est. remaining: 3m 43sRunning iteration 1091/1500... Est. remaining: 3m 37sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.1232085761396196), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 27sRunning iteration 1121/1500... Est. remaining: 3m 22sRunning iteration 1131/1500... Est. remaining: 3m 16sRunning iteration 1141/1500... Est. remaining: 3m 11sRunning iteration 1151/1500... Est. remaining: 3m 6sRunning iteration 1161/1500... Est. remaining: 3m 0sRunning iteration 1171/1500... Est. remaining: 2m 55sRunning iteration 1181/1500... Est. remaining: 2m 50sRunning iteration 1191/1500... Est. remaining: 2m 44sRunning iteration 1201/1500... Est. remaining: 2m 39sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.1232085761396196), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 34sRunning iteration 1221/1500... Est. remaining: 2m 28sRunning iteration 1231/1500... Est. remaining: 2m 23sRunning iteration 1241/1500... Est. remaining: 2m 18sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 7sRunning iteration 1271/1500... Est. remaining: 2m 2sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 51sRunning iteration 1301/1500... Est. remaining: 1m 46sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.1232085761396196), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 30sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 14sRunning iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.1232085761396196), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.2 minutes
Best normalized score: 1.12
best_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.1232085761396196), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 157, 178] (score: 1.1232)

Monte Carlo simulation completed in 13.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 157, 178] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pi: 74 selections (17.8%)
4. naz100_pine: 74 selections (17.8%)
5. cash: 43 selections (10.3%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,968,431,075.98
Average Annualized Gain: 49.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 00:20:15 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $728,994,541
Annual Return: 38.13%
Sharpe Ratio: 1.30267
Sortino Ratio: 1.217
Max Drawdown: -55.0%
Avg Drawdown: -13.4%
Normalized Score: -1.240
Lookback periods: [67, 127, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,482,635,273
Annual Return: 40.99%
Sharpe Ratio: 1.38567
Sortino Ratio: 1.312
Max Drawdown: -52.3%
Avg Drawdown: -12.1%
Normalized Score: -0.444
Lookback periods: [84, 115, 124] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,630,237,166
Annual Return: 44.68%
Sharpe Ratio: 1.49066
Sortino Ratio: 1.447
Max Drawdown: -58.1%
Avg Drawdown: -11.9%
Normalized Score: 0.081
Lookback periods: [115, 130, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,826,037,055
Annual Return: 43.64%
Sharpe Ratio: 1.48922
Sortino Ratio: 1.421
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: 0.322
Lookback periods: [94, 109, 133] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 28sRunning iteration 21/1500... Est. remaining: 21m 55sRunning iteration 31/1500... Est. remaining: 18m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,104,677,172
Annual Return: 46.87%
Sharpe Ratio: 1.53158
Sortino Ratio: 1.505
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.557
Lookback periods: [158, 163, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 45sRunning iteration 51/1500... Est. remaining: 16m 34sRunning iteration 61/1500... Est. remaining: 15m 42sRunning iteration 71/1500... Est. remaining: 15m 5sRunning iteration 81/1500... Est. remaining: 14m 36sRunning iteration 91/1500... Est. remaining: 14m 12sRunning iteration 101/1500... Est. remaining: 13m 53sbest_combination: {'lookbacks': [158, 163, 167], 'score': np.float64(0.5572116260464355), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 35sRunning iteration 121/1500... Est. remaining: 13m 19sRunning iteration 131/1500... Est. remaining: 13m 5sRunning iteration 141/1500... Est. remaining: 12m 52sRunning iteration 151/1500... Est. remaining: 12m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,622,827,200
Annual Return: 44.68%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.652
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 12m 41sRunning iteration 171/1500... Est. remaining: 12m 32sRunning iteration 181/1500... Est. remaining: 12m 24sRunning iteration 191/1500... Est. remaining: 12m 17sRunning iteration 201/1500... Est. remaining: 12m 8sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.6521134029296847), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 0sRunning iteration 221/1500... Est. remaining: 11m 51sRunning iteration 231/1500... Est. remaining: 11m 43sRunning iteration 241/1500... Est. remaining: 11m 36sRunning iteration 251/1500... Est. remaining: 11m 28sRunning iteration 261/1500... Est. remaining: 11m 21sRunning iteration 271/1500... Est. remaining: 11m 14sRunning iteration 281/1500... Est. remaining: 11m 7sRunning iteration 291/1500... Est. remaining: 11m 0sRunning iteration 301/1500... Est. remaining: 10m 53sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.6521134029296847), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 47sRunning iteration 321/1500... Est. remaining: 10m 40sRunning iteration 331/1500... Est. remaining: 10m 34sRunning iteration 341/1500... Est. remaining: 10m 27sRunning iteration 351/1500... Est. remaining: 10m 21sRunning iteration 361/1500... Est. remaining: 10m 14sRunning iteration 371/1500... Est. remaining: 10m 8sRunning iteration 381/1500... Est. remaining: 10m 1sRunning iteration 391/1500... Est. remaining: 9m 55sRunning iteration 401/1500... Est. remaining: 9m 49sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.6521134029296847), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 42sRunning iteration 421/1500... Est. remaining: 9m 37sRunning iteration 431/1500... Est. remaining: 9m 31sRunning iteration 441/1500... Est. remaining: 9m 24sRunning iteration 451/1500... Est. remaining: 9m 19sRunning iteration 461/1500... Est. remaining: 9m 13sRunning iteration 471/1500... Est. remaining: 9m 7sRunning iteration 481/1500... Est. remaining: 9m 1sRunning iteration 491/1500... Est. remaining: 8m 55sRunning iteration 501/1500... Est. remaining: 8m 50sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.6521134029296847), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.673
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 43sRunning iteration 531/1500... Est. remaining: 8m 38sRunning iteration 541/1500... Est. remaining: 8m 32sRunning iteration 551/1500... Est. remaining: 8m 26sRunning iteration 561/1500... Est. remaining: 8m 20sRunning iteration 571/1500... Est. remaining: 8m 15sRunning iteration 581/1500... Est. remaining: 8m 9sRunning iteration 591/1500... Est. remaining: 8m 4sRunning iteration 601/1500... Est. remaining: 7m 58sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6729045491906427), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 52sRunning iteration 621/1500... Est. remaining: 7m 47sRunning iteration 631/1500... Est. remaining: 7m 42sRunning iteration 641/1500... Est. remaining: 7m 36sRunning iteration 651/1500... Est. remaining: 7m 31sRunning iteration 661/1500... Est. remaining: 7m 25sRunning iteration 671/1500... Est. remaining: 7m 20sRunning iteration 681/1500... Est. remaining: 7m 14sRunning iteration 691/1500... Est. remaining: 7m 9sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6729045491906427), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 59sRunning iteration 721/1500... Est. remaining: 6m 54sRunning iteration 731/1500... Est. remaining: 6m 48sRunning iteration 741/1500... Est. remaining: 6m 43sRunning iteration 751/1500... Est. remaining: 6m 38sRunning iteration 761/1500... Est. remaining: 6m 33sRunning iteration 771/1500... Est. remaining: 6m 28sRunning iteration 781/1500... Est. remaining: 6m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.747
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 6m 18sRunning iteration 801/1500... Est. remaining: 6m 13sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 8sRunning iteration 821/1500... Est. remaining: 6m 2sRunning iteration 831/1500... Est. remaining: 5m 57sRunning iteration 841/1500... Est. remaining: 5m 52sRunning iteration 851/1500... Est. remaining: 5m 47sRunning iteration 861/1500... Est. remaining: 5m 41sRunning iteration 871/1500... Est. remaining: 5m 37sRunning iteration 881/1500... Est. remaining: 5m 31sRunning iteration 891/1500... Est. remaining: 5m 27sRunning iteration 901/1500... Est. remaining: 5m 22sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 16sRunning iteration 921/1500... Est. remaining: 5m 10sRunning iteration 931/1500... Est. remaining: 5m 5sRunning iteration 941/1500... Est. remaining: 4m 59sRunning iteration 951/1500... Est. remaining: 4m 54sRunning iteration 961/1500... Est. remaining: 4m 48sRunning iteration 971/1500... Est. remaining: 4m 43sRunning iteration 981/1500... Est. remaining: 4m 37sRunning iteration 991/1500... Est. remaining: 4m 32sRunning iteration 1001/1500... Est. remaining: 4m 26sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 21sRunning iteration 1021/1500... Est. remaining: 4m 15sRunning iteration 1031/1500... Est. remaining: 4m 10sRunning iteration 1041/1500... Est. remaining: 4m 4sRunning iteration 1051/1500... Est. remaining: 3m 59sRunning iteration 1061/1500... Est. remaining: 3m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,673,528,425
Annual Return: 46.56%
Sharpe Ratio: 1.66674
Sortino Ratio: 1.588
Max Drawdown: -36.6%
Avg Drawdown: -8.1%
Normalized Score: 1.961
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1071/1500... Est. remaining: 3m 49sRunning iteration 1081/1500... Est. remaining: 3m 43sRunning iteration 1091/1500... Est. remaining: 3m 38sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 27sRunning iteration 1121/1500... Est. remaining: 3m 21sRunning iteration 1131/1500... Est. remaining: 3m 16sRunning iteration 1141/1500... Est. remaining: 3m 11sRunning iteration 1151/1500... Est. remaining: 3m 5sRunning iteration 1161/1500... Est. remaining: 3m 0sRunning iteration 1171/1500... Est. remaining: 2m 54sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 44sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 33sRunning iteration 1221/1500... Est. remaining: 2m 28sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.96
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 95] (score: 1.9606)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 103 selections (24.8%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,673,528,425.50
Average Annualized Gain: 46.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 00:33:30 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $817,396,767
Annual Return: 38.59%
Sharpe Ratio: 1.32084
Sortino Ratio: 1.236
Max Drawdown: -55.0%
Avg Drawdown: -13.1%
Normalized Score: -1.112
Lookback periods: [76, 157, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $450,828,830
Annual Return: 36.23%
Sharpe Ratio: 1.26876
Sortino Ratio: 1.177
Max Drawdown: -52.3%
Avg Drawdown: -11.2%
Normalized Score: -1.098
Lookback periods: [58, 78, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,207,420,028
Annual Return: 42.62%
Sharpe Ratio: 1.40639
Sortino Ratio: 1.367
Max Drawdown: -72.0%
Avg Drawdown: -13.0%
Normalized Score: -0.973
Lookback periods: [114, 167, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,935,474,262
Annual Return: 42.08%
Sharpe Ratio: 1.40202
Sortino Ratio: 1.358
Max Drawdown: -64.1%
Avg Drawdown: -12.9%
Normalized Score: -0.762
Lookback periods: [136, 140, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,205,879,773
Annual Return: 44.17%
Sharpe Ratio: 1.45278
Sortino Ratio: 1.413
Max Drawdown: -65.6%
Avg Drawdown: -12.6%
Normalized Score: -0.422
Lookback periods: [118, 154, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,363,142,501
Annual Return: 40.65%
Sharpe Ratio: 1.40917
Sortino Ratio: 1.329
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: -0.192
Lookback periods: [84, 127, 142] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 21m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,502,310,488
Annual Return: 46.43%
Sharpe Ratio: 1.50166
Sortino Ratio: 1.458
Max Drawdown: -59.5%
Avg Drawdown: -11.8%
Normalized Score: 0.246
Lookback periods: [178, 195, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 19m 30sRunning iteration 51/1500... Est. remaining: 17m 56sRunning iteration 61/1500... Est. remaining: 16m 53sRunning iteration 71/1500... Est. remaining: 16m 7sRunning iteration 81/1500... Est. remaining: 15m 29sRunning iteration 91/1500... Est. remaining: 14m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,397,280,079
Annual Return: 46.35%
Sharpe Ratio: 1.51397
Sortino Ratio: 1.487
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.464
Lookback periods: [158, 175, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 14m 52sbest_combination: {'lookbacks': [158, 175, 182], 'score': np.float64(0.46363801258497084), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 31sRunning iteration 121/1500... Est. remaining: 14m 10sRunning iteration 131/1500... Est. remaining: 13m 52sRunning iteration 141/1500... Est. remaining: 13m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,230,945,005
Annual Return: 48.14%
Sharpe Ratio: 1.58760
Sortino Ratio: 1.558
Max Drawdown: -63.5%
Avg Drawdown: -11.7%
Normalized Score: 0.544
Lookback periods: [134, 153, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 13m 32sRunning iteration 161/1500... Est. remaining: 13m 19sRunning iteration 171/1500... Est. remaining: 13m 6sRunning iteration 181/1500... Est. remaining: 12m 54sRunning iteration 191/1500... Est. remaining: 12m 42sRunning iteration 201/1500... Est. remaining: 12m 31sbest_combination: {'lookbacks': [134, 153, 172], 'score': np.float64(0.5439831117616263), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 21sRunning iteration 221/1500... Est. remaining: 12m 11sRunning iteration 231/1500... Est. remaining: 12m 1sRunning iteration 241/1500... Est. remaining: 11m 52sRunning iteration 251/1500... Est. remaining: 11m 43sRunning iteration 261/1500... Est. remaining: 11m 35sRunning iteration 271/1500... Est. remaining: 11m 27sRunning iteration 281/1500... Est. remaining: 11m 20sRunning iteration 291/1500... Est. remaining: 11m 12sRunning iteration 301/1500... Est. remaining: 11m 5sbest_combination: {'lookbacks': [134, 153, 172], 'score': np.float64(0.5439831117616263), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 57sRunning iteration 321/1500... Est. remaining: 10m 50sRunning iteration 331/1500... Est. remaining: 10m 43sRunning iteration 341/1500... Est. remaining: 10m 36sRunning iteration 351/1500... Est. remaining: 10m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,547,475,437
Annual Return: 48.78%
Sharpe Ratio: 1.59205
Sortino Ratio: 1.560
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 0.801
Lookback periods: [139, 155, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 361/1500... Est. remaining: 10m 26sRunning iteration 371/1500... Est. remaining: 10m 20sRunning iteration 381/1500... Est. remaining: 10m 13sRunning iteration 391/1500... Est. remaining: 10m 7sRunning iteration 401/1500... Est. remaining: 10m 0sbest_combination: {'lookbacks': [139, 155, 188], 'score': np.float64(0.8009844503328807), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 54sRunning iteration 421/1500... Est. remaining: 9m 48sRunning iteration 431/1500... Est. remaining: 9m 43sRunning iteration 441/1500... Est. remaining: 9m 36sRunning iteration 451/1500... Est. remaining: 9m 30sRunning iteration 461/1500... Est. remaining: 9m 24sRunning iteration 471/1500... Est. remaining: 9m 18sRunning iteration 481/1500... Est. remaining: 9m 12sRunning iteration 491/1500... Est. remaining: 9m 6sRunning iteration 501/1500... Est. remaining: 9m 0sbest_combination: {'lookbacks': [139, 155, 188], 'score': np.float64(0.8009844503328807), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 54sRunning iteration 521/1500... Est. remaining: 8m 48sRunning iteration 531/1500... Est. remaining: 8m 43sRunning iteration 541/1500... Est. remaining: 8m 37sRunning iteration 551/1500... Est. remaining: 8m 31sRunning iteration 561/1500... Est. remaining: 8m 25sRunning iteration 571/1500... Est. remaining: 8m 20sRunning iteration 581/1500... Est. remaining: 8m 14sRunning iteration 591/1500... Est. remaining: 8m 8sRunning iteration 601/1500... Est. remaining: 8m 2sbest_combination: {'lookbacks': [139, 155, 188], 'score': np.float64(0.8009844503328807), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 56sRunning iteration 621/1500... Est. remaining: 7m 51sRunning iteration 631/1500... Est. remaining: 7m 45sRunning iteration 641/1500... Est. remaining: 7m 39sRunning iteration 651/1500... Est. remaining: 7m 34sRunning iteration 661/1500... Est. remaining: 7m 28sRunning iteration 671/1500... Est. remaining: 7m 22sRunning iteration 681/1500... Est. remaining: 7m 17sRunning iteration 691/1500... Est. remaining: 7m 11sRunning iteration 701/1500... Est. remaining: 7m 5sbest_combination: {'lookbacks': [139, 155, 188], 'score': np.float64(0.8009844503328807), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 0sRunning iteration 721/1500... Est. remaining: 6m 54sRunning iteration 731/1500... Est. remaining: 6m 49sRunning iteration 741/1500... Est. remaining: 6m 43sRunning iteration 751/1500... Est. remaining: 6m 37sRunning iteration 761/1500... Est. remaining: 6m 32sRunning iteration 771/1500... Est. remaining: 6m 26sRunning iteration 781/1500... Est. remaining: 6m 21sRunning iteration 791/1500... Est. remaining: 6m 16sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [139, 155, 188], 'score': np.float64(0.8009844503328807), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 5sRunning iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 54sRunning iteration 841/1500... Est. remaining: 5m 48sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 27sRunning iteration 891/1500... Est. remaining: 5m 22sRunning iteration 901/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [139, 155, 188], 'score': np.float64(0.8009844503328807), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 11sRunning iteration 921/1500... Est. remaining: 5m 6sRunning iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 55sRunning iteration 951/1500... Est. remaining: 4m 50sRunning iteration 961/1500... Est. remaining: 4m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,216,049,947
Annual Return: 49.47%
Sharpe Ratio: 1.61119
Sortino Ratio: 1.568
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.986
Lookback periods: [139, 156, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 971/1500... Est. remaining: 4m 40sRunning iteration 981/1500... Est. remaining: 4m 34sRunning iteration 991/1500... Est. remaining: 4m 29sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.9855877201140523), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 18sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.9855877201140523), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.9855877201140523), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.9855877201140523), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.9855877201140523), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,573,943,306
Annual Return: 49.61%
Sharpe Ratio: 1.62431
Sortino Ratio: 1.584
Max Drawdown: -55.0%
Avg Drawdown: -11.3%
Normalized Score: 1.105
Lookback periods: [135, 158, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.10
best_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 158, 188] (score: 1.1046)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 158, 188] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,573,943,306.03
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 00:46:43 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,600,821,102
Annual Return: 43.30%
Sharpe Ratio: 1.42511
Sortino Ratio: 1.382
Max Drawdown: -56.4%
Avg Drawdown: -13.0%
Normalized Score: -0.339
Lookback periods: [126, 131, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,138,153,218
Annual Return: 44.08%
Sharpe Ratio: 1.43912
Sortino Ratio: 1.405
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: -0.111
Lookback periods: [158, 172, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 51sRunning iteration 21/1500... Est. remaining: 18m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,248,866,464
Annual Return: 45.34%
Sharpe Ratio: 1.47731
Sortino Ratio: 1.442
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.195
Lookback periods: [156, 162, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 17m 39sRunning iteration 41/1500... Est. remaining: 16m 22sRunning iteration 51/1500... Est. remaining: 15m 32sRunning iteration 61/1500... Est. remaining: 14m 56sRunning iteration 71/1500... Est. remaining: 14m 28sRunning iteration 81/1500... Est. remaining: 14m 9sRunning iteration 91/1500... Est. remaining: 13m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,258,098,914
Annual Return: 46.97%
Sharpe Ratio: 1.53794
Sortino Ratio: 1.493
Max Drawdown: -58.5%
Avg Drawdown: -11.9%
Normalized Score: 0.412
Lookback periods: [139, 155, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 13m 55sbest_combination: {'lookbacks': [139, 155, 192], 'score': np.float64(0.41197157240201027), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 38sRunning iteration 121/1500... Est. remaining: 13m 23sRunning iteration 131/1500... Est. remaining: 13m 9sRunning iteration 141/1500... Est. remaining: 12m 56sRunning iteration 151/1500... Est. remaining: 12m 45sRunning iteration 161/1500... Est. remaining: 12m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,387,198,223
Annual Return: 47.68%
Sharpe Ratio: 1.57340
Sortino Ratio: 1.536
Max Drawdown: -56.6%
Avg Drawdown: -12.2%
Normalized Score: 0.596
Lookback periods: [131, 133, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 12m 42sRunning iteration 181/1500... Est. remaining: 12m 33sRunning iteration 191/1500... Est. remaining: 12m 22sRunning iteration 201/1500... Est. remaining: 12m 13sbest_combination: {'lookbacks': [131, 133, 134], 'score': np.float64(0.5961266458568322), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 4sRunning iteration 221/1500... Est. remaining: 11m 55sRunning iteration 231/1500... Est. remaining: 11m 47sRunning iteration 241/1500... Est. remaining: 11m 39sRunning iteration 251/1500... Est. remaining: 11m 32sRunning iteration 261/1500... Est. remaining: 11m 24sRunning iteration 271/1500... Est. remaining: 11m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,739,016,475
Annual Return: 48.40%
Sharpe Ratio: 1.56020
Sortino Ratio: 1.533
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.675
Lookback periods: [153, 158, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/1500... Est. remaining: 11m 17sRunning iteration 291/1500... Est. remaining: 11m 10sRunning iteration 301/1500... Est. remaining: 11m 3sbest_combination: {'lookbacks': [153, 158, 200], 'score': np.float64(0.6746625032506153), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 57sRunning iteration 321/1500... Est. remaining: 10m 49sRunning iteration 331/1500... Est. remaining: 10m 42sRunning iteration 341/1500... Est. remaining: 10m 35sRunning iteration 351/1500... Est. remaining: 10m 28sRunning iteration 361/1500... Est. remaining: 10m 21sRunning iteration 371/1500... Est. remaining: 10m 14sRunning iteration 381/1500... Est. remaining: 10m 7sRunning iteration 391/1500... Est. remaining: 10m 0sRunning iteration 401/1500... Est. remaining: 9m 54sbest_combination: {'lookbacks': [153, 158, 200], 'score': np.float64(0.6746625032506153), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 48sRunning iteration 421/1500... Est. remaining: 9m 42sRunning iteration 431/1500... Est. remaining: 9m 36sRunning iteration 441/1500... Est. remaining: 9m 29sRunning iteration 451/1500... Est. remaining: 9m 23sRunning iteration 461/1500... Est. remaining: 9m 17sRunning iteration 471/1500... Est. remaining: 9m 11sRunning iteration 481/1500... Est. remaining: 9m 5sRunning iteration 491/1500... Est. remaining: 8m 59sRunning iteration 501/1500... Est. remaining: 8m 53sbest_combination: {'lookbacks': [153, 158, 200], 'score': np.float64(0.6746625032506153), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 48sRunning iteration 521/1500... Est. remaining: 8m 42sRunning iteration 531/1500... Est. remaining: 8m 37sRunning iteration 541/1500... Est. remaining: 8m 32sRunning iteration 551/1500... Est. remaining: 8m 26sRunning iteration 561/1500... Est. remaining: 8m 20sRunning iteration 571/1500... Est. remaining: 8m 14sRunning iteration 581/1500... Est. remaining: 8m 8sRunning iteration 591/1500... Est. remaining: 8m 3sRunning iteration 601/1500... Est. remaining: 7m 57sbest_combination: {'lookbacks': [153, 158, 200], 'score': np.float64(0.6746625032506153), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 51sRunning iteration 621/1500... Est. remaining: 7m 45sRunning iteration 631/1500... Est. remaining: 7m 40sRunning iteration 641/1500... Est. remaining: 7m 34sRunning iteration 651/1500... Est. remaining: 7m 29sRunning iteration 661/1500... Est. remaining: 7m 23sRunning iteration 671/1500... Est. remaining: 7m 18sRunning iteration 681/1500... Est. remaining: 7m 12sRunning iteration 691/1500... Est. remaining: 7m 7sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [153, 158, 200], 'score': np.float64(0.6746625032506153), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 56sRunning iteration 721/1500... Est. remaining: 6m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,216,049,947
Annual Return: 49.47%
Sharpe Ratio: 1.61119
Sortino Ratio: 1.568
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.986
Lookback periods: [139, 156, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 6m 47sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 36sRunning iteration 761/1500... Est. remaining: 6m 30sRunning iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 14sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.9855877201140523), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.9855877201140523), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 27sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.9855877201140523), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.9855877201140523), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.9855877201140523), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.9855877201140523), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.9855877201140523), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 0.99
best_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.9855877201140523), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 156, 200] (score: 0.9856)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 156, 200] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pi: 77 selections (18.5%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,216,049,946.98
Average Annualized Gain: 49.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 198m 3s
End time: Mon Aug 25 00:59:43 EDT 2025
Average time per successful run: 13m 12s
==============================================================
✓ All runs completed successfully!
