Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Start time: Sun Aug 24 21:41:36 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Sun Aug 24 21:41:36 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,099,931,909
Annual Return: 39.78%
Sharpe Ratio: 1.29224
Sortino Ratio: 1.228
Max Drawdown: -63.7%
Avg Drawdown: -14.1%
Normalized Score: -1.478
Lookback periods: [91, 108, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,145,126,873
Annual Return: 42.50%
Sharpe Ratio: 1.41897
Sortino Ratio: 1.320
Max Drawdown: -54.5%
Avg Drawdown: -12.2%
Normalized Score: -0.336
Lookback periods: [60, 85, 104] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $15,776,816,337
Annual Return: 50.95%
Sharpe Ratio: 1.63396
Sortino Ratio: 1.610
Max Drawdown: -62.0%
Avg Drawdown: -11.4%
Normalized Score: 1.041
Lookback periods: [196, 199, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 33sRunning iteration 21/1500... Est. remaining: 19m 57sRunning iteration 31/1500... Est. remaining: 17m 19sRunning iteration 41/1500... Est. remaining: 16m 1sRunning iteration 51/1500... Est. remaining: 15m 11sRunning iteration 61/1500... Est. remaining: 14m 38sRunning iteration 71/1500... Est. remaining: 14m 8sRunning iteration 81/1500... Est. remaining: 13m 46sRunning iteration 91/1500... Est. remaining: 13m 29sRunning iteration 101/1500... Est. remaining: 13m 15sbest_combination: {'lookbacks': [196, 199, 200], 'score': np.float64(1.0412707836886756), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 5sRunning iteration 121/1500... Est. remaining: 12m 53sRunning iteration 131/1500... Est. remaining: 12m 44sRunning iteration 141/1500... Est. remaining: 12m 34sRunning iteration 151/1500... Est. remaining: 12m 24sRunning iteration 161/1500... Est. remaining: 12m 16sRunning iteration 171/1500... Est. remaining: 12m 7sRunning iteration 181/1500... Est. remaining: 12m 0sRunning iteration 191/1500... Est. remaining: 11m 52sRunning iteration 201/1500... Est. remaining: 11m 44sbest_combination: {'lookbacks': [196, 199, 200], 'score': np.float64(1.0412707836886756), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 37sRunning iteration 221/1500... Est. remaining: 11m 30sRunning iteration 231/1500... Est. remaining: 11m 23sRunning iteration 241/1500... Est. remaining: 11m 16sRunning iteration 251/1500... Est. remaining: 11m 10sRunning iteration 261/1500... Est. remaining: 11m 3sRunning iteration 271/1500... Est. remaining: 10m 57sRunning iteration 281/1500... Est. remaining: 10m 50sRunning iteration 291/1500... Est. remaining: 10m 44sRunning iteration 301/1500... Est. remaining: 10m 39sbest_combination: {'lookbacks': [196, 199, 200], 'score': np.float64(1.0412707836886756), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 34sRunning iteration 321/1500... Est. remaining: 10m 28sRunning iteration 331/1500... Est. remaining: 10m 22sRunning iteration 341/1500... Est. remaining: 10m 15sRunning iteration 351/1500... Est. remaining: 10m 11sRunning iteration 361/1500... Est. remaining: 10m 6sRunning iteration 371/1500... Est. remaining: 10m 0sRunning iteration 381/1500... Est. remaining: 9m 54sRunning iteration 391/1500... Est. remaining: 9m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $15,946,905,241
Annual Return: 51.00%
Sharpe Ratio: 1.63391
Sortino Ratio: 1.609
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 1.113
Lookback periods: [180, 200, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 9m 45sbest_combination: {'lookbacks': [180, 200, 200], 'score': np.float64(1.1127484082911514), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 40sRunning iteration 421/1500... Est. remaining: 9m 35sRunning iteration 431/1500... Est. remaining: 9m 29sRunning iteration 441/1500... Est. remaining: 9m 23sRunning iteration 451/1500... Est. remaining: 9m 17sRunning iteration 461/1500... Est. remaining: 9m 12sRunning iteration 471/1500... Est. remaining: 9m 6sRunning iteration 481/1500... Est. remaining: 9m 0sRunning iteration 491/1500... Est. remaining: 8m 55sRunning iteration 501/1500... Est. remaining: 8m 49sbest_combination: {'lookbacks': [180, 200, 200], 'score': np.float64(1.1127484082911514), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 44sRunning iteration 521/1500... Est. remaining: 8m 38sRunning iteration 531/1500... Est. remaining: 8m 33sRunning iteration 541/1500... Est. remaining: 8m 27sRunning iteration 551/1500... Est. remaining: 8m 22sRunning iteration 561/1500... Est. remaining: 8m 16sRunning iteration 571/1500... Est. remaining: 8m 10sRunning iteration 581/1500... Est. remaining: 8m 5sRunning iteration 591/1500... Est. remaining: 7m 59sRunning iteration 601/1500... Est. remaining: 7m 54sbest_combination: {'lookbacks': [180, 200, 200], 'score': np.float64(1.1127484082911514), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 48sRunning iteration 621/1500... Est. remaining: 7m 43sRunning iteration 631/1500... Est. remaining: 7m 37sRunning iteration 641/1500... Est. remaining: 7m 32sRunning iteration 651/1500... Est. remaining: 7m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $19,344,361,537
Annual Return: 51.84%
Sharpe Ratio: 1.66412
Sortino Ratio: 1.640
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 1.342
Lookback periods: [178, 200, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 23sRunning iteration 671/1500... Est. remaining: 7m 18sRunning iteration 681/1500... Est. remaining: 7m 13sRunning iteration 691/1500... Est. remaining: 7m 8sRunning iteration 701/1500... Est. remaining: 7m 3sbest_combination: {'lookbacks': [178, 200, 200], 'score': np.float64(1.342370396966637), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 58sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 47sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 36sRunning iteration 761/1500... Est. remaining: 6m 31sRunning iteration 771/1500... Est. remaining: 6m 26sRunning iteration 781/1500... Est. remaining: 6m 20sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [178, 200, 200], 'score': np.float64(1.342370396966637), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 4sRunning iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 54sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 33sRunning iteration 881/1500... Est. remaining: 5m 28sRunning iteration 891/1500... Est. remaining: 5m 22sRunning iteration 901/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [178, 200, 200], 'score': np.float64(1.342370396966637), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 12sRunning iteration 921/1500... Est. remaining: 5m 7sRunning iteration 931/1500... Est. remaining: 5m 1sRunning iteration 941/1500... Est. remaining: 4m 56sRunning iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 45sRunning iteration 971/1500... Est. remaining: 4m 40sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 29sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [178, 200, 200], 'score': np.float64(1.342370396966637), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 14sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 3sRunning iteration 1051/1500... Est. remaining: 3m 58sRunning iteration 1061/1500... Est. remaining: 3m 53sRunning iteration 1071/1500... Est. remaining: 3m 47sRunning iteration 1081/1500... Est. remaining: 3m 42sRunning iteration 1091/1500... Est. remaining: 3m 37sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [178, 200, 200], 'score': np.float64(1.342370396966637), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $19,641,594,719
Annual Return: 51.91%
Sharpe Ratio: 1.66457
Sortino Ratio: 1.643
Max Drawdown: -59.3%
Avg Drawdown: -10.8%
Normalized Score: 1.395
Lookback periods: [192, 200, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1111/1500... Est. remaining: 3m 27sRunning iteration 1121/1500... Est. remaining: 3m 22sRunning iteration 1131/1500... Est. remaining: 3m 17sRunning iteration 1141/1500... Est. remaining: 3m 12sRunning iteration 1151/1500... Est. remaining: 3m 6sRunning iteration 1161/1500... Est. remaining: 3m 1sRunning iteration 1171/1500... Est. remaining: 2m 56sRunning iteration 1181/1500... Est. remaining: 2m 51sRunning iteration 1191/1500... Est. remaining: 2m 46sRunning iteration 1201/1500... Est. remaining: 2m 40sbest_combination: {'lookbacks': [192, 200, 200], 'score': np.float64(1.3953893979924485), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 35sRunning iteration 1221/1500... Est. remaining: 2m 30sRunning iteration 1231/1500... Est. remaining: 2m 24sRunning iteration 1241/1500... Est. remaining: 2m 19sRunning iteration 1251/1500... Est. remaining: 2m 13sRunning iteration 1261/1500... Est. remaining: 2m 8sRunning iteration 1271/1500... Est. remaining: 2m 3sRunning iteration 1281/1500... Est. remaining: 1m 57sRunning iteration 1291/1500... Est. remaining: 1m 52sRunning iteration 1301/1500... Est. remaining: 1m 47sbest_combination: {'lookbacks': [192, 200, 200], 'score': np.float64(1.3953893979924485), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 41sRunning iteration 1321/1500... Est. remaining: 1m 36sRunning iteration 1331/1500... Est. remaining: 1m 31sRunning iteration 1341/1500... Est. remaining: 1m 25sRunning iteration 1351/1500... Est. remaining: 1m 20sRunning iteration 1361/1500... Est. remaining: 1m 14sRunning iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 4sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [192, 200, 200], 'score': np.float64(1.3953893979924485), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.3 minutes
Best normalized score: 1.40
best_combination: {'lookbacks': [192, 200, 200], 'score': np.float64(1.3953893979924485), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [192, 200, 200] (score: 1.3954)

Monte Carlo simulation completed in 13.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [192, 200, 200] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 123 selections (29.6%)
2. naz100_hma: 118 selections (28.4%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 65 selections (15.6%)
5. cash: 31 selections (7.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $19,641,594,719.43
Average Annualized Gain: 51.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Sun Aug 24 21:55:04 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $244,006,966
Annual Return: 33.84%
Sharpe Ratio: 1.20128
Sortino Ratio: 1.092
Max Drawdown: -52.1%
Avg Drawdown: -12.9%
Normalized Score: -1.792
Lookback periods: [56, 65, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $408,014,145
Annual Return: 35.84%
Sharpe Ratio: 1.27917
Sortino Ratio: 1.155
Max Drawdown: -52.3%
Avg Drawdown: -12.3%
Normalized Score: -1.325
Lookback periods: [51, 98, 140] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,158,873,554
Annual Return: 42.53%
Sharpe Ratio: 1.42372
Sortino Ratio: 1.365
Max Drawdown: -59.2%
Avg Drawdown: -13.1%
Normalized Score: -0.559
Lookback periods: [152, 190, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 5sRunning iteration 21/1500... Est. remaining: 21m 6sRunning iteration 31/1500... Est. remaining: 17m 59sRunning iteration 41/1500... Est. remaining: 16m 28sRunning iteration 51/1500... Est. remaining: 15m 31sRunning iteration 61/1500... Est. remaining: 14m 59sRunning iteration 71/1500... Est. remaining: 14m 37sRunning iteration 81/1500... Est. remaining: 14m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,237,027,415
Annual Return: 42.68%
Sharpe Ratio: 1.43214
Sortino Ratio: 1.366
Max Drawdown: -59.0%
Avg Drawdown: -13.1%
Normalized Score: -0.517
Lookback periods: [156, 167, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 28sRunning iteration 101/1500... Est. remaining: 14m 8sbest_combination: {'lookbacks': [156, 167, 177], 'score': np.float64(-0.517068310288451), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,730,419,196
Annual Return: 41.62%
Sharpe Ratio: 1.45791
Sortino Ratio: 1.358
Max Drawdown: -52.9%
Avg Drawdown: -11.5%
Normalized Score: -0.166
Lookback periods: [94, 95, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 7sRunning iteration 121/1500... Est. remaining: 13m 51sRunning iteration 131/1500... Est. remaining: 13m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,649,435,784
Annual Return: 43.37%
Sharpe Ratio: 1.48633
Sortino Ratio: 1.405
Max Drawdown: -52.3%
Avg Drawdown: -11.2%
Normalized Score: 0.180
Lookback periods: [102, 109, 114] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 13m 35sRunning iteration 151/1500... Est. remaining: 13m 22sRunning iteration 161/1500... Est. remaining: 13m 9sRunning iteration 171/1500... Est. remaining: 12m 57sRunning iteration 181/1500... Est. remaining: 12m 45sRunning iteration 191/1500... Est. remaining: 12m 36sRunning iteration 201/1500... Est. remaining: 12m 26sbest_combination: {'lookbacks': [102, 109, 114], 'score': np.float64(0.1796402589453811), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 17sRunning iteration 221/1500... Est. remaining: 12m 8sRunning iteration 231/1500... Est. remaining: 11m 59sRunning iteration 241/1500... Est. remaining: 11m 51sRunning iteration 251/1500... Est. remaining: 11m 42sRunning iteration 261/1500... Est. remaining: 11m 34sRunning iteration 271/1500... Est. remaining: 11m 26sRunning iteration 281/1500... Est. remaining: 11m 18sRunning iteration 291/1500... Est. remaining: 11m 11sRunning iteration 301/1500... Est. remaining: 11m 3sbest_combination: {'lookbacks': [102, 109, 114], 'score': np.float64(0.1796402589453811), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 56sRunning iteration 321/1500... Est. remaining: 10m 49sRunning iteration 331/1500... Est. remaining: 10m 41sRunning iteration 341/1500... Est. remaining: 10m 34sRunning iteration 351/1500... Est. remaining: 10m 28sRunning iteration 361/1500... Est. remaining: 10m 21sRunning iteration 371/1500... Est. remaining: 10m 14sRunning iteration 381/1500... Est. remaining: 10m 8sRunning iteration 391/1500... Est. remaining: 10m 1sRunning iteration 401/1500... Est. remaining: 9m 55sbest_combination: {'lookbacks': [102, 109, 114], 'score': np.float64(0.1796402589453811), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 48sRunning iteration 421/1500... Est. remaining: 9m 42sRunning iteration 431/1500... Est. remaining: 9m 36sRunning iteration 441/1500... Est. remaining: 9m 30sRunning iteration 451/1500... Est. remaining: 9m 24sRunning iteration 461/1500... Est. remaining: 9m 18sRunning iteration 471/1500... Est. remaining: 9m 12sRunning iteration 481/1500... Est. remaining: 9m 6sRunning iteration 491/1500... Est. remaining: 9m 0sRunning iteration 501/1500... Est. remaining: 8m 54sbest_combination: {'lookbacks': [102, 109, 114], 'score': np.float64(0.1796402589453811), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 48sRunning iteration 521/1500... Est. remaining: 8m 42sRunning iteration 531/1500... Est. remaining: 8m 37sRunning iteration 541/1500... Est. remaining: 8m 31sRunning iteration 551/1500... Est. remaining: 8m 25sRunning iteration 561/1500... Est. remaining: 8m 19sRunning iteration 571/1500... Est. remaining: 8m 13sRunning iteration 581/1500... Est. remaining: 8m 8sRunning iteration 591/1500... Est. remaining: 8m 2sRunning iteration 601/1500... Est. remaining: 7m 56sbest_combination: {'lookbacks': [102, 109, 114], 'score': np.float64(0.1796402589453811), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 51sRunning iteration 621/1500... Est. remaining: 7m 45sRunning iteration 631/1500... Est. remaining: 7m 39sRunning iteration 641/1500... Est. remaining: 7m 34sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 23sRunning iteration 671/1500... Est. remaining: 7m 18sRunning iteration 681/1500... Est. remaining: 7m 12sRunning iteration 691/1500... Est. remaining: 7m 7sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [102, 109, 114], 'score': np.float64(0.1796402589453811), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 56sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 45sRunning iteration 741/1500... Est. remaining: 6m 39sRunning iteration 751/1500... Est. remaining: 6m 34sRunning iteration 761/1500... Est. remaining: 6m 28sRunning iteration 771/1500... Est. remaining: 6m 23sRunning iteration 781/1500... Est. remaining: 6m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,998,967,617
Annual Return: 43.89%
Sharpe Ratio: 1.50173
Sortino Ratio: 1.416
Max Drawdown: -52.3%
Avg Drawdown: -11.2%
Normalized Score: 0.266
Lookback periods: [102, 111, 114] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 6m 13sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [102, 111, 114], 'score': np.float64(0.26598503238060867), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 2sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 46sRunning iteration 851/1500... Est. remaining: 5m 41sRunning iteration 861/1500... Est. remaining: 5m 35sRunning iteration 871/1500... Est. remaining: 5m 30sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 19sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [102, 111, 114], 'score': np.float64(0.26598503238060867), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 3sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 47sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 31sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [102, 111, 114], 'score': np.float64(0.26598503238060867), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [102, 111, 114], 'score': np.float64(0.26598503238060867), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [102, 111, 114], 'score': np.float64(0.26598503238060867), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [102, 111, 114], 'score': np.float64(0.26598503238060867), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,898,060,966
Annual Return: 43.75%
Sharpe Ratio: 1.50592
Sortino Ratio: 1.425
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: 0.297
Lookback periods: [102, 109, 119] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,430,124,241
Annual Return: 44.45%
Sharpe Ratio: 1.51458
Sortino Ratio: 1.428
Max Drawdown: -52.3%
Avg Drawdown: -11.5%
Normalized Score: 0.309
Lookback periods: [99, 111, 115] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [99, 111, 115], 'score': np.float64(0.30891211946068564), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 0.31
best_combination: {'lookbacks': [99, 111, 115], 'score': np.float64(0.30891211946068564), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [99, 111, 115] (score: 0.3089)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [99, 111, 115] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 119 selections (28.6%)
2. naz100_pi: 87 selections (20.9%)
3. naz100_pine: 83 selections (20.0%)
4. naz100_hma: 80 selections (19.2%)
5. cash: 47 selections (11.3%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,430,124,241.03
Average Annualized Gain: 44.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Sun Aug 24 22:08:11 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $307,976,952
Annual Return: 34.74%
Sharpe Ratio: 1.20464
Sortino Ratio: 1.121
Max Drawdown: -59.2%
Avg Drawdown: -14.5%
Normalized Score: -2.138
Lookback periods: [89, 120, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $340,026,346
Annual Return: 35.13%
Sharpe Ratio: 1.23593
Sortino Ratio: 1.148
Max Drawdown: -52.3%
Avg Drawdown: -12.1%
Normalized Score: -1.430
Lookback periods: [71, 83, 115] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,829,892,778
Annual Return: 41.85%
Sharpe Ratio: 1.43497
Sortino Ratio: 1.339
Max Drawdown: -55.9%
Avg Drawdown: -12.0%
Normalized Score: -0.363
Lookback periods: [51, 121, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,839,126,853
Annual Return: 43.66%
Sharpe Ratio: 1.45020
Sortino Ratio: 1.402
Max Drawdown: -62.4%
Avg Drawdown: -12.4%
Normalized Score: -0.350
Lookback periods: [132, 159, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $513,894,737
Annual Return: 36.75%
Sharpe Ratio: 1.31006
Sortino Ratio: 1.224
Max Drawdown: -34.7%
Avg Drawdown: -10.0%
Normalized Score: -0.170
Lookback periods: [50, 81, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,541,160,310
Annual Return: 41.15%
Sharpe Ratio: 1.43145
Sortino Ratio: 1.344
Max Drawdown: -52.3%
Avg Drawdown: -9.5%
Normalized Score: 0.066
Lookback periods: [50, 100, 116] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,198,551,133
Annual Return: 47.57%
Sharpe Ratio: 1.55551
Sortino Ratio: 1.523
Max Drawdown: -55.0%
Avg Drawdown: -11.1%
Normalized Score: 0.771
Lookback periods: [159, 161, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 18m 6sRunning iteration 61/1500... Est. remaining: 17m 3sRunning iteration 71/1500... Est. remaining: 16m 13sRunning iteration 81/1500... Est. remaining: 15m 34sRunning iteration 91/1500... Est. remaining: 15m 4sRunning iteration 101/1500... Est. remaining: 14m 38sbest_combination: {'lookbacks': [159, 161, 169], 'score': np.float64(0.7706621998811787), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 17sRunning iteration 121/1500... Est. remaining: 13m 59sRunning iteration 131/1500... Est. remaining: 13m 42sRunning iteration 141/1500... Est. remaining: 13m 27sRunning iteration 151/1500... Est. remaining: 13m 13sRunning iteration 161/1500... Est. remaining: 13m 0sRunning iteration 171/1500... Est. remaining: 12m 48sRunning iteration 181/1500... Est. remaining: 12m 37sRunning iteration 191/1500... Est. remaining: 12m 27sRunning iteration 201/1500... Est. remaining: 12m 18sbest_combination: {'lookbacks': [159, 161, 169], 'score': np.float64(0.7706621998811787), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 9sRunning iteration 221/1500... Est. remaining: 12m 1sRunning iteration 231/1500... Est. remaining: 11m 52sRunning iteration 241/1500... Est. remaining: 11m 44sRunning iteration 251/1500... Est. remaining: 11m 36sRunning iteration 261/1500... Est. remaining: 11m 29sRunning iteration 271/1500... Est. remaining: 11m 22sRunning iteration 281/1500... Est. remaining: 11m 15sRunning iteration 291/1500... Est. remaining: 11m 8sRunning iteration 301/1500... Est. remaining: 11m 1sbest_combination: {'lookbacks': [159, 161, 169], 'score': np.float64(0.7706621998811787), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 54sRunning iteration 321/1500... Est. remaining: 10m 47sRunning iteration 331/1500... Est. remaining: 10m 41sRunning iteration 341/1500... Est. remaining: 10m 34sRunning iteration 351/1500... Est. remaining: 10m 27sRunning iteration 361/1500... Est. remaining: 10m 20sRunning iteration 371/1500... Est. remaining: 10m 14sRunning iteration 381/1500... Est. remaining: 10m 8sRunning iteration 391/1500... Est. remaining: 10m 1sRunning iteration 401/1500... Est. remaining: 9m 55sbest_combination: {'lookbacks': [159, 161, 169], 'score': np.float64(0.7706621998811787), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 49sRunning iteration 421/1500... Est. remaining: 9m 43sRunning iteration 431/1500... Est. remaining: 9m 37sRunning iteration 441/1500... Est. remaining: 9m 31sRunning iteration 451/1500... Est. remaining: 9m 25sRunning iteration 461/1500... Est. remaining: 9m 19sRunning iteration 471/1500... Est. remaining: 9m 13sRunning iteration 481/1500... Est. remaining: 9m 7sRunning iteration 491/1500... Est. remaining: 9m 1sRunning iteration 501/1500... Est. remaining: 8m 55sbest_combination: {'lookbacks': [159, 161, 169], 'score': np.float64(0.7706621998811787), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 49sRunning iteration 521/1500... Est. remaining: 8m 43sRunning iteration 531/1500... Est. remaining: 8m 37sRunning iteration 541/1500... Est. remaining: 8m 31sRunning iteration 551/1500... Est. remaining: 8m 25sRunning iteration 561/1500... Est. remaining: 8m 19sRunning iteration 571/1500... Est. remaining: 8m 14sRunning iteration 581/1500... Est. remaining: 8m 8sRunning iteration 591/1500... Est. remaining: 8m 3sRunning iteration 601/1500... Est. remaining: 7m 57sbest_combination: {'lookbacks': [159, 161, 169], 'score': np.float64(0.7706621998811787), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 52sRunning iteration 621/1500... Est. remaining: 7m 46sRunning iteration 631/1500... Est. remaining: 7m 41sRunning iteration 641/1500... Est. remaining: 7m 35sRunning iteration 651/1500... Est. remaining: 7m 30sRunning iteration 661/1500... Est. remaining: 7m 24sRunning iteration 671/1500... Est. remaining: 7m 19sRunning iteration 681/1500... Est. remaining: 7m 14sRunning iteration 691/1500... Est. remaining: 7m 8sRunning iteration 701/1500... Est. remaining: 7m 3sbest_combination: {'lookbacks': [159, 161, 169], 'score': np.float64(0.7706621998811787), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,308,527,931
Annual Return: 48.18%
Sharpe Ratio: 1.56882
Sortino Ratio: 1.527
Max Drawdown: -59.0%
Avg Drawdown: -10.6%
Normalized Score: 0.795
Lookback periods: [158, 159, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 48sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 37sRunning iteration 761/1500... Est. remaining: 6m 32sRunning iteration 771/1500... Est. remaining: 6m 26sRunning iteration 781/1500... Est. remaining: 6m 21sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [158, 159, 171], 'score': np.float64(0.795164390808639), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 5sRunning iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 54sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 27sRunning iteration 891/1500... Est. remaining: 5m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,123,785,183
Annual Return: 48.09%
Sharpe Ratio: 1.57226
Sortino Ratio: 1.540
Max Drawdown: -56.9%
Avg Drawdown: -10.8%
Normalized Score: 0.851
Lookback periods: [156, 158, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 901/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [156, 158, 161], 'score': np.float64(0.8513730166703557), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 12sRunning iteration 921/1500... Est. remaining: 5m 6sRunning iteration 931/1500... Est. remaining: 5m 1sRunning iteration 941/1500... Est. remaining: 4m 55sRunning iteration 951/1500... Est. remaining: 4m 50sRunning iteration 961/1500... Est. remaining: 4m 45sRunning iteration 971/1500... Est. remaining: 4m 39sRunning iteration 981/1500... Est. remaining: 4m 34sRunning iteration 991/1500... Est. remaining: 4m 29sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [156, 158, 161], 'score': np.float64(0.8513730166703557), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 18sRunning iteration 1021/1500... Est. remaining: 4m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,264,609,576
Annual Return: 48.16%
Sharpe Ratio: 1.57445
Sortino Ratio: 1.545
Max Drawdown: -55.0%
Avg Drawdown: -11.1%
Normalized Score: 0.875
Lookback periods: [159, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [159, 162, 169], 'score': np.float64(0.8753997914725913), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,713,807,355
Annual Return: 48.39%
Sharpe Ratio: 1.57922
Sortino Ratio: 1.549
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.942
Lookback periods: [156, 162, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 0.94
best_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 162, 168] (score: 0.9420)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 162, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 112 selections (26.9%)
2. sp500_hma: 107 selections (25.7%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 80 selections (19.2%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,713,807,354.78
Average Annualized Gain: 48.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Sun Aug 24 22:21:25 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $988,553,952
Annual Return: 39.35%
Sharpe Ratio: 1.32121
Sortino Ratio: 1.256
Max Drawdown: -57.0%
Avg Drawdown: -13.9%
Normalized Score: -1.183
Lookback periods: [98, 110, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $804,750,695
Annual Return: 38.53%
Sharpe Ratio: 1.32183
Sortino Ratio: 1.223
Max Drawdown: -57.8%
Avg Drawdown: -12.2%
Normalized Score: -1.084
Lookback periods: [54, 158, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,728,451,145
Annual Return: 41.62%
Sharpe Ratio: 1.37354
Sortino Ratio: 1.325
Max Drawdown: -68.2%
Avg Drawdown: -12.3%
Normalized Score: -0.934
Lookback periods: [117, 191, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,084,427,376
Annual Return: 42.39%
Sharpe Ratio: 1.40856
Sortino Ratio: 1.351
Max Drawdown: -56.4%
Avg Drawdown: -12.7%
Normalized Score: -0.455
Lookback periods: [96, 136, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,327,604,186
Annual Return: 42.84%
Sharpe Ratio: 1.43847
Sortino Ratio: 1.384
Max Drawdown: -52.3%
Avg Drawdown: -11.4%
Normalized Score: 0.008
Lookback periods: [98, 101, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,731,248,327
Annual Return: 45.79%
Sharpe Ratio: 1.51026
Sortino Ratio: 1.468
Max Drawdown: -60.4%
Avg Drawdown: -11.5%
Normalized Score: 0.222
Lookback periods: [107, 129, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,517,365,608
Annual Return: 46.44%
Sharpe Ratio: 1.51269
Sortino Ratio: 1.468
Max Drawdown: -59.0%
Avg Drawdown: -12.2%
Normalized Score: 0.232
Lookback periods: [181, 183, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 19m 38sRunning iteration 51/1500... Est. remaining: 18m 7sRunning iteration 61/1500... Est. remaining: 17m 4sRunning iteration 71/1500... Est. remaining: 16m 19sRunning iteration 81/1500... Est. remaining: 15m 41sRunning iteration 91/1500... Est. remaining: 15m 10sRunning iteration 101/1500... Est. remaining: 14m 45sbest_combination: {'lookbacks': [181, 183, 194], 'score': np.float64(0.23202564336813764), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 23sRunning iteration 121/1500... Est. remaining: 14m 4sRunning iteration 131/1500... Est. remaining: 13m 47sRunning iteration 141/1500... Est. remaining: 13m 31sRunning iteration 151/1500... Est. remaining: 13m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,094,619,025
Annual Return: 47.51%
Sharpe Ratio: 1.55690
Sortino Ratio: 1.510
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.567
Lookback periods: [140, 159, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 13m 15sRunning iteration 171/1500... Est. remaining: 13m 3sRunning iteration 181/1500... Est. remaining: 12m 51sRunning iteration 191/1500... Est. remaining: 12m 41sRunning iteration 201/1500... Est. remaining: 12m 31sbest_combination: {'lookbacks': [140, 159, 199], 'score': np.float64(0.5669968443140948), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 21sRunning iteration 221/1500... Est. remaining: 12m 11sRunning iteration 231/1500... Est. remaining: 12m 2sRunning iteration 241/1500... Est. remaining: 11m 53sRunning iteration 251/1500... Est. remaining: 11m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,295,009,665
Annual Return: 40.44%
Sharpe Ratio: 1.46595
Sortino Ratio: 1.361
Max Drawdown: -35.6%
Avg Drawdown: -9.8%
Normalized Score: 0.579
Lookback periods: [50, 56, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 11m 42sRunning iteration 271/1500... Est. remaining: 11m 33sRunning iteration 281/1500... Est. remaining: 11m 25sRunning iteration 291/1500... Est. remaining: 11m 17sRunning iteration 301/1500... Est. remaining: 11m 10sbest_combination: {'lookbacks': [50, 56, 85], 'score': np.float64(0.5787854896474972), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 2sRunning iteration 321/1500... Est. remaining: 10m 54sRunning iteration 331/1500... Est. remaining: 10m 47sRunning iteration 341/1500... Est. remaining: 10m 40sRunning iteration 351/1500... Est. remaining: 10m 32sRunning iteration 361/1500... Est. remaining: 10m 25sRunning iteration 371/1500... Est. remaining: 10m 19sRunning iteration 381/1500... Est. remaining: 10m 13sRunning iteration 391/1500... Est. remaining: 10m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,775,875,329
Annual Return: 41.73%
Sharpe Ratio: 1.48451
Sortino Ratio: 1.388
Max Drawdown: -39.4%
Avg Drawdown: -9.7%
Normalized Score: 0.652
Lookback periods: [51, 54, 81] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 10m 3sbest_combination: {'lookbacks': [51, 54, 81], 'score': np.float64(0.6518291101761383), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,709,137,704
Annual Return: 41.57%
Sharpe Ratio: 1.49371
Sortino Ratio: 1.397
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 0.955
Lookback periods: [50, 50, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 10m 0sRunning iteration 421/1500... Est. remaining: 9m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,057,983,268
Annual Return: 43.97%
Sharpe Ratio: 1.54448
Sortino Ratio: 1.445
Max Drawdown: -35.6%
Avg Drawdown: -9.5%
Normalized Score: 1.184
Lookback periods: [52, 53, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,988,750,556
Annual Return: 43.87%
Sharpe Ratio: 1.55360
Sortino Ratio: 1.462
Max Drawdown: -36.7%
Avg Drawdown: -9.4%
Normalized Score: 1.192
Lookback periods: [50, 53, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 9m 53sRunning iteration 441/1500... Est. remaining: 9m 46sRunning iteration 451/1500... Est. remaining: 9m 39sRunning iteration 461/1500... Est. remaining: 9m 33sRunning iteration 471/1500... Est. remaining: 9m 26sRunning iteration 481/1500... Est. remaining: 9m 20sRunning iteration 491/1500... Est. remaining: 9m 13sRunning iteration 501/1500... Est. remaining: 9m 7sbest_combination: {'lookbacks': [50, 53, 82], 'score': np.float64(1.1920961694035388), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 0sRunning iteration 521/1500... Est. remaining: 8m 54sRunning iteration 531/1500... Est. remaining: 8m 48sRunning iteration 541/1500... Est. remaining: 8m 42sRunning iteration 551/1500... Est. remaining: 8m 36sRunning iteration 561/1500... Est. remaining: 8m 30sRunning iteration 571/1500... Est. remaining: 8m 23sRunning iteration 581/1500... Est. remaining: 8m 17sRunning iteration 591/1500... Est. remaining: 8m 11sRunning iteration 601/1500... Est. remaining: 8m 6sbest_combination: {'lookbacks': [50, 53, 82], 'score': np.float64(1.1920961694035388), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 0sRunning iteration 621/1500... Est. remaining: 7m 54sRunning iteration 631/1500... Est. remaining: 7m 49sRunning iteration 641/1500... Est. remaining: 7m 43sRunning iteration 651/1500... Est. remaining: 7m 37sRunning iteration 661/1500... Est. remaining: 7m 31sRunning iteration 671/1500... Est. remaining: 7m 26sRunning iteration 681/1500... Est. remaining: 7m 21sRunning iteration 691/1500... Est. remaining: 7m 15sRunning iteration 701/1500... Est. remaining: 7m 10sbest_combination: {'lookbacks': [50, 53, 82], 'score': np.float64(1.1920961694035388), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 4sRunning iteration 721/1500... Est. remaining: 6m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,229,417,452
Annual Return: 44.20%
Sharpe Ratio: 1.57610
Sortino Ratio: 1.489
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.382
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 6m 54sRunning iteration 741/1500... Est. remaining: 6m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,796,731,139
Annual Return: 43.60%
Sharpe Ratio: 1.56916
Sortino Ratio: 1.470
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.467
Lookback periods: [50, 50, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 6m 44sRunning iteration 761/1500... Est. remaining: 6m 38sRunning iteration 771/1500... Est. remaining: 6m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,005,011
Annual Return: 43.90%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.535
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 781/1500... Est. remaining: 6m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.670
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 6m 23sRunning iteration 801/1500... Est. remaining: 6m 17sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.6699565789556323), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 12sRunning iteration 821/1500... Est. remaining: 6m 6sRunning iteration 831/1500... Est. remaining: 6m 0sRunning iteration 841/1500... Est. remaining: 5m 55sRunning iteration 851/1500... Est. remaining: 5m 49sRunning iteration 861/1500... Est. remaining: 5m 43sRunning iteration 871/1500... Est. remaining: 5m 38sRunning iteration 881/1500... Est. remaining: 5m 32sRunning iteration 891/1500... Est. remaining: 5m 27sRunning iteration 901/1500... Est. remaining: 5m 21sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.6699565789556323), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 16sRunning iteration 921/1500... Est. remaining: 5m 10sRunning iteration 931/1500... Est. remaining: 5m 4sRunning iteration 941/1500... Est. remaining: 4m 59sRunning iteration 951/1500... Est. remaining: 4m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.716
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 961/1500... Est. remaining: 4m 48sRunning iteration 971/1500... Est. remaining: 4m 43sRunning iteration 981/1500... Est. remaining: 4m 37sRunning iteration 991/1500... Est. remaining: 4m 32sRunning iteration 1001/1500... Est. remaining: 4m 26sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.716229926850809), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 21sRunning iteration 1021/1500... Est. remaining: 4m 15sRunning iteration 1031/1500... Est. remaining: 4m 10sRunning iteration 1041/1500... Est. remaining: 4m 5sRunning iteration 1051/1500... Est. remaining: 3m 59sRunning iteration 1061/1500... Est. remaining: 3m 54sRunning iteration 1071/1500... Est. remaining: 3m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1081/1500... Est. remaining: 3m 43sRunning iteration 1091/1500... Est. remaining: 3m 38sRunning iteration 1101/1500... Est. remaining: 3m 33sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 27sRunning iteration 1121/1500... Est. remaining: 3m 22sRunning iteration 1131/1500... Est. remaining: 3m 16sRunning iteration 1141/1500... Est. remaining: 3m 11sRunning iteration 1151/1500... Est. remaining: 3m 6sRunning iteration 1161/1500... Est. remaining: 3m 0sRunning iteration 1171/1500... Est. remaining: 2m 55sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 44sRunning iteration 1201/1500... Est. remaining: 2m 39sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 33sRunning iteration 1221/1500... Est. remaining: 2m 28sRunning iteration 1231/1500... Est. remaining: 2m 23sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.94
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9365)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Sun Aug 24 22:34:40 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,491,483,538
Annual Return: 44.52%
Sharpe Ratio: 1.46287
Sortino Ratio: 1.419
Max Drawdown: -60.9%
Avg Drawdown: -13.4%
Normalized Score: -0.342
Lookback periods: [145, 150, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 23m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,726,529,675
Annual Return: 44.79%
Sharpe Ratio: 1.47255
Sortino Ratio: 1.435
Max Drawdown: -66.6%
Avg Drawdown: -12.2%
Normalized Score: -0.284
Lookback periods: [134, 158, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,493,942,196
Annual Return: 45.58%
Sharpe Ratio: 1.48436
Sortino Ratio: 1.448
Max Drawdown: -60.2%
Avg Drawdown: -11.6%
Normalized Score: 0.134
Lookback periods: [165, 185, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,072,024,302
Annual Return: 45.16%
Sharpe Ratio: 1.47463
Sortino Ratio: 1.432
Max Drawdown: -55.0%
Avg Drawdown: -11.7%
Normalized Score: 0.212
Lookback periods: [160, 161, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 28sRunning iteration 51/1500... Est. remaining: 16m 27sRunning iteration 61/1500... Est. remaining: 15m 39sRunning iteration 71/1500... Est. remaining: 15m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,409,672,232
Annual Return: 47.69%
Sharpe Ratio: 1.56694
Sortino Ratio: 1.524
Max Drawdown: -62.6%
Avg Drawdown: -11.6%
Normalized Score: 0.471
Lookback periods: [138, 157, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 15m 0sRunning iteration 91/1500... Est. remaining: 14m 33sRunning iteration 101/1500... Est. remaining: 14m 10sbest_combination: {'lookbacks': [138, 157, 190], 'score': np.float64(0.47135976871346863), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 51sRunning iteration 121/1500... Est. remaining: 13m 35sRunning iteration 131/1500... Est. remaining: 13m 20sRunning iteration 141/1500... Est. remaining: 13m 7sRunning iteration 151/1500... Est. remaining: 12m 54sRunning iteration 161/1500... Est. remaining: 12m 43sRunning iteration 171/1500... Est. remaining: 12m 33sRunning iteration 181/1500... Est. remaining: 12m 23sRunning iteration 191/1500... Est. remaining: 12m 14sRunning iteration 201/1500... Est. remaining: 12m 5sbest_combination: {'lookbacks': [138, 157, 190], 'score': np.float64(0.47135976871346863), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 57sRunning iteration 221/1500... Est. remaining: 11m 49sRunning iteration 231/1500... Est. remaining: 11m 41sRunning iteration 241/1500... Est. remaining: 11m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,545,476,772
Annual Return: 48.78%
Sharpe Ratio: 1.58345
Sortino Ratio: 1.552
Max Drawdown: -61.3%
Avg Drawdown: -11.7%
Normalized Score: 0.657
Lookback periods: [153, 159, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 11m 36sRunning iteration 261/1500... Est. remaining: 11m 31sRunning iteration 271/1500... Est. remaining: 11m 24sRunning iteration 281/1500... Est. remaining: 11m 21sRunning iteration 291/1500... Est. remaining: 11m 13sRunning iteration 301/1500... Est. remaining: 11m 5sbest_combination: {'lookbacks': [153, 159, 197], 'score': np.float64(0.6565840891672885), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 58sRunning iteration 321/1500... Est. remaining: 10m 50sRunning iteration 331/1500... Est. remaining: 10m 43sRunning iteration 341/1500... Est. remaining: 10m 36sRunning iteration 351/1500... Est. remaining: 10m 29sRunning iteration 361/1500... Est. remaining: 10m 23sRunning iteration 371/1500... Est. remaining: 10m 16sRunning iteration 381/1500... Est. remaining: 10m 9sRunning iteration 391/1500... Est. remaining: 10m 3sRunning iteration 401/1500... Est. remaining: 9m 57sbest_combination: {'lookbacks': [153, 159, 197], 'score': np.float64(0.6565840891672885), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 50sRunning iteration 421/1500... Est. remaining: 9m 44sRunning iteration 431/1500... Est. remaining: 9m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $14,200,892,471
Annual Return: 50.49%
Sharpe Ratio: 1.62552
Sortino Ratio: 1.594
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 1.118
Lookback periods: [176, 184, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 34sRunning iteration 451/1500... Est. remaining: 9m 28sRunning iteration 461/1500... Est. remaining: 9m 21sRunning iteration 471/1500... Est. remaining: 9m 15sRunning iteration 481/1500... Est. remaining: 9m 9sRunning iteration 491/1500... Est. remaining: 9m 4sRunning iteration 501/1500... Est. remaining: 8m 58sbest_combination: {'lookbacks': [176, 184, 188], 'score': np.float64(1.1184758152941408), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 52sRunning iteration 521/1500... Est. remaining: 8m 47sRunning iteration 531/1500... Est. remaining: 8m 41sRunning iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 30sRunning iteration 561/1500... Est. remaining: 8m 24sRunning iteration 571/1500... Est. remaining: 8m 18sRunning iteration 581/1500... Est. remaining: 8m 12sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 1sbest_combination: {'lookbacks': [176, 184, 188], 'score': np.float64(1.1184758152941408), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 55sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 44sRunning iteration 641/1500... Est. remaining: 7m 39sRunning iteration 651/1500... Est. remaining: 7m 33sRunning iteration 661/1500... Est. remaining: 7m 28sRunning iteration 671/1500... Est. remaining: 7m 23sRunning iteration 681/1500... Est. remaining: 7m 17sRunning iteration 691/1500... Est. remaining: 7m 12sRunning iteration 701/1500... Est. remaining: 7m 6sbest_combination: {'lookbacks': [176, 184, 188], 'score': np.float64(1.1184758152941408), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 0sRunning iteration 721/1500... Est. remaining: 6m 55sRunning iteration 731/1500... Est. remaining: 6m 49sRunning iteration 741/1500... Est. remaining: 6m 44sRunning iteration 751/1500... Est. remaining: 6m 38sRunning iteration 761/1500... Est. remaining: 6m 33sRunning iteration 771/1500... Est. remaining: 6m 27sRunning iteration 781/1500... Est. remaining: 6m 22sRunning iteration 791/1500... Est. remaining: 6m 16sRunning iteration 801/1500... Est. remaining: 6m 11sbest_combination: {'lookbacks': [176, 184, 188], 'score': np.float64(1.1184758152941408), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 5sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 54sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 27sRunning iteration 891/1500... Est. remaining: 5m 22sRunning iteration 901/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [176, 184, 188], 'score': np.float64(1.1184758152941408), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 11sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 44sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [176, 184, 188], 'score': np.float64(1.1184758152941408), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [176, 184, 188], 'score': np.float64(1.1184758152941408), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [176, 184, 188], 'score': np.float64(1.1184758152941408), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [176, 184, 188], 'score': np.float64(1.1184758152941408), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [176, 184, 188], 'score': np.float64(1.1184758152941408), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.12
best_combination: {'lookbacks': [176, 184, 188], 'score': np.float64(1.1184758152941408), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [176, 184, 188] (score: 1.1185)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 184, 188] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 120 selections (28.8%)
2. sp500_hma: 100 selections (24.0%)
3. naz100_pine: 85 selections (20.4%)
4. naz100_pi: 72 selections (17.3%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $14,200,892,471.00
Average Annualized Gain: 50.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Sun Aug 24 22:47:47 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $574,366,860
Annual Return: 37.19%
Sharpe Ratio: 1.27045
Sortino Ratio: 1.197
Max Drawdown: -62.8%
Avg Drawdown: -12.7%
Normalized Score: -1.547
Lookback periods: [92, 198, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,411,291,401
Annual Return: 45.50%
Sharpe Ratio: 1.48716
Sortino Ratio: 1.443
Max Drawdown: -59.7%
Avg Drawdown: -12.2%
Normalized Score: 0.049
Lookback periods: [151, 158, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,077,361,431
Annual Return: 42.37%
Sharpe Ratio: 1.45765
Sortino Ratio: 1.381
Max Drawdown: -52.3%
Avg Drawdown: -10.8%
Normalized Score: 0.074
Lookback periods: [83, 135, 138] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 52sRunning iteration 21/1500... Est. remaining: 21m 9sRunning iteration 31/1500... Est. remaining: 18m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,419,501,302
Annual Return: 47.08%
Sharpe Ratio: 1.52311
Sortino Ratio: 1.495
Max Drawdown: -62.5%
Avg Drawdown: -12.5%
Normalized Score: 0.183
Lookback periods: [152, 155, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,559,197,683
Annual Return: 46.47%
Sharpe Ratio: 1.51779
Sortino Ratio: 1.470
Max Drawdown: -57.2%
Avg Drawdown: -12.1%
Normalized Score: 0.326
Lookback periods: [136, 157, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 17m 0sRunning iteration 61/1500... Est. remaining: 16m 6sRunning iteration 71/1500... Est. remaining: 15m 26sRunning iteration 81/1500... Est. remaining: 15m 1sRunning iteration 91/1500... Est. remaining: 14m 35sRunning iteration 101/1500... Est. remaining: 14m 12sbest_combination: {'lookbacks': [136, 157, 199], 'score': np.float64(0.32557399555347305), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 52sRunning iteration 121/1500... Est. remaining: 13m 36sRunning iteration 131/1500... Est. remaining: 13m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,327,243,368
Annual Return: 45.42%
Sharpe Ratio: 1.51075
Sortino Ratio: 1.474
Max Drawdown: -55.0%
Avg Drawdown: -11.6%
Normalized Score: 0.354
Lookback periods: [127, 132, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 13m 18sRunning iteration 151/1500... Est. remaining: 13m 7sRunning iteration 161/1500... Est. remaining: 12m 54sRunning iteration 171/1500... Est. remaining: 12m 42sRunning iteration 181/1500... Est. remaining: 12m 31sRunning iteration 191/1500... Est. remaining: 12m 21sRunning iteration 201/1500... Est. remaining: 12m 13sbest_combination: {'lookbacks': [127, 132, 152], 'score': np.float64(0.3535329275581239), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 4sRunning iteration 221/1500... Est. remaining: 11m 55sRunning iteration 231/1500... Est. remaining: 11m 48sRunning iteration 241/1500... Est. remaining: 11m 40sRunning iteration 251/1500... Est. remaining: 11m 33sRunning iteration 261/1500... Est. remaining: 11m 25sRunning iteration 271/1500... Est. remaining: 11m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,343,027,714
Annual Return: 49.12%
Sharpe Ratio: 1.59434
Sortino Ratio: 1.564
Max Drawdown: -61.0%
Avg Drawdown: -11.6%
Normalized Score: 0.748
Lookback periods: [144, 158, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/1500... Est. remaining: 11m 15sRunning iteration 291/1500... Est. remaining: 11m 7sRunning iteration 301/1500... Est. remaining: 11m 0sbest_combination: {'lookbacks': [144, 158, 189], 'score': np.float64(0.7475527031257656), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,155,799,392
Annual Return: 48.10%
Sharpe Ratio: 1.58002
Sortino Ratio: 1.531
Max Drawdown: -56.0%
Avg Drawdown: -11.0%
Normalized Score: 0.846
Lookback periods: [138, 156, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/1500... Est. remaining: 10m 50sRunning iteration 331/1500... Est. remaining: 10m 43sRunning iteration 341/1500... Est. remaining: 10m 36sRunning iteration 351/1500... Est. remaining: 10m 29sRunning iteration 361/1500... Est. remaining: 10m 22sRunning iteration 371/1500... Est. remaining: 10m 16sRunning iteration 381/1500... Est. remaining: 10m 10sRunning iteration 391/1500... Est. remaining: 10m 4sRunning iteration 401/1500... Est. remaining: 9m 58sbest_combination: {'lookbacks': [138, 156, 191], 'score': np.float64(0.8456016817905093), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 53sRunning iteration 421/1500... Est. remaining: 9m 47sRunning iteration 431/1500... Est. remaining: 9m 40sRunning iteration 441/1500... Est. remaining: 9m 35sRunning iteration 451/1500... Est. remaining: 9m 28sRunning iteration 461/1500... Est. remaining: 9m 22sRunning iteration 471/1500... Est. remaining: 9m 16sRunning iteration 481/1500... Est. remaining: 9m 10sRunning iteration 491/1500... Est. remaining: 9m 4sRunning iteration 501/1500... Est. remaining: 8m 58sbest_combination: {'lookbacks': [138, 156, 191], 'score': np.float64(0.8456016817905093), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 53sRunning iteration 521/1500... Est. remaining: 8m 47sRunning iteration 531/1500... Est. remaining: 8m 41sRunning iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 30sRunning iteration 561/1500... Est. remaining: 8m 24sRunning iteration 571/1500... Est. remaining: 8m 18sRunning iteration 581/1500... Est. remaining: 8m 12sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 1sbest_combination: {'lookbacks': [138, 156, 191], 'score': np.float64(0.8456016817905093), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 55sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 43sRunning iteration 641/1500... Est. remaining: 7m 38sRunning iteration 651/1500... Est. remaining: 7m 32sRunning iteration 661/1500... Est. remaining: 7m 27sRunning iteration 671/1500... Est. remaining: 7m 21sRunning iteration 681/1500... Est. remaining: 7m 15sRunning iteration 691/1500... Est. remaining: 7m 10sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [138, 156, 191], 'score': np.float64(0.8456016817905093), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,211,568,581
Annual Return: 49.07%
Sharpe Ratio: 1.61032
Sortino Ratio: 1.570
Max Drawdown: -55.6%
Avg Drawdown: -11.3%
Normalized Score: 0.994
Lookback periods: [135, 157, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 711/1500... Est. remaining: 7m 0sRunning iteration 721/1500... Est. remaining: 6m 55sRunning iteration 731/1500... Est. remaining: 6m 49sRunning iteration 741/1500... Est. remaining: 6m 44sRunning iteration 751/1500... Est. remaining: 6m 38sRunning iteration 761/1500... Est. remaining: 6m 33sRunning iteration 771/1500... Est. remaining: 6m 27sRunning iteration 781/1500... Est. remaining: 6m 22sRunning iteration 791/1500... Est. remaining: 6m 17sRunning iteration 801/1500... Est. remaining: 6m 11sbest_combination: {'lookbacks': [135, 157, 188], 'score': np.float64(0.9939713727603505), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 6sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 55sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 44sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 33sRunning iteration 881/1500... Est. remaining: 5m 27sRunning iteration 891/1500... Est. remaining: 5m 22sRunning iteration 901/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [135, 157, 188], 'score': np.float64(0.9939713727603505), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 11sRunning iteration 921/1500... Est. remaining: 5m 6sRunning iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 55sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 44sRunning iteration 971/1500... Est. remaining: 4m 39sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [135, 157, 188], 'score': np.float64(0.9939713727603505), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [135, 157, 188], 'score': np.float64(0.9939713727603505), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [135, 157, 188], 'score': np.float64(0.9939713727603505), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [135, 157, 188], 'score': np.float64(0.9939713727603505), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,552,461,869
Annual Return: 49.60%
Sharpe Ratio: 1.61770
Sortino Ratio: 1.583
Max Drawdown: -56.0%
Avg Drawdown: -11.4%
Normalized Score: 1.056
Lookback periods: [136, 157, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [136, 157, 188], 'score': np.float64(1.0558067068412826), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.06
best_combination: {'lookbacks': [136, 157, 188], 'score': np.float64(1.0558067068412826), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 157, 188] (score: 1.0558)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 157, 188] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 117 selections (28.1%)
2. naz100_hma: 115 selections (27.6%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,552,461,868.55
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Sun Aug 24 23:00:57 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $801,662,553
Annual Return: 38.51%
Sharpe Ratio: 1.30846
Sortino Ratio: 1.241
Max Drawdown: -62.7%
Avg Drawdown: -14.0%
Normalized Score: -1.517
Lookback periods: [91, 150, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,038,708,506
Annual Return: 45.13%
Sharpe Ratio: 1.51704
Sortino Ratio: 1.468
Max Drawdown: -58.3%
Avg Drawdown: -11.6%
Normalized Score: 0.214
Lookback periods: [119, 139, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 36sRunning iteration 21/1500... Est. remaining: 18m 27sRunning iteration 31/1500... Est. remaining: 16m 28sRunning iteration 41/1500... Est. remaining: 15m 21sRunning iteration 51/1500... Est. remaining: 14m 39sRunning iteration 61/1500... Est. remaining: 14m 9sRunning iteration 71/1500... Est. remaining: 13m 47sRunning iteration 81/1500... Est. remaining: 13m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,013,963,327
Annual Return: 48.03%
Sharpe Ratio: 1.55499
Sortino Ratio: 1.507
Max Drawdown: -61.2%
Avg Drawdown: -11.4%
Normalized Score: 0.533
Lookback periods: [184, 189, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 13m 37sRunning iteration 101/1500... Est. remaining: 13m 21sbest_combination: {'lookbacks': [184, 189, 200], 'score': np.float64(0.5332000112330809), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 8sRunning iteration 121/1500... Est. remaining: 12m 56sRunning iteration 131/1500... Est. remaining: 12m 45sRunning iteration 141/1500... Est. remaining: 12m 35sRunning iteration 151/1500... Est. remaining: 12m 25sRunning iteration 161/1500... Est. remaining: 12m 17sRunning iteration 171/1500... Est. remaining: 12m 10sRunning iteration 181/1500... Est. remaining: 12m 2sRunning iteration 191/1500... Est. remaining: 11m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,614,821,705
Annual Return: 47.81%
Sharpe Ratio: 1.55732
Sortino Ratio: 1.525
Max Drawdown: -60.8%
Avg Drawdown: -11.4%
Normalized Score: 0.554
Lookback periods: [155, 173, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 11m 54sbest_combination: {'lookbacks': [155, 173, 188], 'score': np.float64(0.5540677657023559), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,476,625,800
Annual Return: 40.98%
Sharpe Ratio: 1.47042
Sortino Ratio: 1.393
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 0.893
Lookback periods: [50, 63, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 11m 45sRunning iteration 231/1500... Est. remaining: 11m 38sRunning iteration 241/1500... Est. remaining: 11m 30sRunning iteration 251/1500... Est. remaining: 11m 23sRunning iteration 261/1500... Est. remaining: 11m 16sRunning iteration 271/1500... Est. remaining: 11m 9sRunning iteration 281/1500... Est. remaining: 11m 1sRunning iteration 291/1500... Est. remaining: 10m 54sRunning iteration 301/1500... Est. remaining: 10m 48sbest_combination: {'lookbacks': [50, 63, 102], 'score': np.float64(0.8928728912367825), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 41sRunning iteration 321/1500... Est. remaining: 10m 34sRunning iteration 331/1500... Est. remaining: 10m 28sRunning iteration 341/1500... Est. remaining: 10m 21sRunning iteration 351/1500... Est. remaining: 10m 15sRunning iteration 361/1500... Est. remaining: 10m 8sRunning iteration 371/1500... Est. remaining: 10m 2sRunning iteration 381/1500... Est. remaining: 9m 56sRunning iteration 391/1500... Est. remaining: 9m 50sRunning iteration 401/1500... Est. remaining: 9m 44sbest_combination: {'lookbacks': [50, 63, 102], 'score': np.float64(0.8928728912367825), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 38sRunning iteration 421/1500... Est. remaining: 9m 32sRunning iteration 431/1500... Est. remaining: 9m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,315,445,915
Annual Return: 42.82%
Sharpe Ratio: 1.55820
Sortino Ratio: 1.459
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.294
Lookback periods: [50, 57, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 23sRunning iteration 451/1500... Est. remaining: 9m 17sRunning iteration 461/1500... Est. remaining: 9m 11sRunning iteration 471/1500... Est. remaining: 9m 5sRunning iteration 481/1500... Est. remaining: 8m 59sRunning iteration 491/1500... Est. remaining: 8m 54sRunning iteration 501/1500... Est. remaining: 8m 48sbest_combination: {'lookbacks': [50, 57, 97], 'score': np.float64(1.2935971092926486), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,109,906,920
Annual Return: 44.04%
Sharpe Ratio: 1.57266
Sortino Ratio: 1.479
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.295
Lookback periods: [50, 53, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 38sRunning iteration 531/1500... Est. remaining: 8m 33sRunning iteration 541/1500... Est. remaining: 8m 27sRunning iteration 551/1500... Est. remaining: 8m 22sRunning iteration 561/1500... Est. remaining: 8m 16sRunning iteration 571/1500... Est. remaining: 8m 11sRunning iteration 581/1500... Est. remaining: 8m 5sRunning iteration 591/1500... Est. remaining: 7m 59sRunning iteration 601/1500... Est. remaining: 7m 54sbest_combination: {'lookbacks': [50, 53, 89], 'score': np.float64(1.2954506797019558), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 48sRunning iteration 621/1500... Est. remaining: 7m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,582,693,160
Annual Return: 44.63%
Sharpe Ratio: 1.59347
Sortino Ratio: 1.511
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.521
Lookback periods: [50, 53, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 7m 39sRunning iteration 641/1500... Est. remaining: 7m 34sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 22sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 11sRunning iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 0sbest_combination: {'lookbacks': [50, 53, 96], 'score': np.float64(1.520536717351255), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,005,011
Annual Return: 43.90%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.535
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 6m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.747
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 6m 46sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 35sRunning iteration 761/1500... Est. remaining: 6m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,673,528,425
Annual Return: 46.56%
Sharpe Ratio: 1.66674
Sortino Ratio: 1.588
Max Drawdown: -36.6%
Avg Drawdown: -8.1%
Normalized Score: 1.961
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 20sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 4sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 53sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 1.96
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 95] (score: 1.9606)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 103 selections (24.8%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,673,528,425.50
Average Annualized Gain: 46.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Sun Aug 24 23:14:00 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $360,510,369
Annual Return: 35.36%
Sharpe Ratio: 1.19751
Sortino Ratio: 1.125
Max Drawdown: -71.1%
Avg Drawdown: -14.9%
Normalized Score: -2.533
Lookback periods: [96, 143, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,287,581,954
Annual Return: 40.42%
Sharpe Ratio: 1.41161
Sortino Ratio: 1.323
Max Drawdown: -52.3%
Avg Drawdown: -11.1%
Normalized Score: -0.297
Lookback periods: [54, 96, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 26m 14sRunning iteration 21/1500... Est. remaining: 19m 20sRunning iteration 31/1500... Est. remaining: 16m 54sRunning iteration 41/1500... Est. remaining: 15m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,625,843,193
Annual Return: 43.34%
Sharpe Ratio: 1.45559
Sortino Ratio: 1.405
Max Drawdown: -59.3%
Avg Drawdown: -12.4%
Normalized Score: -0.282
Lookback periods: [108, 132, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 15m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,252,500,144
Annual Return: 45.35%
Sharpe Ratio: 1.48017
Sortino Ratio: 1.441
Max Drawdown: -63.3%
Avg Drawdown: -12.4%
Normalized Score: -0.130
Lookback periods: [147, 183, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 15m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,574,225,437
Annual Return: 45.65%
Sharpe Ratio: 1.50822
Sortino Ratio: 1.465
Max Drawdown: -55.0%
Avg Drawdown: -12.3%
Normalized Score: 0.256
Lookback periods: [128, 137, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,316,282,837
Annual Return: 46.28%
Sharpe Ratio: 1.52392
Sortino Ratio: 1.475
Max Drawdown: -56.8%
Avg Drawdown: -11.9%
Normalized Score: 0.361
Lookback periods: [139, 157, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 46sRunning iteration 81/1500... Est. remaining: 15m 17sRunning iteration 91/1500... Est. remaining: 14m 50sRunning iteration 101/1500... Est. remaining: 14m 27sbest_combination: {'lookbacks': [139, 157, 187], 'score': np.float64(0.36104305219925337), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 7sRunning iteration 121/1500... Est. remaining: 13m 50sRunning iteration 131/1500... Est. remaining: 13m 34sRunning iteration 141/1500... Est. remaining: 13m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,313,476,873
Annual Return: 48.18%
Sharpe Ratio: 1.56253
Sortino Ratio: 1.529
Max Drawdown: -62.5%
Avg Drawdown: -11.9%
Normalized Score: 0.480
Lookback periods: [149, 155, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 13m 18sRunning iteration 161/1500... Est. remaining: 13m 6sRunning iteration 171/1500... Est. remaining: 12m 54sRunning iteration 181/1500... Est. remaining: 12m 42sRunning iteration 191/1500... Est. remaining: 12m 33sRunning iteration 201/1500... Est. remaining: 12m 22sbest_combination: {'lookbacks': [149, 155, 157], 'score': np.float64(0.4796711073600097), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 13sRunning iteration 221/1500... Est. remaining: 12m 4sRunning iteration 231/1500... Est. remaining: 11m 55sRunning iteration 241/1500... Est. remaining: 11m 47sRunning iteration 251/1500... Est. remaining: 11m 39sRunning iteration 261/1500... Est. remaining: 11m 31sRunning iteration 271/1500... Est. remaining: 11m 24sRunning iteration 281/1500... Est. remaining: 11m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,124,873,640
Annual Return: 42.47%
Sharpe Ratio: 1.53883
Sortino Ratio: 1.440
Max Drawdown: -37.8%
Avg Drawdown: -9.5%
Normalized Score: 0.940
Lookback periods: [51, 55, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 291/1500... Est. remaining: 11m 14sRunning iteration 301/1500... Est. remaining: 11m 6sbest_combination: {'lookbacks': [51, 55, 95], 'score': np.float64(0.9400418214951879), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 59sRunning iteration 321/1500... Est. remaining: 10m 52sRunning iteration 331/1500... Est. remaining: 10m 46sRunning iteration 341/1500... Est. remaining: 10m 39sRunning iteration 351/1500... Est. remaining: 10m 32sRunning iteration 361/1500... Est. remaining: 10m 26sRunning iteration 371/1500... Est. remaining: 10m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,321,701,392
Annual Return: 42.83%
Sharpe Ratio: 1.54940
Sortino Ratio: 1.449
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.163
Lookback periods: [50, 54, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 10m 17sRunning iteration 391/1500... Est. remaining: 10m 11sRunning iteration 401/1500... Est. remaining: 10m 5sbest_combination: {'lookbacks': [50, 54, 94], 'score': np.float64(1.16329307225122), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 0sRunning iteration 421/1500... Est. remaining: 9m 54sRunning iteration 431/1500... Est. remaining: 9m 48sRunning iteration 441/1500... Est. remaining: 9m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,315,445,915
Annual Return: 42.82%
Sharpe Ratio: 1.55820
Sortino Ratio: 1.459
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.294
Lookback periods: [50, 57, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 38sRunning iteration 461/1500... Est. remaining: 9m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,916,377,953
Annual Return: 45.00%
Sharpe Ratio: 1.61386
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.628
Lookback periods: [50, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 9m 28sRunning iteration 481/1500... Est. remaining: 9m 21sRunning iteration 491/1500... Est. remaining: 9m 15sRunning iteration 501/1500... Est. remaining: 9m 8sbest_combination: {'lookbacks': [50, 54, 95], 'score': np.float64(1.6281486266472367), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 2sRunning iteration 521/1500... Est. remaining: 8m 56sRunning iteration 531/1500... Est. remaining: 8m 50sRunning iteration 541/1500... Est. remaining: 8m 44sRunning iteration 551/1500... Est. remaining: 8m 38sRunning iteration 561/1500... Est. remaining: 8m 32sRunning iteration 571/1500... Est. remaining: 8m 26sRunning iteration 581/1500... Est. remaining: 8m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.670
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 8m 16sRunning iteration 601/1500... Est. remaining: 8m 10sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.6699565789556323), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 4sRunning iteration 621/1500... Est. remaining: 7m 58sRunning iteration 631/1500... Est. remaining: 7m 52sRunning iteration 641/1500... Est. remaining: 7m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 7m 42sRunning iteration 661/1500... Est. remaining: 7m 36sRunning iteration 671/1500... Est. remaining: 7m 30sRunning iteration 681/1500... Est. remaining: 7m 24sRunning iteration 691/1500... Est. remaining: 7m 18sRunning iteration 701/1500... Est. remaining: 7m 13sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 7sRunning iteration 721/1500... Est. remaining: 7m 1sRunning iteration 731/1500... Est. remaining: 6m 55sRunning iteration 741/1500... Est. remaining: 6m 50sRunning iteration 751/1500... Est. remaining: 6m 44sRunning iteration 761/1500... Est. remaining: 6m 39sRunning iteration 771/1500... Est. remaining: 6m 33sRunning iteration 781/1500... Est. remaining: 6m 28sRunning iteration 791/1500... Est. remaining: 6m 22sRunning iteration 801/1500... Est. remaining: 6m 17sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 11sRunning iteration 821/1500... Est. remaining: 6m 5sRunning iteration 831/1500... Est. remaining: 6m 0sRunning iteration 841/1500... Est. remaining: 5m 55sRunning iteration 851/1500... Est. remaining: 5m 49sRunning iteration 861/1500... Est. remaining: 5m 44sRunning iteration 871/1500... Est. remaining: 5m 38sRunning iteration 881/1500... Est. remaining: 5m 33sRunning iteration 891/1500... Est. remaining: 5m 27sRunning iteration 901/1500... Est. remaining: 5m 22sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 16sRunning iteration 921/1500... Est. remaining: 5m 11sRunning iteration 931/1500... Est. remaining: 5m 5sRunning iteration 941/1500... Est. remaining: 5m 0sRunning iteration 951/1500... Est. remaining: 4m 54sRunning iteration 961/1500... Est. remaining: 4m 49sRunning iteration 971/1500... Est. remaining: 4m 43sRunning iteration 981/1500... Est. remaining: 4m 38sRunning iteration 991/1500... Est. remaining: 4m 32sRunning iteration 1001/1500... Est. remaining: 4m 27sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 21sRunning iteration 1021/1500... Est. remaining: 4m 16sRunning iteration 1031/1500... Est. remaining: 4m 10sRunning iteration 1041/1500... Est. remaining: 4m 5sRunning iteration 1051/1500... Est. remaining: 4m 0sRunning iteration 1061/1500... Est. remaining: 3m 54sRunning iteration 1071/1500... Est. remaining: 3m 49sRunning iteration 1081/1500... Est. remaining: 3m 43sRunning iteration 1091/1500... Est. remaining: 3m 38sRunning iteration 1101/1500... Est. remaining: 3m 33sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 27sRunning iteration 1121/1500... Est. remaining: 3m 22sRunning iteration 1131/1500... Est. remaining: 3m 16sRunning iteration 1141/1500... Est. remaining: 3m 11sRunning iteration 1151/1500... Est. remaining: 3m 5sRunning iteration 1161/1500... Est. remaining: 3m 0sRunning iteration 1171/1500... Est. remaining: 2m 55sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 44sRunning iteration 1201/1500... Est. remaining: 2m 39sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 33sRunning iteration 1221/1500... Est. remaining: 2m 28sRunning iteration 1231/1500... Est. remaining: 2m 23sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.94
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9365)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Sun Aug 24 23:27:15 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $189,963,325
Annual Return: 32.88%
Sharpe Ratio: 1.16953
Sortino Ratio: 1.078
Max Drawdown: -60.5%
Avg Drawdown: -13.0%
Normalized Score: -2.238
Lookback periods: [51, 93, 122] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,019,453,958
Annual Return: 42.26%
Sharpe Ratio: 1.38497
Sortino Ratio: 1.340
Max Drawdown: -59.7%
Avg Drawdown: -13.7%
Normalized Score: -0.768
Lookback periods: [150, 150, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,829,973,762
Annual Return: 43.65%
Sharpe Ratio: 1.44028
Sortino Ratio: 1.398
Max Drawdown: -67.4%
Avg Drawdown: -12.8%
Normalized Score: -0.597
Lookback periods: [126, 129, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,401,483,583
Annual Return: 40.76%
Sharpe Ratio: 1.38179
Sortino Ratio: 1.317
Max Drawdown: -52.3%
Avg Drawdown: -11.8%
Normalized Score: -0.409
Lookback periods: [88, 100, 129] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 32m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,427,673,621
Annual Return: 43.01%
Sharpe Ratio: 1.54336
Sortino Ratio: 1.447
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.184
Lookback periods: [50, 54, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 18sRunning iteration 31/1500... Est. remaining: 19m 30sRunning iteration 41/1500... Est. remaining: 17m 35sRunning iteration 51/1500... Est. remaining: 16m 24sRunning iteration 61/1500... Est. remaining: 15m 35sRunning iteration 71/1500... Est. remaining: 14m 59sRunning iteration 81/1500... Est. remaining: 14m 30sRunning iteration 91/1500... Est. remaining: 14m 7sRunning iteration 101/1500... Est. remaining: 13m 49sbest_combination: {'lookbacks': [50, 54, 97], 'score': np.float64(1.1839663598133974), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 32sRunning iteration 121/1500... Est. remaining: 13m 18sRunning iteration 131/1500... Est. remaining: 13m 5sRunning iteration 141/1500... Est. remaining: 12m 53sRunning iteration 151/1500... Est. remaining: 12m 43sRunning iteration 161/1500... Est. remaining: 12m 32sRunning iteration 171/1500... Est. remaining: 12m 22sRunning iteration 181/1500... Est. remaining: 12m 13sRunning iteration 191/1500... Est. remaining: 12m 3sRunning iteration 201/1500... Est. remaining: 11m 56sbest_combination: {'lookbacks': [50, 54, 97], 'score': np.float64(1.1839663598133974), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 48sRunning iteration 221/1500... Est. remaining: 11m 40sRunning iteration 231/1500... Est. remaining: 11m 32sRunning iteration 241/1500... Est. remaining: 11m 25sRunning iteration 251/1500... Est. remaining: 11m 18sRunning iteration 261/1500... Est. remaining: 11m 11sRunning iteration 271/1500... Est. remaining: 11m 5sRunning iteration 281/1500... Est. remaining: 10m 58sRunning iteration 291/1500... Est. remaining: 10m 51sRunning iteration 301/1500... Est. remaining: 10m 45sbest_combination: {'lookbacks': [50, 54, 97], 'score': np.float64(1.1839663598133974), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 39sRunning iteration 321/1500... Est. remaining: 10m 32sRunning iteration 331/1500... Est. remaining: 10m 25sRunning iteration 341/1500... Est. remaining: 10m 19sRunning iteration 351/1500... Est. remaining: 10m 13sRunning iteration 361/1500... Est. remaining: 10m 7sRunning iteration 371/1500... Est. remaining: 10m 1sRunning iteration 381/1500... Est. remaining: 9m 55sRunning iteration 391/1500... Est. remaining: 9m 49sRunning iteration 401/1500... Est. remaining: 9m 43sbest_combination: {'lookbacks': [50, 54, 97], 'score': np.float64(1.1839663598133974), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 37sRunning iteration 421/1500... Est. remaining: 9m 31sRunning iteration 431/1500... Est. remaining: 9m 25sRunning iteration 441/1500... Est. remaining: 9m 19sRunning iteration 451/1500... Est. remaining: 9m 13sRunning iteration 461/1500... Est. remaining: 9m 8sRunning iteration 471/1500... Est. remaining: 9m 2sRunning iteration 481/1500... Est. remaining: 8m 57sRunning iteration 491/1500... Est. remaining: 8m 51sRunning iteration 501/1500... Est. remaining: 8m 45sbest_combination: {'lookbacks': [50, 54, 97], 'score': np.float64(1.1839663598133974), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 39sRunning iteration 521/1500... Est. remaining: 8m 34sRunning iteration 531/1500... Est. remaining: 8m 28sRunning iteration 541/1500... Est. remaining: 8m 22sRunning iteration 551/1500... Est. remaining: 8m 17sRunning iteration 561/1500... Est. remaining: 8m 12sRunning iteration 571/1500... Est. remaining: 8m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,553,756,918
Annual Return: 43.22%
Sharpe Ratio: 1.55111
Sortino Ratio: 1.467
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.295
Lookback periods: [50, 50, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 8m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,675,852,350
Annual Return: 43.42%
Sharpe Ratio: 1.55307
Sortino Ratio: 1.460
Max Drawdown: -34.7%
Avg Drawdown: -8.1%
Normalized Score: 1.403
Lookback periods: [50, 50, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 7m 59sRunning iteration 601/1500... Est. remaining: 7m 54sbest_combination: {'lookbacks': [50, 50, 99], 'score': np.float64(1.403009261300913), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 48sRunning iteration 621/1500... Est. remaining: 7m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,293,289,579
Annual Return: 44.28%
Sharpe Ratio: 1.58522
Sortino Ratio: 1.495
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.466
Lookback periods: [50, 53, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 7m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.546
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 7m 35sRunning iteration 651/1500... Est. remaining: 7m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.747
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 25sRunning iteration 671/1500... Est. remaining: 7m 20sRunning iteration 681/1500... Est. remaining: 7m 14sRunning iteration 691/1500... Est. remaining: 7m 9sRunning iteration 701/1500... Est. remaining: 7m 3sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 57sRunning iteration 721/1500... Est. remaining: 6m 52sRunning iteration 731/1500... Est. remaining: 6m 46sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 35sRunning iteration 761/1500... Est. remaining: 6m 29sRunning iteration 771/1500... Est. remaining: 6m 24sRunning iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 13sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 41sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 30sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 47sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 31sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 3m 59sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 22sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 1.94
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9365)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Sun Aug 24 23:40:17 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $176,149,431
Annual Return: 32.59%
Sharpe Ratio: 1.12733
Sortino Ratio: 1.035
Max Drawdown: -62.2%
Avg Drawdown: -14.2%
Normalized Score: -2.618
Lookback periods: [73, 83, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $536,301,595
Annual Return: 36.92%
Sharpe Ratio: 1.26334
Sortino Ratio: 1.175
Max Drawdown: -62.2%
Avg Drawdown: -14.1%
Normalized Score: -1.818
Lookback periods: [70, 73, 103] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,605,490,548
Annual Return: 43.31%
Sharpe Ratio: 1.44275
Sortino Ratio: 1.389
Max Drawdown: -61.6%
Avg Drawdown: -13.2%
Normalized Score: -0.520
Lookback periods: [123, 143, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 2sRunning iteration 21/1500... Est. remaining: 20m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,574,899,614
Annual Return: 45.65%
Sharpe Ratio: 1.51706
Sortino Ratio: 1.463
Max Drawdown: -56.4%
Avg Drawdown: -11.9%
Normalized Score: 0.281
Lookback periods: [129, 148, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 1sRunning iteration 41/1500... Est. remaining: 17m 14sRunning iteration 51/1500... Est. remaining: 16m 4sRunning iteration 61/1500... Est. remaining: 15m 19sRunning iteration 71/1500... Est. remaining: 14m 48sRunning iteration 81/1500... Est. remaining: 14m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,343,429,170
Annual Return: 40.59%
Sharpe Ratio: 1.46156
Sortino Ratio: 1.363
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.683
Lookback periods: [50, 55, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 23sRunning iteration 101/1500... Est. remaining: 14m 7sbest_combination: {'lookbacks': [50, 55, 101], 'score': np.float64(0.6831726503094604), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 50sRunning iteration 121/1500... Est. remaining: 13m 36sRunning iteration 131/1500... Est. remaining: 13m 20sRunning iteration 141/1500... Est. remaining: 13m 7sRunning iteration 151/1500... Est. remaining: 12m 54sRunning iteration 161/1500... Est. remaining: 12m 43sRunning iteration 171/1500... Est. remaining: 12m 32sRunning iteration 181/1500... Est. remaining: 12m 22sRunning iteration 191/1500... Est. remaining: 12m 13sRunning iteration 201/1500... Est. remaining: 12m 3sbest_combination: {'lookbacks': [50, 55, 101], 'score': np.float64(0.6831726503094604), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 55sRunning iteration 221/1500... Est. remaining: 11m 47sRunning iteration 231/1500... Est. remaining: 11m 39sRunning iteration 241/1500... Est. remaining: 11m 32sRunning iteration 251/1500... Est. remaining: 11m 25sRunning iteration 261/1500... Est. remaining: 11m 18sRunning iteration 271/1500... Est. remaining: 11m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,293,891,131
Annual Return: 48.17%
Sharpe Ratio: 1.56077
Sortino Ratio: 1.521
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.690
Lookback periods: [178, 190, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/1500... Est. remaining: 11m 10sRunning iteration 291/1500... Est. remaining: 11m 3sRunning iteration 301/1500... Est. remaining: 10m 57sbest_combination: {'lookbacks': [178, 190, 194], 'score': np.float64(0.6898487756003706), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 50sRunning iteration 321/1500... Est. remaining: 10m 44sRunning iteration 331/1500... Est. remaining: 10m 37sRunning iteration 341/1500... Est. remaining: 10m 31sRunning iteration 351/1500... Est. remaining: 10m 25sRunning iteration 361/1500... Est. remaining: 10m 19sRunning iteration 371/1500... Est. remaining: 10m 13sRunning iteration 381/1500... Est. remaining: 10m 7sRunning iteration 391/1500... Est. remaining: 10m 1sRunning iteration 401/1500... Est. remaining: 9m 55sbest_combination: {'lookbacks': [178, 190, 194], 'score': np.float64(0.6898487756003706), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 50sRunning iteration 421/1500... Est. remaining: 9m 43sRunning iteration 431/1500... Est. remaining: 9m 37sRunning iteration 441/1500... Est. remaining: 9m 31sRunning iteration 451/1500... Est. remaining: 9m 26sRunning iteration 461/1500... Est. remaining: 9m 20sRunning iteration 471/1500... Est. remaining: 9m 14sRunning iteration 481/1500... Est. remaining: 9m 8sRunning iteration 491/1500... Est. remaining: 9m 2sRunning iteration 501/1500... Est. remaining: 8m 57sbest_combination: {'lookbacks': [178, 190, 194], 'score': np.float64(0.6898487756003706), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 51sRunning iteration 521/1500... Est. remaining: 8m 45sRunning iteration 531/1500... Est. remaining: 8m 39sRunning iteration 541/1500... Est. remaining: 8m 34sRunning iteration 551/1500... Est. remaining: 8m 28sRunning iteration 561/1500... Est. remaining: 8m 22sRunning iteration 571/1500... Est. remaining: 8m 17sRunning iteration 581/1500... Est. remaining: 8m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,359,364,955
Annual Return: 47.66%
Sharpe Ratio: 1.57159
Sortino Ratio: 1.532
Max Drawdown: -55.0%
Avg Drawdown: -11.7%
Normalized Score: 0.715
Lookback periods: [128, 130, 135] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 8m 9sRunning iteration 601/1500... Est. remaining: 8m 3sbest_combination: {'lookbacks': [128, 130, 135], 'score': np.float64(0.7150726380632835), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 57sRunning iteration 621/1500... Est. remaining: 7m 52sRunning iteration 631/1500... Est. remaining: 7m 47sRunning iteration 641/1500... Est. remaining: 7m 41sRunning iteration 651/1500... Est. remaining: 7m 35sRunning iteration 661/1500... Est. remaining: 7m 30sRunning iteration 671/1500... Est. remaining: 7m 25sRunning iteration 681/1500... Est. remaining: 7m 19sRunning iteration 691/1500... Est. remaining: 7m 14sRunning iteration 701/1500... Est. remaining: 7m 8sbest_combination: {'lookbacks': [128, 130, 135], 'score': np.float64(0.7150726380632835), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 3sRunning iteration 721/1500... Est. remaining: 6m 57sRunning iteration 731/1500... Est. remaining: 6m 52sRunning iteration 741/1500... Est. remaining: 6m 47sRunning iteration 751/1500... Est. remaining: 6m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,291,497,809
Annual Return: 48.66%
Sharpe Ratio: 1.59117
Sortino Ratio: 1.553
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: 0.852
Lookback periods: [129, 130, 137] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 6m 37sRunning iteration 771/1500... Est. remaining: 6m 31sRunning iteration 781/1500... Est. remaining: 6m 26sRunning iteration 791/1500... Est. remaining: 6m 21sRunning iteration 801/1500... Est. remaining: 6m 15sbest_combination: {'lookbacks': [129, 130, 137], 'score': np.float64(0.8524417128920432), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 10sRunning iteration 821/1500... Est. remaining: 6m 4sRunning iteration 831/1500... Est. remaining: 5m 58sRunning iteration 841/1500... Est. remaining: 5m 53sRunning iteration 851/1500... Est. remaining: 5m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,867,339,802
Annual Return: 48.92%
Sharpe Ratio: 1.59885
Sortino Ratio: 1.563
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: 0.897
Lookback periods: [129, 130, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 5m 43sRunning iteration 871/1500... Est. remaining: 5m 37sRunning iteration 881/1500... Est. remaining: 5m 32sRunning iteration 891/1500... Est. remaining: 5m 26sRunning iteration 901/1500... Est. remaining: 5m 21sbest_combination: {'lookbacks': [129, 130, 136], 'score': np.float64(0.897286397538388), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 15sRunning iteration 921/1500... Est. remaining: 5m 10sRunning iteration 931/1500... Est. remaining: 5m 4sRunning iteration 941/1500... Est. remaining: 4m 59sRunning iteration 951/1500... Est. remaining: 4m 53sRunning iteration 961/1500... Est. remaining: 4m 48sRunning iteration 971/1500... Est. remaining: 4m 42sRunning iteration 981/1500... Est. remaining: 4m 37sRunning iteration 991/1500... Est. remaining: 4m 31sRunning iteration 1001/1500... Est. remaining: 4m 26sbest_combination: {'lookbacks': [129, 130, 136], 'score': np.float64(0.897286397538388), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 20sRunning iteration 1021/1500... Est. remaining: 4m 15sRunning iteration 1031/1500... Est. remaining: 4m 10sRunning iteration 1041/1500... Est. remaining: 4m 4sRunning iteration 1051/1500... Est. remaining: 3m 59sRunning iteration 1061/1500... Est. remaining: 3m 53sRunning iteration 1071/1500... Est. remaining: 3m 48sRunning iteration 1081/1500... Est. remaining: 3m 43sRunning iteration 1091/1500... Est. remaining: 3m 37sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [129, 130, 136], 'score': np.float64(0.897286397538388), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 26sRunning iteration 1121/1500... Est. remaining: 3m 21sRunning iteration 1131/1500... Est. remaining: 3m 16sRunning iteration 1141/1500... Est. remaining: 3m 10sRunning iteration 1151/1500... Est. remaining: 3m 5sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 54sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [129, 130, 136], 'score': np.float64(0.897286397538388), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 33sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [129, 130, 136], 'score': np.float64(0.897286397538388), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $13,914,882,020
Annual Return: 50.40%
Sharpe Ratio: 1.64017
Sortino Ratio: 1.615
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: 1.170
Lookback periods: [128, 129, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [128, 129, 130], 'score': np.float64(1.1702028794071377), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.17
best_combination: {'lookbacks': [128, 129, 130], 'score': np.float64(1.1702028794071377), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [128, 129, 130] (score: 1.1702)

Monte Carlo simulation completed in 13.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [128, 129, 130] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 105 selections (25.2%)
3. naz100_pi: 88 selections (21.2%)
4. naz100_pine: 79 selections (19.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $13,914,882,020.20
Average Annualized Gain: 50.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Sun Aug 24 23:53:33 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $333,670,050
Annual Return: 35.05%
Sharpe Ratio: 1.23250
Sortino Ratio: 1.152
Max Drawdown: -52.3%
Avg Drawdown: -12.4%
Normalized Score: -1.480
Lookback periods: [62, 92, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,422,974,711
Annual Return: 40.83%
Sharpe Ratio: 1.41570
Sortino Ratio: 1.337
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: -0.360
Lookback periods: [91, 92, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,455,638,041
Annual Return: 44.48%
Sharpe Ratio: 1.45423
Sortino Ratio: 1.416
Max Drawdown: -61.4%
Avg Drawdown: -12.4%
Normalized Score: -0.208
Lookback periods: [139, 176, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,648,659,098
Annual Return: 45.72%
Sharpe Ratio: 1.50375
Sortino Ratio: 1.463
Max Drawdown: -57.2%
Avg Drawdown: -12.3%
Normalized Score: 0.187
Lookback periods: [136, 147, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 13sRunning iteration 31/1500... Est. remaining: 18m 44sRunning iteration 41/1500... Est. remaining: 16m 55sRunning iteration 51/1500... Est. remaining: 15m 52sRunning iteration 61/1500... Est. remaining: 15m 9sRunning iteration 71/1500... Est. remaining: 14m 39sRunning iteration 81/1500... Est. remaining: 14m 14sRunning iteration 91/1500... Est. remaining: 13m 54sRunning iteration 101/1500... Est. remaining: 13m 39sbest_combination: {'lookbacks': [136, 147, 154], 'score': np.float64(0.18661441532531847), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,213,329,308
Annual Return: 40.18%
Sharpe Ratio: 1.44904
Sortino Ratio: 1.352
Max Drawdown: -37.0%
Avg Drawdown: -10.1%
Normalized Score: 0.423
Lookback periods: [51, 56, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 13m 40sRunning iteration 121/1500... Est. remaining: 13m 26sRunning iteration 131/1500... Est. remaining: 13m 13sRunning iteration 141/1500... Est. remaining: 13m 0sRunning iteration 151/1500... Est. remaining: 12m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,965,063,700
Annual Return: 42.14%
Sharpe Ratio: 1.51583
Sortino Ratio: 1.427
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.134
Lookback periods: [50, 62, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 12m 51sRunning iteration 171/1500... Est. remaining: 12m 42sRunning iteration 181/1500... Est. remaining: 12m 32sRunning iteration 191/1500... Est. remaining: 12m 22sRunning iteration 201/1500... Est. remaining: 12m 12sbest_combination: {'lookbacks': [50, 62, 99], 'score': np.float64(1.1337859690661596), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 4sRunning iteration 221/1500... Est. remaining: 11m 57sRunning iteration 231/1500... Est. remaining: 11m 48sRunning iteration 241/1500... Est. remaining: 11m 40sRunning iteration 251/1500... Est. remaining: 11m 33sRunning iteration 261/1500... Est. remaining: 11m 25sRunning iteration 271/1500... Est. remaining: 11m 18sRunning iteration 281/1500... Est. remaining: 11m 11sRunning iteration 291/1500... Est. remaining: 11m 3sRunning iteration 301/1500... Est. remaining: 10m 57sbest_combination: {'lookbacks': [50, 62, 99], 'score': np.float64(1.1337859690661596), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 50sRunning iteration 321/1500... Est. remaining: 10m 43sRunning iteration 331/1500... Est. remaining: 10m 36sRunning iteration 341/1500... Est. remaining: 10m 30sRunning iteration 351/1500... Est. remaining: 10m 23sRunning iteration 361/1500... Est. remaining: 10m 17sRunning iteration 371/1500... Est. remaining: 10m 10sRunning iteration 381/1500... Est. remaining: 10m 4sRunning iteration 391/1500... Est. remaining: 9m 58sRunning iteration 401/1500... Est. remaining: 9m 52sbest_combination: {'lookbacks': [50, 62, 99], 'score': np.float64(1.1337859690661596), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 46sRunning iteration 421/1500... Est. remaining: 9m 39sRunning iteration 431/1500... Est. remaining: 9m 34sRunning iteration 441/1500... Est. remaining: 9m 27sRunning iteration 451/1500... Est. remaining: 9m 22sRunning iteration 461/1500... Est. remaining: 9m 16sRunning iteration 471/1500... Est. remaining: 9m 10sRunning iteration 481/1500... Est. remaining: 9m 4sRunning iteration 491/1500... Est. remaining: 8m 58sRunning iteration 501/1500... Est. remaining: 8m 52sbest_combination: {'lookbacks': [50, 62, 99], 'score': np.float64(1.1337859690661596), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 47sRunning iteration 521/1500... Est. remaining: 8m 41sRunning iteration 531/1500... Est. remaining: 8m 35sRunning iteration 541/1500... Est. remaining: 8m 30sRunning iteration 551/1500... Est. remaining: 8m 24sRunning iteration 561/1500... Est. remaining: 8m 19sRunning iteration 571/1500... Est. remaining: 8m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,891,279,993
Annual Return: 41.99%
Sharpe Ratio: 1.51964
Sortino Ratio: 1.431
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.150
Lookback periods: [50, 62, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 8m 10sRunning iteration 591/1500... Est. remaining: 8m 4sRunning iteration 601/1500... Est. remaining: 7m 58sbest_combination: {'lookbacks': [50, 62, 98], 'score': np.float64(1.1500632950200096), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 52sRunning iteration 621/1500... Est. remaining: 7m 47sRunning iteration 631/1500... Est. remaining: 7m 41sRunning iteration 641/1500... Est. remaining: 7m 35sRunning iteration 651/1500... Est. remaining: 7m 30sRunning iteration 661/1500... Est. remaining: 7m 24sRunning iteration 671/1500... Est. remaining: 7m 19sRunning iteration 681/1500... Est. remaining: 7m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,819,321,576
Annual Return: 41.83%
Sharpe Ratio: 1.54653
Sortino Ratio: 1.440
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.194
Lookback periods: [50, 58, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 7m 10sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [50, 58, 98], 'score': np.float64(1.1937860329053027), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 59sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 48sRunning iteration 741/1500... Est. remaining: 6m 43sRunning iteration 751/1500... Est. remaining: 6m 37sRunning iteration 761/1500... Est. remaining: 6m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,237,925,818
Annual Return: 44.21%
Sharpe Ratio: 1.56725
Sortino Ratio: 1.490
Max Drawdown: -34.9%
Avg Drawdown: -8.9%
Normalized Score: 1.407
Lookback periods: [52, 53, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 771/1500... Est. remaining: 6m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.716
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 781/1500... Est. remaining: 6m 23sRunning iteration 791/1500... Est. remaining: 6m 17sRunning iteration 801/1500... Est. remaining: 6m 12sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.716229926850809), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 6sRunning iteration 821/1500... Est. remaining: 6m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,673,528,425
Annual Return: 46.56%
Sharpe Ratio: 1.66674
Sortino Ratio: 1.588
Max Drawdown: -36.6%
Avg Drawdown: -8.1%
Normalized Score: 1.961
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 831/1500... Est. remaining: 5m 56sRunning iteration 841/1500... Est. remaining: 5m 50sRunning iteration 851/1500... Est. remaining: 5m 45sRunning iteration 861/1500... Est. remaining: 5m 40sRunning iteration 871/1500... Est. remaining: 5m 34sRunning iteration 881/1500... Est. remaining: 5m 29sRunning iteration 891/1500... Est. remaining: 5m 23sRunning iteration 901/1500... Est. remaining: 5m 18sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 12sRunning iteration 921/1500... Est. remaining: 5m 7sRunning iteration 931/1500... Est. remaining: 5m 2sRunning iteration 941/1500... Est. remaining: 4m 56sRunning iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 45sRunning iteration 971/1500... Est. remaining: 4m 40sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 29sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 3sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 47sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 31sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.96
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 95] (score: 1.9606)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 103 selections (24.8%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,673,528,425.50
Average Annualized Gain: 46.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 00:06:49 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,839,727,419
Annual Return: 44.92%
Sharpe Ratio: 1.46918
Sortino Ratio: 1.423
Max Drawdown: -61.6%
Avg Drawdown: -12.2%
Normalized Score: -0.127
Lookback periods: [149, 168, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,243,064
Annual Return: 45.93%
Sharpe Ratio: 1.51861
Sortino Ratio: 1.476
Max Drawdown: -59.5%
Avg Drawdown: -12.0%
Normalized Score: 0.217
Lookback periods: [134, 146, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 26m 44sRunning iteration 21/1500... Est. remaining: 19m 42sRunning iteration 31/1500... Est. remaining: 17m 11sRunning iteration 41/1500... Est. remaining: 15m 48sRunning iteration 51/1500... Est. remaining: 14m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,128,541,387
Annual Return: 48.58%
Sharpe Ratio: 1.60204
Sortino Ratio: 1.570
Max Drawdown: -63.5%
Avg Drawdown: -11.3%
Normalized Score: 0.672
Lookback periods: [135, 152, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 14m 53sRunning iteration 71/1500... Est. remaining: 14m 25sRunning iteration 81/1500... Est. remaining: 14m 2sRunning iteration 91/1500... Est. remaining: 13m 42sRunning iteration 101/1500... Est. remaining: 13m 26sbest_combination: {'lookbacks': [135, 152, 173], 'score': np.float64(0.67222417672124), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 11sRunning iteration 121/1500... Est. remaining: 12m 59sRunning iteration 131/1500... Est. remaining: 12m 47sRunning iteration 141/1500... Est. remaining: 12m 37sRunning iteration 151/1500... Est. remaining: 12m 28sRunning iteration 161/1500... Est. remaining: 12m 20sRunning iteration 171/1500... Est. remaining: 12m 12sRunning iteration 181/1500... Est. remaining: 12m 3sRunning iteration 191/1500... Est. remaining: 11m 55sRunning iteration 201/1500... Est. remaining: 11m 47sbest_combination: {'lookbacks': [135, 152, 173], 'score': np.float64(0.67222417672124), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 40sRunning iteration 221/1500... Est. remaining: 11m 34sRunning iteration 231/1500... Est. remaining: 11m 27sRunning iteration 241/1500... Est. remaining: 11m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,606,993,329
Annual Return: 48.80%
Sharpe Ratio: 1.58862
Sortino Ratio: 1.551
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 0.879
Lookback periods: [154, 159, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 11m 20sRunning iteration 261/1500... Est. remaining: 11m 13sRunning iteration 271/1500... Est. remaining: 11m 7sRunning iteration 281/1500... Est. remaining: 11m 1sRunning iteration 291/1500... Est. remaining: 10m 54sRunning iteration 301/1500... Est. remaining: 10m 48sbest_combination: {'lookbacks': [154, 159, 178], 'score': np.float64(0.8790477697517514), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 41sRunning iteration 321/1500... Est. remaining: 10m 35sRunning iteration 331/1500... Est. remaining: 10m 29sRunning iteration 341/1500... Est. remaining: 10m 23sRunning iteration 351/1500... Est. remaining: 10m 17sRunning iteration 361/1500... Est. remaining: 10m 11sRunning iteration 371/1500... Est. remaining: 10m 5sRunning iteration 381/1500... Est. remaining: 9m 59sRunning iteration 391/1500... Est. remaining: 9m 53sRunning iteration 401/1500... Est. remaining: 9m 47sbest_combination: {'lookbacks': [154, 159, 178], 'score': np.float64(0.8790477697517514), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 41sRunning iteration 421/1500... Est. remaining: 9m 35sRunning iteration 431/1500... Est. remaining: 9m 30sRunning iteration 441/1500... Est. remaining: 9m 24sRunning iteration 451/1500... Est. remaining: 9m 18sRunning iteration 461/1500... Est. remaining: 9m 12sRunning iteration 471/1500... Est. remaining: 9m 6sRunning iteration 481/1500... Est. remaining: 9m 0sRunning iteration 491/1500... Est. remaining: 8m 54sRunning iteration 501/1500... Est. remaining: 8m 49sbest_combination: {'lookbacks': [154, 159, 178], 'score': np.float64(0.8790477697517514), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 43sRunning iteration 521/1500... Est. remaining: 8m 37sRunning iteration 531/1500... Est. remaining: 8m 32sRunning iteration 541/1500... Est. remaining: 8m 26sRunning iteration 551/1500... Est. remaining: 8m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,108,012,908
Annual Return: 49.02%
Sharpe Ratio: 1.59365
Sortino Ratio: 1.553
Max Drawdown: -59.0%
Avg Drawdown: -10.3%
Normalized Score: 0.994
Lookback periods: [156, 158, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 8m 17sRunning iteration 571/1500... Est. remaining: 8m 12sRunning iteration 581/1500... Est. remaining: 8m 7sRunning iteration 591/1500... Est. remaining: 8m 1sRunning iteration 601/1500... Est. remaining: 7m 55sbest_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(0.994037450502628), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 50sRunning iteration 621/1500... Est. remaining: 7m 45sRunning iteration 631/1500... Est. remaining: 7m 39sRunning iteration 641/1500... Est. remaining: 7m 34sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 23sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 12sRunning iteration 691/1500... Est. remaining: 7m 7sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(0.994037450502628), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 56sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 45sRunning iteration 741/1500... Est. remaining: 6m 40sRunning iteration 751/1500... Est. remaining: 6m 35sRunning iteration 761/1500... Est. remaining: 6m 29sRunning iteration 771/1500... Est. remaining: 6m 24sRunning iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 13sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(0.994037450502628), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(0.994037450502628), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 44sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(0.994037450502628), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(0.994037450502628), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(0.994037450502628), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,106,068,908
Annual Return: 49.80%
Sharpe Ratio: 1.61256
Sortino Ratio: 1.577
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 1.050
Lookback periods: [154, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.2 minutes
Best normalized score: 1.05
best_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [154, 155, 156] (score: 1.0504)

Monte Carlo simulation completed in 13.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 155, 156] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,106,068,907.74
Average Annualized Gain: 49.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 00:20:06 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,773,128,108
Annual Return: 43.56%
Sharpe Ratio: 1.44378
Sortino Ratio: 1.410
Max Drawdown: -65.1%
Avg Drawdown: -12.0%
Normalized Score: -0.399
Lookback periods: [107, 163, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 44sRunning iteration 21/1500... Est. remaining: 18m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,129,031,039
Annual Return: 44.06%
Sharpe Ratio: 1.45860
Sortino Ratio: 1.425
Max Drawdown: -65.0%
Avg Drawdown: -12.5%
Normalized Score: -0.377
Lookback periods: [120, 160, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,168,926,161
Annual Return: 45.26%
Sharpe Ratio: 1.48936
Sortino Ratio: 1.449
Max Drawdown: -64.1%
Avg Drawdown: -12.3%
Normalized Score: -0.123
Lookback periods: [140, 149, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,911,046,829
Annual Return: 47.97%
Sharpe Ratio: 1.56649
Sortino Ratio: 1.529
Max Drawdown: -59.7%
Avg Drawdown: -11.9%
Normalized Score: 0.554
Lookback periods: [146, 155, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 24sRunning iteration 51/1500... Est. remaining: 16m 17sRunning iteration 61/1500... Est. remaining: 15m 30sRunning iteration 71/1500... Est. remaining: 14m 55sRunning iteration 81/1500... Est. remaining: 14m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,761,807,423
Annual Return: 47.30%
Sharpe Ratio: 1.55785
Sortino Ratio: 1.512
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.610
Lookback periods: [132, 157, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 24sRunning iteration 101/1500... Est. remaining: 14m 5sbest_combination: {'lookbacks': [132, 157, 178], 'score': np.float64(0.6104888162747907), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 48sRunning iteration 121/1500... Est. remaining: 13m 32sRunning iteration 131/1500... Est. remaining: 13m 17sRunning iteration 141/1500... Est. remaining: 13m 4sRunning iteration 151/1500... Est. remaining: 12m 52sRunning iteration 161/1500... Est. remaining: 12m 41sRunning iteration 171/1500... Est. remaining: 12m 31sRunning iteration 181/1500... Est. remaining: 12m 21sRunning iteration 191/1500... Est. remaining: 12m 13sRunning iteration 201/1500... Est. remaining: 12m 5sbest_combination: {'lookbacks': [132, 157, 178], 'score': np.float64(0.6104888162747907), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 58sRunning iteration 221/1500... Est. remaining: 11m 50sRunning iteration 231/1500... Est. remaining: 11m 43sRunning iteration 241/1500... Est. remaining: 11m 35sRunning iteration 251/1500... Est. remaining: 11m 27sRunning iteration 261/1500... Est. remaining: 11m 20sRunning iteration 271/1500... Est. remaining: 11m 13sRunning iteration 281/1500... Est. remaining: 11m 7sRunning iteration 291/1500... Est. remaining: 11m 0sRunning iteration 301/1500... Est. remaining: 10m 53sbest_combination: {'lookbacks': [132, 157, 178], 'score': np.float64(0.6104888162747907), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 46sRunning iteration 321/1500... Est. remaining: 10m 40sRunning iteration 331/1500... Est. remaining: 10m 34sRunning iteration 341/1500... Est. remaining: 10m 27sRunning iteration 351/1500... Est. remaining: 10m 21sRunning iteration 361/1500... Est. remaining: 10m 15sRunning iteration 371/1500... Est. remaining: 10m 9sRunning iteration 381/1500... Est. remaining: 10m 2sRunning iteration 391/1500... Est. remaining: 9m 56sRunning iteration 401/1500... Est. remaining: 9m 50sbest_combination: {'lookbacks': [132, 157, 178], 'score': np.float64(0.6104888162747907), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 44sRunning iteration 421/1500... Est. remaining: 9m 38sRunning iteration 431/1500... Est. remaining: 9m 31sRunning iteration 441/1500... Est. remaining: 9m 26sRunning iteration 451/1500... Est. remaining: 9m 20sRunning iteration 461/1500... Est. remaining: 9m 14sRunning iteration 471/1500... Est. remaining: 9m 8sRunning iteration 481/1500... Est. remaining: 9m 2sRunning iteration 491/1500... Est. remaining: 8m 57sRunning iteration 501/1500... Est. remaining: 8m 51sbest_combination: {'lookbacks': [132, 157, 178], 'score': np.float64(0.6104888162747907), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 45sRunning iteration 521/1500... Est. remaining: 8m 40sRunning iteration 531/1500... Est. remaining: 8m 36sRunning iteration 541/1500... Est. remaining: 8m 30sRunning iteration 551/1500... Est. remaining: 8m 25sRunning iteration 561/1500... Est. remaining: 8m 20sRunning iteration 571/1500... Est. remaining: 8m 14sRunning iteration 581/1500... Est. remaining: 8m 9sRunning iteration 591/1500... Est. remaining: 8m 4sRunning iteration 601/1500... Est. remaining: 7m 58sbest_combination: {'lookbacks': [132, 157, 178], 'score': np.float64(0.6104888162747907), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 53sRunning iteration 621/1500... Est. remaining: 7m 47sRunning iteration 631/1500... Est. remaining: 7m 42sRunning iteration 641/1500... Est. remaining: 7m 37sRunning iteration 651/1500... Est. remaining: 7m 31sRunning iteration 661/1500... Est. remaining: 7m 26sRunning iteration 671/1500... Est. remaining: 7m 20sRunning iteration 681/1500... Est. remaining: 7m 15sRunning iteration 691/1500... Est. remaining: 7m 9sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [132, 157, 178], 'score': np.float64(0.6104888162747907), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 0sRunning iteration 721/1500... Est. remaining: 6m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,821,401,450
Annual Return: 41.83%
Sharpe Ratio: 1.50712
Sortino Ratio: 1.414
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 0.954
Lookback periods: [50, 63, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 6m 51sRunning iteration 741/1500... Est. remaining: 6m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,159,076,333
Annual Return: 42.53%
Sharpe Ratio: 1.53430
Sortino Ratio: 1.444
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.231
Lookback periods: [50, 62, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 6m 42sRunning iteration 761/1500... Est. remaining: 6m 37sRunning iteration 771/1500... Est. remaining: 6m 31sRunning iteration 781/1500... Est. remaining: 6m 26sRunning iteration 791/1500... Est. remaining: 6m 20sRunning iteration 801/1500... Est. remaining: 6m 15sbest_combination: {'lookbacks': [50, 62, 97], 'score': np.float64(1.2308133319497074), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 10sRunning iteration 821/1500... Est. remaining: 6m 5sRunning iteration 831/1500... Est. remaining: 5m 59sRunning iteration 841/1500... Est. remaining: 5m 54sRunning iteration 851/1500... Est. remaining: 5m 49sRunning iteration 861/1500... Est. remaining: 5m 43sRunning iteration 871/1500... Est. remaining: 5m 38sRunning iteration 881/1500... Est. remaining: 5m 33sRunning iteration 891/1500... Est. remaining: 5m 28sRunning iteration 901/1500... Est. remaining: 5m 23sbest_combination: {'lookbacks': [50, 62, 97], 'score': np.float64(1.2308133319497074), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 18sRunning iteration 921/1500... Est. remaining: 5m 12sRunning iteration 931/1500... Est. remaining: 5m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,613,029,033
Annual Return: 43.32%
Sharpe Ratio: 1.58577
Sortino Ratio: 1.485
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.415
Lookback periods: [50, 57, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 5m 2sRunning iteration 951/1500... Est. remaining: 4m 56sRunning iteration 961/1500... Est. remaining: 4m 51sRunning iteration 971/1500... Est. remaining: 4m 45sRunning iteration 981/1500... Est. remaining: 4m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.716
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 991/1500... Est. remaining: 4m 35sRunning iteration 1001/1500... Est. remaining: 4m 29sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.716229926850809), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 24sRunning iteration 1021/1500... Est. remaining: 4m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1031/1500... Est. remaining: 4m 13sRunning iteration 1041/1500... Est. remaining: 4m 7sRunning iteration 1051/1500... Est. remaining: 4m 2sRunning iteration 1061/1500... Est. remaining: 3m 56sRunning iteration 1071/1500... Est. remaining: 3m 51sRunning iteration 1081/1500... Est. remaining: 3m 45sRunning iteration 1091/1500... Est. remaining: 3m 40sRunning iteration 1101/1500... Est. remaining: 3m 34sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 29sRunning iteration 1121/1500... Est. remaining: 3m 23sRunning iteration 1131/1500... Est. remaining: 3m 18sRunning iteration 1141/1500... Est. remaining: 3m 12sRunning iteration 1151/1500... Est. remaining: 3m 7sRunning iteration 1161/1500... Est. remaining: 3m 2sRunning iteration 1171/1500... Est. remaining: 2m 56sRunning iteration 1181/1500... Est. remaining: 2m 51sRunning iteration 1191/1500... Est. remaining: 2m 45sRunning iteration 1201/1500... Est. remaining: 2m 40sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 34sRunning iteration 1221/1500... Est. remaining: 2m 29sRunning iteration 1231/1500... Est. remaining: 2m 24sRunning iteration 1241/1500... Est. remaining: 2m 18sRunning iteration 1251/1500... Est. remaining: 2m 13sRunning iteration 1261/1500... Est. remaining: 2m 7sRunning iteration 1271/1500... Est. remaining: 2m 2sRunning iteration 1281/1500... Est. remaining: 1m 57sRunning iteration 1291/1500... Est. remaining: 1m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.016
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1301/1500... Est. remaining: 1m 46sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 41sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 30sRunning iteration 1341/1500... Est. remaining: 1m 25sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 14sRunning iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.2 minutes
Best normalized score: 2.02
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 2.0164)

Monte Carlo simulation completed in 13.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 00:33:28 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-25T00:33:28.575481
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.1663
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $787,624,574
Annual Return: 38.44%
Sharpe Ratio: 1.32434
Sortino Ratio: 1.242
Max Drawdown: -52.3%
Avg Drawdown: -12.2%
Normalized Score: -0.877
Lookback periods: [86, 111, 122] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,855,406,840
Annual Return: 41.91%
Sharpe Ratio: 1.37430
Sortino Ratio: 1.336
Max Drawdown: -63.5%
Avg Drawdown: -12.8%
Normalized Score: -0.813
Lookback periods: [127, 162, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,499,652,211
Annual Return: 41.04%
Sharpe Ratio: 1.40299
Sortino Ratio: 1.335
Max Drawdown: -55.8%
Avg Drawdown: -12.5%
Normalized Score: -0.556
Lookback periods: [103, 126, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 47sRunning iteration 21/1500... Est. remaining: 21m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,118,725,114
Annual Return: 39.85%
Sharpe Ratio: 1.37839
Sortino Ratio: 1.301
Max Drawdown: -52.3%
Avg Drawdown: -10.8%
Normalized Score: -0.378
Lookback periods: [85, 91, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,349,842,981
Annual Return: 42.88%
Sharpe Ratio: 1.44108
Sortino Ratio: 1.379
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: -0.203
Lookback periods: [97, 147, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,660,302,813
Annual Return: 48.36%
Sharpe Ratio: 1.59316
Sortino Ratio: 1.545
Max Drawdown: -57.2%
Avg Drawdown: -11.9%
Normalized Score: 0.722
Lookback periods: [135, 156, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 58sRunning iteration 51/1500... Est. remaining: 17m 36sRunning iteration 61/1500... Est. remaining: 16m 35sRunning iteration 71/1500... Est. remaining: 15m 53sRunning iteration 81/1500... Est. remaining: 15m 19sRunning iteration 91/1500... Est. remaining: 14m 50sRunning iteration 101/1500... Est. remaining: 14m 27sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 8sRunning iteration 121/1500... Est. remaining: 13m 50sRunning iteration 131/1500... Est. remaining: 13m 34sRunning iteration 141/1500... Est. remaining: 13m 21sRunning iteration 151/1500... Est. remaining: 13m 7sRunning iteration 161/1500... Est. remaining: 12m 55sRunning iteration 171/1500... Est. remaining: 12m 44sRunning iteration 181/1500... Est. remaining: 12m 34sRunning iteration 191/1500... Est. remaining: 12m 24sRunning iteration 201/1500... Est. remaining: 12m 15sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 5sRunning iteration 221/1500... Est. remaining: 11m 57sRunning iteration 231/1500... Est. remaining: 11m 48sRunning iteration 241/1500... Est. remaining: 11m 40sRunning iteration 251/1500... Est. remaining: 11m 32sRunning iteration 261/1500... Est. remaining: 11m 24sRunning iteration 271/1500... Est. remaining: 11m 17sRunning iteration 281/1500... Est. remaining: 11m 10sRunning iteration 291/1500... Est. remaining: 11m 4sRunning iteration 301/1500... Est. remaining: 10m 57sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 50sRunning iteration 321/1500... Est. remaining: 10m 43sRunning iteration 331/1500... Est. remaining: 10m 37sRunning iteration 341/1500... Est. remaining: 10m 30sRunning iteration 351/1500... Est. remaining: 10m 24sRunning iteration 361/1500... Est. remaining: 10m 17sRunning iteration 371/1500... Est. remaining: 10m 11sRunning iteration 381/1500... Est. remaining: 10m 5sRunning iteration 391/1500... Est. remaining: 9m 59sRunning iteration 401/1500... Est. remaining: 9m 52sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 46sRunning iteration 421/1500... Est. remaining: 9m 40sRunning iteration 431/1500... Est. remaining: 9m 36sRunning iteration 441/1500... Est. remaining: 9m 30sRunning iteration 451/1500... Est. remaining: 9m 25sRunning iteration 461/1500... Est. remaining: 9m 19sRunning iteration 471/1500... Est. remaining: 9m 13sRunning iteration 481/1500... Est. remaining: 9m 8sRunning iteration 491/1500... Est. remaining: 9m 2sRunning iteration 501/1500... Est. remaining: 8m 56sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 50sRunning iteration 521/1500... Est. remaining: 8m 45sRunning iteration 531/1500... Est. remaining: 8m 39sRunning iteration 541/1500... Est. remaining: 8m 34sRunning iteration 551/1500... Est. remaining: 8m 28sRunning iteration 561/1500... Est. remaining: 8m 23sRunning iteration 571/1500... Est. remaining: 8m 17sRunning iteration 581/1500... Est. remaining: 8m 11sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 0sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 54sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 43sRunning iteration 641/1500... Est. remaining: 7m 37sRunning iteration 651/1500... Est. remaining: 7m 32sRunning iteration 661/1500... Est. remaining: 7m 26sRunning iteration 671/1500... Est. remaining: 7m 21sRunning iteration 681/1500... Est. remaining: 7m 15sRunning iteration 691/1500... Est. remaining: 7m 10sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 59sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 48sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 37sRunning iteration 761/1500... Est. remaining: 6m 31sRunning iteration 771/1500... Est. remaining: 6m 26sRunning iteration 781/1500... Est. remaining: 6m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,036,059,246
Annual Return: 48.99%
Sharpe Ratio: 1.61377
Sortino Ratio: 1.571
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 0.979
Lookback periods: [136, 156, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 6m 16sRunning iteration 801/1500... Est. remaining: 6m 11sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 5sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 54sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 44sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 33sRunning iteration 881/1500... Est. remaining: 5m 28sRunning iteration 891/1500... Est. remaining: 5m 22sRunning iteration 901/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 12sRunning iteration 921/1500... Est. remaining: 5m 6sRunning iteration 931/1500... Est. remaining: 5m 1sRunning iteration 941/1500... Est. remaining: 4m 56sRunning iteration 951/1500... Est. remaining: 4m 50sRunning iteration 961/1500... Est. remaining: 4m 45sRunning iteration 971/1500... Est. remaining: 4m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,217,270,780
Annual Return: 49.07%
Sharpe Ratio: 1.61329
Sortino Ratio: 1.575
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 1.100
Lookback periods: [139, 155, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 29sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 14sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 3sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 47sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 31sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 10sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 54sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.10
best_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [139, 154, 171] (score: 1.1663)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 155, 158] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,217,270,780.39
Average Annualized Gain: 49.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 00:46:44 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $369,168,077
Annual Return: 35.45%
Sharpe Ratio: 1.20326
Sortino Ratio: 1.133
Max Drawdown: -60.6%
Avg Drawdown: -13.5%
Normalized Score: -1.950
Lookback periods: [73, 175, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $641,532,031
Annual Return: 37.63%
Sharpe Ratio: 1.30893
Sortino Ratio: 1.225
Max Drawdown: -59.6%
Avg Drawdown: -12.0%
Normalized Score: -1.216
Lookback periods: [53, 160, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,501,156,322
Annual Return: 44.53%
Sharpe Ratio: 1.48879
Sortino Ratio: 1.438
Max Drawdown: -56.3%
Avg Drawdown: -12.1%
Normalized Score: 0.081
Lookback periods: [105, 147, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 31sRunning iteration 21/1500... Est. remaining: 21m 0sRunning iteration 31/1500... Est. remaining: 18m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,575,156,401
Annual Return: 44.62%
Sharpe Ratio: 1.47018
Sortino Ratio: 1.419
Max Drawdown: -55.0%
Avg Drawdown: -11.6%
Normalized Score: 0.153
Lookback periods: [141, 161, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,245,859,712
Annual Return: 46.23%
Sharpe Ratio: 1.49818
Sortino Ratio: 1.459
Max Drawdown: -59.0%
Avg Drawdown: -12.1%
Normalized Score: 0.200
Lookback periods: [178, 181, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 16m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,102,075,718
Annual Return: 46.87%
Sharpe Ratio: 1.54082
Sortino Ratio: 1.509
Max Drawdown: -61.3%
Avg Drawdown: -12.2%
Normalized Score: 0.282
Lookback periods: [133, 155, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,714,352,555
Annual Return: 47.27%
Sharpe Ratio: 1.54386
Sortino Ratio: 1.502
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: 0.675
Lookback periods: [157, 160, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 16m 22sRunning iteration 81/1500... Est. remaining: 15m 49sRunning iteration 91/1500... Est. remaining: 15m 20sRunning iteration 101/1500... Est. remaining: 14m 54sbest_combination: {'lookbacks': [157, 160, 175], 'score': np.float64(0.6748048100419386), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 31sRunning iteration 121/1500... Est. remaining: 14m 11sRunning iteration 131/1500... Est. remaining: 13m 53sRunning iteration 141/1500... Est. remaining: 13m 38sRunning iteration 151/1500... Est. remaining: 13m 29sRunning iteration 161/1500... Est. remaining: 13m 20sRunning iteration 171/1500... Est. remaining: 13m 7sRunning iteration 181/1500... Est. remaining: 12m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,393,602,941
Annual Return: 48.71%
Sharpe Ratio: 1.57608
Sortino Ratio: 1.540
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.785
Lookback periods: [155, 159, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 12m 52sRunning iteration 201/1500... Est. remaining: 12m 41sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(0.7848933504610567), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 30sRunning iteration 221/1500... Est. remaining: 12m 21sRunning iteration 231/1500... Est. remaining: 12m 12sRunning iteration 241/1500... Est. remaining: 12m 2sRunning iteration 251/1500... Est. remaining: 11m 53sRunning iteration 261/1500... Est. remaining: 11m 45sRunning iteration 271/1500... Est. remaining: 11m 38sRunning iteration 281/1500... Est. remaining: 11m 30sRunning iteration 291/1500... Est. remaining: 11m 22sRunning iteration 301/1500... Est. remaining: 11m 15sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(0.7848933504610567), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 8sRunning iteration 321/1500... Est. remaining: 11m 0sRunning iteration 331/1500... Est. remaining: 10m 52sRunning iteration 341/1500... Est. remaining: 10m 45sRunning iteration 351/1500... Est. remaining: 10m 38sRunning iteration 361/1500... Est. remaining: 10m 30sRunning iteration 371/1500... Est. remaining: 10m 23sRunning iteration 381/1500... Est. remaining: 10m 16sRunning iteration 391/1500... Est. remaining: 10m 10sRunning iteration 401/1500... Est. remaining: 10m 3sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(0.7848933504610567), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 57sRunning iteration 421/1500... Est. remaining: 9m 50sRunning iteration 431/1500... Est. remaining: 9m 44sRunning iteration 441/1500... Est. remaining: 9m 37sRunning iteration 451/1500... Est. remaining: 9m 31sRunning iteration 461/1500... Est. remaining: 9m 25sRunning iteration 471/1500... Est. remaining: 9m 19sRunning iteration 481/1500... Est. remaining: 9m 13sRunning iteration 491/1500... Est. remaining: 9m 7sRunning iteration 501/1500... Est. remaining: 9m 1sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(0.7848933504610567), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 55sRunning iteration 521/1500... Est. remaining: 8m 50sRunning iteration 531/1500... Est. remaining: 8m 44sRunning iteration 541/1500... Est. remaining: 8m 38sRunning iteration 551/1500... Est. remaining: 8m 32sRunning iteration 561/1500... Est. remaining: 8m 26sRunning iteration 571/1500... Est. remaining: 8m 20sRunning iteration 581/1500... Est. remaining: 8m 14sRunning iteration 591/1500... Est. remaining: 8m 8sRunning iteration 601/1500... Est. remaining: 8m 3sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(0.7848933504610567), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 57sRunning iteration 621/1500... Est. remaining: 7m 51sRunning iteration 631/1500... Est. remaining: 7m 45sRunning iteration 641/1500... Est. remaining: 7m 40sRunning iteration 651/1500... Est. remaining: 7m 34sRunning iteration 661/1500... Est. remaining: 7m 28sRunning iteration 671/1500... Est. remaining: 7m 23sRunning iteration 681/1500... Est. remaining: 7m 17sRunning iteration 691/1500... Est. remaining: 7m 11sRunning iteration 701/1500... Est. remaining: 7m 6sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(0.7848933504610567), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 1sRunning iteration 721/1500... Est. remaining: 6m 55sRunning iteration 731/1500... Est. remaining: 6m 49sRunning iteration 741/1500... Est. remaining: 6m 44sRunning iteration 751/1500... Est. remaining: 6m 39sRunning iteration 761/1500... Est. remaining: 6m 33sRunning iteration 771/1500... Est. remaining: 6m 28sRunning iteration 781/1500... Est. remaining: 6m 22sRunning iteration 791/1500... Est. remaining: 6m 17sRunning iteration 801/1500... Est. remaining: 6m 11sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(0.7848933504610567), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 6sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 55sRunning iteration 841/1500... Est. remaining: 5m 50sRunning iteration 851/1500... Est. remaining: 5m 44sRunning iteration 861/1500... Est. remaining: 5m 39sRunning iteration 871/1500... Est. remaining: 5m 33sRunning iteration 881/1500... Est. remaining: 5m 28sRunning iteration 891/1500... Est. remaining: 5m 23sRunning iteration 901/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(0.7848933504610567), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 12sRunning iteration 921/1500... Est. remaining: 5m 6sRunning iteration 931/1500... Est. remaining: 5m 1sRunning iteration 941/1500... Est. remaining: 4m 55sRunning iteration 951/1500... Est. remaining: 4m 50sRunning iteration 961/1500... Est. remaining: 4m 45sRunning iteration 971/1500... Est. remaining: 4m 39sRunning iteration 981/1500... Est. remaining: 4m 34sRunning iteration 991/1500... Est. remaining: 4m 29sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(0.7848933504610567), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 18sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,000,693,645
Annual Return: 48.52%
Sharpe Ratio: 1.57582
Sortino Ratio: 1.534
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.811
Lookback periods: [156, 159, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [156, 159, 200], 'score': np.float64(0.8106931917035837), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [156, 159, 200], 'score': np.float64(0.8106931917035837), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,111,939,361
Annual Return: 42.44%
Sharpe Ratio: 1.51825
Sortino Ratio: 1.424
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.115
Lookback periods: [50, 51, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1221/1500... Est. remaining: 2m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,796,731,139
Annual Return: 43.60%
Sharpe Ratio: 1.56916
Sortino Ratio: 1.470
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.467
Lookback periods: [50, 50, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1231/1500... Est. remaining: 2m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,622,827,200
Annual Return: 44.68%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.652
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.747
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.94
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9365)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 198m 16s
End time: Mon Aug 25 00:59:52 EDT 2025
Average time per successful run: 13m 13s
==============================================================
✓ All runs completed successfully!
