Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Start time: Sun Aug 24 13:28:52 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Sun Aug 24 13:28:52 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $172,220,435
Annual Return: 32.50%
Sharpe Ratio: 1.11333
Sortino Ratio: 1.043
Max Drawdown: -65.7%
Avg Drawdown: -14.6%
Normalized Score: -2.812
Lookback periods: [79, 173, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $328,874,149
Annual Return: 35.00%
Sharpe Ratio: 1.20200
Sortino Ratio: 1.121
Max Drawdown: -58.0%
Avg Drawdown: -14.1%
Normalized Score: -2.022
Lookback periods: [65, 118, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,590,400,642
Annual Return: 46.50%
Sharpe Ratio: 1.51706
Sortino Ratio: 1.488
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.338
Lookback periods: [146, 175, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,144,363,476
Annual Return: 48.10%
Sharpe Ratio: 1.58385
Sortino Ratio: 1.541
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.774
Lookback periods: [136, 156, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 41m 50sRunning iteration 21/1500... Est. remaining: 28m 54sRunning iteration 31/1500... Est. remaining: 24m 36sRunning iteration 41/1500... Est. remaining: 22m 15sRunning iteration 51/1500... Est. remaining: 20m 49sRunning iteration 61/1500... Est. remaining: 19m 47sRunning iteration 71/1500... Est. remaining: 19m 3sRunning iteration 81/1500... Est. remaining: 18m 30sRunning iteration 91/1500... Est. remaining: 18m 0sRunning iteration 101/1500... Est. remaining: 17m 36sbest_combination: {'lookbacks': [136, 156, 178], 'score': np.float64(0.7737094073737291), 'visits': 1}
Running iteration 111/1500... Est. remaining: 17m 14sRunning iteration 121/1500... Est. remaining: 17m 0sRunning iteration 131/1500... Est. remaining: 16m 44sRunning iteration 141/1500... Est. remaining: 16m 28sRunning iteration 151/1500... Est. remaining: 16m 13sRunning iteration 161/1500... Est. remaining: 15m 59sRunning iteration 171/1500... Est. remaining: 15m 47sRunning iteration 181/1500... Est. remaining: 15m 36sRunning iteration 191/1500... Est. remaining: 15m 25sRunning iteration 201/1500... Est. remaining: 15m 14sbest_combination: {'lookbacks': [136, 156, 178], 'score': np.float64(0.7737094073737291), 'visits': 1}
Running iteration 211/1500... Est. remaining: 15m 5sRunning iteration 221/1500... Est. remaining: 14m 55sRunning iteration 231/1500... Est. remaining: 14m 45sRunning iteration 241/1500... Est. remaining: 14m 35sRunning iteration 251/1500... Est. remaining: 14m 25sRunning iteration 261/1500... Est. remaining: 14m 17sRunning iteration 271/1500... Est. remaining: 14m 8sRunning iteration 281/1500... Est. remaining: 13m 59sRunning iteration 291/1500... Est. remaining: 13m 51sRunning iteration 301/1500... Est. remaining: 13m 42sbest_combination: {'lookbacks': [136, 156, 178], 'score': np.float64(0.7737094073737291), 'visits': 1}
Running iteration 311/1500... Est. remaining: 13m 33sRunning iteration 321/1500... Est. remaining: 13m 25sRunning iteration 331/1500... Est. remaining: 13m 17sRunning iteration 341/1500... Est. remaining: 13m 9sRunning iteration 351/1500... Est. remaining: 13m 2sRunning iteration 361/1500... Est. remaining: 12m 54sRunning iteration 371/1500... Est. remaining: 12m 46sRunning iteration 381/1500... Est. remaining: 12m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,916,426,381
Annual Return: 42.04%
Sharpe Ratio: 1.52140
Sortino Ratio: 1.418
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.939
Lookback periods: [50, 60, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 12m 36sRunning iteration 401/1500... Est. remaining: 12m 29sbest_combination: {'lookbacks': [50, 60, 89], 'score': np.float64(0.939333642250951), 'visits': 1}
Running iteration 411/1500... Est. remaining: 12m 21sRunning iteration 421/1500... Est. remaining: 12m 13sRunning iteration 431/1500... Est. remaining: 12m 6sRunning iteration 441/1500... Est. remaining: 11m 58sRunning iteration 451/1500... Est. remaining: 11m 50sRunning iteration 461/1500... Est. remaining: 11m 43sRunning iteration 471/1500... Est. remaining: 11m 35sRunning iteration 481/1500... Est. remaining: 11m 27sRunning iteration 491/1500... Est. remaining: 11m 20sRunning iteration 501/1500... Est. remaining: 11m 13sbest_combination: {'lookbacks': [50, 60, 89], 'score': np.float64(0.939333642250951), 'visits': 1}
Running iteration 511/1500... Est. remaining: 11m 6sRunning iteration 521/1500... Est. remaining: 10m 59sRunning iteration 531/1500... Est. remaining: 10m 51sRunning iteration 541/1500... Est. remaining: 10m 44sRunning iteration 551/1500... Est. remaining: 10m 37sRunning iteration 561/1500... Est. remaining: 10m 30sRunning iteration 571/1500... Est. remaining: 10m 23sRunning iteration 581/1500... Est. remaining: 10m 16sRunning iteration 591/1500... Est. remaining: 10m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,483,860,187
Annual Return: 43.11%
Sharpe Ratio: 1.53898
Sortino Ratio: 1.448
Max Drawdown: -35.6%
Avg Drawdown: -9.2%
Normalized Score: 1.134
Lookback periods: [50, 54, 86] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/1500... Est. remaining: 10m 4sbest_combination: {'lookbacks': [50, 54, 86], 'score': np.float64(1.134044325882235), 'visits': 1}
Running iteration 611/1500... Est. remaining: 9m 57sRunning iteration 621/1500... Est. remaining: 9m 50sRunning iteration 631/1500... Est. remaining: 9m 43sRunning iteration 641/1500... Est. remaining: 9m 36sRunning iteration 651/1500... Est. remaining: 9m 29sRunning iteration 661/1500... Est. remaining: 9m 22sRunning iteration 671/1500... Est. remaining: 9m 15sRunning iteration 681/1500... Est. remaining: 9m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,291,396,789
Annual Return: 42.78%
Sharpe Ratio: 1.54777
Sortino Ratio: 1.446
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.153
Lookback periods: [50, 54, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 9m 3sRunning iteration 701/1500... Est. remaining: 8m 56sbest_combination: {'lookbacks': [50, 54, 94], 'score': np.float64(1.1528780555490148), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,942,937,289
Annual Return: 43.81%
Sharpe Ratio: 1.57848
Sortino Ratio: 1.484
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.555
Lookback periods: [50, 50, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 711/1500... Est. remaining: 8m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,188,708,617
Annual Return: 46.93%
Sharpe Ratio: 1.68323
Sortino Ratio: 1.602
Max Drawdown: -36.6%
Avg Drawdown: -7.9%
Normalized Score: 2.063
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 8m 45sRunning iteration 731/1500... Est. remaining: 8m 39sRunning iteration 741/1500... Est. remaining: 8m 31sRunning iteration 751/1500... Est. remaining: 8m 24sRunning iteration 761/1500... Est. remaining: 8m 18sRunning iteration 771/1500... Est. remaining: 8m 11sRunning iteration 781/1500... Est. remaining: 8m 4sRunning iteration 791/1500... Est. remaining: 7m 57sRunning iteration 801/1500... Est. remaining: 7m 50sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 811/1500... Est. remaining: 7m 43sRunning iteration 821/1500... Est. remaining: 7m 36sRunning iteration 831/1500... Est. remaining: 7m 29sRunning iteration 841/1500... Est. remaining: 7m 23sRunning iteration 851/1500... Est. remaining: 7m 16sRunning iteration 861/1500... Est. remaining: 7m 9sRunning iteration 871/1500... Est. remaining: 7m 3sRunning iteration 881/1500... Est. remaining: 6m 56sRunning iteration 891/1500... Est. remaining: 6m 49sRunning iteration 901/1500... Est. remaining: 6m 43sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 911/1500... Est. remaining: 6m 36sRunning iteration 921/1500... Est. remaining: 6m 29sRunning iteration 931/1500... Est. remaining: 6m 22sRunning iteration 941/1500... Est. remaining: 6m 15sRunning iteration 951/1500... Est. remaining: 6m 8sRunning iteration 961/1500... Est. remaining: 6m 1sRunning iteration 971/1500... Est. remaining: 5m 54sRunning iteration 981/1500... Est. remaining: 5m 47sRunning iteration 991/1500... Est. remaining: 5m 40sRunning iteration 1001/1500... Est. remaining: 5m 33sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 5m 26sRunning iteration 1021/1500... Est. remaining: 5m 19sRunning iteration 1031/1500... Est. remaining: 5m 12sRunning iteration 1041/1500... Est. remaining: 5m 5sRunning iteration 1051/1500... Est. remaining: 4m 58sRunning iteration 1061/1500... Est. remaining: 4m 51sRunning iteration 1071/1500... Est. remaining: 4m 44sRunning iteration 1081/1500... Est. remaining: 4m 37sRunning iteration 1091/1500... Est. remaining: 4m 30sRunning iteration 1101/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 17sRunning iteration 1121/1500... Est. remaining: 4m 10sRunning iteration 1131/1500... Est. remaining: 4m 4sRunning iteration 1141/1500... Est. remaining: 3m 57sRunning iteration 1151/1500... Est. remaining: 3m 50sRunning iteration 1161/1500... Est. remaining: 3m 43sRunning iteration 1171/1500... Est. remaining: 3m 37sRunning iteration 1181/1500... Est. remaining: 3m 30sRunning iteration 1191/1500... Est. remaining: 3m 23sRunning iteration 1201/1500... Est. remaining: 3m 16sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 10sRunning iteration 1221/1500... Est. remaining: 3m 3sRunning iteration 1231/1500... Est. remaining: 2m 56sRunning iteration 1241/1500... Est. remaining: 2m 50sRunning iteration 1251/1500... Est. remaining: 2m 43sRunning iteration 1261/1500... Est. remaining: 2m 37sRunning iteration 1271/1500... Est. remaining: 2m 30sRunning iteration 1281/1500... Est. remaining: 2m 23sRunning iteration 1291/1500... Est. remaining: 2m 17sRunning iteration 1301/1500... Est. remaining: 2m 10sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 4sRunning iteration 1321/1500... Est. remaining: 1m 57sRunning iteration 1331/1500... Est. remaining: 1m 50sRunning iteration 1341/1500... Est. remaining: 1m 44sRunning iteration 1351/1500... Est. remaining: 1m 37sRunning iteration 1361/1500... Est. remaining: 1m 31sRunning iteration 1371/1500... Est. remaining: 1m 24sRunning iteration 1381/1500... Est. remaining: 1m 18sRunning iteration 1391/1500... Est. remaining: 1m 11sRunning iteration 1401/1500... Est. remaining: 1m 5sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 58sRunning iteration 1421/1500... Est. remaining: 0m 52sRunning iteration 1431/1500... Est. remaining: 0m 45sRunning iteration 1441/1500... Est. remaining: 0m 39sRunning iteration 1451/1500... Est. remaining: 0m 32sRunning iteration 1461/1500... Est. remaining: 0m 26sRunning iteration 1471/1500... Est. remaining: 0m 19sRunning iteration 1481/1500... Est. remaining: 0m 13sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 16.3 minutes
Best normalized score: 2.06
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 95] (score: 2.0629)

Monte Carlo simulation completed in 16.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 102 selections (24.5%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 82 selections (19.7%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $6,188,708,617.20
Average Annualized Gain: 46.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Sun Aug 24 13:45:19 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $863,551,074
Annual Return: 38.81%
Sharpe Ratio: 1.32214
Sortino Ratio: 1.231
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: -0.947
Lookback periods: [59, 108, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,384,721,569
Annual Return: 40.72%
Sharpe Ratio: 1.38738
Sortino Ratio: 1.309
Max Drawdown: -55.0%
Avg Drawdown: -12.6%
Normalized Score: -0.638
Lookback periods: [75, 148, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,841,178,267
Annual Return: 43.66%
Sharpe Ratio: 1.42852
Sortino Ratio: 1.392
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: -0.089
Lookback periods: [167, 170, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 36m 4sRunning iteration 21/1500... Est. remaining: 26m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,181,430,087
Annual Return: 46.92%
Sharpe Ratio: 1.53144
Sortino Ratio: 1.492
Max Drawdown: -63.3%
Avg Drawdown: -12.8%
Normalized Score: 0.098
Lookback periods: [140, 157, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 23m 53sRunning iteration 41/1500... Est. remaining: 21m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,316,921,024
Annual Return: 45.41%
Sharpe Ratio: 1.51572
Sortino Ratio: 1.476
Max Drawdown: -56.1%
Avg Drawdown: -11.8%
Normalized Score: 0.302
Lookback periods: [110, 134, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 20m 45sRunning iteration 61/1500... Est. remaining: 19m 37sRunning iteration 71/1500... Est. remaining: 18m 47sRunning iteration 81/1500... Est. remaining: 18m 11sRunning iteration 91/1500... Est. remaining: 17m 40sRunning iteration 101/1500... Est. remaining: 17m 14sbest_combination: {'lookbacks': [110, 134, 145], 'score': np.float64(0.30178316282633394), 'visits': 1}
Running iteration 111/1500... Est. remaining: 16m 50sRunning iteration 121/1500... Est. remaining: 16m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,044,191,957
Annual Return: 47.48%
Sharpe Ratio: 1.53992
Sortino Ratio: 1.499
Max Drawdown: -61.6%
Avg Drawdown: -12.1%
Normalized Score: 0.330
Lookback periods: [149, 178, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 16m 32sRunning iteration 141/1500... Est. remaining: 16m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,821,440,567
Annual Return: 46.67%
Sharpe Ratio: 1.51276
Sortino Ratio: 1.481
Max Drawdown: -59.0%
Avg Drawdown: -10.6%
Normalized Score: 0.513
Lookback periods: [156, 162, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 16m 11sRunning iteration 161/1500... Est. remaining: 15m 54sRunning iteration 171/1500... Est. remaining: 15m 40sRunning iteration 181/1500... Est. remaining: 15m 26sRunning iteration 191/1500... Est. remaining: 15m 13sRunning iteration 201/1500... Est. remaining: 15m 0sbest_combination: {'lookbacks': [156, 162, 196], 'score': np.float64(0.5134250393910734), 'visits': 1}
Running iteration 211/1500... Est. remaining: 14m 48sRunning iteration 221/1500... Est. remaining: 14m 38sRunning iteration 231/1500... Est. remaining: 14m 27sRunning iteration 241/1500... Est. remaining: 14m 16sRunning iteration 251/1500... Est. remaining: 14m 7sRunning iteration 261/1500... Est. remaining: 14m 1sRunning iteration 271/1500... Est. remaining: 13m 53sRunning iteration 281/1500... Est. remaining: 13m 44sRunning iteration 291/1500... Est. remaining: 13m 36sRunning iteration 301/1500... Est. remaining: 13m 26sbest_combination: {'lookbacks': [156, 162, 196], 'score': np.float64(0.5134250393910734), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,520,231,492
Annual Return: 48.76%
Sharpe Ratio: 1.60400
Sortino Ratio: 1.566
Max Drawdown: -62.4%
Avg Drawdown: -11.1%
Normalized Score: 0.762
Lookback periods: [138, 158, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 13m 23sRunning iteration 321/1500... Est. remaining: 13m 15sRunning iteration 331/1500... Est. remaining: 13m 5sRunning iteration 341/1500... Est. remaining: 12m 56sRunning iteration 351/1500... Est. remaining: 12m 49sRunning iteration 361/1500... Est. remaining: 12m 41sRunning iteration 371/1500... Est. remaining: 12m 33sRunning iteration 381/1500... Est. remaining: 12m 26sRunning iteration 391/1500... Est. remaining: 12m 18sRunning iteration 401/1500... Est. remaining: 12m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,337,242,337
Annual Return: 49.12%
Sharpe Ratio: 1.60218
Sortino Ratio: 1.557
Max Drawdown: -59.0%
Avg Drawdown: -10.1%
Normalized Score: 1.048
Lookback periods: [156, 158, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [156, 158, 175], 'score': np.float64(1.0475835967330123), 'visits': 1}
Running iteration 411/1500... Est. remaining: 12m 8sRunning iteration 421/1500... Est. remaining: 12m 0sRunning iteration 431/1500... Est. remaining: 11m 53sRunning iteration 441/1500... Est. remaining: 11m 46sRunning iteration 451/1500... Est. remaining: 11m 39sRunning iteration 461/1500... Est. remaining: 11m 31sRunning iteration 471/1500... Est. remaining: 11m 25sRunning iteration 481/1500... Est. remaining: 11m 18sRunning iteration 491/1500... Est. remaining: 11m 12sRunning iteration 501/1500... Est. remaining: 11m 5sbest_combination: {'lookbacks': [156, 158, 175], 'score': np.float64(1.0475835967330123), 'visits': 1}
Running iteration 511/1500... Est. remaining: 11m 0sRunning iteration 521/1500... Est. remaining: 10m 54sRunning iteration 531/1500... Est. remaining: 10m 47sRunning iteration 541/1500... Est. remaining: 10m 39sRunning iteration 551/1500... Est. remaining: 10m 32sRunning iteration 561/1500... Est. remaining: 10m 24sRunning iteration 571/1500... Est. remaining: 10m 16sRunning iteration 581/1500... Est. remaining: 10m 9sRunning iteration 591/1500... Est. remaining: 10m 1sRunning iteration 601/1500... Est. remaining: 9m 54sbest_combination: {'lookbacks': [156, 158, 175], 'score': np.float64(1.0475835967330123), 'visits': 1}
Running iteration 611/1500... Est. remaining: 9m 46sRunning iteration 621/1500... Est. remaining: 9m 39sRunning iteration 631/1500... Est. remaining: 9m 32sRunning iteration 641/1500... Est. remaining: 9m 24sRunning iteration 651/1500... Est. remaining: 9m 17sRunning iteration 661/1500... Est. remaining: 9m 11sRunning iteration 671/1500... Est. remaining: 9m 4sRunning iteration 681/1500... Est. remaining: 8m 57sRunning iteration 691/1500... Est. remaining: 8m 50sRunning iteration 701/1500... Est. remaining: 8m 43sbest_combination: {'lookbacks': [156, 158, 175], 'score': np.float64(1.0475835967330123), 'visits': 1}
Running iteration 711/1500... Est. remaining: 8m 37sRunning iteration 721/1500... Est. remaining: 8m 30sRunning iteration 731/1500... Est. remaining: 8m 24sRunning iteration 741/1500... Est. remaining: 8m 17sRunning iteration 751/1500... Est. remaining: 8m 10sRunning iteration 761/1500... Est. remaining: 8m 3sRunning iteration 771/1500... Est. remaining: 7m 56sRunning iteration 781/1500... Est. remaining: 7m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,318,429,095
Annual Return: 49.88%
Sharpe Ratio: 1.62083
Sortino Ratio: 1.597
Max Drawdown: -59.0%
Avg Drawdown: -10.0%
Normalized Score: 1.223
Lookback periods: [158, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 7m 43sRunning iteration 801/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 811/1500... Est. remaining: 7m 30sRunning iteration 821/1500... Est. remaining: 7m 24sRunning iteration 831/1500... Est. remaining: 7m 17sRunning iteration 841/1500... Est. remaining: 7m 11sRunning iteration 851/1500... Est. remaining: 7m 4sRunning iteration 861/1500... Est. remaining: 6m 58sRunning iteration 871/1500... Est. remaining: 6m 51sRunning iteration 881/1500... Est. remaining: 6m 44sRunning iteration 891/1500... Est. remaining: 6m 38sRunning iteration 901/1500... Est. remaining: 6m 31sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 911/1500... Est. remaining: 6m 24sRunning iteration 921/1500... Est. remaining: 6m 18sRunning iteration 931/1500... Est. remaining: 6m 12sRunning iteration 941/1500... Est. remaining: 6m 5sRunning iteration 951/1500... Est. remaining: 5m 59sRunning iteration 961/1500... Est. remaining: 5m 52sRunning iteration 971/1500... Est. remaining: 5m 46sRunning iteration 981/1500... Est. remaining: 5m 39sRunning iteration 991/1500... Est. remaining: 5m 33sRunning iteration 1001/1500... Est. remaining: 5m 26sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 5m 20sRunning iteration 1021/1500... Est. remaining: 5m 13sRunning iteration 1031/1500... Est. remaining: 5m 7sRunning iteration 1041/1500... Est. remaining: 5m 0sRunning iteration 1051/1500... Est. remaining: 4m 54sRunning iteration 1061/1500... Est. remaining: 4m 47sRunning iteration 1071/1500... Est. remaining: 4m 41sRunning iteration 1081/1500... Est. remaining: 4m 34sRunning iteration 1091/1500... Est. remaining: 4m 28sRunning iteration 1101/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 15sRunning iteration 1121/1500... Est. remaining: 4m 8sRunning iteration 1131/1500... Est. remaining: 4m 2sRunning iteration 1141/1500... Est. remaining: 3m 55sRunning iteration 1151/1500... Est. remaining: 3m 49sRunning iteration 1161/1500... Est. remaining: 3m 42sRunning iteration 1171/1500... Est. remaining: 3m 36sRunning iteration 1181/1500... Est. remaining: 3m 29sRunning iteration 1191/1500... Est. remaining: 3m 23sRunning iteration 1201/1500... Est. remaining: 3m 16sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 10sRunning iteration 1221/1500... Est. remaining: 3m 3sRunning iteration 1231/1500... Est. remaining: 2m 56sRunning iteration 1241/1500... Est. remaining: 2m 50sRunning iteration 1251/1500... Est. remaining: 2m 43sRunning iteration 1261/1500... Est. remaining: 2m 37sRunning iteration 1271/1500... Est. remaining: 2m 30sRunning iteration 1281/1500... Est. remaining: 2m 23sRunning iteration 1291/1500... Est. remaining: 2m 17sRunning iteration 1301/1500... Est. remaining: 2m 10sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 4sRunning iteration 1321/1500... Est. remaining: 1m 57sRunning iteration 1331/1500... Est. remaining: 1m 51sRunning iteration 1341/1500... Est. remaining: 1m 44sRunning iteration 1351/1500... Est. remaining: 1m 38sRunning iteration 1361/1500... Est. remaining: 1m 31sRunning iteration 1371/1500... Est. remaining: 1m 24sRunning iteration 1381/1500... Est. remaining: 1m 18sRunning iteration 1391/1500... Est. remaining: 1m 11sRunning iteration 1401/1500... Est. remaining: 1m 5sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 58sRunning iteration 1421/1500... Est. remaining: 0m 52sRunning iteration 1431/1500... Est. remaining: 0m 45sRunning iteration 1441/1500... Est. remaining: 0m 39sRunning iteration 1451/1500... Est. remaining: 0m 32sRunning iteration 1461/1500... Est. remaining: 0m 26sRunning iteration 1471/1500... Est. remaining: 0m 19sRunning iteration 1481/1500... Est. remaining: 0m 13sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 16.3 minutes
Best normalized score: 1.22
best_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [158, 162, 169] (score: 1.2226)

Monte Carlo simulation completed in 16.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [158, 162, 169] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 79 selections (19.0%)
5. cash: 34 selections (8.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,318,429,094.71
Average Annualized Gain: 49.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Sun Aug 24 14:01:44 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-24T14:01:45.826959
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.7293
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $617,116,765
Annual Return: 37.47%
Sharpe Ratio: 1.26891
Sortino Ratio: 1.200
Max Drawdown: -72.3%
Avg Drawdown: -13.1%
Normalized Score: -1.895
Lookback periods: [57, 152, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $832,858,019
Annual Return: 38.67%
Sharpe Ratio: 1.31278
Sortino Ratio: 1.249
Max Drawdown: -71.4%
Avg Drawdown: -13.5%
Normalized Score: -1.696
Lookback periods: [93, 169, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $508,841,761
Annual Return: 36.71%
Sharpe Ratio: 1.26331
Sortino Ratio: 1.169
Max Drawdown: -57.2%
Avg Drawdown: -13.1%
Normalized Score: -1.532
Lookback periods: [53, 138, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $532,506,101
Annual Return: 36.89%
Sharpe Ratio: 1.27681
Sortino Ratio: 1.202
Max Drawdown: -52.3%
Avg Drawdown: -12.0%
Normalized Score: -1.114
Lookback periods: [79, 122, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $874,135,617
Annual Return: 38.86%
Sharpe Ratio: 1.34599
Sortino Ratio: 1.265
Max Drawdown: -52.3%
Avg Drawdown: -12.3%
Normalized Score: -0.792
Lookback periods: [91, 92, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,042,290,298
Annual Return: 45.13%
Sharpe Ratio: 1.49896
Sortino Ratio: 1.455
Max Drawdown: -58.5%
Avg Drawdown: -12.2%
Normalized Score: 0.086
Lookback periods: [139, 149, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 46m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,682,151,605
Annual Return: 46.57%
Sharpe Ratio: 1.50848
Sortino Ratio: 1.471
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 0.453
Lookback periods: [154, 157, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 32m 20sRunning iteration 31/1500... Est. remaining: 26m 25sRunning iteration 41/1500... Est. remaining: 23m 18sRunning iteration 51/1500... Est. remaining: 21m 23sRunning iteration 61/1500... Est. remaining: 20m 5sRunning iteration 71/1500... Est. remaining: 19m 8sRunning iteration 81/1500... Est. remaining: 18m 23sRunning iteration 91/1500... Est. remaining: 17m 46sRunning iteration 101/1500... Est. remaining: 17m 17sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}
Running iteration 111/1500... Est. remaining: 16m 51sRunning iteration 121/1500... Est. remaining: 16m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,040,344,623
Annual Return: 46.82%
Sharpe Ratio: 1.52956
Sortino Ratio: 1.495
Max Drawdown: -55.0%
Avg Drawdown: -11.5%
Normalized Score: 0.563
Lookback periods: [147, 156, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 16m 25sRunning iteration 141/1500... Est. remaining: 16m 7sRunning iteration 151/1500... Est. remaining: 15m 50sRunning iteration 161/1500... Est. remaining: 15m 34sRunning iteration 171/1500... Est. remaining: 15m 19sRunning iteration 181/1500... Est. remaining: 15m 5sRunning iteration 191/1500... Est. remaining: 14m 52sRunning iteration 201/1500... Est. remaining: 14m 40sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}
Running iteration 211/1500... Est. remaining: 14m 28sRunning iteration 221/1500... Est. remaining: 14m 17sRunning iteration 231/1500... Est. remaining: 14m 6sRunning iteration 241/1500... Est. remaining: 13m 56sRunning iteration 251/1500... Est. remaining: 13m 46sRunning iteration 261/1500... Est. remaining: 13m 36sRunning iteration 271/1500... Est. remaining: 13m 27sRunning iteration 281/1500... Est. remaining: 13m 17sRunning iteration 291/1500... Est. remaining: 13m 9sRunning iteration 301/1500... Est. remaining: 13m 0sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}
Running iteration 311/1500... Est. remaining: 12m 51sRunning iteration 321/1500... Est. remaining: 12m 43sRunning iteration 331/1500... Est. remaining: 12m 34sRunning iteration 341/1500... Est. remaining: 12m 26sRunning iteration 351/1500... Est. remaining: 12m 18sRunning iteration 361/1500... Est. remaining: 12m 10sRunning iteration 371/1500... Est. remaining: 12m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,679,066,708
Annual Return: 41.50%
Sharpe Ratio: 1.47364
Sortino Ratio: 1.376
Max Drawdown: -35.7%
Avg Drawdown: -9.7%
Normalized Score: 0.719
Lookback periods: [52, 52, 78] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 11m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,381,445,267
Annual Return: 42.93%
Sharpe Ratio: 1.54842
Sortino Ratio: 1.452
Max Drawdown: -37.2%
Avg Drawdown: -9.3%
Normalized Score: 1.070
Lookback periods: [50, 52, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 11m 54sRunning iteration 401/1500... Est. remaining: 11m 46sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}
Running iteration 411/1500... Est. remaining: 11m 39sRunning iteration 421/1500... Est. remaining: 11m 31sRunning iteration 431/1500... Est. remaining: 11m 24sRunning iteration 441/1500... Est. remaining: 11m 16sRunning iteration 451/1500... Est. remaining: 11m 9sRunning iteration 461/1500... Est. remaining: 11m 1sRunning iteration 471/1500... Est. remaining: 10m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,031,844,594
Annual Return: 43.93%
Sharpe Ratio: 1.59905
Sortino Ratio: 1.495
Max Drawdown: -34.7%
Avg Drawdown: -8.1%
Normalized Score: 1.560
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 10m 52sRunning iteration 491/1500... Est. remaining: 10m 45sRunning iteration 501/1500... Est. remaining: 10m 37sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}
Running iteration 511/1500... Est. remaining: 10m 30sRunning iteration 521/1500... Est. remaining: 10m 23sRunning iteration 531/1500... Est. remaining: 10m 16sRunning iteration 541/1500... Est. remaining: 10m 9sRunning iteration 551/1500... Est. remaining: 10m 2sRunning iteration 561/1500... Est. remaining: 9m 54sRunning iteration 571/1500... Est. remaining: 9m 47sRunning iteration 581/1500... Est. remaining: 9m 40sRunning iteration 591/1500... Est. remaining: 9m 33sRunning iteration 601/1500... Est. remaining: 9m 26sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}
Running iteration 611/1500... Est. remaining: 9m 20sRunning iteration 621/1500... Est. remaining: 9m 13sRunning iteration 631/1500... Est. remaining: 9m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,188,708,617
Annual Return: 46.93%
Sharpe Ratio: 1.68323
Sortino Ratio: 1.602
Max Drawdown: -36.6%
Avg Drawdown: -7.9%
Normalized Score: 2.063
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 9m 1sRunning iteration 651/1500... Est. remaining: 8m 54sRunning iteration 661/1500... Est. remaining: 8m 48sRunning iteration 671/1500... Est. remaining: 8m 41sRunning iteration 681/1500... Est. remaining: 8m 34sRunning iteration 691/1500... Est. remaining: 8m 28sRunning iteration 701/1500... Est. remaining: 8m 21sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 711/1500... Est. remaining: 8m 14sRunning iteration 721/1500... Est. remaining: 8m 8sRunning iteration 731/1500... Est. remaining: 8m 1sRunning iteration 741/1500... Est. remaining: 7m 55sRunning iteration 751/1500... Est. remaining: 7m 48sRunning iteration 761/1500... Est. remaining: 7m 41sRunning iteration 771/1500... Est. remaining: 7m 35sRunning iteration 781/1500... Est. remaining: 7m 28sRunning iteration 791/1500... Est. remaining: 7m 22sRunning iteration 801/1500... Est. remaining: 7m 15sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 811/1500... Est. remaining: 7m 9sRunning iteration 821/1500... Est. remaining: 7m 3sRunning iteration 831/1500... Est. remaining: 6m 56sRunning iteration 841/1500... Est. remaining: 6m 50sRunning iteration 851/1500... Est. remaining: 6m 43sRunning iteration 861/1500... Est. remaining: 6m 37sRunning iteration 871/1500... Est. remaining: 6m 30sRunning iteration 881/1500... Est. remaining: 6m 24sRunning iteration 891/1500... Est. remaining: 6m 18sRunning iteration 901/1500... Est. remaining: 6m 11sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 911/1500... Est. remaining: 6m 5sRunning iteration 921/1500... Est. remaining: 5m 58sRunning iteration 931/1500... Est. remaining: 5m 52sRunning iteration 941/1500... Est. remaining: 5m 46sRunning iteration 951/1500... Est. remaining: 5m 39sRunning iteration 961/1500... Est. remaining: 5m 33sRunning iteration 971/1500... Est. remaining: 5m 27sRunning iteration 981/1500... Est. remaining: 5m 21sRunning iteration 991/1500... Est. remaining: 5m 14sRunning iteration 1001/1500... Est. remaining: 5m 8sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 5m 2sRunning iteration 1021/1500... Est. remaining: 4m 55sRunning iteration 1031/1500... Est. remaining: 4m 49sRunning iteration 1041/1500... Est. remaining: 4m 43sRunning iteration 1051/1500... Est. remaining: 4m 37sRunning iteration 1061/1500... Est. remaining: 4m 30sRunning iteration 1071/1500... Est. remaining: 4m 24sRunning iteration 1081/1500... Est. remaining: 4m 18sRunning iteration 1091/1500... Est. remaining: 4m 12sRunning iteration 1101/1500... Est. remaining: 4m 5sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 59sRunning iteration 1121/1500... Est. remaining: 3m 53sRunning iteration 1131/1500... Est. remaining: 3m 47sRunning iteration 1141/1500... Est. remaining: 3m 40sRunning iteration 1151/1500... Est. remaining: 3m 34sRunning iteration 1161/1500... Est. remaining: 3m 28sRunning iteration 1171/1500... Est. remaining: 3m 22sRunning iteration 1181/1500... Est. remaining: 3m 16sRunning iteration 1191/1500... Est. remaining: 3m 9sRunning iteration 1201/1500... Est. remaining: 3m 3sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 57sRunning iteration 1221/1500... Est. remaining: 2m 51sRunning iteration 1231/1500... Est. remaining: 2m 45sRunning iteration 1241/1500... Est. remaining: 2m 38sRunning iteration 1251/1500... Est. remaining: 2m 32sRunning iteration 1261/1500... Est. remaining: 2m 26sRunning iteration 1271/1500... Est. remaining: 2m 20sRunning iteration 1281/1500... Est. remaining: 2m 14sRunning iteration 1291/1500... Est. remaining: 2m 8sRunning iteration 1301/1500... Est. remaining: 2m 2sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 55sRunning iteration 1321/1500... Est. remaining: 1m 49sRunning iteration 1331/1500... Est. remaining: 1m 43sRunning iteration 1341/1500... Est. remaining: 1m 37sRunning iteration 1351/1500... Est. remaining: 1m 31sRunning iteration 1361/1500... Est. remaining: 1m 25sRunning iteration 1371/1500... Est. remaining: 1m 19sRunning iteration 1381/1500... Est. remaining: 1m 13sRunning iteration 1391/1500... Est. remaining: 1m 6sRunning iteration 1401/1500... Est. remaining: 1m 0sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 54sRunning iteration 1421/1500... Est. remaining: 0m 48sRunning iteration 1431/1500... Est. remaining: 0m 42sRunning iteration 1441/1500... Est. remaining: 0m 36sRunning iteration 1451/1500... Est. remaining: 0m 30sRunning iteration 1461/1500... Est. remaining: 0m 24sRunning iteration 1471/1500... Est. remaining: 0m 18sRunning iteration 1481/1500... Est. remaining: 0m 12sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 15.1 minutes
Best normalized score: 2.06
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [52, 52, 95] (score: 2.0629)

Monte Carlo simulation completed in 15.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 102 selections (24.5%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 82 selections (19.7%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $6,188,708,617.20
Average Annualized Gain: 46.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Sun Aug 24 14:16:59 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,019,788,176
Annual Return: 39.48%
Sharpe Ratio: 1.30967
Sortino Ratio: 1.256
Max Drawdown: -70.4%
Avg Drawdown: -14.0%
Normalized Score: -1.645
Lookback periods: [100, 169, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,353,780,755
Annual Return: 40.62%
Sharpe Ratio: 1.37617
Sortino Ratio: 1.303
Max Drawdown: -57.9%
Avg Drawdown: -12.7%
Normalized Score: -0.777
Lookback periods: [106, 112, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $975,798,777
Annual Return: 39.30%
Sharpe Ratio: 1.35245
Sortino Ratio: 1.266
Max Drawdown: -52.3%
Avg Drawdown: -11.8%
Normalized Score: -0.664
Lookback periods: [84, 119, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,417,760,987
Annual Return: 40.81%
Sharpe Ratio: 1.39070
Sortino Ratio: 1.315
Max Drawdown: -55.0%
Avg Drawdown: -12.7%
Normalized Score: -0.635
Lookback periods: [78, 157, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 37m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,025,202,237
Annual Return: 42.27%
Sharpe Ratio: 1.39418
Sortino Ratio: 1.359
Max Drawdown: -61.9%
Avg Drawdown: -12.3%
Normalized Score: -0.584
Lookback periods: [147, 175, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,831,962,872
Annual Return: 44.91%
Sharpe Ratio: 1.46202
Sortino Ratio: 1.432
Max Drawdown: -61.4%
Avg Drawdown: -12.2%
Normalized Score: -0.115
Lookback periods: [139, 174, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 28m 17sRunning iteration 31/1500... Est. remaining: 23m 15sRunning iteration 41/1500... Est. remaining: 20m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,492,063,929
Annual Return: 44.52%
Sharpe Ratio: 1.50215
Sortino Ratio: 1.436
Max Drawdown: -52.3%
Avg Drawdown: -11.3%
Normalized Score: 0.338
Lookback periods: [97, 126, 127] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 19m 48sRunning iteration 61/1500... Est. remaining: 18m 38sRunning iteration 71/1500... Est. remaining: 17m 52sRunning iteration 81/1500... Est. remaining: 17m 10sRunning iteration 91/1500... Est. remaining: 16m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,051,753,925
Annual Return: 46.83%
Sharpe Ratio: 1.52701
Sortino Ratio: 1.494
Max Drawdown: -61.0%
Avg Drawdown: -11.6%
Normalized Score: 0.355
Lookback periods: [152, 168, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 16m 28sbest_combination: {'lookbacks': [152, 168, 188], 'score': np.float64(0.35526445117499705), 'visits': 1}
Running iteration 111/1500... Est. remaining: 16m 4sRunning iteration 121/1500... Est. remaining: 15m 42sRunning iteration 131/1500... Est. remaining: 15m 23sRunning iteration 141/1500... Est. remaining: 15m 5sRunning iteration 151/1500... Est. remaining: 14m 49sRunning iteration 161/1500... Est. remaining: 14m 34sRunning iteration 171/1500... Est. remaining: 14m 20sRunning iteration 181/1500... Est. remaining: 14m 7sRunning iteration 191/1500... Est. remaining: 13m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,569,925,072
Annual Return: 47.18%
Sharpe Ratio: 1.56006
Sortino Ratio: 1.523
Max Drawdown: -58.5%
Avg Drawdown: -12.0%
Normalized Score: 0.483
Lookback periods: [138, 152, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 13m 53sbest_combination: {'lookbacks': [138, 152, 168], 'score': np.float64(0.48330571442918924), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,335,739,685
Annual Return: 47.65%
Sharpe Ratio: 1.54709
Sortino Ratio: 1.516
Max Drawdown: -60.3%
Avg Drawdown: -11.4%
Normalized Score: 0.543
Lookback periods: [148, 189, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/1500... Est. remaining: 13m 50sRunning iteration 221/1500... Est. remaining: 13m 39sRunning iteration 231/1500... Est. remaining: 13m 28sRunning iteration 241/1500... Est. remaining: 13m 18sRunning iteration 251/1500... Est. remaining: 13m 8sRunning iteration 261/1500... Est. remaining: 12m 58sRunning iteration 271/1500... Est. remaining: 12m 49sRunning iteration 281/1500... Est. remaining: 12m 39sRunning iteration 291/1500... Est. remaining: 12m 30sRunning iteration 301/1500... Est. remaining: 12m 21sbest_combination: {'lookbacks': [148, 189, 197], 'score': np.float64(0.5430239024071615), 'visits': 1}
Running iteration 311/1500... Est. remaining: 12m 13sRunning iteration 321/1500... Est. remaining: 12m 5sRunning iteration 331/1500... Est. remaining: 11m 56sRunning iteration 341/1500... Est. remaining: 11m 48sRunning iteration 351/1500... Est. remaining: 11m 40sRunning iteration 361/1500... Est. remaining: 11m 32sRunning iteration 371/1500... Est. remaining: 11m 25sRunning iteration 381/1500... Est. remaining: 11m 17sRunning iteration 391/1500... Est. remaining: 11m 10sRunning iteration 401/1500... Est. remaining: 11m 2sbest_combination: {'lookbacks': [148, 189, 197], 'score': np.float64(0.5430239024071615), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,594,008,745
Annual Return: 47.20%
Sharpe Ratio: 1.55948
Sortino Ratio: 1.514
Max Drawdown: -57.2%
Avg Drawdown: -11.6%
Normalized Score: 0.570
Lookback periods: [122, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 10m 49sRunning iteration 431/1500... Est. remaining: 10m 41sRunning iteration 441/1500... Est. remaining: 10m 32sRunning iteration 451/1500... Est. remaining: 10m 24sRunning iteration 461/1500... Est. remaining: 10m 16sRunning iteration 471/1500... Est. remaining: 10m 9sRunning iteration 481/1500... Est. remaining: 10m 1sRunning iteration 491/1500... Est. remaining: 9m 54sRunning iteration 501/1500... Est. remaining: 9m 46sbest_combination: {'lookbacks': [122, 154, 156], 'score': np.float64(0.5696386198392752), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,071,076,017
Annual Return: 46.85%
Sharpe Ratio: 1.55248
Sortino Ratio: 1.508
Max Drawdown: -56.4%
Avg Drawdown: -11.3%
Normalized Score: 0.599
Lookback periods: [127, 148, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 17m 48sRunning iteration 521/1500... Est. remaining: 25m 17sRunning iteration 531/1500... Est. remaining: 24m 43sRunning iteration 541/1500... Est. remaining: 24m 9sRunning iteration 551/1500... Est. remaining: 23m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,760,683,484
Annual Return: 41.69%
Sharpe Ratio: 1.50140
Sortino Ratio: 1.404
Max Drawdown: -34.8%
Avg Drawdown: -9.4%
Normalized Score: 0.897
Lookback periods: [50, 55, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,851,720,310
Annual Return: 44.93%
Sharpe Ratio: 1.61361
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.601
Lookback periods: [51, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 23m 9sRunning iteration 571/1500... Est. remaining: 22m 39sRunning iteration 581/1500... Est. remaining: 22m 9sRunning iteration 591/1500... Est. remaining: 21m 40sRunning iteration 601/1500... Est. remaining: 21m 12sbest_combination: {'lookbacks': [51, 52, 95], 'score': np.float64(1.6005885647434503), 'visits': 1}
Running iteration 611/1500... Est. remaining: 20m 44sRunning iteration 621/1500... Est. remaining: 20m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,205,286,346
Annual Return: 45.30%
Sharpe Ratio: 1.62640
Sortino Ratio: 1.543
Max Drawdown: -36.6%
Avg Drawdown: -8.6%
Normalized Score: 1.653
Lookback periods: [52, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 19m 53sRunning iteration 641/1500... Est. remaining: 19m 28sRunning iteration 651/1500... Est. remaining: 19m 3sRunning iteration 661/1500... Est. remaining: 18m 39sRunning iteration 671/1500... Est. remaining: 18m 16sRunning iteration 681/1500... Est. remaining: 17m 53sRunning iteration 691/1500... Est. remaining: 17m 30sRunning iteration 701/1500... Est. remaining: 17m 8sbest_combination: {'lookbacks': [52, 52, 96], 'score': np.float64(1.6526393852251182), 'visits': 1}
Running iteration 711/1500... Est. remaining: 16m 47sRunning iteration 721/1500... Est. remaining: 16m 26sRunning iteration 731/1500... Est. remaining: 16m 6sRunning iteration 741/1500... Est. remaining: 15m 46sRunning iteration 751/1500... Est. remaining: 15m 26sRunning iteration 761/1500... Est. remaining: 15m 7sRunning iteration 771/1500... Est. remaining: 14m 48sRunning iteration 781/1500... Est. remaining: 14m 29sRunning iteration 791/1500... Est. remaining: 14m 11sRunning iteration 801/1500... Est. remaining: 13m 53sbest_combination: {'lookbacks': [52, 52, 96], 'score': np.float64(1.6526393852251182), 'visits': 1}
Running iteration 811/1500... Est. remaining: 13m 35sRunning iteration 821/1500... Est. remaining: 13m 18sRunning iteration 831/1500... Est. remaining: 13m 1sRunning iteration 841/1500... Est. remaining: 12m 44sRunning iteration 851/1500... Est. remaining: 12m 28sRunning iteration 861/1500... Est. remaining: 12m 12sRunning iteration 871/1500... Est. remaining: 11m 55sRunning iteration 881/1500... Est. remaining: 11m 40sRunning iteration 891/1500... Est. remaining: 11m 24sRunning iteration 901/1500... Est. remaining: 11m 9sbest_combination: {'lookbacks': [52, 52, 96], 'score': np.float64(1.6526393852251182), 'visits': 1}
Running iteration 911/1500... Est. remaining: 10m 54sRunning iteration 921/1500... Est. remaining: 10m 39sRunning iteration 931/1500... Est. remaining: 10m 24sRunning iteration 941/1500... Est. remaining: 10m 10sRunning iteration 951/1500... Est. remaining: 9m 56sRunning iteration 961/1500... Est. remaining: 9m 42sRunning iteration 971/1500... Est. remaining: 9m 28sRunning iteration 981/1500... Est. remaining: 9m 14sRunning iteration 991/1500... Est. remaining: 9m 0sRunning iteration 1001/1500... Est. remaining: 8m 47sbest_combination: {'lookbacks': [52, 52, 96], 'score': np.float64(1.6526393852251182), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 8m 34sRunning iteration 1021/1500... Est. remaining: 8m 21sRunning iteration 1031/1500... Est. remaining: 8m 8sRunning iteration 1041/1500... Est. remaining: 7m 55sRunning iteration 1051/1500... Est. remaining: 7m 43sRunning iteration 1061/1500... Est. remaining: 7m 30sRunning iteration 1071/1500... Est. remaining: 7m 18sRunning iteration 1081/1500... Est. remaining: 7m 6sRunning iteration 1091/1500... Est. remaining: 6m 54sRunning iteration 1101/1500... Est. remaining: 6m 42sbest_combination: {'lookbacks': [52, 52, 96], 'score': np.float64(1.6526393852251182), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 6m 30sRunning iteration 1121/1500... Est. remaining: 6m 18sRunning iteration 1131/1500... Est. remaining: 6m 7sRunning iteration 1141/1500... Est. remaining: 5m 55sRunning iteration 1151/1500... Est. remaining: 5m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.729
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1161/1500... Est. remaining: 5m 33sRunning iteration 1171/1500... Est. remaining: 5m 22sRunning iteration 1181/1500... Est. remaining: 5m 11sRunning iteration 1191/1500... Est. remaining: 5m 0sRunning iteration 1201/1500... Est. remaining: 4m 49sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 4m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,830,490,959
Annual Return: 45.88%
Sharpe Ratio: 1.64903
Sortino Ratio: 1.560
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.905
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1221/1500... Est. remaining: 4m 28sRunning iteration 1231/1500... Est. remaining: 4m 18sRunning iteration 1241/1500... Est. remaining: 4m 7sRunning iteration 1251/1500... Est. remaining: 3m 57sRunning iteration 1261/1500... Est. remaining: 3m 46sRunning iteration 1271/1500... Est. remaining: 3m 36sRunning iteration 1281/1500... Est. remaining: 3m 26sRunning iteration 1291/1500... Est. remaining: 3m 16sRunning iteration 1301/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.9050998502548677), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 56sRunning iteration 1321/1500... Est. remaining: 2m 46sRunning iteration 1331/1500... Est. remaining: 2m 36sRunning iteration 1341/1500... Est. remaining: 2m 27sRunning iteration 1351/1500... Est. remaining: 2m 17sRunning iteration 1361/1500... Est. remaining: 2m 7sRunning iteration 1371/1500... Est. remaining: 1m 58sRunning iteration 1381/1500... Est. remaining: 1m 48sRunning iteration 1391/1500... Est. remaining: 1m 39sRunning iteration 1401/1500... Est. remaining: 1m 30sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.9050998502548677), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 20sRunning iteration 1421/1500... Est. remaining: 1m 11sRunning iteration 1431/1500... Est. remaining: 1m 2sRunning iteration 1441/1500... Est. remaining: 0m 53sRunning iteration 1451/1500... Est. remaining: 0m 44sRunning iteration 1461/1500... Est. remaining: 0m 35sRunning iteration 1471/1500... Est. remaining: 0m 26sRunning iteration 1481/1500... Est. remaining: 0m 17sRunning iteration 1491/1500... Est. remaining: 0m 8s
Monte Carlo simulation completed in 21.9 minutes
Best normalized score: 1.91
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.9050998502548677), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 1.9051)

Monte Carlo simulation completed in 21.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 96 selections (23.1%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,830,490,959.45
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Sun Aug 24 14:39:01 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $558,083,212
Annual Return: 37.07%
Sharpe Ratio: 1.27921
Sortino Ratio: 1.188
Max Drawdown: -52.3%
Avg Drawdown: -12.1%
Normalized Score: -1.132
Lookback periods: [71, 76, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,303,205,625
Annual Return: 40.47%
Sharpe Ratio: 1.39364
Sortino Ratio: 1.300
Max Drawdown: -56.4%
Avg Drawdown: -11.8%
Normalized Score: -0.591
Lookback periods: [53, 150, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,193,882,800
Annual Return: 44.15%
Sharpe Ratio: 1.46109
Sortino Ratio: 1.416
Max Drawdown: -67.9%
Avg Drawdown: -12.5%
Normalized Score: -0.468
Lookback periods: [106, 168, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 50sRunning iteration 21/1500... Est. remaining: 21m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,938,212,437
Annual Return: 45.97%
Sharpe Ratio: 1.50409
Sortino Ratio: 1.468
Max Drawdown: -56.0%
Avg Drawdown: -12.9%
Normalized Score: 0.161
Lookback periods: [132, 156, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,997,252,613
Annual Return: 46.79%
Sharpe Ratio: 1.52372
Sortino Ratio: 1.486
Max Drawdown: -58.5%
Avg Drawdown: -12.6%
Normalized Score: 0.267
Lookback periods: [137, 153, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 39sRunning iteration 41/1500... Est. remaining: 18m 33sRunning iteration 51/1500... Est. remaining: 17m 15sRunning iteration 61/1500... Est. remaining: 16m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,839,890,331
Annual Return: 41.87%
Sharpe Ratio: 1.52043
Sortino Ratio: 1.416
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 0.972
Lookback periods: [50, 56, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 16m 5sRunning iteration 81/1500... Est. remaining: 15m 31sRunning iteration 91/1500... Est. remaining: 15m 4sRunning iteration 101/1500... Est. remaining: 14m 42sbest_combination: {'lookbacks': [50, 56, 90], 'score': np.float64(0.9723445052470975), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 22sRunning iteration 121/1500... Est. remaining: 14m 5sRunning iteration 131/1500... Est. remaining: 13m 49sRunning iteration 141/1500... Est. remaining: 13m 36sRunning iteration 151/1500... Est. remaining: 13m 22sRunning iteration 161/1500... Est. remaining: 13m 10sRunning iteration 171/1500... Est. remaining: 12m 59sRunning iteration 181/1500... Est. remaining: 12m 49sRunning iteration 191/1500... Est. remaining: 12m 39sRunning iteration 201/1500... Est. remaining: 12m 29sbest_combination: {'lookbacks': [50, 56, 90], 'score': np.float64(0.9723445052470975), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 20sRunning iteration 221/1500... Est. remaining: 12m 11sRunning iteration 231/1500... Est. remaining: 12m 3sRunning iteration 241/1500... Est. remaining: 11m 55sRunning iteration 251/1500... Est. remaining: 11m 47sRunning iteration 261/1500... Est. remaining: 11m 39sRunning iteration 271/1500... Est. remaining: 11m 31sRunning iteration 281/1500... Est. remaining: 11m 24sRunning iteration 291/1500... Est. remaining: 11m 17sRunning iteration 301/1500... Est. remaining: 11m 9sbest_combination: {'lookbacks': [50, 56, 90], 'score': np.float64(0.9723445052470975), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 2sRunning iteration 321/1500... Est. remaining: 10m 55sRunning iteration 331/1500... Est. remaining: 10m 49sRunning iteration 341/1500... Est. remaining: 10m 42sRunning iteration 351/1500... Est. remaining: 10m 35sRunning iteration 361/1500... Est. remaining: 10m 29sRunning iteration 371/1500... Est. remaining: 10m 22sRunning iteration 381/1500... Est. remaining: 10m 16sRunning iteration 391/1500... Est. remaining: 10m 9sRunning iteration 401/1500... Est. remaining: 10m 3sbest_combination: {'lookbacks': [50, 56, 90], 'score': np.float64(0.9723445052470975), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,840,647,744
Annual Return: 41.88%
Sharpe Ratio: 1.51658
Sortino Ratio: 1.415
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.075
Lookback periods: [50, 50, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 10m 0sRunning iteration 421/1500... Est. remaining: 9m 54sRunning iteration 431/1500... Est. remaining: 9m 48sRunning iteration 441/1500... Est. remaining: 9m 42sRunning iteration 451/1500... Est. remaining: 9m 35sRunning iteration 461/1500... Est. remaining: 9m 29sRunning iteration 471/1500... Est. remaining: 9m 23sRunning iteration 481/1500... Est. remaining: 9m 17sRunning iteration 491/1500... Est. remaining: 9m 11sRunning iteration 501/1500... Est. remaining: 9m 5sbest_combination: {'lookbacks': [50, 50, 84], 'score': np.float64(1.0751835678567112), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,049,338,469
Annual Return: 42.32%
Sharpe Ratio: 1.52822
Sortino Ratio: 1.430
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.128
Lookback periods: [50, 50, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 9m 2sRunning iteration 521/1500... Est. remaining: 8m 56sRunning iteration 531/1500... Est. remaining: 8m 50sRunning iteration 541/1500... Est. remaining: 8m 44sRunning iteration 551/1500... Est. remaining: 8m 38sRunning iteration 561/1500... Est. remaining: 8m 32sRunning iteration 571/1500... Est. remaining: 8m 26sRunning iteration 581/1500... Est. remaining: 8m 20sRunning iteration 591/1500... Est. remaining: 8m 14sRunning iteration 601/1500... Est. remaining: 8m 9sbest_combination: {'lookbacks': [50, 50, 83], 'score': np.float64(1.12833825510693), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 3sRunning iteration 621/1500... Est. remaining: 7m 57sRunning iteration 631/1500... Est. remaining: 7m 51sRunning iteration 641/1500... Est. remaining: 7m 45sRunning iteration 651/1500... Est. remaining: 7m 39sRunning iteration 661/1500... Est. remaining: 7m 34sRunning iteration 671/1500... Est. remaining: 7m 28sRunning iteration 681/1500... Est. remaining: 7m 22sRunning iteration 691/1500... Est. remaining: 7m 17sRunning iteration 701/1500... Est. remaining: 7m 11sbest_combination: {'lookbacks': [50, 50, 83], 'score': np.float64(1.12833825510693), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 5sRunning iteration 721/1500... Est. remaining: 7m 0sRunning iteration 731/1500... Est. remaining: 6m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,643,451,271
Annual Return: 43.37%
Sharpe Ratio: 1.54597
Sortino Ratio: 1.452
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.228
Lookback periods: [50, 54, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 6m 50sRunning iteration 751/1500... Est. remaining: 6m 44sRunning iteration 761/1500... Est. remaining: 6m 39sRunning iteration 771/1500... Est. remaining: 6m 33sRunning iteration 781/1500... Est. remaining: 6m 28sRunning iteration 791/1500... Est. remaining: 6m 22sRunning iteration 801/1500... Est. remaining: 6m 17sbest_combination: {'lookbacks': [50, 54, 84], 'score': np.float64(1.2282272856185852), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 11sRunning iteration 821/1500... Est. remaining: 6m 6sRunning iteration 831/1500... Est. remaining: 6m 0sRunning iteration 841/1500... Est. remaining: 5m 55sRunning iteration 851/1500... Est. remaining: 5m 49sRunning iteration 861/1500... Est. remaining: 5m 44sRunning iteration 871/1500... Est. remaining: 5m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,267,957,435
Annual Return: 44.25%
Sharpe Ratio: 1.57915
Sortino Ratio: 1.482
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.407
Lookback periods: [52, 52, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 881/1500... Est. remaining: 5m 33sRunning iteration 891/1500... Est. remaining: 5m 28sRunning iteration 901/1500... Est. remaining: 5m 22sbest_combination: {'lookbacks': [52, 52, 85], 'score': np.float64(1.406817322269515), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 17sRunning iteration 921/1500... Est. remaining: 5m 12sRunning iteration 931/1500... Est. remaining: 5m 6sRunning iteration 941/1500... Est. remaining: 5m 1sRunning iteration 951/1500... Est. remaining: 4m 55sRunning iteration 961/1500... Est. remaining: 4m 50sRunning iteration 971/1500... Est. remaining: 4m 44sRunning iteration 981/1500... Est. remaining: 4m 39sRunning iteration 991/1500... Est. remaining: 4m 33sRunning iteration 1001/1500... Est. remaining: 4m 28sbest_combination: {'lookbacks': [52, 52, 85], 'score': np.float64(1.406817322269515), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 22sRunning iteration 1021/1500... Est. remaining: 4m 17sRunning iteration 1031/1500... Est. remaining: 4m 11sRunning iteration 1041/1500... Est. remaining: 4m 6sRunning iteration 1051/1500... Est. remaining: 4m 0sRunning iteration 1061/1500... Est. remaining: 3m 55sRunning iteration 1071/1500... Est. remaining: 3m 50sRunning iteration 1081/1500... Est. remaining: 3m 44sRunning iteration 1091/1500... Est. remaining: 3m 39sRunning iteration 1101/1500... Est. remaining: 3m 33sbest_combination: {'lookbacks': [52, 52, 85], 'score': np.float64(1.406817322269515), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 28sRunning iteration 1121/1500... Est. remaining: 3m 22sRunning iteration 1131/1500... Est. remaining: 3m 17sRunning iteration 1141/1500... Est. remaining: 3m 12sRunning iteration 1151/1500... Est. remaining: 3m 6sRunning iteration 1161/1500... Est. remaining: 3m 1sRunning iteration 1171/1500... Est. remaining: 2m 55sRunning iteration 1181/1500... Est. remaining: 2m 50sRunning iteration 1191/1500... Est. remaining: 2m 45sRunning iteration 1201/1500... Est. remaining: 2m 39sbest_combination: {'lookbacks': [52, 52, 85], 'score': np.float64(1.406817322269515), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 34sRunning iteration 1221/1500... Est. remaining: 2m 29sRunning iteration 1231/1500... Est. remaining: 2m 23sRunning iteration 1241/1500... Est. remaining: 2m 18sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 7sRunning iteration 1271/1500... Est. remaining: 2m 2sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 51sRunning iteration 1301/1500... Est. remaining: 1m 46sbest_combination: {'lookbacks': [52, 52, 85], 'score': np.float64(1.406817322269515), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 30sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,997,435,493
Annual Return: 45.09%
Sharpe Ratio: 1.59229
Sortino Ratio: 1.501
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.524
Lookback periods: [51, 54, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.5235016469739695), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,864,014,625
Annual Return: 44.94%
Sharpe Ratio: 1.60063
Sortino Ratio: 1.506
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.527
Lookback periods: [50, 54, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.3 minutes
Best normalized score: 1.53
best_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.5269898028367332), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 54, 83] (score: 1.5270)

Monte Carlo simulation completed in 13.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 54, 83] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,864,014,625.05
Average Annualized Gain: 44.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Sun Aug 24 14:52:26 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $724,436,422
Annual Return: 38.11%
Sharpe Ratio: 1.32336
Sortino Ratio: 1.232
Max Drawdown: -53.2%
Avg Drawdown: -11.7%
Normalized Score: -0.882
Lookback periods: [55, 86, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,371,841,520
Annual Return: 48.70%
Sharpe Ratio: 1.57599
Sortino Ratio: 1.540
Max Drawdown: -60.2%
Avg Drawdown: -10.5%
Normalized Score: 0.852
Lookback periods: [155, 158, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 21sRunning iteration 21/1500... Est. remaining: 20m 31sRunning iteration 31/1500... Est. remaining: 17m 54sRunning iteration 41/1500... Est. remaining: 17m 10sRunning iteration 51/1500... Est. remaining: 16m 12sRunning iteration 61/1500... Est. remaining: 15m 28sRunning iteration 71/1500... Est. remaining: 14m 55sRunning iteration 81/1500... Est. remaining: 14m 37sRunning iteration 91/1500... Est. remaining: 14m 18sRunning iteration 101/1500... Est. remaining: 13m 59sbest_combination: {'lookbacks': [155, 158, 174], 'score': np.float64(0.8516412205226362), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 44sRunning iteration 121/1500... Est. remaining: 13m 31sRunning iteration 131/1500... Est. remaining: 13m 18sRunning iteration 141/1500... Est. remaining: 13m 7sRunning iteration 151/1500... Est. remaining: 12m 56sRunning iteration 161/1500... Est. remaining: 12m 46sRunning iteration 171/1500... Est. remaining: 12m 37sRunning iteration 181/1500... Est. remaining: 12m 28sRunning iteration 191/1500... Est. remaining: 12m 21sRunning iteration 201/1500... Est. remaining: 12m 15sbest_combination: {'lookbacks': [155, 158, 174], 'score': np.float64(0.8516412205226362), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 6sRunning iteration 221/1500... Est. remaining: 12m 0sRunning iteration 231/1500... Est. remaining: 11m 53sRunning iteration 241/1500... Est. remaining: 11m 46sRunning iteration 251/1500... Est. remaining: 11m 38sRunning iteration 261/1500... Est. remaining: 11m 32sRunning iteration 271/1500... Est. remaining: 11m 25sRunning iteration 281/1500... Est. remaining: 11m 18sRunning iteration 291/1500... Est. remaining: 11m 11sRunning iteration 301/1500... Est. remaining: 11m 4sbest_combination: {'lookbacks': [155, 158, 174], 'score': np.float64(0.8516412205226362), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 57sRunning iteration 321/1500... Est. remaining: 10m 51sRunning iteration 331/1500... Est. remaining: 10m 45sRunning iteration 341/1500... Est. remaining: 10m 38sRunning iteration 351/1500... Est. remaining: 10m 32sRunning iteration 361/1500... Est. remaining: 10m 26sRunning iteration 371/1500... Est. remaining: 10m 19sRunning iteration 381/1500... Est. remaining: 10m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,624,431,828
Annual Return: 49.24%
Sharpe Ratio: 1.60609
Sortino Ratio: 1.568
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 1.091
Lookback periods: [154, 159, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 10m 11sRunning iteration 401/1500... Est. remaining: 10m 5sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(1.0906433990077238), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 59sRunning iteration 421/1500... Est. remaining: 9m 53sRunning iteration 431/1500... Est. remaining: 9m 47sRunning iteration 441/1500... Est. remaining: 9m 41sRunning iteration 451/1500... Est. remaining: 9m 35sRunning iteration 461/1500... Est. remaining: 9m 29sRunning iteration 471/1500... Est. remaining: 9m 23sRunning iteration 481/1500... Est. remaining: 9m 17sRunning iteration 491/1500... Est. remaining: 9m 11sRunning iteration 501/1500... Est. remaining: 9m 5sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(1.0906433990077238), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 0sRunning iteration 521/1500... Est. remaining: 8m 54sRunning iteration 531/1500... Est. remaining: 8m 48sRunning iteration 541/1500... Est. remaining: 8m 42sRunning iteration 551/1500... Est. remaining: 8m 37sRunning iteration 561/1500... Est. remaining: 8m 31sRunning iteration 571/1500... Est. remaining: 8m 25sRunning iteration 581/1500... Est. remaining: 8m 20sRunning iteration 591/1500... Est. remaining: 8m 14sRunning iteration 601/1500... Est. remaining: 8m 8sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(1.0906433990077238), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 3sRunning iteration 621/1500... Est. remaining: 7m 57sRunning iteration 631/1500... Est. remaining: 7m 52sRunning iteration 641/1500... Est. remaining: 7m 46sRunning iteration 651/1500... Est. remaining: 7m 40sRunning iteration 661/1500... Est. remaining: 7m 34sRunning iteration 671/1500... Est. remaining: 7m 29sRunning iteration 681/1500... Est. remaining: 7m 23sRunning iteration 691/1500... Est. remaining: 7m 18sRunning iteration 701/1500... Est. remaining: 7m 12sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(1.0906433990077238), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 7sRunning iteration 721/1500... Est. remaining: 7m 1sRunning iteration 731/1500... Est. remaining: 6m 56sRunning iteration 741/1500... Est. remaining: 6m 50sRunning iteration 751/1500... Est. remaining: 6m 45sRunning iteration 761/1500... Est. remaining: 6m 39sRunning iteration 771/1500... Est. remaining: 6m 34sRunning iteration 781/1500... Est. remaining: 6m 28sRunning iteration 791/1500... Est. remaining: 6m 23sRunning iteration 801/1500... Est. remaining: 6m 17sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(1.0906433990077238), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 12sRunning iteration 821/1500... Est. remaining: 6m 6sRunning iteration 831/1500... Est. remaining: 6m 1sRunning iteration 841/1500... Est. remaining: 5m 55sRunning iteration 851/1500... Est. remaining: 5m 50sRunning iteration 861/1500... Est. remaining: 5m 45sRunning iteration 871/1500... Est. remaining: 5m 39sRunning iteration 881/1500... Est. remaining: 5m 34sRunning iteration 891/1500... Est. remaining: 5m 28sRunning iteration 901/1500... Est. remaining: 5m 23sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(1.0906433990077238), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 18sRunning iteration 921/1500... Est. remaining: 5m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,836,029,240
Annual Return: 48.91%
Sharpe Ratio: 1.59924
Sortino Ratio: 1.566
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.112
Lookback periods: [156, 160, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 5m 7sRunning iteration 941/1500... Est. remaining: 5m 2sRunning iteration 951/1500... Est. remaining: 4m 57sRunning iteration 961/1500... Est. remaining: 4m 51sRunning iteration 971/1500... Est. remaining: 4m 46sRunning iteration 981/1500... Est. remaining: 4m 40sRunning iteration 991/1500... Est. remaining: 4m 35sRunning iteration 1001/1500... Est. remaining: 4m 29sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.1118860036712301), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 24sRunning iteration 1021/1500... Est. remaining: 4m 18sRunning iteration 1031/1500... Est. remaining: 4m 13sRunning iteration 1041/1500... Est. remaining: 4m 8sRunning iteration 1051/1500... Est. remaining: 4m 2sRunning iteration 1061/1500... Est. remaining: 3m 57sRunning iteration 1071/1500... Est. remaining: 3m 51sRunning iteration 1081/1500... Est. remaining: 3m 46sRunning iteration 1091/1500... Est. remaining: 3m 41sRunning iteration 1101/1500... Est. remaining: 3m 35sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.1118860036712301), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 30sRunning iteration 1121/1500... Est. remaining: 3m 24sRunning iteration 1131/1500... Est. remaining: 3m 19sRunning iteration 1141/1500... Est. remaining: 3m 14sRunning iteration 1151/1500... Est. remaining: 3m 8sRunning iteration 1161/1500... Est. remaining: 3m 3sRunning iteration 1171/1500... Est. remaining: 2m 57sRunning iteration 1181/1500... Est. remaining: 2m 52sRunning iteration 1191/1500... Est. remaining: 2m 47sRunning iteration 1201/1500... Est. remaining: 2m 41sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.1118860036712301), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 36sRunning iteration 1221/1500... Est. remaining: 2m 30sRunning iteration 1231/1500... Est. remaining: 2m 25sRunning iteration 1241/1500... Est. remaining: 2m 20sRunning iteration 1251/1500... Est. remaining: 2m 14sRunning iteration 1261/1500... Est. remaining: 2m 9sRunning iteration 1271/1500... Est. remaining: 2m 3sRunning iteration 1281/1500... Est. remaining: 1m 58sRunning iteration 1291/1500... Est. remaining: 1m 53sRunning iteration 1301/1500... Est. remaining: 1m 47sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.1118860036712301), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 42sRunning iteration 1321/1500... Est. remaining: 1m 36sRunning iteration 1331/1500... Est. remaining: 1m 31sRunning iteration 1341/1500... Est. remaining: 1m 26sRunning iteration 1351/1500... Est. remaining: 1m 20sRunning iteration 1361/1500... Est. remaining: 1m 15sRunning iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 4sRunning iteration 1391/1500... Est. remaining: 0m 59sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.1118860036712301), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.4 minutes
Best normalized score: 1.11
best_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.1118860036712301), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 160, 168] (score: 1.1119)

Monte Carlo simulation completed in 13.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 160, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 116 selections (27.9%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,836,029,239.59
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Sun Aug 24 15:05:59 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $353,914,860
Annual Return: 35.28%
Sharpe Ratio: 1.24417
Sortino Ratio: 1.159
Max Drawdown: -44.8%
Avg Drawdown: -11.5%
Normalized Score: -1.042
Lookback periods: [50, 78, 123] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,658,578,722
Annual Return: 43.39%
Sharpe Ratio: 1.45537
Sortino Ratio: 1.402
Max Drawdown: -57.9%
Avg Drawdown: -12.2%
Normalized Score: -0.187
Lookback periods: [137, 149, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 48sRunning iteration 21/1500... Est. remaining: 20m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,147,593,064
Annual Return: 45.24%
Sharpe Ratio: 1.47687
Sortino Ratio: 1.444
Max Drawdown: -61.3%
Avg Drawdown: -13.0%
Normalized Score: -0.163
Lookback periods: [129, 153, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,918,937,488
Annual Return: 47.40%
Sharpe Ratio: 1.53789
Sortino Ratio: 1.508
Max Drawdown: -59.0%
Avg Drawdown: -10.3%
Normalized Score: 0.706
Lookback periods: [155, 167, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 55sRunning iteration 51/1500... Est. remaining: 16m 48sRunning iteration 61/1500... Est. remaining: 15m 59sRunning iteration 71/1500... Est. remaining: 15m 20sRunning iteration 81/1500... Est. remaining: 14m 48sRunning iteration 91/1500... Est. remaining: 14m 25sRunning iteration 101/1500... Est. remaining: 14m 4sbest_combination: {'lookbacks': [155, 167, 171], 'score': np.float64(0.7058855159072778), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 47sRunning iteration 121/1500... Est. remaining: 13m 32sRunning iteration 131/1500... Est. remaining: 13m 19sRunning iteration 141/1500... Est. remaining: 13m 7sRunning iteration 151/1500... Est. remaining: 12m 56sRunning iteration 161/1500... Est. remaining: 12m 46sRunning iteration 171/1500... Est. remaining: 12m 37sRunning iteration 181/1500... Est. remaining: 12m 29sRunning iteration 191/1500... Est. remaining: 12m 20sRunning iteration 201/1500... Est. remaining: 12m 12sbest_combination: {'lookbacks': [155, 167, 171], 'score': np.float64(0.7058855159072778), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 4sRunning iteration 221/1500... Est. remaining: 11m 56sRunning iteration 231/1500... Est. remaining: 11m 49sRunning iteration 241/1500... Est. remaining: 11m 41sRunning iteration 251/1500... Est. remaining: 11m 34sRunning iteration 261/1500... Est. remaining: 11m 27sRunning iteration 271/1500... Est. remaining: 11m 20sRunning iteration 281/1500... Est. remaining: 11m 13sRunning iteration 291/1500... Est. remaining: 11m 8sRunning iteration 301/1500... Est. remaining: 11m 3sbest_combination: {'lookbacks': [155, 167, 171], 'score': np.float64(0.7058855159072778), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 57sRunning iteration 321/1500... Est. remaining: 10m 51sRunning iteration 331/1500... Est. remaining: 10m 45sRunning iteration 341/1500... Est. remaining: 10m 40sRunning iteration 351/1500... Est. remaining: 10m 34sRunning iteration 361/1500... Est. remaining: 10m 28sRunning iteration 371/1500... Est. remaining: 10m 22sRunning iteration 381/1500... Est. remaining: 10m 16sRunning iteration 391/1500... Est. remaining: 10m 10sRunning iteration 401/1500... Est. remaining: 10m 5sbest_combination: {'lookbacks': [155, 167, 171], 'score': np.float64(0.7058855159072778), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,787,460,186
Annual Return: 49.30%
Sharpe Ratio: 1.61007
Sortino Ratio: 1.577
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 1.116
Lookback periods: [154, 159, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 10m 3sRunning iteration 421/1500... Est. remaining: 9m 57sRunning iteration 431/1500... Est. remaining: 9m 51sRunning iteration 441/1500... Est. remaining: 9m 45sRunning iteration 451/1500... Est. remaining: 9m 39sRunning iteration 461/1500... Est. remaining: 9m 33sRunning iteration 471/1500... Est. remaining: 9m 27sRunning iteration 481/1500... Est. remaining: 9m 21sRunning iteration 491/1500... Est. remaining: 9m 15sRunning iteration 501/1500... Est. remaining: 9m 10sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 4sRunning iteration 521/1500... Est. remaining: 8m 59sRunning iteration 531/1500... Est. remaining: 8m 53sRunning iteration 541/1500... Est. remaining: 8m 47sRunning iteration 551/1500... Est. remaining: 8m 41sRunning iteration 561/1500... Est. remaining: 8m 36sRunning iteration 571/1500... Est. remaining: 8m 30sRunning iteration 581/1500... Est. remaining: 8m 24sRunning iteration 591/1500... Est. remaining: 8m 18sRunning iteration 601/1500... Est. remaining: 8m 12sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 7sRunning iteration 621/1500... Est. remaining: 8m 1sRunning iteration 631/1500... Est. remaining: 7m 55sRunning iteration 641/1500... Est. remaining: 7m 50sRunning iteration 651/1500... Est. remaining: 7m 44sRunning iteration 661/1500... Est. remaining: 7m 38sRunning iteration 671/1500... Est. remaining: 7m 33sRunning iteration 681/1500... Est. remaining: 7m 27sRunning iteration 691/1500... Est. remaining: 7m 22sRunning iteration 701/1500... Est. remaining: 7m 16sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 11sRunning iteration 721/1500... Est. remaining: 7m 5sRunning iteration 731/1500... Est. remaining: 6m 59sRunning iteration 741/1500... Est. remaining: 6m 54sRunning iteration 751/1500... Est. remaining: 6m 48sRunning iteration 761/1500... Est. remaining: 6m 43sRunning iteration 771/1500... Est. remaining: 6m 37sRunning iteration 781/1500... Est. remaining: 6m 32sRunning iteration 791/1500... Est. remaining: 6m 27sRunning iteration 801/1500... Est. remaining: 6m 22sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 16sRunning iteration 821/1500... Est. remaining: 6m 11sRunning iteration 831/1500... Est. remaining: 6m 5sRunning iteration 841/1500... Est. remaining: 5m 59sRunning iteration 851/1500... Est. remaining: 5m 54sRunning iteration 861/1500... Est. remaining: 5m 48sRunning iteration 871/1500... Est. remaining: 5m 43sRunning iteration 881/1500... Est. remaining: 5m 37sRunning iteration 891/1500... Est. remaining: 5m 31sRunning iteration 901/1500... Est. remaining: 5m 26sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 20sRunning iteration 921/1500... Est. remaining: 5m 15sRunning iteration 931/1500... Est. remaining: 5m 9sRunning iteration 941/1500... Est. remaining: 5m 4sRunning iteration 951/1500... Est. remaining: 4m 58sRunning iteration 961/1500... Est. remaining: 4m 53sRunning iteration 971/1500... Est. remaining: 4m 47sRunning iteration 981/1500... Est. remaining: 4m 42sRunning iteration 991/1500... Est. remaining: 4m 36sRunning iteration 1001/1500... Est. remaining: 4m 31sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 25sRunning iteration 1021/1500... Est. remaining: 4m 19sRunning iteration 1031/1500... Est. remaining: 4m 14sRunning iteration 1041/1500... Est. remaining: 4m 8sRunning iteration 1051/1500... Est. remaining: 4m 3sRunning iteration 1061/1500... Est. remaining: 3m 58sRunning iteration 1071/1500... Est. remaining: 3m 52sRunning iteration 1081/1500... Est. remaining: 3m 47sRunning iteration 1091/1500... Est. remaining: 3m 41sRunning iteration 1101/1500... Est. remaining: 3m 36sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 30sRunning iteration 1121/1500... Est. remaining: 3m 25sRunning iteration 1131/1500... Est. remaining: 3m 20sRunning iteration 1141/1500... Est. remaining: 3m 14sRunning iteration 1151/1500... Est. remaining: 3m 9sRunning iteration 1161/1500... Est. remaining: 3m 3sRunning iteration 1171/1500... Est. remaining: 2m 58sRunning iteration 1181/1500... Est. remaining: 2m 52sRunning iteration 1191/1500... Est. remaining: 2m 47sRunning iteration 1201/1500... Est. remaining: 2m 41sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 36sRunning iteration 1221/1500... Est. remaining: 2m 31sRunning iteration 1231/1500... Est. remaining: 2m 25sRunning iteration 1241/1500... Est. remaining: 2m 20sRunning iteration 1251/1500... Est. remaining: 2m 14sRunning iteration 1261/1500... Est. remaining: 2m 9sRunning iteration 1271/1500... Est. remaining: 2m 3sRunning iteration 1281/1500... Est. remaining: 1m 58sRunning iteration 1291/1500... Est. remaining: 1m 53sRunning iteration 1301/1500... Est. remaining: 1m 47sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 42sRunning iteration 1321/1500... Est. remaining: 1m 36sRunning iteration 1331/1500... Est. remaining: 1m 31sRunning iteration 1341/1500... Est. remaining: 1m 26sRunning iteration 1351/1500... Est. remaining: 1m 20sRunning iteration 1361/1500... Est. remaining: 1m 15sRunning iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 4sRunning iteration 1391/1500... Est. remaining: 0m 59sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.4 minutes
Best normalized score: 1.12
best_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [154, 159, 166] (score: 1.1163)

Monte Carlo simulation completed in 13.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 159, 166] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,787,460,185.92
Average Annualized Gain: 49.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Sun Aug 24 15:19:34 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-24T15:19:34.783707
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.0113
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,291,492,276
Annual Return: 40.43%
Sharpe Ratio: 1.37085
Sortino Ratio: 1.310
Max Drawdown: -68.5%
Avg Drawdown: -13.3%
Normalized Score: -1.246
Lookback periods: [123, 136, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $840,743,389
Annual Return: 38.70%
Sharpe Ratio: 1.33635
Sortino Ratio: 1.243
Max Drawdown: -58.8%
Avg Drawdown: -12.0%
Normalized Score: -1.026
Lookback periods: [56, 115, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,269,623,327
Annual Return: 40.36%
Sharpe Ratio: 1.34847
Sortino Ratio: 1.295
Max Drawdown: -59.7%
Avg Drawdown: -13.1%
Normalized Score: -0.974
Lookback periods: [115, 123, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,653,248,244
Annual Return: 43.38%
Sharpe Ratio: 1.43954
Sortino Ratio: 1.389
Max Drawdown: -59.7%
Avg Drawdown: -12.7%
Normalized Score: -0.372
Lookback periods: [145, 148, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 34m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,165,101,040
Annual Return: 46.16%
Sharpe Ratio: 1.49414
Sortino Ratio: 1.459
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: 0.219
Lookback periods: [180, 185, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 25m 31sRunning iteration 31/1500... Est. remaining: 21m 27sRunning iteration 41/1500... Est. remaining: 19m 14sRunning iteration 51/1500... Est. remaining: 17m 54sRunning iteration 61/1500... Est. remaining: 16m 54sRunning iteration 71/1500... Est. remaining: 16m 14sRunning iteration 81/1500... Est. remaining: 15m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,195,961,114
Annual Return: 46.93%
Sharpe Ratio: 1.52423
Sortino Ratio: 1.489
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.535
Lookback periods: [156, 161, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 15m 29sRunning iteration 101/1500... Est. remaining: 15m 5sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,434,010,893
Annual Return: 47.71%
Sharpe Ratio: 1.53887
Sortino Ratio: 1.509
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.537
Lookback periods: [181, 190, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 15m 1sRunning iteration 121/1500... Est. remaining: 14m 41sRunning iteration 131/1500... Est. remaining: 14m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,454,038,701
Annual Return: 40.91%
Sharpe Ratio: 1.47769
Sortino Ratio: 1.367
Max Drawdown: -34.7%
Avg Drawdown: -9.8%
Normalized Score: 0.669
Lookback periods: [50, 57, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 14m 21sRunning iteration 151/1500... Est. remaining: 14m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,197,560,425
Annual Return: 46.93%
Sharpe Ratio: 1.53065
Sortino Ratio: 1.496
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.673
Lookback periods: [156, 163, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 14m 2sRunning iteration 171/1500... Est. remaining: 13m 49sRunning iteration 181/1500... Est. remaining: 13m 37sRunning iteration 191/1500... Est. remaining: 13m 25sRunning iteration 201/1500... Est. remaining: 13m 14sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 211/1500... Est. remaining: 13m 3sRunning iteration 221/1500... Est. remaining: 12m 53sRunning iteration 231/1500... Est. remaining: 12m 43sRunning iteration 241/1500... Est. remaining: 12m 33sRunning iteration 251/1500... Est. remaining: 12m 24sRunning iteration 261/1500... Est. remaining: 12m 15sRunning iteration 271/1500... Est. remaining: 12m 6sRunning iteration 281/1500... Est. remaining: 11m 58sRunning iteration 291/1500... Est. remaining: 11m 50sRunning iteration 301/1500... Est. remaining: 11m 42sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 35sRunning iteration 321/1500... Est. remaining: 11m 27sRunning iteration 331/1500... Est. remaining: 11m 20sRunning iteration 341/1500... Est. remaining: 11m 12sRunning iteration 351/1500... Est. remaining: 11m 5sRunning iteration 361/1500... Est. remaining: 10m 58sRunning iteration 371/1500... Est. remaining: 10m 51sRunning iteration 381/1500... Est. remaining: 10m 44sRunning iteration 391/1500... Est. remaining: 10m 37sRunning iteration 401/1500... Est. remaining: 10m 31sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,341,742,086
Annual Return: 47.65%
Sharpe Ratio: 1.56363
Sortino Ratio: 1.525
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 0.714
Lookback periods: [140, 155, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 10m 21sRunning iteration 431/1500... Est. remaining: 10m 14sRunning iteration 441/1500... Est. remaining: 10m 8sRunning iteration 451/1500... Est. remaining: 10m 1sRunning iteration 461/1500... Est. remaining: 9m 55sRunning iteration 471/1500... Est. remaining: 9m 48sRunning iteration 481/1500... Est. remaining: 9m 42sRunning iteration 491/1500... Est. remaining: 9m 35sRunning iteration 501/1500... Est. remaining: 9m 29sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 23sRunning iteration 521/1500... Est. remaining: 9m 16sRunning iteration 531/1500... Est. remaining: 9m 10sRunning iteration 541/1500... Est. remaining: 9m 4sRunning iteration 551/1500... Est. remaining: 8m 58sRunning iteration 561/1500... Est. remaining: 8m 52sRunning iteration 571/1500... Est. remaining: 8m 46sRunning iteration 581/1500... Est. remaining: 8m 40sRunning iteration 591/1500... Est. remaining: 8m 33sRunning iteration 601/1500... Est. remaining: 8m 28sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 22sRunning iteration 621/1500... Est. remaining: 8m 16sRunning iteration 631/1500... Est. remaining: 8m 10sRunning iteration 641/1500... Est. remaining: 8m 4sRunning iteration 651/1500... Est. remaining: 7m 58sRunning iteration 661/1500... Est. remaining: 7m 52sRunning iteration 671/1500... Est. remaining: 7m 46sRunning iteration 681/1500... Est. remaining: 7m 40sRunning iteration 691/1500... Est. remaining: 7m 35sRunning iteration 701/1500... Est. remaining: 7m 29sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 23sRunning iteration 721/1500... Est. remaining: 7m 17sRunning iteration 731/1500... Est. remaining: 7m 12sRunning iteration 741/1500... Est. remaining: 7m 6sRunning iteration 751/1500... Est. remaining: 7m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,605,130,437
Annual Return: 47.80%
Sharpe Ratio: 1.57394
Sortino Ratio: 1.533
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 0.804
Lookback periods: [138, 155, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 6m 56sRunning iteration 771/1500... Est. remaining: 6m 50sRunning iteration 781/1500... Est. remaining: 6m 44sRunning iteration 791/1500... Est. remaining: 6m 39sRunning iteration 801/1500... Est. remaining: 6m 33sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 27sRunning iteration 821/1500... Est. remaining: 6m 21sRunning iteration 831/1500... Est. remaining: 6m 15sRunning iteration 841/1500... Est. remaining: 6m 10sRunning iteration 851/1500... Est. remaining: 6m 4sRunning iteration 861/1500... Est. remaining: 5m 59sRunning iteration 871/1500... Est. remaining: 5m 53sRunning iteration 881/1500... Est. remaining: 5m 47sRunning iteration 891/1500... Est. remaining: 5m 41sRunning iteration 901/1500... Est. remaining: 5m 36sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 30sRunning iteration 921/1500... Est. remaining: 5m 24sRunning iteration 931/1500... Est. remaining: 5m 18sRunning iteration 941/1500... Est. remaining: 5m 13sRunning iteration 951/1500... Est. remaining: 5m 7sRunning iteration 961/1500... Est. remaining: 5m 1sRunning iteration 971/1500... Est. remaining: 4m 55sRunning iteration 981/1500... Est. remaining: 4m 50sRunning iteration 991/1500... Est. remaining: 4m 44sRunning iteration 1001/1500... Est. remaining: 4m 38sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 32sRunning iteration 1021/1500... Est. remaining: 4m 27sRunning iteration 1031/1500... Est. remaining: 4m 21sRunning iteration 1041/1500... Est. remaining: 4m 15sRunning iteration 1051/1500... Est. remaining: 4m 10sRunning iteration 1061/1500... Est. remaining: 4m 4sRunning iteration 1071/1500... Est. remaining: 3m 58sRunning iteration 1081/1500... Est. remaining: 3m 53sRunning iteration 1091/1500... Est. remaining: 3m 47sRunning iteration 1101/1500... Est. remaining: 3m 42sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 36sRunning iteration 1121/1500... Est. remaining: 3m 30sRunning iteration 1131/1500... Est. remaining: 3m 25sRunning iteration 1141/1500... Est. remaining: 3m 19sRunning iteration 1151/1500... Est. remaining: 3m 14sRunning iteration 1161/1500... Est. remaining: 3m 8sRunning iteration 1171/1500... Est. remaining: 3m 2sRunning iteration 1181/1500... Est. remaining: 2m 57sRunning iteration 1191/1500... Est. remaining: 2m 51sRunning iteration 1201/1500... Est. remaining: 2m 46sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 40sRunning iteration 1221/1500... Est. remaining: 2m 34sRunning iteration 1231/1500... Est. remaining: 2m 29sRunning iteration 1241/1500... Est. remaining: 2m 23sRunning iteration 1251/1500... Est. remaining: 2m 18sRunning iteration 1261/1500... Est. remaining: 2m 12sRunning iteration 1271/1500... Est. remaining: 2m 7sRunning iteration 1281/1500... Est. remaining: 2m 1sRunning iteration 1291/1500... Est. remaining: 1m 56sRunning iteration 1301/1500... Est. remaining: 1m 50sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 44sRunning iteration 1321/1500... Est. remaining: 1m 39sRunning iteration 1331/1500... Est. remaining: 1m 33sRunning iteration 1341/1500... Est. remaining: 1m 28sRunning iteration 1351/1500... Est. remaining: 1m 22sRunning iteration 1361/1500... Est. remaining: 1m 17sRunning iteration 1371/1500... Est. remaining: 1m 11sRunning iteration 1381/1500... Est. remaining: 1m 6sRunning iteration 1391/1500... Est. remaining: 1m 0sRunning iteration 1401/1500... Est. remaining: 0m 55sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 49sRunning iteration 1421/1500... Est. remaining: 0m 44sRunning iteration 1431/1500... Est. remaining: 0m 38sRunning iteration 1441/1500... Est. remaining: 0m 33sRunning iteration 1451/1500... Est. remaining: 0m 27sRunning iteration 1461/1500... Est. remaining: 0m 22sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 11sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.8 minutes
Best normalized score: 0.80
best_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [135, 155, 173] (score: 1.0113)

Monte Carlo simulation completed in 13.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [138, 155, 158] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 111 selections (26.7%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $7,605,130,437.34
Average Annualized Gain: 47.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Sun Aug 24 15:33:28 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $527,430,673
Annual Return: 36.85%
Sharpe Ratio: 1.25788
Sortino Ratio: 1.182
Max Drawdown: -65.1%
Avg Drawdown: -14.5%
Normalized Score: -1.974
Lookback periods: [92, 117, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,495,288,158
Annual Return: 41.03%
Sharpe Ratio: 1.38995
Sortino Ratio: 1.320
Max Drawdown: -56.9%
Avg Drawdown: -12.8%
Normalized Score: -0.689
Lookback periods: [89, 112, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,020,568,347
Annual Return: 45.11%
Sharpe Ratio: 1.47369
Sortino Ratio: 1.435
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.104
Lookback periods: [147, 186, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 30sRunning iteration 21/1500... Est. remaining: 22m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,860,532,749
Annual Return: 45.91%
Sharpe Ratio: 1.49259
Sortino Ratio: 1.456
Max Drawdown: -59.0%
Avg Drawdown: -12.1%
Normalized Score: 0.157
Lookback periods: [147, 184, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 33sRunning iteration 41/1500... Est. remaining: 18m 38sRunning iteration 51/1500... Est. remaining: 17m 27sRunning iteration 61/1500... Est. remaining: 16m 34sRunning iteration 71/1500... Est. remaining: 16m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,495,397,387
Annual Return: 43.13%
Sharpe Ratio: 1.46628
Sortino Ratio: 1.402
Max Drawdown: -52.3%
Avg Drawdown: -10.7%
Normalized Score: 0.204
Lookback periods: [87, 106, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 15m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,470,169,644
Annual Return: 46.41%
Sharpe Ratio: 1.50744
Sortino Ratio: 1.478
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.291
Lookback periods: [146, 172, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 15m 39sRunning iteration 101/1500... Est. remaining: 15m 14sbest_combination: {'lookbacks': [146, 172, 200], 'score': np.float64(0.2908580394412583), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 54sRunning iteration 121/1500... Est. remaining: 14m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,362,473,602
Annual Return: 47.05%
Sharpe Ratio: 1.53746
Sortino Ratio: 1.512
Max Drawdown: -64.6%
Avg Drawdown: -11.1%
Normalized Score: 0.362
Lookback periods: [158, 160, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 14m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,151,482,719
Annual Return: 46.90%
Sharpe Ratio: 1.53603
Sortino Ratio: 1.498
Max Drawdown: -57.2%
Avg Drawdown: -11.9%
Normalized Score: 0.453
Lookback periods: [125, 155, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 14m 32sRunning iteration 151/1500... Est. remaining: 14m 16sRunning iteration 161/1500... Est. remaining: 14m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,503,342,580
Annual Return: 48.76%
Sharpe Ratio: 1.60294
Sortino Ratio: 1.566
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 0.869
Lookback periods: [134, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 14m 3sRunning iteration 181/1500... Est. remaining: 13m 51sRunning iteration 191/1500... Est. remaining: 13m 38sRunning iteration 201/1500... Est. remaining: 13m 26sbest_combination: {'lookbacks': [134, 155, 172], 'score': np.float64(0.8692653645787572), 'visits': 1}
Running iteration 211/1500... Est. remaining: 13m 15sRunning iteration 221/1500... Est. remaining: 13m 4sRunning iteration 231/1500... Est. remaining: 12m 53sRunning iteration 241/1500... Est. remaining: 12m 44sRunning iteration 251/1500... Est. remaining: 12m 34sRunning iteration 261/1500... Est. remaining: 12m 25sRunning iteration 271/1500... Est. remaining: 12m 17sRunning iteration 281/1500... Est. remaining: 12m 8sRunning iteration 291/1500... Est. remaining: 11m 59sRunning iteration 301/1500... Est. remaining: 11m 51sbest_combination: {'lookbacks': [134, 155, 172], 'score': np.float64(0.8692653645787572), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 43sRunning iteration 321/1500... Est. remaining: 11m 35sRunning iteration 331/1500... Est. remaining: 11m 27sRunning iteration 341/1500... Est. remaining: 11m 19sRunning iteration 351/1500... Est. remaining: 11m 12sRunning iteration 361/1500... Est. remaining: 11m 4sRunning iteration 371/1500... Est. remaining: 10m 56sRunning iteration 381/1500... Est. remaining: 10m 49sRunning iteration 391/1500... Est. remaining: 10m 42sRunning iteration 401/1500... Est. remaining: 10m 36sbest_combination: {'lookbacks': [134, 155, 172], 'score': np.float64(0.8692653645787572), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 31sRunning iteration 421/1500... Est. remaining: 10m 25sRunning iteration 431/1500... Est. remaining: 10m 19sRunning iteration 441/1500... Est. remaining: 10m 14sRunning iteration 451/1500... Est. remaining: 10m 7sRunning iteration 461/1500... Est. remaining: 10m 0sRunning iteration 471/1500... Est. remaining: 9m 54sRunning iteration 481/1500... Est. remaining: 9m 47sRunning iteration 491/1500... Est. remaining: 9m 40sRunning iteration 501/1500... Est. remaining: 9m 34sbest_combination: {'lookbacks': [134, 155, 172], 'score': np.float64(0.8692653645787572), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 27sRunning iteration 521/1500... Est. remaining: 9m 22sRunning iteration 531/1500... Est. remaining: 9m 16sRunning iteration 541/1500... Est. remaining: 9m 10sRunning iteration 551/1500... Est. remaining: 9m 5sRunning iteration 561/1500... Est. remaining: 8m 59sRunning iteration 571/1500... Est. remaining: 8m 53sRunning iteration 581/1500... Est. remaining: 8m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,926,114,734
Annual Return: 42.06%
Sharpe Ratio: 1.52813
Sortino Ratio: 1.431
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.125
Lookback periods: [50, 57, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 8m 43sRunning iteration 601/1500... Est. remaining: 8m 37sbest_combination: {'lookbacks': [50, 57, 97], 'score': np.float64(1.1251598736555188), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,667,562,119
Annual Return: 43.40%
Sharpe Ratio: 1.56703
Sortino Ratio: 1.472
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.381
Lookback periods: [50, 51, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/1500... Est. remaining: 8m 32sRunning iteration 621/1500... Est. remaining: 8m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.046
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 8m 21sRunning iteration 641/1500... Est. remaining: 8m 14sRunning iteration 651/1500... Est. remaining: 8m 8sRunning iteration 661/1500... Est. remaining: 8m 2sRunning iteration 671/1500... Est. remaining: 7m 55sRunning iteration 681/1500... Est. remaining: 7m 49sRunning iteration 691/1500... Est. remaining: 7m 43sRunning iteration 701/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 31sRunning iteration 721/1500... Est. remaining: 7m 25sRunning iteration 731/1500... Est. remaining: 7m 18sRunning iteration 741/1500... Est. remaining: 7m 12sRunning iteration 751/1500... Est. remaining: 7m 6sRunning iteration 761/1500... Est. remaining: 7m 0sRunning iteration 771/1500... Est. remaining: 6m 54sRunning iteration 781/1500... Est. remaining: 6m 48sRunning iteration 791/1500... Est. remaining: 6m 42sRunning iteration 801/1500... Est. remaining: 6m 36sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 30sRunning iteration 821/1500... Est. remaining: 6m 24sRunning iteration 831/1500... Est. remaining: 6m 18sRunning iteration 841/1500... Est. remaining: 6m 12sRunning iteration 851/1500... Est. remaining: 6m 7sRunning iteration 861/1500... Est. remaining: 6m 1sRunning iteration 871/1500... Est. remaining: 5m 55sRunning iteration 881/1500... Est. remaining: 5m 49sRunning iteration 891/1500... Est. remaining: 5m 43sRunning iteration 901/1500... Est. remaining: 5m 37sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 32sRunning iteration 921/1500... Est. remaining: 5m 26sRunning iteration 931/1500... Est. remaining: 5m 20sRunning iteration 941/1500... Est. remaining: 5m 15sRunning iteration 951/1500... Est. remaining: 5m 9sRunning iteration 961/1500... Est. remaining: 5m 3sRunning iteration 971/1500... Est. remaining: 4m 58sRunning iteration 981/1500... Est. remaining: 4m 52sRunning iteration 991/1500... Est. remaining: 4m 46sRunning iteration 1001/1500... Est. remaining: 4m 41sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 35sRunning iteration 1021/1500... Est. remaining: 4m 29sRunning iteration 1031/1500... Est. remaining: 4m 23sRunning iteration 1041/1500... Est. remaining: 4m 17sRunning iteration 1051/1500... Est. remaining: 4m 12sRunning iteration 1061/1500... Est. remaining: 4m 6sRunning iteration 1071/1500... Est. remaining: 4m 0sRunning iteration 1081/1500... Est. remaining: 3m 54sRunning iteration 1091/1500... Est. remaining: 3m 49sRunning iteration 1101/1500... Est. remaining: 3m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 37sRunning iteration 1121/1500... Est. remaining: 3m 32sRunning iteration 1131/1500... Est. remaining: 3m 26sRunning iteration 1141/1500... Est. remaining: 3m 20sRunning iteration 1151/1500... Est. remaining: 3m 15sRunning iteration 1161/1500... Est. remaining: 3m 9sRunning iteration 1171/1500... Est. remaining: 3m 3sRunning iteration 1181/1500... Est. remaining: 2m 58sRunning iteration 1191/1500... Est. remaining: 2m 52sRunning iteration 1201/1500... Est. remaining: 2m 46sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 41sRunning iteration 1221/1500... Est. remaining: 2m 35sRunning iteration 1231/1500... Est. remaining: 2m 29sRunning iteration 1241/1500... Est. remaining: 2m 24sRunning iteration 1251/1500... Est. remaining: 2m 18sRunning iteration 1261/1500... Est. remaining: 2m 13sRunning iteration 1271/1500... Est. remaining: 2m 7sRunning iteration 1281/1500... Est. remaining: 2m 1sRunning iteration 1291/1500... Est. remaining: 1m 56sRunning iteration 1301/1500... Est. remaining: 1m 50sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 45sRunning iteration 1321/1500... Est. remaining: 1m 39sRunning iteration 1331/1500... Est. remaining: 1m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,188,708,617
Annual Return: 46.93%
Sharpe Ratio: 1.68323
Sortino Ratio: 1.602
Max Drawdown: -36.6%
Avg Drawdown: -7.9%
Normalized Score: 2.063
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1341/1500... Est. remaining: 1m 28sRunning iteration 1351/1500... Est. remaining: 1m 22sRunning iteration 1361/1500... Est. remaining: 1m 17sRunning iteration 1371/1500... Est. remaining: 1m 11sRunning iteration 1381/1500... Est. remaining: 1m 6sRunning iteration 1391/1500... Est. remaining: 1m 0sRunning iteration 1401/1500... Est. remaining: 0m 55sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 49sRunning iteration 1421/1500... Est. remaining: 0m 44sRunning iteration 1431/1500... Est. remaining: 0m 38sRunning iteration 1441/1500... Est. remaining: 0m 33sRunning iteration 1451/1500... Est. remaining: 0m 27sRunning iteration 1461/1500... Est. remaining: 0m 22sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.7 minutes
Best normalized score: 2.06
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 95] (score: 2.0629)

Monte Carlo simulation completed in 13.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 102 selections (24.5%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 82 selections (19.7%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $6,188,708,617.20
Average Annualized Gain: 46.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Sun Aug 24 15:47:20 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,419,817,285
Annual Return: 40.82%
Sharpe Ratio: 1.38221
Sortino Ratio: 1.313
Max Drawdown: -66.8%
Avg Drawdown: -13.8%
Normalized Score: -1.210
Lookback periods: [87, 159, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $607,976,984
Annual Return: 37.41%
Sharpe Ratio: 1.33001
Sortino Ratio: 1.232
Max Drawdown: -53.2%
Avg Drawdown: -12.0%
Normalized Score: -0.981
Lookback periods: [55, 86, 117] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 29sRunning iteration 21/1500... Est. remaining: 20m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,196,078,657
Annual Return: 40.12%
Sharpe Ratio: 1.38057
Sortino Ratio: 1.303
Max Drawdown: -52.3%
Avg Drawdown: -11.6%
Normalized Score: -0.464
Lookback periods: [88, 90, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,002,524,103
Annual Return: 45.09%
Sharpe Ratio: 1.47322
Sortino Ratio: 1.441
Max Drawdown: -63.5%
Avg Drawdown: -12.6%
Normalized Score: -0.202
Lookback periods: [133, 144, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $937,299,439
Annual Return: 39.14%
Sharpe Ratio: 1.37947
Sortino Ratio: 1.280
Max Drawdown: -41.9%
Avg Drawdown: -10.6%
Normalized Score: -0.092
Lookback periods: [50, 52, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 17m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,022,476,193
Annual Return: 46.81%
Sharpe Ratio: 1.53824
Sortino Ratio: 1.498
Max Drawdown: -62.4%
Avg Drawdown: -11.7%
Normalized Score: 0.298
Lookback periods: [128, 158, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 56sRunning iteration 71/1500... Est. remaining: 16m 12sRunning iteration 81/1500... Est. remaining: 15m 36sRunning iteration 91/1500... Est. remaining: 15m 7sRunning iteration 101/1500... Est. remaining: 14m 43sbest_combination: {'lookbacks': [128, 158, 178], 'score': np.float64(0.29796502463514635), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,180,867,259
Annual Return: 47.56%
Sharpe Ratio: 1.53986
Sortino Ratio: 1.511
Max Drawdown: -63.5%
Avg Drawdown: -12.0%
Normalized Score: 0.314
Lookback periods: [153, 154, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 39sRunning iteration 121/1500... Est. remaining: 14m 21sRunning iteration 131/1500... Est. remaining: 14m 3sRunning iteration 141/1500... Est. remaining: 13m 48sRunning iteration 151/1500... Est. remaining: 13m 34sRunning iteration 161/1500... Est. remaining: 13m 21sRunning iteration 171/1500... Est. remaining: 13m 9sRunning iteration 181/1500... Est. remaining: 12m 58sRunning iteration 191/1500... Est. remaining: 12m 47sRunning iteration 201/1500... Est. remaining: 12m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,037,178,359
Annual Return: 48.04%
Sharpe Ratio: 1.57175
Sortino Ratio: 1.540
Max Drawdown: -62.4%
Avg Drawdown: -11.5%
Normalized Score: 0.555
Lookback periods: [128, 158, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [128, 158, 171], 'score': np.float64(0.5545938674433021), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,448,156,637
Annual Return: 47.72%
Sharpe Ratio: 1.56614
Sortino Ratio: 1.529
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.675
Lookback periods: [138, 157, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 12m 35sRunning iteration 231/1500... Est. remaining: 12m 26sRunning iteration 241/1500... Est. remaining: 12m 16sRunning iteration 251/1500... Est. remaining: 12m 8sRunning iteration 261/1500... Est. remaining: 11m 59sRunning iteration 271/1500... Est. remaining: 11m 51sRunning iteration 281/1500... Est. remaining: 11m 43sRunning iteration 291/1500... Est. remaining: 11m 35sRunning iteration 301/1500... Est. remaining: 11m 27sbest_combination: {'lookbacks': [138, 157, 164], 'score': np.float64(0.6753004416494139), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 20sRunning iteration 321/1500... Est. remaining: 11m 13sRunning iteration 331/1500... Est. remaining: 11m 5sRunning iteration 341/1500... Est. remaining: 10m 58sRunning iteration 351/1500... Est. remaining: 10m 51sRunning iteration 361/1500... Est. remaining: 10m 44sRunning iteration 371/1500... Est. remaining: 10m 37sRunning iteration 381/1500... Est. remaining: 10m 30sRunning iteration 391/1500... Est. remaining: 10m 24sRunning iteration 401/1500... Est. remaining: 10m 17sbest_combination: {'lookbacks': [138, 157, 164], 'score': np.float64(0.6753004416494139), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 10sRunning iteration 421/1500... Est. remaining: 10m 4sRunning iteration 431/1500... Est. remaining: 9m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,490,368,223
Annual Return: 47.74%
Sharpe Ratio: 1.55330
Sortino Ratio: 1.518
Max Drawdown: -58.5%
Avg Drawdown: -10.8%
Normalized Score: 0.708
Lookback periods: [155, 161, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,464,587,707
Annual Return: 48.26%
Sharpe Ratio: 1.57603
Sortino Ratio: 1.546
Max Drawdown: -56.9%
Avg Drawdown: -10.7%
Normalized Score: 0.890
Lookback periods: [157, 160, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 51sRunning iteration 461/1500... Est. remaining: 9m 44sRunning iteration 471/1500... Est. remaining: 9m 38sRunning iteration 481/1500... Est. remaining: 9m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,722,201,897
Annual Return: 48.39%
Sharpe Ratio: 1.57693
Sortino Ratio: 1.539
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 0.977
Lookback periods: [156, 160, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 9m 28sRunning iteration 501/1500... Est. remaining: 9m 21sbest_combination: {'lookbacks': [156, 160, 171], 'score': np.float64(0.9768506829094605), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 15sRunning iteration 521/1500... Est. remaining: 9m 9sRunning iteration 531/1500... Est. remaining: 9m 2sRunning iteration 541/1500... Est. remaining: 8m 56sRunning iteration 551/1500... Est. remaining: 8m 50sRunning iteration 561/1500... Est. remaining: 8m 44sRunning iteration 571/1500... Est. remaining: 8m 38sRunning iteration 581/1500... Est. remaining: 8m 31sRunning iteration 591/1500... Est. remaining: 8m 25sRunning iteration 601/1500... Est. remaining: 8m 19sbest_combination: {'lookbacks': [156, 160, 171], 'score': np.float64(0.9768506829094605), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 13sRunning iteration 621/1500... Est. remaining: 8m 7sRunning iteration 631/1500... Est. remaining: 8m 1sRunning iteration 641/1500... Est. remaining: 7m 55sRunning iteration 651/1500... Est. remaining: 7m 49sRunning iteration 661/1500... Est. remaining: 7m 43sRunning iteration 671/1500... Est. remaining: 7m 37sRunning iteration 681/1500... Est. remaining: 7m 31sRunning iteration 691/1500... Est. remaining: 7m 26sRunning iteration 701/1500... Est. remaining: 7m 20sbest_combination: {'lookbacks': [156, 160, 171], 'score': np.float64(0.9768506829094605), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 14sRunning iteration 721/1500... Est. remaining: 7m 8sRunning iteration 731/1500... Est. remaining: 7m 2sRunning iteration 741/1500... Est. remaining: 6m 57sRunning iteration 751/1500... Est. remaining: 6m 51sRunning iteration 761/1500... Est. remaining: 6m 45sRunning iteration 771/1500... Est. remaining: 6m 39sRunning iteration 781/1500... Est. remaining: 6m 34sRunning iteration 791/1500... Est. remaining: 6m 28sRunning iteration 801/1500... Est. remaining: 6m 22sbest_combination: {'lookbacks': [156, 160, 171], 'score': np.float64(0.9768506829094605), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 17sRunning iteration 821/1500... Est. remaining: 6m 11sRunning iteration 831/1500... Est. remaining: 6m 6sRunning iteration 841/1500... Est. remaining: 6m 0sRunning iteration 851/1500... Est. remaining: 5m 54sRunning iteration 861/1500... Est. remaining: 5m 49sRunning iteration 871/1500... Est. remaining: 5m 43sRunning iteration 881/1500... Est. remaining: 5m 37sRunning iteration 891/1500... Est. remaining: 5m 32sRunning iteration 901/1500... Est. remaining: 5m 26sbest_combination: {'lookbacks': [156, 160, 171], 'score': np.float64(0.9768506829094605), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 21sRunning iteration 921/1500... Est. remaining: 5m 15sRunning iteration 931/1500... Est. remaining: 5m 10sRunning iteration 941/1500... Est. remaining: 5m 4sRunning iteration 951/1500... Est. remaining: 4m 59sRunning iteration 961/1500... Est. remaining: 4m 53sRunning iteration 971/1500... Est. remaining: 4m 48sRunning iteration 981/1500... Est. remaining: 4m 42sRunning iteration 991/1500... Est. remaining: 4m 37sRunning iteration 1001/1500... Est. remaining: 4m 31sbest_combination: {'lookbacks': [156, 160, 171], 'score': np.float64(0.9768506829094605), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,235,985,998
Annual Return: 48.63%
Sharpe Ratio: 1.58821
Sortino Ratio: 1.564
Max Drawdown: -56.9%
Avg Drawdown: -10.6%
Normalized Score: 0.987
Lookback periods: [158, 161, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 4m 26sRunning iteration 1021/1500... Est. remaining: 4m 21sRunning iteration 1031/1500... Est. remaining: 4m 15sRunning iteration 1041/1500... Est. remaining: 4m 10sRunning iteration 1051/1500... Est. remaining: 4m 4sRunning iteration 1061/1500... Est. remaining: 3m 59sRunning iteration 1071/1500... Est. remaining: 3m 53sRunning iteration 1081/1500... Est. remaining: 3m 48sRunning iteration 1091/1500... Est. remaining: 3m 42sRunning iteration 1101/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [158, 161, 165], 'score': np.float64(0.9866458669965489), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 31sRunning iteration 1121/1500... Est. remaining: 3m 26sRunning iteration 1131/1500... Est. remaining: 3m 20sRunning iteration 1141/1500... Est. remaining: 3m 15sRunning iteration 1151/1500... Est. remaining: 3m 9sRunning iteration 1161/1500... Est. remaining: 3m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,950,313,522
Annual Return: 48.50%
Sharpe Ratio: 1.58018
Sortino Ratio: 1.552
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 1.006
Lookback periods: [159, 161, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1171/1500... Est. remaining: 2m 59sRunning iteration 1181/1500... Est. remaining: 2m 53sRunning iteration 1191/1500... Est. remaining: 2m 48sRunning iteration 1201/1500... Est. remaining: 2m 42sbest_combination: {'lookbacks': [159, 161, 169], 'score': np.float64(1.0060851035490268), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 37sRunning iteration 1221/1500... Est. remaining: 2m 31sRunning iteration 1231/1500... Est. remaining: 2m 26sRunning iteration 1241/1500... Est. remaining: 2m 20sRunning iteration 1251/1500... Est. remaining: 2m 15sRunning iteration 1261/1500... Est. remaining: 2m 10sRunning iteration 1271/1500... Est. remaining: 2m 4sRunning iteration 1281/1500... Est. remaining: 1m 59sRunning iteration 1291/1500... Est. remaining: 1m 53sRunning iteration 1301/1500... Est. remaining: 1m 48sbest_combination: {'lookbacks': [159, 161, 169], 'score': np.float64(1.0060851035490268), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 42sRunning iteration 1321/1500... Est. remaining: 1m 37sRunning iteration 1331/1500... Est. remaining: 1m 31sRunning iteration 1341/1500... Est. remaining: 1m 26sRunning iteration 1351/1500... Est. remaining: 1m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,522,524,178
Annual Return: 49.20%
Sharpe Ratio: 1.60197
Sortino Ratio: 1.577
Max Drawdown: -59.0%
Avg Drawdown: -10.2%
Normalized Score: 1.072
Lookback periods: [158, 162, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1361/1500... Est. remaining: 1m 15sRunning iteration 1371/1500... Est. remaining: 1m 10sRunning iteration 1381/1500... Est. remaining: 1m 4sRunning iteration 1391/1500... Est. remaining: 0m 59sRunning iteration 1401/1500... Est. remaining: 0m 54sbest_combination: {'lookbacks': [158, 162, 168], 'score': np.float64(1.071844783041098), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 27sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.5 minutes
Best normalized score: 1.07
best_combination: {'lookbacks': [158, 162, 168], 'score': np.float64(1.071844783041098), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [158, 162, 168] (score: 1.0718)

Monte Carlo simulation completed in 13.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [158, 162, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 107 selections (25.7%)
3. naz100_pi: 82 selections (19.7%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,522,524,178.38
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Sun Aug 24 16:00:59 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,036,698,055
Annual Return: 42.29%
Sharpe Ratio: 1.41261
Sortino Ratio: 1.355
Max Drawdown: -65.7%
Avg Drawdown: -13.5%
Normalized Score: -0.884
Lookback periods: [87, 172, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,719,619,348
Annual Return: 43.48%
Sharpe Ratio: 1.43458
Sortino Ratio: 1.388
Max Drawdown: -55.5%
Avg Drawdown: -13.5%
Normalized Score: -0.348
Lookback periods: [133, 144, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,454,984,320
Annual Return: 44.48%
Sharpe Ratio: 1.45975
Sortino Ratio: 1.422
Max Drawdown: -61.0%
Avg Drawdown: -12.1%
Normalized Score: -0.143
Lookback periods: [153, 168, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,638,940,166
Annual Return: 45.71%
Sharpe Ratio: 1.49524
Sortino Ratio: 1.457
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.328
Lookback periods: [157, 168, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 21sRunning iteration 31/1500... Est. remaining: 19m 48sRunning iteration 41/1500... Est. remaining: 17m 55sRunning iteration 51/1500... Est. remaining: 16m 46sRunning iteration 61/1500... Est. remaining: 15m 57sRunning iteration 71/1500... Est. remaining: 15m 19sRunning iteration 81/1500... Est. remaining: 14m 51sRunning iteration 91/1500... Est. remaining: 14m 29sRunning iteration 101/1500... Est. remaining: 14m 10sbest_combination: {'lookbacks': [157, 168, 189], 'score': np.float64(0.3284818525915242), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 53sRunning iteration 121/1500... Est. remaining: 13m 39sRunning iteration 131/1500... Est. remaining: 13m 26sRunning iteration 141/1500... Est. remaining: 13m 14sRunning iteration 151/1500... Est. remaining: 13m 4sRunning iteration 161/1500... Est. remaining: 12m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $933,727,011
Annual Return: 39.12%
Sharpe Ratio: 1.42167
Sortino Ratio: 1.326
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.440
Lookback periods: [50, 64, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 12m 57sRunning iteration 181/1500... Est. remaining: 12m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,807,178,091
Annual Return: 47.92%
Sharpe Ratio: 1.57059
Sortino Ratio: 1.541
Max Drawdown: -56.9%
Avg Drawdown: -11.0%
Normalized Score: 0.797
Lookback periods: [159, 160, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 12m 47sRunning iteration 201/1500... Est. remaining: 12m 38sbest_combination: {'lookbacks': [159, 160, 166], 'score': np.float64(0.7972981707393211), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 30sRunning iteration 221/1500... Est. remaining: 12m 22sRunning iteration 231/1500... Est. remaining: 12m 14sRunning iteration 241/1500... Est. remaining: 12m 6sRunning iteration 251/1500... Est. remaining: 11m 58sRunning iteration 261/1500... Est. remaining: 11m 50sRunning iteration 271/1500... Est. remaining: 11m 42sRunning iteration 281/1500... Est. remaining: 11m 34sRunning iteration 291/1500... Est. remaining: 11m 27sRunning iteration 301/1500... Est. remaining: 11m 20sbest_combination: {'lookbacks': [159, 160, 166], 'score': np.float64(0.7972981707393211), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 13sRunning iteration 321/1500... Est. remaining: 11m 6sRunning iteration 331/1500... Est. remaining: 10m 59sRunning iteration 341/1500... Est. remaining: 10m 53sRunning iteration 351/1500... Est. remaining: 10m 46sRunning iteration 361/1500... Est. remaining: 10m 39sRunning iteration 371/1500... Est. remaining: 10m 33sRunning iteration 381/1500... Est. remaining: 10m 26sRunning iteration 391/1500... Est. remaining: 10m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,631,201,389
Annual Return: 48.34%
Sharpe Ratio: 1.57476
Sortino Ratio: 1.544
Max Drawdown: -59.0%
Avg Drawdown: -10.6%
Normalized Score: 0.841
Lookback periods: [158, 160, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 10m 17sbest_combination: {'lookbacks': [158, 160, 172], 'score': np.float64(0.840971278532645), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 13sRunning iteration 421/1500... Est. remaining: 10m 9sRunning iteration 431/1500... Est. remaining: 10m 2sRunning iteration 441/1500... Est. remaining: 9m 57sRunning iteration 451/1500... Est. remaining: 9m 51sRunning iteration 461/1500... Est. remaining: 9m 45sRunning iteration 471/1500... Est. remaining: 9m 39sRunning iteration 481/1500... Est. remaining: 9m 33sRunning iteration 491/1500... Est. remaining: 9m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,029,715,779
Annual Return: 48.54%
Sharpe Ratio: 1.58331
Sortino Ratio: 1.540
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 0.998
Lookback periods: [156, 159, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 9m 24sbest_combination: {'lookbacks': [156, 159, 171], 'score': np.float64(0.9982615340875185), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 18sRunning iteration 521/1500... Est. remaining: 9m 13sRunning iteration 531/1500... Est. remaining: 9m 7sRunning iteration 541/1500... Est. remaining: 9m 1sRunning iteration 551/1500... Est. remaining: 8m 55sRunning iteration 561/1500... Est. remaining: 8m 49sRunning iteration 571/1500... Est. remaining: 8m 44sRunning iteration 581/1500... Est. remaining: 8m 38sRunning iteration 591/1500... Est. remaining: 8m 31sRunning iteration 601/1500... Est. remaining: 8m 25sbest_combination: {'lookbacks': [156, 159, 171], 'score': np.float64(0.9982615340875185), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 20sRunning iteration 621/1500... Est. remaining: 8m 14sRunning iteration 631/1500... Est. remaining: 8m 8sRunning iteration 641/1500... Est. remaining: 8m 2sRunning iteration 651/1500... Est. remaining: 7m 57sRunning iteration 661/1500... Est. remaining: 7m 51sRunning iteration 671/1500... Est. remaining: 7m 45sRunning iteration 681/1500... Est. remaining: 7m 40sRunning iteration 691/1500... Est. remaining: 7m 34sRunning iteration 701/1500... Est. remaining: 7m 28sbest_combination: {'lookbacks': [156, 159, 171], 'score': np.float64(0.9982615340875185), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 23sRunning iteration 721/1500... Est. remaining: 7m 17sRunning iteration 731/1500... Est. remaining: 7m 11sRunning iteration 741/1500... Est. remaining: 7m 5sRunning iteration 751/1500... Est. remaining: 7m 0sRunning iteration 761/1500... Est. remaining: 6m 54sRunning iteration 771/1500... Est. remaining: 6m 48sRunning iteration 781/1500... Est. remaining: 6m 43sRunning iteration 791/1500... Est. remaining: 6m 37sRunning iteration 801/1500... Est. remaining: 6m 31sbest_combination: {'lookbacks': [156, 159, 171], 'score': np.float64(0.9982615340875185), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 26sRunning iteration 821/1500... Est. remaining: 6m 20sRunning iteration 831/1500... Est. remaining: 6m 15sRunning iteration 841/1500... Est. remaining: 6m 9sRunning iteration 851/1500... Est. remaining: 6m 3sRunning iteration 861/1500... Est. remaining: 5m 58sRunning iteration 871/1500... Est. remaining: 5m 52sRunning iteration 881/1500... Est. remaining: 5m 46sRunning iteration 891/1500... Est. remaining: 5m 40sRunning iteration 901/1500... Est. remaining: 5m 34sbest_combination: {'lookbacks': [156, 159, 171], 'score': np.float64(0.9982615340875185), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 29sRunning iteration 921/1500... Est. remaining: 5m 23sRunning iteration 931/1500... Est. remaining: 5m 17sRunning iteration 941/1500... Est. remaining: 5m 11sRunning iteration 951/1500... Est. remaining: 5m 6sRunning iteration 961/1500... Est. remaining: 5m 0sRunning iteration 971/1500... Est. remaining: 4m 54sRunning iteration 981/1500... Est. remaining: 4m 48sRunning iteration 991/1500... Est. remaining: 4m 41sRunning iteration 1001/1500... Est. remaining: 4m 34sbest_combination: {'lookbacks': [156, 159, 171], 'score': np.float64(0.9982615340875185), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 28sRunning iteration 1021/1500... Est. remaining: 4m 21sRunning iteration 1031/1500... Est. remaining: 4m 15sRunning iteration 1041/1500... Est. remaining: 4m 8sRunning iteration 1051/1500... Est. remaining: 4m 2sRunning iteration 1061/1500... Est. remaining: 3m 56sRunning iteration 1071/1500... Est. remaining: 3m 50sRunning iteration 1081/1500... Est. remaining: 3m 43sRunning iteration 1091/1500... Est. remaining: 3m 37sRunning iteration 1101/1500... Est. remaining: 3m 31sbest_combination: {'lookbacks': [156, 159, 171], 'score': np.float64(0.9982615340875185), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 39sRunning iteration 1201/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [156, 159, 171], 'score': np.float64(0.9982615340875185), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 28sRunning iteration 1221/1500... Est. remaining: 2m 23sRunning iteration 1231/1500... Est. remaining: 2m 17sRunning iteration 1241/1500... Est. remaining: 2m 12sRunning iteration 1251/1500... Est. remaining: 2m 7sRunning iteration 1261/1500... Est. remaining: 2m 2sRunning iteration 1271/1500... Est. remaining: 1m 57sRunning iteration 1281/1500... Est. remaining: 1m 51sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [156, 159, 171], 'score': np.float64(0.9982615340875185), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [156, 159, 171], 'score': np.float64(0.9982615340875185), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,552,905,790
Annual Return: 48.78%
Sharpe Ratio: 1.59349
Sortino Ratio: 1.566
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 1.066
Lookback periods: [159, 162, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.0 minutes
Best normalized score: 1.07
best_combination: {'lookbacks': [159, 162, 168], 'score': np.float64(1.0657872449856813), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [159, 162, 168] (score: 1.0658)

Monte Carlo simulation completed in 12.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [159, 162, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 107 selections (25.7%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 79 selections (19.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,552,905,790.44
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Sun Aug 24 16:13:07 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,565,239,745
Annual Return: 44.61%
Sharpe Ratio: 1.46300
Sortino Ratio: 1.424
Max Drawdown: -62.9%
Avg Drawdown: -11.6%
Normalized Score: -0.116
Lookback periods: [146, 174, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,769,137,237
Annual Return: 47.90%
Sharpe Ratio: 1.57299
Sortino Ratio: 1.537
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.663
Lookback periods: [132, 153, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 24sRunning iteration 21/1500... Est. remaining: 14m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,104,904,461
Annual Return: 44.03%
Sharpe Ratio: 1.57199
Sortino Ratio: 1.479
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.293
Lookback periods: [50, 53, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 13m 8sRunning iteration 41/1500... Est. remaining: 11m 53sRunning iteration 51/1500... Est. remaining: 10m 56sRunning iteration 61/1500... Est. remaining: 10m 15sRunning iteration 71/1500... Est. remaining: 9m 46sRunning iteration 81/1500... Est. remaining: 9m 25sRunning iteration 91/1500... Est. remaining: 9m 12sRunning iteration 101/1500... Est. remaining: 8m 59sbest_combination: {'lookbacks': [50, 53, 89], 'score': np.float64(1.2930213309088283), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 49sRunning iteration 121/1500... Est. remaining: 8m 40sRunning iteration 131/1500... Est. remaining: 8m 32sRunning iteration 141/1500... Est. remaining: 8m 24sRunning iteration 151/1500... Est. remaining: 8m 17sRunning iteration 161/1500... Est. remaining: 8m 10sRunning iteration 171/1500... Est. remaining: 8m 4sRunning iteration 181/1500... Est. remaining: 7m 58sRunning iteration 191/1500... Est. remaining: 7m 53sRunning iteration 201/1500... Est. remaining: 7m 48sbest_combination: {'lookbacks': [50, 53, 89], 'score': np.float64(1.2930213309088283), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 43sRunning iteration 221/1500... Est. remaining: 7m 38sRunning iteration 231/1500... Est. remaining: 7m 32sRunning iteration 241/1500... Est. remaining: 7m 28sRunning iteration 251/1500... Est. remaining: 7m 23sRunning iteration 261/1500... Est. remaining: 7m 19sRunning iteration 271/1500... Est. remaining: 7m 14sRunning iteration 281/1500... Est. remaining: 7m 11sRunning iteration 291/1500... Est. remaining: 7m 7sRunning iteration 301/1500... Est. remaining: 7m 3sbest_combination: {'lookbacks': [50, 53, 89], 'score': np.float64(1.2930213309088283), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 58sRunning iteration 321/1500... Est. remaining: 6m 54sRunning iteration 331/1500... Est. remaining: 6m 50sRunning iteration 341/1500... Est. remaining: 6m 46sRunning iteration 351/1500... Est. remaining: 6m 42sRunning iteration 361/1500... Est. remaining: 6m 38sRunning iteration 371/1500... Est. remaining: 6m 34sRunning iteration 381/1500... Est. remaining: 6m 30sRunning iteration 391/1500... Est. remaining: 6m 27sRunning iteration 401/1500... Est. remaining: 6m 23sbest_combination: {'lookbacks': [50, 53, 89], 'score': np.float64(1.2930213309088283), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 19sRunning iteration 421/1500... Est. remaining: 6m 15sRunning iteration 431/1500... Est. remaining: 6m 11sRunning iteration 441/1500... Est. remaining: 6m 7sRunning iteration 451/1500... Est. remaining: 6m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,573,730,700
Annual Return: 44.62%
Sharpe Ratio: 1.59269
Sortino Ratio: 1.510
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.517
Lookback periods: [50, 53, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 6m 2sRunning iteration 471/1500... Est. remaining: 5m 58sRunning iteration 481/1500... Est. remaining: 5m 54sRunning iteration 491/1500... Est. remaining: 5m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,090,622,705
Annual Return: 44.01%
Sharpe Ratio: 1.57961
Sortino Ratio: 1.488
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.562
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 5m 48sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.5624359116410709), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 45sRunning iteration 521/1500... Est. remaining: 5m 41sRunning iteration 531/1500... Est. remaining: 5m 37sRunning iteration 541/1500... Est. remaining: 5m 33sRunning iteration 551/1500... Est. remaining: 5m 29sRunning iteration 561/1500... Est. remaining: 5m 26sRunning iteration 571/1500... Est. remaining: 5m 22sRunning iteration 581/1500... Est. remaining: 5m 18sRunning iteration 591/1500... Est. remaining: 5m 14sRunning iteration 601/1500... Est. remaining: 5m 10sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.5624359116410709), 'visits': 1}
Running iteration 611/1500... Est. remaining: 5m 6sRunning iteration 621/1500... Est. remaining: 5m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,613,763,997
Annual Return: 44.66%
Sharpe Ratio: 1.61575
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.649
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 5m 0sRunning iteration 641/1500... Est. remaining: 4m 57sRunning iteration 651/1500... Est. remaining: 4m 53sRunning iteration 661/1500... Est. remaining: 4m 50sRunning iteration 671/1500... Est. remaining: 4m 46sRunning iteration 681/1500... Est. remaining: 4m 43sRunning iteration 691/1500... Est. remaining: 4m 39sRunning iteration 701/1500... Est. remaining: 4m 35sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.648949405789549), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 32sRunning iteration 721/1500... Est. remaining: 4m 28sRunning iteration 731/1500... Est. remaining: 4m 25sRunning iteration 741/1500... Est. remaining: 4m 21sRunning iteration 751/1500... Est. remaining: 4m 18sRunning iteration 761/1500... Est. remaining: 4m 14sRunning iteration 771/1500... Est. remaining: 4m 11sRunning iteration 781/1500... Est. remaining: 4m 7sRunning iteration 791/1500... Est. remaining: 4m 3sRunning iteration 801/1500... Est. remaining: 4m 0sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.648949405789549), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 57sRunning iteration 821/1500... Est. remaining: 3m 53sRunning iteration 831/1500... Est. remaining: 3m 50sRunning iteration 841/1500... Est. remaining: 3m 46sRunning iteration 851/1500... Est. remaining: 3m 43sRunning iteration 861/1500... Est. remaining: 3m 39sRunning iteration 871/1500... Est. remaining: 3m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.046
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 881/1500... Est. remaining: 3m 33sRunning iteration 891/1500... Est. remaining: 3m 29sRunning iteration 901/1500... Est. remaining: 3m 26sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 22sRunning iteration 921/1500... Est. remaining: 3m 19sRunning iteration 931/1500... Est. remaining: 3m 15sRunning iteration 941/1500... Est. remaining: 3m 12sRunning iteration 951/1500... Est. remaining: 3m 8sRunning iteration 961/1500... Est. remaining: 3m 5sRunning iteration 971/1500... Est. remaining: 3m 1sRunning iteration 981/1500... Est. remaining: 2m 58sRunning iteration 991/1500... Est. remaining: 2m 54sRunning iteration 1001/1500... Est. remaining: 2m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 48sRunning iteration 1021/1500... Est. remaining: 2m 44sRunning iteration 1031/1500... Est. remaining: 2m 41sRunning iteration 1041/1500... Est. remaining: 2m 37sRunning iteration 1051/1500... Est. remaining: 2m 34sRunning iteration 1061/1500... Est. remaining: 2m 30sRunning iteration 1071/1500... Est. remaining: 2m 27sRunning iteration 1081/1500... Est. remaining: 2m 23sRunning iteration 1091/1500... Est. remaining: 2m 20sRunning iteration 1101/1500... Est. remaining: 2m 16sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 13sRunning iteration 1121/1500... Est. remaining: 2m 9sRunning iteration 1131/1500... Est. remaining: 2m 6sRunning iteration 1141/1500... Est. remaining: 2m 3sRunning iteration 1151/1500... Est. remaining: 1m 59sRunning iteration 1161/1500... Est. remaining: 1m 56sRunning iteration 1171/1500... Est. remaining: 1m 52sRunning iteration 1181/1500... Est. remaining: 1m 49sRunning iteration 1191/1500... Est. remaining: 1m 45sRunning iteration 1201/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 38sRunning iteration 1221/1500... Est. remaining: 1m 35sRunning iteration 1231/1500... Est. remaining: 1m 32sRunning iteration 1241/1500... Est. remaining: 1m 28sRunning iteration 1251/1500... Est. remaining: 1m 25sRunning iteration 1261/1500... Est. remaining: 1m 21sRunning iteration 1271/1500... Est. remaining: 1m 18sRunning iteration 1281/1500... Est. remaining: 1m 14sRunning iteration 1291/1500... Est. remaining: 1m 11sRunning iteration 1301/1500... Est. remaining: 1m 8sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 4sRunning iteration 1321/1500... Est. remaining: 1m 1sRunning iteration 1331/1500... Est. remaining: 0m 57sRunning iteration 1341/1500... Est. remaining: 0m 54sRunning iteration 1351/1500... Est. remaining: 0m 50sRunning iteration 1361/1500... Est. remaining: 0m 47sRunning iteration 1371/1500... Est. remaining: 0m 44sRunning iteration 1381/1500... Est. remaining: 0m 40sRunning iteration 1391/1500... Est. remaining: 0m 37sRunning iteration 1401/1500... Est. remaining: 0m 33sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 30sRunning iteration 1421/1500... Est. remaining: 0m 27sRunning iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 20sRunning iteration 1451/1500... Est. remaining: 0m 16sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 10sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,188,708,617
Annual Return: 46.93%
Sharpe Ratio: 1.68323
Sortino Ratio: 1.602
Max Drawdown: -36.6%
Avg Drawdown: -7.9%
Normalized Score: 2.063
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

Monte Carlo simulation completed in 8.5 minutes
Best normalized score: 2.06
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 95] (score: 2.0629)

Monte Carlo simulation completed in 8.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 102 selections (24.5%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 82 selections (19.7%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $6,188,708,617.20
Average Annualized Gain: 46.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Sun Aug 24 16:21:43 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $325,928,837
Annual Return: 34.96%
Sharpe Ratio: 1.18991
Sortino Ratio: 1.114
Max Drawdown: -55.0%
Avg Drawdown: -13.8%
Normalized Score: -1.890
Lookback periods: [67, 128, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,074,188,910
Annual Return: 39.69%
Sharpe Ratio: 1.32567
Sortino Ratio: 1.261
Max Drawdown: -63.3%
Avg Drawdown: -13.4%
Normalized Score: -1.277
Lookback periods: [85, 192, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $492,262,743
Annual Return: 36.58%
Sharpe Ratio: 1.29923
Sortino Ratio: 1.198
Max Drawdown: -56.2%
Avg Drawdown: -11.6%
Normalized Score: -1.192
Lookback periods: [50, 60, 106] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,886,497,897
Annual Return: 45.93%
Sharpe Ratio: 1.49016
Sortino Ratio: 1.463
Max Drawdown: -63.0%
Avg Drawdown: -11.5%
Normalized Score: 0.124
Lookback periods: [153, 185, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,276,108,340
Annual Return: 46.25%
Sharpe Ratio: 1.54615
Sortino Ratio: 1.506
Max Drawdown: -57.8%
Avg Drawdown: -11.7%
Normalized Score: 0.417
Lookback periods: [115, 131, 138] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 0sRunning iteration 21/1500... Est. remaining: 17m 33sRunning iteration 31/1500... Est. remaining: 14m 13sRunning iteration 41/1500... Est. remaining: 12m 23sRunning iteration 51/1500... Est. remaining: 11m 20sRunning iteration 61/1500... Est. remaining: 10m 34sRunning iteration 71/1500... Est. remaining: 10m 5sRunning iteration 81/1500... Est. remaining: 9m 43sRunning iteration 91/1500... Est. remaining: 9m 26sRunning iteration 101/1500... Est. remaining: 9m 11sbest_combination: {'lookbacks': [115, 131, 138], 'score': np.float64(0.4167250153517382), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,323,706,334
Annual Return: 47.02%
Sharpe Ratio: 1.53413
Sortino Ratio: 1.500
Max Drawdown: -60.2%
Avg Drawdown: -11.2%
Normalized Score: 0.467
Lookback periods: [150, 167, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 8m 59sRunning iteration 131/1500... Est. remaining: 8m 49sRunning iteration 141/1500... Est. remaining: 8m 39sRunning iteration 151/1500... Est. remaining: 8m 31sRunning iteration 161/1500... Est. remaining: 8m 23sRunning iteration 171/1500... Est. remaining: 8m 16sRunning iteration 181/1500... Est. remaining: 8m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,296,191,588
Annual Return: 40.45%
Sharpe Ratio: 1.44552
Sortino Ratio: 1.340
Max Drawdown: -34.7%
Avg Drawdown: -9.8%
Normalized Score: 0.544
Lookback periods: [51, 51, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 8m 8sRunning iteration 201/1500... Est. remaining: 8m 2sbest_combination: {'lookbacks': [51, 51, 82], 'score': np.float64(0.5443825665720018), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 55sRunning iteration 221/1500... Est. remaining: 7m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,003,584,708
Annual Return: 47.45%
Sharpe Ratio: 1.55017
Sortino Ratio: 1.517
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.586
Lookback periods: [152, 167, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 7m 48sRunning iteration 241/1500... Est. remaining: 7m 42sRunning iteration 251/1500... Est. remaining: 7m 37sRunning iteration 261/1500... Est. remaining: 7m 31sRunning iteration 271/1500... Est. remaining: 7m 26sRunning iteration 281/1500... Est. remaining: 7m 21sRunning iteration 291/1500... Est. remaining: 7m 16sRunning iteration 301/1500... Est. remaining: 7m 11sbest_combination: {'lookbacks': [152, 167, 183], 'score': np.float64(0.586437581685358), 'visits': 1}
Running iteration 311/1500... Est. remaining: 7m 6sRunning iteration 321/1500... Est. remaining: 7m 2sRunning iteration 331/1500... Est. remaining: 6m 57sRunning iteration 341/1500... Est. remaining: 6m 52sRunning iteration 351/1500... Est. remaining: 6m 48sRunning iteration 361/1500... Est. remaining: 6m 43sRunning iteration 371/1500... Est. remaining: 6m 39sRunning iteration 381/1500... Est. remaining: 6m 35sRunning iteration 391/1500... Est. remaining: 6m 31sRunning iteration 401/1500... Est. remaining: 6m 26sbest_combination: {'lookbacks': [152, 167, 183], 'score': np.float64(0.586437581685358), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,512,591,133
Annual Return: 47.75%
Sharpe Ratio: 1.53743
Sortino Ratio: 1.511
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.596
Lookback periods: [155, 160, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 6m 24sRunning iteration 421/1500... Est. remaining: 6m 20sRunning iteration 431/1500... Est. remaining: 6m 16sRunning iteration 441/1500... Est. remaining: 6m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,255,439,909
Annual Return: 47.60%
Sharpe Ratio: 1.54698
Sortino Ratio: 1.509
Max Drawdown: -59.0%
Avg Drawdown: -10.6%
Normalized Score: 0.697
Lookback periods: [156, 160, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 6m 10sRunning iteration 461/1500... Est. remaining: 6m 6sRunning iteration 471/1500... Est. remaining: 6m 2sRunning iteration 481/1500... Est. remaining: 5m 58sRunning iteration 491/1500... Est. remaining: 5m 54sRunning iteration 501/1500... Est. remaining: 5m 50sbest_combination: {'lookbacks': [156, 160, 197], 'score': np.float64(0.6973600775945158), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,133,973,602
Annual Return: 42.48%
Sharpe Ratio: 1.51697
Sortino Ratio: 1.426
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 1.012
Lookback periods: [51, 54, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 5m 47sRunning iteration 521/1500... Est. remaining: 5m 44sRunning iteration 531/1500... Est. remaining: 5m 40sRunning iteration 541/1500... Est. remaining: 5m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,840,647,744
Annual Return: 41.88%
Sharpe Ratio: 1.51658
Sortino Ratio: 1.415
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.075
Lookback periods: [50, 50, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,600,088,602
Annual Return: 43.30%
Sharpe Ratio: 1.54769
Sortino Ratio: 1.452
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.206
Lookback periods: [50, 54, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 5m 35sRunning iteration 561/1500... Est. remaining: 5m 30sRunning iteration 571/1500... Est. remaining: 5m 26sRunning iteration 581/1500... Est. remaining: 5m 22sRunning iteration 591/1500... Est. remaining: 5m 18sRunning iteration 601/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [50, 54, 85], 'score': np.float64(1.2064367683571866), 'visits': 1}
Running iteration 611/1500... Est. remaining: 5m 10sRunning iteration 621/1500... Est. remaining: 5m 6sRunning iteration 631/1500... Est. remaining: 5m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,682,377,903
Annual Return: 43.43%
Sharpe Ratio: 1.54975
Sortino Ratio: 1.457
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.226
Lookback periods: [50, 54, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 5m 0sRunning iteration 651/1500... Est. remaining: 4m 56sRunning iteration 661/1500... Est. remaining: 4m 52sRunning iteration 671/1500... Est. remaining: 4m 49sRunning iteration 681/1500... Est. remaining: 4m 45sRunning iteration 691/1500... Est. remaining: 4m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,916,119,872
Annual Return: 43.77%
Sharpe Ratio: 1.58945
Sortino Ratio: 1.492
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.498
Lookback periods: [50, 51, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,613,763,997
Annual Return: 44.66%
Sharpe Ratio: 1.61575
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.649
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/1500... Est. remaining: 4m 39sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.648949405789549), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,912,007
Annual Return: 45.27%
Sharpe Ratio: 1.61355
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.670
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 4m 33sRunning iteration 731/1500... Est. remaining: 4m 29sRunning iteration 741/1500... Est. remaining: 4m 25sRunning iteration 751/1500... Est. remaining: 4m 22sRunning iteration 761/1500... Est. remaining: 4m 18sRunning iteration 771/1500... Est. remaining: 4m 14sRunning iteration 781/1500... Est. remaining: 4m 11sRunning iteration 791/1500... Est. remaining: 4m 7sRunning iteration 801/1500... Est. remaining: 4m 3sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6697769261771946), 'visits': 1}
Running iteration 811/1500... Est. remaining: 4m 0sRunning iteration 821/1500... Est. remaining: 3m 56sRunning iteration 831/1500... Est. remaining: 3m 52sRunning iteration 841/1500... Est. remaining: 3m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.729
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 3m 46sRunning iteration 861/1500... Est. remaining: 3m 42sRunning iteration 871/1500... Est. remaining: 3m 39sRunning iteration 881/1500... Est. remaining: 3m 35sRunning iteration 891/1500... Est. remaining: 3m 31sRunning iteration 901/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 24sRunning iteration 921/1500... Est. remaining: 3m 21sRunning iteration 931/1500... Est. remaining: 3m 17sRunning iteration 941/1500... Est. remaining: 3m 13sRunning iteration 951/1500... Est. remaining: 3m 10sRunning iteration 961/1500... Est. remaining: 3m 6sRunning iteration 971/1500... Est. remaining: 3m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.046
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 981/1500... Est. remaining: 3m 0sRunning iteration 991/1500... Est. remaining: 2m 56sRunning iteration 1001/1500... Est. remaining: 2m 53sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 49sRunning iteration 1021/1500... Est. remaining: 2m 45sRunning iteration 1031/1500... Est. remaining: 2m 42sRunning iteration 1041/1500... Est. remaining: 2m 38sRunning iteration 1051/1500... Est. remaining: 2m 35sRunning iteration 1061/1500... Est. remaining: 2m 31sRunning iteration 1071/1500... Est. remaining: 2m 28sRunning iteration 1081/1500... Est. remaining: 2m 24sRunning iteration 1091/1500... Est. remaining: 2m 21sRunning iteration 1101/1500... Est. remaining: 2m 17sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 14sRunning iteration 1121/1500... Est. remaining: 2m 10sRunning iteration 1131/1500... Est. remaining: 2m 7sRunning iteration 1141/1500... Est. remaining: 2m 3sRunning iteration 1151/1500... Est. remaining: 2m 0sRunning iteration 1161/1500... Est. remaining: 1m 56sRunning iteration 1171/1500... Est. remaining: 1m 53sRunning iteration 1181/1500... Est. remaining: 1m 49sRunning iteration 1191/1500... Est. remaining: 1m 46sRunning iteration 1201/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 39sRunning iteration 1221/1500... Est. remaining: 1m 35sRunning iteration 1231/1500... Est. remaining: 1m 32sRunning iteration 1241/1500... Est. remaining: 1m 29sRunning iteration 1251/1500... Est. remaining: 1m 25sRunning iteration 1261/1500... Est. remaining: 1m 22sRunning iteration 1271/1500... Est. remaining: 1m 18sRunning iteration 1281/1500... Est. remaining: 1m 15sRunning iteration 1291/1500... Est. remaining: 1m 11sRunning iteration 1301/1500... Est. remaining: 1m 8sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 5sRunning iteration 1321/1500... Est. remaining: 1m 1sRunning iteration 1331/1500... Est. remaining: 0m 58sRunning iteration 1341/1500... Est. remaining: 0m 54sRunning iteration 1351/1500... Est. remaining: 0m 51sRunning iteration 1361/1500... Est. remaining: 0m 47sRunning iteration 1371/1500... Est. remaining: 0m 44sRunning iteration 1381/1500... Est. remaining: 0m 40sRunning iteration 1391/1500... Est. remaining: 0m 37sRunning iteration 1401/1500... Est. remaining: 0m 34sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 30sRunning iteration 1421/1500... Est. remaining: 0m 27sRunning iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 20sRunning iteration 1451/1500... Est. remaining: 0m 17sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 10sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.5 minutes
Best normalized score: 2.05
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.0463)

Monte Carlo simulation completed in 8.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Sun Aug 24 16:30:20 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $586,916,338
Annual Return: 37.27%
Sharpe Ratio: 1.28553
Sortino Ratio: 1.201
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: -1.198
Lookback periods: [53, 162, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,357,002,891
Annual Return: 40.63%
Sharpe Ratio: 1.37733
Sortino Ratio: 1.314
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: -0.595
Lookback periods: [93, 132, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,473,531,808
Annual Return: 40.97%
Sharpe Ratio: 1.39762
Sortino Ratio: 1.323
Max Drawdown: -52.3%
Avg Drawdown: -11.8%
Normalized Score: -0.361
Lookback periods: [96, 108, 114] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,616,170,747
Annual Return: 41.34%
Sharpe Ratio: 1.40514
Sortino Ratio: 1.328
Max Drawdown: -55.0%
Avg Drawdown: -11.5%
Normalized Score: -0.358
Lookback periods: [50, 122, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,092,857,761
Annual Return: 44.02%
Sharpe Ratio: 1.45206
Sortino Ratio: 1.402
Max Drawdown: -62.3%
Avg Drawdown: -12.4%
Normalized Score: -0.314
Lookback periods: [140, 159, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,661,731,658
Annual Return: 44.72%
Sharpe Ratio: 1.47869
Sortino Ratio: 1.440
Max Drawdown: -58.9%
Avg Drawdown: -12.5%
Normalized Score: -0.064
Lookback periods: [128, 137, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,568,743,780
Annual Return: 44.61%
Sharpe Ratio: 1.48250
Sortino Ratio: 1.436
Max Drawdown: -55.0%
Avg Drawdown: -12.6%
Normalized Score: 0.046
Lookback periods: [129, 137, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 20m 34sRunning iteration 31/1500... Est. remaining: 16m 7sRunning iteration 41/1500... Est. remaining: 13m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,692,648,913
Annual Return: 46.57%
Sharpe Ratio: 1.54043
Sortino Ratio: 1.496
Max Drawdown: -61.3%
Avg Drawdown: -12.2%
Normalized Score: 0.233
Lookback periods: [130, 152, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 12m 58sRunning iteration 61/1500... Est. remaining: 12m 5sRunning iteration 71/1500... Est. remaining: 11m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,592,996,951
Annual Return: 46.50%
Sharpe Ratio: 1.50852
Sortino Ratio: 1.478
Max Drawdown: -60.2%
Avg Drawdown: -11.8%
Normalized Score: 0.262
Lookback periods: [150, 158, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 11m 12sRunning iteration 91/1500... Est. remaining: 10m 45sRunning iteration 101/1500... Est. remaining: 10m 24sbest_combination: {'lookbacks': [150, 158, 182], 'score': np.float64(0.26168230345029664), 'visits': 1}
Running iteration 111/1500... Est. remaining: 10m 5sRunning iteration 121/1500... Est. remaining: 9m 51sRunning iteration 131/1500... Est. remaining: 9m 37sRunning iteration 141/1500... Est. remaining: 9m 26sRunning iteration 151/1500... Est. remaining: 9m 13sRunning iteration 161/1500... Est. remaining: 9m 3sRunning iteration 171/1500... Est. remaining: 8m 53sRunning iteration 181/1500... Est. remaining: 8m 45sRunning iteration 191/1500... Est. remaining: 8m 37sRunning iteration 201/1500... Est. remaining: 8m 30sbest_combination: {'lookbacks': [150, 158, 182], 'score': np.float64(0.26168230345029664), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,087,373,293
Annual Return: 46.10%
Sharpe Ratio: 1.50145
Sortino Ratio: 1.470
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.396
Lookback periods: [158, 171, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/1500... Est. remaining: 8m 28sRunning iteration 221/1500... Est. remaining: 8m 21sRunning iteration 231/1500... Est. remaining: 8m 14sRunning iteration 241/1500... Est. remaining: 8m 7sRunning iteration 251/1500... Est. remaining: 8m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,865,803,414
Annual Return: 46.70%
Sharpe Ratio: 1.52519
Sortino Ratio: 1.485
Max Drawdown: -59.7%
Avg Drawdown: -11.4%
Normalized Score: 0.399
Lookback periods: [151, 158, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 7m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,172,930,068
Annual Return: 47.55%
Sharpe Ratio: 1.54375
Sortino Ratio: 1.514
Max Drawdown: -59.7%
Avg Drawdown: -11.2%
Normalized Score: 0.573
Lookback periods: [150, 161, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/1500... Est. remaining: 7m 56sRunning iteration 281/1500... Est. remaining: 7m 51sRunning iteration 291/1500... Est. remaining: 7m 45sRunning iteration 301/1500... Est. remaining: 7m 39sbest_combination: {'lookbacks': [150, 161, 172], 'score': np.float64(0.5730315720847158), 'visits': 1}
Running iteration 311/1500... Est. remaining: 7m 34sRunning iteration 321/1500... Est. remaining: 7m 29sRunning iteration 331/1500... Est. remaining: 7m 23sRunning iteration 341/1500... Est. remaining: 7m 18sRunning iteration 351/1500... Est. remaining: 7m 13sRunning iteration 361/1500... Est. remaining: 7m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,083,445,903
Annual Return: 47.50%
Sharpe Ratio: 1.56048
Sortino Ratio: 1.514
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 0.628
Lookback periods: [139, 155, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 371/1500... Est. remaining: 7m 6sRunning iteration 381/1500... Est. remaining: 7m 1sRunning iteration 391/1500... Est. remaining: 6m 57sRunning iteration 401/1500... Est. remaining: 6m 52sbest_combination: {'lookbacks': [139, 155, 191], 'score': np.float64(0.6275561075508226), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 47sRunning iteration 421/1500... Est. remaining: 6m 43sRunning iteration 431/1500... Est. remaining: 6m 38sRunning iteration 441/1500... Est. remaining: 6m 34sRunning iteration 451/1500... Est. remaining: 6m 29sRunning iteration 461/1500... Est. remaining: 6m 24sRunning iteration 471/1500... Est. remaining: 6m 20sRunning iteration 481/1500... Est. remaining: 6m 16sRunning iteration 491/1500... Est. remaining: 6m 11sRunning iteration 501/1500... Est. remaining: 6m 7sbest_combination: {'lookbacks': [139, 155, 191], 'score': np.float64(0.6275561075508226), 'visits': 1}
Running iteration 511/1500... Est. remaining: 6m 3sRunning iteration 521/1500... Est. remaining: 5m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,635,710,027
Annual Return: 48.35%
Sharpe Ratio: 1.57912
Sortino Ratio: 1.548
Max Drawdown: -58.5%
Avg Drawdown: -11.9%
Normalized Score: 0.680
Lookback periods: [136, 155, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 5m 56sRunning iteration 541/1500... Est. remaining: 5m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,217,201,859
Annual Return: 49.07%
Sharpe Ratio: 1.60480
Sortino Ratio: 1.568
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.915
Lookback periods: [136, 156, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 5m 49sRunning iteration 561/1500... Est. remaining: 5m 45sRunning iteration 571/1500... Est. remaining: 5m 40sRunning iteration 581/1500... Est. remaining: 5m 35sRunning iteration 591/1500... Est. remaining: 5m 31sRunning iteration 601/1500... Est. remaining: 5m 27sbest_combination: {'lookbacks': [136, 156, 174], 'score': np.float64(0.914502072398226), 'visits': 1}
Running iteration 611/1500... Est. remaining: 5m 23sRunning iteration 621/1500... Est. remaining: 5m 19sRunning iteration 631/1500... Est. remaining: 5m 15sRunning iteration 641/1500... Est. remaining: 5m 10sRunning iteration 651/1500... Est. remaining: 5m 6sRunning iteration 661/1500... Est. remaining: 5m 2sRunning iteration 671/1500... Est. remaining: 4m 58sRunning iteration 681/1500... Est. remaining: 4m 54sRunning iteration 691/1500... Est. remaining: 4m 50sRunning iteration 701/1500... Est. remaining: 4m 47sbest_combination: {'lookbacks': [136, 156, 174], 'score': np.float64(0.914502072398226), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 43sRunning iteration 721/1500... Est. remaining: 4m 39sRunning iteration 731/1500... Est. remaining: 4m 35sRunning iteration 741/1500... Est. remaining: 4m 31sRunning iteration 751/1500... Est. remaining: 4m 27sRunning iteration 761/1500... Est. remaining: 4m 24sRunning iteration 771/1500... Est. remaining: 4m 20sRunning iteration 781/1500... Est. remaining: 4m 16sRunning iteration 791/1500... Est. remaining: 4m 12sRunning iteration 801/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [136, 156, 174], 'score': np.float64(0.914502072398226), 'visits': 1}
Running iteration 811/1500... Est. remaining: 4m 5sRunning iteration 821/1500... Est. remaining: 4m 1sRunning iteration 831/1500... Est. remaining: 3m 57sRunning iteration 841/1500... Est. remaining: 3m 54sRunning iteration 851/1500... Est. remaining: 3m 50sRunning iteration 861/1500... Est. remaining: 3m 46sRunning iteration 871/1500... Est. remaining: 3m 42sRunning iteration 881/1500... Est. remaining: 3m 39sRunning iteration 891/1500... Est. remaining: 3m 35sRunning iteration 901/1500... Est. remaining: 3m 31sbest_combination: {'lookbacks': [136, 156, 174], 'score': np.float64(0.914502072398226), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 28sRunning iteration 921/1500... Est. remaining: 3m 24sRunning iteration 931/1500... Est. remaining: 3m 20sRunning iteration 941/1500... Est. remaining: 3m 17sRunning iteration 951/1500... Est. remaining: 3m 13sRunning iteration 961/1500... Est. remaining: 3m 9sRunning iteration 971/1500... Est. remaining: 3m 6sRunning iteration 981/1500... Est. remaining: 3m 2sRunning iteration 991/1500... Est. remaining: 2m 59sRunning iteration 1001/1500... Est. remaining: 2m 55sbest_combination: {'lookbacks': [136, 156, 174], 'score': np.float64(0.914502072398226), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 51sRunning iteration 1021/1500... Est. remaining: 2m 48sRunning iteration 1031/1500... Est. remaining: 2m 44sRunning iteration 1041/1500... Est. remaining: 2m 41sRunning iteration 1051/1500... Est. remaining: 2m 37sRunning iteration 1061/1500... Est. remaining: 2m 33sRunning iteration 1071/1500... Est. remaining: 2m 30sRunning iteration 1081/1500... Est. remaining: 2m 26sRunning iteration 1091/1500... Est. remaining: 2m 23sRunning iteration 1101/1500... Est. remaining: 2m 19sbest_combination: {'lookbacks': [136, 156, 174], 'score': np.float64(0.914502072398226), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 16sRunning iteration 1121/1500... Est. remaining: 2m 12sRunning iteration 1131/1500... Est. remaining: 2m 9sRunning iteration 1141/1500... Est. remaining: 2m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,147,175,621
Annual Return: 49.44%
Sharpe Ratio: 1.61611
Sortino Ratio: 1.578
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 1.001
Lookback periods: [136, 157, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1151/1500... Est. remaining: 2m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,844,284,195
Annual Return: 50.06%
Sharpe Ratio: 1.62115
Sortino Ratio: 1.588
Max Drawdown: -59.7%
Avg Drawdown: -11.3%
Normalized Score: 1.002
Lookback periods: [149, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1161/1500... Est. remaining: 1m 59sRunning iteration 1171/1500... Est. remaining: 1m 55sRunning iteration 1181/1500... Est. remaining: 1m 51sRunning iteration 1191/1500... Est. remaining: 1m 48sRunning iteration 1201/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [149, 155, 172], 'score': np.float64(1.0020653377484983), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,171,723,662
Annual Return: 48.60%
Sharpe Ratio: 1.58554
Sortino Ratio: 1.550
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.033
Lookback periods: [157, 160, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1221/1500... Est. remaining: 1m 38sRunning iteration 1231/1500... Est. remaining: 1m 34sRunning iteration 1241/1500... Est. remaining: 1m 31sRunning iteration 1251/1500... Est. remaining: 1m 27sRunning iteration 1261/1500... Est. remaining: 1m 23sRunning iteration 1271/1500... Est. remaining: 1m 20sRunning iteration 1281/1500... Est. remaining: 1m 16sRunning iteration 1291/1500... Est. remaining: 1m 13sRunning iteration 1301/1500... Est. remaining: 1m 9sbest_combination: {'lookbacks': [157, 160, 169], 'score': np.float64(1.0329492345564097), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 6sRunning iteration 1321/1500... Est. remaining: 1m 2sRunning iteration 1331/1500... Est. remaining: 0m 59sRunning iteration 1341/1500... Est. remaining: 0m 55sRunning iteration 1351/1500... Est. remaining: 0m 52sRunning iteration 1361/1500... Est. remaining: 0m 48sRunning iteration 1371/1500... Est. remaining: 0m 45sRunning iteration 1381/1500... Est. remaining: 0m 41sRunning iteration 1391/1500... Est. remaining: 0m 38sRunning iteration 1401/1500... Est. remaining: 0m 34sbest_combination: {'lookbacks': [157, 160, 169], 'score': np.float64(1.0329492345564097), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,472,839,891
Annual Return: 49.57%
Sharpe Ratio: 1.61828
Sortino Ratio: 1.585
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 1.169
Lookback periods: [154, 159, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1421/1500... Est. remaining: 0m 27sRunning iteration 1431/1500... Est. remaining: 0m 24sRunning iteration 1441/1500... Est. remaining: 0m 20sRunning iteration 1451/1500... Est. remaining: 0m 17sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 10sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.7 minutes
Best normalized score: 1.17
best_combination: {'lookbacks': [154, 159, 168], 'score': np.float64(1.1688084736337665), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [154, 159, 168] (score: 1.1688)

Monte Carlo simulation completed in 8.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 159, 168] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 115 selections (27.6%)
2. naz100_hma: 114 selections (27.4%)
3. naz100_pi: 77 selections (18.5%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,472,839,891.50
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Sun Aug 24 16:39:07 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,436,732,728
Annual Return: 40.87%
Sharpe Ratio: 1.37472
Sortino Ratio: 1.317
Max Drawdown: -63.9%
Avg Drawdown: -12.5%
Normalized Score: -0.902
Lookback periods: [105, 127, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,025,065,492
Annual Return: 42.27%
Sharpe Ratio: 1.41536
Sortino Ratio: 1.367
Max Drawdown: -66.3%
Avg Drawdown: -12.5%
Normalized Score: -0.736
Lookback periods: [104, 131, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,939,571,706
Annual Return: 47.41%
Sharpe Ratio: 1.53961
Sortino Ratio: 1.504
Max Drawdown: -61.6%
Avg Drawdown: -12.1%
Normalized Score: 0.338
Lookback periods: [149, 179, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 15m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,905,671,702
Annual Return: 45.95%
Sharpe Ratio: 1.51898
Sortino Ratio: 1.475
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.389
Lookback periods: [131, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 13m 18sRunning iteration 41/1500... Est. remaining: 11m 46sRunning iteration 51/1500... Est. remaining: 10m 56sRunning iteration 61/1500... Est. remaining: 10m 21sRunning iteration 71/1500... Est. remaining: 9m 57sRunning iteration 81/1500... Est. remaining: 9m 37sRunning iteration 91/1500... Est. remaining: 9m 21sRunning iteration 101/1500... Est. remaining: 9m 9sbest_combination: {'lookbacks': [131, 157, 172], 'score': np.float64(0.38913248755365804), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 57sRunning iteration 121/1500... Est. remaining: 8m 47sRunning iteration 131/1500... Est. remaining: 8m 38sRunning iteration 141/1500... Est. remaining: 8m 30sRunning iteration 151/1500... Est. remaining: 8m 22sRunning iteration 161/1500... Est. remaining: 8m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,113,462,720
Annual Return: 47.52%
Sharpe Ratio: 1.54628
Sortino Ratio: 1.517
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.603
Lookback periods: [147, 189, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 8m 15sRunning iteration 181/1500... Est. remaining: 8m 9sRunning iteration 191/1500... Est. remaining: 8m 2sRunning iteration 201/1500... Est. remaining: 7m 56sbest_combination: {'lookbacks': [147, 189, 196], 'score': np.float64(0.6025259320307326), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 50sRunning iteration 221/1500... Est. remaining: 7m 45sRunning iteration 231/1500... Est. remaining: 7m 39sRunning iteration 241/1500... Est. remaining: 7m 34sRunning iteration 251/1500... Est. remaining: 7m 29sRunning iteration 261/1500... Est. remaining: 7m 24sRunning iteration 271/1500... Est. remaining: 7m 19sRunning iteration 281/1500... Est. remaining: 7m 15sRunning iteration 291/1500... Est. remaining: 7m 10sRunning iteration 301/1500... Est. remaining: 7m 6sbest_combination: {'lookbacks': [147, 189, 196], 'score': np.float64(0.6025259320307326), 'visits': 1}
Running iteration 311/1500... Est. remaining: 7m 1sRunning iteration 321/1500... Est. remaining: 6m 57sRunning iteration 331/1500... Est. remaining: 6m 53sRunning iteration 341/1500... Est. remaining: 6m 48sRunning iteration 351/1500... Est. remaining: 6m 44sRunning iteration 361/1500... Est. remaining: 6m 40sRunning iteration 371/1500... Est. remaining: 6m 36sRunning iteration 381/1500... Est. remaining: 6m 32sRunning iteration 391/1500... Est. remaining: 6m 28sRunning iteration 401/1500... Est. remaining: 6m 24sbest_combination: {'lookbacks': [147, 189, 196], 'score': np.float64(0.6025259320307326), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 20sRunning iteration 421/1500... Est. remaining: 6m 16sRunning iteration 431/1500... Est. remaining: 6m 12sRunning iteration 441/1500... Est. remaining: 6m 8sRunning iteration 451/1500... Est. remaining: 6m 4sRunning iteration 461/1500... Est. remaining: 6m 0sRunning iteration 471/1500... Est. remaining: 5m 56sRunning iteration 481/1500... Est. remaining: 5m 53sRunning iteration 491/1500... Est. remaining: 5m 49sRunning iteration 501/1500... Est. remaining: 5m 45sbest_combination: {'lookbacks': [147, 189, 196], 'score': np.float64(0.6025259320307326), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 42sRunning iteration 521/1500... Est. remaining: 5m 38sRunning iteration 531/1500... Est. remaining: 5m 34sRunning iteration 541/1500... Est. remaining: 5m 31sRunning iteration 551/1500... Est. remaining: 5m 27sRunning iteration 561/1500... Est. remaining: 5m 23sRunning iteration 571/1500... Est. remaining: 5m 19sRunning iteration 581/1500... Est. remaining: 5m 15sRunning iteration 591/1500... Est. remaining: 5m 11sRunning iteration 601/1500... Est. remaining: 5m 7sbest_combination: {'lookbacks': [147, 189, 196], 'score': np.float64(0.6025259320307326), 'visits': 1}
Running iteration 611/1500... Est. remaining: 5m 4sRunning iteration 621/1500... Est. remaining: 5m 0sRunning iteration 631/1500... Est. remaining: 4m 57sRunning iteration 641/1500... Est. remaining: 4m 53sRunning iteration 651/1500... Est. remaining: 4m 50sRunning iteration 661/1500... Est. remaining: 4m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,491,051,597
Annual Return: 48.75%
Sharpe Ratio: 1.58520
Sortino Ratio: 1.558
Max Drawdown: -59.0%
Avg Drawdown: -10.2%
Normalized Score: 0.979
Lookback periods: [158, 161, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 4m 44sRunning iteration 681/1500... Est. remaining: 4m 40sRunning iteration 691/1500... Est. remaining: 4m 36sRunning iteration 701/1500... Est. remaining: 4m 33sbest_combination: {'lookbacks': [158, 161, 167], 'score': np.float64(0.9792606108801983), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 29sRunning iteration 721/1500... Est. remaining: 4m 26sRunning iteration 731/1500... Est. remaining: 4m 22sRunning iteration 741/1500... Est. remaining: 4m 19sRunning iteration 751/1500... Est. remaining: 4m 15sRunning iteration 761/1500... Est. remaining: 4m 12sRunning iteration 771/1500... Est. remaining: 4m 8sRunning iteration 781/1500... Est. remaining: 4m 5sRunning iteration 791/1500... Est. remaining: 4m 1sRunning iteration 801/1500... Est. remaining: 3m 58sbest_combination: {'lookbacks': [158, 161, 167], 'score': np.float64(0.9792606108801983), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 54sRunning iteration 821/1500... Est. remaining: 3m 51sRunning iteration 831/1500... Est. remaining: 3m 48sRunning iteration 841/1500... Est. remaining: 3m 44sRunning iteration 851/1500... Est. remaining: 3m 41sRunning iteration 861/1500... Est. remaining: 3m 37sRunning iteration 871/1500... Est. remaining: 3m 34sRunning iteration 881/1500... Est. remaining: 3m 30sRunning iteration 891/1500... Est. remaining: 3m 27sRunning iteration 901/1500... Est. remaining: 3m 23sbest_combination: {'lookbacks': [158, 161, 167], 'score': np.float64(0.9792606108801983), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 20sRunning iteration 921/1500... Est. remaining: 3m 17sRunning iteration 931/1500... Est. remaining: 3m 13sRunning iteration 941/1500... Est. remaining: 3m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,493,875,943
Annual Return: 48.75%
Sharpe Ratio: 1.59095
Sortino Ratio: 1.564
Max Drawdown: -56.9%
Avg Drawdown: -10.5%
Normalized Score: 1.020
Lookback periods: [156, 158, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 3m 7sRunning iteration 961/1500... Est. remaining: 3m 3sRunning iteration 971/1500... Est. remaining: 3m 0sRunning iteration 981/1500... Est. remaining: 2m 56sRunning iteration 991/1500... Est. remaining: 2m 53sRunning iteration 1001/1500... Est. remaining: 2m 49sbest_combination: {'lookbacks': [156, 158, 162], 'score': np.float64(1.0204984383618287), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 46sRunning iteration 1021/1500... Est. remaining: 2m 43sRunning iteration 1031/1500... Est. remaining: 2m 39sRunning iteration 1041/1500... Est. remaining: 2m 36sRunning iteration 1051/1500... Est. remaining: 2m 32sRunning iteration 1061/1500... Est. remaining: 2m 29sRunning iteration 1071/1500... Est. remaining: 2m 25sRunning iteration 1081/1500... Est. remaining: 2m 22sRunning iteration 1091/1500... Est. remaining: 2m 19sRunning iteration 1101/1500... Est. remaining: 2m 15sbest_combination: {'lookbacks': [156, 158, 162], 'score': np.float64(1.0204984383618287), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 12sRunning iteration 1121/1500... Est. remaining: 2m 8sRunning iteration 1131/1500... Est. remaining: 2m 5sRunning iteration 1141/1500... Est. remaining: 2m 2sRunning iteration 1151/1500... Est. remaining: 1m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,787,460,186
Annual Return: 49.30%
Sharpe Ratio: 1.61007
Sortino Ratio: 1.577
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 1.116
Lookback periods: [154, 159, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1161/1500... Est. remaining: 1m 55sRunning iteration 1171/1500... Est. remaining: 1m 52sRunning iteration 1181/1500... Est. remaining: 1m 48sRunning iteration 1191/1500... Est. remaining: 1m 45sRunning iteration 1201/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 38sRunning iteration 1221/1500... Est. remaining: 1m 35sRunning iteration 1231/1500... Est. remaining: 1m 31sRunning iteration 1241/1500... Est. remaining: 1m 28sRunning iteration 1251/1500... Est. remaining: 1m 24sRunning iteration 1261/1500... Est. remaining: 1m 21sRunning iteration 1271/1500... Est. remaining: 1m 18sRunning iteration 1281/1500... Est. remaining: 1m 14sRunning iteration 1291/1500... Est. remaining: 1m 11sRunning iteration 1301/1500... Est. remaining: 1m 7sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 4sRunning iteration 1321/1500... Est. remaining: 1m 0sRunning iteration 1331/1500... Est. remaining: 0m 57sRunning iteration 1341/1500... Est. remaining: 0m 54sRunning iteration 1351/1500... Est. remaining: 0m 50sRunning iteration 1361/1500... Est. remaining: 0m 47sRunning iteration 1371/1500... Est. remaining: 0m 43sRunning iteration 1381/1500... Est. remaining: 0m 40sRunning iteration 1391/1500... Est. remaining: 0m 36sRunning iteration 1401/1500... Est. remaining: 0m 33sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 30sRunning iteration 1421/1500... Est. remaining: 0m 26sRunning iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 19sRunning iteration 1451/1500... Est. remaining: 0m 16sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.3 minutes
Best normalized score: 1.12
best_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [154, 159, 166] (score: 1.1163)

Monte Carlo simulation completed in 8.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 159, 166] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,787,460,185.92
Average Annualized Gain: 49.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 198m 33s
End time: Sun Aug 24 16:47:25 EDT 2025
Average time per successful run: 13m 14s
==============================================================
✓ All runs completed successfully!
