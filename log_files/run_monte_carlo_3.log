Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: none
Start time: Sun Aug 24 00:41:39 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Sun Aug 24 00:41:39 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $670,025,906
Annual Return: 37.80%
Sharpe Ratio: 1.32392
Sortino Ratio: 1.226
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: -0.564
Lookback periods: [52, 95, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $874,855,100
Annual Return: 38.86%
Sharpe Ratio: 1.34531
Sortino Ratio: 1.267
Max Drawdown: -52.3%
Avg Drawdown: -11.7%
Normalized Score: -0.407
Lookback periods: [84, 98, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 12m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,967,313,539
Annual Return: 45.05%
Sharpe Ratio: 1.47659
Sortino Ratio: 1.434
Max Drawdown: -57.2%
Avg Drawdown: -13.0%
Normalized Score: -0.083
Lookback periods: [132, 154, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 9m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,531,945,698
Annual Return: 45.61%
Sharpe Ratio: 1.47236
Sortino Ratio: 1.439
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.089
Lookback periods: [173, 191, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 8m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,144,370,866
Annual Return: 46.90%
Sharpe Ratio: 1.51543
Sortino Ratio: 1.478
Max Drawdown: -59.0%
Avg Drawdown: -12.2%
Normalized Score: 0.144
Lookback periods: [180, 183, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 8m 17sRunning iteration 51/750... Est. remaining: 7m 41sRunning iteration 61/750... Est. remaining: 7m 13sRunning iteration 71/750... Est. remaining: 6m 53sRunning iteration 81/750... Est. remaining: 6m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,943,868,085
Annual Return: 49.36%
Sharpe Ratio: 1.59265
Sortino Ratio: 1.553
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.549
Lookback periods: [181, 189, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/750... Est. remaining: 6m 31sRunning iteration 101/750... Est. remaining: 6m 18sbest_combination: {'lookbacks': [181, 189, 191], 'score': np.float64(0.5489611435362514), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 6sRunning iteration 121/750... Est. remaining: 5m 56sRunning iteration 131/750... Est. remaining: 5m 46sRunning iteration 141/750... Est. remaining: 5m 38sRunning iteration 151/750... Est. remaining: 5m 29sRunning iteration 161/750... Est. remaining: 5m 21sRunning iteration 171/750... Est. remaining: 5m 14sRunning iteration 181/750... Est. remaining: 5m 7sRunning iteration 191/750... Est. remaining: 4m 59sRunning iteration 201/750... Est. remaining: 4m 53sbest_combination: {'lookbacks': [181, 189, 191], 'score': np.float64(0.5489611435362514), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 46sRunning iteration 221/750... Est. remaining: 4m 40sRunning iteration 231/750... Est. remaining: 4m 34sRunning iteration 241/750... Est. remaining: 4m 27sRunning iteration 251/750... Est. remaining: 4m 21sRunning iteration 261/750... Est. remaining: 4m 15sRunning iteration 271/750... Est. remaining: 4m 10sRunning iteration 281/750... Est. remaining: 4m 4sRunning iteration 291/750... Est. remaining: 3m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,092,923,526
Annual Return: 48.57%
Sharpe Ratio: 1.58109
Sortino Ratio: 1.552
Max Drawdown: -55.0%
Avg Drawdown: -10.7%
Normalized Score: 0.711
Lookback periods: [159, 162, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 301/750... Est. remaining: 3m 54sbest_combination: {'lookbacks': [159, 162, 171], 'score': np.float64(0.710562468251337), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,104,904,461
Annual Return: 44.03%
Sharpe Ratio: 1.57199
Sortino Ratio: 1.479
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.199
Lookback periods: [50, 53, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/750... Est. remaining: 3m 44sRunning iteration 331/750... Est. remaining: 3m 38sRunning iteration 341/750... Est. remaining: 3m 32sRunning iteration 351/750... Est. remaining: 3m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,641,242,461
Annual Return: 44.70%
Sharpe Ratio: 1.59965
Sortino Ratio: 1.512
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.386
Lookback periods: [50, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 361/750... Est. remaining: 3m 22sRunning iteration 371/750... Est. remaining: 3m 17sRunning iteration 381/750... Est. remaining: 3m 11sRunning iteration 391/750... Est. remaining: 3m 6sRunning iteration 401/750... Est. remaining: 3m 0sbest_combination: {'lookbacks': [50, 54, 95], 'score': np.float64(1.3856036097662856), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,830,490,959
Annual Return: 45.88%
Sharpe Ratio: 1.64903
Sortino Ratio: 1.560
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.659
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/750... Est. remaining: 2m 50sRunning iteration 431/750... Est. remaining: 2m 45sRunning iteration 441/750... Est. remaining: 2m 39sRunning iteration 451/750... Est. remaining: 2m 34sRunning iteration 461/750... Est. remaining: 2m 29sRunning iteration 471/750... Est. remaining: 2m 23sRunning iteration 481/750... Est. remaining: 2m 18sRunning iteration 491/750... Est. remaining: 2m 13sRunning iteration 501/750... Est. remaining: 2m 7sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.6588154422218515), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 2sRunning iteration 521/750... Est. remaining: 1m 57sRunning iteration 531/750... Est. remaining: 1m 52sRunning iteration 541/750... Est. remaining: 1m 46sRunning iteration 551/750... Est. remaining: 1m 41sRunning iteration 561/750... Est. remaining: 1m 36sRunning iteration 571/750... Est. remaining: 1m 31sRunning iteration 581/750... Est. remaining: 1m 26sRunning iteration 591/750... Est. remaining: 1m 20sRunning iteration 601/750... Est. remaining: 1m 15sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.6588154422218515), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.764
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/750... Est. remaining: 1m 10sRunning iteration 621/750... Est. remaining: 1m 5sRunning iteration 631/750... Est. remaining: 1m 0sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7642766105229224), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 1.76
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7642766105229224), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 52, 95] (score: 1.7643)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Sun Aug 24 00:48:02 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $762,561,578
Annual Return: 38.31%
Sharpe Ratio: 1.30567
Sortino Ratio: 1.233
Max Drawdown: -55.8%
Avg Drawdown: -14.2%
Normalized Score: -1.273
Lookback periods: [90, 110, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,746,632,654
Annual Return: 41.66%
Sharpe Ratio: 1.39700
Sortino Ratio: 1.351
Max Drawdown: -67.8%
Avg Drawdown: -13.7%
Normalized Score: -1.109
Lookback periods: [122, 135, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,987,251,916
Annual Return: 45.08%
Sharpe Ratio: 1.46707
Sortino Ratio: 1.435
Max Drawdown: -65.0%
Avg Drawdown: -11.9%
Normalized Score: -0.427
Lookback periods: [154, 195, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 13m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,123,374,212
Annual Return: 44.06%
Sharpe Ratio: 1.45037
Sortino Ratio: 1.411
Max Drawdown: -58.5%
Avg Drawdown: -11.8%
Normalized Score: -0.342
Lookback periods: [137, 163, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 10m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,062,455,763
Annual Return: 46.08%
Sharpe Ratio: 1.50275
Sortino Ratio: 1.466
Max Drawdown: -60.6%
Avg Drawdown: -11.4%
Normalized Score: -0.104
Lookback periods: [157, 192, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 9m 22sRunning iteration 41/750... Est. remaining: 8m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,605,608,603
Annual Return: 43.31%
Sharpe Ratio: 1.48675
Sortino Ratio: 1.419
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: 0.011
Lookback periods: [84, 128, 138] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/750... Est. remaining: 8m 5sRunning iteration 61/750... Est. remaining: 7m 34sRunning iteration 71/750... Est. remaining: 7m 11sRunning iteration 81/750... Est. remaining: 6m 53sRunning iteration 91/750... Est. remaining: 6m 36sRunning iteration 101/750... Est. remaining: 6m 23sbest_combination: {'lookbacks': [84, 128, 138], 'score': np.float64(0.011198999377644486), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 11sRunning iteration 121/750... Est. remaining: 6m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,741,575,046
Annual Return: 47.29%
Sharpe Ratio: 1.54318
Sortino Ratio: 1.506
Max Drawdown: -62.4%
Avg Drawdown: -11.0%
Normalized Score: 0.058
Lookback periods: [154, 160, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,042,482,601
Annual Return: 48.04%
Sharpe Ratio: 1.56176
Sortino Ratio: 1.531
Max Drawdown: -61.3%
Avg Drawdown: -11.8%
Normalized Score: 0.080
Lookback periods: [152, 160, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/750... Est. remaining: 6m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,530,623,406
Annual Return: 47.76%
Sharpe Ratio: 1.55312
Sortino Ratio: 1.524
Max Drawdown: -60.8%
Avg Drawdown: -11.5%
Normalized Score: 0.104
Lookback periods: [155, 173, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/750... Est. remaining: 5m 56sRunning iteration 151/750... Est. remaining: 5m 46sRunning iteration 161/750... Est. remaining: 5m 37sRunning iteration 171/750... Est. remaining: 5m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,242,483,344
Annual Return: 46.96%
Sharpe Ratio: 1.52510
Sortino Ratio: 1.500
Max Drawdown: -55.0%
Avg Drawdown: -10.7%
Normalized Score: 0.265
Lookback periods: [156, 164, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/750... Est. remaining: 5m 24sRunning iteration 191/750... Est. remaining: 5m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,493,875,943
Annual Return: 48.75%
Sharpe Ratio: 1.59095
Sortino Ratio: 1.564
Max Drawdown: -56.9%
Avg Drawdown: -10.5%
Normalized Score: 0.494
Lookback periods: [156, 158, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/750... Est. remaining: 5m 11sbest_combination: {'lookbacks': [156, 158, 162], 'score': np.float64(0.4943306136598751), 'visits': 1}
Running iteration 211/750... Est. remaining: 5m 3sRunning iteration 221/750... Est. remaining: 4m 56sRunning iteration 231/750... Est. remaining: 4m 48sRunning iteration 241/750... Est. remaining: 4m 42sRunning iteration 251/750... Est. remaining: 4m 35sRunning iteration 261/750... Est. remaining: 4m 28sRunning iteration 271/750... Est. remaining: 4m 22sRunning iteration 281/750... Est. remaining: 4m 16sRunning iteration 291/750... Est. remaining: 4m 10sRunning iteration 301/750... Est. remaining: 4m 3sbest_combination: {'lookbacks': [156, 158, 162], 'score': np.float64(0.4943306136598751), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 57sRunning iteration 321/750... Est. remaining: 3m 51sRunning iteration 331/750... Est. remaining: 3m 45sRunning iteration 341/750... Est. remaining: 3m 39sRunning iteration 351/750... Est. remaining: 3m 33sRunning iteration 361/750... Est. remaining: 3m 27sRunning iteration 371/750... Est. remaining: 3m 21sRunning iteration 381/750... Est. remaining: 3m 16sRunning iteration 391/750... Est. remaining: 3m 10sRunning iteration 401/750... Est. remaining: 3m 5sbest_combination: {'lookbacks': [156, 158, 162], 'score': np.float64(0.4943306136598751), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 59sRunning iteration 421/750... Est. remaining: 2m 53sRunning iteration 431/750... Est. remaining: 2m 48sRunning iteration 441/750... Est. remaining: 2m 42sRunning iteration 451/750... Est. remaining: 2m 37sRunning iteration 461/750... Est. remaining: 2m 32sRunning iteration 471/750... Est. remaining: 2m 26sRunning iteration 481/750... Est. remaining: 2m 21sRunning iteration 491/750... Est. remaining: 2m 15sRunning iteration 501/750... Est. remaining: 2m 10sbest_combination: {'lookbacks': [156, 158, 162], 'score': np.float64(0.4943306136598751), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 4sRunning iteration 521/750... Est. remaining: 1m 59sRunning iteration 531/750... Est. remaining: 1m 54sRunning iteration 541/750... Est. remaining: 1m 49sRunning iteration 551/750... Est. remaining: 1m 43sRunning iteration 561/750... Est. remaining: 1m 38sRunning iteration 571/750... Est. remaining: 1m 33sRunning iteration 581/750... Est. remaining: 1m 27sRunning iteration 591/750... Est. remaining: 1m 22sRunning iteration 601/750... Est. remaining: 1m 17sbest_combination: {'lookbacks': [156, 158, 162], 'score': np.float64(0.4943306136598751), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 12sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 1sRunning iteration 641/750... Est. remaining: 0m 56sRunning iteration 651/750... Est. remaining: 0m 51sRunning iteration 661/750... Est. remaining: 0m 46sRunning iteration 671/750... Est. remaining: 0m 41sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [156, 158, 162], 'score': np.float64(0.4943306136598751), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,509,307,835
Annual Return: 48.76%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.563
Max Drawdown: -55.0%
Avg Drawdown: -10.3%
Normalized Score: 0.572
Lookback periods: [157, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.4 minutes
Best normalized score: 0.57
best_combination: {'lookbacks': [157, 161, 168], 'score': np.float64(0.5724791879647737), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [157, 161, 168] (score: 0.5725)

Monte Carlo simulation completed in 6.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [157, 161, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 117 selections (28.1%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,509,307,834.85
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Sun Aug 24 00:54:34 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,401,623,431
Annual Return: 40.76%
Sharpe Ratio: 1.36229
Sortino Ratio: 1.304
Max Drawdown: -67.3%
Avg Drawdown: -13.0%
Normalized Score: -1.097
Lookback periods: [102, 162, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,284,043,154
Annual Return: 42.76%
Sharpe Ratio: 1.39788
Sortino Ratio: 1.362
Max Drawdown: -63.8%
Avg Drawdown: -12.1%
Normalized Score: -0.621
Lookback periods: [164, 177, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,816,093,715
Annual Return: 45.87%
Sharpe Ratio: 1.50425
Sortino Ratio: 1.459
Max Drawdown: -62.1%
Avg Drawdown: -12.6%
Normalized Score: -0.141
Lookback periods: [146, 153, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 13m 45sRunning iteration 21/750... Est. remaining: 9m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,580,815,141
Annual Return: 44.63%
Sharpe Ratio: 1.49249
Sortino Ratio: 1.446
Max Drawdown: -58.0%
Avg Drawdown: -12.5%
Normalized Score: -0.106
Lookback periods: [117, 128, 133] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 8m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,667,622,606
Annual Return: 44.73%
Sharpe Ratio: 1.49912
Sortino Ratio: 1.455
Max Drawdown: -55.0%
Avg Drawdown: -12.1%
Normalized Score: 0.063
Lookback periods: [110, 137, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 8m 25sRunning iteration 51/750... Est. remaining: 7m 46sRunning iteration 61/750... Est. remaining: 7m 18sRunning iteration 71/750... Est. remaining: 6m 57sRunning iteration 81/750... Est. remaining: 6m 41sRunning iteration 91/750... Est. remaining: 6m 27sRunning iteration 101/750... Est. remaining: 6m 14sbest_combination: {'lookbacks': [110, 137, 151], 'score': np.float64(0.06260217954435268), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,219,160,012
Annual Return: 46.21%
Sharpe Ratio: 1.51326
Sortino Ratio: 1.467
Max Drawdown: -59.0%
Avg Drawdown: -12.0%
Normalized Score: 0.069
Lookback periods: [141, 158, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/750... Est. remaining: 5m 58sRunning iteration 131/750... Est. remaining: 5m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,906,377,022
Annual Return: 47.39%
Sharpe Ratio: 1.55144
Sortino Ratio: 1.517
Max Drawdown: -58.1%
Avg Drawdown: -12.6%
Normalized Score: 0.234
Lookback periods: [140, 152, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/750... Est. remaining: 5m 46sRunning iteration 151/750... Est. remaining: 5m 37sRunning iteration 161/750... Est. remaining: 5m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,943,610,746
Annual Return: 47.42%
Sharpe Ratio: 1.53281
Sortino Ratio: 1.495
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.285
Lookback periods: [178, 190, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/750... Est. remaining: 5m 25sRunning iteration 181/750... Est. remaining: 5m 17sRunning iteration 191/750... Est. remaining: 5m 9sRunning iteration 201/750... Est. remaining: 5m 2sbest_combination: {'lookbacks': [178, 190, 191], 'score': np.float64(0.2845044860655041), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 55sRunning iteration 221/750... Est. remaining: 4m 49sRunning iteration 231/750... Est. remaining: 4m 42sRunning iteration 241/750... Est. remaining: 4m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,010,355,867
Annual Return: 48.53%
Sharpe Ratio: 1.54706
Sortino Ratio: 1.511
Max Drawdown: -60.2%
Avg Drawdown: -11.2%
Normalized Score: 0.371
Lookback periods: [188, 189, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/750... Est. remaining: 4m 31sRunning iteration 261/750... Est. remaining: 4m 25sRunning iteration 271/750... Est. remaining: 4m 19sRunning iteration 281/750... Est. remaining: 4m 13sRunning iteration 291/750... Est. remaining: 4m 6sRunning iteration 301/750... Est. remaining: 4m 0sbest_combination: {'lookbacks': [188, 189, 196], 'score': np.float64(0.3710059616003232), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 54sRunning iteration 321/750... Est. remaining: 3m 48sRunning iteration 331/750... Est. remaining: 3m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,779,275,359
Annual Return: 48.42%
Sharpe Ratio: 1.54740
Sortino Ratio: 1.522
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.404
Lookback periods: [175, 188, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 341/750... Est. remaining: 3m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,763,401,974
Annual Return: 48.87%
Sharpe Ratio: 1.57358
Sortino Ratio: 1.536
Max Drawdown: -59.6%
Avg Drawdown: -11.0%
Normalized Score: 0.503
Lookback periods: [183, 188, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 351/750... Est. remaining: 3m 33sRunning iteration 361/750... Est. remaining: 3m 27sRunning iteration 371/750... Est. remaining: 3m 21sRunning iteration 381/750... Est. remaining: 3m 16sRunning iteration 391/750... Est. remaining: 3m 10sRunning iteration 401/750... Est. remaining: 3m 5sbest_combination: {'lookbacks': [183, 188, 190], 'score': np.float64(0.5027592431874328), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 59sRunning iteration 421/750... Est. remaining: 2m 53sRunning iteration 431/750... Est. remaining: 2m 48sRunning iteration 441/750... Est. remaining: 2m 42sRunning iteration 451/750... Est. remaining: 2m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,220,725,670
Annual Return: 49.84%
Sharpe Ratio: 1.59652
Sortino Ratio: 1.574
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.679
Lookback periods: [176, 188, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/750... Est. remaining: 2m 32sRunning iteration 471/750... Est. remaining: 2m 27sRunning iteration 481/750... Est. remaining: 2m 21sRunning iteration 491/750... Est. remaining: 2m 16sRunning iteration 501/750... Est. remaining: 2m 10sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(0.6788250795061984), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 5sRunning iteration 521/750... Est. remaining: 2m 0sRunning iteration 531/750... Est. remaining: 1m 54sRunning iteration 541/750... Est. remaining: 1m 49sRunning iteration 551/750... Est. remaining: 1m 44sRunning iteration 561/750... Est. remaining: 1m 38sRunning iteration 571/750... Est. remaining: 1m 33sRunning iteration 581/750... Est. remaining: 1m 28sRunning iteration 591/750... Est. remaining: 1m 23sRunning iteration 601/750... Est. remaining: 1m 17sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(0.6788250795061984), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 12sRunning iteration 621/750... Est. remaining: 1m 7sRunning iteration 631/750... Est. remaining: 1m 2sRunning iteration 641/750... Est. remaining: 0m 56sRunning iteration 651/750... Est. remaining: 0m 51sRunning iteration 661/750... Est. remaining: 0m 46sRunning iteration 671/750... Est. remaining: 0m 41sRunning iteration 681/750... Est. remaining: 0m 36sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(0.6788250795061984), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.4 minutes
Best normalized score: 0.68
best_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(0.6788250795061984), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [176, 188, 197] (score: 0.6788)

Monte Carlo simulation completed in 6.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 188, 197] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 121 selections (29.1%)
2. sp500_hma: 104 selections (25.0%)
3. naz100_pine: 86 selections (20.7%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,220,725,670.23
Average Annualized Gain: 49.8%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Sun Aug 24 01:01:08 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $991,564,900
Annual Return: 39.37%
Sharpe Ratio: 1.31883
Sortino Ratio: 1.265
Max Drawdown: -63.1%
Avg Drawdown: -13.7%
Normalized Score: -0.850
Lookback periods: [99, 153, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,758,028,502
Annual Return: 43.54%
Sharpe Ratio: 1.42328
Sortino Ratio: 1.382
Max Drawdown: -66.3%
Avg Drawdown: -12.1%
Normalized Score: -0.268
Lookback periods: [146, 199, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,559,485,088
Annual Return: 43.23%
Sharpe Ratio: 1.42060
Sortino Ratio: 1.368
Max Drawdown: -61.4%
Avg Drawdown: -13.0%
Normalized Score: -0.266
Lookback periods: [129, 181, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 13m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,932,792,310
Annual Return: 45.02%
Sharpe Ratio: 1.49229
Sortino Ratio: 1.451
Max Drawdown: -61.9%
Avg Drawdown: -12.6%
Normalized Score: 0.069
Lookback periods: [125, 133, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 10m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,443,730,632
Annual Return: 43.04%
Sharpe Ratio: 1.45645
Sortino Ratio: 1.387
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: 0.070
Lookback periods: [87, 127, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,811,827,031
Annual Return: 44.89%
Sharpe Ratio: 1.45722
Sortino Ratio: 1.423
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.215
Lookback periods: [158, 163, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 9m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,875,046,592
Annual Return: 48.92%
Sharpe Ratio: 1.58461
Sortino Ratio: 1.550
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 0.799
Lookback periods: [154, 155, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 9m 0sRunning iteration 51/750... Est. remaining: 8m 15sRunning iteration 61/750... Est. remaining: 7m 43sRunning iteration 71/750... Est. remaining: 7m 18sRunning iteration 81/750... Est. remaining: 6m 58sRunning iteration 91/750... Est. remaining: 6m 41sRunning iteration 101/750... Est. remaining: 6m 26sbest_combination: {'lookbacks': [154, 155, 160], 'score': np.float64(0.7990372281987236), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 14sRunning iteration 121/750... Est. remaining: 6m 3sRunning iteration 131/750... Est. remaining: 5m 54sRunning iteration 141/750... Est. remaining: 5m 44sRunning iteration 151/750... Est. remaining: 5m 36sRunning iteration 161/750... Est. remaining: 5m 28sRunning iteration 171/750... Est. remaining: 5m 20sRunning iteration 181/750... Est. remaining: 5m 12sRunning iteration 191/750... Est. remaining: 5m 5sRunning iteration 201/750... Est. remaining: 4m 58sbest_combination: {'lookbacks': [154, 155, 160], 'score': np.float64(0.7990372281987236), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 51sRunning iteration 221/750... Est. remaining: 4m 44sRunning iteration 231/750... Est. remaining: 4m 37sRunning iteration 241/750... Est. remaining: 4m 31sRunning iteration 251/750... Est. remaining: 4m 24sRunning iteration 261/750... Est. remaining: 4m 18sRunning iteration 271/750... Est. remaining: 4m 12sRunning iteration 281/750... Est. remaining: 4m 6sRunning iteration 291/750... Est. remaining: 4m 0sRunning iteration 301/750... Est. remaining: 3m 54sbest_combination: {'lookbacks': [154, 155, 160], 'score': np.float64(0.7990372281987236), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 48sRunning iteration 321/750... Est. remaining: 3m 43sRunning iteration 331/750... Est. remaining: 3m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,341,942,069
Annual Return: 48.68%
Sharpe Ratio: 1.57604
Sortino Ratio: 1.546
Max Drawdown: -59.0%
Avg Drawdown: -10.2%
Normalized Score: 0.831
Lookback periods: [158, 161, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 341/750... Est. remaining: 3m 33sRunning iteration 351/750... Est. remaining: 3m 28sRunning iteration 361/750... Est. remaining: 3m 22sRunning iteration 371/750... Est. remaining: 3m 16sRunning iteration 381/750... Est. remaining: 3m 11sRunning iteration 391/750... Est. remaining: 3m 5sRunning iteration 401/750... Est. remaining: 3m 0sbest_combination: {'lookbacks': [158, 161, 171], 'score': np.float64(0.8307540535994505), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 54sRunning iteration 421/750... Est. remaining: 2m 49sRunning iteration 431/750... Est. remaining: 2m 44sRunning iteration 441/750... Est. remaining: 2m 38sRunning iteration 451/750... Est. remaining: 2m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,706,879,470
Annual Return: 48.85%
Sharpe Ratio: 1.59167
Sortino Ratio: 1.554
Max Drawdown: -57.2%
Avg Drawdown: -10.6%
Normalized Score: 0.874
Lookback periods: [154, 159, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/750... Est. remaining: 2m 28sRunning iteration 471/750... Est. remaining: 2m 23sRunning iteration 481/750... Est. remaining: 2m 18sRunning iteration 491/750... Est. remaining: 2m 13sRunning iteration 501/750... Est. remaining: 2m 7sbest_combination: {'lookbacks': [154, 159, 169], 'score': np.float64(0.8742107018386222), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 2sRunning iteration 521/750... Est. remaining: 1m 57sRunning iteration 531/750... Est. remaining: 1m 52sRunning iteration 541/750... Est. remaining: 1m 46sRunning iteration 551/750... Est. remaining: 1m 41sRunning iteration 561/750... Est. remaining: 1m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,502,219,013
Annual Return: 49.58%
Sharpe Ratio: 1.60332
Sortino Ratio: 1.572
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.906
Lookback periods: [154, 154, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/750... Est. remaining: 1m 31sRunning iteration 581/750... Est. remaining: 1m 26sRunning iteration 591/750... Est. remaining: 1m 21sRunning iteration 601/750... Est. remaining: 1m 16sbest_combination: {'lookbacks': [154, 154, 157], 'score': np.float64(0.9063680151083954), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,787,460,186
Annual Return: 49.30%
Sharpe Ratio: 1.61007
Sortino Ratio: 1.577
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 0.976
Lookback periods: [154, 159, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/750... Est. remaining: 1m 1sRunning iteration 641/750... Est. remaining: 0m 56sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(0.9762941896148696), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 0.98
best_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(0.9762941896148696), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [154, 159, 166] (score: 0.9763)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 159, 166] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,787,460,185.92
Average Annualized Gain: 49.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Sun Aug 24 01:07:35 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $228,442,886
Annual Return: 33.59%
Sharpe Ratio: 1.14151
Sortino Ratio: 1.069
Max Drawdown: -62.2%
Avg Drawdown: -15.0%
Normalized Score: -1.830
Lookback periods: [69, 171, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $427,724,837
Annual Return: 36.03%
Sharpe Ratio: 1.28218
Sortino Ratio: 1.199
Max Drawdown: -44.8%
Avg Drawdown: -11.2%
Normalized Score: -0.312
Lookback periods: [51, 78, 91] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,584,479,198
Annual Return: 45.66%
Sharpe Ratio: 1.49601
Sortino Ratio: 1.460
Max Drawdown: -62.4%
Avg Drawdown: -12.2%
Normalized Score: 0.037
Lookback periods: [138, 160, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 13m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,122,842,247
Annual Return: 42.46%
Sharpe Ratio: 1.47897
Sortino Ratio: 1.386
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: 0.140
Lookback periods: [90, 94, 137] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 10m 29sRunning iteration 31/750... Est. remaining: 8m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,804,999,399
Annual Return: 48.43%
Sharpe Ratio: 1.57795
Sortino Ratio: 1.543
Max Drawdown: -57.2%
Avg Drawdown: -12.0%
Normalized Score: 0.576
Lookback periods: [128, 156, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 8m 22sRunning iteration 51/750... Est. remaining: 7m 44sRunning iteration 61/750... Est. remaining: 7m 17sRunning iteration 71/750... Est. remaining: 6m 56sRunning iteration 81/750... Est. remaining: 6m 39sRunning iteration 91/750... Est. remaining: 6m 25sRunning iteration 101/750... Est. remaining: 6m 13sbest_combination: {'lookbacks': [128, 156, 159], 'score': np.float64(0.5758194656499496), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 2sRunning iteration 121/750... Est. remaining: 5m 52sRunning iteration 131/750... Est. remaining: 5m 43sRunning iteration 141/750... Est. remaining: 5m 34sRunning iteration 151/750... Est. remaining: 5m 26sRunning iteration 161/750... Est. remaining: 5m 18sRunning iteration 171/750... Est. remaining: 5m 11sRunning iteration 181/750... Est. remaining: 5m 4sRunning iteration 191/750... Est. remaining: 4m 57sRunning iteration 201/750... Est. remaining: 4m 50sbest_combination: {'lookbacks': [128, 156, 159], 'score': np.float64(0.5758194656499496), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 44sRunning iteration 221/750... Est. remaining: 4m 38sRunning iteration 231/750... Est. remaining: 4m 32sRunning iteration 241/750... Est. remaining: 4m 26sRunning iteration 251/750... Est. remaining: 4m 20sRunning iteration 261/750... Est. remaining: 4m 14sRunning iteration 271/750... Est. remaining: 4m 8sRunning iteration 281/750... Est. remaining: 4m 2sRunning iteration 291/750... Est. remaining: 3m 57sRunning iteration 301/750... Est. remaining: 3m 51sbest_combination: {'lookbacks': [128, 156, 159], 'score': np.float64(0.5758194656499496), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 45sRunning iteration 321/750... Est. remaining: 3m 40sRunning iteration 331/750... Est. remaining: 3m 34sRunning iteration 341/750... Est. remaining: 3m 29sRunning iteration 351/750... Est. remaining: 3m 24sRunning iteration 361/750... Est. remaining: 3m 19sRunning iteration 371/750... Est. remaining: 3m 13sRunning iteration 381/750... Est. remaining: 3m 8sRunning iteration 391/750... Est. remaining: 3m 3sRunning iteration 401/750... Est. remaining: 2m 57sbest_combination: {'lookbacks': [128, 156, 159], 'score': np.float64(0.5758194656499496), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 52sRunning iteration 421/750... Est. remaining: 2m 47sRunning iteration 431/750... Est. remaining: 2m 41sRunning iteration 441/750... Est. remaining: 2m 36sRunning iteration 451/750... Est. remaining: 2m 31sRunning iteration 461/750... Est. remaining: 2m 26sRunning iteration 471/750... Est. remaining: 2m 21sRunning iteration 481/750... Est. remaining: 2m 15sRunning iteration 491/750... Est. remaining: 2m 10sRunning iteration 501/750... Est. remaining: 2m 5sbest_combination: {'lookbacks': [128, 156, 159], 'score': np.float64(0.5758194656499496), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 0sRunning iteration 521/750... Est. remaining: 1m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,947,658,806
Annual Return: 47.99%
Sharpe Ratio: 1.57747
Sortino Ratio: 1.535
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.610
Lookback periods: [127, 157, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/750... Est. remaining: 1m 50sRunning iteration 541/750... Est. remaining: 1m 45sRunning iteration 551/750... Est. remaining: 1m 40sRunning iteration 561/750... Est. remaining: 1m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,523,713,142
Annual Return: 48.29%
Sharpe Ratio: 1.58549
Sortino Ratio: 1.546
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.667
Lookback periods: [136, 158, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/750... Est. remaining: 1m 30sRunning iteration 581/750... Est. remaining: 1m 25sRunning iteration 591/750... Est. remaining: 1m 20sRunning iteration 601/750... Est. remaining: 1m 15sbest_combination: {'lookbacks': [136, 158, 179], 'score': np.float64(0.6665716325697337), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 10sRunning iteration 621/750... Est. remaining: 1m 5sRunning iteration 631/750... Est. remaining: 1m 0sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,895,771,759
Annual Return: 48.47%
Sharpe Ratio: 1.59270
Sortino Ratio: 1.559
Max Drawdown: -58.2%
Avg Drawdown: -10.7%
Normalized Score: 0.757
Lookback periods: [146, 156, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/750... Est. remaining: 0m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,693,672,712
Annual Return: 48.84%
Sharpe Ratio: 1.59483
Sortino Ratio: 1.554
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 0.892
Lookback periods: [156, 159, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [156, 159, 169], 'score': np.float64(0.8923959950645199), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 0.89
best_combination: {'lookbacks': [156, 159, 169], 'score': np.float64(0.8923959950645199), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [156, 159, 169] (score: 0.8924)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 159, 169] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 112 selections (26.9%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,693,672,712.07
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Sun Aug 24 01:14:00 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $436,225,437
Annual Return: 36.10%
Sharpe Ratio: 1.23161
Sortino Ratio: 1.155
Max Drawdown: -69.7%
Avg Drawdown: -14.4%
Normalized Score: -2.307
Lookback periods: [89, 140, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $325,404,781
Annual Return: 34.96%
Sharpe Ratio: 1.22935
Sortino Ratio: 1.133
Max Drawdown: -44.8%
Avg Drawdown: -10.0%
Normalized Score: -1.077
Lookback periods: [51, 83, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $961,208,689
Annual Return: 39.24%
Sharpe Ratio: 1.38047
Sortino Ratio: 1.287
Max Drawdown: -51.1%
Avg Drawdown: -10.9%
Normalized Score: -0.548
Lookback periods: [50, 57, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,793,664,801
Annual Return: 45.85%
Sharpe Ratio: 1.48555
Sortino Ratio: 1.443
Max Drawdown: -60.2%
Avg Drawdown: -11.9%
Normalized Score: 0.050
Lookback periods: [182, 187, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 14m 41sRunning iteration 21/750... Est. remaining: 10m 13sRunning iteration 31/750... Est. remaining: 8m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,196,704,793
Annual Return: 46.93%
Sharpe Ratio: 1.54134
Sortino Ratio: 1.500
Max Drawdown: -57.2%
Avg Drawdown: -12.8%
Normalized Score: 0.304
Lookback periods: [128, 149, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 8m 11sRunning iteration 51/750... Est. remaining: 7m 37sRunning iteration 61/750... Est. remaining: 7m 13sRunning iteration 71/750... Est. remaining: 6m 53sRunning iteration 81/750... Est. remaining: 6m 38sRunning iteration 91/750... Est. remaining: 6m 24sRunning iteration 101/750... Est. remaining: 6m 12sbest_combination: {'lookbacks': [128, 149, 193], 'score': np.float64(0.30379540423440204), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 1sRunning iteration 121/750... Est. remaining: 5m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,220,291,350
Annual Return: 46.95%
Sharpe Ratio: 1.52555
Sortino Ratio: 1.488
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: 0.314
Lookback periods: [156, 181, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/750... Est. remaining: 5m 47sRunning iteration 141/750... Est. remaining: 5m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,366,863,703
Annual Return: 48.21%
Sharpe Ratio: 1.56845
Sortino Ratio: 1.531
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.593
Lookback periods: [157, 178, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/750... Est. remaining: 5m 34sRunning iteration 161/750... Est. remaining: 5m 26sRunning iteration 171/750... Est. remaining: 5m 18sRunning iteration 181/750... Est. remaining: 5m 11sRunning iteration 191/750... Est. remaining: 5m 3sRunning iteration 201/750... Est. remaining: 4m 56sbest_combination: {'lookbacks': [157, 178, 200], 'score': np.float64(0.5932881987172485), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 49sRunning iteration 221/750... Est. remaining: 4m 43sRunning iteration 231/750... Est. remaining: 4m 36sRunning iteration 241/750... Est. remaining: 4m 30sRunning iteration 251/750... Est. remaining: 4m 23sRunning iteration 261/750... Est. remaining: 4m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,725,661,972
Annual Return: 47.28%
Sharpe Ratio: 1.54698
Sortino Ratio: 1.515
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.665
Lookback periods: [160, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/750... Est. remaining: 4m 13sRunning iteration 281/750... Est. remaining: 4m 7sRunning iteration 291/750... Est. remaining: 4m 2sRunning iteration 301/750... Est. remaining: 3m 56sbest_combination: {'lookbacks': [160, 161, 168], 'score': np.float64(0.6645812457490894), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 50sRunning iteration 321/750... Est. remaining: 3m 44sRunning iteration 331/750... Est. remaining: 3m 38sRunning iteration 341/750... Est. remaining: 3m 33sRunning iteration 351/750... Est. remaining: 3m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,247,945,382
Annual Return: 48.15%
Sharpe Ratio: 1.57001
Sortino Ratio: 1.529
Max Drawdown: -59.0%
Avg Drawdown: -10.1%
Normalized Score: 0.784
Lookback periods: [156, 158, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 361/750... Est. remaining: 3m 23sRunning iteration 371/750... Est. remaining: 3m 18sRunning iteration 381/750... Est. remaining: 3m 12sRunning iteration 391/750... Est. remaining: 3m 6sRunning iteration 401/750... Est. remaining: 3m 1sbest_combination: {'lookbacks': [156, 158, 177], 'score': np.float64(0.7837986173237571), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 55sRunning iteration 421/750... Est. remaining: 2m 50sRunning iteration 431/750... Est. remaining: 2m 44sRunning iteration 441/750... Est. remaining: 2m 39sRunning iteration 451/750... Est. remaining: 2m 34sRunning iteration 461/750... Est. remaining: 2m 28sRunning iteration 471/750... Est. remaining: 2m 23sRunning iteration 481/750... Est. remaining: 2m 18sRunning iteration 491/750... Est. remaining: 2m 12sRunning iteration 501/750... Est. remaining: 2m 7sbest_combination: {'lookbacks': [156, 158, 177], 'score': np.float64(0.7837986173237571), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 2sRunning iteration 521/750... Est. remaining: 1m 57sRunning iteration 531/750... Est. remaining: 1m 52sRunning iteration 541/750... Est. remaining: 1m 46sRunning iteration 551/750... Est. remaining: 1m 41sRunning iteration 561/750... Est. remaining: 1m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,676,121,662
Annual Return: 48.83%
Sharpe Ratio: 1.60082
Sortino Ratio: 1.566
Max Drawdown: -55.0%
Avg Drawdown: -10.4%
Normalized Score: 1.038
Lookback periods: [157, 160, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/750... Est. remaining: 1m 31sRunning iteration 581/750... Est. remaining: 1m 26sRunning iteration 591/750... Est. remaining: 1m 21sRunning iteration 601/750... Est. remaining: 1m 16sbest_combination: {'lookbacks': [157, 160, 168], 'score': np.float64(1.0379650340109996), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 0sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [157, 160, 168], 'score': np.float64(1.0379650340109996), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 1.04
best_combination: {'lookbacks': [157, 160, 168], 'score': np.float64(1.0379650340109996), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [157, 160, 168] (score: 1.0380)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [157, 160, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 113 selections (27.2%)
3. naz100_pi: 76 selections (18.3%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,676,121,661.68
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Sun Aug 24 01:20:26 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $623,853,706
Annual Return: 37.52%
Sharpe Ratio: 1.26158
Sortino Ratio: 1.193
Max Drawdown: -67.2%
Avg Drawdown: -12.7%
Normalized Score: -1.255
Lookback periods: [57, 171, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,117,305,406
Annual Return: 39.85%
Sharpe Ratio: 1.34306
Sortino Ratio: 1.286
Max Drawdown: -69.2%
Avg Drawdown: -13.2%
Normalized Score: -1.091
Lookback periods: [91, 168, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $514,001,035
Annual Return: 36.75%
Sharpe Ratio: 1.28339
Sortino Ratio: 1.200
Max Drawdown: -52.3%
Avg Drawdown: -12.2%
Normalized Score: -0.662
Lookback periods: [81, 85, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,565,147,712
Annual Return: 41.21%
Sharpe Ratio: 1.37345
Sortino Ratio: 1.322
Max Drawdown: -61.7%
Avg Drawdown: -12.6%
Normalized Score: -0.583
Lookback periods: [99, 146, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $704,031,324
Annual Return: 38.00%
Sharpe Ratio: 1.33902
Sortino Ratio: 1.242
Max Drawdown: -52.3%
Avg Drawdown: -11.6%
Normalized Score: -0.365
Lookback periods: [50, 93, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 16m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,673,520,543
Annual Return: 41.49%
Sharpe Ratio: 1.41545
Sortino Ratio: 1.338
Max Drawdown: -52.3%
Avg Drawdown: -11.5%
Normalized Score: 0.020
Lookback periods: [95, 99, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,684,357,312
Annual Return: 44.75%
Sharpe Ratio: 1.45725
Sortino Ratio: 1.427
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.142
Lookback periods: [158, 172, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 12m 35sRunning iteration 31/750... Est. remaining: 10m 12sRunning iteration 41/750... Est. remaining: 9m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,996,356,149
Annual Return: 42.21%
Sharpe Ratio: 1.43924
Sortino Ratio: 1.363
Max Drawdown: -52.3%
Avg Drawdown: -11.2%
Normalized Score: 0.181
Lookback periods: [96, 96, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/750... Est. remaining: 8m 33sRunning iteration 61/750... Est. remaining: 8m 0sRunning iteration 71/750... Est. remaining: 7m 33sRunning iteration 81/750... Est. remaining: 7m 12sRunning iteration 91/750... Est. remaining: 6m 53sRunning iteration 101/750... Est. remaining: 6m 38sbest_combination: {'lookbacks': [96, 96, 98], 'score': np.float64(0.1813293733223932), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,048,503,681
Annual Return: 42.31%
Sharpe Ratio: 1.44531
Sortino Ratio: 1.369
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: 0.244
Lookback periods: [81, 131, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/750... Est. remaining: 6m 18sRunning iteration 131/750... Est. remaining: 6m 8sRunning iteration 141/750... Est. remaining: 5m 58sRunning iteration 151/750... Est. remaining: 5m 49sRunning iteration 161/750... Est. remaining: 5m 39sRunning iteration 171/750... Est. remaining: 58m 4sRunning iteration 181/750... Est. remaining: 54m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,641,225,343
Annual Return: 46.54%
Sharpe Ratio: 1.51154
Sortino Ratio: 1.488
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.306
Lookback periods: [152, 170, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/750... Est. remaining: 97m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,626,945,269
Annual Return: 47.22%
Sharpe Ratio: 1.53593
Sortino Ratio: 1.505
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.493
Lookback periods: [146, 175, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/750... Est. remaining: 91m 13sbest_combination: {'lookbacks': [146, 175, 188], 'score': np.float64(0.49262040752778813), 'visits': 1}
Running iteration 211/750... Est. remaining: 275m 59sRunning iteration 221/750... Est. remaining: 258m 46sRunning iteration 231/750... Est. remaining: 369m 5sRunning iteration 241/750... Est. remaining: 532m 49sRunning iteration 251/750... Est. remaining: 561m 7sRunning iteration 261/750... Est. remaining: 528m 54sRunning iteration 271/750... Est. remaining: 533m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,588,110,351
Annual Return: 47.79%
Sharpe Ratio: 1.55925
Sortino Ratio: 1.522
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 0.811
Lookback periods: [157, 161, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/750... Est. remaining: 504m 6sRunning iteration 291/750... Est. remaining: 615m 8sRunning iteration 301/750... Est. remaining: 581m 50sbest_combination: {'lookbacks': [157, 161, 174], 'score': np.float64(0.8111776989889854), 'visits': 1}
Running iteration 311/750... Est. remaining: 570m 1sRunning iteration 321/750... Est. remaining: 539m 46sRunning iteration 331/750... Est. remaining: 588m 45sRunning iteration 341/750... Est. remaining: 596m 5sRunning iteration 351/750... Est. remaining: 565m 1sRunning iteration 361/750... Est. remaining: 567m 13sRunning iteration 371/750... Est. remaining: 537m 49sRunning iteration 381/750... Est. remaining: 519m 33sRunning iteration 391/750... Est. remaining: 499m 21sRunning iteration 401/750... Est. remaining: 473m 25sbest_combination: {'lookbacks': [157, 161, 174], 'score': np.float64(0.8111776989889854), 'visits': 1}
Running iteration 411/750... Est. remaining: 448m 44sRunning iteration 421/750... Est. remaining: 426m 32sRunning iteration 431/750... Est. remaining: 406m 28sRunning iteration 441/750... Est. remaining: 384m 53sRunning iteration 451/750... Est. remaining: 364m 14sRunning iteration 461/750... Est. remaining: 347m 9sRunning iteration 471/750... Est. remaining: 335m 43sRunning iteration 481/750... Est. remaining: 317m 1sRunning iteration 491/750... Est. remaining: 299m 21sRunning iteration 501/750... Est. remaining: 282m 9sbest_combination: {'lookbacks': [157, 161, 174], 'score': np.float64(0.8111776989889854), 'visits': 1}
Running iteration 511/750... Est. remaining: 265m 36sRunning iteration 521/750... Est. remaining: 249m 40sRunning iteration 531/750... Est. remaining: 236m 21sRunning iteration 541/750... Est. remaining: 222m 40sRunning iteration 551/750... Est. remaining: 208m 15sRunning iteration 561/750... Est. remaining: 194m 38sRunning iteration 571/750... Est. remaining: 181m 47sRunning iteration 581/750... Est. remaining: 168m 45sRunning iteration 591/750... Est. remaining: 156m 51sRunning iteration 601/750... Est. remaining: 144m 37sbest_combination: {'lookbacks': [157, 161, 174], 'score': np.float64(0.8111776989889854), 'visits': 1}
Running iteration 611/750... Est. remaining: 134m 10sRunning iteration 621/750... Est. remaining: 123m 59sRunning iteration 631/750... Est. remaining: 112m 39sRunning iteration 641/750... Est. remaining: 102m 2sRunning iteration 651/750... Est. remaining: 91m 21sRunning iteration 661/750... Est. remaining: 81m 2sRunning iteration 671/750... Est. remaining: 70m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,462,482,829
Annual Return: 49.17%
Sharpe Ratio: 1.59254
Sortino Ratio: 1.566
Max Drawdown: -59.0%
Avg Drawdown: -10.2%
Normalized Score: 0.909
Lookback periods: [158, 162, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,720,611,984
Annual Return: 48.85%
Sharpe Ratio: 1.59067
Sortino Ratio: 1.561
Max Drawdown: -55.0%
Avg Drawdown: -10.4%
Normalized Score: 0.983
Lookback periods: [157, 161, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/750... Est. remaining: 61m 41sRunning iteration 691/750... Est. remaining: 52m 15sRunning iteration 701/750... Est. remaining: 43m 41sbest_combination: {'lookbacks': [157, 161, 172], 'score': np.float64(0.9826509984288332), 'visits': 1}
Running iteration 711/750... Est. remaining: 34m 27sRunning iteration 721/750... Est. remaining: 25m 32sRunning iteration 731/750... Est. remaining: 16m 49sRunning iteration 741/750... Est. remaining: 8m 17s
Monte Carlo simulation completed in 623.1 minutes
Best normalized score: 0.98
best_combination: {'lookbacks': [157, 161, 172], 'score': np.float64(0.9826509984288332), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [157, 161, 172] (score: 0.9827)

Monte Carlo simulation completed in 623.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [157, 161, 172] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 117 selections (28.1%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,720,611,984.35
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Sun Aug 24 11:43:37 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-24T11:43:38.158290
  Restored: 750 combinations
  Total visits: 750
  Best previous score: 1.0561
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $351,537,514
Annual Return: 35.26%
Sharpe Ratio: 1.20892
Sortino Ratio: 1.130
Max Drawdown: -59.9%
Avg Drawdown: -13.7%
Normalized Score: -1.614
Lookback periods: [66, 145, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $414,997,061
Annual Return: 35.91%
Sharpe Ratio: 1.24972
Sortino Ratio: 1.163
Max Drawdown: -52.3%
Avg Drawdown: -13.0%
Normalized Score: -1.147
Lookback periods: [67, 84, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,249,316,202
Annual Return: 42.70%
Sharpe Ratio: 1.43344
Sortino Ratio: 1.374
Max Drawdown: -56.5%
Avg Drawdown: -12.2%
Normalized Score: -0.211
Lookback periods: [117, 117, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 1073m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,223,375,319
Annual Return: 42.65%
Sharpe Ratio: 1.45487
Sortino Ratio: 1.377
Max Drawdown: -52.3%
Avg Drawdown: -11.4%
Normalized Score: 0.029
Lookback periods: [90, 96, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,423,498,721
Annual Return: 46.37%
Sharpe Ratio: 1.51130
Sortino Ratio: 1.483
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.281
Lookback periods: [147, 172, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 743m 43sRunning iteration 31/750... Est. remaining: 491m 1sRunning iteration 41/750... Est. remaining: 398m 4sRunning iteration 51/750... Est. remaining: 347m 14sRunning iteration 61/750... Est. remaining: 286m 9sRunning iteration 71/750... Est. remaining: 390m 28sRunning iteration 81/750... Est. remaining: 629m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,371,101,265
Annual Return: 48.70%
Sharpe Ratio: 1.58240
Sortino Ratio: 1.538
Max Drawdown: -59.0%
Avg Drawdown: -10.5%
Normalized Score: 0.699
Lookback periods: [157, 159, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/750... Est. remaining: 551m 43sRunning iteration 101/750... Est. remaining: 498m 49sbest_combination: {'lookbacks': [157, 160, 171], 'score': np.float64(1.0561329371892152), 'visits': 1}
Running iteration 111/750... Est. remaining: 446m 58sRunning iteration 121/750... Est. remaining: 404m 3sRunning iteration 131/750... Est. remaining: 367m 26sRunning iteration 141/750... Est. remaining: 343m 39sRunning iteration 151/750... Est. remaining: 318m 27sRunning iteration 161/750... Est. remaining: 293m 53sRunning iteration 171/750... Est. remaining: 284m 33sRunning iteration 181/750... Est. remaining: 267m 7sRunning iteration 191/750... Est. remaining: 248m 51sRunning iteration 201/750... Est. remaining: 239m 37sbest_combination: {'lookbacks': [157, 160, 171], 'score': np.float64(1.0561329371892152), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,296,441,177
Annual Return: 48.18%
Sharpe Ratio: 1.56805
Sortino Ratio: 1.536
Max Drawdown: -55.0%
Avg Drawdown: -10.7%
Normalized Score: 0.759
Lookback periods: [157, 162, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/750... Est. remaining: 235m 42sRunning iteration 221/750... Est. remaining: 221m 1sRunning iteration 231/750... Est. remaining: 207m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,396,005,065
Annual Return: 48.71%
Sharpe Ratio: 1.59710
Sortino Ratio: 1.562
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.850
Lookback periods: [146, 156, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/750... Est. remaining: 195m 21sRunning iteration 251/750... Est. remaining: 184m 1sRunning iteration 261/750... Est. remaining: 173m 33sRunning iteration 271/750... Est. remaining: 163m 52sRunning iteration 281/750... Est. remaining: 154m 51sRunning iteration 291/750... Est. remaining: 146m 28sRunning iteration 301/750... Est. remaining: 138m 37sbest_combination: {'lookbacks': [157, 160, 171], 'score': np.float64(1.0561329371892152), 'visits': 1}
Running iteration 311/750... Est. remaining: 131m 17sRunning iteration 321/750... Est. remaining: 124m 24sRunning iteration 331/750... Est. remaining: 117m 56sRunning iteration 341/750... Est. remaining: 111m 50sRunning iteration 351/750... Est. remaining: 106m 5sRunning iteration 361/750... Est. remaining: 100m 39sRunning iteration 371/750... Est. remaining: 95m 30sRunning iteration 381/750... Est. remaining: 90m 37sRunning iteration 391/750... Est. remaining: 85m 59sRunning iteration 401/750... Est. remaining: 81m 35sbest_combination: {'lookbacks': [157, 160, 171], 'score': np.float64(1.0561329371892152), 'visits': 1}
Running iteration 411/750... Est. remaining: 77m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,205,595,751
Annual Return: 48.62%
Sharpe Ratio: 1.58493
Sortino Ratio: 1.552
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 0.857
Lookback periods: [156, 160, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/750... Est. remaining: 73m 24sRunning iteration 431/750... Est. remaining: 69m 35sRunning iteration 441/750... Est. remaining: 65m 56sRunning iteration 451/750... Est. remaining: 62m 26sRunning iteration 461/750... Est. remaining: 59m 6sRunning iteration 471/750... Est. remaining: 55m 53sRunning iteration 481/750... Est. remaining: 52m 49sRunning iteration 491/750... Est. remaining: 49m 52sRunning iteration 501/750... Est. remaining: 47m 2sbest_combination: {'lookbacks': [157, 160, 171], 'score': np.float64(1.0561329371892152), 'visits': 1}
Running iteration 511/750... Est. remaining: 44m 18sRunning iteration 521/750... Est. remaining: 41m 40sRunning iteration 531/750... Est. remaining: 39m 8sRunning iteration 541/750... Est. remaining: 36m 42sRunning iteration 551/750... Est. remaining: 34m 21sRunning iteration 561/750... Est. remaining: 32m 4sRunning iteration 571/750... Est. remaining: 29m 53sRunning iteration 581/750... Est. remaining: 27m 45sRunning iteration 591/750... Est. remaining: 25m 42sRunning iteration 601/750... Est. remaining: 23m 43sbest_combination: {'lookbacks': [157, 160, 171], 'score': np.float64(1.0561329371892152), 'visits': 1}
Running iteration 611/750... Est. remaining: 21m 47sRunning iteration 621/750... Est. remaining: 19m 55sRunning iteration 631/750... Est. remaining: 18m 7sRunning iteration 641/750... Est. remaining: 16m 21sRunning iteration 651/750... Est. remaining: 14m 39sRunning iteration 661/750... Est. remaining: 13m 0sRunning iteration 671/750... Est. remaining: 11m 23sRunning iteration 681/750... Est. remaining: 9m 50sRunning iteration 691/750... Est. remaining: 8m 18sRunning iteration 701/750... Est. remaining: 6m 50sbest_combination: {'lookbacks': [157, 160, 171], 'score': np.float64(1.0561329371892152), 'visits': 1}
Running iteration 711/750... Est. remaining: 5m 23sRunning iteration 721/750... Est. remaining: 3m 59sRunning iteration 731/750... Est. remaining: 2m 37sRunning iteration 741/750... Est. remaining: 1m 17s
Monte Carlo simulation completed in 96.1 minutes
Best normalized score: 0.86
best_combination: {'lookbacks': [157, 160, 171], 'score': np.float64(1.0561329371892152), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [157, 160, 171] (score: 1.0561)

Monte Carlo simulation completed in 96.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 160, 169] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 112 selections (26.9%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,205,595,750.85
Average Annualized Gain: 48.6%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Sun Aug 24 13:19:51 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $227,703,252
Annual Return: 33.57%
Sharpe Ratio: 1.13723
Sortino Ratio: 1.067
Max Drawdown: -62.4%
Avg Drawdown: -15.0%
Normalized Score: -2.080
Lookback periods: [69, 124, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,529,364,032
Annual Return: 41.12%
Sharpe Ratio: 1.35662
Sortino Ratio: 1.315
Max Drawdown: -66.1%
Avg Drawdown: -13.3%
Normalized Score: -0.858
Lookback periods: [129, 177, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,052,041,231
Annual Return: 42.32%
Sharpe Ratio: 1.38114
Sortino Ratio: 1.352
Max Drawdown: -64.8%
Avg Drawdown: -12.4%
Normalized Score: -0.534
Lookback periods: [177, 177, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,351,466,219
Annual Return: 44.35%
Sharpe Ratio: 1.43012
Sortino Ratio: 1.409
Max Drawdown: -64.8%
Avg Drawdown: -12.6%
Normalized Score: -0.297
Lookback periods: [176, 177, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 14m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,477,851,947
Annual Return: 40.98%
Sharpe Ratio: 1.37653
Sortino Ratio: 1.315
Max Drawdown: -52.3%
Avg Drawdown: -11.7%
Normalized Score: -0.210
Lookback periods: [101, 104, 112] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,481,089,710
Annual Return: 46.41%
Sharpe Ratio: 1.50919
Sortino Ratio: 1.471
Max Drawdown: -60.8%
Avg Drawdown: -11.8%
Normalized Score: 0.233
Lookback periods: [149, 194, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 11m 46sRunning iteration 31/750... Est. remaining: 9m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,687,632,607
Annual Return: 47.85%
Sharpe Ratio: 1.56309
Sortino Ratio: 1.522
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.562
Lookback periods: [135, 156, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 8m 57sRunning iteration 51/750... Est. remaining: 8m 11sRunning iteration 61/750... Est. remaining: 7m 38sRunning iteration 71/750... Est. remaining: 7m 14sRunning iteration 81/750... Est. remaining: 6m 54sRunning iteration 91/750... Est. remaining: 6m 38sRunning iteration 101/750... Est. remaining: 6m 25sbest_combination: {'lookbacks': [135, 156, 198], 'score': np.float64(0.5618937652178587), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 13sRunning iteration 121/750... Est. remaining: 6m 2sRunning iteration 131/750... Est. remaining: 5m 52sRunning iteration 141/750... Est. remaining: 5m 43sRunning iteration 151/750... Est. remaining: 5m 34sRunning iteration 161/750... Est. remaining: 5m 26sRunning iteration 171/750... Est. remaining: 5m 18sRunning iteration 181/750... Est. remaining: 5m 11sRunning iteration 191/750... Est. remaining: 5m 4sRunning iteration 201/750... Est. remaining: 4m 57sbest_combination: {'lookbacks': [135, 156, 198], 'score': np.float64(0.5618937652178587), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 50sRunning iteration 221/750... Est. remaining: 4m 43sRunning iteration 231/750... Est. remaining: 4m 37sRunning iteration 241/750... Est. remaining: 4m 31sRunning iteration 251/750... Est. remaining: 4m 24sRunning iteration 261/750... Est. remaining: 4m 18sRunning iteration 271/750... Est. remaining: 4m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,226,368,016
Annual Return: 49.07%
Sharpe Ratio: 1.59664
Sortino Ratio: 1.562
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.738
Lookback periods: [139, 158, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/750... Est. remaining: 4m 8sRunning iteration 291/750... Est. remaining: 4m 2sRunning iteration 301/750... Est. remaining: 3m 57sbest_combination: {'lookbacks': [139, 158, 188], 'score': np.float64(0.7379042383988048), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,911,221,965
Annual Return: 48.48%
Sharpe Ratio: 1.59607
Sortino Ratio: 1.554
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 0.900
Lookback periods: [139, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/750... Est. remaining: 3m 52sRunning iteration 321/750... Est. remaining: 3m 46sRunning iteration 331/750... Est. remaining: 3m 41sRunning iteration 341/750... Est. remaining: 3m 35sRunning iteration 351/750... Est. remaining: 3m 29sRunning iteration 361/750... Est. remaining: 3m 24sRunning iteration 371/750... Est. remaining: 3m 18sRunning iteration 381/750... Est. remaining: 3m 12sRunning iteration 391/750... Est. remaining: 3m 7sRunning iteration 401/750... Est. remaining: 3m 1sbest_combination: {'lookbacks': [139, 157, 172], 'score': np.float64(0.9003849213968165), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 56sRunning iteration 421/750... Est. remaining: 2m 50sRunning iteration 431/750... Est. remaining: 2m 45sRunning iteration 441/750... Est. remaining: 2m 40sRunning iteration 451/750... Est. remaining: 2m 34sRunning iteration 461/750... Est. remaining: 2m 29sRunning iteration 471/750... Est. remaining: 2m 24sRunning iteration 481/750... Est. remaining: 2m 18sRunning iteration 491/750... Est. remaining: 2m 13sRunning iteration 501/750... Est. remaining: 2m 8sbest_combination: {'lookbacks': [139, 157, 172], 'score': np.float64(0.9003849213968165), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 3sRunning iteration 521/750... Est. remaining: 1m 57sRunning iteration 531/750... Est. remaining: 1m 52sRunning iteration 541/750... Est. remaining: 1m 47sRunning iteration 551/750... Est. remaining: 1m 42sRunning iteration 561/750... Est. remaining: 1m 37sRunning iteration 571/750... Est. remaining: 1m 31sRunning iteration 581/750... Est. remaining: 1m 26sRunning iteration 591/750... Est. remaining: 1m 21sRunning iteration 601/750... Est. remaining: 1m 16sbest_combination: {'lookbacks': [139, 157, 172], 'score': np.float64(0.9003849213968165), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 1sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [139, 157, 172], 'score': np.float64(0.9003849213968165), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 0.90
best_combination: {'lookbacks': [139, 157, 172], 'score': np.float64(0.9003849213968165), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [139, 157, 172] (score: 0.9004)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 157, 172] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pi: 77 selections (18.5%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,911,221,965.34
Average Annualized Gain: 48.5%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Sun Aug 24 13:26:18 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $417,949,602
Annual Return: 35.94%
Sharpe Ratio: 1.28252
Sortino Ratio: 1.183
Max Drawdown: -52.3%
Avg Drawdown: -12.6%
Normalized Score: -0.520
Lookback periods: [58, 92, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,572,444,592
Annual Return: 41.23%
Sharpe Ratio: 1.40190
Sortino Ratio: 1.335
Max Drawdown: -58.2%
Avg Drawdown: -12.3%
Normalized Score: -0.180
Lookback periods: [95, 115, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,317,922,133
Annual Return: 44.31%
Sharpe Ratio: 1.49768
Sortino Ratio: 1.421
Max Drawdown: -55.7%
Avg Drawdown: -12.1%
Normalized Score: 0.276
Lookback periods: [106, 108, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,128,566,710
Annual Return: 45.22%
Sharpe Ratio: 1.48539
Sortino Ratio: 1.448
Max Drawdown: -59.3%
Avg Drawdown: -11.6%
Normalized Score: 0.291
Lookback periods: [146, 167, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 15m 11sRunning iteration 21/750... Est. remaining: 10m 31sRunning iteration 31/750... Est. remaining: 8m 49sRunning iteration 41/750... Est. remaining: 7m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,727,704,997
Annual Return: 41.62%
Sharpe Ratio: 1.42111
Sortino Ratio: 1.352
Max Drawdown: -52.3%
Avg Drawdown: -10.8%
Normalized Score: 0.401
Lookback periods: [84, 126, 133] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/750... Est. remaining: 7m 36sRunning iteration 61/750... Est. remaining: 7m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,388,361,135
Annual Return: 42.95%
Sharpe Ratio: 1.47739
Sortino Ratio: 1.390
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.426
Lookback periods: [50, 140, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/750... Est. remaining: 7m 3sRunning iteration 81/750... Est. remaining: 6m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,003,828,031
Annual Return: 46.80%
Sharpe Ratio: 1.53645
Sortino Ratio: 1.496
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.586
Lookback periods: [136, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/750... Est. remaining: 6m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,602,873,443
Annual Return: 47.20%
Sharpe Ratio: 1.54590
Sortino Ratio: 1.509
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.616
Lookback periods: [139, 155, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/750... Est. remaining: 6m 37sbest_combination: {'lookbacks': [139, 155, 159], 'score': np.float64(0.6155427265412632), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 25sRunning iteration 121/750... Est. remaining: 6m 14sRunning iteration 131/750... Est. remaining: 6m 5sRunning iteration 141/750... Est. remaining: 5m 56sRunning iteration 151/750... Est. remaining: 5m 47sRunning iteration 161/750... Est. remaining: 5m 39sRunning iteration 171/750... Est. remaining: 5m 32sRunning iteration 181/750... Est. remaining: 5m 24sRunning iteration 191/750... Est. remaining: 5m 17sRunning iteration 201/750... Est. remaining: 5m 10sbest_combination: {'lookbacks': [139, 155, 159], 'score': np.float64(0.6155427265412632), 'visits': 1}
Running iteration 211/750... Est. remaining: 5m 3sRunning iteration 221/750... Est. remaining: 4m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,226,368,016
Annual Return: 49.07%
Sharpe Ratio: 1.59664
Sortino Ratio: 1.562
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.744
Lookback periods: [139, 158, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/750... Est. remaining: 4m 53sRunning iteration 241/750... Est. remaining: 4m 47sRunning iteration 251/750... Est. remaining: 4m 40sRunning iteration 261/750... Est. remaining: 4m 35sRunning iteration 271/750... Est. remaining: 4m 30sRunning iteration 281/750... Est. remaining: 4m 26sRunning iteration 291/750... Est. remaining: 4m 21sRunning iteration 301/750... Est. remaining: 4m 17sbest_combination: {'lookbacks': [139, 158, 188], 'score': np.float64(0.743894375381337), 'visits': 1}
Running iteration 311/750... Est. remaining: 4m 13sRunning iteration 321/750... Est. remaining: 4m 8sRunning iteration 331/750... Est. remaining: 4m 3sRunning iteration 341/750... Est. remaining: 3m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,139,740,748
Annual Return: 49.04%
Sharpe Ratio: 1.61186
Sortino Ratio: 1.575
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.930
Lookback periods: [136, 156, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 351/750... Est. remaining: 3m 55sRunning iteration 361/750... Est. remaining: 3m 50sRunning iteration 371/750... Est. remaining: 3m 45sRunning iteration 381/750... Est. remaining: 3m 39sRunning iteration 391/750... Est. remaining: 3m 34sRunning iteration 401/750... Est. remaining: 3m 28sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(0.9304741253742668), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 23sRunning iteration 421/750... Est. remaining: 3m 17sRunning iteration 431/750... Est. remaining: 3m 12sRunning iteration 441/750... Est. remaining: 3m 6sRunning iteration 451/750... Est. remaining: 3m 0sRunning iteration 461/750... Est. remaining: 2m 55sRunning iteration 471/750... Est. remaining: 2m 49sRunning iteration 481/750... Est. remaining: 2m 43sRunning iteration 491/750... Est. remaining: 2m 37sRunning iteration 501/750... Est. remaining: 2m 32sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(0.9304741253742668), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 26sRunning iteration 521/750... Est. remaining: 2m 20sRunning iteration 531/750... Est. remaining: 2m 14sRunning iteration 541/750... Est. remaining: 2m 8sRunning iteration 551/750... Est. remaining: 2m 2sRunning iteration 561/750... Est. remaining: 1m 56sRunning iteration 571/750... Est. remaining: 1m 50sRunning iteration 581/750... Est. remaining: 1m 44sRunning iteration 591/750... Est. remaining: 1m 38sRunning iteration 601/750... Est. remaining: 1m 32sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(0.9304741253742668), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 26sRunning iteration 621/750... Est. remaining: 1m 20sRunning iteration 631/750... Est. remaining: 1m 14sRunning iteration 641/750... Est. remaining: 1m 8sRunning iteration 651/750... Est. remaining: 1m 1sRunning iteration 661/750... Est. remaining: 0m 55sRunning iteration 671/750... Est. remaining: 0m 49sRunning iteration 681/750... Est. remaining: 0m 43sRunning iteration 691/750... Est. remaining: 0m 37sRunning iteration 701/750... Est. remaining: 0m 31sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(0.9304741253742668), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 24sRunning iteration 721/750... Est. remaining: 0m 18sRunning iteration 731/750... Est. remaining: 0m 12sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 0.93
best_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(0.9304741253742668), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [136, 156, 173] (score: 0.9305)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 156, 173] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 114 selections (27.4%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,139,740,748.17
Average Annualized Gain: 49.0%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Sun Aug 24 13:34:14 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $661,816,317
Annual Return: 37.75%
Sharpe Ratio: 1.29266
Sortino Ratio: 1.219
Max Drawdown: -62.6%
Avg Drawdown: -13.8%
Normalized Score: -0.907
Lookback periods: [92, 121, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,896,499,846
Annual Return: 42.00%
Sharpe Ratio: 1.42344
Sortino Ratio: 1.356
Max Drawdown: -68.8%
Avg Drawdown: -12.9%
Normalized Score: -0.441
Lookback periods: [96, 116, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $891,989,248
Annual Return: 38.94%
Sharpe Ratio: 1.32969
Sortino Ratio: 1.252
Max Drawdown: -52.3%
Avg Drawdown: -12.0%
Normalized Score: -0.220
Lookback periods: [83, 144, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 19m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,747,905,480
Annual Return: 43.53%
Sharpe Ratio: 1.45362
Sortino Ratio: 1.402
Max Drawdown: -60.4%
Avg Drawdown: -12.7%
Normalized Score: 0.046
Lookback periods: [113, 134, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,498,543,060
Annual Return: 47.74%
Sharpe Ratio: 1.54085
Sortino Ratio: 1.505
Max Drawdown: -61.2%
Avg Drawdown: -11.8%
Normalized Score: 0.574
Lookback periods: [183, 187, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 15m 31sRunning iteration 31/750... Est. remaining: 12m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,003,584,708
Annual Return: 47.45%
Sharpe Ratio: 1.55017
Sortino Ratio: 1.517
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.723
Lookback periods: [152, 167, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 11m 52sRunning iteration 51/750... Est. remaining: 10m 54sRunning iteration 61/750... Est. remaining: 10m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,656,143,206
Annual Return: 46.55%
Sharpe Ratio: 1.51999
Sortino Ratio: 1.480
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.758
Lookback periods: [156, 161, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/750... Est. remaining: 9m 57sRunning iteration 81/750... Est. remaining: 9m 30sRunning iteration 91/750... Est. remaining: 9m 9sRunning iteration 101/750... Est. remaining: 8m 49sbest_combination: {'lookbacks': [156, 161, 177], 'score': np.float64(0.7580626665338881), 'visits': 1}
Running iteration 111/750... Est. remaining: 8m 32sRunning iteration 121/750... Est. remaining: 8m 16sRunning iteration 131/750... Est. remaining: 8m 2sRunning iteration 141/750... Est. remaining: 7m 48sRunning iteration 151/750... Est. remaining: 7m 36sRunning iteration 161/750... Est. remaining: 7m 24sRunning iteration 171/750... Est. remaining: 7m 13sRunning iteration 181/750... Est. remaining: 7m 3sRunning iteration 191/750... Est. remaining: 6m 53sRunning iteration 201/750... Est. remaining: 6m 44sbest_combination: {'lookbacks': [156, 161, 177], 'score': np.float64(0.7580626665338881), 'visits': 1}
Running iteration 211/750... Est. remaining: 6m 34sRunning iteration 221/750... Est. remaining: 6m 25sRunning iteration 231/750... Est. remaining: 6m 17sRunning iteration 241/750... Est. remaining: 6m 8sRunning iteration 251/750... Est. remaining: 6m 0sRunning iteration 261/750... Est. remaining: 5m 52sRunning iteration 271/750... Est. remaining: 5m 43sRunning iteration 281/750... Est. remaining: 5m 35sRunning iteration 291/750... Est. remaining: 5m 28sRunning iteration 301/750... Est. remaining: 5m 20sbest_combination: {'lookbacks': [156, 161, 177], 'score': np.float64(0.7580626665338881), 'visits': 1}
Running iteration 311/750... Est. remaining: 5m 12sRunning iteration 321/750... Est. remaining: 5m 4sRunning iteration 331/750... Est. remaining: 4m 57sRunning iteration 341/750... Est. remaining: 4m 49sRunning iteration 351/750... Est. remaining: 4m 42sRunning iteration 361/750... Est. remaining: 4m 35sRunning iteration 371/750... Est. remaining: 4m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,244,659,957
Annual Return: 47.60%
Sharpe Ratio: 1.55698
Sortino Ratio: 1.523
Max Drawdown: -57.9%
Avg Drawdown: -11.1%
Normalized Score: 0.799
Lookback periods: [147, 159, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/750... Est. remaining: 4m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,157,606,911
Annual Return: 48.10%
Sharpe Ratio: 1.56492
Sortino Ratio: 1.528
Max Drawdown: -56.9%
Avg Drawdown: -11.1%
Normalized Score: 0.872
Lookback periods: [156, 156, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/750... Est. remaining: 4m 16sRunning iteration 401/750... Est. remaining: 4m 9sbest_combination: {'lookbacks': [156, 156, 158], 'score': np.float64(0.8718293993468652), 'visits': 1}
Running iteration 411/750... Est. remaining: 4m 2sRunning iteration 421/750... Est. remaining: 3m 54sRunning iteration 431/750... Est. remaining: 3m 47sRunning iteration 441/750... Est. remaining: 3m 39sRunning iteration 451/750... Est. remaining: 3m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,491,051,597
Annual Return: 48.75%
Sharpe Ratio: 1.58520
Sortino Ratio: 1.558
Max Drawdown: -59.0%
Avg Drawdown: -10.2%
Normalized Score: 1.005
Lookback periods: [158, 161, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/750... Est. remaining: 3m 25sRunning iteration 471/750... Est. remaining: 3m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,053,657,621
Annual Return: 48.55%
Sharpe Ratio: 1.58440
Sortino Ratio: 1.556
Max Drawdown: -56.9%
Avg Drawdown: -10.7%
Normalized Score: 1.009
Lookback periods: [157, 161, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/750... Est. remaining: 3m 10sRunning iteration 491/750... Est. remaining: 3m 3sRunning iteration 501/750... Est. remaining: 2m 55sbest_combination: {'lookbacks': [157, 161, 162], 'score': np.float64(1.008967010296818), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 48sRunning iteration 521/750... Est. remaining: 2m 41sRunning iteration 531/750... Est. remaining: 2m 33sRunning iteration 541/750... Est. remaining: 2m 26sRunning iteration 551/750... Est. remaining: 2m 19sRunning iteration 561/750... Est. remaining: 2m 11sRunning iteration 571/750... Est. remaining: 2m 4sRunning iteration 581/750... Est. remaining: 1m 57sRunning iteration 591/750... Est. remaining: 1m 50sRunning iteration 601/750... Est. remaining: 1m 43sbest_combination: {'lookbacks': [157, 161, 162], 'score': np.float64(1.008967010296818), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 36sRunning iteration 621/750... Est. remaining: 1m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,630,677,174
Annual Return: 49.24%
Sharpe Ratio: 1.60105
Sortino Ratio: 1.581
Max Drawdown: -59.0%
Avg Drawdown: -10.2%
Normalized Score: 1.087
Lookback periods: [158, 161, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/750... Est. remaining: 1m 22sRunning iteration 641/750... Est. remaining: 1m 15sRunning iteration 651/750... Est. remaining: 1m 8sRunning iteration 661/750... Est. remaining: 1m 1sRunning iteration 671/750... Est. remaining: 0m 54sRunning iteration 681/750... Est. remaining: 0m 47sRunning iteration 691/750... Est. remaining: 0m 41sRunning iteration 701/750... Est. remaining: 0m 34sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.0874294245818041), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 27sRunning iteration 721/750... Est. remaining: 0m 20sRunning iteration 731/750... Est. remaining: 0m 13sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 8.5 minutes
Best normalized score: 1.09
best_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.0874294245818041), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [158, 161, 166] (score: 1.0874)

Monte Carlo simulation completed in 8.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [158, 161, 166] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 116 selections (27.9%)
2. sp500_hma: 107 selections (25.7%)
3. naz100_pine: 82 selections (19.7%)
4. naz100_pi: 77 selections (18.5%)
5. cash: 34 selections (8.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,630,677,174.05
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Sun Aug 24 13:42:53 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $101,820,201
Annual Return: 30.51%
Sharpe Ratio: 1.05198
Sortino Ratio: 0.960
Max Drawdown: -62.9%
Avg Drawdown: -15.8%
Normalized Score: -2.711
Lookback periods: [72, 85, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $670,354,183
Annual Return: 37.80%
Sharpe Ratio: 1.25925
Sortino Ratio: 1.201
Max Drawdown: -66.3%
Avg Drawdown: -14.9%
Normalized Score: -1.684
Lookback periods: [114, 122, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,227,367,249
Annual Return: 44.19%
Sharpe Ratio: 1.50252
Sortino Ratio: 1.439
Max Drawdown: -52.3%
Avg Drawdown: -10.4%
Normalized Score: 0.563
Lookback periods: [87, 103, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 18m 50sRunning iteration 21/750... Est. remaining: 13m 10sRunning iteration 31/750... Est. remaining: 11m 7sRunning iteration 41/750... Est. remaining: 10m 3sRunning iteration 51/750... Est. remaining: 9m 32sRunning iteration 61/750... Est. remaining: 9m 6sRunning iteration 71/750... Est. remaining: 8m 46sRunning iteration 81/750... Est. remaining: 8m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,269,461,029
Annual Return: 46.98%
Sharpe Ratio: 1.53165
Sortino Ratio: 1.503
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.633
Lookback periods: [161, 161, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/750... Est. remaining: 8m 22sRunning iteration 101/750... Est. remaining: 8m 10sbest_combination: {'lookbacks': [161, 161, 169], 'score': np.float64(0.6333920552340638), 'visits': 1}
Running iteration 111/750... Est. remaining: 7m 57sRunning iteration 121/750... Est. remaining: 7m 45sRunning iteration 131/750... Est. remaining: 7m 34sRunning iteration 141/750... Est. remaining: 7m 24sRunning iteration 151/750... Est. remaining: 7m 14sRunning iteration 161/750... Est. remaining: 7m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,542,372,587
Annual Return: 48.30%
Sharpe Ratio: 1.56812
Sortino Ratio: 1.533
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 0.646
Lookback periods: [155, 160, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,399,580,247
Annual Return: 48.23%
Sharpe Ratio: 1.56488
Sortino Ratio: 1.532
Max Drawdown: -59.0%
Avg Drawdown: -10.6%
Normalized Score: 0.746
Lookback periods: [158, 159, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/750... Est. remaining: 7m 6sRunning iteration 181/750... Est. remaining: 6m 58sRunning iteration 191/750... Est. remaining: 6m 49sRunning iteration 201/750... Est. remaining: 6m 39sbest_combination: {'lookbacks': [158, 159, 172], 'score': np.float64(0.7457571194920332), 'visits': 1}
Running iteration 211/750... Est. remaining: 6m 28sRunning iteration 221/750... Est. remaining: 6m 19sRunning iteration 231/750... Est. remaining: 6m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,438,115,792
Annual Return: 48.73%
Sharpe Ratio: 1.58476
Sortino Ratio: 1.545
Max Drawdown: -57.2%
Avg Drawdown: -10.5%
Normalized Score: 0.868
Lookback periods: [157, 159, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/750... Est. remaining: 6m 5sRunning iteration 251/750... Est. remaining: 5m 56sRunning iteration 261/750... Est. remaining: 5m 47sRunning iteration 271/750... Est. remaining: 5m 38sRunning iteration 281/750... Est. remaining: 5m 29sRunning iteration 291/750... Est. remaining: 5m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,761,984,053
Annual Return: 48.87%
Sharpe Ratio: 1.59975
Sortino Ratio: 1.567
Max Drawdown: -59.0%
Avg Drawdown: -10.1%
Normalized Score: 0.957
Lookback periods: [158, 160, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 301/750... Est. remaining: 5m 15sbest_combination: {'lookbacks': [158, 160, 168], 'score': np.float64(0.9570847616164159), 'visits': 1}
Running iteration 311/750... Est. remaining: 5m 7sRunning iteration 321/750... Est. remaining: 4m 59sRunning iteration 331/750... Est. remaining: 4m 50sRunning iteration 341/750... Est. remaining: 4m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,186,767,732
Annual Return: 42.58%
Sharpe Ratio: 1.53533
Sortino Ratio: 1.436
Max Drawdown: -37.2%
Avg Drawdown: -9.5%
Normalized Score: 1.152
Lookback periods: [51, 52, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 351/750... Est. remaining: 4m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,624,504,386
Annual Return: 41.37%
Sharpe Ratio: 1.48919
Sortino Ratio: 1.389
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.155
Lookback periods: [50, 50, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 361/750... Est. remaining: 4m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,331,228,572
Annual Return: 42.85%
Sharpe Ratio: 1.52700
Sortino Ratio: 1.440
Max Drawdown: -35.6%
Avg Drawdown: -9.4%
Normalized Score: 1.228
Lookback periods: [50, 53, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,600,088,602
Annual Return: 43.30%
Sharpe Ratio: 1.54769
Sortino Ratio: 1.452
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.359
Lookback periods: [50, 54, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 371/750... Est. remaining: 4m 25sRunning iteration 381/750... Est. remaining: 4m 18sRunning iteration 391/750... Est. remaining: 4m 10sRunning iteration 401/750... Est. remaining: 4m 2sbest_combination: {'lookbacks': [50, 54, 85], 'score': np.float64(1.3590199605410844), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 55sRunning iteration 421/750... Est. remaining: 3m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,934,300,309
Annual Return: 43.80%
Sharpe Ratio: 1.56598
Sortino Ratio: 1.470
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.390
Lookback periods: [50, 54, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/750... Est. remaining: 3m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,727,281,414
Annual Return: 44.79%
Sharpe Ratio: 1.60767
Sortino Ratio: 1.513
Max Drawdown: -37.8%
Avg Drawdown: -9.4%
Normalized Score: 1.462
Lookback periods: [51, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/750... Est. remaining: 3m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,447,595,360
Annual Return: 44.47%
Sharpe Ratio: 1.58410
Sortino Ratio: 1.492
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.567
Lookback periods: [50, 54, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/750... Est. remaining: 3m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.873
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/750... Est. remaining: 3m 21sRunning iteration 471/750... Est. remaining: 3m 14sRunning iteration 481/750... Est. remaining: 3m 7sRunning iteration 491/750... Est. remaining: 3m 0sRunning iteration 501/750... Est. remaining: 2m 52sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.8732969999608873), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 45sRunning iteration 521/750... Est. remaining: 2m 38sRunning iteration 531/750... Est. remaining: 2m 31sRunning iteration 541/750... Est. remaining: 2m 23sRunning iteration 551/750... Est. remaining: 2m 16sRunning iteration 561/750... Est. remaining: 2m 9sRunning iteration 571/750... Est. remaining: 2m 2sRunning iteration 581/750... Est. remaining: 1m 55sRunning iteration 591/750... Est. remaining: 1m 48sRunning iteration 601/750... Est. remaining: 1m 41sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.8732969999608873), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 35sRunning iteration 621/750... Est. remaining: 1m 28sRunning iteration 631/750... Est. remaining: 1m 21sRunning iteration 641/750... Est. remaining: 1m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.119
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/750... Est. remaining: 1m 7sRunning iteration 661/750... Est. remaining: 1m 0sRunning iteration 671/750... Est. remaining: 0m 54sRunning iteration 681/750... Est. remaining: 0m 47sRunning iteration 691/750... Est. remaining: 0m 40sRunning iteration 701/750... Est. remaining: 0m 33sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1189732216060175), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 27sRunning iteration 721/750... Est. remaining: 0m 20sRunning iteration 731/750... Est. remaining: 0m 13sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 8.4 minutes
Best normalized score: 2.12
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1189732216060175), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 52, 95] (score: 2.1190)

Monte Carlo simulation completed in 8.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Sun Aug 24 13:51:28 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,601,633,515
Annual Return: 41.31%
Sharpe Ratio: 1.36777
Sortino Ratio: 1.317
Max Drawdown: -63.7%
Avg Drawdown: -13.6%
Normalized Score: -1.092
Lookback periods: [101, 155, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $885,014,439
Annual Return: 38.91%
Sharpe Ratio: 1.34931
Sortino Ratio: 1.270
Max Drawdown: -52.3%
Avg Drawdown: -12.5%
Normalized Score: -0.861
Lookback periods: [92, 93, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 15m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,477,833,201
Annual Return: 43.10%
Sharpe Ratio: 1.43162
Sortino Ratio: 1.382
Max Drawdown: -57.2%
Avg Drawdown: -13.0%
Normalized Score: -0.429
Lookback periods: [134, 141, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,726,685,505
Annual Return: 43.49%
Sharpe Ratio: 1.42731
Sortino Ratio: 1.389
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: -0.132
Lookback periods: [147, 166, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,782,862,924
Annual Return: 45.84%
Sharpe Ratio: 1.49978
Sortino Ratio: 1.467
Max Drawdown: -59.0%
Avg Drawdown: -12.2%
Normalized Score: 0.101
Lookback periods: [144, 171, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 14m 0sRunning iteration 31/750... Est. remaining: 11m 36sRunning iteration 41/750... Est. remaining: 10m 22sRunning iteration 51/750... Est. remaining: 9m 34sRunning iteration 61/750... Est. remaining: 8m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,153,355,688
Annual Return: 46.15%
Sharpe Ratio: 1.51169
Sortino Ratio: 1.471
Max Drawdown: -61.1%
Avg Drawdown: -11.5%
Normalized Score: 0.184
Lookback periods: [138, 154, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,317,868,432
Annual Return: 40.51%
Sharpe Ratio: 1.46362
Sortino Ratio: 1.365
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.589
Lookback periods: [50, 58, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/750... Est. remaining: 9m 3sRunning iteration 81/750... Est. remaining: 8m 42sRunning iteration 91/750... Est. remaining: 8m 23sRunning iteration 101/750... Est. remaining: 8m 7sbest_combination: {'lookbacks': [50, 58, 85], 'score': np.float64(0.5894644130781137), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,934,300,309
Annual Return: 43.80%
Sharpe Ratio: 1.56598
Sortino Ratio: 1.470
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.207
Lookback periods: [50, 54, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/750... Est. remaining: 8m 1sRunning iteration 121/750... Est. remaining: 7m 47sRunning iteration 131/750... Est. remaining: 7m 34sRunning iteration 141/750... Est. remaining: 7m 24sRunning iteration 151/750... Est. remaining: 7m 13sRunning iteration 161/750... Est. remaining: 7m 2sRunning iteration 171/750... Est. remaining: 6m 51sRunning iteration 181/750... Est. remaining: 6m 41sRunning iteration 191/750... Est. remaining: 6m 30sRunning iteration 201/750... Est. remaining: 6m 21sbest_combination: {'lookbacks': [50, 54, 89], 'score': np.float64(1.2068885581353512), 'visits': 1}
Running iteration 211/750... Est. remaining: 6m 11sRunning iteration 221/750... Est. remaining: 6m 2sRunning iteration 231/750... Est. remaining: 5m 55sRunning iteration 241/750... Est. remaining: 5m 47sRunning iteration 251/750... Est. remaining: 5m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,912,007
Annual Return: 45.27%
Sharpe Ratio: 1.61355
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.615
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/750... Est. remaining: 5m 35sRunning iteration 271/750... Est. remaining: 5m 28sRunning iteration 281/750... Est. remaining: 5m 21sRunning iteration 291/750... Est. remaining: 5m 13sRunning iteration 301/750... Est. remaining: 5m 5sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6151981715984398), 'visits': 1}
Running iteration 311/750... Est. remaining: 4m 57sRunning iteration 321/750... Est. remaining: 4m 49sRunning iteration 331/750... Est. remaining: 4m 42sRunning iteration 341/750... Est. remaining: 4m 35sRunning iteration 351/750... Est. remaining: 4m 28sRunning iteration 361/750... Est. remaining: 4m 21sRunning iteration 371/750... Est. remaining: 4m 14sRunning iteration 381/750... Est. remaining: 4m 7sRunning iteration 391/750... Est. remaining: 4m 0sRunning iteration 401/750... Est. remaining: 3m 54sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6151981715984398), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 47sRunning iteration 421/750... Est. remaining: 3m 40sRunning iteration 431/750... Est. remaining: 3m 33sRunning iteration 441/750... Est. remaining: 3m 26sRunning iteration 451/750... Est. remaining: 3m 19sRunning iteration 461/750... Est. remaining: 3m 13sRunning iteration 471/750... Est. remaining: 3m 6sRunning iteration 481/750... Est. remaining: 2m 59sRunning iteration 491/750... Est. remaining: 2m 53sRunning iteration 501/750... Est. remaining: 2m 46sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6151981715984398), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 39sRunning iteration 521/750... Est. remaining: 2m 32sRunning iteration 531/750... Est. remaining: 2m 26sRunning iteration 541/750... Est. remaining: 2m 19sRunning iteration 551/750... Est. remaining: 2m 12sRunning iteration 561/750... Est. remaining: 2m 6sRunning iteration 571/750... Est. remaining: 1m 59sRunning iteration 581/750... Est. remaining: 1m 52sRunning iteration 591/750... Est. remaining: 1m 46sRunning iteration 601/750... Est. remaining: 1m 39sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6151981715984398), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 32sRunning iteration 621/750... Est. remaining: 1m 26sRunning iteration 631/750... Est. remaining: 1m 19sRunning iteration 641/750... Est. remaining: 1m 12sRunning iteration 651/750... Est. remaining: 1m 6sRunning iteration 661/750... Est. remaining: 0m 59sRunning iteration 671/750... Est. remaining: 0m 52sRunning iteration 681/750... Est. remaining: 0m 46sRunning iteration 691/750... Est. remaining: 0m 39sRunning iteration 701/750... Est. remaining: 0m 32sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6151981715984398), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 26sRunning iteration 721/750... Est. remaining: 0m 19sRunning iteration 731/750... Est. remaining: 0m 13sRunning iteration 741/750... Est. remaining: 0m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.675
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

Monte Carlo simulation completed in 8.2 minutes
Best normalized score: 1.67
best_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.6747298820026788), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 51, 95] (score: 1.6747)

Monte Carlo simulation completed in 8.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 51, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 99 selections (23.8%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,683,002,581.49
Average Annualized Gain: 44.7%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Sun Aug 24 13:59:50 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $690,163,164
Annual Return: 37.92%
Sharpe Ratio: 1.33379
Sortino Ratio: 1.235
Max Drawdown: -55.7%
Avg Drawdown: -11.8%
Normalized Score: -0.463
Lookback periods: [53, 89, 129] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,946,014,763
Annual Return: 42.10%
Sharpe Ratio: 1.37204
Sortino Ratio: 1.343
Max Drawdown: -60.3%
Avg Drawdown: -11.8%
Normalized Score: -0.263
Lookback periods: [163, 164, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,784,425,786
Annual Return: 48.88%
Sharpe Ratio: 1.58787
Sortino Ratio: 1.549
Max Drawdown: -57.2%
Avg Drawdown: -10.6%
Normalized Score: 0.746
Lookback periods: [157, 159, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 18m 28sRunning iteration 21/750... Est. remaining: 12m 50sRunning iteration 31/750... Est. remaining: 10m 49sRunning iteration 41/750... Est. remaining: 9m 55sRunning iteration 51/750... Est. remaining: 9m 18sRunning iteration 61/750... Est. remaining: 8m 48sRunning iteration 71/750... Est. remaining: 8m 24sRunning iteration 81/750... Est. remaining: 8m 6sRunning iteration 91/750... Est. remaining: 7m 50sRunning iteration 101/750... Est. remaining: 7m 36sbest_combination: {'lookbacks': [157, 159, 174], 'score': np.float64(0.746194994505581), 'visits': 1}
Running iteration 111/750... Est. remaining: 7m 23sRunning iteration 121/750... Est. remaining: 7m 13sRunning iteration 131/750... Est. remaining: 7m 3sRunning iteration 141/750... Est. remaining: 6m 53sRunning iteration 151/750... Est. remaining: 6m 44sRunning iteration 161/750... Est. remaining: 6m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,722,201,897
Annual Return: 48.39%
Sharpe Ratio: 1.57693
Sortino Ratio: 1.539
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 0.766
Lookback periods: [156, 160, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/750... Est. remaining: 6m 30sRunning iteration 181/750... Est. remaining: 6m 20sRunning iteration 191/750... Est. remaining: 6m 11sRunning iteration 201/750... Est. remaining: 6m 3sbest_combination: {'lookbacks': [156, 160, 171], 'score': np.float64(0.7662645590193891), 'visits': 1}
Running iteration 211/750... Est. remaining: 5m 55sRunning iteration 221/750... Est. remaining: 5m 47sRunning iteration 231/750... Est. remaining: 5m 39sRunning iteration 241/750... Est. remaining: 5m 32sRunning iteration 251/750... Est. remaining: 5m 24sRunning iteration 261/750... Est. remaining: 5m 17sRunning iteration 271/750... Est. remaining: 5m 10sRunning iteration 281/750... Est. remaining: 5m 3sRunning iteration 291/750... Est. remaining: 4m 56sRunning iteration 301/750... Est. remaining: 4m 49sbest_combination: {'lookbacks': [156, 160, 171], 'score': np.float64(0.7662645590193891), 'visits': 1}
Running iteration 311/750... Est. remaining: 4m 42sRunning iteration 321/750... Est. remaining: 4m 35sRunning iteration 331/750... Est. remaining: 4m 28sRunning iteration 341/750... Est. remaining: 4m 21sRunning iteration 351/750... Est. remaining: 4m 15sRunning iteration 361/750... Est. remaining: 4m 8sRunning iteration 371/750... Est. remaining: 4m 1sRunning iteration 381/750... Est. remaining: 3m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,396,005,065
Annual Return: 48.71%
Sharpe Ratio: 1.59710
Sortino Ratio: 1.562
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.796
Lookback periods: [146, 156, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/750... Est. remaining: 3m 49sRunning iteration 401/750... Est. remaining: 3m 43sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.7964616629941711), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 36sRunning iteration 421/750... Est. remaining: 3m 29sRunning iteration 431/750... Est. remaining: 3m 23sRunning iteration 441/750... Est. remaining: 3m 16sRunning iteration 451/750... Est. remaining: 3m 10sRunning iteration 461/750... Est. remaining: 3m 3sRunning iteration 471/750... Est. remaining: 2m 57sRunning iteration 481/750... Est. remaining: 2m 50sRunning iteration 491/750... Est. remaining: 2m 44sRunning iteration 501/750... Est. remaining: 2m 37sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.7964616629941711), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 31sRunning iteration 521/750... Est. remaining: 2m 24sRunning iteration 531/750... Est. remaining: 2m 18sRunning iteration 541/750... Est. remaining: 2m 12sRunning iteration 551/750... Est. remaining: 2m 5sRunning iteration 561/750... Est. remaining: 1m 59sRunning iteration 571/750... Est. remaining: 1m 52sRunning iteration 581/750... Est. remaining: 1m 46sRunning iteration 591/750... Est. remaining: 1m 40sRunning iteration 601/750... Est. remaining: 1m 33sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.7964616629941711), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 27sRunning iteration 621/750... Est. remaining: 1m 21sRunning iteration 631/750... Est. remaining: 1m 15sRunning iteration 641/750... Est. remaining: 1m 8sRunning iteration 651/750... Est. remaining: 1m 2sRunning iteration 661/750... Est. remaining: 0m 56sRunning iteration 671/750... Est. remaining: 0m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,475,254,678
Annual Return: 49.57%
Sharpe Ratio: 1.61090
Sortino Ratio: 1.581
Max Drawdown: -59.0%
Avg Drawdown: -9.9%
Normalized Score: 0.876
Lookback periods: [156, 158, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/750... Est. remaining: 0m 43sRunning iteration 691/750... Est. remaining: 0m 37sRunning iteration 701/750... Est. remaining: 0m 31sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(0.8758293444530105), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 25sRunning iteration 721/750... Est. remaining: 0m 18sRunning iteration 731/750... Est. remaining: 0m 12sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 0.88
best_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(0.8758293444530105), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [156, 158, 168] (score: 0.8758)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 158, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,475,254,678.31
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Sun Aug 24 14:07:48 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $387,700,679
Annual Return: 35.64%
Sharpe Ratio: 1.21433
Sortino Ratio: 1.141
Max Drawdown: -57.0%
Avg Drawdown: -14.1%
Normalized Score: -1.851
Lookback periods: [83, 113, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,871,878,918
Annual Return: 41.94%
Sharpe Ratio: 1.41188
Sortino Ratio: 1.346
Max Drawdown: -56.1%
Avg Drawdown: -13.4%
Normalized Score: -0.740
Lookback periods: [97, 108, 139] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,017,216,065
Annual Return: 45.11%
Sharpe Ratio: 1.49378
Sortino Ratio: 1.457
Max Drawdown: -63.9%
Avg Drawdown: -12.6%
Normalized Score: -0.432
Lookback periods: [135, 147, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 18m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,279,095,588
Annual Return: 45.37%
Sharpe Ratio: 1.47881
Sortino Ratio: 1.441
Max Drawdown: -61.6%
Avg Drawdown: -12.1%
Normalized Score: -0.260
Lookback periods: [157, 184, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,138,610,035
Annual Return: 44.08%
Sharpe Ratio: 1.50569
Sortino Ratio: 1.441
Max Drawdown: -56.4%
Avg Drawdown: -10.8%
Normalized Score: 0.144
Lookback periods: [62, 153, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 14m 27sRunning iteration 31/750... Est. remaining: 11m 55sRunning iteration 41/750... Est. remaining: 10m 38sRunning iteration 51/750... Est. remaining: 9m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,828,084,402
Annual Return: 43.65%
Sharpe Ratio: 1.55388
Sortino Ratio: 1.467
Max Drawdown: -37.2%
Avg Drawdown: -9.3%
Normalized Score: 1.273
Lookback periods: [52, 52, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/750... Est. remaining: 9m 30sRunning iteration 71/750... Est. remaining: 9m 0sRunning iteration 81/750... Est. remaining: 8m 36sRunning iteration 91/750... Est. remaining: 8m 16sRunning iteration 101/750... Est. remaining: 7m 59sbest_combination: {'lookbacks': [52, 52, 89], 'score': np.float64(1.273331652066823), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,262,851,769
Annual Return: 42.72%
Sharpe Ratio: 1.53429
Sortino Ratio: 1.432
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.285
Lookback periods: [50, 52, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/750... Est. remaining: 7m 52sRunning iteration 121/750... Est. remaining: 7m 38sRunning iteration 131/750... Est. remaining: 7m 25sRunning iteration 141/750... Est. remaining: 7m 13sRunning iteration 151/750... Est. remaining: 7m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,581,049,141
Annual Return: 43.27%
Sharpe Ratio: 1.53861
Sortino Ratio: 1.441
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.314
Lookback periods: [50, 54, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/750... Est. remaining: 6m 56sRunning iteration 171/750... Est. remaining: 6m 45sRunning iteration 181/750... Est. remaining: 6m 35sRunning iteration 191/750... Est. remaining: 6m 25sRunning iteration 201/750... Est. remaining: 6m 16sbest_combination: {'lookbacks': [50, 54, 87], 'score': np.float64(1.3136740420047839), 'visits': 1}
Running iteration 211/750... Est. remaining: 6m 7sRunning iteration 221/750... Est. remaining: 5m 58sRunning iteration 231/750... Est. remaining: 5m 50sRunning iteration 241/750... Est. remaining: 5m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.881
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/750... Est. remaining: 5m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.150
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/750... Est. remaining: 5m 31sRunning iteration 271/750... Est. remaining: 5m 23sRunning iteration 281/750... Est. remaining: 5m 15sRunning iteration 291/750... Est. remaining: 5m 7sRunning iteration 301/750... Est. remaining: 5m 0sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1504507723424227), 'visits': 1}
Running iteration 311/750... Est. remaining: 4m 52sRunning iteration 321/750... Est. remaining: 4m 44sRunning iteration 331/750... Est. remaining: 4m 37sRunning iteration 341/750... Est. remaining: 4m 30sRunning iteration 351/750... Est. remaining: 4m 22sRunning iteration 361/750... Est. remaining: 4m 15sRunning iteration 371/750... Est. remaining: 4m 8sRunning iteration 381/750... Est. remaining: 4m 1sRunning iteration 391/750... Est. remaining: 3m 54sRunning iteration 401/750... Est. remaining: 3m 47sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1504507723424227), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 40sRunning iteration 421/750... Est. remaining: 3m 33sRunning iteration 431/750... Est. remaining: 3m 26sRunning iteration 441/750... Est. remaining: 3m 19sRunning iteration 451/750... Est. remaining: 3m 13sRunning iteration 461/750... Est. remaining: 3m 6sRunning iteration 471/750... Est. remaining: 2m 59sRunning iteration 481/750... Est. remaining: 2m 52sRunning iteration 491/750... Est. remaining: 2m 46sRunning iteration 501/750... Est. remaining: 2m 39sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1504507723424227), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 33sRunning iteration 521/750... Est. remaining: 2m 26sRunning iteration 531/750... Est. remaining: 2m 19sRunning iteration 541/750... Est. remaining: 2m 13sRunning iteration 551/750... Est. remaining: 2m 6sRunning iteration 561/750... Est. remaining: 2m 0sRunning iteration 571/750... Est. remaining: 1m 53sRunning iteration 581/750... Est. remaining: 1m 47sRunning iteration 591/750... Est. remaining: 1m 41sRunning iteration 601/750... Est. remaining: 1m 34sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1504507723424227), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 28sRunning iteration 621/750... Est. remaining: 1m 21sRunning iteration 631/750... Est. remaining: 1m 15sRunning iteration 641/750... Est. remaining: 1m 9sRunning iteration 651/750... Est. remaining: 1m 2sRunning iteration 661/750... Est. remaining: 0m 56sRunning iteration 671/750... Est. remaining: 0m 50sRunning iteration 681/750... Est. remaining: 0m 43sRunning iteration 691/750... Est. remaining: 0m 37sRunning iteration 701/750... Est. remaining: 0m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1504507723424227), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 24sRunning iteration 721/750... Est. remaining: 0m 18sRunning iteration 731/750... Est. remaining: 0m 12sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 2.15
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1504507723424227), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 52, 95] (score: 2.1505)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)
