Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Start time: Sun Aug 24 13:28:39 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Sun Aug 24 13:28:39 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $598,576,773
Annual Return: 37.35%
Sharpe Ratio: 1.30232
Sortino Ratio: 1.221
Max Drawdown: -60.9%
Avg Drawdown: -13.0%
Normalized Score: -1.459
Lookback periods: [51, 62, 123] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $824,476,529
Annual Return: 38.63%
Sharpe Ratio: 1.31195
Sortino Ratio: 1.242
Max Drawdown: -57.5%
Avg Drawdown: -13.3%
Normalized Score: -1.211
Lookback periods: [95, 112, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,381,354,639
Annual Return: 40.71%
Sharpe Ratio: 1.35712
Sortino Ratio: 1.305
Max Drawdown: -66.2%
Avg Drawdown: -13.0%
Normalized Score: -1.120
Lookback periods: [109, 163, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $945,699,165
Annual Return: 39.18%
Sharpe Ratio: 1.34318
Sortino Ratio: 1.272
Max Drawdown: -52.3%
Avg Drawdown: -11.6%
Normalized Score: -0.653
Lookback periods: [84, 143, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,215,006,802
Annual Return: 42.64%
Sharpe Ratio: 1.40354
Sortino Ratio: 1.366
Max Drawdown: -61.4%
Avg Drawdown: -13.0%
Normalized Score: -0.626
Lookback periods: [134, 138, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 44m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,589,678,596
Annual Return: 43.28%
Sharpe Ratio: 1.43059
Sortino Ratio: 1.386
Max Drawdown: -58.1%
Avg Drawdown: -13.1%
Normalized Score: -0.403
Lookback periods: [141, 151, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,965,561,839
Annual Return: 45.05%
Sharpe Ratio: 1.47157
Sortino Ratio: 1.442
Max Drawdown: -63.5%
Avg Drawdown: -12.5%
Normalized Score: -0.188
Lookback periods: [136, 171, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,774,259,610
Annual Return: 45.83%
Sharpe Ratio: 1.50439
Sortino Ratio: 1.456
Max Drawdown: -64.9%
Avg Drawdown: -12.9%
Normalized Score: -0.165
Lookback periods: [140, 144, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 35m 42sRunning iteration 31/1500... Est. remaining: 29m 6sRunning iteration 41/1500... Est. remaining: 25m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,339,297,599
Annual Return: 40.58%
Sharpe Ratio: 1.41523
Sortino Ratio: 1.331
Max Drawdown: -52.3%
Avg Drawdown: -10.4%
Normalized Score: -0.159
Lookback periods: [52, 98, 107] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,531,962,276
Annual Return: 45.61%
Sharpe Ratio: 1.50635
Sortino Ratio: 1.454
Max Drawdown: -57.2%
Avg Drawdown: -12.2%
Normalized Score: 0.185
Lookback periods: [137, 157, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 25m 5sRunning iteration 61/1500... Est. remaining: 23m 20sRunning iteration 71/1500... Est. remaining: 22m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,231,631,466
Annual Return: 48.63%
Sharpe Ratio: 1.59133
Sortino Ratio: 1.558
Max Drawdown: -56.7%
Avg Drawdown: -11.7%
Normalized Score: 0.822
Lookback periods: [135, 155, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 21m 35sRunning iteration 91/1500... Est. remaining: 20m 45sRunning iteration 101/1500... Est. remaining: 20m 4sbest_combination: {'lookbacks': [135, 155, 188], 'score': np.float64(0.821766424727743), 'visits': 1}
Running iteration 111/1500... Est. remaining: 19m 29sRunning iteration 121/1500... Est. remaining: 19m 0sRunning iteration 131/1500... Est. remaining: 18m 36sRunning iteration 141/1500... Est. remaining: 18m 11sRunning iteration 151/1500... Est. remaining: 17m 49sRunning iteration 161/1500... Est. remaining: 17m 30sRunning iteration 171/1500... Est. remaining: 17m 11sRunning iteration 181/1500... Est. remaining: 16m 54sRunning iteration 191/1500... Est. remaining: 16m 39sRunning iteration 201/1500... Est. remaining: 16m 25sbest_combination: {'lookbacks': [135, 155, 188], 'score': np.float64(0.821766424727743), 'visits': 1}
Running iteration 211/1500... Est. remaining: 16m 12sRunning iteration 221/1500... Est. remaining: 15m 59sRunning iteration 231/1500... Est. remaining: 15m 46sRunning iteration 241/1500... Est. remaining: 15m 33sRunning iteration 251/1500... Est. remaining: 15m 20sRunning iteration 261/1500... Est. remaining: 15m 9sRunning iteration 271/1500... Est. remaining: 14m 58sRunning iteration 281/1500... Est. remaining: 14m 48sRunning iteration 291/1500... Est. remaining: 14m 37sRunning iteration 301/1500... Est. remaining: 14m 27sbest_combination: {'lookbacks': [135, 155, 188], 'score': np.float64(0.821766424727743), 'visits': 1}
Running iteration 311/1500... Est. remaining: 14m 17sRunning iteration 321/1500... Est. remaining: 14m 7sRunning iteration 331/1500... Est. remaining: 13m 57sRunning iteration 341/1500... Est. remaining: 13m 48sRunning iteration 351/1500... Est. remaining: 13m 39sRunning iteration 361/1500... Est. remaining: 13m 29sRunning iteration 371/1500... Est. remaining: 13m 20sRunning iteration 381/1500... Est. remaining: 13m 12sRunning iteration 391/1500... Est. remaining: 13m 4sRunning iteration 401/1500... Est. remaining: 12m 56sbest_combination: {'lookbacks': [135, 155, 188], 'score': np.float64(0.821766424727743), 'visits': 1}
Running iteration 411/1500... Est. remaining: 12m 47sRunning iteration 421/1500... Est. remaining: 12m 39sRunning iteration 431/1500... Est. remaining: 12m 30sRunning iteration 441/1500... Est. remaining: 12m 22sRunning iteration 451/1500... Est. remaining: 12m 14sRunning iteration 461/1500... Est. remaining: 12m 6sRunning iteration 471/1500... Est. remaining: 11m 57sRunning iteration 481/1500... Est. remaining: 11m 49sRunning iteration 491/1500... Est. remaining: 11m 41sRunning iteration 501/1500... Est. remaining: 11m 33sbest_combination: {'lookbacks': [135, 155, 188], 'score': np.float64(0.821766424727743), 'visits': 1}
Running iteration 511/1500... Est. remaining: 11m 25sRunning iteration 521/1500... Est. remaining: 11m 18sRunning iteration 531/1500... Est. remaining: 11m 10sRunning iteration 541/1500... Est. remaining: 11m 3sRunning iteration 551/1500... Est. remaining: 10m 55sRunning iteration 561/1500... Est. remaining: 10m 47sRunning iteration 571/1500... Est. remaining: 10m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,301,456,641
Annual Return: 49.50%
Sharpe Ratio: 1.58586
Sortino Ratio: 1.557
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.841
Lookback periods: [177, 189, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 10m 35sRunning iteration 591/1500... Est. remaining: 10m 28sRunning iteration 601/1500... Est. remaining: 10m 20sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 611/1500... Est. remaining: 10m 13sRunning iteration 621/1500... Est. remaining: 10m 5sRunning iteration 631/1500... Est. remaining: 9m 58sRunning iteration 641/1500... Est. remaining: 9m 50sRunning iteration 651/1500... Est. remaining: 9m 43sRunning iteration 661/1500... Est. remaining: 9m 36sRunning iteration 671/1500... Est. remaining: 9m 29sRunning iteration 681/1500... Est. remaining: 9m 21sRunning iteration 691/1500... Est. remaining: 9m 14sRunning iteration 701/1500... Est. remaining: 9m 7sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 711/1500... Est. remaining: 9m 0sRunning iteration 721/1500... Est. remaining: 8m 52sRunning iteration 731/1500... Est. remaining: 8m 45sRunning iteration 741/1500... Est. remaining: 8m 38sRunning iteration 751/1500... Est. remaining: 8m 31sRunning iteration 761/1500... Est. remaining: 8m 24sRunning iteration 771/1500... Est. remaining: 8m 17sRunning iteration 781/1500... Est. remaining: 8m 10sRunning iteration 791/1500... Est. remaining: 8m 4sRunning iteration 801/1500... Est. remaining: 7m 57sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 811/1500... Est. remaining: 7m 50sRunning iteration 821/1500... Est. remaining: 7m 43sRunning iteration 831/1500... Est. remaining: 7m 36sRunning iteration 841/1500... Est. remaining: 7m 29sRunning iteration 851/1500... Est. remaining: 7m 22sRunning iteration 861/1500... Est. remaining: 7m 15sRunning iteration 871/1500... Est. remaining: 7m 8sRunning iteration 881/1500... Est. remaining: 7m 1sRunning iteration 891/1500... Est. remaining: 6m 54sRunning iteration 901/1500... Est. remaining: 6m 48sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 911/1500... Est. remaining: 6m 41sRunning iteration 921/1500... Est. remaining: 6m 34sRunning iteration 931/1500... Est. remaining: 6m 27sRunning iteration 941/1500... Est. remaining: 6m 21sRunning iteration 951/1500... Est. remaining: 6m 13sRunning iteration 961/1500... Est. remaining: 6m 6sRunning iteration 971/1500... Est. remaining: 5m 59sRunning iteration 981/1500... Est. remaining: 5m 52sRunning iteration 991/1500... Est. remaining: 5m 45sRunning iteration 1001/1500... Est. remaining: 5m 38sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 5m 31sRunning iteration 1021/1500... Est. remaining: 5m 23sRunning iteration 1031/1500... Est. remaining: 5m 16sRunning iteration 1041/1500... Est. remaining: 5m 10sRunning iteration 1051/1500... Est. remaining: 5m 3sRunning iteration 1061/1500... Est. remaining: 4m 55sRunning iteration 1071/1500... Est. remaining: 4m 49sRunning iteration 1081/1500... Est. remaining: 4m 41sRunning iteration 1091/1500... Est. remaining: 4m 35sRunning iteration 1101/1500... Est. remaining: 4m 28sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 21sRunning iteration 1121/1500... Est. remaining: 4m 14sRunning iteration 1131/1500... Est. remaining: 4m 7sRunning iteration 1141/1500... Est. remaining: 4m 1sRunning iteration 1151/1500... Est. remaining: 3m 54sRunning iteration 1161/1500... Est. remaining: 3m 47sRunning iteration 1171/1500... Est. remaining: 3m 40sRunning iteration 1181/1500... Est. remaining: 3m 33sRunning iteration 1191/1500... Est. remaining: 3m 26sRunning iteration 1201/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 13sRunning iteration 1221/1500... Est. remaining: 3m 6sRunning iteration 1231/1500... Est. remaining: 2m 59sRunning iteration 1241/1500... Est. remaining: 2m 53sRunning iteration 1251/1500... Est. remaining: 2m 46sRunning iteration 1261/1500... Est. remaining: 2m 39sRunning iteration 1271/1500... Est. remaining: 2m 33sRunning iteration 1281/1500... Est. remaining: 2m 26sRunning iteration 1291/1500... Est. remaining: 2m 19sRunning iteration 1301/1500... Est. remaining: 2m 12sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 6sRunning iteration 1321/1500... Est. remaining: 1m 59sRunning iteration 1331/1500... Est. remaining: 1m 52sRunning iteration 1341/1500... Est. remaining: 1m 46sRunning iteration 1351/1500... Est. remaining: 1m 39sRunning iteration 1361/1500... Est. remaining: 1m 32sRunning iteration 1371/1500... Est. remaining: 1m 26sRunning iteration 1381/1500... Est. remaining: 1m 19sRunning iteration 1391/1500... Est. remaining: 1m 12sRunning iteration 1401/1500... Est. remaining: 1m 6sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 59sRunning iteration 1421/1500... Est. remaining: 0m 53sRunning iteration 1431/1500... Est. remaining: 0m 46sRunning iteration 1441/1500... Est. remaining: 0m 39sRunning iteration 1451/1500... Est. remaining: 0m 33sRunning iteration 1461/1500... Est. remaining: 0m 26sRunning iteration 1471/1500... Est. remaining: 0m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,432,075,950
Annual Return: 49.55%
Sharpe Ratio: 1.58874
Sortino Ratio: 1.560
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.878
Lookback periods: [178, 189, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1481/1500... Est. remaining: 0m 13sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 16.6 minutes
Best normalized score: 0.88
best_combination: {'lookbacks': [178, 189, 196], 'score': np.float64(0.8780118555435628), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [178, 189, 196] (score: 0.8780)

Monte Carlo simulation completed in 16.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [178, 189, 196] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 121 selections (29.1%)
2. sp500_hma: 104 selections (25.0%)
3. naz100_pine: 85 selections (20.4%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,432,075,949.89
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Sun Aug 24 13:45:26 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $138,592,269
Annual Return: 31.67%
Sharpe Ratio: 1.11004
Sortino Ratio: 1.015
Max Drawdown: -52.3%
Avg Drawdown: -13.2%
Normalized Score: -2.270
Lookback periods: [78, 83, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,322,520,932
Annual Return: 40.53%
Sharpe Ratio: 1.37808
Sortino Ratio: 1.311
Max Drawdown: -59.6%
Avg Drawdown: -13.0%
Normalized Score: -0.879
Lookback periods: [84, 148, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,223,421,663
Annual Return: 40.21%
Sharpe Ratio: 1.40262
Sortino Ratio: 1.303
Max Drawdown: -52.3%
Avg Drawdown: -10.5%
Normalized Score: -0.263
Lookback periods: [52, 95, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 37m 57sRunning iteration 21/1500... Est. remaining: 26m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,846,542,840
Annual Return: 43.67%
Sharpe Ratio: 1.42209
Sortino Ratio: 1.389
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: -0.137
Lookback periods: [160, 165, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 23m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,194,416,207
Annual Return: 44.15%
Sharpe Ratio: 1.46646
Sortino Ratio: 1.418
Max Drawdown: -55.0%
Avg Drawdown: -12.4%
Normalized Score: -0.016
Lookback periods: [124, 147, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 22m 26sRunning iteration 51/1500... Est. remaining: 20m 46sRunning iteration 61/1500... Est. remaining: 19m 37sRunning iteration 71/1500... Est. remaining: 18m 53sRunning iteration 81/1500... Est. remaining: 18m 12sRunning iteration 91/1500... Est. remaining: 17m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,655,274,797
Annual Return: 45.73%
Sharpe Ratio: 1.49976
Sortino Ratio: 1.456
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.323
Lookback periods: [140, 158, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 17m 34sbest_combination: {'lookbacks': [140, 158, 191], 'score': np.float64(0.32323692606914206), 'visits': 1}
Running iteration 111/1500... Est. remaining: 17m 8sRunning iteration 121/1500... Est. remaining: 16m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,628,487,206
Annual Return: 47.22%
Sharpe Ratio: 1.53758
Sortino Ratio: 1.508
Max Drawdown: -59.0%
Avg Drawdown: -10.4%
Normalized Score: 0.668
Lookback periods: [158, 168, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 16m 44sRunning iteration 141/1500... Est. remaining: 16m 25sRunning iteration 151/1500... Est. remaining: 16m 7sRunning iteration 161/1500... Est. remaining: 15m 51sRunning iteration 171/1500... Est. remaining: 15m 35sRunning iteration 181/1500... Est. remaining: 15m 22sRunning iteration 191/1500... Est. remaining: 15m 9sRunning iteration 201/1500... Est. remaining: 14m 56sbest_combination: {'lookbacks': [158, 168, 171], 'score': np.float64(0.668407330310084), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,853,876,293
Annual Return: 47.94%
Sharpe Ratio: 1.55091
Sortino Ratio: 1.514
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.708
Lookback periods: [156, 159, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/1500... Est. remaining: 14m 55sRunning iteration 221/1500... Est. remaining: 14m 44sRunning iteration 231/1500... Est. remaining: 14m 31sRunning iteration 241/1500... Est. remaining: 14m 23sRunning iteration 251/1500... Est. remaining: 14m 15sRunning iteration 261/1500... Est. remaining: 14m 5sRunning iteration 271/1500... Est. remaining: 13m 56sRunning iteration 281/1500... Est. remaining: 13m 47sRunning iteration 291/1500... Est. remaining: 13m 37sRunning iteration 301/1500... Est. remaining: 13m 28sbest_combination: {'lookbacks': [156, 159, 198], 'score': np.float64(0.708323792766534), 'visits': 1}
Running iteration 311/1500... Est. remaining: 13m 19sRunning iteration 321/1500... Est. remaining: 13m 10sRunning iteration 331/1500... Est. remaining: 13m 1sRunning iteration 341/1500... Est. remaining: 12m 53sRunning iteration 351/1500... Est. remaining: 12m 45sRunning iteration 361/1500... Est. remaining: 12m 37sRunning iteration 371/1500... Est. remaining: 12m 30sRunning iteration 381/1500... Est. remaining: 12m 22sRunning iteration 391/1500... Est. remaining: 12m 15sRunning iteration 401/1500... Est. remaining: 12m 7sbest_combination: {'lookbacks': [156, 159, 198], 'score': np.float64(0.708323792766534), 'visits': 1}
Running iteration 411/1500... Est. remaining: 11m 59sRunning iteration 421/1500... Est. remaining: 11m 52sRunning iteration 431/1500... Est. remaining: 11m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,739,176,555
Annual Return: 48.86%
Sharpe Ratio: 1.58678
Sortino Ratio: 1.552
Max Drawdown: -57.9%
Avg Drawdown: -11.8%
Normalized Score: 0.780
Lookback periods: [148, 159, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 11m 42sRunning iteration 451/1500... Est. remaining: 11m 35sRunning iteration 461/1500... Est. remaining: 11m 27sRunning iteration 471/1500... Est. remaining: 11m 21sRunning iteration 481/1500... Est. remaining: 11m 15sRunning iteration 491/1500... Est. remaining: 11m 9sRunning iteration 501/1500... Est. remaining: 11m 3sbest_combination: {'lookbacks': [148, 159, 200], 'score': np.float64(0.7796045518354278), 'visits': 1}
Running iteration 511/1500... Est. remaining: 10m 58sRunning iteration 521/1500... Est. remaining: 10m 51sRunning iteration 531/1500... Est. remaining: 10m 43sRunning iteration 541/1500... Est. remaining: 10m 36sRunning iteration 551/1500... Est. remaining: 10m 28sRunning iteration 561/1500... Est. remaining: 10m 20sRunning iteration 571/1500... Est. remaining: 10m 13sRunning iteration 581/1500... Est. remaining: 10m 5sRunning iteration 591/1500... Est. remaining: 9m 58sRunning iteration 601/1500... Est. remaining: 9m 50sbest_combination: {'lookbacks': [148, 159, 200], 'score': np.float64(0.7796045518354278), 'visits': 1}
Running iteration 611/1500... Est. remaining: 9m 43sRunning iteration 621/1500... Est. remaining: 9m 35sRunning iteration 631/1500... Est. remaining: 9m 28sRunning iteration 641/1500... Est. remaining: 9m 21sRunning iteration 651/1500... Est. remaining: 9m 15sRunning iteration 661/1500... Est. remaining: 9m 8sRunning iteration 671/1500... Est. remaining: 9m 1sRunning iteration 681/1500... Est. remaining: 8m 54sRunning iteration 691/1500... Est. remaining: 8m 47sRunning iteration 701/1500... Est. remaining: 8m 40sbest_combination: {'lookbacks': [148, 159, 200], 'score': np.float64(0.7796045518354278), 'visits': 1}
Running iteration 711/1500... Est. remaining: 8m 34sRunning iteration 721/1500... Est. remaining: 8m 27sRunning iteration 731/1500... Est. remaining: 8m 21sRunning iteration 741/1500... Est. remaining: 8m 14sRunning iteration 751/1500... Est. remaining: 8m 7sRunning iteration 761/1500... Est. remaining: 8m 0sRunning iteration 771/1500... Est. remaining: 7m 53sRunning iteration 781/1500... Est. remaining: 7m 46sRunning iteration 791/1500... Est. remaining: 7m 39sRunning iteration 801/1500... Est. remaining: 7m 33sbest_combination: {'lookbacks': [148, 159, 200], 'score': np.float64(0.7796045518354278), 'visits': 1}
Running iteration 811/1500... Est. remaining: 7m 26sRunning iteration 821/1500... Est. remaining: 7m 20sRunning iteration 831/1500... Est. remaining: 7m 14sRunning iteration 841/1500... Est. remaining: 7m 7sRunning iteration 851/1500... Est. remaining: 7m 1sRunning iteration 861/1500... Est. remaining: 6m 55sRunning iteration 871/1500... Est. remaining: 6m 48sRunning iteration 881/1500... Est. remaining: 6m 41sRunning iteration 891/1500... Est. remaining: 6m 34sRunning iteration 901/1500... Est. remaining: 6m 28sbest_combination: {'lookbacks': [148, 159, 200], 'score': np.float64(0.7796045518354278), 'visits': 1}
Running iteration 911/1500... Est. remaining: 6m 21sRunning iteration 921/1500... Est. remaining: 6m 15sRunning iteration 931/1500... Est. remaining: 6m 9sRunning iteration 941/1500... Est. remaining: 6m 2sRunning iteration 951/1500... Est. remaining: 5m 56sRunning iteration 961/1500... Est. remaining: 5m 49sRunning iteration 971/1500... Est. remaining: 5m 43sRunning iteration 981/1500... Est. remaining: 5m 36sRunning iteration 991/1500... Est. remaining: 5m 30sRunning iteration 1001/1500... Est. remaining: 5m 24sbest_combination: {'lookbacks': [148, 159, 200], 'score': np.float64(0.7796045518354278), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 5m 17sRunning iteration 1021/1500... Est. remaining: 5m 11sRunning iteration 1031/1500... Est. remaining: 5m 4sRunning iteration 1041/1500... Est. remaining: 4m 58sRunning iteration 1051/1500... Est. remaining: 4m 52sRunning iteration 1061/1500... Est. remaining: 4m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,870,976,900
Annual Return: 41.94%
Sharpe Ratio: 1.50621
Sortino Ratio: 1.404
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 0.948
Lookback periods: [50, 55, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,616,731,727
Annual Return: 43.32%
Sharpe Ratio: 1.55228
Sortino Ratio: 1.450
Max Drawdown: -36.1%
Avg Drawdown: -9.4%
Normalized Score: 1.131
Lookback periods: [50, 52, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1071/1500... Est. remaining: 4m 40sRunning iteration 1081/1500... Est. remaining: 4m 34sRunning iteration 1091/1500... Est. remaining: 4m 27sRunning iteration 1101/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [50, 52, 82], 'score': np.float64(1.1310856027802925), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 14sRunning iteration 1121/1500... Est. remaining: 4m 8sRunning iteration 1131/1500... Est. remaining: 4m 1sRunning iteration 1141/1500... Est. remaining: 3m 54sRunning iteration 1151/1500... Est. remaining: 3m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,704,630,213
Annual Return: 43.46%
Sharpe Ratio: 1.54453
Sortino Ratio: 1.456
Max Drawdown: -35.6%
Avg Drawdown: -9.1%
Normalized Score: 1.201
Lookback periods: [50, 53, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1161/1500... Est. remaining: 3m 42sRunning iteration 1171/1500... Est. remaining: 3m 35sRunning iteration 1181/1500... Est. remaining: 3m 29sRunning iteration 1191/1500... Est. remaining: 3m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,188,708,617
Annual Return: 46.93%
Sharpe Ratio: 1.68323
Sortino Ratio: 1.602
Max Drawdown: -36.6%
Avg Drawdown: -7.9%
Normalized Score: 2.063
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 3m 16sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 9sRunning iteration 1221/1500... Est. remaining: 3m 3sRunning iteration 1231/1500... Est. remaining: 2m 56sRunning iteration 1241/1500... Est. remaining: 2m 50sRunning iteration 1251/1500... Est. remaining: 2m 43sRunning iteration 1261/1500... Est. remaining: 2m 36sRunning iteration 1271/1500... Est. remaining: 2m 30sRunning iteration 1281/1500... Est. remaining: 2m 23sRunning iteration 1291/1500... Est. remaining: 2m 17sRunning iteration 1301/1500... Est. remaining: 2m 10sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 4sRunning iteration 1321/1500... Est. remaining: 1m 57sRunning iteration 1331/1500... Est. remaining: 1m 50sRunning iteration 1341/1500... Est. remaining: 1m 44sRunning iteration 1351/1500... Est. remaining: 1m 37sRunning iteration 1361/1500... Est. remaining: 1m 31sRunning iteration 1371/1500... Est. remaining: 1m 24sRunning iteration 1381/1500... Est. remaining: 1m 18sRunning iteration 1391/1500... Est. remaining: 1m 11sRunning iteration 1401/1500... Est. remaining: 1m 5sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 58sRunning iteration 1421/1500... Est. remaining: 0m 51sRunning iteration 1431/1500... Est. remaining: 0m 45sRunning iteration 1441/1500... Est. remaining: 0m 38sRunning iteration 1451/1500... Est. remaining: 0m 32sRunning iteration 1461/1500... Est. remaining: 0m 25sRunning iteration 1471/1500... Est. remaining: 0m 19sRunning iteration 1481/1500... Est. remaining: 0m 12sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 16.2 minutes
Best normalized score: 2.06
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 95] (score: 2.0629)

Monte Carlo simulation completed in 16.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 102 selections (24.5%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 82 selections (19.7%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $6,188,708,617.20
Average Annualized Gain: 46.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Sun Aug 24 14:01:45 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-24T14:01:45.826959
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.7293
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,412,152,575
Annual Return: 47.69%
Sharpe Ratio: 1.54723
Sortino Ratio: 1.505
Max Drawdown: -60.6%
Avg Drawdown: -12.0%
Normalized Score: 0.431
Lookback periods: [148, 186, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 9sRunning iteration 21/1500... Est. remaining: 21m 36sRunning iteration 31/1500... Est. remaining: 19m 15sRunning iteration 41/1500... Est. remaining: 17m 56sRunning iteration 51/1500... Est. remaining: 17m 7sRunning iteration 61/1500... Est. remaining: 16m 36sRunning iteration 71/1500... Est. remaining: 16m 10sRunning iteration 81/1500... Est. remaining: 15m 48sRunning iteration 91/1500... Est. remaining: 15m 31sRunning iteration 101/1500... Est. remaining: 15m 16sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}
Running iteration 111/1500... Est. remaining: 15m 1sRunning iteration 121/1500... Est. remaining: 14m 49sRunning iteration 131/1500... Est. remaining: 14m 37sRunning iteration 141/1500... Est. remaining: 14m 26sRunning iteration 151/1500... Est. remaining: 14m 17sRunning iteration 161/1500... Est. remaining: 14m 8sRunning iteration 171/1500... Est. remaining: 13m 59sRunning iteration 181/1500... Est. remaining: 13m 50sRunning iteration 191/1500... Est. remaining: 13m 41sRunning iteration 201/1500... Est. remaining: 13m 33sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}
Running iteration 211/1500... Est. remaining: 13m 26sRunning iteration 221/1500... Est. remaining: 13m 18sRunning iteration 231/1500... Est. remaining: 13m 10sRunning iteration 241/1500... Est. remaining: 13m 2sRunning iteration 251/1500... Est. remaining: 12m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,525,000,589
Annual Return: 48.29%
Sharpe Ratio: 1.57158
Sortino Ratio: 1.536
Max Drawdown: -61.3%
Avg Drawdown: -11.9%
Normalized Score: 0.552
Lookback periods: [153, 159, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 12m 55sRunning iteration 271/1500... Est. remaining: 12m 47sRunning iteration 281/1500... Est. remaining: 12m 40sRunning iteration 291/1500... Est. remaining: 12m 32sRunning iteration 301/1500... Est. remaining: 12m 25sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,468,397,198
Annual Return: 40.95%
Sharpe Ratio: 1.47448
Sortino Ratio: 1.377
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.752
Lookback periods: [50, 53, 92] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 12m 24sRunning iteration 321/1500... Est. remaining: 12m 17sRunning iteration 331/1500... Est. remaining: 12m 10sRunning iteration 341/1500... Est. remaining: 12m 3sRunning iteration 351/1500... Est. remaining: 11m 55sRunning iteration 361/1500... Est. remaining: 11m 49sRunning iteration 371/1500... Est. remaining: 11m 41sRunning iteration 381/1500... Est. remaining: 11m 34sRunning iteration 391/1500... Est. remaining: 11m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,525,950,064
Annual Return: 43.18%
Sharpe Ratio: 1.55179
Sortino Ratio: 1.460
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.364
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 11m 24sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}
Running iteration 411/1500... Est. remaining: 11m 17sRunning iteration 421/1500... Est. remaining: 11m 10sRunning iteration 431/1500... Est. remaining: 11m 3sRunning iteration 441/1500... Est. remaining: 10m 57sRunning iteration 451/1500... Est. remaining: 10m 50sRunning iteration 461/1500... Est. remaining: 10m 43sRunning iteration 471/1500... Est. remaining: 10m 36sRunning iteration 481/1500... Est. remaining: 10m 31sRunning iteration 491/1500... Est. remaining: 10m 24sRunning iteration 501/1500... Est. remaining: 10m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.046
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 511/1500... Est. remaining: 10m 14sRunning iteration 521/1500... Est. remaining: 10m 8sRunning iteration 531/1500... Est. remaining: 10m 1sRunning iteration 541/1500... Est. remaining: 9m 54sRunning iteration 551/1500... Est. remaining: 9m 48sRunning iteration 561/1500... Est. remaining: 9m 41sRunning iteration 571/1500... Est. remaining: 9m 35sRunning iteration 581/1500... Est. remaining: 9m 28sRunning iteration 591/1500... Est. remaining: 9m 21sRunning iteration 601/1500... Est. remaining: 9m 15sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 611/1500... Est. remaining: 9m 8sRunning iteration 621/1500... Est. remaining: 9m 2sRunning iteration 631/1500... Est. remaining: 8m 55sRunning iteration 641/1500... Est. remaining: 8m 49sRunning iteration 651/1500... Est. remaining: 8m 43sRunning iteration 661/1500... Est. remaining: 8m 36sRunning iteration 671/1500... Est. remaining: 8m 30sRunning iteration 681/1500... Est. remaining: 8m 23sRunning iteration 691/1500... Est. remaining: 8m 17sRunning iteration 701/1500... Est. remaining: 8m 11sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 711/1500... Est. remaining: 8m 4sRunning iteration 721/1500... Est. remaining: 7m 58sRunning iteration 731/1500... Est. remaining: 7m 52sRunning iteration 741/1500... Est. remaining: 7m 45sRunning iteration 751/1500... Est. remaining: 7m 39sRunning iteration 761/1500... Est. remaining: 7m 33sRunning iteration 771/1500... Est. remaining: 7m 26sRunning iteration 781/1500... Est. remaining: 7m 20sRunning iteration 791/1500... Est. remaining: 7m 14sRunning iteration 801/1500... Est. remaining: 7m 8sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 811/1500... Est. remaining: 7m 1sRunning iteration 821/1500... Est. remaining: 6m 55sRunning iteration 831/1500... Est. remaining: 6m 49sRunning iteration 841/1500... Est. remaining: 6m 43sRunning iteration 851/1500... Est. remaining: 6m 36sRunning iteration 861/1500... Est. remaining: 6m 30sRunning iteration 871/1500... Est. remaining: 6m 24sRunning iteration 881/1500... Est. remaining: 6m 18sRunning iteration 891/1500... Est. remaining: 6m 12sRunning iteration 901/1500... Est. remaining: 6m 5sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 59sRunning iteration 921/1500... Est. remaining: 5m 53sRunning iteration 931/1500... Est. remaining: 5m 47sRunning iteration 941/1500... Est. remaining: 5m 41sRunning iteration 951/1500... Est. remaining: 5m 34sRunning iteration 961/1500... Est. remaining: 5m 28sRunning iteration 971/1500... Est. remaining: 5m 22sRunning iteration 981/1500... Est. remaining: 5m 16sRunning iteration 991/1500... Est. remaining: 5m 10sRunning iteration 1001/1500... Est. remaining: 5m 4sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 58sRunning iteration 1021/1500... Est. remaining: 4m 51sRunning iteration 1031/1500... Est. remaining: 4m 45sRunning iteration 1041/1500... Est. remaining: 4m 39sRunning iteration 1051/1500... Est. remaining: 4m 33sRunning iteration 1061/1500... Est. remaining: 4m 27sRunning iteration 1071/1500... Est. remaining: 4m 21sRunning iteration 1081/1500... Est. remaining: 4m 15sRunning iteration 1091/1500... Est. remaining: 4m 8sRunning iteration 1101/1500... Est. remaining: 4m 2sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 56sRunning iteration 1121/1500... Est. remaining: 3m 50sRunning iteration 1131/1500... Est. remaining: 3m 44sRunning iteration 1141/1500... Est. remaining: 3m 38sRunning iteration 1151/1500... Est. remaining: 3m 32sRunning iteration 1161/1500... Est. remaining: 3m 26sRunning iteration 1171/1500... Est. remaining: 3m 20sRunning iteration 1181/1500... Est. remaining: 3m 13sRunning iteration 1191/1500... Est. remaining: 3m 7sRunning iteration 1201/1500... Est. remaining: 3m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 55sRunning iteration 1221/1500... Est. remaining: 2m 49sRunning iteration 1231/1500... Est. remaining: 2m 43sRunning iteration 1241/1500... Est. remaining: 2m 37sRunning iteration 1251/1500... Est. remaining: 2m 31sRunning iteration 1261/1500... Est. remaining: 2m 25sRunning iteration 1271/1500... Est. remaining: 2m 19sRunning iteration 1281/1500... Est. remaining: 2m 13sRunning iteration 1291/1500... Est. remaining: 2m 7sRunning iteration 1301/1500... Est. remaining: 2m 0sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 54sRunning iteration 1321/1500... Est. remaining: 1m 48sRunning iteration 1331/1500... Est. remaining: 1m 42sRunning iteration 1341/1500... Est. remaining: 1m 36sRunning iteration 1351/1500... Est. remaining: 1m 30sRunning iteration 1361/1500... Est. remaining: 1m 24sRunning iteration 1371/1500... Est. remaining: 1m 18sRunning iteration 1381/1500... Est. remaining: 1m 12sRunning iteration 1391/1500... Est. remaining: 1m 6sRunning iteration 1401/1500... Est. remaining: 1m 0sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 54sRunning iteration 1421/1500... Est. remaining: 0m 48sRunning iteration 1431/1500... Est. remaining: 0m 42sRunning iteration 1441/1500... Est. remaining: 0m 36sRunning iteration 1451/1500... Est. remaining: 0m 30sRunning iteration 1461/1500... Est. remaining: 0m 24sRunning iteration 1471/1500... Est. remaining: 0m 18sRunning iteration 1481/1500... Est. remaining: 0m 12sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 15.0 minutes
Best normalized score: 2.05
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [50, 52, 95] (score: 2.0463)

Monte Carlo simulation completed in 15.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Sun Aug 24 14:16:54 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $337,326,686
Annual Return: 35.10%
Sharpe Ratio: 1.22099
Sortino Ratio: 1.132
Max Drawdown: -55.5%
Avg Drawdown: -13.3%
Normalized Score: -1.765
Lookback periods: [73, 89, 106] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $541,892,887
Annual Return: 36.96%
Sharpe Ratio: 1.30619
Sortino Ratio: 1.216
Max Drawdown: -52.3%
Avg Drawdown: -11.6%
Normalized Score: -0.992
Lookback periods: [62, 68, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,811,248,881
Annual Return: 43.62%
Sharpe Ratio: 1.43428
Sortino Ratio: 1.396
Max Drawdown: -60.0%
Avg Drawdown: -12.7%
Normalized Score: -0.356
Lookback periods: [127, 128, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 32m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,938,461,208
Annual Return: 45.97%
Sharpe Ratio: 1.49300
Sortino Ratio: 1.459
Max Drawdown: -59.7%
Avg Drawdown: -12.8%
Normalized Score: 0.037
Lookback periods: [150, 154, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,689,536,662
Annual Return: 44.75%
Sharpe Ratio: 1.45644
Sortino Ratio: 1.427
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.099
Lookback periods: [162, 163, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 26m 49sRunning iteration 31/1500... Est. remaining: 22m 6sRunning iteration 41/1500... Est. remaining: 19m 52sRunning iteration 51/1500... Est. remaining: 18m 33sRunning iteration 61/1500... Est. remaining: 17m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,872,606,224
Annual Return: 46.71%
Sharpe Ratio: 1.55885
Sortino Ratio: 1.522
Max Drawdown: -57.8%
Avg Drawdown: -11.7%
Normalized Score: 0.508
Lookback periods: [115, 131, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 17m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,635,916,629
Annual Return: 47.22%
Sharpe Ratio: 1.54050
Sortino Ratio: 1.498
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.714
Lookback periods: [156, 160, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 17m 16sRunning iteration 91/1500... Est. remaining: 16m 43sRunning iteration 101/1500... Est. remaining: 16m 16sbest_combination: {'lookbacks': [156, 160, 178], 'score': np.float64(0.7136157659318254), 'visits': 1}
Running iteration 111/1500... Est. remaining: 15m 52sRunning iteration 121/1500... Est. remaining: 15m 33sRunning iteration 131/1500... Est. remaining: 15m 16sRunning iteration 141/1500... Est. remaining: 14m 59sRunning iteration 151/1500... Est. remaining: 14m 44sRunning iteration 161/1500... Est. remaining: 14m 30sRunning iteration 171/1500... Est. remaining: 14m 18sRunning iteration 181/1500... Est. remaining: 14m 6sRunning iteration 191/1500... Est. remaining: 13m 54sRunning iteration 201/1500... Est. remaining: 13m 43sbest_combination: {'lookbacks': [156, 160, 178], 'score': np.float64(0.7136157659318254), 'visits': 1}
Running iteration 211/1500... Est. remaining: 13m 33sRunning iteration 221/1500... Est. remaining: 13m 23sRunning iteration 231/1500... Est. remaining: 13m 14sRunning iteration 241/1500... Est. remaining: 13m 5sRunning iteration 251/1500... Est. remaining: 12m 56sRunning iteration 261/1500... Est. remaining: 12m 47sRunning iteration 271/1500... Est. remaining: 12m 39sRunning iteration 281/1500... Est. remaining: 12m 30sRunning iteration 291/1500... Est. remaining: 12m 22sRunning iteration 301/1500... Est. remaining: 12m 14sbest_combination: {'lookbacks': [156, 160, 178], 'score': np.float64(0.7136157659318254), 'visits': 1}
Running iteration 311/1500... Est. remaining: 12m 6sRunning iteration 321/1500... Est. remaining: 11m 59sRunning iteration 331/1500... Est. remaining: 11m 51sRunning iteration 341/1500... Est. remaining: 11m 44sRunning iteration 351/1500... Est. remaining: 11m 36sRunning iteration 361/1500... Est. remaining: 11m 29sRunning iteration 371/1500... Est. remaining: 11m 22sRunning iteration 381/1500... Est. remaining: 11m 15sRunning iteration 391/1500... Est. remaining: 11m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,813,111,818
Annual Return: 48.43%
Sharpe Ratio: 1.59583
Sortino Ratio: 1.554
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 0.881
Lookback periods: [134, 157, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 11m 5sbest_combination: {'lookbacks': [134, 157, 178], 'score': np.float64(0.8808374937002007), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 57sRunning iteration 421/1500... Est. remaining: 10m 49sRunning iteration 431/1500... Est. remaining: 10m 41sRunning iteration 441/1500... Est. remaining: 10m 33sRunning iteration 451/1500... Est. remaining: 10m 25sRunning iteration 461/1500... Est. remaining: 10m 17sRunning iteration 471/1500... Est. remaining: 10m 9sRunning iteration 481/1500... Est. remaining: 10m 3sRunning iteration 491/1500... Est. remaining: 9m 55sRunning iteration 501/1500... Est. remaining: 9m 48sbest_combination: {'lookbacks': [134, 157, 178], 'score': np.float64(0.8808374937002007), 'visits': 1}
Running iteration 511/1500... Est. remaining: 17m 47sRunning iteration 521/1500... Est. remaining: 17m 26sRunning iteration 531/1500... Est. remaining: 24m 42sRunning iteration 541/1500... Est. remaining: 24m 9sRunning iteration 551/1500... Est. remaining: 23m 37sRunning iteration 561/1500... Est. remaining: 23m 5sRunning iteration 571/1500... Est. remaining: 22m 35sRunning iteration 581/1500... Est. remaining: 22m 5sRunning iteration 591/1500... Est. remaining: 21m 37sRunning iteration 601/1500... Est. remaining: 21m 9sbest_combination: {'lookbacks': [134, 157, 178], 'score': np.float64(0.8808374937002007), 'visits': 1}
Running iteration 611/1500... Est. remaining: 20m 41sRunning iteration 621/1500... Est. remaining: 20m 15sRunning iteration 631/1500... Est. remaining: 19m 49sRunning iteration 641/1500... Est. remaining: 19m 24sRunning iteration 651/1500... Est. remaining: 18m 59sRunning iteration 661/1500... Est. remaining: 18m 36sRunning iteration 671/1500... Est. remaining: 18m 12sRunning iteration 681/1500... Est. remaining: 17m 50sRunning iteration 691/1500... Est. remaining: 17m 27sRunning iteration 701/1500... Est. remaining: 17m 6sbest_combination: {'lookbacks': [134, 157, 178], 'score': np.float64(0.8808374937002007), 'visits': 1}
Running iteration 711/1500... Est. remaining: 16m 45sRunning iteration 721/1500... Est. remaining: 16m 24sRunning iteration 731/1500... Est. remaining: 16m 4sRunning iteration 741/1500... Est. remaining: 15m 44sRunning iteration 751/1500... Est. remaining: 15m 24sRunning iteration 761/1500... Est. remaining: 15m 5sRunning iteration 771/1500... Est. remaining: 14m 47sRunning iteration 781/1500... Est. remaining: 14m 28sRunning iteration 791/1500... Est. remaining: 14m 10sRunning iteration 801/1500... Est. remaining: 13m 53sbest_combination: {'lookbacks': [134, 157, 178], 'score': np.float64(0.8808374937002007), 'visits': 1}
Running iteration 811/1500... Est. remaining: 13m 35sRunning iteration 821/1500... Est. remaining: 13m 18sRunning iteration 831/1500... Est. remaining: 13m 1sRunning iteration 841/1500... Est. remaining: 12m 44sRunning iteration 851/1500... Est. remaining: 12m 28sRunning iteration 861/1500... Est. remaining: 12m 12sRunning iteration 871/1500... Est. remaining: 11m 56sRunning iteration 881/1500... Est. remaining: 11m 40sRunning iteration 891/1500... Est. remaining: 11m 25sRunning iteration 901/1500... Est. remaining: 11m 10sbest_combination: {'lookbacks': [134, 157, 178], 'score': np.float64(0.8808374937002007), 'visits': 1}
Running iteration 911/1500... Est. remaining: 10m 55sRunning iteration 921/1500... Est. remaining: 10m 40sRunning iteration 931/1500... Est. remaining: 10m 25sRunning iteration 941/1500... Est. remaining: 10m 11sRunning iteration 951/1500... Est. remaining: 9m 57sRunning iteration 961/1500... Est. remaining: 9m 43sRunning iteration 971/1500... Est. remaining: 9m 29sRunning iteration 981/1500... Est. remaining: 9m 15sRunning iteration 991/1500... Est. remaining: 9m 2sRunning iteration 1001/1500... Est. remaining: 8m 48sbest_combination: {'lookbacks': [134, 157, 178], 'score': np.float64(0.8808374937002007), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 8m 35sRunning iteration 1021/1500... Est. remaining: 8m 22sRunning iteration 1031/1500... Est. remaining: 8m 9sRunning iteration 1041/1500... Est. remaining: 7m 57sRunning iteration 1051/1500... Est. remaining: 7m 44sRunning iteration 1061/1500... Est. remaining: 7m 32sRunning iteration 1071/1500... Est. remaining: 7m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,515,112,175
Annual Return: 48.29%
Sharpe Ratio: 1.59293
Sortino Ratio: 1.549
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 0.896
Lookback periods: [134, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1081/1500... Est. remaining: 7m 8sRunning iteration 1091/1500... Est. remaining: 6m 56sRunning iteration 1101/1500... Est. remaining: 6m 44sbest_combination: {'lookbacks': [134, 157, 172], 'score': np.float64(0.8961505814158194), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 6m 32sRunning iteration 1121/1500... Est. remaining: 6m 20sRunning iteration 1131/1500... Est. remaining: 6m 9sRunning iteration 1141/1500... Est. remaining: 5m 57sRunning iteration 1151/1500... Est. remaining: 5m 46sRunning iteration 1161/1500... Est. remaining: 5m 35sRunning iteration 1171/1500... Est. remaining: 5m 24sRunning iteration 1181/1500... Est. remaining: 5m 13sRunning iteration 1191/1500... Est. remaining: 5m 2sRunning iteration 1201/1500... Est. remaining: 4m 51sbest_combination: {'lookbacks': [134, 157, 172], 'score': np.float64(0.8961505814158194), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 4m 40sRunning iteration 1221/1500... Est. remaining: 4m 29sRunning iteration 1231/1500... Est. remaining: 4m 19sRunning iteration 1241/1500... Est. remaining: 4m 8sRunning iteration 1251/1500... Est. remaining: 3m 58sRunning iteration 1261/1500... Est. remaining: 3m 47sRunning iteration 1271/1500... Est. remaining: 3m 37sRunning iteration 1281/1500... Est. remaining: 3m 27sRunning iteration 1291/1500... Est. remaining: 3m 17sRunning iteration 1301/1500... Est. remaining: 3m 7sbest_combination: {'lookbacks': [134, 157, 172], 'score': np.float64(0.8961505814158194), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 57sRunning iteration 1321/1500... Est. remaining: 2m 47sRunning iteration 1331/1500... Est. remaining: 2m 37sRunning iteration 1341/1500... Est. remaining: 2m 27sRunning iteration 1351/1500... Est. remaining: 2m 18sRunning iteration 1361/1500... Est. remaining: 2m 8sRunning iteration 1371/1500... Est. remaining: 1m 59sRunning iteration 1381/1500... Est. remaining: 1m 49sRunning iteration 1391/1500... Est. remaining: 1m 40sRunning iteration 1401/1500... Est. remaining: 1m 30sbest_combination: {'lookbacks': [134, 157, 172], 'score': np.float64(0.8961505814158194), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 21sRunning iteration 1421/1500... Est. remaining: 1m 12sRunning iteration 1431/1500... Est. remaining: 1m 2sRunning iteration 1441/1500... Est. remaining: 0m 53sRunning iteration 1451/1500... Est. remaining: 0m 44sRunning iteration 1461/1500... Est. remaining: 0m 35sRunning iteration 1471/1500... Est. remaining: 0m 26sRunning iteration 1481/1500... Est. remaining: 0m 17sRunning iteration 1491/1500... Est. remaining: 0m 8s
Monte Carlo simulation completed in 22.0 minutes
Best normalized score: 0.90
best_combination: {'lookbacks': [134, 157, 172], 'score': np.float64(0.8961505814158194), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [134, 157, 172] (score: 0.8962)

Monte Carlo simulation completed in 22.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [134, 157, 172] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 115 selections (27.6%)
2. naz100_hma: 107 selections (25.7%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,515,112,175.16
Average Annualized Gain: 48.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Sun Aug 24 14:39:05 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $255,147,779
Annual Return: 34.01%
Sharpe Ratio: 1.18642
Sortino Ratio: 1.104
Max Drawdown: -52.3%
Avg Drawdown: -12.3%
Normalized Score: -1.683
Lookback periods: [80, 85, 139] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,371,988,866
Annual Return: 42.92%
Sharpe Ratio: 1.45317
Sortino Ratio: 1.381
Max Drawdown: -57.2%
Avg Drawdown: -12.1%
Normalized Score: -0.244
Lookback periods: [59, 152, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,407,634,795
Annual Return: 47.08%
Sharpe Ratio: 1.54633
Sortino Ratio: 1.504
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 0.596
Lookback periods: [139, 156, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 23sRunning iteration 21/1500... Est. remaining: 21m 31sRunning iteration 31/1500... Est. remaining: 18m 22sRunning iteration 41/1500... Est. remaining: 16m 47sRunning iteration 51/1500... Est. remaining: 15m 50sRunning iteration 61/1500... Est. remaining: 15m 10sRunning iteration 71/1500... Est. remaining: 14m 40sRunning iteration 81/1500... Est. remaining: 14m 18sRunning iteration 91/1500... Est. remaining: 13m 58sRunning iteration 101/1500... Est. remaining: 13m 42sbest_combination: {'lookbacks': [139, 156, 163], 'score': np.float64(0.5955411854521937), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 28sRunning iteration 121/1500... Est. remaining: 13m 15sRunning iteration 131/1500... Est. remaining: 13m 3sRunning iteration 141/1500... Est. remaining: 12m 53sRunning iteration 151/1500... Est. remaining: 12m 43sRunning iteration 161/1500... Est. remaining: 12m 34sRunning iteration 171/1500... Est. remaining: 12m 25sRunning iteration 181/1500... Est. remaining: 12m 16sRunning iteration 191/1500... Est. remaining: 12m 8sRunning iteration 201/1500... Est. remaining: 12m 0sbest_combination: {'lookbacks': [139, 156, 163], 'score': np.float64(0.5955411854521937), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 53sRunning iteration 221/1500... Est. remaining: 11m 45sRunning iteration 231/1500... Est. remaining: 11m 38sRunning iteration 241/1500... Est. remaining: 11m 31sRunning iteration 251/1500... Est. remaining: 11m 25sRunning iteration 261/1500... Est. remaining: 11m 18sRunning iteration 271/1500... Est. remaining: 11m 11sRunning iteration 281/1500... Est. remaining: 11m 4sRunning iteration 291/1500... Est. remaining: 10m 58sRunning iteration 301/1500... Est. remaining: 10m 52sbest_combination: {'lookbacks': [139, 156, 163], 'score': np.float64(0.5955411854521937), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,663,430,237
Annual Return: 48.83%
Sharpe Ratio: 1.58620
Sortino Ratio: 1.559
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 1.062
Lookback periods: [156, 162, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 10m 50sRunning iteration 321/1500... Est. remaining: 10m 44sRunning iteration 331/1500... Est. remaining: 10m 38sRunning iteration 341/1500... Est. remaining: 10m 32sRunning iteration 351/1500... Est. remaining: 10m 25sRunning iteration 361/1500... Est. remaining: 10m 19sRunning iteration 371/1500... Est. remaining: 10m 13sRunning iteration 381/1500... Est. remaining: 10m 7sRunning iteration 391/1500... Est. remaining: 10m 1sRunning iteration 401/1500... Est. remaining: 9m 55sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 49sRunning iteration 421/1500... Est. remaining: 9m 43sRunning iteration 431/1500... Est. remaining: 9m 37sRunning iteration 441/1500... Est. remaining: 9m 31sRunning iteration 451/1500... Est. remaining: 9m 25sRunning iteration 461/1500... Est. remaining: 9m 20sRunning iteration 471/1500... Est. remaining: 9m 14sRunning iteration 481/1500... Est. remaining: 9m 8sRunning iteration 491/1500... Est. remaining: 9m 3sRunning iteration 501/1500... Est. remaining: 8m 57sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 51sRunning iteration 521/1500... Est. remaining: 8m 45sRunning iteration 531/1500... Est. remaining: 8m 40sRunning iteration 541/1500... Est. remaining: 8m 34sRunning iteration 551/1500... Est. remaining: 8m 29sRunning iteration 561/1500... Est. remaining: 8m 23sRunning iteration 571/1500... Est. remaining: 8m 17sRunning iteration 581/1500... Est. remaining: 8m 12sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 1sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 55sRunning iteration 621/1500... Est. remaining: 7m 50sRunning iteration 631/1500... Est. remaining: 7m 44sRunning iteration 641/1500... Est. remaining: 7m 39sRunning iteration 651/1500... Est. remaining: 7m 33sRunning iteration 661/1500... Est. remaining: 7m 27sRunning iteration 671/1500... Est. remaining: 7m 22sRunning iteration 681/1500... Est. remaining: 7m 17sRunning iteration 691/1500... Est. remaining: 7m 11sRunning iteration 701/1500... Est. remaining: 7m 6sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 0sRunning iteration 721/1500... Est. remaining: 6m 55sRunning iteration 731/1500... Est. remaining: 6m 50sRunning iteration 741/1500... Est. remaining: 6m 44sRunning iteration 751/1500... Est. remaining: 6m 39sRunning iteration 761/1500... Est. remaining: 6m 33sRunning iteration 771/1500... Est. remaining: 6m 28sRunning iteration 781/1500... Est. remaining: 6m 23sRunning iteration 791/1500... Est. remaining: 6m 17sRunning iteration 801/1500... Est. remaining: 6m 12sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 6sRunning iteration 821/1500... Est. remaining: 6m 1sRunning iteration 831/1500... Est. remaining: 5m 56sRunning iteration 841/1500... Est. remaining: 5m 50sRunning iteration 851/1500... Est. remaining: 5m 45sRunning iteration 861/1500... Est. remaining: 5m 40sRunning iteration 871/1500... Est. remaining: 5m 34sRunning iteration 881/1500... Est. remaining: 5m 29sRunning iteration 891/1500... Est. remaining: 5m 24sRunning iteration 901/1500... Est. remaining: 5m 18sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 13sRunning iteration 921/1500... Est. remaining: 5m 8sRunning iteration 931/1500... Est. remaining: 5m 2sRunning iteration 941/1500... Est. remaining: 4m 57sRunning iteration 951/1500... Est. remaining: 4m 52sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 41sRunning iteration 981/1500... Est. remaining: 4m 36sRunning iteration 991/1500... Est. remaining: 4m 30sRunning iteration 1001/1500... Est. remaining: 4m 25sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 20sRunning iteration 1021/1500... Est. remaining: 4m 14sRunning iteration 1031/1500... Est. remaining: 4m 9sRunning iteration 1041/1500... Est. remaining: 4m 4sRunning iteration 1051/1500... Est. remaining: 3m 58sRunning iteration 1061/1500... Est. remaining: 3m 53sRunning iteration 1071/1500... Est. remaining: 3m 48sRunning iteration 1081/1500... Est. remaining: 3m 42sRunning iteration 1091/1500... Est. remaining: 3m 37sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 26sRunning iteration 1121/1500... Est. remaining: 3m 21sRunning iteration 1131/1500... Est. remaining: 3m 16sRunning iteration 1141/1500... Est. remaining: 3m 10sRunning iteration 1151/1500... Est. remaining: 3m 5sRunning iteration 1161/1500... Est. remaining: 3m 0sRunning iteration 1171/1500... Est. remaining: 2m 54sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 44sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 33sRunning iteration 1221/1500... Est. remaining: 2m 28sRunning iteration 1231/1500... Est. remaining: 2m 23sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 7sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 51sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 14sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.2 minutes
Best normalized score: 1.06
best_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 162, 172] (score: 1.0619)

Monte Carlo simulation completed in 13.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 162, 172] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 34 selections (8.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,663,430,237.43
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Sun Aug 24 14:52:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $386,346,084
Annual Return: 35.63%
Sharpe Ratio: 1.22134
Sortino Ratio: 1.150
Max Drawdown: -63.3%
Avg Drawdown: -13.0%
Normalized Score: -1.897
Lookback periods: [89, 196, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,893,170,929
Annual Return: 41.99%
Sharpe Ratio: 1.39230
Sortino Ratio: 1.347
Max Drawdown: -71.3%
Avg Drawdown: -12.9%
Normalized Score: -1.037
Lookback periods: [110, 167, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,815,263,466
Annual Return: 44.89%
Sharpe Ratio: 1.47700
Sortino Ratio: 1.439
Max Drawdown: -61.0%
Avg Drawdown: -11.2%
Normalized Score: 0.075
Lookback periods: [139, 171, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,149,897,709
Annual Return: 46.15%
Sharpe Ratio: 1.53758
Sortino Ratio: 1.488
Max Drawdown: -56.4%
Avg Drawdown: -11.8%
Normalized Score: 0.401
Lookback periods: [134, 136, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 27sRunning iteration 31/1500... Est. remaining: 20m 31sRunning iteration 41/1500... Est. remaining: 18m 34sRunning iteration 51/1500... Est. remaining: 17m 14sRunning iteration 61/1500... Est. remaining: 16m 18sRunning iteration 71/1500... Est. remaining: 15m 41sRunning iteration 81/1500... Est. remaining: 15m 17sRunning iteration 91/1500... Est. remaining: 14m 50sRunning iteration 101/1500... Est. remaining: 14m 29sbest_combination: {'lookbacks': [134, 136, 148], 'score': np.float64(0.40074004192883594), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 11sRunning iteration 121/1500... Est. remaining: 13m 54sRunning iteration 131/1500... Est. remaining: 13m 39sRunning iteration 141/1500... Est. remaining: 13m 25sRunning iteration 151/1500... Est. remaining: 13m 13sRunning iteration 161/1500... Est. remaining: 13m 1sRunning iteration 171/1500... Est. remaining: 12m 51sRunning iteration 181/1500... Est. remaining: 12m 41sRunning iteration 191/1500... Est. remaining: 12m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,958,186,940
Annual Return: 45.99%
Sharpe Ratio: 1.50385
Sortino Ratio: 1.467
Max Drawdown: -59.0%
Avg Drawdown: -10.7%
Normalized Score: 0.409
Lookback periods: [155, 167, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 12m 34sbest_combination: {'lookbacks': [155, 167, 179], 'score': np.float64(0.4085600071760682), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 26sRunning iteration 221/1500... Est. remaining: 12m 18sRunning iteration 231/1500... Est. remaining: 12m 10sRunning iteration 241/1500... Est. remaining: 12m 1sRunning iteration 251/1500... Est. remaining: 11m 54sRunning iteration 261/1500... Est. remaining: 11m 46sRunning iteration 271/1500... Est. remaining: 11m 38sRunning iteration 281/1500... Est. remaining: 11m 31sRunning iteration 291/1500... Est. remaining: 11m 23sRunning iteration 301/1500... Est. remaining: 11m 16sbest_combination: {'lookbacks': [155, 167, 179], 'score': np.float64(0.4085600071760682), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,981,051,324
Annual Return: 47.44%
Sharpe Ratio: 1.54277
Sortino Ratio: 1.504
Max Drawdown: -59.7%
Avg Drawdown: -11.4%
Normalized Score: 0.517
Lookback periods: [146, 155, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 11m 14sRunning iteration 321/1500... Est. remaining: 11m 7sRunning iteration 331/1500... Est. remaining: 11m 0sRunning iteration 341/1500... Est. remaining: 10m 53sRunning iteration 351/1500... Est. remaining: 10m 46sRunning iteration 361/1500... Est. remaining: 10m 39sRunning iteration 371/1500... Est. remaining: 10m 33sRunning iteration 381/1500... Est. remaining: 10m 26sRunning iteration 391/1500... Est. remaining: 10m 19sRunning iteration 401/1500... Est. remaining: 10m 13sbest_combination: {'lookbacks': [146, 155, 170], 'score': np.float64(0.5172803229303977), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,237,255,032
Annual Return: 48.14%
Sharpe Ratio: 1.58362
Sortino Ratio: 1.540
Max Drawdown: -56.8%
Avg Drawdown: -11.1%
Normalized Score: 0.820
Lookback periods: [140, 158, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 10m 10sRunning iteration 421/1500... Est. remaining: 10m 3sRunning iteration 431/1500... Est. remaining: 9m 57sRunning iteration 441/1500... Est. remaining: 9m 50sRunning iteration 451/1500... Est. remaining: 9m 44sRunning iteration 461/1500... Est. remaining: 9m 38sRunning iteration 471/1500... Est. remaining: 9m 32sRunning iteration 481/1500... Est. remaining: 9m 25sRunning iteration 491/1500... Est. remaining: 9m 19sRunning iteration 501/1500... Est. remaining: 9m 13sbest_combination: {'lookbacks': [140, 158, 178], 'score': np.float64(0.8201203229336071), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 7sRunning iteration 521/1500... Est. remaining: 9m 1sRunning iteration 531/1500... Est. remaining: 8m 55sRunning iteration 541/1500... Est. remaining: 8m 49sRunning iteration 551/1500... Est. remaining: 8m 44sRunning iteration 561/1500... Est. remaining: 8m 38sRunning iteration 571/1500... Est. remaining: 8m 32sRunning iteration 581/1500... Est. remaining: 8m 26sRunning iteration 591/1500... Est. remaining: 8m 20sRunning iteration 601/1500... Est. remaining: 8m 14sbest_combination: {'lookbacks': [140, 158, 178], 'score': np.float64(0.8201203229336071), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 8sRunning iteration 621/1500... Est. remaining: 8m 3sRunning iteration 631/1500... Est. remaining: 7m 57sRunning iteration 641/1500... Est. remaining: 7m 51sRunning iteration 651/1500... Est. remaining: 7m 45sRunning iteration 661/1500... Est. remaining: 7m 39sRunning iteration 671/1500... Est. remaining: 7m 33sRunning iteration 681/1500... Est. remaining: 7m 27sRunning iteration 691/1500... Est. remaining: 7m 22sRunning iteration 701/1500... Est. remaining: 7m 16sbest_combination: {'lookbacks': [140, 158, 178], 'score': np.float64(0.8201203229336071), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 10sRunning iteration 721/1500... Est. remaining: 7m 5sRunning iteration 731/1500... Est. remaining: 6m 59sRunning iteration 741/1500... Est. remaining: 6m 53sRunning iteration 751/1500... Est. remaining: 6m 48sRunning iteration 761/1500... Est. remaining: 6m 42sRunning iteration 771/1500... Est. remaining: 6m 37sRunning iteration 781/1500... Est. remaining: 6m 31sRunning iteration 791/1500... Est. remaining: 6m 26sRunning iteration 801/1500... Est. remaining: 6m 20sbest_combination: {'lookbacks': [140, 158, 178], 'score': np.float64(0.8201203229336071), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 14sRunning iteration 821/1500... Est. remaining: 6m 9sRunning iteration 831/1500... Est. remaining: 6m 3sRunning iteration 841/1500... Est. remaining: 5m 58sRunning iteration 851/1500... Est. remaining: 5m 52sRunning iteration 861/1500... Est. remaining: 5m 47sRunning iteration 871/1500... Est. remaining: 5m 41sRunning iteration 881/1500... Est. remaining: 5m 36sRunning iteration 891/1500... Est. remaining: 5m 30sRunning iteration 901/1500... Est. remaining: 5m 25sbest_combination: {'lookbacks': [140, 158, 178], 'score': np.float64(0.8201203229336071), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 19sRunning iteration 921/1500... Est. remaining: 5m 14sRunning iteration 931/1500... Est. remaining: 5m 8sRunning iteration 941/1500... Est. remaining: 5m 3sRunning iteration 951/1500... Est. remaining: 4m 57sRunning iteration 961/1500... Est. remaining: 4m 52sRunning iteration 971/1500... Est. remaining: 4m 46sRunning iteration 981/1500... Est. remaining: 4m 41sRunning iteration 991/1500... Est. remaining: 4m 35sRunning iteration 1001/1500... Est. remaining: 4m 30sbest_combination: {'lookbacks': [140, 158, 178], 'score': np.float64(0.8201203229336071), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 24sRunning iteration 1021/1500... Est. remaining: 4m 19sRunning iteration 1031/1500... Est. remaining: 4m 14sRunning iteration 1041/1500... Est. remaining: 4m 8sRunning iteration 1051/1500... Est. remaining: 4m 3sRunning iteration 1061/1500... Est. remaining: 3m 57sRunning iteration 1071/1500... Est. remaining: 3m 52sRunning iteration 1081/1500... Est. remaining: 3m 46sRunning iteration 1091/1500... Est. remaining: 3m 41sRunning iteration 1101/1500... Est. remaining: 3m 36sbest_combination: {'lookbacks': [140, 158, 178], 'score': np.float64(0.8201203229336071), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 30sRunning iteration 1121/1500... Est. remaining: 3m 25sRunning iteration 1131/1500... Est. remaining: 3m 19sRunning iteration 1141/1500... Est. remaining: 3m 14sRunning iteration 1151/1500... Est. remaining: 3m 8sRunning iteration 1161/1500... Est. remaining: 3m 3sRunning iteration 1171/1500... Est. remaining: 2m 57sRunning iteration 1181/1500... Est. remaining: 2m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,440,220,207
Annual Return: 49.16%
Sharpe Ratio: 1.60175
Sortino Ratio: 1.569
Max Drawdown: -56.0%
Avg Drawdown: -11.7%
Normalized Score: 0.924
Lookback periods: [136, 156, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1191/1500... Est. remaining: 2m 47sRunning iteration 1201/1500... Est. remaining: 2m 42sbest_combination: {'lookbacks': [136, 156, 188], 'score': np.float64(0.9237590359212557), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 36sRunning iteration 1221/1500... Est. remaining: 2m 31sRunning iteration 1231/1500... Est. remaining: 2m 25sRunning iteration 1241/1500... Est. remaining: 2m 20sRunning iteration 1251/1500... Est. remaining: 2m 14sRunning iteration 1261/1500... Est. remaining: 2m 9sRunning iteration 1271/1500... Est. remaining: 2m 3sRunning iteration 1281/1500... Est. remaining: 1m 58sRunning iteration 1291/1500... Est. remaining: 1m 53sRunning iteration 1301/1500... Est. remaining: 1m 47sbest_combination: {'lookbacks': [136, 156, 188], 'score': np.float64(0.9237590359212557), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 42sRunning iteration 1321/1500... Est. remaining: 1m 36sRunning iteration 1331/1500... Est. remaining: 1m 31sRunning iteration 1341/1500... Est. remaining: 1m 26sRunning iteration 1351/1500... Est. remaining: 1m 20sRunning iteration 1361/1500... Est. remaining: 1m 15sRunning iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 4sRunning iteration 1391/1500... Est. remaining: 0m 59sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [136, 156, 188], 'score': np.float64(0.9237590359212557), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.4 minutes
Best normalized score: 0.92
best_combination: {'lookbacks': [136, 156, 188], 'score': np.float64(0.9237590359212557), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 156, 188] (score: 0.9238)

Monte Carlo simulation completed in 13.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 156, 188] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 115 selections (27.6%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,440,220,206.65
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Sun Aug 24 15:05:59 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $178,342,668
Annual Return: 32.64%
Sharpe Ratio: 1.14320
Sortino Ratio: 1.056
Max Drawdown: -62.2%
Avg Drawdown: -14.7%
Normalized Score: -2.637
Lookback periods: [72, 107, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,458,260,198
Annual Return: 44.48%
Sharpe Ratio: 1.43759
Sortino Ratio: 1.408
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: -0.078
Lookback periods: [172, 183, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,616,810,244
Annual Return: 46.52%
Sharpe Ratio: 1.53810
Sortino Ratio: 1.495
Max Drawdown: -58.2%
Avg Drawdown: -11.1%
Normalized Score: 0.497
Lookback periods: [146, 156, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,432,075,950
Annual Return: 49.55%
Sharpe Ratio: 1.58874
Sortino Ratio: 1.560
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.878
Lookback periods: [178, 189, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 26sRunning iteration 31/1500... Est. remaining: 19m 52sRunning iteration 41/1500... Est. remaining: 17m 59sRunning iteration 51/1500... Est. remaining: 16m 50sRunning iteration 61/1500... Est. remaining: 16m 1sRunning iteration 71/1500... Est. remaining: 15m 22sRunning iteration 81/1500... Est. remaining: 14m 52sRunning iteration 91/1500... Est. remaining: 14m 28sRunning iteration 101/1500... Est. remaining: 14m 9sbest_combination: {'lookbacks': [178, 189, 196], 'score': np.float64(0.8780118555435628), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 51sRunning iteration 121/1500... Est. remaining: 13m 36sRunning iteration 131/1500... Est. remaining: 13m 24sRunning iteration 141/1500... Est. remaining: 13m 12sRunning iteration 151/1500... Est. remaining: 13m 1sRunning iteration 161/1500... Est. remaining: 12m 50sRunning iteration 171/1500... Est. remaining: 12m 41sRunning iteration 181/1500... Est. remaining: 12m 33sRunning iteration 191/1500... Est. remaining: 12m 25sRunning iteration 201/1500... Est. remaining: 12m 17sbest_combination: {'lookbacks': [178, 189, 196], 'score': np.float64(0.8780118555435628), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 9sRunning iteration 221/1500... Est. remaining: 12m 1sRunning iteration 231/1500... Est. remaining: 11m 54sRunning iteration 241/1500... Est. remaining: 11m 47sRunning iteration 251/1500... Est. remaining: 11m 39sRunning iteration 261/1500... Est. remaining: 11m 32sRunning iteration 271/1500... Est. remaining: 11m 25sRunning iteration 281/1500... Est. remaining: 11m 20sRunning iteration 291/1500... Est. remaining: 11m 14sRunning iteration 301/1500... Est. remaining: 11m 9sbest_combination: {'lookbacks': [178, 189, 196], 'score': np.float64(0.8780118555435628), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 3sRunning iteration 321/1500... Est. remaining: 10m 56sRunning iteration 331/1500... Est. remaining: 10m 51sRunning iteration 341/1500... Est. remaining: 10m 46sRunning iteration 351/1500... Est. remaining: 10m 40sRunning iteration 361/1500... Est. remaining: 10m 34sRunning iteration 371/1500... Est. remaining: 10m 27sRunning iteration 381/1500... Est. remaining: 10m 22sRunning iteration 391/1500... Est. remaining: 10m 16sRunning iteration 401/1500... Est. remaining: 10m 10sbest_combination: {'lookbacks': [178, 189, 196], 'score': np.float64(0.8780118555435628), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 5sRunning iteration 421/1500... Est. remaining: 9m 59sRunning iteration 431/1500... Est. remaining: 9m 53sRunning iteration 441/1500... Est. remaining: 9m 48sRunning iteration 451/1500... Est. remaining: 9m 41sRunning iteration 461/1500... Est. remaining: 9m 35sRunning iteration 471/1500... Est. remaining: 9m 29sRunning iteration 481/1500... Est. remaining: 9m 23sRunning iteration 491/1500... Est. remaining: 9m 17sRunning iteration 501/1500... Est. remaining: 9m 12sbest_combination: {'lookbacks': [178, 189, 196], 'score': np.float64(0.8780118555435628), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 7sRunning iteration 521/1500... Est. remaining: 9m 2sRunning iteration 531/1500... Est. remaining: 8m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,825,361,353
Annual Return: 49.32%
Sharpe Ratio: 1.62302
Sortino Ratio: 1.591
Max Drawdown: -58.5%
Avg Drawdown: -11.0%
Normalized Score: 1.011
Lookback periods: [135, 155, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 8m 52sRunning iteration 551/1500... Est. remaining: 8m 46sRunning iteration 561/1500... Est. remaining: 8m 40sRunning iteration 571/1500... Est. remaining: 8m 34sRunning iteration 581/1500... Est. remaining: 8m 28sRunning iteration 591/1500... Est. remaining: 8m 23sRunning iteration 601/1500... Est. remaining: 8m 17sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 11sRunning iteration 621/1500... Est. remaining: 8m 6sRunning iteration 631/1500... Est. remaining: 8m 0sRunning iteration 641/1500... Est. remaining: 7m 54sRunning iteration 651/1500... Est. remaining: 7m 48sRunning iteration 661/1500... Est. remaining: 7m 42sRunning iteration 671/1500... Est. remaining: 7m 37sRunning iteration 681/1500... Est. remaining: 7m 31sRunning iteration 691/1500... Est. remaining: 7m 26sRunning iteration 701/1500... Est. remaining: 7m 20sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 14sRunning iteration 721/1500... Est. remaining: 7m 9sRunning iteration 731/1500... Est. remaining: 7m 3sRunning iteration 741/1500... Est. remaining: 6m 57sRunning iteration 751/1500... Est. remaining: 6m 52sRunning iteration 761/1500... Est. remaining: 6m 46sRunning iteration 771/1500... Est. remaining: 6m 41sRunning iteration 781/1500... Est. remaining: 6m 35sRunning iteration 791/1500... Est. remaining: 6m 30sRunning iteration 801/1500... Est. remaining: 6m 25sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 20sRunning iteration 821/1500... Est. remaining: 6m 14sRunning iteration 831/1500... Est. remaining: 6m 8sRunning iteration 841/1500... Est. remaining: 6m 2sRunning iteration 851/1500... Est. remaining: 5m 57sRunning iteration 861/1500... Est. remaining: 5m 51sRunning iteration 871/1500... Est. remaining: 5m 46sRunning iteration 881/1500... Est. remaining: 5m 40sRunning iteration 891/1500... Est. remaining: 5m 34sRunning iteration 901/1500... Est. remaining: 5m 29sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 23sRunning iteration 921/1500... Est. remaining: 5m 18sRunning iteration 931/1500... Est. remaining: 5m 12sRunning iteration 941/1500... Est. remaining: 5m 7sRunning iteration 951/1500... Est. remaining: 5m 1sRunning iteration 961/1500... Est. remaining: 4m 55sRunning iteration 971/1500... Est. remaining: 4m 50sRunning iteration 981/1500... Est. remaining: 4m 44sRunning iteration 991/1500... Est. remaining: 4m 39sRunning iteration 1001/1500... Est. remaining: 4m 33sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 27sRunning iteration 1021/1500... Est. remaining: 4m 22sRunning iteration 1031/1500... Est. remaining: 4m 16sRunning iteration 1041/1500... Est. remaining: 4m 11sRunning iteration 1051/1500... Est. remaining: 4m 5sRunning iteration 1061/1500... Est. remaining: 4m 0sRunning iteration 1071/1500... Est. remaining: 3m 54sRunning iteration 1081/1500... Est. remaining: 3m 49sRunning iteration 1091/1500... Est. remaining: 3m 43sRunning iteration 1101/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 32sRunning iteration 1121/1500... Est. remaining: 3m 27sRunning iteration 1131/1500... Est. remaining: 3m 21sRunning iteration 1141/1500... Est. remaining: 3m 16sRunning iteration 1151/1500... Est. remaining: 3m 10sRunning iteration 1161/1500... Est. remaining: 3m 5sRunning iteration 1171/1500... Est. remaining: 2m 59sRunning iteration 1181/1500... Est. remaining: 2m 54sRunning iteration 1191/1500... Est. remaining: 2m 48sRunning iteration 1201/1500... Est. remaining: 2m 43sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 37sRunning iteration 1221/1500... Est. remaining: 2m 32sRunning iteration 1231/1500... Est. remaining: 2m 26sRunning iteration 1241/1500... Est. remaining: 2m 21sRunning iteration 1251/1500... Est. remaining: 2m 16sRunning iteration 1261/1500... Est. remaining: 2m 10sRunning iteration 1271/1500... Est. remaining: 2m 5sRunning iteration 1281/1500... Est. remaining: 1m 59sRunning iteration 1291/1500... Est. remaining: 1m 54sRunning iteration 1301/1500... Est. remaining: 1m 48sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 43sRunning iteration 1321/1500... Est. remaining: 1m 37sRunning iteration 1331/1500... Est. remaining: 1m 32sRunning iteration 1341/1500... Est. remaining: 1m 26sRunning iteration 1351/1500... Est. remaining: 1m 21sRunning iteration 1361/1500... Est. remaining: 1m 16sRunning iteration 1371/1500... Est. remaining: 1m 10sRunning iteration 1381/1500... Est. remaining: 1m 5sRunning iteration 1391/1500... Est. remaining: 0m 59sRunning iteration 1401/1500... Est. remaining: 0m 54sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 38sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 27sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.6 minutes
Best normalized score: 1.01
best_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(1.0112536174475966), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 155, 173] (score: 1.0113)

Monte Carlo simulation completed in 13.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 155, 173] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 113 selections (27.2%)
3. naz100_pi: 77 selections (18.5%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,825,361,352.89
Average Annualized Gain: 49.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Sun Aug 24 15:19:41 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,256,295,365
Annual Return: 42.71%
Sharpe Ratio: 1.41328
Sortino Ratio: 1.363
Max Drawdown: -67.6%
Avg Drawdown: -12.5%
Normalized Score: -0.737
Lookback periods: [106, 173, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,237,164,684
Annual Return: 40.26%
Sharpe Ratio: 1.38121
Sortino Ratio: 1.287
Max Drawdown: -56.4%
Avg Drawdown: -11.8%
Normalized Score: -0.638
Lookback periods: [57, 126, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,985,636,510
Annual Return: 45.07%
Sharpe Ratio: 1.44481
Sortino Ratio: 1.398
Max Drawdown: -61.2%
Avg Drawdown: -11.4%
Normalized Score: -0.040
Lookback periods: [190, 191, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,573,616,026
Annual Return: 41.24%
Sharpe Ratio: 1.47547
Sortino Ratio: 1.368
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.759
Lookback periods: [51, 51, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 34m 26sRunning iteration 21/1500... Est. remaining: 24m 1sRunning iteration 31/1500... Est. remaining: 20m 21sRunning iteration 41/1500... Est. remaining: 18m 26sRunning iteration 51/1500... Est. remaining: 17m 13sRunning iteration 61/1500... Est. remaining: 16m 24sRunning iteration 71/1500... Est. remaining: 15m 42sRunning iteration 81/1500... Est. remaining: 15m 9sRunning iteration 91/1500... Est. remaining: 14m 46sRunning iteration 101/1500... Est. remaining: 14m 26sbest_combination: {'lookbacks': [51, 51, 87], 'score': np.float64(0.759434091591735), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 9sRunning iteration 121/1500... Est. remaining: 13m 55sRunning iteration 131/1500... Est. remaining: 13m 42sRunning iteration 141/1500... Est. remaining: 13m 29sRunning iteration 151/1500... Est. remaining: 13m 18sRunning iteration 161/1500... Est. remaining: 13m 7sRunning iteration 171/1500... Est. remaining: 12m 57sRunning iteration 181/1500... Est. remaining: 12m 47sRunning iteration 191/1500... Est. remaining: 12m 38sRunning iteration 201/1500... Est. remaining: 12m 30sbest_combination: {'lookbacks': [51, 51, 87], 'score': np.float64(0.759434091591735), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 22sRunning iteration 221/1500... Est. remaining: 12m 14sRunning iteration 231/1500... Est. remaining: 12m 6sRunning iteration 241/1500... Est. remaining: 11m 58sRunning iteration 251/1500... Est. remaining: 11m 50sRunning iteration 261/1500... Est. remaining: 11m 43sRunning iteration 271/1500... Est. remaining: 11m 36sRunning iteration 281/1500... Est. remaining: 11m 29sRunning iteration 291/1500... Est. remaining: 11m 22sRunning iteration 301/1500... Est. remaining: 11m 15sbest_combination: {'lookbacks': [51, 51, 87], 'score': np.float64(0.759434091591735), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 8sRunning iteration 321/1500... Est. remaining: 11m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,953,945,785
Annual Return: 48.96%
Sharpe Ratio: 1.57535
Sortino Ratio: 1.538
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.775
Lookback periods: [178, 189, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 331/1500... Est. remaining: 11m 0sRunning iteration 341/1500... Est. remaining: 10m 53sRunning iteration 351/1500... Est. remaining: 10m 46sRunning iteration 361/1500... Est. remaining: 10m 40sRunning iteration 371/1500... Est. remaining: 10m 33sRunning iteration 381/1500... Est. remaining: 10m 27sRunning iteration 391/1500... Est. remaining: 10m 21sRunning iteration 401/1500... Est. remaining: 10m 14sbest_combination: {'lookbacks': [178, 189, 193], 'score': np.float64(0.7750073787796443), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 8sRunning iteration 421/1500... Est. remaining: 10m 2sRunning iteration 431/1500... Est. remaining: 9m 56sRunning iteration 441/1500... Est. remaining: 9m 50sRunning iteration 451/1500... Est. remaining: 9m 44sRunning iteration 461/1500... Est. remaining: 9m 38sRunning iteration 471/1500... Est. remaining: 9m 32sRunning iteration 481/1500... Est. remaining: 9m 26sRunning iteration 491/1500... Est. remaining: 9m 20sRunning iteration 501/1500... Est. remaining: 9m 14sbest_combination: {'lookbacks': [178, 189, 193], 'score': np.float64(0.7750073787796443), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 8sRunning iteration 521/1500... Est. remaining: 9m 2sRunning iteration 531/1500... Est. remaining: 8m 56sRunning iteration 541/1500... Est. remaining: 8m 51sRunning iteration 551/1500... Est. remaining: 8m 45sRunning iteration 561/1500... Est. remaining: 8m 39sRunning iteration 571/1500... Est. remaining: 8m 33sRunning iteration 581/1500... Est. remaining: 8m 27sRunning iteration 591/1500... Est. remaining: 8m 22sRunning iteration 601/1500... Est. remaining: 8m 16sbest_combination: {'lookbacks': [178, 189, 193], 'score': np.float64(0.7750073787796443), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 11sRunning iteration 621/1500... Est. remaining: 8m 5sRunning iteration 631/1500... Est. remaining: 8m 0sRunning iteration 641/1500... Est. remaining: 7m 54sRunning iteration 651/1500... Est. remaining: 7m 48sRunning iteration 661/1500... Est. remaining: 7m 42sRunning iteration 671/1500... Est. remaining: 7m 37sRunning iteration 681/1500... Est. remaining: 7m 31sRunning iteration 691/1500... Est. remaining: 7m 25sRunning iteration 701/1500... Est. remaining: 7m 20sbest_combination: {'lookbacks': [178, 189, 193], 'score': np.float64(0.7750073787796443), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 14sRunning iteration 721/1500... Est. remaining: 7m 9sRunning iteration 731/1500... Est. remaining: 7m 4sRunning iteration 741/1500... Est. remaining: 6m 58sRunning iteration 751/1500... Est. remaining: 6m 52sRunning iteration 761/1500... Est. remaining: 6m 47sRunning iteration 771/1500... Est. remaining: 6m 41sRunning iteration 781/1500... Est. remaining: 6m 36sRunning iteration 791/1500... Est. remaining: 6m 30sRunning iteration 801/1500... Est. remaining: 6m 24sbest_combination: {'lookbacks': [178, 189, 193], 'score': np.float64(0.7750073787796443), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 19sRunning iteration 821/1500... Est. remaining: 6m 13sRunning iteration 831/1500... Est. remaining: 6m 8sRunning iteration 841/1500... Est. remaining: 6m 2sRunning iteration 851/1500... Est. remaining: 5m 57sRunning iteration 861/1500... Est. remaining: 5m 51sRunning iteration 871/1500... Est. remaining: 5m 46sRunning iteration 881/1500... Est. remaining: 5m 40sRunning iteration 891/1500... Est. remaining: 5m 35sRunning iteration 901/1500... Est. remaining: 5m 29sbest_combination: {'lookbacks': [178, 189, 193], 'score': np.float64(0.7750073787796443), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 24sRunning iteration 921/1500... Est. remaining: 5m 18sRunning iteration 931/1500... Est. remaining: 5m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,747,799,067
Annual Return: 49.67%
Sharpe Ratio: 1.60080
Sortino Ratio: 1.562
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.897
Lookback periods: [181, 190, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 5m 8sRunning iteration 951/1500... Est. remaining: 5m 2sRunning iteration 961/1500... Est. remaining: 4m 56sRunning iteration 971/1500... Est. remaining: 4m 51sRunning iteration 981/1500... Est. remaining: 4m 45sRunning iteration 991/1500... Est. remaining: 4m 40sRunning iteration 1001/1500... Est. remaining: 4m 34sbest_combination: {'lookbacks': [181, 190, 198], 'score': np.float64(0.8970160837228344), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 28sRunning iteration 1021/1500... Est. remaining: 4m 23sRunning iteration 1031/1500... Est. remaining: 4m 17sRunning iteration 1041/1500... Est. remaining: 4m 12sRunning iteration 1051/1500... Est. remaining: 4m 6sRunning iteration 1061/1500... Est. remaining: 4m 1sRunning iteration 1071/1500... Est. remaining: 3m 55sRunning iteration 1081/1500... Est. remaining: 3m 50sRunning iteration 1091/1500... Est. remaining: 3m 44sRunning iteration 1101/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [181, 190, 198], 'score': np.float64(0.8970160837228344), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 33sRunning iteration 1121/1500... Est. remaining: 3m 28sRunning iteration 1131/1500... Est. remaining: 3m 22sRunning iteration 1141/1500... Est. remaining: 3m 16sRunning iteration 1151/1500... Est. remaining: 3m 11sRunning iteration 1161/1500... Est. remaining: 3m 5sRunning iteration 1171/1500... Est. remaining: 3m 0sRunning iteration 1181/1500... Est. remaining: 2m 55sRunning iteration 1191/1500... Est. remaining: 2m 49sRunning iteration 1201/1500... Est. remaining: 2m 44sbest_combination: {'lookbacks': [181, 190, 198], 'score': np.float64(0.8970160837228344), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 38sRunning iteration 1221/1500... Est. remaining: 2m 33sRunning iteration 1231/1500... Est. remaining: 2m 27sRunning iteration 1241/1500... Est. remaining: 2m 22sRunning iteration 1251/1500... Est. remaining: 2m 16sRunning iteration 1261/1500... Est. remaining: 2m 11sRunning iteration 1271/1500... Est. remaining: 2m 5sRunning iteration 1281/1500... Est. remaining: 2m 0sRunning iteration 1291/1500... Est. remaining: 1m 54sRunning iteration 1301/1500... Est. remaining: 1m 49sbest_combination: {'lookbacks': [181, 190, 198], 'score': np.float64(0.8970160837228344), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 43sRunning iteration 1321/1500... Est. remaining: 1m 38sRunning iteration 1331/1500... Est. remaining: 1m 32sRunning iteration 1341/1500... Est. remaining: 1m 27sRunning iteration 1351/1500... Est. remaining: 1m 21sRunning iteration 1361/1500... Est. remaining: 1m 16sRunning iteration 1371/1500... Est. remaining: 1m 10sRunning iteration 1381/1500... Est. remaining: 1m 5sRunning iteration 1391/1500... Est. remaining: 0m 59sRunning iteration 1401/1500... Est. remaining: 0m 54sbest_combination: {'lookbacks': [181, 190, 198], 'score': np.float64(0.8970160837228344), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 38sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 27sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.6 minutes
Best normalized score: 0.90
best_combination: {'lookbacks': [181, 190, 198], 'score': np.float64(0.8970160837228344), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [181, 190, 198] (score: 0.8970)

Monte Carlo simulation completed in 13.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [181, 190, 198] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 123 selections (29.6%)
2. sp500_hma: 99 selections (23.8%)
3. naz100_pine: 82 selections (19.7%)
4. naz100_pi: 72 selections (17.3%)
5. cash: 40 selections (9.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,747,799,067.03
Average Annualized Gain: 49.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Sun Aug 24 15:33:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $868,120,026
Annual Return: 38.83%
Sharpe Ratio: 1.29698
Sortino Ratio: 1.241
Max Drawdown: -62.4%
Avg Drawdown: -14.3%
Normalized Score: -1.539
Lookback periods: [108, 119, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $550,508,137
Annual Return: 37.02%
Sharpe Ratio: 1.30455
Sortino Ratio: 1.218
Max Drawdown: -56.7%
Avg Drawdown: -12.6%
Normalized Score: -1.284
Lookback periods: [54, 98, 113] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $483,588,049
Annual Return: 36.51%
Sharpe Ratio: 1.28421
Sortino Ratio: 1.190
Max Drawdown: -52.3%
Avg Drawdown: -12.2%
Normalized Score: -1.191
Lookback periods: [64, 79, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,564,096,076
Annual Return: 41.21%
Sharpe Ratio: 1.37106
Sortino Ratio: 1.316
Max Drawdown: -58.1%
Avg Drawdown: -12.9%
Normalized Score: -0.741
Lookback periods: [99, 133, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,883,173,325
Annual Return: 44.97%
Sharpe Ratio: 1.47701
Sortino Ratio: 1.435
Max Drawdown: -56.4%
Avg Drawdown: -12.6%
Normalized Score: 0.015
Lookback periods: [125, 132, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 38m 16sRunning iteration 21/1500... Est. remaining: 25m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,350,978,371
Annual Return: 45.44%
Sharpe Ratio: 1.47464
Sortino Ratio: 1.443
Max Drawdown: -59.7%
Avg Drawdown: -11.3%
Normalized Score: 0.159
Lookback periods: [150, 164, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 22m 30sRunning iteration 41/1500... Est. remaining: 20m 3sRunning iteration 51/1500... Est. remaining: 18m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,434,010,893
Annual Return: 47.71%
Sharpe Ratio: 1.53887
Sortino Ratio: 1.509
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.537
Lookback periods: [181, 190, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 18m 4sRunning iteration 71/1500... Est. remaining: 17m 10sRunning iteration 81/1500... Est. remaining: 16m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,168,869,461
Annual Return: 47.55%
Sharpe Ratio: 1.54160
Sortino Ratio: 1.512
Max Drawdown: -60.4%
Avg Drawdown: -11.2%
Normalized Score: 0.547
Lookback periods: [154, 168, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 16m 13sRunning iteration 101/1500... Est. remaining: 15m 45sbest_combination: {'lookbacks': [154, 168, 188], 'score': np.float64(0.5469503599064887), 'visits': 1}
Running iteration 111/1500... Est. remaining: 15m 21sRunning iteration 121/1500... Est. remaining: 15m 1sRunning iteration 131/1500... Est. remaining: 14m 41sRunning iteration 141/1500... Est. remaining: 14m 25sRunning iteration 151/1500... Est. remaining: 14m 9sRunning iteration 161/1500... Est. remaining: 13m 58sRunning iteration 171/1500... Est. remaining: 13m 46sRunning iteration 181/1500... Est. remaining: 13m 35sRunning iteration 191/1500... Est. remaining: 13m 22sRunning iteration 201/1500... Est. remaining: 13m 11sbest_combination: {'lookbacks': [154, 168, 188], 'score': np.float64(0.5469503599064887), 'visits': 1}
Running iteration 211/1500... Est. remaining: 13m 0sRunning iteration 221/1500... Est. remaining: 12m 51sRunning iteration 231/1500... Est. remaining: 12m 40sRunning iteration 241/1500... Est. remaining: 12m 30sRunning iteration 251/1500... Est. remaining: 12m 22sRunning iteration 261/1500... Est. remaining: 12m 13sRunning iteration 271/1500... Est. remaining: 12m 5sRunning iteration 281/1500... Est. remaining: 11m 57sRunning iteration 291/1500... Est. remaining: 11m 48sRunning iteration 301/1500... Est. remaining: 11m 40sbest_combination: {'lookbacks': [154, 168, 188], 'score': np.float64(0.5469503599064887), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 32sRunning iteration 321/1500... Est. remaining: 11m 25sRunning iteration 331/1500... Est. remaining: 11m 17sRunning iteration 341/1500... Est. remaining: 11m 10sRunning iteration 351/1500... Est. remaining: 11m 2sRunning iteration 361/1500... Est. remaining: 10m 55sRunning iteration 371/1500... Est. remaining: 10m 48sRunning iteration 381/1500... Est. remaining: 10m 41sRunning iteration 391/1500... Est. remaining: 10m 34sRunning iteration 401/1500... Est. remaining: 10m 27sbest_combination: {'lookbacks': [154, 168, 188], 'score': np.float64(0.5469503599064887), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,913,975,246
Annual Return: 46.74%
Sharpe Ratio: 1.51829
Sortino Ratio: 1.494
Max Drawdown: -59.0%
Avg Drawdown: -10.5%
Normalized Score: 0.558
Lookback periods: [158, 169, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 10m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,178,864,584
Annual Return: 48.11%
Sharpe Ratio: 1.57364
Sortino Ratio: 1.543
Max Drawdown: -59.0%
Avg Drawdown: -10.3%
Normalized Score: 0.873
Lookback periods: [159, 167, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 10m 24sRunning iteration 431/1500... Est. remaining: 10m 19sRunning iteration 441/1500... Est. remaining: 10m 13sRunning iteration 451/1500... Est. remaining: 10m 7sRunning iteration 461/1500... Est. remaining: 10m 0sRunning iteration 471/1500... Est. remaining: 9m 54sRunning iteration 481/1500... Est. remaining: 9m 47sRunning iteration 491/1500... Est. remaining: 9m 40sRunning iteration 501/1500... Est. remaining: 9m 34sbest_combination: {'lookbacks': [159, 167, 168], 'score': np.float64(0.8730490522046127), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 27sRunning iteration 521/1500... Est. remaining: 9m 22sRunning iteration 531/1500... Est. remaining: 9m 16sRunning iteration 541/1500... Est. remaining: 9m 10sRunning iteration 551/1500... Est. remaining: 9m 4sRunning iteration 561/1500... Est. remaining: 8m 59sRunning iteration 571/1500... Est. remaining: 8m 53sRunning iteration 581/1500... Est. remaining: 8m 46sRunning iteration 591/1500... Est. remaining: 8m 40sRunning iteration 601/1500... Est. remaining: 8m 34sbest_combination: {'lookbacks': [159, 167, 168], 'score': np.float64(0.8730490522046127), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 28sRunning iteration 621/1500... Est. remaining: 8m 22sRunning iteration 631/1500... Est. remaining: 8m 15sRunning iteration 641/1500... Est. remaining: 8m 9sRunning iteration 651/1500... Est. remaining: 8m 2sRunning iteration 661/1500... Est. remaining: 7m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,630,677,174
Annual Return: 49.24%
Sharpe Ratio: 1.60105
Sortino Ratio: 1.581
Max Drawdown: -59.0%
Avg Drawdown: -10.2%
Normalized Score: 1.085
Lookback periods: [158, 161, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 7m 52sRunning iteration 681/1500... Est. remaining: 7m 46sRunning iteration 691/1500... Est. remaining: 7m 39sRunning iteration 701/1500... Est. remaining: 7m 33sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.084692378380815), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 27sRunning iteration 721/1500... Est. remaining: 7m 21sRunning iteration 731/1500... Est. remaining: 7m 15sRunning iteration 741/1500... Est. remaining: 7m 9sRunning iteration 751/1500... Est. remaining: 7m 3sRunning iteration 761/1500... Est. remaining: 6m 57sRunning iteration 771/1500... Est. remaining: 6m 51sRunning iteration 781/1500... Est. remaining: 6m 45sRunning iteration 791/1500... Est. remaining: 6m 39sRunning iteration 801/1500... Est. remaining: 6m 33sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.084692378380815), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 27sRunning iteration 821/1500... Est. remaining: 6m 22sRunning iteration 831/1500... Est. remaining: 6m 16sRunning iteration 841/1500... Est. remaining: 6m 10sRunning iteration 851/1500... Est. remaining: 6m 4sRunning iteration 861/1500... Est. remaining: 5m 58sRunning iteration 871/1500... Est. remaining: 5m 53sRunning iteration 881/1500... Est. remaining: 5m 47sRunning iteration 891/1500... Est. remaining: 5m 41sRunning iteration 901/1500... Est. remaining: 5m 35sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.084692378380815), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 30sRunning iteration 921/1500... Est. remaining: 5m 24sRunning iteration 931/1500... Est. remaining: 5m 18sRunning iteration 941/1500... Est. remaining: 5m 13sRunning iteration 951/1500... Est. remaining: 5m 7sRunning iteration 961/1500... Est. remaining: 5m 1sRunning iteration 971/1500... Est. remaining: 4m 56sRunning iteration 981/1500... Est. remaining: 4m 50sRunning iteration 991/1500... Est. remaining: 4m 45sRunning iteration 1001/1500... Est. remaining: 4m 39sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.084692378380815), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 33sRunning iteration 1021/1500... Est. remaining: 4m 28sRunning iteration 1031/1500... Est. remaining: 4m 22sRunning iteration 1041/1500... Est. remaining: 4m 16sRunning iteration 1051/1500... Est. remaining: 4m 10sRunning iteration 1061/1500... Est. remaining: 4m 5sRunning iteration 1071/1500... Est. remaining: 3m 59sRunning iteration 1081/1500... Est. remaining: 3m 53sRunning iteration 1091/1500... Est. remaining: 3m 48sRunning iteration 1101/1500... Est. remaining: 3m 42sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.084692378380815), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 36sRunning iteration 1121/1500... Est. remaining: 3m 30sRunning iteration 1131/1500... Est. remaining: 3m 25sRunning iteration 1141/1500... Est. remaining: 3m 19sRunning iteration 1151/1500... Est. remaining: 3m 14sRunning iteration 1161/1500... Est. remaining: 3m 8sRunning iteration 1171/1500... Est. remaining: 3m 2sRunning iteration 1181/1500... Est. remaining: 2m 57sRunning iteration 1191/1500... Est. remaining: 2m 51sRunning iteration 1201/1500... Est. remaining: 2m 45sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.084692378380815), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 40sRunning iteration 1221/1500... Est. remaining: 2m 34sRunning iteration 1231/1500... Est. remaining: 2m 29sRunning iteration 1241/1500... Est. remaining: 2m 23sRunning iteration 1251/1500... Est. remaining: 2m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,061,853,103
Annual Return: 49.00%
Sharpe Ratio: 1.59141
Sortino Ratio: 1.560
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.099
Lookback periods: [156, 162, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1261/1500... Est. remaining: 2m 12sRunning iteration 1271/1500... Est. remaining: 2m 7sRunning iteration 1281/1500... Est. remaining: 2m 1sRunning iteration 1291/1500... Est. remaining: 1m 55sRunning iteration 1301/1500... Est. remaining: 1m 50sbest_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(1.0993306201184105), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 44sRunning iteration 1321/1500... Est. remaining: 1m 39sRunning iteration 1331/1500... Est. remaining: 1m 33sRunning iteration 1341/1500... Est. remaining: 1m 28sRunning iteration 1351/1500... Est. remaining: 1m 22sRunning iteration 1361/1500... Est. remaining: 1m 17sRunning iteration 1371/1500... Est. remaining: 1m 11sRunning iteration 1381/1500... Est. remaining: 1m 5sRunning iteration 1391/1500... Est. remaining: 1m 0sRunning iteration 1401/1500... Est. remaining: 0m 54sbest_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(1.0993306201184105), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 49sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 38sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 27sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.7 minutes
Best normalized score: 1.10
best_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(1.0993306201184105), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 162, 173] (score: 1.0993)

Monte Carlo simulation completed in 13.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 162, 173] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 107 selections (25.7%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 80 selections (19.2%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,061,853,102.69
Average Annualized Gain: 49.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Sun Aug 24 15:47:17 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $479,419,693
Annual Return: 36.47%
Sharpe Ratio: 1.26376
Sortino Ratio: 1.173
Max Drawdown: -52.3%
Avg Drawdown: -11.8%
Normalized Score: -1.187
Lookback periods: [71, 79, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,161,083,265
Annual Return: 40.00%
Sharpe Ratio: 1.33781
Sortino Ratio: 1.287
Max Drawdown: -64.8%
Avg Drawdown: -13.0%
Normalized Score: -1.184
Lookback periods: [112, 130, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $812,168,525
Annual Return: 38.57%
Sharpe Ratio: 1.33768
Sortino Ratio: 1.248
Max Drawdown: -52.3%
Avg Drawdown: -12.0%
Normalized Score: -0.812
Lookback periods: [70, 94, 107] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,453,146,392
Annual Return: 44.48%
Sharpe Ratio: 1.47009
Sortino Ratio: 1.418
Max Drawdown: -59.3%
Avg Drawdown: -12.0%
Normalized Score: -0.067
Lookback periods: [146, 151, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 34m 48sRunning iteration 21/1500... Est. remaining: 23m 47sRunning iteration 31/1500... Est. remaining: 20m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,522,526,031
Annual Return: 45.60%
Sharpe Ratio: 1.51275
Sortino Ratio: 1.463
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: 0.265
Lookback periods: [109, 137, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,920,710,441
Annual Return: 47.40%
Sharpe Ratio: 1.52856
Sortino Ratio: 1.500
Max Drawdown: -60.0%
Avg Drawdown: -11.7%
Normalized Score: 0.438
Lookback periods: [154, 187, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 18m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,796,869,314
Annual Return: 47.91%
Sharpe Ratio: 1.56068
Sortino Ratio: 1.532
Max Drawdown: -56.9%
Avg Drawdown: -10.7%
Normalized Score: 0.823
Lookback periods: [156, 158, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 17m 35sRunning iteration 71/1500... Est. remaining: 16m 42sRunning iteration 81/1500... Est. remaining: 16m 3sRunning iteration 91/1500... Est. remaining: 15m 32sRunning iteration 101/1500... Est. remaining: 15m 6sbest_combination: {'lookbacks': [156, 158, 163], 'score': np.float64(0.8230639402562892), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 44sRunning iteration 121/1500... Est. remaining: 14m 24sRunning iteration 131/1500... Est. remaining: 14m 7sRunning iteration 141/1500... Est. remaining: 13m 52sRunning iteration 151/1500... Est. remaining: 13m 37sRunning iteration 161/1500... Est. remaining: 13m 25sRunning iteration 171/1500... Est. remaining: 13m 13sRunning iteration 181/1500... Est. remaining: 13m 1sRunning iteration 191/1500... Est. remaining: 12m 50sRunning iteration 201/1500... Est. remaining: 12m 40sbest_combination: {'lookbacks': [156, 158, 163], 'score': np.float64(0.8230639402562892), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 31sRunning iteration 221/1500... Est. remaining: 12m 22sRunning iteration 231/1500... Est. remaining: 12m 13sRunning iteration 241/1500... Est. remaining: 12m 4sRunning iteration 251/1500... Est. remaining: 11m 56sRunning iteration 261/1500... Est. remaining: 11m 48sRunning iteration 271/1500... Est. remaining: 11m 40sRunning iteration 281/1500... Est. remaining: 11m 32sRunning iteration 291/1500... Est. remaining: 11m 25sRunning iteration 301/1500... Est. remaining: 11m 17sbest_combination: {'lookbacks': [156, 158, 163], 'score': np.float64(0.8230639402562892), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 10sRunning iteration 321/1500... Est. remaining: 11m 3sRunning iteration 331/1500... Est. remaining: 10m 55sRunning iteration 341/1500... Est. remaining: 10m 48sRunning iteration 351/1500... Est. remaining: 10m 42sRunning iteration 361/1500... Est. remaining: 10m 35sRunning iteration 371/1500... Est. remaining: 10m 28sRunning iteration 381/1500... Est. remaining: 10m 22sRunning iteration 391/1500... Est. remaining: 10m 15sRunning iteration 401/1500... Est. remaining: 10m 9sbest_combination: {'lookbacks': [156, 158, 163], 'score': np.float64(0.8230639402562892), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 2sRunning iteration 421/1500... Est. remaining: 9m 56sRunning iteration 431/1500... Est. remaining: 9m 50sRunning iteration 441/1500... Est. remaining: 9m 44sRunning iteration 451/1500... Est. remaining: 9m 37sRunning iteration 461/1500... Est. remaining: 9m 31sRunning iteration 471/1500... Est. remaining: 9m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,015,400,871
Annual Return: 48.53%
Sharpe Ratio: 1.58456
Sortino Ratio: 1.551
Max Drawdown: -59.0%
Avg Drawdown: -10.2%
Normalized Score: 0.940
Lookback periods: [158, 160, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 9m 22sRunning iteration 491/1500... Est. remaining: 9m 16sRunning iteration 501/1500... Est. remaining: 9m 10sbest_combination: {'lookbacks': [158, 160, 169], 'score': np.float64(0.9401177383047674), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 4sRunning iteration 521/1500... Est. remaining: 8m 58sRunning iteration 531/1500... Est. remaining: 8m 52sRunning iteration 541/1500... Est. remaining: 8m 46sRunning iteration 551/1500... Est. remaining: 8m 40sRunning iteration 561/1500... Est. remaining: 8m 34sRunning iteration 571/1500... Est. remaining: 8m 28sRunning iteration 581/1500... Est. remaining: 8m 22sRunning iteration 591/1500... Est. remaining: 8m 16sRunning iteration 601/1500... Est. remaining: 8m 10sbest_combination: {'lookbacks': [158, 160, 169], 'score': np.float64(0.9401177383047674), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 4sRunning iteration 621/1500... Est. remaining: 7m 59sRunning iteration 631/1500... Est. remaining: 7m 53sRunning iteration 641/1500... Est. remaining: 7m 47sRunning iteration 651/1500... Est. remaining: 7m 41sRunning iteration 661/1500... Est. remaining: 7m 35sRunning iteration 671/1500... Est. remaining: 7m 30sRunning iteration 681/1500... Est. remaining: 7m 24sRunning iteration 691/1500... Est. remaining: 7m 18sRunning iteration 701/1500... Est. remaining: 7m 13sbest_combination: {'lookbacks': [158, 160, 169], 'score': np.float64(0.9401177383047674), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 7sRunning iteration 721/1500... Est. remaining: 7m 1sRunning iteration 731/1500... Est. remaining: 6m 56sRunning iteration 741/1500... Est. remaining: 6m 50sRunning iteration 751/1500... Est. remaining: 6m 45sRunning iteration 761/1500... Est. remaining: 6m 39sRunning iteration 771/1500... Est. remaining: 6m 33sRunning iteration 781/1500... Est. remaining: 6m 28sRunning iteration 791/1500... Est. remaining: 6m 22sRunning iteration 801/1500... Est. remaining: 6m 17sbest_combination: {'lookbacks': [158, 160, 169], 'score': np.float64(0.9401177383047674), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 11sRunning iteration 821/1500... Est. remaining: 6m 6sRunning iteration 831/1500... Est. remaining: 6m 0sRunning iteration 841/1500... Est. remaining: 5m 55sRunning iteration 851/1500... Est. remaining: 5m 49sRunning iteration 861/1500... Est. remaining: 5m 44sRunning iteration 871/1500... Est. remaining: 5m 38sRunning iteration 881/1500... Est. remaining: 5m 33sRunning iteration 891/1500... Est. remaining: 5m 27sRunning iteration 901/1500... Est. remaining: 5m 22sbest_combination: {'lookbacks': [158, 160, 169], 'score': np.float64(0.9401177383047674), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 16sRunning iteration 921/1500... Est. remaining: 5m 11sRunning iteration 931/1500... Est. remaining: 5m 5sRunning iteration 941/1500... Est. remaining: 5m 0sRunning iteration 951/1500... Est. remaining: 4m 55sRunning iteration 961/1500... Est. remaining: 4m 49sRunning iteration 971/1500... Est. remaining: 4m 44sRunning iteration 981/1500... Est. remaining: 4m 38sRunning iteration 991/1500... Est. remaining: 4m 33sRunning iteration 1001/1500... Est. remaining: 4m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,243,559,328
Annual Return: 48.64%
Sharpe Ratio: 1.59199
Sortino Ratio: 1.559
Max Drawdown: -56.9%
Avg Drawdown: -10.6%
Normalized Score: 0.987
Lookback periods: [157, 160, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [157, 160, 167], 'score': np.float64(0.9865151482019886), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 23sRunning iteration 1021/1500... Est. remaining: 4m 18sRunning iteration 1031/1500... Est. remaining: 4m 12sRunning iteration 1041/1500... Est. remaining: 4m 7sRunning iteration 1051/1500... Est. remaining: 4m 1sRunning iteration 1061/1500... Est. remaining: 3m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,060,798,480
Annual Return: 48.55%
Sharpe Ratio: 1.58431
Sortino Ratio: 1.546
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.026
Lookback periods: [157, 160, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1071/1500... Est. remaining: 3m 51sRunning iteration 1081/1500... Est. remaining: 3m 46sRunning iteration 1091/1500... Est. remaining: 3m 40sRunning iteration 1101/1500... Est. remaining: 3m 35sbest_combination: {'lookbacks': [157, 160, 173], 'score': np.float64(1.0258374363650415), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 29sRunning iteration 1121/1500... Est. remaining: 3m 24sRunning iteration 1131/1500... Est. remaining: 3m 18sRunning iteration 1141/1500... Est. remaining: 3m 13sRunning iteration 1151/1500... Est. remaining: 3m 8sRunning iteration 1161/1500... Est. remaining: 3m 2sRunning iteration 1171/1500... Est. remaining: 2m 57sRunning iteration 1181/1500... Est. remaining: 2m 51sRunning iteration 1191/1500... Est. remaining: 2m 46sRunning iteration 1201/1500... Est. remaining: 2m 41sbest_combination: {'lookbacks': [157, 160, 173], 'score': np.float64(1.0258374363650415), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 35sRunning iteration 1221/1500... Est. remaining: 2m 30sRunning iteration 1231/1500... Est. remaining: 2m 24sRunning iteration 1241/1500... Est. remaining: 2m 19sRunning iteration 1251/1500... Est. remaining: 2m 14sRunning iteration 1261/1500... Est. remaining: 2m 8sRunning iteration 1271/1500... Est. remaining: 2m 3sRunning iteration 1281/1500... Est. remaining: 1m 57sRunning iteration 1291/1500... Est. remaining: 1m 52sRunning iteration 1301/1500... Est. remaining: 1m 47sbest_combination: {'lookbacks': [157, 160, 173], 'score': np.float64(1.0258374363650415), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,200,500,645
Annual Return: 48.62%
Sharpe Ratio: 1.58301
Sortino Ratio: 1.548
Max Drawdown: -55.0%
Avg Drawdown: -10.4%
Normalized Score: 1.052
Lookback periods: [157, 161, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1311/1500... Est. remaining: 1m 42sRunning iteration 1321/1500... Est. remaining: 1m 36sRunning iteration 1331/1500... Est. remaining: 1m 31sRunning iteration 1341/1500... Est. remaining: 1m 25sRunning iteration 1351/1500... Est. remaining: 1m 20sRunning iteration 1361/1500... Est. remaining: 1m 15sRunning iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 4sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [157, 161, 173], 'score': np.float64(1.0523116505941892), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,663,430,237
Annual Return: 48.83%
Sharpe Ratio: 1.58620
Sortino Ratio: 1.559
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 1.062
Lookback periods: [156, 162, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.4 minutes
Best normalized score: 1.06
best_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 162, 172] (score: 1.0619)

Monte Carlo simulation completed in 13.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 162, 172] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 34 selections (8.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,663,430,237.43
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Sun Aug 24 16:00:51 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-24T16:00:52.240890
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.0718
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,352,499,771
Annual Return: 40.62%
Sharpe Ratio: 1.36767
Sortino Ratio: 1.303
Max Drawdown: -65.4%
Avg Drawdown: -12.8%
Normalized Score: -1.060
Lookback periods: [96, 169, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,622,626,914
Annual Return: 41.36%
Sharpe Ratio: 1.37720
Sortino Ratio: 1.323
Max Drawdown: -63.7%
Avg Drawdown: -12.1%
Normalized Score: -0.782
Lookback periods: [117, 194, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,666,127,163
Annual Return: 41.47%
Sharpe Ratio: 1.38805
Sortino Ratio: 1.335
Max Drawdown: -58.7%
Avg Drawdown: -13.3%
Normalized Score: -0.755
Lookback periods: [112, 129, 137] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,591,526,195
Annual Return: 43.28%
Sharpe Ratio: 1.43592
Sortino Ratio: 1.392
Max Drawdown: -64.2%
Avg Drawdown: -12.3%
Normalized Score: -0.468
Lookback periods: [107, 180, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,737,725,505
Annual Return: 44.81%
Sharpe Ratio: 1.45870
Sortino Ratio: 1.417
Max Drawdown: -60.0%
Avg Drawdown: -12.5%
Normalized Score: -0.137
Lookback periods: [139, 187, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,035,099,668
Annual Return: 46.82%
Sharpe Ratio: 1.51062
Sortino Ratio: 1.485
Max Drawdown: -64.0%
Avg Drawdown: -12.0%
Normalized Score: 0.150
Lookback periods: [155, 184, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 21m 44sRunning iteration 41/1500... Est. remaining: 19m 23sRunning iteration 51/1500... Est. remaining: 17m 54sRunning iteration 61/1500... Est. remaining: 16m 54sRunning iteration 71/1500... Est. remaining: 16m 7sRunning iteration 81/1500... Est. remaining: 15m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,066,392,773
Annual Return: 46.84%
Sharpe Ratio: 1.51665
Sortino Ratio: 1.475
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.363
Lookback periods: [178, 186, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 15m 21sRunning iteration 101/1500... Est. remaining: 14m 57sbest_combination: {'lookbacks': [158, 162, 168], 'score': np.float64(1.071844783041098), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 36sRunning iteration 121/1500... Est. remaining: 14m 17sRunning iteration 131/1500... Est. remaining: 13m 59sRunning iteration 141/1500... Est. remaining: 13m 44sRunning iteration 151/1500... Est. remaining: 13m 30sRunning iteration 161/1500... Est. remaining: 13m 18sRunning iteration 171/1500... Est. remaining: 13m 8sRunning iteration 181/1500... Est. remaining: 12m 58sRunning iteration 191/1500... Est. remaining: 12m 48sRunning iteration 201/1500... Est. remaining: 12m 38sbest_combination: {'lookbacks': [158, 162, 168], 'score': np.float64(1.071844783041098), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 30sRunning iteration 221/1500... Est. remaining: 12m 21sRunning iteration 231/1500... Est. remaining: 12m 13sRunning iteration 241/1500... Est. remaining: 12m 5sRunning iteration 251/1500... Est. remaining: 11m 57sRunning iteration 261/1500... Est. remaining: 11m 48sRunning iteration 271/1500... Est. remaining: 11m 40sRunning iteration 281/1500... Est. remaining: 11m 33sRunning iteration 291/1500... Est. remaining: 11m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,867,842,330
Annual Return: 47.37%
Sharpe Ratio: 1.53714
Sortino Ratio: 1.509
Max Drawdown: -61.4%
Avg Drawdown: -11.5%
Normalized Score: 0.440
Lookback periods: [154, 172, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 301/1500... Est. remaining: 11m 23sbest_combination: {'lookbacks': [158, 162, 168], 'score': np.float64(1.071844783041098), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 16sRunning iteration 321/1500... Est. remaining: 11m 9sRunning iteration 331/1500... Est. remaining: 11m 1sRunning iteration 341/1500... Est. remaining: 10m 54sRunning iteration 351/1500... Est. remaining: 10m 48sRunning iteration 361/1500... Est. remaining: 10m 41sRunning iteration 371/1500... Est. remaining: 10m 34sRunning iteration 381/1500... Est. remaining: 10m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,911,591,677
Annual Return: 47.40%
Sharpe Ratio: 1.53853
Sortino Ratio: 1.514
Max Drawdown: -59.0%
Avg Drawdown: -10.7%
Normalized Score: 0.645
Lookback periods: [158, 174, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 10m 24sRunning iteration 401/1500... Est. remaining: 10m 17sbest_combination: {'lookbacks': [158, 162, 168], 'score': np.float64(1.071844783041098), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 11sRunning iteration 421/1500... Est. remaining: 10m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,790,180,617
Annual Return: 47.91%
Sharpe Ratio: 1.56458
Sortino Ratio: 1.533
Max Drawdown: -59.7%
Avg Drawdown: -11.1%
Normalized Score: 0.669
Lookback periods: [151, 159, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 10m 5sRunning iteration 441/1500... Est. remaining: 9m 59sRunning iteration 451/1500... Est. remaining: 9m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,337,242,337
Annual Return: 49.12%
Sharpe Ratio: 1.60218
Sortino Ratio: 1.557
Max Drawdown: -59.0%
Avg Drawdown: -10.1%
Normalized Score: 1.048
Lookback periods: [156, 158, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 9m 50sRunning iteration 471/1500... Est. remaining: 9m 44sRunning iteration 481/1500... Est. remaining: 9m 38sRunning iteration 491/1500... Est. remaining: 9m 32sRunning iteration 501/1500... Est. remaining: 9m 25sbest_combination: {'lookbacks': [158, 162, 168], 'score': np.float64(1.071844783041098), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 19sRunning iteration 521/1500... Est. remaining: 9m 14sRunning iteration 531/1500... Est. remaining: 9m 8sRunning iteration 541/1500... Est. remaining: 9m 2sRunning iteration 551/1500... Est. remaining: 8m 56sRunning iteration 561/1500... Est. remaining: 8m 50sRunning iteration 571/1500... Est. remaining: 8m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,630,677,174
Annual Return: 49.24%
Sharpe Ratio: 1.60105
Sortino Ratio: 1.581
Max Drawdown: -59.0%
Avg Drawdown: -10.2%
Normalized Score: 1.085
Lookback periods: [158, 161, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 8m 40sRunning iteration 591/1500... Est. remaining: 8m 34sRunning iteration 601/1500... Est. remaining: 8m 28sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.084692378380815), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 21sRunning iteration 621/1500... Est. remaining: 8m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,509,307,835
Annual Return: 48.76%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.563
Max Drawdown: -55.0%
Avg Drawdown: -10.3%
Normalized Score: 1.113
Lookback periods: [157, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 8m 12sRunning iteration 641/1500... Est. remaining: 8m 6sRunning iteration 651/1500... Est. remaining: 8m 0sRunning iteration 661/1500... Est. remaining: 7m 54sRunning iteration 671/1500... Est. remaining: 7m 48sRunning iteration 681/1500... Est. remaining: 7m 42sRunning iteration 691/1500... Est. remaining: 7m 37sRunning iteration 701/1500... Est. remaining: 7m 31sbest_combination: {'lookbacks': [157, 161, 168], 'score': np.float64(1.1130867051777076), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 25sRunning iteration 721/1500... Est. remaining: 7m 19sRunning iteration 731/1500... Est. remaining: 7m 13sRunning iteration 741/1500... Est. remaining: 7m 7sRunning iteration 751/1500... Est. remaining: 7m 1sRunning iteration 761/1500... Est. remaining: 6m 56sRunning iteration 771/1500... Est. remaining: 6m 50sRunning iteration 781/1500... Est. remaining: 6m 44sRunning iteration 791/1500... Est. remaining: 6m 38sRunning iteration 801/1500... Est. remaining: 6m 33sbest_combination: {'lookbacks': [157, 161, 168], 'score': np.float64(1.1130867051777076), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 27sRunning iteration 821/1500... Est. remaining: 6m 21sRunning iteration 831/1500... Est. remaining: 6m 16sRunning iteration 841/1500... Est. remaining: 6m 10sRunning iteration 851/1500... Est. remaining: 6m 5sRunning iteration 861/1500... Est. remaining: 5m 59sRunning iteration 871/1500... Est. remaining: 5m 53sRunning iteration 881/1500... Est. remaining: 5m 47sRunning iteration 891/1500... Est. remaining: 5m 41sRunning iteration 901/1500... Est. remaining: 5m 35sbest_combination: {'lookbacks': [157, 161, 168], 'score': np.float64(1.1130867051777076), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 29sRunning iteration 921/1500... Est. remaining: 5m 24sRunning iteration 931/1500... Est. remaining: 5m 18sRunning iteration 941/1500... Est. remaining: 5m 12sRunning iteration 951/1500... Est. remaining: 5m 6sRunning iteration 961/1500... Est. remaining: 5m 1sRunning iteration 971/1500... Est. remaining: 4m 55sRunning iteration 981/1500... Est. remaining: 4m 49sRunning iteration 991/1500... Est. remaining: 4m 42sRunning iteration 1001/1500... Est. remaining: 4m 36sbest_combination: {'lookbacks': [157, 161, 168], 'score': np.float64(1.1130867051777076), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 29sRunning iteration 1021/1500... Est. remaining: 4m 23sRunning iteration 1031/1500... Est. remaining: 4m 16sRunning iteration 1041/1500... Est. remaining: 4m 10sRunning iteration 1051/1500... Est. remaining: 4m 3sRunning iteration 1061/1500... Est. remaining: 3m 57sRunning iteration 1071/1500... Est. remaining: 3m 51sRunning iteration 1081/1500... Est. remaining: 3m 44sRunning iteration 1091/1500... Est. remaining: 3m 38sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [157, 161, 168], 'score': np.float64(1.1130867051777076), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 26sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [157, 161, 168], 'score': np.float64(1.1130867051777076), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 23sRunning iteration 1231/1500... Est. remaining: 2m 18sRunning iteration 1241/1500... Est. remaining: 2m 12sRunning iteration 1251/1500... Est. remaining: 2m 7sRunning iteration 1261/1500... Est. remaining: 2m 2sRunning iteration 1271/1500... Est. remaining: 1m 57sRunning iteration 1281/1500... Est. remaining: 1m 51sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [157, 161, 168], 'score': np.float64(1.1130867051777076), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [157, 161, 168], 'score': np.float64(1.1130867051777076), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.0 minutes
Best normalized score: 1.11
best_combination: {'lookbacks': [157, 161, 168], 'score': np.float64(1.1130867051777076), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [157, 161, 168] (score: 1.1131)

Monte Carlo simulation completed in 12.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [157, 161, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 117 selections (28.1%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,509,307,834.85
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Sun Aug 24 16:13:01 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,341,365,623
Annual Return: 40.59%
Sharpe Ratio: 1.36601
Sortino Ratio: 1.308
Max Drawdown: -61.7%
Avg Drawdown: -13.0%
Normalized Score: -0.957
Lookback periods: [108, 110, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,455,718,586
Annual Return: 40.92%
Sharpe Ratio: 1.37548
Sortino Ratio: 1.305
Max Drawdown: -59.6%
Avg Drawdown: -13.7%
Normalized Score: -0.956
Lookback periods: [85, 136, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $756,064,691
Annual Return: 38.28%
Sharpe Ratio: 1.32033
Sortino Ratio: 1.227
Max Drawdown: -55.0%
Avg Drawdown: -11.4%
Normalized Score: -0.892
Lookback periods: [53, 117, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,850,833,720
Annual Return: 41.90%
Sharpe Ratio: 1.43971
Sortino Ratio: 1.362
Max Drawdown: -52.3%
Avg Drawdown: -11.4%
Normalized Score: -0.112
Lookback periods: [89, 95, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 29sRunning iteration 21/1500... Est. remaining: 16m 15sRunning iteration 31/1500... Est. remaining: 13m 28sRunning iteration 41/1500... Est. remaining: 12m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,720,183,321
Annual Return: 45.78%
Sharpe Ratio: 1.50682
Sortino Ratio: 1.459
Max Drawdown: -58.1%
Avg Drawdown: -12.9%
Normalized Score: 0.073
Lookback periods: [140, 150, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 11m 33sRunning iteration 61/1500... Est. remaining: 10m 51sRunning iteration 71/1500... Est. remaining: 10m 15sRunning iteration 81/1500... Est. remaining: 9m 49sRunning iteration 91/1500... Est. remaining: 9m 28sRunning iteration 101/1500... Est. remaining: 9m 14sbest_combination: {'lookbacks': [140, 150, 181], 'score': np.float64(0.07272724762705152), 'visits': 1}
Running iteration 111/1500... Est. remaining: 9m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,530,506,399
Annual Return: 43.18%
Sharpe Ratio: 1.47374
Sortino Ratio: 1.408
Max Drawdown: -52.3%
Avg Drawdown: -10.8%
Normalized Score: 0.216
Lookback periods: [90, 127, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 9m 0sRunning iteration 131/1500... Est. remaining: 8m 49sRunning iteration 141/1500... Est. remaining: 8m 40sRunning iteration 151/1500... Est. remaining: 8m 31sRunning iteration 161/1500... Est. remaining: 8m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,951,188,424
Annual Return: 45.98%
Sharpe Ratio: 1.49881
Sortino Ratio: 1.467
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.278
Lookback periods: [157, 177, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 8m 22sRunning iteration 181/1500... Est. remaining: 8m 15sRunning iteration 191/1500... Est. remaining: 8m 8sRunning iteration 201/1500... Est. remaining: 8m 1sbest_combination: {'lookbacks': [157, 177, 197], 'score': np.float64(0.2783830142451617), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 55sRunning iteration 221/1500... Est. remaining: 7m 49sRunning iteration 231/1500... Est. remaining: 7m 44sRunning iteration 241/1500... Est. remaining: 7m 38sRunning iteration 251/1500... Est. remaining: 7m 33sRunning iteration 261/1500... Est. remaining: 7m 27sRunning iteration 271/1500... Est. remaining: 7m 22sRunning iteration 281/1500... Est. remaining: 7m 17sRunning iteration 291/1500... Est. remaining: 7m 12sRunning iteration 301/1500... Est. remaining: 7m 8sbest_combination: {'lookbacks': [157, 177, 197], 'score': np.float64(0.2783830142451617), 'visits': 1}
Running iteration 311/1500... Est. remaining: 7m 3sRunning iteration 321/1500... Est. remaining: 6m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,462,168,947
Annual Return: 45.55%
Sharpe Ratio: 1.49376
Sortino Ratio: 1.460
Max Drawdown: -55.0%
Avg Drawdown: -11.3%
Normalized Score: 0.376
Lookback periods: [146, 163, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 331/1500... Est. remaining: 6m 57sRunning iteration 341/1500... Est. remaining: 6m 53sRunning iteration 351/1500... Est. remaining: 6m 48sRunning iteration 361/1500... Est. remaining: 6m 44sRunning iteration 371/1500... Est. remaining: 6m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,071,427,791
Annual Return: 48.06%
Sharpe Ratio: 1.54870
Sortino Ratio: 1.518
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.687
Lookback periods: [176, 189, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 6m 38sRunning iteration 391/1500... Est. remaining: 6m 34sRunning iteration 401/1500... Est. remaining: 6m 29sbest_combination: {'lookbacks': [176, 189, 193], 'score': np.float64(0.6870737458427938), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 25sRunning iteration 421/1500... Est. remaining: 6m 21sRunning iteration 431/1500... Est. remaining: 6m 17sRunning iteration 441/1500... Est. remaining: 6m 13sRunning iteration 451/1500... Est. remaining: 6m 9sRunning iteration 461/1500... Est. remaining: 6m 5sRunning iteration 471/1500... Est. remaining: 6m 0sRunning iteration 481/1500... Est. remaining: 5m 56sRunning iteration 491/1500... Est. remaining: 5m 53sRunning iteration 501/1500... Est. remaining: 5m 49sbest_combination: {'lookbacks': [176, 189, 193], 'score': np.float64(0.6870737458427938), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 45sRunning iteration 521/1500... Est. remaining: 5m 41sRunning iteration 531/1500... Est. remaining: 5m 37sRunning iteration 541/1500... Est. remaining: 5m 33sRunning iteration 551/1500... Est. remaining: 5m 30sRunning iteration 561/1500... Est. remaining: 5m 26sRunning iteration 571/1500... Est. remaining: 5m 22sRunning iteration 581/1500... Est. remaining: 5m 18sRunning iteration 591/1500... Est. remaining: 5m 15sRunning iteration 601/1500... Est. remaining: 5m 11sbest_combination: {'lookbacks': [176, 189, 193], 'score': np.float64(0.6870737458427938), 'visits': 1}
Running iteration 611/1500... Est. remaining: 5m 7sRunning iteration 621/1500... Est. remaining: 5m 3sRunning iteration 631/1500... Est. remaining: 4m 59sRunning iteration 641/1500... Est. remaining: 4m 55sRunning iteration 651/1500... Est. remaining: 4m 52sRunning iteration 661/1500... Est. remaining: 4m 48sRunning iteration 671/1500... Est. remaining: 4m 45sRunning iteration 681/1500... Est. remaining: 4m 41sRunning iteration 691/1500... Est. remaining: 4m 38sRunning iteration 701/1500... Est. remaining: 4m 34sbest_combination: {'lookbacks': [176, 189, 193], 'score': np.float64(0.6870737458427938), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 31sRunning iteration 721/1500... Est. remaining: 4m 27sRunning iteration 731/1500... Est. remaining: 4m 24sRunning iteration 741/1500... Est. remaining: 4m 20sRunning iteration 751/1500... Est. remaining: 4m 17sRunning iteration 761/1500... Est. remaining: 4m 13sRunning iteration 771/1500... Est. remaining: 4m 10sRunning iteration 781/1500... Est. remaining: 4m 6sRunning iteration 791/1500... Est. remaining: 4m 3sRunning iteration 801/1500... Est. remaining: 3m 59sbest_combination: {'lookbacks': [176, 189, 193], 'score': np.float64(0.6870737458427938), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 56sRunning iteration 821/1500... Est. remaining: 3m 52sRunning iteration 831/1500... Est. remaining: 3m 49sRunning iteration 841/1500... Est. remaining: 3m 45sRunning iteration 851/1500... Est. remaining: 3m 42sRunning iteration 861/1500... Est. remaining: 3m 39sRunning iteration 871/1500... Est. remaining: 3m 35sRunning iteration 881/1500... Est. remaining: 3m 32sRunning iteration 891/1500... Est. remaining: 3m 28sRunning iteration 901/1500... Est. remaining: 3m 25sbest_combination: {'lookbacks': [176, 189, 193], 'score': np.float64(0.6870737458427938), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 21sRunning iteration 921/1500... Est. remaining: 3m 18sRunning iteration 931/1500... Est. remaining: 3m 14sRunning iteration 941/1500... Est. remaining: 3m 11sRunning iteration 951/1500... Est. remaining: 3m 7sRunning iteration 961/1500... Est. remaining: 3m 4sRunning iteration 971/1500... Est. remaining: 3m 0sRunning iteration 981/1500... Est. remaining: 2m 57sRunning iteration 991/1500... Est. remaining: 2m 54sRunning iteration 1001/1500... Est. remaining: 2m 50sbest_combination: {'lookbacks': [176, 189, 193], 'score': np.float64(0.6870737458427938), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,032,085,107
Annual Return: 48.99%
Sharpe Ratio: 1.56848
Sortino Ratio: 1.539
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.803
Lookback periods: [176, 188, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1021/1500... Est. remaining: 2m 44sRunning iteration 1031/1500... Est. remaining: 2m 40sRunning iteration 1041/1500... Est. remaining: 2m 37sRunning iteration 1051/1500... Est. remaining: 2m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,220,725,670
Annual Return: 49.84%
Sharpe Ratio: 1.59652
Sortino Ratio: 1.574
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.999
Lookback periods: [176, 188, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1061/1500... Est. remaining: 2m 30sRunning iteration 1071/1500... Est. remaining: 2m 27sRunning iteration 1081/1500... Est. remaining: 2m 23sRunning iteration 1091/1500... Est. remaining: 2m 20sRunning iteration 1101/1500... Est. remaining: 2m 16sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(0.9991920047779281), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 13sRunning iteration 1121/1500... Est. remaining: 2m 9sRunning iteration 1131/1500... Est. remaining: 2m 6sRunning iteration 1141/1500... Est. remaining: 2m 3sRunning iteration 1151/1500... Est. remaining: 1m 59sRunning iteration 1161/1500... Est. remaining: 1m 56sRunning iteration 1171/1500... Est. remaining: 1m 52sRunning iteration 1181/1500... Est. remaining: 1m 49sRunning iteration 1191/1500... Est. remaining: 1m 45sRunning iteration 1201/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(0.9991920047779281), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 38sRunning iteration 1221/1500... Est. remaining: 1m 35sRunning iteration 1231/1500... Est. remaining: 1m 32sRunning iteration 1241/1500... Est. remaining: 1m 28sRunning iteration 1251/1500... Est. remaining: 1m 25sRunning iteration 1261/1500... Est. remaining: 1m 21sRunning iteration 1271/1500... Est. remaining: 1m 18sRunning iteration 1281/1500... Est. remaining: 1m 14sRunning iteration 1291/1500... Est. remaining: 1m 11sRunning iteration 1301/1500... Est. remaining: 1m 8sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(0.9991920047779281), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 4sRunning iteration 1321/1500... Est. remaining: 1m 1sRunning iteration 1331/1500... Est. remaining: 0m 57sRunning iteration 1341/1500... Est. remaining: 0m 54sRunning iteration 1351/1500... Est. remaining: 0m 51sRunning iteration 1361/1500... Est. remaining: 0m 47sRunning iteration 1371/1500... Est. remaining: 0m 44sRunning iteration 1381/1500... Est. remaining: 0m 40sRunning iteration 1391/1500... Est. remaining: 0m 37sRunning iteration 1401/1500... Est. remaining: 0m 33sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(0.9991920047779281), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 30sRunning iteration 1421/1500... Est. remaining: 0m 27sRunning iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 20sRunning iteration 1451/1500... Est. remaining: 0m 16sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 10sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.5 minutes
Best normalized score: 1.00
best_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(0.9991920047779281), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [176, 188, 197] (score: 0.9992)

Monte Carlo simulation completed in 8.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 188, 197] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 121 selections (29.1%)
2. sp500_hma: 104 selections (25.0%)
3. naz100_pine: 86 selections (20.7%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,220,725,670.23
Average Annualized Gain: 49.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Sun Aug 24 16:21:37 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $360,478,728
Annual Return: 35.36%
Sharpe Ratio: 1.20941
Sortino Ratio: 1.127
Max Drawdown: -73.7%
Avg Drawdown: -14.2%
Normalized Score: -2.502
Lookback periods: [63, 137, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $375,654,805
Annual Return: 35.52%
Sharpe Ratio: 1.22310
Sortino Ratio: 1.138
Max Drawdown: -55.0%
Avg Drawdown: -13.5%
Normalized Score: -1.716
Lookback periods: [76, 133, 140] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,989,800,651
Annual Return: 43.88%
Sharpe Ratio: 1.43443
Sortino Ratio: 1.392
Max Drawdown: -59.2%
Avg Drawdown: -12.7%
Normalized Score: -0.306
Lookback periods: [148, 162, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 22m 14sRunning iteration 21/1500... Est. remaining: 15m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,594,560,249
Annual Return: 44.64%
Sharpe Ratio: 1.51748
Sortino Ratio: 1.448
Max Drawdown: -52.3%
Avg Drawdown: -10.8%
Normalized Score: 0.465
Lookback periods: [87, 109, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 13m 21sRunning iteration 41/1500... Est. remaining: 11m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,854,839,929
Annual Return: 47.94%
Sharpe Ratio: 1.55746
Sortino Ratio: 1.529
Max Drawdown: -56.9%
Avg Drawdown: -10.8%
Normalized Score: 0.807
Lookback periods: [156, 161, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 11m 27sRunning iteration 61/1500... Est. remaining: 10m 39sRunning iteration 71/1500... Est. remaining: 10m 4sRunning iteration 81/1500... Est. remaining: 9m 39sRunning iteration 91/1500... Est. remaining: 9m 21sRunning iteration 101/1500... Est. remaining: 9m 7sbest_combination: {'lookbacks': [156, 161, 164], 'score': np.float64(0.8066114280735759), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 55sRunning iteration 121/1500... Est. remaining: 8m 44sRunning iteration 131/1500... Est. remaining: 8m 35sRunning iteration 141/1500... Est. remaining: 8m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,852,389,158
Annual Return: 41.90%
Sharpe Ratio: 1.48900
Sortino Ratio: 1.397
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.884
Lookback periods: [51, 53, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 8m 26sRunning iteration 161/1500... Est. remaining: 8m 19sRunning iteration 171/1500... Est. remaining: 8m 12sRunning iteration 181/1500... Est. remaining: 8m 5sRunning iteration 191/1500... Est. remaining: 7m 58sRunning iteration 201/1500... Est. remaining: 7m 52sbest_combination: {'lookbacks': [51, 53, 99], 'score': np.float64(0.8843077106249823), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 46sRunning iteration 221/1500... Est. remaining: 7m 41sRunning iteration 231/1500... Est. remaining: 7m 36sRunning iteration 241/1500... Est. remaining: 7m 30sRunning iteration 251/1500... Est. remaining: 7m 25sRunning iteration 261/1500... Est. remaining: 7m 20sRunning iteration 271/1500... Est. remaining: 7m 16sRunning iteration 281/1500... Est. remaining: 7m 11sRunning iteration 291/1500... Est. remaining: 7m 6sRunning iteration 301/1500... Est. remaining: 7m 2sbest_combination: {'lookbacks': [51, 53, 99], 'score': np.float64(0.8843077106249823), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 57sRunning iteration 321/1500... Est. remaining: 6m 53sRunning iteration 331/1500... Est. remaining: 6m 48sRunning iteration 341/1500... Est. remaining: 6m 44sRunning iteration 351/1500... Est. remaining: 6m 40sRunning iteration 361/1500... Est. remaining: 6m 36sRunning iteration 371/1500... Est. remaining: 6m 32sRunning iteration 381/1500... Est. remaining: 6m 28sRunning iteration 391/1500... Est. remaining: 6m 24sRunning iteration 401/1500... Est. remaining: 6m 20sbest_combination: {'lookbacks': [51, 53, 99], 'score': np.float64(0.8843077106249823), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,007,877,612
Annual Return: 42.23%
Sharpe Ratio: 1.48928
Sortino Ratio: 1.411
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.058
Lookback periods: [50, 50, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 6m 14sRunning iteration 431/1500... Est. remaining: 6m 10sRunning iteration 441/1500... Est. remaining: 6m 6sRunning iteration 451/1500... Est. remaining: 6m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,247,532,043
Annual Return: 44.22%
Sharpe Ratio: 1.60550
Sortino Ratio: 1.504
Max Drawdown: -34.7%
Avg Drawdown: -8.1%
Normalized Score: 1.606
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 6m 0sRunning iteration 471/1500... Est. remaining: 5m 56sRunning iteration 481/1500... Est. remaining: 5m 53sRunning iteration 491/1500... Est. remaining: 5m 49sRunning iteration 501/1500... Est. remaining: 5m 45sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.6059420791352597), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 41sRunning iteration 521/1500... Est. remaining: 5m 38sRunning iteration 531/1500... Est. remaining: 5m 34sRunning iteration 541/1500... Est. remaining: 5m 30sRunning iteration 551/1500... Est. remaining: 5m 26sRunning iteration 561/1500... Est. remaining: 5m 22sRunning iteration 571/1500... Est. remaining: 5m 19sRunning iteration 581/1500... Est. remaining: 5m 15sRunning iteration 591/1500... Est. remaining: 5m 11sRunning iteration 601/1500... Est. remaining: 5m 7sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.6059420791352597), 'visits': 1}
Running iteration 611/1500... Est. remaining: 5m 3sRunning iteration 621/1500... Est. remaining: 4m 59sRunning iteration 631/1500... Est. remaining: 4m 56sRunning iteration 641/1500... Est. remaining: 4m 52sRunning iteration 651/1500... Est. remaining: 4m 49sRunning iteration 661/1500... Est. remaining: 4m 45sRunning iteration 671/1500... Est. remaining: 4m 42sRunning iteration 681/1500... Est. remaining: 4m 38sRunning iteration 691/1500... Est. remaining: 4m 35sRunning iteration 701/1500... Est. remaining: 4m 31sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.6059420791352597), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 27sRunning iteration 721/1500... Est. remaining: 4m 24sRunning iteration 731/1500... Est. remaining: 4m 20sRunning iteration 741/1500... Est. remaining: 4m 17sRunning iteration 751/1500... Est. remaining: 4m 13sRunning iteration 761/1500... Est. remaining: 4m 10sRunning iteration 771/1500... Est. remaining: 4m 6sRunning iteration 781/1500... Est. remaining: 4m 3sRunning iteration 791/1500... Est. remaining: 3m 59sRunning iteration 801/1500... Est. remaining: 3m 56sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.6059420791352597), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 52sRunning iteration 821/1500... Est. remaining: 3m 49sRunning iteration 831/1500... Est. remaining: 3m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,912,007
Annual Return: 45.27%
Sharpe Ratio: 1.61355
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.670
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 841/1500... Est. remaining: 3m 43sRunning iteration 851/1500... Est. remaining: 3m 39sRunning iteration 861/1500... Est. remaining: 3m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.046
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 871/1500... Est. remaining: 3m 33sRunning iteration 881/1500... Est. remaining: 3m 30sRunning iteration 891/1500... Est. remaining: 3m 26sRunning iteration 901/1500... Est. remaining: 3m 23sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 19sRunning iteration 921/1500... Est. remaining: 3m 16sRunning iteration 931/1500... Est. remaining: 3m 12sRunning iteration 941/1500... Est. remaining: 3m 9sRunning iteration 951/1500... Est. remaining: 3m 5sRunning iteration 961/1500... Est. remaining: 3m 2sRunning iteration 971/1500... Est. remaining: 2m 58sRunning iteration 981/1500... Est. remaining: 2m 55sRunning iteration 991/1500... Est. remaining: 2m 51sRunning iteration 1001/1500... Est. remaining: 2m 48sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 45sRunning iteration 1021/1500... Est. remaining: 2m 41sRunning iteration 1031/1500... Est. remaining: 2m 38sRunning iteration 1041/1500... Est. remaining: 2m 34sRunning iteration 1051/1500... Est. remaining: 2m 31sRunning iteration 1061/1500... Est. remaining: 2m 28sRunning iteration 1071/1500... Est. remaining: 2m 24sRunning iteration 1081/1500... Est. remaining: 2m 21sRunning iteration 1091/1500... Est. remaining: 2m 17sRunning iteration 1101/1500... Est. remaining: 2m 14sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 11sRunning iteration 1121/1500... Est. remaining: 2m 7sRunning iteration 1131/1500... Est. remaining: 2m 4sRunning iteration 1141/1500... Est. remaining: 2m 0sRunning iteration 1151/1500... Est. remaining: 1m 57sRunning iteration 1161/1500... Est. remaining: 1m 54sRunning iteration 1171/1500... Est. remaining: 1m 50sRunning iteration 1181/1500... Est. remaining: 1m 47sRunning iteration 1191/1500... Est. remaining: 1m 43sRunning iteration 1201/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 37sRunning iteration 1221/1500... Est. remaining: 1m 33sRunning iteration 1231/1500... Est. remaining: 1m 30sRunning iteration 1241/1500... Est. remaining: 1m 27sRunning iteration 1251/1500... Est. remaining: 1m 23sRunning iteration 1261/1500... Est. remaining: 1m 20sRunning iteration 1271/1500... Est. remaining: 1m 16sRunning iteration 1281/1500... Est. remaining: 1m 13sRunning iteration 1291/1500... Est. remaining: 1m 10sRunning iteration 1301/1500... Est. remaining: 1m 6sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 3sRunning iteration 1321/1500... Est. remaining: 1m 0sRunning iteration 1331/1500... Est. remaining: 0m 56sRunning iteration 1341/1500... Est. remaining: 0m 53sRunning iteration 1351/1500... Est. remaining: 0m 50sRunning iteration 1361/1500... Est. remaining: 0m 46sRunning iteration 1371/1500... Est. remaining: 0m 43sRunning iteration 1381/1500... Est. remaining: 0m 40sRunning iteration 1391/1500... Est. remaining: 0m 36sRunning iteration 1401/1500... Est. remaining: 0m 33sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 30sRunning iteration 1421/1500... Est. remaining: 0m 26sRunning iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 20sRunning iteration 1451/1500... Est. remaining: 0m 16sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 10sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.3 minutes
Best normalized score: 2.05
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.0463)

Monte Carlo simulation completed in 8.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Sun Aug 24 16:30:05 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,729,853,578
Annual Return: 44.80%
Sharpe Ratio: 1.46188
Sortino Ratio: 1.430
Max Drawdown: -61.4%
Avg Drawdown: -11.7%
Normalized Score: -0.039
Lookback periods: [155, 169, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 19m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,367,419,031
Annual Return: 44.37%
Sharpe Ratio: 1.45855
Sortino Ratio: 1.411
Max Drawdown: -57.2%
Avg Drawdown: -11.9%
Normalized Score: -0.008
Lookback periods: [140, 157, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 14m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,096,482,759
Annual Return: 42.41%
Sharpe Ratio: 1.43897
Sortino Ratio: 1.373
Max Drawdown: -52.3%
Avg Drawdown: -11.1%
Normalized Score: 0.008
Lookback periods: [95, 108, 126] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 12m 50sRunning iteration 41/1500... Est. remaining: 11m 27sRunning iteration 51/1500... Est. remaining: 10m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,866,495,396
Annual Return: 46.70%
Sharpe Ratio: 1.51543
Sortino Ratio: 1.483
Max Drawdown: -63.0%
Avg Drawdown: -11.7%
Normalized Score: 0.222
Lookback periods: [152, 156, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 10m 31sRunning iteration 71/1500... Est. remaining: 10m 8sRunning iteration 81/1500... Est. remaining: 9m 46sRunning iteration 91/1500... Est. remaining: 9m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,376,420,574
Annual Return: 47.67%
Sharpe Ratio: 1.56629
Sortino Ratio: 1.532
Max Drawdown: -56.9%
Avg Drawdown: -12.3%
Normalized Score: 0.558
Lookback periods: [135, 153, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 9m 18sbest_combination: {'lookbacks': [135, 153, 187], 'score': np.float64(0.5581786007190984), 'visits': 1}
Running iteration 111/1500... Est. remaining: 9m 5sRunning iteration 121/1500... Est. remaining: 8m 53sRunning iteration 131/1500... Est. remaining: 8m 44sRunning iteration 141/1500... Est. remaining: 8m 34sRunning iteration 151/1500... Est. remaining: 8m 25sRunning iteration 161/1500... Est. remaining: 8m 19sRunning iteration 171/1500... Est. remaining: 8m 13sRunning iteration 181/1500... Est. remaining: 8m 6sRunning iteration 191/1500... Est. remaining: 8m 0sRunning iteration 201/1500... Est. remaining: 7m 55sbest_combination: {'lookbacks': [135, 153, 187], 'score': np.float64(0.5581786007190984), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 49sRunning iteration 221/1500... Est. remaining: 7m 44sRunning iteration 231/1500... Est. remaining: 7m 39sRunning iteration 241/1500... Est. remaining: 7m 35sRunning iteration 251/1500... Est. remaining: 7m 29sRunning iteration 261/1500... Est. remaining: 7m 25sRunning iteration 271/1500... Est. remaining: 7m 20sRunning iteration 281/1500... Est. remaining: 7m 15sRunning iteration 291/1500... Est. remaining: 7m 11sRunning iteration 301/1500... Est. remaining: 7m 6sbest_combination: {'lookbacks': [135, 153, 187], 'score': np.float64(0.5581786007190984), 'visits': 1}
Running iteration 311/1500... Est. remaining: 7m 1sRunning iteration 321/1500... Est. remaining: 6m 57sRunning iteration 331/1500... Est. remaining: 6m 53sRunning iteration 341/1500... Est. remaining: 6m 48sRunning iteration 351/1500... Est. remaining: 6m 44sRunning iteration 361/1500... Est. remaining: 6m 40sRunning iteration 371/1500... Est. remaining: 6m 36sRunning iteration 381/1500... Est. remaining: 6m 32sRunning iteration 391/1500... Est. remaining: 6m 28sRunning iteration 401/1500... Est. remaining: 6m 24sbest_combination: {'lookbacks': [135, 153, 187], 'score': np.float64(0.5581786007190984), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 21sRunning iteration 421/1500... Est. remaining: 6m 17sRunning iteration 431/1500... Est. remaining: 6m 13sRunning iteration 441/1500... Est. remaining: 6m 10sRunning iteration 451/1500... Est. remaining: 6m 6sRunning iteration 461/1500... Est. remaining: 6m 2sRunning iteration 471/1500... Est. remaining: 5m 59sRunning iteration 481/1500... Est. remaining: 5m 55sRunning iteration 491/1500... Est. remaining: 5m 51sRunning iteration 501/1500... Est. remaining: 5m 48sbest_combination: {'lookbacks': [135, 153, 187], 'score': np.float64(0.5581786007190984), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 44sRunning iteration 521/1500... Est. remaining: 5m 40sRunning iteration 531/1500... Est. remaining: 5m 36sRunning iteration 541/1500... Est. remaining: 5m 33sRunning iteration 551/1500... Est. remaining: 5m 29sRunning iteration 561/1500... Est. remaining: 5m 25sRunning iteration 571/1500... Est. remaining: 5m 21sRunning iteration 581/1500... Est. remaining: 5m 18sRunning iteration 591/1500... Est. remaining: 5m 14sRunning iteration 601/1500... Est. remaining: 5m 10sbest_combination: {'lookbacks': [135, 153, 187], 'score': np.float64(0.5581786007190984), 'visits': 1}
Running iteration 611/1500... Est. remaining: 5m 7sRunning iteration 621/1500... Est. remaining: 5m 3sRunning iteration 631/1500... Est. remaining: 4m 59sRunning iteration 641/1500... Est. remaining: 4m 56sRunning iteration 651/1500... Est. remaining: 4m 52sRunning iteration 661/1500... Est. remaining: 4m 48sRunning iteration 671/1500... Est. remaining: 4m 44sRunning iteration 681/1500... Est. remaining: 4m 40sRunning iteration 691/1500... Est. remaining: 4m 37sRunning iteration 701/1500... Est. remaining: 4m 33sbest_combination: {'lookbacks': [135, 153, 187], 'score': np.float64(0.5581786007190984), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 30sRunning iteration 721/1500... Est. remaining: 4m 26sRunning iteration 731/1500... Est. remaining: 4m 23sRunning iteration 741/1500... Est. remaining: 4m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,694,081,886
Annual Return: 47.85%
Sharpe Ratio: 1.57448
Sortino Ratio: 1.535
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 0.817
Lookback periods: [139, 156, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 4m 16sRunning iteration 761/1500... Est. remaining: 4m 13sRunning iteration 771/1500... Est. remaining: 4m 9sRunning iteration 781/1500... Est. remaining: 4m 6sRunning iteration 791/1500... Est. remaining: 4m 2sRunning iteration 801/1500... Est. remaining: 3m 59sbest_combination: {'lookbacks': [139, 156, 173], 'score': np.float64(0.8174723749110123), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 55sRunning iteration 821/1500... Est. remaining: 3m 52sRunning iteration 831/1500... Est. remaining: 3m 48sRunning iteration 841/1500... Est. remaining: 3m 45sRunning iteration 851/1500... Est. remaining: 3m 41sRunning iteration 861/1500... Est. remaining: 3m 38sRunning iteration 871/1500... Est. remaining: 3m 34sRunning iteration 881/1500... Est. remaining: 3m 31sRunning iteration 891/1500... Est. remaining: 3m 27sRunning iteration 901/1500... Est. remaining: 3m 24sbest_combination: {'lookbacks': [139, 156, 173], 'score': np.float64(0.8174723749110123), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 20sRunning iteration 921/1500... Est. remaining: 3m 17sRunning iteration 931/1500... Est. remaining: 3m 13sRunning iteration 941/1500... Est. remaining: 3m 10sRunning iteration 951/1500... Est. remaining: 3m 7sRunning iteration 961/1500... Est. remaining: 3m 3sRunning iteration 971/1500... Est. remaining: 3m 0sRunning iteration 981/1500... Est. remaining: 2m 56sRunning iteration 991/1500... Est. remaining: 2m 53sRunning iteration 1001/1500... Est. remaining: 2m 49sbest_combination: {'lookbacks': [139, 156, 173], 'score': np.float64(0.8174723749110123), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 46sRunning iteration 1021/1500... Est. remaining: 2m 42sRunning iteration 1031/1500... Est. remaining: 2m 39sRunning iteration 1041/1500... Est. remaining: 2m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,324,666,062
Annual Return: 49.51%
Sharpe Ratio: 1.59972
Sortino Ratio: 1.561
Max Drawdown: -60.2%
Avg Drawdown: -10.9%
Normalized Score: 0.932
Lookback periods: [155, 158, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1051/1500... Est. remaining: 2m 33sRunning iteration 1061/1500... Est. remaining: 2m 29sRunning iteration 1071/1500... Est. remaining: 2m 26sRunning iteration 1081/1500... Est. remaining: 2m 22sRunning iteration 1091/1500... Est. remaining: 2m 19sRunning iteration 1101/1500... Est. remaining: 2m 15sbest_combination: {'lookbacks': [155, 158, 181], 'score': np.float64(0.9319100871034433), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 12sRunning iteration 1121/1500... Est. remaining: 2m 9sRunning iteration 1131/1500... Est. remaining: 2m 5sRunning iteration 1141/1500... Est. remaining: 2m 2sRunning iteration 1151/1500... Est. remaining: 1m 58sRunning iteration 1161/1500... Est. remaining: 1m 55sRunning iteration 1171/1500... Est. remaining: 1m 52sRunning iteration 1181/1500... Est. remaining: 1m 48sRunning iteration 1191/1500... Est. remaining: 1m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,663,430,237
Annual Return: 48.83%
Sharpe Ratio: 1.58620
Sortino Ratio: 1.559
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 1.062
Lookback periods: [156, 162, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 38sRunning iteration 1221/1500... Est. remaining: 1m 35sRunning iteration 1231/1500... Est. remaining: 1m 31sRunning iteration 1241/1500... Est. remaining: 1m 28sRunning iteration 1251/1500... Est. remaining: 1m 24sRunning iteration 1261/1500... Est. remaining: 1m 21sRunning iteration 1271/1500... Est. remaining: 1m 18sRunning iteration 1281/1500... Est. remaining: 1m 14sRunning iteration 1291/1500... Est. remaining: 1m 11sRunning iteration 1301/1500... Est. remaining: 1m 7sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(1.0618714209304971), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 4sRunning iteration 1321/1500... Est. remaining: 1m 1sRunning iteration 1331/1500... Est. remaining: 0m 57sRunning iteration 1341/1500... Est. remaining: 0m 54sRunning iteration 1351/1500... Est. remaining: 0m 50sRunning iteration 1361/1500... Est. remaining: 0m 47sRunning iteration 1371/1500... Est. remaining: 0m 44sRunning iteration 1381/1500... Est. remaining: 0m 40sRunning iteration 1391/1500... Est. remaining: 0m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,599,776,726
Annual Return: 48.80%
Sharpe Ratio: 1.59565
Sortino Ratio: 1.556
Max Drawdown: -55.0%
Avg Drawdown: -10.4%
Normalized Score: 1.097
Lookback periods: [157, 159, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1401/1500... Est. remaining: 0m 33sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(1.096763205366607), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,509,307,835
Annual Return: 48.76%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.563
Max Drawdown: -55.0%
Avg Drawdown: -10.3%
Normalized Score: 1.113
Lookback periods: [157, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1411/1500... Est. remaining: 0m 30sRunning iteration 1421/1500... Est. remaining: 0m 27sRunning iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 20sRunning iteration 1451/1500... Est. remaining: 0m 16sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 10sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.5 minutes
Best normalized score: 1.11
best_combination: {'lookbacks': [157, 161, 168], 'score': np.float64(1.1130867051777076), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [157, 161, 168] (score: 1.1131)

Monte Carlo simulation completed in 8.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [157, 161, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 117 selections (28.1%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,509,307,834.85
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Sun Aug 24 16:38:40 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,929,671,091
Annual Return: 42.07%
Sharpe Ratio: 1.38388
Sortino Ratio: 1.349
Max Drawdown: -61.1%
Avg Drawdown: -13.3%
Normalized Score: -0.762
Lookback periods: [125, 131, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,386,238,029
Annual Return: 40.72%
Sharpe Ratio: 1.38570
Sortino Ratio: 1.311
Max Drawdown: -62.2%
Avg Drawdown: -11.6%
Normalized Score: -0.718
Lookback periods: [60, 154, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,225,129,989
Annual Return: 40.22%
Sharpe Ratio: 1.39044
Sortino Ratio: 1.298
Max Drawdown: -52.3%
Avg Drawdown: -11.2%
Normalized Score: -0.388
Lookback periods: [50, 92, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,519,285,283
Annual Return: 47.76%
Sharpe Ratio: 1.54193
Sortino Ratio: 1.510
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.512
Lookback periods: [178, 179, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 40sRunning iteration 21/1500... Est. remaining: 16m 56sRunning iteration 31/1500... Est. remaining: 13m 57sRunning iteration 41/1500... Est. remaining: 12m 26sRunning iteration 51/1500... Est. remaining: 11m 21sRunning iteration 61/1500... Est. remaining: 10m 37sRunning iteration 71/1500... Est. remaining: 10m 2sRunning iteration 81/1500... Est. remaining: 9m 39sRunning iteration 91/1500... Est. remaining: 9m 22sRunning iteration 101/1500... Est. remaining: 9m 4sbest_combination: {'lookbacks': [178, 179, 184], 'score': np.float64(0.5118250293019364), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 51sRunning iteration 121/1500... Est. remaining: 8m 38sRunning iteration 131/1500... Est. remaining: 8m 30sRunning iteration 141/1500... Est. remaining: 8m 22sRunning iteration 151/1500... Est. remaining: 8m 15sRunning iteration 161/1500... Est. remaining: 8m 9sRunning iteration 171/1500... Est. remaining: 8m 2sRunning iteration 181/1500... Est. remaining: 7m 56sRunning iteration 191/1500... Est. remaining: 7m 50sRunning iteration 201/1500... Est. remaining: 7m 45sbest_combination: {'lookbacks': [178, 179, 184], 'score': np.float64(0.5118250293019364), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 40sRunning iteration 221/1500... Est. remaining: 7m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,277,078,657
Annual Return: 46.99%
Sharpe Ratio: 1.55519
Sortino Ratio: 1.516
Max Drawdown: -57.3%
Avg Drawdown: -11.6%
Normalized Score: 0.554
Lookback periods: [138, 152, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 7m 35sRunning iteration 241/1500... Est. remaining: 7m 30sRunning iteration 251/1500... Est. remaining: 7m 25sRunning iteration 261/1500... Est. remaining: 7m 20sRunning iteration 271/1500... Est. remaining: 7m 16sRunning iteration 281/1500... Est. remaining: 7m 11sRunning iteration 291/1500... Est. remaining: 7m 6sRunning iteration 301/1500... Est. remaining: 7m 2sbest_combination: {'lookbacks': [138, 152, 186], 'score': np.float64(0.5544524173922245), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 58sRunning iteration 321/1500... Est. remaining: 6m 54sRunning iteration 331/1500... Est. remaining: 6m 49sRunning iteration 341/1500... Est. remaining: 6m 45sRunning iteration 351/1500... Est. remaining: 6m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,515,112,175
Annual Return: 48.29%
Sharpe Ratio: 1.59293
Sortino Ratio: 1.549
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 0.896
Lookback periods: [134, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 361/1500... Est. remaining: 6m 39sRunning iteration 371/1500... Est. remaining: 6m 35sRunning iteration 381/1500... Est. remaining: 6m 31sRunning iteration 391/1500... Est. remaining: 6m 27sRunning iteration 401/1500... Est. remaining: 6m 23sbest_combination: {'lookbacks': [134, 157, 172], 'score': np.float64(0.8961505814158194), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 20sRunning iteration 421/1500... Est. remaining: 6m 16sRunning iteration 431/1500... Est. remaining: 6m 12sRunning iteration 441/1500... Est. remaining: 6m 8sRunning iteration 451/1500... Est. remaining: 6m 4sRunning iteration 461/1500... Est. remaining: 6m 0sRunning iteration 471/1500... Est. remaining: 5m 56sRunning iteration 481/1500... Est. remaining: 5m 52sRunning iteration 491/1500... Est. remaining: 5m 48sRunning iteration 501/1500... Est. remaining: 5m 45sbest_combination: {'lookbacks': [134, 157, 172], 'score': np.float64(0.8961505814158194), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 41sRunning iteration 521/1500... Est. remaining: 5m 37sRunning iteration 531/1500... Est. remaining: 5m 34sRunning iteration 541/1500... Est. remaining: 5m 30sRunning iteration 551/1500... Est. remaining: 5m 26sRunning iteration 561/1500... Est. remaining: 5m 23sRunning iteration 571/1500... Est. remaining: 5m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,704,630,213
Annual Return: 43.46%
Sharpe Ratio: 1.54453
Sortino Ratio: 1.456
Max Drawdown: -35.6%
Avg Drawdown: -9.1%
Normalized Score: 1.201
Lookback periods: [50, 53, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 5m 17sRunning iteration 591/1500... Est. remaining: 5m 13sRunning iteration 601/1500... Est. remaining: 5m 9sbest_combination: {'lookbacks': [50, 53, 87], 'score': np.float64(1.2007531646719218), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,928,518,176
Annual Return: 43.79%
Sharpe Ratio: 1.59880
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.498
Lookback periods: [50, 52, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/1500... Est. remaining: 5m 7sRunning iteration 621/1500... Est. remaining: 5m 3sRunning iteration 631/1500... Est. remaining: 5m 0sRunning iteration 641/1500... Est. remaining: 4m 56sRunning iteration 651/1500... Est. remaining: 4m 52sRunning iteration 661/1500... Est. remaining: 4m 48sRunning iteration 671/1500... Est. remaining: 4m 44sRunning iteration 681/1500... Est. remaining: 4m 40sRunning iteration 691/1500... Est. remaining: 4m 37sRunning iteration 701/1500... Est. remaining: 4m 33sbest_combination: {'lookbacks': [50, 52, 94], 'score': np.float64(1.4976614665732562), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 30sRunning iteration 721/1500... Est. remaining: 4m 26sRunning iteration 731/1500... Est. remaining: 4m 23sRunning iteration 741/1500... Est. remaining: 4m 19sRunning iteration 751/1500... Est. remaining: 4m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,573,730,700
Annual Return: 44.62%
Sharpe Ratio: 1.59269
Sortino Ratio: 1.510
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.517
Lookback periods: [50, 53, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 4m 13sRunning iteration 771/1500... Est. remaining: 4m 9sRunning iteration 781/1500... Est. remaining: 4m 6sRunning iteration 791/1500... Est. remaining: 4m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,613,763,997
Annual Return: 44.66%
Sharpe Ratio: 1.61575
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.649
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 801/1500... Est. remaining: 3m 59sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.648949405789549), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 56sRunning iteration 821/1500... Est. remaining: 3m 52sRunning iteration 831/1500... Est. remaining: 3m 49sRunning iteration 841/1500... Est. remaining: 3m 45sRunning iteration 851/1500... Est. remaining: 3m 42sRunning iteration 861/1500... Est. remaining: 3m 38sRunning iteration 871/1500... Est. remaining: 3m 35sRunning iteration 881/1500... Est. remaining: 3m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,912,007
Annual Return: 45.27%
Sharpe Ratio: 1.61355
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.670
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 3m 28sRunning iteration 901/1500... Est. remaining: 3m 25sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6697769261771946), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 21sRunning iteration 921/1500... Est. remaining: 3m 18sRunning iteration 931/1500... Est. remaining: 3m 14sRunning iteration 941/1500... Est. remaining: 3m 11sRunning iteration 951/1500... Est. remaining: 3m 7sRunning iteration 961/1500... Est. remaining: 3m 4sRunning iteration 971/1500... Est. remaining: 3m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.046
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 981/1500... Est. remaining: 2m 57sRunning iteration 991/1500... Est. remaining: 2m 54sRunning iteration 1001/1500... Est. remaining: 2m 50sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 47sRunning iteration 1021/1500... Est. remaining: 2m 44sRunning iteration 1031/1500... Est. remaining: 2m 40sRunning iteration 1041/1500... Est. remaining: 2m 37sRunning iteration 1051/1500... Est. remaining: 2m 33sRunning iteration 1061/1500... Est. remaining: 2m 30sRunning iteration 1071/1500... Est. remaining: 2m 26sRunning iteration 1081/1500... Est. remaining: 2m 23sRunning iteration 1091/1500... Est. remaining: 2m 19sRunning iteration 1101/1500... Est. remaining: 2m 16sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 12sRunning iteration 1121/1500... Est. remaining: 2m 9sRunning iteration 1131/1500... Est. remaining: 2m 5sRunning iteration 1141/1500... Est. remaining: 2m 2sRunning iteration 1151/1500... Est. remaining: 1m 59sRunning iteration 1161/1500... Est. remaining: 1m 55sRunning iteration 1171/1500... Est. remaining: 1m 52sRunning iteration 1181/1500... Est. remaining: 1m 48sRunning iteration 1191/1500... Est. remaining: 1m 45sRunning iteration 1201/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 38sRunning iteration 1221/1500... Est. remaining: 1m 35sRunning iteration 1231/1500... Est. remaining: 1m 31sRunning iteration 1241/1500... Est. remaining: 1m 28sRunning iteration 1251/1500... Est. remaining: 1m 24sRunning iteration 1261/1500... Est. remaining: 1m 21sRunning iteration 1271/1500... Est. remaining: 1m 17sRunning iteration 1281/1500... Est. remaining: 1m 14sRunning iteration 1291/1500... Est. remaining: 1m 11sRunning iteration 1301/1500... Est. remaining: 1m 7sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 4sRunning iteration 1321/1500... Est. remaining: 1m 0sRunning iteration 1331/1500... Est. remaining: 0m 57sRunning iteration 1341/1500... Est. remaining: 0m 54sRunning iteration 1351/1500... Est. remaining: 0m 50sRunning iteration 1361/1500... Est. remaining: 0m 47sRunning iteration 1371/1500... Est. remaining: 0m 43sRunning iteration 1381/1500... Est. remaining: 0m 40sRunning iteration 1391/1500... Est. remaining: 0m 37sRunning iteration 1401/1500... Est. remaining: 0m 33sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 30sRunning iteration 1421/1500... Est. remaining: 0m 26sRunning iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 20sRunning iteration 1451/1500... Est. remaining: 0m 16sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 10sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.3 minutes
Best normalized score: 2.05
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.0463)

Monte Carlo simulation completed in 8.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 198m 23s
End time: Sun Aug 24 16:47:02 EDT 2025
Average time per successful run: 13m 13s
==============================================================
✓ All runs completed successfully!
