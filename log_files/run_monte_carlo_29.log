Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Tue Aug 26 14:52:26 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Tue Aug 26 14:52:26 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $370,921,145
Annual Return: 35.47%
Sharpe Ratio: 1.22558
Sortino Ratio: 1.128
Max Drawdown: -63.7%
Avg Drawdown: -13.8%
Normalized Score: -1.131
Lookback periods: [42, 160, 287] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $846,538,653
Annual Return: 38.73%
Sharpe Ratio: 1.29496
Sortino Ratio: 1.236
Max Drawdown: -67.4%
Avg Drawdown: -13.5%
Normalized Score: -0.762
Lookback periods: [122, 191, 281] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,180,610,210
Annual Return: 40.07%
Sharpe Ratio: 1.31960
Sortino Ratio: 1.268
Max Drawdown: -62.6%
Avg Drawdown: -12.6%
Normalized Score: -0.562
Lookback periods: [191, 228, 265] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $570,738,574
Annual Return: 37.16%
Sharpe Ratio: 1.33778
Sortino Ratio: 1.231
Max Drawdown: -34.7%
Avg Drawdown: -10.1%
Normalized Score: -0.431
Lookback periods: [48, 64, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,603,420,321
Annual Return: 41.31%
Sharpe Ratio: 1.37487
Sortino Ratio: 1.330
Max Drawdown: -58.5%
Avg Drawdown: -13.6%
Normalized Score: -0.358
Lookback periods: [101, 145, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,874,249,800
Annual Return: 44.96%
Sharpe Ratio: 1.45741
Sortino Ratio: 1.419
Max Drawdown: -63.5%
Avg Drawdown: -12.7%
Normalized Score: 0.026
Lookback periods: [182, 185, 244] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 12sRunning iteration 41/1500... Est. remaining: 18m 6sRunning iteration 51/1500... Est. remaining: 16m 45sRunning iteration 61/1500... Est. remaining: 15m 49sRunning iteration 71/1500... Est. remaining: 15m 6sRunning iteration 81/1500... Est. remaining: 14m 34sRunning iteration 91/1500... Est. remaining: 14m 10sRunning iteration 101/1500... Est. remaining: 13m 48sbest_combination: {'lookbacks': [182, 185, 244], 'score': np.float64(0.02556085434908738), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,468,743,598
Annual Return: 45.55%
Sharpe Ratio: 1.48580
Sortino Ratio: 1.446
Max Drawdown: -60.2%
Avg Drawdown: -11.6%
Normalized Score: 0.189
Lookback periods: [167, 190, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 27sRunning iteration 131/1500... Est. remaining: 13m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,465,524,075
Annual Return: 48.26%
Sharpe Ratio: 1.56932
Sortino Ratio: 1.516
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.524
Lookback periods: [181, 188, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 13m 10sRunning iteration 151/1500... Est. remaining: 12m 57sRunning iteration 161/1500... Est. remaining: 12m 45sRunning iteration 171/1500... Est. remaining: 12m 33sRunning iteration 181/1500... Est. remaining: 12m 23sRunning iteration 191/1500... Est. remaining: 12m 12sRunning iteration 201/1500... Est. remaining: 12m 2sbest_combination: {'lookbacks': [181, 188, 199], 'score': np.float64(0.5239739157276834), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 53sRunning iteration 221/1500... Est. remaining: 11m 43sRunning iteration 231/1500... Est. remaining: 11m 35sRunning iteration 241/1500... Est. remaining: 11m 26sRunning iteration 251/1500... Est. remaining: 11m 18sRunning iteration 261/1500... Est. remaining: 11m 10sRunning iteration 271/1500... Est. remaining: 11m 3sRunning iteration 281/1500... Est. remaining: 10m 55sRunning iteration 291/1500... Est. remaining: 10m 48sRunning iteration 301/1500... Est. remaining: 10m 40sbest_combination: {'lookbacks': [181, 188, 199], 'score': np.float64(0.5239739157276834), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 33sRunning iteration 321/1500... Est. remaining: 10m 26sRunning iteration 331/1500... Est. remaining: 10m 19sRunning iteration 341/1500... Est. remaining: 10m 13sRunning iteration 351/1500... Est. remaining: 10m 6sRunning iteration 361/1500... Est. remaining: 10m 0sRunning iteration 371/1500... Est. remaining: 9m 53sRunning iteration 381/1500... Est. remaining: 9m 47sRunning iteration 391/1500... Est. remaining: 9m 42sRunning iteration 401/1500... Est. remaining: 9m 35sbest_combination: {'lookbacks': [181, 188, 199], 'score': np.float64(0.5239739157276834), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 29sRunning iteration 421/1500... Est. remaining: 9m 23sRunning iteration 431/1500... Est. remaining: 9m 17sRunning iteration 441/1500... Est. remaining: 9m 11sRunning iteration 451/1500... Est. remaining: 9m 5sRunning iteration 461/1500... Est. remaining: 8m 59sRunning iteration 471/1500... Est. remaining: 8m 53sRunning iteration 481/1500... Est. remaining: 8m 47sRunning iteration 491/1500... Est. remaining: 8m 42sRunning iteration 501/1500... Est. remaining: 8m 36sbest_combination: {'lookbacks': [181, 188, 199], 'score': np.float64(0.5239739157276834), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 30sRunning iteration 521/1500... Est. remaining: 8m 25sRunning iteration 531/1500... Est. remaining: 8m 19sRunning iteration 541/1500... Est. remaining: 8m 13sRunning iteration 551/1500... Est. remaining: 8m 8sRunning iteration 561/1500... Est. remaining: 8m 2sRunning iteration 571/1500... Est. remaining: 7m 56sRunning iteration 581/1500... Est. remaining: 7m 51sRunning iteration 591/1500... Est. remaining: 7m 45sRunning iteration 601/1500... Est. remaining: 7m 40sbest_combination: {'lookbacks': [181, 188, 199], 'score': np.float64(0.5239739157276834), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 34sRunning iteration 621/1500... Est. remaining: 7m 29sRunning iteration 631/1500... Est. remaining: 7m 24sRunning iteration 641/1500... Est. remaining: 7m 18sRunning iteration 651/1500... Est. remaining: 7m 13sRunning iteration 661/1500... Est. remaining: 7m 7sRunning iteration 671/1500... Est. remaining: 7m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,759,037,708
Annual Return: 48.41%
Sharpe Ratio: 1.57498
Sortino Ratio: 1.533
Max Drawdown: -60.7%
Avg Drawdown: -11.3%
Normalized Score: 0.554
Lookback periods: [183, 184, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 6m 58sRunning iteration 691/1500... Est. remaining: 6m 53sRunning iteration 701/1500... Est. remaining: 6m 48sbest_combination: {'lookbacks': [183, 184, 193], 'score': np.float64(0.5539622035527094), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,521,167,467
Annual Return: 49.95%
Sharpe Ratio: 1.60719
Sortino Ratio: 1.573
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.729
Lookback periods: [177, 189, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 6m 38sRunning iteration 731/1500... Est. remaining: 6m 33sRunning iteration 741/1500... Est. remaining: 6m 28sRunning iteration 751/1500... Est. remaining: 6m 22sRunning iteration 761/1500... Est. remaining: 6m 17sRunning iteration 771/1500... Est. remaining: 6m 12sRunning iteration 781/1500... Est. remaining: 6m 7sRunning iteration 791/1500... Est. remaining: 6m 1sRunning iteration 801/1500... Est. remaining: 5m 56sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.7285059100571772), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 51sRunning iteration 821/1500... Est. remaining: 5m 46sRunning iteration 831/1500... Est. remaining: 5m 40sRunning iteration 841/1500... Est. remaining: 5m 35sRunning iteration 851/1500... Est. remaining: 5m 30sRunning iteration 861/1500... Est. remaining: 5m 25sRunning iteration 871/1500... Est. remaining: 5m 20sRunning iteration 881/1500... Est. remaining: 5m 14sRunning iteration 891/1500... Est. remaining: 5m 9sRunning iteration 901/1500... Est. remaining: 5m 4sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.7285059100571772), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 59sRunning iteration 921/1500... Est. remaining: 4m 53sRunning iteration 931/1500... Est. remaining: 4m 48sRunning iteration 941/1500... Est. remaining: 4m 43sRunning iteration 951/1500... Est. remaining: 4m 38sRunning iteration 961/1500... Est. remaining: 4m 33sRunning iteration 971/1500... Est. remaining: 4m 28sRunning iteration 981/1500... Est. remaining: 4m 23sRunning iteration 991/1500... Est. remaining: 4m 17sRunning iteration 1001/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.7285059100571772), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 7sRunning iteration 1021/1500... Est. remaining: 4m 2sRunning iteration 1031/1500... Est. remaining: 3m 57sRunning iteration 1041/1500... Est. remaining: 3m 52sRunning iteration 1051/1500... Est. remaining: 3m 47sRunning iteration 1061/1500... Est. remaining: 3m 42sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 21sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.7285059100571772), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 16sRunning iteration 1121/1500... Est. remaining: 3m 11sRunning iteration 1131/1500... Est. remaining: 3m 6sRunning iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 56sRunning iteration 1161/1500... Est. remaining: 2m 51sRunning iteration 1171/1500... Est. remaining: 2m 46sRunning iteration 1181/1500... Est. remaining: 2m 41sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.7285059100571772), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.7285059100571772), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.7285059100571772), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 0.73
best_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.7285059100571772), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [177, 189, 198] (score: 0.7285)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [177, 189, 198] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 119 selections (28.6%)
2. sp500_hma: 103 selections (24.8%)
3. naz100_pine: 83 selections (20.0%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 41 selections (9.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,521,167,467.46
Average Annualized Gain: 49.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Tue Aug 26 15:05:06 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,868,482,844
Annual Return: 41.94%
Sharpe Ratio: 1.40161
Sortino Ratio: 1.342
Max Drawdown: -67.3%
Avg Drawdown: -13.2%
Normalized Score: -0.007
Lookback periods: [141, 205, 255] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,874,572,442
Annual Return: 43.71%
Sharpe Ratio: 1.42873
Sortino Ratio: 1.392
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.448
Lookback periods: [168, 176, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,352,940,728
Annual Return: 46.31%
Sharpe Ratio: 1.50767
Sortino Ratio: 1.452
Max Drawdown: -60.2%
Avg Drawdown: -11.4%
Normalized Score: 0.922
Lookback periods: [157, 157, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 41sRunning iteration 21/1500... Est. remaining: 19m 59sRunning iteration 31/1500... Est. remaining: 17m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,516,245,086
Annual Return: 46.44%
Sharpe Ratio: 1.55389
Sortino Ratio: 1.501
Max Drawdown: -57.3%
Avg Drawdown: -11.8%
Normalized Score: 1.216
Lookback periods: [115, 142, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 16m 30sRunning iteration 51/1500... Est. remaining: 15m 31sRunning iteration 61/1500... Est. remaining: 14m 49sRunning iteration 71/1500... Est. remaining: 14m 16sRunning iteration 81/1500... Est. remaining: 13m 51sRunning iteration 91/1500... Est. remaining: 13m 29sRunning iteration 101/1500... Est. remaining: 13m 12sbest_combination: {'lookbacks': [115, 142, 145], 'score': np.float64(1.2161204256479803), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 57sRunning iteration 121/1500... Est. remaining: 12m 44sRunning iteration 131/1500... Est. remaining: 12m 32sRunning iteration 141/1500... Est. remaining: 12m 21sRunning iteration 151/1500... Est. remaining: 12m 11sRunning iteration 161/1500... Est. remaining: 12m 1sRunning iteration 171/1500... Est. remaining: 11m 52sRunning iteration 181/1500... Est. remaining: 11m 44sRunning iteration 191/1500... Est. remaining: 11m 36sRunning iteration 201/1500... Est. remaining: 11m 27sbest_combination: {'lookbacks': [115, 142, 145], 'score': np.float64(1.2161204256479803), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 20sRunning iteration 221/1500... Est. remaining: 11m 13sRunning iteration 231/1500... Est. remaining: 11m 6sRunning iteration 241/1500... Est. remaining: 10m 59sRunning iteration 251/1500... Est. remaining: 10m 52sRunning iteration 261/1500... Est. remaining: 10m 45sRunning iteration 271/1500... Est. remaining: 10m 38sRunning iteration 281/1500... Est. remaining: 10m 32sRunning iteration 291/1500... Est. remaining: 10m 25sRunning iteration 301/1500... Est. remaining: 10m 19sbest_combination: {'lookbacks': [115, 142, 145], 'score': np.float64(1.2161204256479803), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 13sRunning iteration 321/1500... Est. remaining: 10m 7sRunning iteration 331/1500... Est. remaining: 10m 1sRunning iteration 341/1500... Est. remaining: 9m 55sRunning iteration 351/1500... Est. remaining: 9m 49sRunning iteration 361/1500... Est. remaining: 9m 43sRunning iteration 371/1500... Est. remaining: 9m 37sRunning iteration 381/1500... Est. remaining: 9m 31sRunning iteration 391/1500... Est. remaining: 9m 25sRunning iteration 401/1500... Est. remaining: 9m 20sbest_combination: {'lookbacks': [115, 142, 145], 'score': np.float64(1.2161204256479803), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 14sRunning iteration 421/1500... Est. remaining: 9m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,868,649,203
Annual Return: 48.92%
Sharpe Ratio: 1.57972
Sortino Ratio: 1.546
Max Drawdown: -61.3%
Avg Drawdown: -11.7%
Normalized Score: 1.530
Lookback periods: [154, 155, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 9m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,454,879,804
Annual Return: 48.74%
Sharpe Ratio: 1.58347
Sortino Ratio: 1.550
Max Drawdown: -57.2%
Avg Drawdown: -11.7%
Normalized Score: 1.573
Lookback periods: [152, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 3sRunning iteration 451/1500... Est. remaining: 8m 58sRunning iteration 461/1500... Est. remaining: 8m 52sRunning iteration 471/1500... Est. remaining: 8m 46sRunning iteration 481/1500... Est. remaining: 8m 41sRunning iteration 491/1500... Est. remaining: 8m 35sRunning iteration 501/1500... Est. remaining: 8m 30sbest_combination: {'lookbacks': [152, 154, 156], 'score': np.float64(1.572560326050483), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 24sRunning iteration 521/1500... Est. remaining: 8m 19sRunning iteration 531/1500... Est. remaining: 8m 14sRunning iteration 541/1500... Est. remaining: 8m 8sRunning iteration 551/1500... Est. remaining: 8m 3sRunning iteration 561/1500... Est. remaining: 7m 57sRunning iteration 571/1500... Est. remaining: 7m 52sRunning iteration 581/1500... Est. remaining: 7m 46sRunning iteration 591/1500... Est. remaining: 7m 41sRunning iteration 601/1500... Est. remaining: 7m 36sbest_combination: {'lookbacks': [152, 154, 156], 'score': np.float64(1.572560326050483), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 30sRunning iteration 621/1500... Est. remaining: 7m 25sRunning iteration 631/1500... Est. remaining: 7m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,078,196,190
Annual Return: 48.56%
Sharpe Ratio: 1.60135
Sortino Ratio: 1.569
Max Drawdown: -60.1%
Avg Drawdown: -10.9%
Normalized Score: 1.697
Lookback periods: [139, 153, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 7m 16sRunning iteration 651/1500... Est. remaining: 7m 11sRunning iteration 661/1500... Est. remaining: 7m 6sRunning iteration 671/1500... Est. remaining: 7m 0sRunning iteration 681/1500... Est. remaining: 6m 55sRunning iteration 691/1500... Est. remaining: 6m 50sRunning iteration 701/1500... Est. remaining: 6m 45sbest_combination: {'lookbacks': [139, 153, 158], 'score': np.float64(1.6967684025397465), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 39sRunning iteration 721/1500... Est. remaining: 6m 34sRunning iteration 731/1500... Est. remaining: 6m 29sRunning iteration 741/1500... Est. remaining: 6m 24sRunning iteration 751/1500... Est. remaining: 6m 19sRunning iteration 761/1500... Est. remaining: 6m 14sRunning iteration 771/1500... Est. remaining: 6m 8sRunning iteration 781/1500... Est. remaining: 6m 3sRunning iteration 791/1500... Est. remaining: 5m 58sRunning iteration 801/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [139, 153, 158], 'score': np.float64(1.6967684025397465), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 48sRunning iteration 821/1500... Est. remaining: 5m 42sRunning iteration 831/1500... Est. remaining: 5m 37sRunning iteration 841/1500... Est. remaining: 5m 32sRunning iteration 851/1500... Est. remaining: 5m 27sRunning iteration 861/1500... Est. remaining: 5m 22sRunning iteration 871/1500... Est. remaining: 5m 17sRunning iteration 881/1500... Est. remaining: 5m 12sRunning iteration 891/1500... Est. remaining: 5m 7sRunning iteration 901/1500... Est. remaining: 5m 2sbest_combination: {'lookbacks': [139, 153, 158], 'score': np.float64(1.6967684025397465), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 56sRunning iteration 921/1500... Est. remaining: 4m 51sRunning iteration 931/1500... Est. remaining: 4m 46sRunning iteration 941/1500... Est. remaining: 4m 41sRunning iteration 951/1500... Est. remaining: 4m 36sRunning iteration 961/1500... Est. remaining: 4m 31sRunning iteration 971/1500... Est. remaining: 4m 26sRunning iteration 981/1500... Est. remaining: 4m 21sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [139, 153, 158], 'score': np.float64(1.6967684025397465), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 5sRunning iteration 1021/1500... Est. remaining: 4m 0sRunning iteration 1031/1500... Est. remaining: 3m 55sRunning iteration 1041/1500... Est. remaining: 3m 50sRunning iteration 1051/1500... Est. remaining: 3m 45sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,422,280,779
Annual Return: 49.15%
Sharpe Ratio: 1.62578
Sortino Ratio: 1.584
Max Drawdown: -58.5%
Avg Drawdown: -10.9%
Normalized Score: 1.826
Lookback periods: [139, 148, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(1.826243262938219), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(1.826243262938219), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(1.826243262938219), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(1.826243262938219), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 1.83
best_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(1.826243262938219), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 148, 158] (score: 1.8262)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 148, 158] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 113 selections (27.2%)
2. naz100_hma: 104 selections (25.0%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 79 selections (19.0%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,422,280,779.05
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Tue Aug 26 15:17:42 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $552,749,389
Annual Return: 37.04%
Sharpe Ratio: 1.21917
Sortino Ratio: 1.159
Max Drawdown: -68.6%
Avg Drawdown: -14.1%
Normalized Score: -1.323
Lookback periods: [187, 221, 261] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $357,214,318
Annual Return: 35.32%
Sharpe Ratio: 1.26263
Sortino Ratio: 1.160
Max Drawdown: -52.3%
Avg Drawdown: -10.5%
Normalized Score: -0.713
Lookback periods: [47, 78, 139] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,025,354,760
Annual Return: 42.27%
Sharpe Ratio: 1.37456
Sortino Ratio: 1.338
Max Drawdown: -67.1%
Avg Drawdown: -13.3%
Normalized Score: -0.470
Lookback periods: [151, 173, 238] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,241,378,487
Annual Return: 42.68%
Sharpe Ratio: 1.39713
Sortino Ratio: 1.361
Max Drawdown: -62.5%
Avg Drawdown: -13.2%
Normalized Score: -0.328
Lookback periods: [149, 153, 226] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,224,338,259
Annual Return: 42.65%
Sharpe Ratio: 1.43645
Sortino Ratio: 1.379
Max Drawdown: -59.7%
Avg Drawdown: -12.7%
Normalized Score: -0.161
Lookback periods: [108, 126, 132] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,198,406,530
Annual Return: 42.60%
Sharpe Ratio: 1.46441
Sortino Ratio: 1.386
Max Drawdown: -56.4%
Avg Drawdown: -11.2%
Normalized Score: 0.126
Lookback periods: [53, 153, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 2sRunning iteration 51/1500... Est. remaining: 16m 45sRunning iteration 61/1500... Est. remaining: 15m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,424,452,454
Annual Return: 46.37%
Sharpe Ratio: 1.52667
Sortino Ratio: 1.475
Max Drawdown: -56.4%
Avg Drawdown: -12.8%
Normalized Score: 0.301
Lookback periods: [122, 149, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 32sRunning iteration 81/1500... Est. remaining: 15m 18sRunning iteration 91/1500... Est. remaining: 14m 46sRunning iteration 101/1500... Est. remaining: 14m 21sbest_combination: {'lookbacks': [122, 149, 181], 'score': np.float64(0.3005636331593813), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 58sRunning iteration 121/1500... Est. remaining: 13m 40sRunning iteration 131/1500... Est. remaining: 13m 22sRunning iteration 141/1500... Est. remaining: 13m 6sRunning iteration 151/1500... Est. remaining: 12m 53sRunning iteration 161/1500... Est. remaining: 12m 40sRunning iteration 171/1500... Est. remaining: 12m 28sRunning iteration 181/1500... Est. remaining: 12m 17sRunning iteration 191/1500... Est. remaining: 12m 6sRunning iteration 201/1500... Est. remaining: 11m 57sbest_combination: {'lookbacks': [122, 149, 181], 'score': np.float64(0.3005636331593813), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 48sRunning iteration 221/1500... Est. remaining: 11m 39sRunning iteration 231/1500... Est. remaining: 11m 30sRunning iteration 241/1500... Est. remaining: 11m 21sRunning iteration 251/1500... Est. remaining: 11m 13sRunning iteration 261/1500... Est. remaining: 11m 4sRunning iteration 271/1500... Est. remaining: 10m 56sRunning iteration 281/1500... Est. remaining: 10m 49sRunning iteration 291/1500... Est. remaining: 10m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,014,986,071
Annual Return: 46.04%
Sharpe Ratio: 1.49243
Sortino Ratio: 1.448
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.339
Lookback periods: [179, 193, 207] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 301/1500... Est. remaining: 10m 39sbest_combination: {'lookbacks': [179, 193, 207], 'score': np.float64(0.33902542240937095), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 32sRunning iteration 321/1500... Est. remaining: 10m 25sRunning iteration 331/1500... Est. remaining: 10m 18sRunning iteration 341/1500... Est. remaining: 10m 11sRunning iteration 351/1500... Est. remaining: 10m 5sRunning iteration 361/1500... Est. remaining: 9m 58sRunning iteration 371/1500... Est. remaining: 9m 52sRunning iteration 381/1500... Est. remaining: 9m 46sRunning iteration 391/1500... Est. remaining: 9m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,203,815,841
Annual Return: 46.94%
Sharpe Ratio: 1.51820
Sortino Ratio: 1.485
Max Drawdown: -62.5%
Avg Drawdown: -11.6%
Normalized Score: 0.447
Lookback periods: [175, 194, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 9m 37sbest_combination: {'lookbacks': [175, 194, 195], 'score': np.float64(0.44671121561376015), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 31sRunning iteration 421/1500... Est. remaining: 9m 25sRunning iteration 431/1500... Est. remaining: 9m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,165,805,682
Annual Return: 47.55%
Sharpe Ratio: 1.55551
Sortino Ratio: 1.523
Max Drawdown: -55.0%
Avg Drawdown: -10.8%
Normalized Score: 0.754
Lookback periods: [146, 161, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 16sRunning iteration 451/1500... Est. remaining: 9m 9sRunning iteration 461/1500... Est. remaining: 9m 3sRunning iteration 471/1500... Est. remaining: 8m 57sRunning iteration 481/1500... Est. remaining: 8m 51sRunning iteration 491/1500... Est. remaining: 8m 45sRunning iteration 501/1500... Est. remaining: 8m 39sbest_combination: {'lookbacks': [146, 161, 172], 'score': np.float64(0.7543293034097337), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 33sRunning iteration 521/1500... Est. remaining: 8m 27sRunning iteration 531/1500... Est. remaining: 8m 21sRunning iteration 541/1500... Est. remaining: 8m 16sRunning iteration 551/1500... Est. remaining: 8m 10sRunning iteration 561/1500... Est. remaining: 8m 4sRunning iteration 571/1500... Est. remaining: 7m 59sRunning iteration 581/1500... Est. remaining: 7m 53sRunning iteration 591/1500... Est. remaining: 7m 48sRunning iteration 601/1500... Est. remaining: 7m 42sbest_combination: {'lookbacks': [146, 161, 172], 'score': np.float64(0.7543293034097337), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 36sRunning iteration 621/1500... Est. remaining: 7m 31sRunning iteration 631/1500... Est. remaining: 7m 26sRunning iteration 641/1500... Est. remaining: 7m 20sRunning iteration 651/1500... Est. remaining: 7m 15sRunning iteration 661/1500... Est. remaining: 7m 9sRunning iteration 671/1500... Est. remaining: 7m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,121,426,921
Annual Return: 48.58%
Sharpe Ratio: 1.58430
Sortino Ratio: 1.539
Max Drawdown: -56.6%
Avg Drawdown: -11.2%
Normalized Score: 0.802
Lookback periods: [154, 159, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 7m 0sRunning iteration 691/1500... Est. remaining: 6m 55sRunning iteration 701/1500... Est. remaining: 6m 49sbest_combination: {'lookbacks': [154, 159, 181], 'score': np.float64(0.8017594578388823), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 44sRunning iteration 721/1500... Est. remaining: 6m 39sRunning iteration 731/1500... Est. remaining: 6m 33sRunning iteration 741/1500... Est. remaining: 6m 28sRunning iteration 751/1500... Est. remaining: 6m 23sRunning iteration 761/1500... Est. remaining: 6m 17sRunning iteration 771/1500... Est. remaining: 6m 12sRunning iteration 781/1500... Est. remaining: 6m 7sRunning iteration 791/1500... Est. remaining: 6m 1sRunning iteration 801/1500... Est. remaining: 5m 56sbest_combination: {'lookbacks': [154, 159, 181], 'score': np.float64(0.8017594578388823), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 51sRunning iteration 821/1500... Est. remaining: 5m 45sRunning iteration 831/1500... Est. remaining: 5m 40sRunning iteration 841/1500... Est. remaining: 5m 35sRunning iteration 851/1500... Est. remaining: 5m 30sRunning iteration 861/1500... Est. remaining: 5m 25sRunning iteration 871/1500... Est. remaining: 5m 19sRunning iteration 881/1500... Est. remaining: 5m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,070,968,658
Annual Return: 49.01%
Sharpe Ratio: 1.59187
Sortino Ratio: 1.563
Max Drawdown: -59.0%
Avg Drawdown: -10.4%
Normalized Score: 0.958
Lookback periods: [158, 161, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 5m 10sRunning iteration 901/1500... Est. remaining: 5m 5sbest_combination: {'lookbacks': [158, 161, 172], 'score': np.float64(0.9581352023826829), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 59sRunning iteration 921/1500... Est. remaining: 4m 54sRunning iteration 931/1500... Est. remaining: 4m 49sRunning iteration 941/1500... Est. remaining: 4m 44sRunning iteration 951/1500... Est. remaining: 4m 38sRunning iteration 961/1500... Est. remaining: 4m 33sRunning iteration 971/1500... Est. remaining: 4m 28sRunning iteration 981/1500... Est. remaining: 4m 23sRunning iteration 991/1500... Est. remaining: 4m 18sRunning iteration 1001/1500... Est. remaining: 4m 13sbest_combination: {'lookbacks': [158, 161, 172], 'score': np.float64(0.9581352023826829), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 7sRunning iteration 1021/1500... Est. remaining: 4m 2sRunning iteration 1031/1500... Est. remaining: 3m 57sRunning iteration 1041/1500... Est. remaining: 3m 52sRunning iteration 1051/1500... Est. remaining: 3m 47sRunning iteration 1061/1500... Est. remaining: 3m 42sRunning iteration 1071/1500... Est. remaining: 3m 37sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 21sbest_combination: {'lookbacks': [158, 161, 172], 'score': np.float64(0.9581352023826829), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 16sRunning iteration 1121/1500... Est. remaining: 3m 11sRunning iteration 1131/1500... Est. remaining: 3m 6sRunning iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 56sRunning iteration 1161/1500... Est. remaining: 2m 51sRunning iteration 1171/1500... Est. remaining: 2m 46sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [158, 161, 172], 'score': np.float64(0.9581352023826829), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [158, 161, 172], 'score': np.float64(0.9581352023826829), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [158, 161, 172], 'score': np.float64(0.9581352023826829), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 0.96
best_combination: {'lookbacks': [158, 161, 172], 'score': np.float64(0.9581352023826829), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [158, 161, 172] (score: 0.9581)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [158, 161, 172] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 117 selections (28.1%)
2. sp500_hma: 105 selections (25.2%)
3. naz100_pine: 81 selections (19.5%)
4. naz100_pi: 77 selections (18.5%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,070,968,658.23
Average Annualized Gain: 49.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Tue Aug 26 15:30:19 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $575,047,621
Annual Return: 37.19%
Sharpe Ratio: 1.25749
Sortino Ratio: 1.183
Max Drawdown: -55.0%
Avg Drawdown: -13.6%
Normalized Score: -0.930
Lookback periods: [75, 149, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,182,876,258
Annual Return: 40.08%
Sharpe Ratio: 1.34187
Sortino Ratio: 1.286
Max Drawdown: -63.4%
Avg Drawdown: -14.5%
Normalized Score: -0.905
Lookback periods: [112, 124, 132] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $898,759,126
Annual Return: 38.97%
Sharpe Ratio: 1.38087
Sortino Ratio: 1.268
Max Drawdown: -56.5%
Avg Drawdown: -12.4%
Normalized Score: -0.457
Lookback periods: [32, 119, 137] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,068,507,302
Annual Return: 42.35%
Sharpe Ratio: 1.41339
Sortino Ratio: 1.355
Max Drawdown: -58.8%
Avg Drawdown: -12.7%
Normalized Score: -0.275
Lookback periods: [127, 159, 255] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $653,195,108
Annual Return: 37.70%
Sharpe Ratio: 1.35899
Sortino Ratio: 1.256
Max Drawdown: -47.9%
Avg Drawdown: -11.3%
Normalized Score: -0.179
Lookback periods: [43, 63, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 44sRunning iteration 31/1500... Est. remaining: 19m 8sRunning iteration 41/1500... Est. remaining: 17m 20sRunning iteration 51/1500... Est. remaining: 16m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,398,912,331
Annual Return: 45.49%
Sharpe Ratio: 1.47273
Sortino Ratio: 1.432
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.185
Lookback periods: [174, 189, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 15m 50sRunning iteration 71/1500... Est. remaining: 15m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,693,052,987
Annual Return: 46.57%
Sharpe Ratio: 1.50912
Sortino Ratio: 1.473
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.332
Lookback periods: [169, 187, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 14m 56sRunning iteration 91/1500... Est. remaining: 14m 29sRunning iteration 101/1500... Est. remaining: 14m 4sbest_combination: {'lookbacks': [169, 187, 189], 'score': np.float64(0.3320963125150613), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 43sRunning iteration 121/1500... Est. remaining: 13m 25sRunning iteration 131/1500... Est. remaining: 13m 9sRunning iteration 141/1500... Est. remaining: 12m 54sRunning iteration 151/1500... Est. remaining: 12m 40sRunning iteration 161/1500... Est. remaining: 12m 28sRunning iteration 171/1500... Est. remaining: 12m 16sRunning iteration 181/1500... Est. remaining: 12m 6sRunning iteration 191/1500... Est. remaining: 11m 56sRunning iteration 201/1500... Est. remaining: 11m 46sbest_combination: {'lookbacks': [169, 187, 189], 'score': np.float64(0.3320963125150613), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,420,983,296
Annual Return: 40.82%
Sharpe Ratio: 1.45009
Sortino Ratio: 1.351
Max Drawdown: -41.9%
Avg Drawdown: -10.3%
Normalized Score: 0.478
Lookback periods: [40, 51, 109] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 11m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,199,471,109
Annual Return: 40.13%
Sharpe Ratio: 1.45252
Sortino Ratio: 1.354
Max Drawdown: -37.8%
Avg Drawdown: -10.0%
Normalized Score: 0.613
Lookback periods: [48, 55, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 11m 35sRunning iteration 241/1500... Est. remaining: 11m 27sRunning iteration 251/1500... Est. remaining: 11m 19sRunning iteration 261/1500... Est. remaining: 11m 12sRunning iteration 271/1500... Est. remaining: 11m 4sRunning iteration 281/1500... Est. remaining: 10m 57sRunning iteration 291/1500... Est. remaining: 10m 50sRunning iteration 301/1500... Est. remaining: 10m 43sbest_combination: {'lookbacks': [48, 55, 98], 'score': np.float64(0.6129684681021614), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 36sRunning iteration 321/1500... Est. remaining: 10m 29sRunning iteration 331/1500... Est. remaining: 10m 22sRunning iteration 341/1500... Est. remaining: 10m 16sRunning iteration 351/1500... Est. remaining: 10m 9sRunning iteration 361/1500... Est. remaining: 10m 3sRunning iteration 371/1500... Est. remaining: 9m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,985,757,942
Annual Return: 42.19%
Sharpe Ratio: 1.51864
Sortino Ratio: 1.422
Max Drawdown: -37.8%
Avg Drawdown: -9.6%
Normalized Score: 0.911
Lookback periods: [45, 54, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 9m 53sRunning iteration 391/1500... Est. remaining: 9m 47sRunning iteration 401/1500... Est. remaining: 9m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,008,937,375
Annual Return: 46.03%
Sharpe Ratio: 1.67914
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.739
Lookback periods: [41, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.7392517168625907), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 38sRunning iteration 421/1500... Est. remaining: 9m 32sRunning iteration 431/1500... Est. remaining: 9m 25sRunning iteration 441/1500... Est. remaining: 9m 19sRunning iteration 451/1500... Est. remaining: 9m 13sRunning iteration 461/1500... Est. remaining: 9m 7sRunning iteration 471/1500... Est. remaining: 9m 1sRunning iteration 481/1500... Est. remaining: 8m 55sRunning iteration 491/1500... Est. remaining: 8m 49sRunning iteration 501/1500... Est. remaining: 8m 43sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.7392517168625907), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 37sRunning iteration 521/1500... Est. remaining: 8m 31sRunning iteration 531/1500... Est. remaining: 8m 25sRunning iteration 541/1500... Est. remaining: 8m 19sRunning iteration 551/1500... Est. remaining: 8m 13sRunning iteration 561/1500... Est. remaining: 8m 8sRunning iteration 571/1500... Est. remaining: 8m 2sRunning iteration 581/1500... Est. remaining: 7m 56sRunning iteration 591/1500... Est. remaining: 7m 51sRunning iteration 601/1500... Est. remaining: 7m 45sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.7392517168625907), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 39sRunning iteration 621/1500... Est. remaining: 7m 34sRunning iteration 631/1500... Est. remaining: 7m 28sRunning iteration 641/1500... Est. remaining: 7m 23sRunning iteration 651/1500... Est. remaining: 7m 17sRunning iteration 661/1500... Est. remaining: 7m 12sRunning iteration 671/1500... Est. remaining: 7m 6sRunning iteration 681/1500... Est. remaining: 7m 1sRunning iteration 691/1500... Est. remaining: 6m 55sRunning iteration 701/1500... Est. remaining: 6m 50sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.7392517168625907), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 44sRunning iteration 721/1500... Est. remaining: 6m 39sRunning iteration 731/1500... Est. remaining: 6m 34sRunning iteration 741/1500... Est. remaining: 6m 28sRunning iteration 751/1500... Est. remaining: 6m 23sRunning iteration 761/1500... Est. remaining: 6m 17sRunning iteration 771/1500... Est. remaining: 6m 12sRunning iteration 781/1500... Est. remaining: 6m 7sRunning iteration 791/1500... Est. remaining: 6m 1sRunning iteration 801/1500... Est. remaining: 5m 56sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.7392517168625907), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 50sRunning iteration 821/1500... Est. remaining: 5m 45sRunning iteration 831/1500... Est. remaining: 5m 40sRunning iteration 841/1500... Est. remaining: 5m 34sRunning iteration 851/1500... Est. remaining: 5m 29sRunning iteration 861/1500... Est. remaining: 5m 24sRunning iteration 871/1500... Est. remaining: 5m 19sRunning iteration 881/1500... Est. remaining: 5m 13sRunning iteration 891/1500... Est. remaining: 5m 8sRunning iteration 901/1500... Est. remaining: 5m 3sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.7392517168625907), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 58sRunning iteration 921/1500... Est. remaining: 4m 53sRunning iteration 931/1500... Est. remaining: 4m 48sRunning iteration 941/1500... Est. remaining: 4m 43sRunning iteration 951/1500... Est. remaining: 4m 37sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 17sRunning iteration 1001/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.7392517168625907), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 7sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.7392517168625907), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.7392517168625907), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.7392517168625907), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.7392517168625907), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.74
best_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.7392517168625907), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 52, 98] (score: 1.7393)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,008,937,374.54
Average Annualized Gain: 46.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Tue Aug 26 15:42:51 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $85,967,061
Annual Return: 29.87%
Sharpe Ratio: 1.06560
Sortino Ratio: 0.949
Max Drawdown: -68.7%
Avg Drawdown: -14.7%
Normalized Score: -2.070
Lookback periods: [55, 90, 256] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,335,221,886
Annual Return: 44.33%
Sharpe Ratio: 1.43665
Sortino Ratio: 1.406
Max Drawdown: -60.8%
Avg Drawdown: -12.6%
Normalized Score: 0.023
Lookback periods: [148, 171, 212] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 29sRunning iteration 21/1500... Est. remaining: 18m 4sRunning iteration 31/1500... Est. remaining: 15m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,073,195,928
Annual Return: 43.99%
Sharpe Ratio: 1.46535
Sortino Ratio: 1.420
Max Drawdown: -59.5%
Avg Drawdown: -12.1%
Normalized Score: 0.080
Lookback periods: [117, 161, 207] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 15m 27sRunning iteration 51/1500... Est. remaining: 14m 41sRunning iteration 61/1500... Est. remaining: 14m 7sRunning iteration 71/1500... Est. remaining: 13m 42sRunning iteration 81/1500... Est. remaining: 13m 20sRunning iteration 91/1500... Est. remaining: 13m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,529,443,138
Annual Return: 44.57%
Sharpe Ratio: 1.48768
Sortino Ratio: 1.434
Max Drawdown: -60.1%
Avg Drawdown: -12.3%
Normalized Score: 0.146
Lookback periods: [115, 159, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 13m 2sbest_combination: {'lookbacks': [115, 159, 201], 'score': np.float64(0.14623607646986164), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 50sRunning iteration 121/1500... Est. remaining: 12m 37sRunning iteration 131/1500... Est. remaining: 12m 25sRunning iteration 141/1500... Est. remaining: 12m 14sRunning iteration 151/1500... Est. remaining: 12m 3sRunning iteration 161/1500... Est. remaining: 11m 54sRunning iteration 171/1500... Est. remaining: 11m 45sRunning iteration 181/1500... Est. remaining: 11m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,936,446,663
Annual Return: 45.97%
Sharpe Ratio: 1.50175
Sortino Ratio: 1.463
Max Drawdown: -61.2%
Avg Drawdown: -12.6%
Normalized Score: 0.273
Lookback periods: [146, 183, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 11m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,088,785,318
Annual Return: 42.39%
Sharpe Ratio: 1.53690
Sortino Ratio: 1.445
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.362
Lookback periods: [37, 46, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 11m 36sbest_combination: {'lookbacks': [37, 46, 90], 'score': np.float64(0.3620077678938675), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 29sRunning iteration 221/1500... Est. remaining: 11m 21sRunning iteration 231/1500... Est. remaining: 11m 14sRunning iteration 241/1500... Est. remaining: 11m 7sRunning iteration 251/1500... Est. remaining: 11m 0sRunning iteration 261/1500... Est. remaining: 10m 53sRunning iteration 271/1500... Est. remaining: 10m 45sRunning iteration 281/1500... Est. remaining: 10m 38sRunning iteration 291/1500... Est. remaining: 10m 31sRunning iteration 301/1500... Est. remaining: 10m 24sbest_combination: {'lookbacks': [37, 46, 90], 'score': np.float64(0.3620077678938675), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 18sRunning iteration 321/1500... Est. remaining: 10m 12sRunning iteration 331/1500... Est. remaining: 10m 5sRunning iteration 341/1500... Est. remaining: 9m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,229,136,782
Annual Return: 47.59%
Sharpe Ratio: 1.54095
Sortino Ratio: 1.502
Max Drawdown: -61.2%
Avg Drawdown: -11.2%
Normalized Score: 0.533
Lookback periods: [184, 193, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 351/1500... Est. remaining: 9m 57sRunning iteration 361/1500... Est. remaining: 9m 50sRunning iteration 371/1500... Est. remaining: 9m 44sRunning iteration 381/1500... Est. remaining: 9m 38sRunning iteration 391/1500... Est. remaining: 9m 32sRunning iteration 401/1500... Est. remaining: 9m 26sbest_combination: {'lookbacks': [184, 193, 193], 'score': np.float64(0.5325554624479985), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 20sRunning iteration 421/1500... Est. remaining: 9m 14sRunning iteration 431/1500... Est. remaining: 9m 8sRunning iteration 441/1500... Est. remaining: 9m 3sRunning iteration 451/1500... Est. remaining: 8m 57sRunning iteration 461/1500... Est. remaining: 8m 51sRunning iteration 471/1500... Est. remaining: 8m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,662,349,161
Annual Return: 48.36%
Sharpe Ratio: 1.55183
Sortino Ratio: 1.502
Max Drawdown: -59.6%
Avg Drawdown: -11.3%
Normalized Score: 0.603
Lookback periods: [188, 189, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 8m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,193,377,320
Annual Return: 49.46%
Sharpe Ratio: 1.59997
Sortino Ratio: 1.557
Max Drawdown: -59.6%
Avg Drawdown: -11.0%
Normalized Score: 0.810
Lookback periods: [183, 189, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 8m 39sRunning iteration 501/1500... Est. remaining: 8m 34sbest_combination: {'lookbacks': [183, 189, 194], 'score': np.float64(0.8101602524334691), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 28sRunning iteration 521/1500... Est. remaining: 8m 23sRunning iteration 531/1500... Est. remaining: 8m 17sRunning iteration 541/1500... Est. remaining: 8m 12sRunning iteration 551/1500... Est. remaining: 8m 6sRunning iteration 561/1500... Est. remaining: 8m 1sRunning iteration 571/1500... Est. remaining: 7m 55sRunning iteration 581/1500... Est. remaining: 7m 50sRunning iteration 591/1500... Est. remaining: 7m 45sRunning iteration 601/1500... Est. remaining: 7m 39sbest_combination: {'lookbacks': [183, 189, 194], 'score': np.float64(0.8101602524334691), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 34sRunning iteration 621/1500... Est. remaining: 7m 28sRunning iteration 631/1500... Est. remaining: 7m 23sRunning iteration 641/1500... Est. remaining: 7m 18sRunning iteration 651/1500... Est. remaining: 7m 12sRunning iteration 661/1500... Est. remaining: 7m 7sRunning iteration 671/1500... Est. remaining: 7m 2sRunning iteration 681/1500... Est. remaining: 6m 56sRunning iteration 691/1500... Est. remaining: 6m 51sRunning iteration 701/1500... Est. remaining: 6m 46sbest_combination: {'lookbacks': [183, 189, 194], 'score': np.float64(0.8101602524334691), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 40sRunning iteration 721/1500... Est. remaining: 6m 35sRunning iteration 731/1500... Est. remaining: 6m 30sRunning iteration 741/1500... Est. remaining: 6m 25sRunning iteration 751/1500... Est. remaining: 6m 19sRunning iteration 761/1500... Est. remaining: 6m 14sRunning iteration 771/1500... Est. remaining: 6m 9sRunning iteration 781/1500... Est. remaining: 6m 4sRunning iteration 791/1500... Est. remaining: 5m 58sRunning iteration 801/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [183, 189, 194], 'score': np.float64(0.8101602524334691), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 48sRunning iteration 821/1500... Est. remaining: 5m 43sRunning iteration 831/1500... Est. remaining: 5m 37sRunning iteration 841/1500... Est. remaining: 5m 32sRunning iteration 851/1500... Est. remaining: 5m 27sRunning iteration 861/1500... Est. remaining: 5m 22sRunning iteration 871/1500... Est. remaining: 5m 17sRunning iteration 881/1500... Est. remaining: 5m 12sRunning iteration 891/1500... Est. remaining: 5m 7sRunning iteration 901/1500... Est. remaining: 5m 2sbest_combination: {'lookbacks': [183, 189, 194], 'score': np.float64(0.8101602524334691), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 57sRunning iteration 921/1500... Est. remaining: 4m 52sRunning iteration 931/1500... Est. remaining: 4m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,711,047,570
Annual Return: 49.66%
Sharpe Ratio: 1.60562
Sortino Ratio: 1.564
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.828
Lookback periods: [180, 189, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 4m 42sRunning iteration 951/1500... Est. remaining: 4m 37sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [180, 189, 198], 'score': np.float64(0.827843982503285), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [180, 189, 198], 'score': np.float64(0.827843982503285), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [180, 189, 198], 'score': np.float64(0.827843982503285), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [180, 189, 198], 'score': np.float64(0.827843982503285), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $14,119,368,532
Annual Return: 50.47%
Sharpe Ratio: 1.62521
Sortino Ratio: 1.589
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.946
Lookback periods: [178, 189, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [178, 189, 194], 'score': np.float64(0.9462009460231634), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 0.95
best_combination: {'lookbacks': [178, 189, 194], 'score': np.float64(0.9462009460231634), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [178, 189, 194] (score: 0.9462)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [178, 189, 194] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 121 selections (29.1%)
2. sp500_hma: 100 selections (24.0%)
3. naz100_pine: 85 selections (20.4%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 41 selections (9.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $14,119,368,531.58
Average Annualized Gain: 50.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Tue Aug 26 15:55:30 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $735,552,658
Annual Return: 38.17%
Sharpe Ratio: 1.32145
Sortino Ratio: 1.240
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: -0.832
Lookback periods: [83, 99, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $864,103,490
Annual Return: 38.81%
Sharpe Ratio: 1.32195
Sortino Ratio: 1.248
Max Drawdown: -52.3%
Avg Drawdown: -11.3%
Normalized Score: -0.735
Lookback periods: [80, 108, 121] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,268,092,706
Annual Return: 42.73%
Sharpe Ratio: 1.42057
Sortino Ratio: 1.364
Max Drawdown: -61.7%
Avg Drawdown: -12.0%
Normalized Score: -0.273
Lookback periods: [186, 248, 277] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 22sRunning iteration 21/1500... Est. remaining: 19m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,951,895,399
Annual Return: 45.99%
Sharpe Ratio: 1.50846
Sortino Ratio: 1.464
Max Drawdown: -57.2%
Avg Drawdown: -11.9%
Normalized Score: 0.471
Lookback periods: [132, 157, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 1sRunning iteration 41/1500... Est. remaining: 16m 24sRunning iteration 51/1500... Est. remaining: 15m 24sRunning iteration 61/1500... Est. remaining: 14m 40sRunning iteration 71/1500... Est. remaining: 14m 9sRunning iteration 81/1500... Est. remaining: 13m 44sRunning iteration 91/1500... Est. remaining: 13m 23sRunning iteration 101/1500... Est. remaining: 13m 7sbest_combination: {'lookbacks': [132, 157, 174], 'score': np.float64(0.47111295753621496), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 52sRunning iteration 121/1500... Est. remaining: 12m 39sRunning iteration 131/1500... Est. remaining: 12m 29sRunning iteration 141/1500... Est. remaining: 12m 19sRunning iteration 151/1500... Est. remaining: 12m 11sRunning iteration 161/1500... Est. remaining: 12m 2sRunning iteration 171/1500... Est. remaining: 11m 54sRunning iteration 181/1500... Est. remaining: 11m 46sRunning iteration 191/1500... Est. remaining: 11m 38sRunning iteration 201/1500... Est. remaining: 11m 31sbest_combination: {'lookbacks': [132, 157, 174], 'score': np.float64(0.47111295753621496), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 24sRunning iteration 221/1500... Est. remaining: 11m 17sRunning iteration 231/1500... Est. remaining: 11m 11sRunning iteration 241/1500... Est. remaining: 11m 5sRunning iteration 251/1500... Est. remaining: 10m 58sRunning iteration 261/1500... Est. remaining: 10m 52sRunning iteration 271/1500... Est. remaining: 10m 45sRunning iteration 281/1500... Est. remaining: 10m 38sRunning iteration 291/1500... Est. remaining: 10m 32sRunning iteration 301/1500... Est. remaining: 10m 25sbest_combination: {'lookbacks': [132, 157, 174], 'score': np.float64(0.47111295753621496), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 20sRunning iteration 321/1500... Est. remaining: 10m 14sRunning iteration 331/1500... Est. remaining: 10m 7sRunning iteration 341/1500... Est. remaining: 10m 1sRunning iteration 351/1500... Est. remaining: 9m 55sRunning iteration 361/1500... Est. remaining: 9m 49sRunning iteration 371/1500... Est. remaining: 9m 43sRunning iteration 381/1500... Est. remaining: 9m 37sRunning iteration 391/1500... Est. remaining: 9m 32sRunning iteration 401/1500... Est. remaining: 9m 26sbest_combination: {'lookbacks': [132, 157, 174], 'score': np.float64(0.47111295753621496), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,592,731,536
Annual Return: 46.50%
Sharpe Ratio: 1.52897
Sortino Ratio: 1.493
Max Drawdown: -56.4%
Avg Drawdown: -12.0%
Normalized Score: 0.620
Lookback periods: [128, 149, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 9m 24sRunning iteration 421/1500... Est. remaining: 9m 18sRunning iteration 431/1500... Est. remaining: 9m 12sRunning iteration 441/1500... Est. remaining: 9m 6sRunning iteration 451/1500... Est. remaining: 9m 1sRunning iteration 461/1500... Est. remaining: 8m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,937,321,801
Annual Return: 46.75%
Sharpe Ratio: 1.55378
Sortino Ratio: 1.510
Max Drawdown: -57.2%
Avg Drawdown: -12.0%
Normalized Score: 0.689
Lookback periods: [139, 149, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 8m 52sRunning iteration 481/1500... Est. remaining: 8m 46sRunning iteration 491/1500... Est. remaining: 8m 40sRunning iteration 501/1500... Est. remaining: 8m 35sbest_combination: {'lookbacks': [139, 149, 159], 'score': np.float64(0.6893931879552786), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,753,031,477
Annual Return: 47.89%
Sharpe Ratio: 1.57279
Sortino Ratio: 1.539
Max Drawdown: -62.4%
Avg Drawdown: -11.6%
Normalized Score: 0.752
Lookback periods: [128, 154, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 26sRunning iteration 531/1500... Est. remaining: 8m 20sRunning iteration 541/1500... Est. remaining: 8m 14sRunning iteration 551/1500... Est. remaining: 8m 9sRunning iteration 561/1500... Est. remaining: 8m 3sRunning iteration 571/1500... Est. remaining: 7m 57sRunning iteration 581/1500... Est. remaining: 7m 52sRunning iteration 591/1500... Est. remaining: 7m 46sRunning iteration 601/1500... Est. remaining: 7m 41sbest_combination: {'lookbacks': [128, 154, 171], 'score': np.float64(0.7517597959662888), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 35sRunning iteration 621/1500... Est. remaining: 7m 30sRunning iteration 631/1500... Est. remaining: 7m 24sRunning iteration 641/1500... Est. remaining: 7m 19sRunning iteration 651/1500... Est. remaining: 7m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,624,660,790
Annual Return: 47.81%
Sharpe Ratio: 1.57836
Sortino Ratio: 1.531
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.885
Lookback periods: [134, 156, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 10sRunning iteration 671/1500... Est. remaining: 7m 4sRunning iteration 681/1500... Est. remaining: 6m 59sRunning iteration 691/1500... Est. remaining: 6m 54sRunning iteration 701/1500... Est. remaining: 6m 48sbest_combination: {'lookbacks': [134, 156, 178], 'score': np.float64(0.8850149071742275), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 43sRunning iteration 721/1500... Est. remaining: 6m 37sRunning iteration 731/1500... Est. remaining: 6m 32sRunning iteration 741/1500... Est. remaining: 6m 27sRunning iteration 751/1500... Est. remaining: 6m 21sRunning iteration 761/1500... Est. remaining: 6m 16sRunning iteration 771/1500... Est. remaining: 6m 11sRunning iteration 781/1500... Est. remaining: 6m 5sRunning iteration 791/1500... Est. remaining: 6m 0sRunning iteration 801/1500... Est. remaining: 5m 55sbest_combination: {'lookbacks': [134, 156, 178], 'score': np.float64(0.8850149071742275), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 50sRunning iteration 821/1500... Est. remaining: 5m 44sRunning iteration 831/1500... Est. remaining: 5m 39sRunning iteration 841/1500... Est. remaining: 5m 34sRunning iteration 851/1500... Est. remaining: 5m 29sRunning iteration 861/1500... Est. remaining: 5m 23sRunning iteration 871/1500... Est. remaining: 5m 18sRunning iteration 881/1500... Est. remaining: 5m 13sRunning iteration 891/1500... Est. remaining: 5m 8sRunning iteration 901/1500... Est. remaining: 5m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,832,680,092
Annual Return: 49.70%
Sharpe Ratio: 1.62875
Sortino Ratio: 1.593
Max Drawdown: -57.2%
Avg Drawdown: -10.6%
Normalized Score: 1.272
Lookback periods: [139, 154, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.2717958677395433), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 58sRunning iteration 921/1500... Est. remaining: 4m 53sRunning iteration 931/1500... Est. remaining: 4m 48sRunning iteration 941/1500... Est. remaining: 4m 42sRunning iteration 951/1500... Est. remaining: 4m 37sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.2717958677395433), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.2717958677395433), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.2717958677395433), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.2717958677395433), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.2717958677395433), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.27
best_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.2717958677395433), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 154, 171] (score: 1.2718)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 154, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,832,680,091.79
Average Annualized Gain: 49.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Tue Aug 26 16:08:03 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $183,333,153
Annual Return: 32.74%
Sharpe Ratio: 1.16844
Sortino Ratio: 1.081
Max Drawdown: -60.5%
Avg Drawdown: -13.9%
Normalized Score: -1.175
Lookback periods: [27, 147, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $856,333,992
Annual Return: 38.78%
Sharpe Ratio: 1.33980
Sortino Ratio: 1.241
Max Drawdown: -66.4%
Avg Drawdown: -12.3%
Normalized Score: -0.570
Lookback periods: [42, 187, 251] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,084,967,724
Annual Return: 39.73%
Sharpe Ratio: 1.33880
Sortino Ratio: 1.266
Max Drawdown: -62.6%
Avg Drawdown: -14.0%
Normalized Score: -0.476
Lookback periods: [97, 105, 129] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,324,039,005
Annual Return: 44.32%
Sharpe Ratio: 1.44746
Sortino Ratio: 1.406
Max Drawdown: -61.4%
Avg Drawdown: -12.8%
Normalized Score: 0.132
Lookback periods: [130, 178, 211] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,830,355,454
Annual Return: 44.91%
Sharpe Ratio: 1.49986
Sortino Ratio: 1.460
Max Drawdown: -60.8%
Avg Drawdown: -11.8%
Normalized Score: 0.359
Lookback periods: [166, 251, 268] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 34m 30sRunning iteration 21/1500... Est. remaining: 23m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,149,860,447
Annual Return: 46.15%
Sharpe Ratio: 1.49175
Sortino Ratio: 1.454
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.455
Lookback periods: [177, 190, 207] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 26sRunning iteration 41/1500... Est. remaining: 18m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,052,849,716
Annual Return: 45.14%
Sharpe Ratio: 1.50621
Sortino Ratio: 1.456
Max Drawdown: -56.9%
Avg Drawdown: -12.2%
Normalized Score: 0.457
Lookback periods: [130, 150, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 17m 32sRunning iteration 61/1500... Est. remaining: 16m 33sRunning iteration 71/1500... Est. remaining: 15m 48sRunning iteration 81/1500... Est. remaining: 15m 13sRunning iteration 91/1500... Est. remaining: 14m 44sRunning iteration 101/1500... Est. remaining: 14m 20sbest_combination: {'lookbacks': [130, 150, 152], 'score': np.float64(0.45720798409627816), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 58sRunning iteration 121/1500... Est. remaining: 13m 41sRunning iteration 131/1500... Est. remaining: 13m 25sRunning iteration 141/1500... Est. remaining: 13m 11sRunning iteration 151/1500... Est. remaining: 12m 58sRunning iteration 161/1500... Est. remaining: 12m 45sRunning iteration 171/1500... Est. remaining: 12m 33sRunning iteration 181/1500... Est. remaining: 12m 22sRunning iteration 191/1500... Est. remaining: 12m 11sRunning iteration 201/1500... Est. remaining: 12m 2sbest_combination: {'lookbacks': [130, 150, 152], 'score': np.float64(0.45720798409627816), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 53sRunning iteration 221/1500... Est. remaining: 11m 44sRunning iteration 231/1500... Est. remaining: 11m 36sRunning iteration 241/1500... Est. remaining: 11m 28sRunning iteration 251/1500... Est. remaining: 11m 21sRunning iteration 261/1500... Est. remaining: 11m 13sRunning iteration 271/1500... Est. remaining: 11m 6sRunning iteration 281/1500... Est. remaining: 10m 58sRunning iteration 291/1500... Est. remaining: 10m 51sRunning iteration 301/1500... Est. remaining: 10m 44sbest_combination: {'lookbacks': [130, 150, 152], 'score': np.float64(0.45720798409627816), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 37sRunning iteration 321/1500... Est. remaining: 10m 30sRunning iteration 331/1500... Est. remaining: 10m 24sRunning iteration 341/1500... Est. remaining: 10m 17sRunning iteration 351/1500... Est. remaining: 10m 11sRunning iteration 361/1500... Est. remaining: 10m 4sRunning iteration 371/1500... Est. remaining: 9m 58sRunning iteration 381/1500... Est. remaining: 9m 52sRunning iteration 391/1500... Est. remaining: 9m 45sRunning iteration 401/1500... Est. remaining: 9m 39sbest_combination: {'lookbacks': [130, 150, 152], 'score': np.float64(0.45720798409627816), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 33sRunning iteration 421/1500... Est. remaining: 9m 27sRunning iteration 431/1500... Est. remaining: 9m 21sRunning iteration 441/1500... Est. remaining: 9m 15sRunning iteration 451/1500... Est. remaining: 9m 9sRunning iteration 461/1500... Est. remaining: 9m 3sRunning iteration 471/1500... Est. remaining: 8m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,387,652,819
Annual Return: 46.34%
Sharpe Ratio: 1.53701
Sortino Ratio: 1.495
Max Drawdown: -56.0%
Avg Drawdown: -12.1%
Normalized Score: 0.627
Lookback periods: [136, 136, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 8m 54sRunning iteration 491/1500... Est. remaining: 8m 49sRunning iteration 501/1500... Est. remaining: 8m 43sbest_combination: {'lookbacks': [136, 136, 159], 'score': np.float64(0.6272457589565367), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,096,282,774
Annual Return: 47.51%
Sharpe Ratio: 1.56173
Sortino Ratio: 1.522
Max Drawdown: -56.8%
Avg Drawdown: -11.6%
Normalized Score: 0.749
Lookback periods: [139, 140, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 8m 40sRunning iteration 521/1500... Est. remaining: 8m 34sRunning iteration 531/1500... Est. remaining: 8m 28sRunning iteration 541/1500... Est. remaining: 8m 22sRunning iteration 551/1500... Est. remaining: 8m 16sRunning iteration 561/1500... Est. remaining: 8m 11sRunning iteration 571/1500... Est. remaining: 8m 5sRunning iteration 581/1500... Est. remaining: 7m 59sRunning iteration 591/1500... Est. remaining: 7m 54sRunning iteration 601/1500... Est. remaining: 7m 48sbest_combination: {'lookbacks': [139, 140, 171], 'score': np.float64(0.7486970335836706), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 43sRunning iteration 621/1500... Est. remaining: 7m 37sRunning iteration 631/1500... Est. remaining: 7m 32sRunning iteration 641/1500... Est. remaining: 7m 26sRunning iteration 651/1500... Est. remaining: 7m 21sRunning iteration 661/1500... Est. remaining: 7m 15sRunning iteration 671/1500... Est. remaining: 7m 10sRunning iteration 681/1500... Est. remaining: 7m 4sRunning iteration 691/1500... Est. remaining: 6m 59sRunning iteration 701/1500... Est. remaining: 6m 53sbest_combination: {'lookbacks': [139, 140, 171], 'score': np.float64(0.7486970335836706), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 48sRunning iteration 721/1500... Est. remaining: 6m 42sRunning iteration 731/1500... Est. remaining: 6m 37sRunning iteration 741/1500... Est. remaining: 6m 32sRunning iteration 751/1500... Est. remaining: 6m 26sRunning iteration 761/1500... Est. remaining: 6m 21sRunning iteration 771/1500... Est. remaining: 6m 16sRunning iteration 781/1500... Est. remaining: 6m 10sRunning iteration 791/1500... Est. remaining: 6m 5sRunning iteration 801/1500... Est. remaining: 6m 0sbest_combination: {'lookbacks': [139, 140, 171], 'score': np.float64(0.7486970335836706), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 54sRunning iteration 821/1500... Est. remaining: 5m 49sRunning iteration 831/1500... Est. remaining: 5m 43sRunning iteration 841/1500... Est. remaining: 5m 38sRunning iteration 851/1500... Est. remaining: 5m 33sRunning iteration 861/1500... Est. remaining: 5m 27sRunning iteration 871/1500... Est. remaining: 5m 22sRunning iteration 881/1500... Est. remaining: 5m 17sRunning iteration 891/1500... Est. remaining: 5m 11sRunning iteration 901/1500... Est. remaining: 5m 6sbest_combination: {'lookbacks': [139, 140, 171], 'score': np.float64(0.7486970335836706), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 1sRunning iteration 921/1500... Est. remaining: 4m 56sRunning iteration 931/1500... Est. remaining: 4m 50sRunning iteration 941/1500... Est. remaining: 4m 45sRunning iteration 951/1500... Est. remaining: 4m 40sRunning iteration 961/1500... Est. remaining: 4m 35sRunning iteration 971/1500... Est. remaining: 4m 29sRunning iteration 981/1500... Est. remaining: 4m 24sRunning iteration 991/1500... Est. remaining: 4m 19sRunning iteration 1001/1500... Est. remaining: 4m 14sbest_combination: {'lookbacks': [139, 140, 171], 'score': np.float64(0.7486970335836706), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 8sRunning iteration 1021/1500... Est. remaining: 4m 3sRunning iteration 1031/1500... Est. remaining: 3m 58sRunning iteration 1041/1500... Est. remaining: 3m 53sRunning iteration 1051/1500... Est. remaining: 3m 48sRunning iteration 1061/1500... Est. remaining: 3m 43sRunning iteration 1071/1500... Est. remaining: 3m 38sRunning iteration 1081/1500... Est. remaining: 3m 32sRunning iteration 1091/1500... Est. remaining: 3m 27sRunning iteration 1101/1500... Est. remaining: 3m 22sbest_combination: {'lookbacks': [139, 140, 171], 'score': np.float64(0.7486970335836706), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 17sRunning iteration 1121/1500... Est. remaining: 3m 12sRunning iteration 1131/1500... Est. remaining: 3m 7sRunning iteration 1141/1500... Est. remaining: 3m 2sRunning iteration 1151/1500... Est. remaining: 2m 57sRunning iteration 1161/1500... Est. remaining: 2m 52sRunning iteration 1171/1500... Est. remaining: 2m 46sRunning iteration 1181/1500... Est. remaining: 2m 41sRunning iteration 1191/1500... Est. remaining: 2m 36sRunning iteration 1201/1500... Est. remaining: 2m 31sbest_combination: {'lookbacks': [139, 140, 171], 'score': np.float64(0.7486970335836706), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 26sRunning iteration 1221/1500... Est. remaining: 2m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,586,125,305
Annual Return: 48.32%
Sharpe Ratio: 1.59370
Sortino Ratio: 1.563
Max Drawdown: -60.1%
Avg Drawdown: -11.4%
Normalized Score: 0.799
Lookback periods: [140, 153, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1231/1500... Est. remaining: 2m 16sRunning iteration 1241/1500... Est. remaining: 2m 11sRunning iteration 1251/1500... Est. remaining: 2m 6sRunning iteration 1261/1500... Est. remaining: 2m 1sRunning iteration 1271/1500... Est. remaining: 1m 56sRunning iteration 1281/1500... Est. remaining: 1m 51sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [140, 153, 158], 'score': np.float64(0.799375242935146), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 36sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,593,794,095
Annual Return: 48.33%
Sharpe Ratio: 1.59105
Sortino Ratio: 1.554
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.866
Lookback periods: [139, 153, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [139, 153, 156], 'score': np.float64(0.8662163763342063), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.6 minutes
Best normalized score: 0.87
best_combination: {'lookbacks': [139, 153, 156], 'score': np.float64(0.8662163763342063), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 153, 156] (score: 0.8662)

Monte Carlo simulation completed in 12.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 153, 156] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,593,794,095.05
Average Annualized Gain: 48.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Tue Aug 26 16:20:49 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $76,992,185
Annual Return: 29.46%
Sharpe Ratio: 1.02084
Sortino Ratio: 0.936
Max Drawdown: -69.7%
Avg Drawdown: -16.8%
Normalized Score: -6.875
Lookback periods: [72, 208, 221] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $928,488,939
Annual Return: 39.10%
Sharpe Ratio: 1.29157
Sortino Ratio: 1.237
Max Drawdown: -71.5%
Avg Drawdown: -13.5%
Normalized Score: -3.181
Lookback periods: [227, 229, 296] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,459,036,591
Annual Return: 40.93%
Sharpe Ratio: 1.37221
Sortino Ratio: 1.318
Max Drawdown: -67.8%
Avg Drawdown: -12.8%
Normalized Score: -2.308
Lookback periods: [140, 243, 278] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,490,488,873
Annual Return: 41.01%
Sharpe Ratio: 1.36338
Sortino Ratio: 1.303
Max Drawdown: -62.2%
Avg Drawdown: -12.8%
Normalized Score: -2.164
Lookback periods: [198, 262, 300] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,374,571,947
Annual Return: 40.69%
Sharpe Ratio: 1.38707
Sortino Ratio: 1.322
Max Drawdown: -60.3%
Avg Drawdown: -12.3%
Normalized Score: -2.137
Lookback periods: [148, 261, 264] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,834,202,533
Annual Return: 41.86%
Sharpe Ratio: 1.38606
Sortino Ratio: 1.346
Max Drawdown: -72.0%
Avg Drawdown: -12.9%
Normalized Score: -2.091
Lookback periods: [112, 165, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,629,489,070
Annual Return: 41.38%
Sharpe Ratio: 1.38001
Sortino Ratio: 1.335
Max Drawdown: -63.6%
Avg Drawdown: -12.8%
Normalized Score: -2.028
Lookback periods: [141, 236, 250] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,008,361,766
Annual Return: 42.23%
Sharpe Ratio: 1.38096
Sortino Ratio: 1.339
Max Drawdown: -67.8%
Avg Drawdown: -12.8%
Normalized Score: -1.875
Lookback periods: [173, 205, 273] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 28m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,801,798,642
Annual Return: 43.61%
Sharpe Ratio: 1.44602
Sortino Ratio: 1.401
Max Drawdown: -63.5%
Avg Drawdown: -12.8%
Normalized Score: -1.198
Lookback periods: [183, 252, 254] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,313,030,467
Annual Return: 44.30%
Sharpe Ratio: 1.48382
Sortino Ratio: 1.435
Max Drawdown: -62.7%
Avg Drawdown: -12.3%
Normalized Score: -0.859
Lookback periods: [106, 130, 142] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 24m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,942,923,763
Annual Return: 45.03%
Sharpe Ratio: 1.48094
Sortino Ratio: 1.440
Max Drawdown: -55.0%
Avg Drawdown: -12.5%
Normalized Score: -0.440
Lookback periods: [128, 145, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 22m 9sRunning iteration 51/1500... Est. remaining: 19m 58sRunning iteration 61/1500... Est. remaining: 18m 29sRunning iteration 71/1500... Est. remaining: 17m 22sRunning iteration 81/1500... Est. remaining: 16m 31sRunning iteration 91/1500... Est. remaining: 15m 52sRunning iteration 101/1500... Est. remaining: 15m 20sbest_combination: {'lookbacks': [128, 145, 181], 'score': np.float64(-0.43985670062336935), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 52sRunning iteration 121/1500... Est. remaining: 14m 28sRunning iteration 131/1500... Est. remaining: 14m 7sRunning iteration 141/1500... Est. remaining: 13m 49sRunning iteration 151/1500... Est. remaining: 13m 32sRunning iteration 161/1500... Est. remaining: 13m 17sRunning iteration 171/1500... Est. remaining: 13m 4sRunning iteration 181/1500... Est. remaining: 12m 51sRunning iteration 191/1500... Est. remaining: 12m 39sRunning iteration 201/1500... Est. remaining: 12m 27sbest_combination: {'lookbacks': [128, 145, 181], 'score': np.float64(-0.43985670062336935), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 16sRunning iteration 221/1500... Est. remaining: 12m 5sRunning iteration 231/1500... Est. remaining: 11m 55sRunning iteration 241/1500... Est. remaining: 11m 45sRunning iteration 251/1500... Est. remaining: 11m 35sRunning iteration 261/1500... Est. remaining: 11m 26sRunning iteration 271/1500... Est. remaining: 11m 17sRunning iteration 281/1500... Est. remaining: 11m 10sRunning iteration 291/1500... Est. remaining: 11m 1sRunning iteration 301/1500... Est. remaining: 10m 53sbest_combination: {'lookbacks': [128, 145, 181], 'score': np.float64(-0.43985670062336935), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 45sRunning iteration 321/1500... Est. remaining: 10m 38sRunning iteration 331/1500... Est. remaining: 10m 30sRunning iteration 341/1500... Est. remaining: 10m 22sRunning iteration 351/1500... Est. remaining: 10m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,017,690,121
Annual Return: 46.04%
Sharpe Ratio: 1.49844
Sortino Ratio: 1.450
Max Drawdown: -59.4%
Avg Drawdown: -11.4%
Normalized Score: -0.175
Lookback periods: [184, 194, 231] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 361/1500... Est. remaining: 10m 12sRunning iteration 371/1500... Est. remaining: 10m 5sRunning iteration 381/1500... Est. remaining: 9m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,447,468,873
Annual Return: 47.71%
Sharpe Ratio: 1.54267
Sortino Ratio: 1.508
Max Drawdown: -62.5%
Avg Drawdown: -12.4%
Normalized Score: 0.328
Lookback periods: [150, 155, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 9m 54sRunning iteration 401/1500... Est. remaining: 9m 48sbest_combination: {'lookbacks': [150, 155, 203], 'score': np.float64(0.3280811168666469), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 41sRunning iteration 421/1500... Est. remaining: 9m 34sRunning iteration 431/1500... Est. remaining: 9m 28sRunning iteration 441/1500... Est. remaining: 9m 21sRunning iteration 451/1500... Est. remaining: 9m 15sRunning iteration 461/1500... Est. remaining: 9m 8sRunning iteration 471/1500... Est. remaining: 9m 2sRunning iteration 481/1500... Est. remaining: 8m 56sRunning iteration 491/1500... Est. remaining: 8m 49sRunning iteration 501/1500... Est. remaining: 8m 43sbest_combination: {'lookbacks': [150, 155, 203], 'score': np.float64(0.3280811168666469), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 37sRunning iteration 521/1500... Est. remaining: 8m 31sRunning iteration 531/1500... Est. remaining: 8m 25sRunning iteration 541/1500... Est. remaining: 8m 19sRunning iteration 551/1500... Est. remaining: 8m 13sRunning iteration 561/1500... Est. remaining: 8m 7sRunning iteration 571/1500... Est. remaining: 8m 1sRunning iteration 581/1500... Est. remaining: 7m 56sRunning iteration 591/1500... Est. remaining: 7m 50sRunning iteration 601/1500... Est. remaining: 7m 44sbest_combination: {'lookbacks': [150, 155, 203], 'score': np.float64(0.3280811168666469), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 39sRunning iteration 621/1500... Est. remaining: 7m 33sRunning iteration 631/1500... Est. remaining: 7m 28sRunning iteration 641/1500... Est. remaining: 7m 22sRunning iteration 651/1500... Est. remaining: 7m 16sRunning iteration 661/1500... Est. remaining: 7m 11sRunning iteration 671/1500... Est. remaining: 7m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,051,439,733
Annual Return: 47.48%
Sharpe Ratio: 1.55142
Sortino Ratio: 1.517
Max Drawdown: -61.9%
Avg Drawdown: -11.5%
Normalized Score: 0.336
Lookback periods: [149, 158, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 7m 1sRunning iteration 691/1500... Est. remaining: 6m 56sRunning iteration 701/1500... Est. remaining: 6m 50sbest_combination: {'lookbacks': [149, 158, 163], 'score': np.float64(0.3362582778120089), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 45sRunning iteration 721/1500... Est. remaining: 6m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,182,966,042
Annual Return: 47.56%
Sharpe Ratio: 1.55696
Sortino Ratio: 1.520
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 0.475
Lookback periods: [144, 155, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 6m 35sRunning iteration 741/1500... Est. remaining: 6m 30sRunning iteration 751/1500... Est. remaining: 6m 24sRunning iteration 761/1500... Est. remaining: 6m 19sRunning iteration 771/1500... Est. remaining: 6m 13sRunning iteration 781/1500... Est. remaining: 6m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,543,504,451
Annual Return: 47.77%
Sharpe Ratio: 1.57717
Sortino Ratio: 1.535
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.598
Lookback periods: [138, 159, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 6m 3sRunning iteration 801/1500... Est. remaining: 5m 58sbest_combination: {'lookbacks': [138, 159, 167], 'score': np.float64(0.5976710598796677), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 53sRunning iteration 821/1500... Est. remaining: 5m 47sRunning iteration 831/1500... Est. remaining: 5m 42sRunning iteration 841/1500... Est. remaining: 5m 37sRunning iteration 851/1500... Est. remaining: 5m 31sRunning iteration 861/1500... Est. remaining: 5m 26sRunning iteration 871/1500... Est. remaining: 5m 21sRunning iteration 881/1500... Est. remaining: 5m 15sRunning iteration 891/1500... Est. remaining: 5m 10sRunning iteration 901/1500... Est. remaining: 5m 5sbest_combination: {'lookbacks': [138, 159, 167], 'score': np.float64(0.5976710598796677), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 59sRunning iteration 921/1500... Est. remaining: 4m 54sRunning iteration 931/1500... Est. remaining: 4m 49sRunning iteration 941/1500... Est. remaining: 4m 44sRunning iteration 951/1500... Est. remaining: 4m 38sRunning iteration 961/1500... Est. remaining: 4m 33sRunning iteration 971/1500... Est. remaining: 4m 28sRunning iteration 981/1500... Est. remaining: 4m 23sRunning iteration 991/1500... Est. remaining: 4m 17sRunning iteration 1001/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [138, 159, 167], 'score': np.float64(0.5976710598796677), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 7sRunning iteration 1021/1500... Est. remaining: 4m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,889,914,877
Annual Return: 47.96%
Sharpe Ratio: 1.57935
Sortino Ratio: 1.545
Max Drawdown: -58.5%
Avg Drawdown: -11.0%
Normalized Score: 0.660
Lookback periods: [139, 149, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1031/1500... Est. remaining: 3m 57sRunning iteration 1041/1500... Est. remaining: 3m 52sRunning iteration 1051/1500... Est. remaining: 3m 47sRunning iteration 1061/1500... Est. remaining: 3m 42sRunning iteration 1071/1500... Est. remaining: 3m 37sRunning iteration 1081/1500... Est. remaining: 3m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,114,063,483
Annual Return: 49.02%
Sharpe Ratio: 1.59165
Sortino Ratio: 1.557
Max Drawdown: -59.7%
Avg Drawdown: -11.5%
Normalized Score: 0.955
Lookback periods: [149, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1091/1500... Est. remaining: 3m 27sRunning iteration 1101/1500... Est. remaining: 3m 22sbest_combination: {'lookbacks': [149, 155, 172], 'score': np.float64(0.9546806438170774), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 17sRunning iteration 1121/1500... Est. remaining: 3m 12sRunning iteration 1131/1500... Est. remaining: 3m 6sRunning iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 56sRunning iteration 1161/1500... Est. remaining: 2m 51sRunning iteration 1171/1500... Est. remaining: 2m 46sRunning iteration 1181/1500... Est. remaining: 2m 41sRunning iteration 1191/1500... Est. remaining: 2m 36sRunning iteration 1201/1500... Est. remaining: 2m 31sbest_combination: {'lookbacks': [149, 155, 172], 'score': np.float64(0.9546806438170774), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 26sRunning iteration 1221/1500... Est. remaining: 2m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,857,274,624
Annual Return: 48.91%
Sharpe Ratio: 1.60884
Sortino Ratio: 1.575
Max Drawdown: -58.1%
Avg Drawdown: -11.3%
Normalized Score: 1.018
Lookback periods: [135, 153, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1231/1500... Est. remaining: 2m 16sRunning iteration 1241/1500... Est. remaining: 2m 11sRunning iteration 1251/1500... Est. remaining: 2m 6sRunning iteration 1261/1500... Est. remaining: 2m 1sRunning iteration 1271/1500... Est. remaining: 1m 56sRunning iteration 1281/1500... Est. remaining: 1m 51sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [135, 153, 179], 'score': np.float64(1.01769829087791), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [135, 153, 179], 'score': np.float64(1.01769829087791), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.6 minutes
Best normalized score: 1.02
best_combination: {'lookbacks': [135, 153, 179], 'score': np.float64(1.01769829087791), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 153, 179] (score: 1.0177)

Monte Carlo simulation completed in 12.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 153, 179] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,857,274,623.88
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Tue Aug 26 16:33:31 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $447,430,508
Annual Return: 36.20%
Sharpe Ratio: 1.25220
Sortino Ratio: 1.161
Max Drawdown: -55.0%
Avg Drawdown: -11.9%
Normalized Score: -0.911
Lookback periods: [49, 134, 225] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $785,469,451
Annual Return: 38.43%
Sharpe Ratio: 1.35039
Sortino Ratio: 1.239
Max Drawdown: -66.8%
Avg Drawdown: -13.0%
Normalized Score: -0.789
Lookback periods: [56, 104, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $902,881,431
Annual Return: 38.99%
Sharpe Ratio: 1.34498
Sortino Ratio: 1.261
Max Drawdown: -61.6%
Avg Drawdown: -12.4%
Normalized Score: -0.615
Lookback periods: [43, 119, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,391,620,510
Annual Return: 40.74%
Sharpe Ratio: 1.34001
Sortino Ratio: 1.288
Max Drawdown: -63.1%
Avg Drawdown: -12.8%
Normalized Score: -0.570
Lookback periods: [191, 219, 252] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,405,302,022
Annual Return: 40.78%
Sharpe Ratio: 1.34861
Sortino Ratio: 1.300
Max Drawdown: -60.7%
Avg Drawdown: -12.4%
Normalized Score: -0.464
Lookback periods: [202, 241, 278] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,473,465,343
Annual Return: 43.09%
Sharpe Ratio: 1.42222
Sortino Ratio: 1.379
Max Drawdown: -66.4%
Avg Drawdown: -12.4%
Normalized Score: -0.187
Lookback periods: [135, 201, 214] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 22sRunning iteration 31/1500... Est. remaining: 20m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,745,066,639
Annual Return: 43.52%
Sharpe Ratio: 1.42727
Sortino Ratio: 1.379
Max Drawdown: -67.3%
Avg Drawdown: -12.5%
Normalized Score: -0.180
Lookback periods: [106, 183, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,659,502,960
Annual Return: 41.45%
Sharpe Ratio: 1.45656
Sortino Ratio: 1.354
Max Drawdown: -55.0%
Avg Drawdown: -11.7%
Normalized Score: -0.086
Lookback periods: [36, 110, 138] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,583,909,930
Annual Return: 44.63%
Sharpe Ratio: 1.46492
Sortino Ratio: 1.427
Max Drawdown: -55.1%
Avg Drawdown: -11.8%
Normalized Score: 0.164
Lookback periods: [147, 161, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 20m 12sRunning iteration 51/1500... Est. remaining: 18m 25sRunning iteration 61/1500... Est. remaining: 17m 13sRunning iteration 71/1500... Est. remaining: 16m 19sRunning iteration 81/1500... Est. remaining: 15m 36sRunning iteration 91/1500... Est. remaining: 15m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,716,593,590
Annual Return: 43.48%
Sharpe Ratio: 1.55603
Sortino Ratio: 1.460
Max Drawdown: -39.0%
Avg Drawdown: -9.5%
Normalized Score: 0.699
Lookback periods: [41, 51, 104] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 14m 51sbest_combination: {'lookbacks': [41, 51, 104], 'score': np.float64(0.6993135351906719), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 26sRunning iteration 121/1500... Est. remaining: 14m 5sRunning iteration 131/1500... Est. remaining: 13m 45sRunning iteration 141/1500... Est. remaining: 13m 28sRunning iteration 151/1500... Est. remaining: 13m 13sRunning iteration 161/1500... Est. remaining: 12m 59sRunning iteration 171/1500... Est. remaining: 12m 46sRunning iteration 181/1500... Est. remaining: 12m 34sRunning iteration 191/1500... Est. remaining: 12m 23sRunning iteration 201/1500... Est. remaining: 12m 12sbest_combination: {'lookbacks': [41, 51, 104], 'score': np.float64(0.6993135351906719), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 2sRunning iteration 221/1500... Est. remaining: 11m 52sRunning iteration 231/1500... Est. remaining: 11m 43sRunning iteration 241/1500... Est. remaining: 11m 34sRunning iteration 251/1500... Est. remaining: 11m 25sRunning iteration 261/1500... Est. remaining: 11m 17sRunning iteration 271/1500... Est. remaining: 11m 8sRunning iteration 281/1500... Est. remaining: 11m 1sRunning iteration 291/1500... Est. remaining: 10m 53sRunning iteration 301/1500... Est. remaining: 10m 46sbest_combination: {'lookbacks': [41, 51, 104], 'score': np.float64(0.6993135351906719), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 38sRunning iteration 321/1500... Est. remaining: 10m 31sRunning iteration 331/1500... Est. remaining: 10m 23sRunning iteration 341/1500... Est. remaining: 10m 16sRunning iteration 351/1500... Est. remaining: 10m 9sRunning iteration 361/1500... Est. remaining: 10m 3sRunning iteration 371/1500... Est. remaining: 9m 56sRunning iteration 381/1500... Est. remaining: 9m 50sRunning iteration 391/1500... Est. remaining: 9m 43sRunning iteration 401/1500... Est. remaining: 9m 37sbest_combination: {'lookbacks': [41, 51, 104], 'score': np.float64(0.6993135351906719), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 31sRunning iteration 421/1500... Est. remaining: 9m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,822,268,855
Annual Return: 43.64%
Sharpe Ratio: 1.59492
Sortino Ratio: 1.504
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.032
Lookback periods: [44, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 9m 22sRunning iteration 441/1500... Est. remaining: 9m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,008,937,375
Annual Return: 46.03%
Sharpe Ratio: 1.67914
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.360
Lookback periods: [41, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 14sRunning iteration 461/1500... Est. remaining: 9m 8sRunning iteration 471/1500... Est. remaining: 9m 2sRunning iteration 481/1500... Est. remaining: 8m 56sRunning iteration 491/1500... Est. remaining: 8m 51sRunning iteration 501/1500... Est. remaining: 8m 45sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.3602093360125278), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 39sRunning iteration 521/1500... Est. remaining: 8m 33sRunning iteration 531/1500... Est. remaining: 8m 28sRunning iteration 541/1500... Est. remaining: 8m 22sRunning iteration 551/1500... Est. remaining: 8m 16sRunning iteration 561/1500... Est. remaining: 8m 10sRunning iteration 571/1500... Est. remaining: 8m 5sRunning iteration 581/1500... Est. remaining: 7m 59sRunning iteration 591/1500... Est. remaining: 7m 53sRunning iteration 601/1500... Est. remaining: 7m 48sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.3602093360125278), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 42sRunning iteration 621/1500... Est. remaining: 7m 37sRunning iteration 631/1500... Est. remaining: 7m 31sRunning iteration 641/1500... Est. remaining: 7m 26sRunning iteration 651/1500... Est. remaining: 7m 20sRunning iteration 661/1500... Est. remaining: 7m 15sRunning iteration 671/1500... Est. remaining: 7m 9sRunning iteration 681/1500... Est. remaining: 7m 4sRunning iteration 691/1500... Est. remaining: 6m 58sRunning iteration 701/1500... Est. remaining: 6m 53sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.3602093360125278), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 47sRunning iteration 721/1500... Est. remaining: 6m 42sRunning iteration 731/1500... Est. remaining: 6m 37sRunning iteration 741/1500... Est. remaining: 6m 31sRunning iteration 751/1500... Est. remaining: 6m 26sRunning iteration 761/1500... Est. remaining: 6m 21sRunning iteration 771/1500... Est. remaining: 6m 15sRunning iteration 781/1500... Est. remaining: 6m 10sRunning iteration 791/1500... Est. remaining: 6m 4sRunning iteration 801/1500... Est. remaining: 5m 59sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.3602093360125278), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 54sRunning iteration 821/1500... Est. remaining: 5m 48sRunning iteration 831/1500... Est. remaining: 5m 43sRunning iteration 841/1500... Est. remaining: 5m 38sRunning iteration 851/1500... Est. remaining: 5m 32sRunning iteration 861/1500... Est. remaining: 5m 27sRunning iteration 871/1500... Est. remaining: 5m 22sRunning iteration 881/1500... Est. remaining: 5m 16sRunning iteration 891/1500... Est. remaining: 5m 11sRunning iteration 901/1500... Est. remaining: 5m 6sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.3602093360125278), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 0sRunning iteration 921/1500... Est. remaining: 4m 55sRunning iteration 931/1500... Est. remaining: 4m 50sRunning iteration 941/1500... Est. remaining: 4m 44sRunning iteration 951/1500... Est. remaining: 4m 39sRunning iteration 961/1500... Est. remaining: 4m 34sRunning iteration 971/1500... Est. remaining: 4m 29sRunning iteration 981/1500... Est. remaining: 4m 23sRunning iteration 991/1500... Est. remaining: 4m 18sRunning iteration 1001/1500... Est. remaining: 4m 13sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.3602093360125278), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 8sRunning iteration 1021/1500... Est. remaining: 4m 3sRunning iteration 1031/1500... Est. remaining: 3m 57sRunning iteration 1041/1500... Est. remaining: 3m 52sRunning iteration 1051/1500... Est. remaining: 3m 47sRunning iteration 1061/1500... Est. remaining: 3m 42sRunning iteration 1071/1500... Est. remaining: 3m 37sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 21sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.3602093360125278), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 16sRunning iteration 1121/1500... Est. remaining: 3m 11sRunning iteration 1131/1500... Est. remaining: 3m 6sRunning iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.3602093360125278), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.3602093360125278), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.3602093360125278), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.36
best_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.3602093360125278), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 52, 98] (score: 1.3602)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,008,937,374.54
Average Annualized Gain: 46.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Tue Aug 26 16:46:03 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $218,181,427
Annual Return: 33.41%
Sharpe Ratio: 1.15280
Sortino Ratio: 1.075
Max Drawdown: -65.9%
Avg Drawdown: -13.2%
Normalized Score: -1.311
Lookback periods: [88, 230, 280] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $285,518,806
Annual Return: 34.45%
Sharpe Ratio: 1.23701
Sortino Ratio: 1.128
Max Drawdown: -52.1%
Avg Drawdown: -12.2%
Normalized Score: -0.909
Lookback periods: [40, 89, 132] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,753,603,321
Annual Return: 43.53%
Sharpe Ratio: 1.43526
Sortino Ratio: 1.390
Max Drawdown: -60.3%
Avg Drawdown: -12.8%
Normalized Score: 0.072
Lookback periods: [123, 157, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 4sRunning iteration 21/1500... Est. remaining: 20m 2sRunning iteration 31/1500... Est. remaining: 17m 15sRunning iteration 41/1500... Est. remaining: 15m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,181,736,051
Annual Return: 45.28%
Sharpe Ratio: 1.46585
Sortino Ratio: 1.434
Max Drawdown: -59.8%
Avg Drawdown: -12.5%
Normalized Score: 0.271
Lookback periods: [149, 191, 210] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 15m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,847,646,463
Annual Return: 45.90%
Sharpe Ratio: 1.49179
Sortino Ratio: 1.443
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.392
Lookback periods: [180, 193, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 15m 18sRunning iteration 71/1500... Est. remaining: 14m 43sRunning iteration 81/1500... Est. remaining: 14m 13sRunning iteration 91/1500... Est. remaining: 13m 50sRunning iteration 101/1500... Est. remaining: 13m 30sbest_combination: {'lookbacks': [180, 193, 205], 'score': np.float64(0.39228811753515935), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 12sRunning iteration 121/1500... Est. remaining: 12m 58sRunning iteration 131/1500... Est. remaining: 12m 44sRunning iteration 141/1500... Est. remaining: 12m 31sRunning iteration 151/1500... Est. remaining: 12m 21sRunning iteration 161/1500... Est. remaining: 12m 10sRunning iteration 171/1500... Est. remaining: 12m 1sRunning iteration 181/1500... Est. remaining: 11m 51sRunning iteration 191/1500... Est. remaining: 11m 42sRunning iteration 201/1500... Est. remaining: 11m 33sbest_combination: {'lookbacks': [180, 193, 205], 'score': np.float64(0.39228811753515935), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 26sRunning iteration 221/1500... Est. remaining: 11m 17sRunning iteration 231/1500... Est. remaining: 11m 10sRunning iteration 241/1500... Est. remaining: 11m 2sRunning iteration 251/1500... Est. remaining: 10m 56sRunning iteration 261/1500... Est. remaining: 10m 49sRunning iteration 271/1500... Est. remaining: 10m 42sRunning iteration 281/1500... Est. remaining: 10m 35sRunning iteration 291/1500... Est. remaining: 10m 28sRunning iteration 301/1500... Est. remaining: 10m 22sbest_combination: {'lookbacks': [180, 193, 205], 'score': np.float64(0.39228811753515935), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 15sRunning iteration 321/1500... Est. remaining: 10m 9sRunning iteration 331/1500... Est. remaining: 10m 2sRunning iteration 341/1500... Est. remaining: 9m 56sRunning iteration 351/1500... Est. remaining: 9m 50sRunning iteration 361/1500... Est. remaining: 9m 44sRunning iteration 371/1500... Est. remaining: 9m 38sRunning iteration 381/1500... Est. remaining: 9m 32sRunning iteration 391/1500... Est. remaining: 9m 26sRunning iteration 401/1500... Est. remaining: 9m 20sbest_combination: {'lookbacks': [180, 193, 205], 'score': np.float64(0.39228811753515935), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,535,365,623
Annual Return: 46.46%
Sharpe Ratio: 1.50092
Sortino Ratio: 1.465
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.456
Lookback periods: [177, 187, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 9m 18sRunning iteration 421/1500... Est. remaining: 9m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,401,770,802
Annual Return: 42.97%
Sharpe Ratio: 1.56532
Sortino Ratio: 1.464
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 0.724
Lookback periods: [49, 51, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 9m 10sRunning iteration 441/1500... Est. remaining: 9m 5sRunning iteration 451/1500... Est. remaining: 9m 0sRunning iteration 461/1500... Est. remaining: 8m 55sRunning iteration 471/1500... Est. remaining: 8m 49sRunning iteration 481/1500... Est. remaining: 8m 43sRunning iteration 491/1500... Est. remaining: 8m 38sRunning iteration 501/1500... Est. remaining: 8m 33sbest_combination: {'lookbacks': [49, 51, 97], 'score': np.float64(0.723696711292515), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 27sRunning iteration 521/1500... Est. remaining: 8m 22sRunning iteration 531/1500... Est. remaining: 8m 16sRunning iteration 541/1500... Est. remaining: 8m 11sRunning iteration 551/1500... Est. remaining: 8m 6sRunning iteration 561/1500... Est. remaining: 8m 0sRunning iteration 571/1500... Est. remaining: 7m 55sRunning iteration 581/1500... Est. remaining: 7m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,899,750,931
Annual Return: 43.75%
Sharpe Ratio: 1.57135
Sortino Ratio: 1.477
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 0.781
Lookback periods: [50, 52, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 7m 46sRunning iteration 601/1500... Est. remaining: 7m 41sbest_combination: {'lookbacks': [50, 52, 101], 'score': np.float64(0.7807229587574841), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 35sRunning iteration 621/1500... Est. remaining: 7m 30sRunning iteration 631/1500... Est. remaining: 7m 25sRunning iteration 641/1500... Est. remaining: 7m 19sRunning iteration 651/1500... Est. remaining: 7m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,044,069,333
Annual Return: 43.95%
Sharpe Ratio: 1.58263
Sortino Ratio: 1.487
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 0.827
Lookback periods: [47, 53, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 10sRunning iteration 671/1500... Est. remaining: 7m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,583,498,603
Annual Return: 44.63%
Sharpe Ratio: 1.61739
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 0.951
Lookback periods: [49, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 7m 1sRunning iteration 691/1500... Est. remaining: 6m 56sRunning iteration 701/1500... Est. remaining: 6m 51sbest_combination: {'lookbacks': [49, 52, 96], 'score': np.float64(0.9513939578626882), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 45sRunning iteration 721/1500... Est. remaining: 6m 40sRunning iteration 731/1500... Est. remaining: 6m 35sRunning iteration 741/1500... Est. remaining: 6m 29sRunning iteration 751/1500... Est. remaining: 6m 24sRunning iteration 761/1500... Est. remaining: 6m 19sRunning iteration 771/1500... Est. remaining: 6m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,916,377,953
Annual Return: 45.00%
Sharpe Ratio: 1.61386
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 0.959
Lookback periods: [50, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 781/1500... Est. remaining: 6m 9sRunning iteration 791/1500... Est. remaining: 6m 4sRunning iteration 801/1500... Est. remaining: 5m 58sbest_combination: {'lookbacks': [50, 54, 95], 'score': np.float64(0.9593107207004747), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 53sRunning iteration 821/1500... Est. remaining: 5m 48sRunning iteration 831/1500... Est. remaining: 5m 42sRunning iteration 841/1500... Est. remaining: 5m 37sRunning iteration 851/1500... Est. remaining: 5m 32sRunning iteration 861/1500... Est. remaining: 5m 26sRunning iteration 871/1500... Est. remaining: 5m 21sRunning iteration 881/1500... Est. remaining: 5m 16sRunning iteration 891/1500... Est. remaining: 5m 10sRunning iteration 901/1500... Est. remaining: 5m 5sbest_combination: {'lookbacks': [50, 54, 95], 'score': np.float64(0.9593107207004747), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,684,798,936
Annual Return: 44.75%
Sharpe Ratio: 1.61683
Sortino Ratio: 1.527
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 0.966
Lookback periods: [47, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 921/1500... Est. remaining: 4m 55sRunning iteration 931/1500... Est. remaining: 4m 50sRunning iteration 941/1500... Est. remaining: 4m 45sRunning iteration 951/1500... Est. remaining: 4m 40sRunning iteration 961/1500... Est. remaining: 4m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,914,034,326
Annual Return: 45.00%
Sharpe Ratio: 1.63017
Sortino Ratio: 1.536
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.014
Lookback periods: [48, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 971/1500... Est. remaining: 4m 30sRunning iteration 981/1500... Est. remaining: 4m 25sRunning iteration 991/1500... Est. remaining: 4m 19sRunning iteration 1001/1500... Est. remaining: 4m 14sbest_combination: {'lookbacks': [48, 50, 96], 'score': np.float64(1.0138246754065758), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 9sRunning iteration 1021/1500... Est. remaining: 4m 4sRunning iteration 1031/1500... Est. remaining: 3m 59sRunning iteration 1041/1500... Est. remaining: 3m 54sRunning iteration 1051/1500... Est. remaining: 3m 49sRunning iteration 1061/1500... Est. remaining: 3m 43sRunning iteration 1071/1500... Est. remaining: 3m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,138,668,248
Annual Return: 45.23%
Sharpe Ratio: 1.63702
Sortino Ratio: 1.540
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.043
Lookback periods: [49, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1081/1500... Est. remaining: 3m 33sRunning iteration 1091/1500... Est. remaining: 3m 28sRunning iteration 1101/1500... Est. remaining: 3m 23sbest_combination: {'lookbacks': [49, 52, 95], 'score': np.float64(1.042735010798667), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 18sRunning iteration 1121/1500... Est. remaining: 3m 13sRunning iteration 1131/1500... Est. remaining: 3m 7sRunning iteration 1141/1500... Est. remaining: 3m 2sRunning iteration 1151/1500... Est. remaining: 2m 57sRunning iteration 1161/1500... Est. remaining: 2m 52sRunning iteration 1171/1500... Est. remaining: 2m 47sRunning iteration 1181/1500... Est. remaining: 2m 42sRunning iteration 1191/1500... Est. remaining: 2m 37sRunning iteration 1201/1500... Est. remaining: 2m 31sbest_combination: {'lookbacks': [49, 52, 95], 'score': np.float64(1.042735010798667), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 26sRunning iteration 1221/1500... Est. remaining: 2m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,673,528,425
Annual Return: 46.56%
Sharpe Ratio: 1.66674
Sortino Ratio: 1.588
Max Drawdown: -36.6%
Avg Drawdown: -8.1%
Normalized Score: 1.201
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1231/1500... Est. remaining: 2m 16sRunning iteration 1241/1500... Est. remaining: 2m 11sRunning iteration 1251/1500... Est. remaining: 2m 6sRunning iteration 1261/1500... Est. remaining: 2m 1sRunning iteration 1271/1500... Est. remaining: 1m 56sRunning iteration 1281/1500... Est. remaining: 1m 51sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.201073813513955), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.201073813513955), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 1.20
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.201073813513955), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 95] (score: 1.2011)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 103 selections (24.8%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,673,528,425.50
Average Annualized Gain: 46.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Tue Aug 26 16:58:42 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $824,532,437
Annual Return: 38.63%
Sharpe Ratio: 1.29047
Sortino Ratio: 1.237
Max Drawdown: -65.9%
Avg Drawdown: -13.3%
Normalized Score: -2.081
Lookback periods: [231, 267, 293] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $900,304,812
Annual Return: 38.98%
Sharpe Ratio: 1.29001
Sortino Ratio: 1.250
Max Drawdown: -65.2%
Avg Drawdown: -13.2%
Normalized Score: -1.964
Lookback periods: [174, 236, 261] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $997,248,654
Annual Return: 39.39%
Sharpe Ratio: 1.33278
Sortino Ratio: 1.251
Max Drawdown: -56.4%
Avg Drawdown: -12.9%
Normalized Score: -1.625
Lookback periods: [63, 130, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $854,298,446
Annual Return: 38.77%
Sharpe Ratio: 1.33988
Sortino Ratio: 1.255
Max Drawdown: -52.3%
Avg Drawdown: -11.8%
Normalized Score: -1.511
Lookback periods: [75, 95, 132] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,601,408,793
Annual Return: 41.31%
Sharpe Ratio: 1.34618
Sortino Ratio: 1.298
Max Drawdown: -63.8%
Avg Drawdown: -12.9%
Normalized Score: -1.384
Lookback periods: [191, 205, 256] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,450,124,952
Annual Return: 46.39%
Sharpe Ratio: 1.51741
Sortino Ratio: 1.478
Max Drawdown: -60.6%
Avg Drawdown: -11.6%
Normalized Score: 0.350
Lookback periods: [159, 189, 224] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 38sRunning iteration 31/1500... Est. remaining: 20m 27sRunning iteration 41/1500... Est. remaining: 18m 15sRunning iteration 51/1500... Est. remaining: 16m 53sRunning iteration 61/1500... Est. remaining: 15m 58sRunning iteration 71/1500... Est. remaining: 15m 17sRunning iteration 81/1500... Est. remaining: 14m 43sRunning iteration 91/1500... Est. remaining: 14m 15sRunning iteration 101/1500... Est. remaining: 13m 52sbest_combination: {'lookbacks': [159, 189, 224], 'score': np.float64(0.35008602916152537), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 32sRunning iteration 121/1500... Est. remaining: 13m 14sRunning iteration 131/1500... Est. remaining: 12m 59sRunning iteration 141/1500... Est. remaining: 12m 45sRunning iteration 151/1500... Est. remaining: 12m 33sRunning iteration 161/1500... Est. remaining: 12m 21sRunning iteration 171/1500... Est. remaining: 12m 10sRunning iteration 181/1500... Est. remaining: 12m 0sRunning iteration 191/1500... Est. remaining: 11m 50sRunning iteration 201/1500... Est. remaining: 11m 41sbest_combination: {'lookbacks': [159, 189, 224], 'score': np.float64(0.35008602916152537), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 32sRunning iteration 221/1500... Est. remaining: 11m 24sRunning iteration 231/1500... Est. remaining: 11m 16sRunning iteration 241/1500... Est. remaining: 11m 8sRunning iteration 251/1500... Est. remaining: 11m 1sRunning iteration 261/1500... Est. remaining: 10m 53sRunning iteration 271/1500... Est. remaining: 10m 46sRunning iteration 281/1500... Est. remaining: 10m 38sRunning iteration 291/1500... Est. remaining: 10m 31sRunning iteration 301/1500... Est. remaining: 10m 24sbest_combination: {'lookbacks': [159, 189, 224], 'score': np.float64(0.35008602916152537), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 17sRunning iteration 321/1500... Est. remaining: 10m 11sRunning iteration 331/1500... Est. remaining: 10m 4sRunning iteration 341/1500... Est. remaining: 9m 58sRunning iteration 351/1500... Est. remaining: 9m 51sRunning iteration 361/1500... Est. remaining: 9m 45sRunning iteration 371/1500... Est. remaining: 9m 39sRunning iteration 381/1500... Est. remaining: 9m 33sRunning iteration 391/1500... Est. remaining: 9m 27sRunning iteration 401/1500... Est. remaining: 9m 21sbest_combination: {'lookbacks': [159, 189, 224], 'score': np.float64(0.35008602916152537), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 15sRunning iteration 421/1500... Est. remaining: 9m 9sRunning iteration 431/1500... Est. remaining: 9m 3sRunning iteration 441/1500... Est. remaining: 8m 57sRunning iteration 451/1500... Est. remaining: 8m 52sRunning iteration 461/1500... Est. remaining: 8m 46sRunning iteration 471/1500... Est. remaining: 8m 40sRunning iteration 481/1500... Est. remaining: 8m 35sRunning iteration 491/1500... Est. remaining: 8m 29sRunning iteration 501/1500... Est. remaining: 8m 24sbest_combination: {'lookbacks': [159, 189, 224], 'score': np.float64(0.35008602916152537), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 18sRunning iteration 521/1500... Est. remaining: 8m 13sRunning iteration 531/1500... Est. remaining: 8m 7sRunning iteration 541/1500... Est. remaining: 8m 2sRunning iteration 551/1500... Est. remaining: 7m 57sRunning iteration 561/1500... Est. remaining: 7m 51sRunning iteration 571/1500... Est. remaining: 7m 46sRunning iteration 581/1500... Est. remaining: 7m 41sRunning iteration 591/1500... Est. remaining: 7m 35sRunning iteration 601/1500... Est. remaining: 7m 30sbest_combination: {'lookbacks': [159, 189, 224], 'score': np.float64(0.35008602916152537), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 25sRunning iteration 621/1500... Est. remaining: 7m 20sRunning iteration 631/1500... Est. remaining: 7m 14sRunning iteration 641/1500... Est. remaining: 7m 9sRunning iteration 651/1500... Est. remaining: 7m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,956,586,671
Annual Return: 43.83%
Sharpe Ratio: 1.59996
Sortino Ratio: 1.510
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.149
Lookback periods: [44, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 0sRunning iteration 671/1500... Est. remaining: 6m 55sRunning iteration 681/1500... Est. remaining: 6m 50sRunning iteration 691/1500... Est. remaining: 6m 44sRunning iteration 701/1500... Est. remaining: 6m 39sbest_combination: {'lookbacks': [44, 52, 95], 'score': np.float64(1.1489684804336755), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 34sRunning iteration 721/1500... Est. remaining: 6m 29sRunning iteration 731/1500... Est. remaining: 6m 23sRunning iteration 741/1500... Est. remaining: 6m 18sRunning iteration 751/1500... Est. remaining: 6m 13sRunning iteration 761/1500... Est. remaining: 6m 8sRunning iteration 771/1500... Est. remaining: 6m 3sRunning iteration 781/1500... Est. remaining: 5m 58sRunning iteration 791/1500... Est. remaining: 5m 53sRunning iteration 801/1500... Est. remaining: 5m 48sbest_combination: {'lookbacks': [44, 52, 95], 'score': np.float64(1.1489684804336755), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 43sRunning iteration 821/1500... Est. remaining: 5m 37sRunning iteration 831/1500... Est. remaining: 5m 32sRunning iteration 841/1500... Est. remaining: 5m 27sRunning iteration 851/1500... Est. remaining: 5m 22sRunning iteration 861/1500... Est. remaining: 5m 17sRunning iteration 871/1500... Est. remaining: 5m 12sRunning iteration 881/1500... Est. remaining: 5m 7sRunning iteration 891/1500... Est. remaining: 5m 2sRunning iteration 901/1500... Est. remaining: 4m 57sbest_combination: {'lookbacks': [44, 52, 95], 'score': np.float64(1.1489684804336755), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 52sRunning iteration 921/1500... Est. remaining: 4m 47sRunning iteration 931/1500... Est. remaining: 4m 43sRunning iteration 941/1500... Est. remaining: 4m 38sRunning iteration 951/1500... Est. remaining: 4m 33sRunning iteration 961/1500... Est. remaining: 4m 28sRunning iteration 971/1500... Est. remaining: 4m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,527,858,081
Annual Return: 44.56%
Sharpe Ratio: 1.61703
Sortino Ratio: 1.523
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.307
Lookback periods: [47, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 981/1500... Est. remaining: 4m 18sRunning iteration 991/1500... Est. remaining: 4m 13sRunning iteration 1001/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [47, 52, 98], 'score': np.float64(1.3065239860321947), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 3sRunning iteration 1021/1500... Est. remaining: 3m 58sRunning iteration 1031/1500... Est. remaining: 3m 53sRunning iteration 1041/1500... Est. remaining: 3m 48sRunning iteration 1051/1500... Est. remaining: 3m 43sRunning iteration 1061/1500... Est. remaining: 3m 38sRunning iteration 1071/1500... Est. remaining: 3m 33sRunning iteration 1081/1500... Est. remaining: 3m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,882,489,198
Annual Return: 44.96%
Sharpe Ratio: 1.61562
Sortino Ratio: 1.536
Max Drawdown: -36.1%
Avg Drawdown: -8.5%
Normalized Score: 1.365
Lookback periods: [46, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [46, 53, 95], 'score': np.float64(1.3653856754517615), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4sRunning iteration 1141/1500... Est. remaining: 2m 59sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [46, 53, 95], 'score': np.float64(1.3653856754517615), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [46, 53, 95], 'score': np.float64(1.3653856754517615), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [46, 53, 95], 'score': np.float64(1.3653856754517615), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.37
best_combination: {'lookbacks': [46, 53, 95], 'score': np.float64(1.3653856754517615), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [46, 53, 95] (score: 1.3654)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [46, 53, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 103 selections (24.8%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 54 selections (13.0%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,882,489,198.43
Average Annualized Gain: 45.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Tue Aug 26 17:11:13 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $640,482,314
Annual Return: 37.62%
Sharpe Ratio: 1.36458
Sortino Ratio: 1.248
Max Drawdown: -59.3%
Avg Drawdown: -12.8%
Normalized Score: -2.424
Lookback periods: [27, 52, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,306,902,751
Annual Return: 40.48%
Sharpe Ratio: 1.35275
Sortino Ratio: 1.288
Max Drawdown: -60.7%
Avg Drawdown: -13.4%
Normalized Score: -1.545
Lookback periods: [109, 126, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,653,005,186
Annual Return: 43.38%
Sharpe Ratio: 1.43105
Sortino Ratio: 1.378
Max Drawdown: -56.4%
Avg Drawdown: -13.2%
Normalized Score: -0.419
Lookback periods: [147, 147, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,336,014,249
Annual Return: 44.33%
Sharpe Ratio: 1.44657
Sortino Ratio: 1.409
Max Drawdown: -58.1%
Avg Drawdown: -12.5%
Normalized Score: -0.066
Lookback periods: [147, 156, 217] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,808,585,036
Annual Return: 46.66%
Sharpe Ratio: 1.52238
Sortino Ratio: 1.485
Max Drawdown: -59.8%
Avg Drawdown: -11.6%
Normalized Score: 0.843
Lookback periods: [149, 194, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 53sRunning iteration 41/1500... Est. remaining: 17m 3sRunning iteration 51/1500... Est. remaining: 15m 54sRunning iteration 61/1500... Est. remaining: 15m 4sRunning iteration 71/1500... Est. remaining: 14m 28sRunning iteration 81/1500... Est. remaining: 13m 59sRunning iteration 91/1500... Est. remaining: 13m 36sRunning iteration 101/1500... Est. remaining: 13m 16sbest_combination: {'lookbacks': [149, 194, 205], 'score': np.float64(0.8434985550131963), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 59sRunning iteration 121/1500... Est. remaining: 12m 44sRunning iteration 131/1500... Est. remaining: 12m 31sRunning iteration 141/1500... Est. remaining: 12m 19sRunning iteration 151/1500... Est. remaining: 12m 8sRunning iteration 161/1500... Est. remaining: 11m 57sRunning iteration 171/1500... Est. remaining: 11m 47sRunning iteration 181/1500... Est. remaining: 11m 38sRunning iteration 191/1500... Est. remaining: 11m 29sRunning iteration 201/1500... Est. remaining: 11m 21sbest_combination: {'lookbacks': [149, 194, 205], 'score': np.float64(0.8434985550131963), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 13sRunning iteration 221/1500... Est. remaining: 11m 6sRunning iteration 231/1500... Est. remaining: 10m 59sRunning iteration 241/1500... Est. remaining: 10m 52sRunning iteration 251/1500... Est. remaining: 89m 36sRunning iteration 261/1500... Est. remaining: 85m 51sRunning iteration 271/1500... Est. remaining: 82m 22sRunning iteration 281/1500... Est. remaining: 79m 7sRunning iteration 291/1500... Est. remaining: 76m 6sRunning iteration 301/1500... Est. remaining: 73m 17sbest_combination: {'lookbacks': [149, 194, 205], 'score': np.float64(0.8434985550131963), 'visits': 1}
Running iteration 311/1500... Est. remaining: 87m 25sRunning iteration 321/1500... Est. remaining: 84m 15sRunning iteration 331/1500... Est. remaining: 95m 55sRunning iteration 341/1500... Est. remaining: 92m 34sRunning iteration 351/1500... Est. remaining: 89m 25sRunning iteration 361/1500... Est. remaining: 137m 22sRunning iteration 371/1500... Est. remaining: 185m 37sRunning iteration 381/1500... Est. remaining: 179m 22sRunning iteration 391/1500... Est. remaining: 218m 30sRunning iteration 401/1500... Est. remaining: 211m 21sbest_combination: {'lookbacks': [149, 194, 205], 'score': np.float64(0.8434985550131963), 'visits': 1}
Running iteration 411/1500... Est. remaining: 247m 48sRunning iteration 421/1500... Est. remaining: 239m 53sRunning iteration 431/1500... Est. remaining: 232m 42sRunning iteration 441/1500... Est. remaining: 259m 47sRunning iteration 451/1500... Est. remaining: 251m 48sRunning iteration 461/1500... Est. remaining: 283m 56sRunning iteration 471/1500... Est. remaining: 276m 18sRunning iteration 481/1500... Est. remaining: 305m 25sRunning iteration 491/1500... Est. remaining: 296m 25sRunning iteration 501/1500... Est. remaining: 321m 52sbest_combination: {'lookbacks': [149, 194, 205], 'score': np.float64(0.8434985550131963), 'visits': 1}
Running iteration 511/1500... Est. remaining: 327m 50sRunning iteration 521/1500... Est. remaining: 318m 26sRunning iteration 531/1500... Est. remaining: 338m 37sRunning iteration 541/1500... Est. remaining: 329m 49sRunning iteration 551/1500... Est. remaining: 349m 6sRunning iteration 561/1500... Est. remaining: 368m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,509,394,101
Annual Return: 47.14%
Sharpe Ratio: 1.54084
Sortino Ratio: 1.497
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 1.030
Lookback periods: [159, 178, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 364m 20sRunning iteration 581/1500... Est. remaining: 354m 20sRunning iteration 591/1500... Est. remaining: 347m 50sRunning iteration 601/1500... Est. remaining: 338m 24sbest_combination: {'lookbacks': [159, 178, 205], 'score': np.float64(1.0301640115649513), 'visits': 1}
Running iteration 611/1500... Est. remaining: 332m 34sRunning iteration 621/1500... Est. remaining: 324m 0sRunning iteration 631/1500... Est. remaining: 315m 21sRunning iteration 641/1500... Est. remaining: 308m 53sRunning iteration 651/1500... Est. remaining: 300m 42sRunning iteration 661/1500... Est. remaining: 294m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,225,379,023
Annual Return: 47.59%
Sharpe Ratio: 1.53367
Sortino Ratio: 1.492
Max Drawdown: -60.6%
Avg Drawdown: -11.7%
Normalized Score: 1.136
Lookback periods: [149, 188, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 286m 27sRunning iteration 681/1500... Est. remaining: 279m 39sRunning iteration 691/1500... Est. remaining: 272m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,262,238,023
Annual Return: 48.65%
Sharpe Ratio: 1.58339
Sortino Ratio: 1.549
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 1.610
Lookback periods: [157, 181, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/1500... Est. remaining: 267m 24sbest_combination: {'lookbacks': [157, 181, 184], 'score': np.float64(1.6104478839599934), 'visits': 1}
Running iteration 711/1500... Est. remaining: 260m 29sRunning iteration 721/1500... Est. remaining: 253m 42sRunning iteration 731/1500... Est. remaining: 247m 35sRunning iteration 741/1500... Est. remaining: 241m 39sRunning iteration 751/1500... Est. remaining: 235m 22sRunning iteration 761/1500... Est. remaining: 232m 7sRunning iteration 771/1500... Est. remaining: 226m 5sRunning iteration 781/1500... Est. remaining: 220m 10sRunning iteration 791/1500... Est. remaining: 214m 25sRunning iteration 801/1500... Est. remaining: 208m 47sbest_combination: {'lookbacks': [157, 181, 184], 'score': np.float64(1.6104478839599934), 'visits': 1}
Running iteration 811/1500... Est. remaining: 203m 18sRunning iteration 821/1500... Est. remaining: 197m 57sRunning iteration 831/1500... Est. remaining: 192m 43sRunning iteration 841/1500... Est. remaining: 187m 37sRunning iteration 851/1500... Est. remaining: 182m 38sRunning iteration 861/1500... Est. remaining: 177m 45sRunning iteration 871/1500... Est. remaining: 173m 0sRunning iteration 881/1500... Est. remaining: 168m 21sRunning iteration 891/1500... Est. remaining: 163m 48sRunning iteration 901/1500... Est. remaining: 159m 21sbest_combination: {'lookbacks': [157, 181, 184], 'score': np.float64(1.6104478839599934), 'visits': 1}
Running iteration 911/1500... Est. remaining: 155m 0sRunning iteration 921/1500... Est. remaining: 150m 44sRunning iteration 931/1500... Est. remaining: 146m 34sRunning iteration 941/1500... Est. remaining: 142m 30sRunning iteration 951/1500... Est. remaining: 138m 30sRunning iteration 961/1500... Est. remaining: 134m 35sRunning iteration 971/1500... Est. remaining: 130m 45sRunning iteration 981/1500... Est. remaining: 127m 0sRunning iteration 991/1500... Est. remaining: 123m 19sRunning iteration 1001/1500... Est. remaining: 119m 43sbest_combination: {'lookbacks': [157, 181, 184], 'score': np.float64(1.6104478839599934), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 116m 11sRunning iteration 1021/1500... Est. remaining: 112m 43sRunning iteration 1031/1500... Est. remaining: 109m 18sRunning iteration 1041/1500... Est. remaining: 105m 58sRunning iteration 1051/1500... Est. remaining: 102m 42sRunning iteration 1061/1500... Est. remaining: 99m 29sRunning iteration 1071/1500... Est. remaining: 96m 20sRunning iteration 1081/1500... Est. remaining: 93m 14sRunning iteration 1091/1500... Est. remaining: 90m 12sRunning iteration 1101/1500... Est. remaining: 87m 13sbest_combination: {'lookbacks': [157, 181, 184], 'score': np.float64(1.6104478839599934), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 84m 17sRunning iteration 1121/1500... Est. remaining: 81m 24sRunning iteration 1131/1500... Est. remaining: 78m 34sRunning iteration 1141/1500... Est. remaining: 75m 47sRunning iteration 1151/1500... Est. remaining: 73m 3sRunning iteration 1161/1500... Est. remaining: 70m 22sRunning iteration 1171/1500... Est. remaining: 67m 43sRunning iteration 1181/1500... Est. remaining: 65m 8sRunning iteration 1191/1500... Est. remaining: 62m 34sRunning iteration 1201/1500... Est. remaining: 60m 3sbest_combination: {'lookbacks': [157, 181, 184], 'score': np.float64(1.6104478839599934), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 57m 35sRunning iteration 1221/1500... Est. remaining: 55m 9sRunning iteration 1231/1500... Est. remaining: 52m 46sRunning iteration 1241/1500... Est. remaining: 50m 24sRunning iteration 1251/1500... Est. remaining: 48m 5sRunning iteration 1261/1500... Est. remaining: 45m 48sRunning iteration 1271/1500... Est. remaining: 43m 33sRunning iteration 1281/1500... Est. remaining: 41m 21sRunning iteration 1291/1500... Est. remaining: 39m 10sRunning iteration 1301/1500... Est. remaining: 37m 1sbest_combination: {'lookbacks': [157, 181, 184], 'score': np.float64(1.6104478839599934), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 34m 54sRunning iteration 1321/1500... Est. remaining: 32m 49sRunning iteration 1331/1500... Est. remaining: 30m 46sRunning iteration 1341/1500... Est. remaining: 28m 45sRunning iteration 1351/1500... Est. remaining: 26m 45sRunning iteration 1361/1500... Est. remaining: 24m 48sRunning iteration 1371/1500... Est. remaining: 22m 51sRunning iteration 1381/1500... Est. remaining: 20m 57sRunning iteration 1391/1500... Est. remaining: 19m 4sRunning iteration 1401/1500... Est. remaining: 17m 13sbest_combination: {'lookbacks': [157, 181, 184], 'score': np.float64(1.6104478839599934), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 15m 23sRunning iteration 1421/1500... Est. remaining: 13m 35sRunning iteration 1431/1500... Est. remaining: 11m 48sRunning iteration 1441/1500... Est. remaining: 10m 3sRunning iteration 1451/1500... Est. remaining: 8m 19sRunning iteration 1461/1500... Est. remaining: 6m 36sRunning iteration 1471/1500... Est. remaining: 4m 55sRunning iteration 1481/1500... Est. remaining: 3m 15sRunning iteration 1491/1500... Est. remaining: 1m 37s
Monte Carlo simulation completed in 241.5 minutes
Best normalized score: 1.61
best_combination: {'lookbacks': [157, 181, 184], 'score': np.float64(1.6104478839599934), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [157, 181, 184] (score: 1.6104)

Monte Carlo simulation completed in 241.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [157, 181, 184] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 119 selections (28.6%)
2. sp500_hma: 104 selections (25.0%)
3. naz100_pine: 81 selections (19.5%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,262,238,023.08
Average Annualized Gain: 48.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Tue Aug 26 21:12:51 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $730,553,658
Annual Return: 38.14%
Sharpe Ratio: 1.36158
Sortino Ratio: 1.276
Max Drawdown: -51.8%
Avg Drawdown: -11.0%
Normalized Score: -2.932
Lookback periods: [44, 60, 63] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,171,536,736
Annual Return: 44.12%
Sharpe Ratio: 1.45721
Sortino Ratio: 1.406
Max Drawdown: -61.4%
Avg Drawdown: -12.3%
Normalized Score: -0.511
Lookback periods: [132, 198, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 13m 2sRunning iteration 21/1500... Est. remaining: 9m 33sRunning iteration 31/1500... Est. remaining: 8m 23sRunning iteration 41/1500... Est. remaining: 7m 48sRunning iteration 51/1500... Est. remaining: 7m 26sRunning iteration 61/1500... Est. remaining: 7m 10sRunning iteration 71/1500... Est. remaining: 6m 58sRunning iteration 81/1500... Est. remaining: 6m 48sRunning iteration 91/1500... Est. remaining: 6m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,625,108,695
Annual Return: 44.68%
Sharpe Ratio: 1.45649
Sortino Ratio: 1.416
Max Drawdown: -60.2%
Avg Drawdown: -11.6%
Normalized Score: -0.258
Lookback periods: [161, 188, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 6m 42sbest_combination: {'lookbacks': [161, 188, 191], 'score': np.float64(-0.25817454318664423), 'visits': 1}
Running iteration 111/1500... Est. remaining: 6m 36sRunning iteration 121/1500... Est. remaining: 6m 30sRunning iteration 131/1500... Est. remaining: 6m 24sRunning iteration 141/1500... Est. remaining: 6m 18sRunning iteration 151/1500... Est. remaining: 6m 13sRunning iteration 161/1500... Est. remaining: 6m 9sRunning iteration 171/1500... Est. remaining: 6m 4sRunning iteration 181/1500... Est. remaining: 6m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,694,007,470
Annual Return: 43.44%
Sharpe Ratio: 1.56547
Sortino Ratio: 1.461
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: -0.001
Lookback periods: [42, 52, 114] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 6m 0sRunning iteration 201/1500... Est. remaining: 5m 56sbest_combination: {'lookbacks': [42, 52, 114], 'score': np.float64(-0.001161629648085616), 'visits': 1}
Running iteration 211/1500... Est. remaining: 5m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,833,347,078
Annual Return: 47.93%
Sharpe Ratio: 1.55258
Sortino Ratio: 1.502
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 1.276
Lookback periods: [182, 189, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 5m 53sRunning iteration 231/1500... Est. remaining: 5m 49sRunning iteration 241/1500... Est. remaining: 5m 45sRunning iteration 251/1500... Est. remaining: 5m 41sRunning iteration 261/1500... Est. remaining: 5m 38sRunning iteration 271/1500... Est. remaining: 5m 34sRunning iteration 281/1500... Est. remaining: 5m 31sRunning iteration 291/1500... Est. remaining: 5m 27sRunning iteration 301/1500... Est. remaining: 5m 24sbest_combination: {'lookbacks': [182, 189, 205], 'score': np.float64(1.2764405050917829), 'visits': 1}
Running iteration 311/1500... Est. remaining: 5m 20sRunning iteration 321/1500... Est. remaining: 5m 17sRunning iteration 331/1500... Est. remaining: 5m 14sRunning iteration 341/1500... Est. remaining: 5m 11sRunning iteration 351/1500... Est. remaining: 5m 8sRunning iteration 361/1500... Est. remaining: 5m 5sRunning iteration 371/1500... Est. remaining: 5m 2sRunning iteration 381/1500... Est. remaining: 4m 59sRunning iteration 391/1500... Est. remaining: 4m 55sRunning iteration 401/1500... Est. remaining: 4m 52sbest_combination: {'lookbacks': [182, 189, 205], 'score': np.float64(1.2764405050917829), 'visits': 1}
Running iteration 411/1500... Est. remaining: 4m 50sRunning iteration 421/1500... Est. remaining: 4m 47sRunning iteration 431/1500... Est. remaining: 4m 44sRunning iteration 441/1500... Est. remaining: 4m 41sRunning iteration 451/1500... Est. remaining: 4m 38sRunning iteration 461/1500... Est. remaining: 4m 35sRunning iteration 471/1500... Est. remaining: 4m 32sRunning iteration 481/1500... Est. remaining: 4m 29sRunning iteration 491/1500... Est. remaining: 4m 26sRunning iteration 501/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [182, 189, 205], 'score': np.float64(1.2764405050917829), 'visits': 1}
Running iteration 511/1500... Est. remaining: 4m 21sRunning iteration 521/1500... Est. remaining: 4m 18sRunning iteration 531/1500... Est. remaining: 4m 15sRunning iteration 541/1500... Est. remaining: 4m 12sRunning iteration 551/1500... Est. remaining: 4m 9sRunning iteration 561/1500... Est. remaining: 4m 7sRunning iteration 571/1500... Est. remaining: 4m 4sRunning iteration 581/1500... Est. remaining: 4m 1sRunning iteration 591/1500... Est. remaining: 3m 58sRunning iteration 601/1500... Est. remaining: 3m 56sbest_combination: {'lookbacks': [182, 189, 205], 'score': np.float64(1.2764405050917829), 'visits': 1}
Running iteration 611/1500... Est. remaining: 3m 53sRunning iteration 621/1500... Est. remaining: 3m 50sRunning iteration 631/1500... Est. remaining: 3m 48sRunning iteration 641/1500... Est. remaining: 3m 45sRunning iteration 651/1500... Est. remaining: 3m 42sRunning iteration 661/1500... Est. remaining: 3m 39sRunning iteration 671/1500... Est. remaining: 3m 37sRunning iteration 681/1500... Est. remaining: 3m 34sRunning iteration 691/1500... Est. remaining: 3m 31sRunning iteration 701/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [182, 189, 205], 'score': np.float64(1.2764405050917829), 'visits': 1}
Running iteration 711/1500... Est. remaining: 3m 26sRunning iteration 721/1500... Est. remaining: 3m 23sRunning iteration 731/1500... Est. remaining: 3m 21sRunning iteration 741/1500... Est. remaining: 3m 18sRunning iteration 751/1500... Est. remaining: 3m 15sRunning iteration 761/1500... Est. remaining: 3m 13sRunning iteration 771/1500... Est. remaining: 3m 10sRunning iteration 781/1500... Est. remaining: 3m 7sRunning iteration 791/1500... Est. remaining: 3m 5sRunning iteration 801/1500... Est. remaining: 3m 2sbest_combination: {'lookbacks': [182, 189, 205], 'score': np.float64(1.2764405050917829), 'visits': 1}
Running iteration 811/1500... Est. remaining: 2m 59sRunning iteration 821/1500... Est. remaining: 2m 57sRunning iteration 831/1500... Est. remaining: 2m 54sRunning iteration 841/1500... Est. remaining: 2m 51sRunning iteration 851/1500... Est. remaining: 2m 49sRunning iteration 861/1500... Est. remaining: 2m 46sRunning iteration 871/1500... Est. remaining: 2m 43sRunning iteration 881/1500... Est. remaining: 2m 41sRunning iteration 891/1500... Est. remaining: 2m 38sRunning iteration 901/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [182, 189, 205], 'score': np.float64(1.2764405050917829), 'visits': 1}
Running iteration 911/1500... Est. remaining: 2m 33sRunning iteration 921/1500... Est. remaining: 2m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,530,156,654
Annual Return: 48.77%
Sharpe Ratio: 1.57615
Sortino Ratio: 1.541
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 1.743
Lookback periods: [180, 188, 211] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 2m 28sRunning iteration 941/1500... Est. remaining: 2m 26sRunning iteration 951/1500... Est. remaining: 2m 23sRunning iteration 961/1500... Est. remaining: 2m 20sRunning iteration 971/1500... Est. remaining: 2m 18sRunning iteration 981/1500... Est. remaining: 2m 15sRunning iteration 991/1500... Est. remaining: 2m 12sRunning iteration 1001/1500... Est. remaining: 2m 10sbest_combination: {'lookbacks': [180, 188, 211], 'score': np.float64(1.7430405940875047), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 7sRunning iteration 1021/1500... Est. remaining: 2m 5sRunning iteration 1031/1500... Est. remaining: 2m 2sRunning iteration 1041/1500... Est. remaining: 1m 59sRunning iteration 1051/1500... Est. remaining: 1m 57sRunning iteration 1061/1500... Est. remaining: 1m 54sRunning iteration 1071/1500... Est. remaining: 1m 51sRunning iteration 1081/1500... Est. remaining: 1m 49sRunning iteration 1091/1500... Est. remaining: 1m 46sRunning iteration 1101/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [180, 188, 211], 'score': np.float64(1.7430405940875047), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 41sRunning iteration 1121/1500... Est. remaining: 1m 38sRunning iteration 1131/1500... Est. remaining: 1m 36sRunning iteration 1141/1500... Est. remaining: 1m 33sRunning iteration 1151/1500... Est. remaining: 1m 31sRunning iteration 1161/1500... Est. remaining: 1m 28sRunning iteration 1171/1500... Est. remaining: 1m 25sRunning iteration 1181/1500... Est. remaining: 1m 23sRunning iteration 1191/1500... Est. remaining: 1m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,786,369,332
Annual Return: 49.68%
Sharpe Ratio: 1.60284
Sortino Ratio: 1.563
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 2.153
Lookback periods: [178, 190, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 1m 18sbest_combination: {'lookbacks': [178, 190, 203], 'score': np.float64(2.1531897400013142), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 15sRunning iteration 1221/1500... Est. remaining: 1m 12sRunning iteration 1231/1500... Est. remaining: 1m 10sRunning iteration 1241/1500... Est. remaining: 1m 7sRunning iteration 1251/1500... Est. remaining: 1m 5sRunning iteration 1261/1500... Est. remaining: 1m 2sRunning iteration 1271/1500... Est. remaining: 0m 59sRunning iteration 1281/1500... Est. remaining: 0m 57sRunning iteration 1291/1500... Est. remaining: 0m 54sRunning iteration 1301/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [178, 190, 203], 'score': np.float64(2.1531897400013142), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 49sRunning iteration 1321/1500... Est. remaining: 0m 46sRunning iteration 1331/1500... Est. remaining: 0m 44sRunning iteration 1341/1500... Est. remaining: 0m 41sRunning iteration 1351/1500... Est. remaining: 0m 38sRunning iteration 1361/1500... Est. remaining: 0m 36sRunning iteration 1371/1500... Est. remaining: 0m 33sRunning iteration 1381/1500... Est. remaining: 0m 31sRunning iteration 1391/1500... Est. remaining: 0m 28sRunning iteration 1401/1500... Est. remaining: 0m 25sbest_combination: {'lookbacks': [178, 190, 203], 'score': np.float64(2.1531897400013142), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 23sRunning iteration 1421/1500... Est. remaining: 0m 20sRunning iteration 1431/1500... Est. remaining: 0m 18sRunning iteration 1441/1500... Est. remaining: 0m 15sRunning iteration 1451/1500... Est. remaining: 0m 12sRunning iteration 1461/1500... Est. remaining: 0m 10sRunning iteration 1471/1500... Est. remaining: 0m 7sRunning iteration 1481/1500... Est. remaining: 0m 5sRunning iteration 1491/1500... Est. remaining: 0m 2s
Monte Carlo simulation completed in 6.5 minutes
Best normalized score: 2.15
best_combination: {'lookbacks': [178, 190, 203], 'score': np.float64(2.1531897400013142), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [178, 190, 203] (score: 2.1532)

Monte Carlo simulation completed in 6.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [178, 190, 203] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 118 selections (28.4%)
2. sp500_hma: 102 selections (24.5%)
3. naz100_pine: 86 selections (20.7%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 41 selections (9.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,786,369,332.11
Average Annualized Gain: 49.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Tue Aug 26 21:19:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $537,518,073
Annual Return: 36.93%
Sharpe Ratio: 1.26171
Sortino Ratio: 1.181
Max Drawdown: -55.3%
Avg Drawdown: -13.8%
Normalized Score: -1.903
Lookback periods: [59, 119, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,046,951,947
Annual Return: 42.31%
Sharpe Ratio: 1.38446
Sortino Ratio: 1.339
Max Drawdown: -64.6%
Avg Drawdown: -12.7%
Normalized Score: -0.059
Lookback periods: [139, 186, 218] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 12m 49sRunning iteration 21/1500... Est. remaining: 9m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,420,064,968
Annual Return: 44.43%
Sharpe Ratio: 1.44755
Sortino Ratio: 1.406
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.833
Lookback periods: [176, 180, 208] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,036,494,963
Annual Return: 46.06%
Sharpe Ratio: 1.49852
Sortino Ratio: 1.461
Max Drawdown: -61.4%
Avg Drawdown: -12.1%
Normalized Score: 1.470
Lookback periods: [148, 178, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 9m 17sRunning iteration 41/1500... Est. remaining: 8m 28sRunning iteration 51/1500... Est. remaining: 7m 56sRunning iteration 61/1500... Est. remaining: 7m 34sRunning iteration 71/1500... Est. remaining: 7m 18sRunning iteration 81/1500... Est. remaining: 7m 6sRunning iteration 91/1500... Est. remaining: 6m 55sRunning iteration 101/1500... Est. remaining: 6m 46sbest_combination: {'lookbacks': [148, 178, 198], 'score': np.float64(1.4701136446964722), 'visits': 1}
Running iteration 111/1500... Est. remaining: 6m 38sRunning iteration 121/1500... Est. remaining: 6m 32sRunning iteration 131/1500... Est. remaining: 6m 26sRunning iteration 141/1500... Est. remaining: 6m 20sRunning iteration 151/1500... Est. remaining: 6m 16sRunning iteration 161/1500... Est. remaining: 6m 10sRunning iteration 171/1500... Est. remaining: 6m 6sRunning iteration 181/1500... Est. remaining: 6m 1sRunning iteration 191/1500... Est. remaining: 5m 57sRunning iteration 201/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [148, 178, 198], 'score': np.float64(1.4701136446964722), 'visits': 1}
Running iteration 211/1500... Est. remaining: 5m 49sRunning iteration 221/1500... Est. remaining: 5m 45sRunning iteration 231/1500... Est. remaining: 5m 42sRunning iteration 241/1500... Est. remaining: 5m 38sRunning iteration 251/1500... Est. remaining: 5m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,701,957,266
Annual Return: 46.58%
Sharpe Ratio: 1.52449
Sortino Ratio: 1.492
Max Drawdown: -59.9%
Avg Drawdown: -12.3%
Normalized Score: 1.795
Lookback periods: [136, 179, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 5m 34sRunning iteration 271/1500... Est. remaining: 5m 31sRunning iteration 281/1500... Est. remaining: 5m 27sRunning iteration 291/1500... Est. remaining: 5m 24sRunning iteration 301/1500... Est. remaining: 5m 20sbest_combination: {'lookbacks': [136, 179, 188], 'score': np.float64(1.7953826269561535), 'visits': 1}
Running iteration 311/1500... Est. remaining: 5m 17sRunning iteration 321/1500... Est. remaining: 5m 14sRunning iteration 331/1500... Est. remaining: 5m 11sRunning iteration 341/1500... Est. remaining: 5m 8sRunning iteration 351/1500... Est. remaining: 5m 5sRunning iteration 361/1500... Est. remaining: 5m 2sRunning iteration 371/1500... Est. remaining: 4m 59sRunning iteration 381/1500... Est. remaining: 4m 56sRunning iteration 391/1500... Est. remaining: 4m 53sRunning iteration 401/1500... Est. remaining: 4m 50sbest_combination: {'lookbacks': [136, 179, 188], 'score': np.float64(1.7953826269561535), 'visits': 1}
Running iteration 411/1500... Est. remaining: 4m 47sRunning iteration 421/1500... Est. remaining: 4m 44sRunning iteration 431/1500... Est. remaining: 4m 41sRunning iteration 441/1500... Est. remaining: 4m 38sRunning iteration 451/1500... Est. remaining: 4m 35sRunning iteration 461/1500... Est. remaining: 4m 32sRunning iteration 471/1500... Est. remaining: 4m 29sRunning iteration 481/1500... Est. remaining: 4m 27sRunning iteration 491/1500... Est. remaining: 4m 24sRunning iteration 501/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [136, 179, 188], 'score': np.float64(1.7953826269561535), 'visits': 1}
Running iteration 511/1500... Est. remaining: 4m 18sRunning iteration 521/1500... Est. remaining: 4m 15sRunning iteration 531/1500... Est. remaining: 4m 13sRunning iteration 541/1500... Est. remaining: 4m 10sRunning iteration 551/1500... Est. remaining: 4m 7sRunning iteration 561/1500... Est. remaining: 4m 4sRunning iteration 571/1500... Est. remaining: 4m 1sRunning iteration 581/1500... Est. remaining: 3m 59sRunning iteration 591/1500... Est. remaining: 3m 56sRunning iteration 601/1500... Est. remaining: 3m 53sbest_combination: {'lookbacks': [136, 179, 188], 'score': np.float64(1.7953826269561535), 'visits': 1}
Running iteration 611/1500... Est. remaining: 3m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,583,588,641
Annual Return: 47.19%
Sharpe Ratio: 1.52737
Sortino Ratio: 1.487
Max Drawdown: -60.6%
Avg Drawdown: -12.2%
Normalized Score: 1.845
Lookback periods: [148, 185, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 3m 49sRunning iteration 631/1500... Est. remaining: 3m 46sRunning iteration 641/1500... Est. remaining: 3m 43sRunning iteration 651/1500... Est. remaining: 3m 41sRunning iteration 661/1500... Est. remaining: 3m 38sRunning iteration 671/1500... Est. remaining: 3m 35sRunning iteration 681/1500... Est. remaining: 3m 32sRunning iteration 691/1500... Est. remaining: 3m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,827,187,419
Annual Return: 46.67%
Sharpe Ratio: 1.52449
Sortino Ratio: 1.495
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 1.860
Lookback periods: [159, 171, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [159, 171, 176], 'score': np.float64(1.8603452997697663), 'visits': 1}
Running iteration 711/1500... Est. remaining: 3m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,653,557,052
Annual Return: 48.36%
Sharpe Ratio: 1.56679
Sortino Ratio: 1.537
Max Drawdown: -60.2%
Avg Drawdown: -11.4%
Normalized Score: 2.411
Lookback periods: [150, 158, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 3m 23sRunning iteration 731/1500... Est. remaining: 3m 20sRunning iteration 741/1500... Est. remaining: 3m 18sRunning iteration 751/1500... Est. remaining: 3m 15sRunning iteration 761/1500... Est. remaining: 3m 12sRunning iteration 771/1500... Est. remaining: 3m 10sRunning iteration 781/1500... Est. remaining: 3m 7sRunning iteration 791/1500... Est. remaining: 3m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,175,479,525
Annual Return: 49.45%
Sharpe Ratio: 1.60579
Sortino Ratio: 1.565
Max Drawdown: -59.2%
Avg Drawdown: -11.7%
Normalized Score: 2.831
Lookback periods: [149, 159, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 801/1500... Est. remaining: 3m 2sbest_combination: {'lookbacks': [149, 159, 188], 'score': np.float64(2.8311709663001343), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 0sRunning iteration 821/1500... Est. remaining: 2m 57sRunning iteration 831/1500... Est. remaining: 2m 54sRunning iteration 841/1500... Est. remaining: 2m 51sRunning iteration 851/1500... Est. remaining: 2m 49sRunning iteration 861/1500... Est. remaining: 2m 46sRunning iteration 871/1500... Est. remaining: 2m 43sRunning iteration 881/1500... Est. remaining: 2m 41sRunning iteration 891/1500... Est. remaining: 2m 38sRunning iteration 901/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [149, 159, 188], 'score': np.float64(2.8311709663001343), 'visits': 1}
Running iteration 911/1500... Est. remaining: 2m 33sRunning iteration 921/1500... Est. remaining: 2m 30sRunning iteration 931/1500... Est. remaining: 2m 28sRunning iteration 941/1500... Est. remaining: 2m 25sRunning iteration 951/1500... Est. remaining: 2m 22sRunning iteration 961/1500... Est. remaining: 2m 20sRunning iteration 971/1500... Est. remaining: 2m 17sRunning iteration 981/1500... Est. remaining: 2m 14sRunning iteration 991/1500... Est. remaining: 2m 12sRunning iteration 1001/1500... Est. remaining: 2m 9sbest_combination: {'lookbacks': [149, 159, 188], 'score': np.float64(2.8311709663001343), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 6sRunning iteration 1021/1500... Est. remaining: 2m 4sRunning iteration 1031/1500... Est. remaining: 2m 1sRunning iteration 1041/1500... Est. remaining: 1m 59sRunning iteration 1051/1500... Est. remaining: 1m 56sRunning iteration 1061/1500... Est. remaining: 1m 53sRunning iteration 1071/1500... Est. remaining: 1m 51sRunning iteration 1081/1500... Est. remaining: 1m 48sRunning iteration 1091/1500... Est. remaining: 1m 46sRunning iteration 1101/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [149, 159, 188], 'score': np.float64(2.8311709663001343), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 40sRunning iteration 1121/1500... Est. remaining: 1m 38sRunning iteration 1131/1500... Est. remaining: 1m 35sRunning iteration 1141/1500... Est. remaining: 1m 33sRunning iteration 1151/1500... Est. remaining: 1m 30sRunning iteration 1161/1500... Est. remaining: 1m 27sRunning iteration 1171/1500... Est. remaining: 1m 25sRunning iteration 1181/1500... Est. remaining: 1m 22sRunning iteration 1191/1500... Est. remaining: 1m 20sRunning iteration 1201/1500... Est. remaining: 1m 17sbest_combination: {'lookbacks': [149, 159, 188], 'score': np.float64(2.8311709663001343), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 15sRunning iteration 1221/1500... Est. remaining: 1m 12sRunning iteration 1231/1500... Est. remaining: 1m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,477,518,364
Annual Return: 49.18%
Sharpe Ratio: 1.61132
Sortino Ratio: 1.571
Max Drawdown: -62.7%
Avg Drawdown: -11.4%
Normalized Score: 2.848
Lookback periods: [136, 156, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1241/1500... Est. remaining: 1m 7sRunning iteration 1251/1500... Est. remaining: 1m 4sRunning iteration 1261/1500... Est. remaining: 1m 2sRunning iteration 1271/1500... Est. remaining: 0m 59sRunning iteration 1281/1500... Est. remaining: 0m 56sRunning iteration 1291/1500... Est. remaining: 0m 54sRunning iteration 1301/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [136, 156, 190], 'score': np.float64(2.8481857822846712), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 49sRunning iteration 1321/1500... Est. remaining: 0m 46sRunning iteration 1331/1500... Est. remaining: 0m 43sRunning iteration 1341/1500... Est. remaining: 0m 41sRunning iteration 1351/1500... Est. remaining: 0m 38sRunning iteration 1361/1500... Est. remaining: 0m 36sRunning iteration 1371/1500... Est. remaining: 0m 33sRunning iteration 1381/1500... Est. remaining: 0m 31sRunning iteration 1391/1500... Est. remaining: 0m 28sRunning iteration 1401/1500... Est. remaining: 0m 25sbest_combination: {'lookbacks': [136, 156, 190], 'score': np.float64(2.8481857822846712), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 23sRunning iteration 1421/1500... Est. remaining: 0m 20sRunning iteration 1431/1500... Est. remaining: 0m 18sRunning iteration 1441/1500... Est. remaining: 0m 15sRunning iteration 1451/1500... Est. remaining: 0m 12sRunning iteration 1461/1500... Est. remaining: 0m 10sRunning iteration 1471/1500... Est. remaining: 0m 7sRunning iteration 1481/1500... Est. remaining: 0m 5sRunning iteration 1491/1500... Est. remaining: 0m 2s
Monte Carlo simulation completed in 6.4 minutes
Best normalized score: 2.85
best_combination: {'lookbacks': [136, 156, 190], 'score': np.float64(2.8481857822846712), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 156, 190] (score: 2.8482)

Monte Carlo simulation completed in 6.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 156, 190] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 114 selections (27.4%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,477,518,363.75
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Tue Aug 26 21:26:00 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $258,369,033
Annual Return: 34.06%
Sharpe Ratio: 1.18704
Sortino Ratio: 1.095
Max Drawdown: -55.0%
Avg Drawdown: -14.1%
Normalized Score: -3.245
Lookback periods: [89, 123, 285] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $512,363,029
Annual Return: 36.74%
Sharpe Ratio: 1.34036
Sortino Ratio: 1.225
Max Drawdown: -52.1%
Avg Drawdown: -10.9%
Normalized Score: -1.921
Lookback periods: [33, 47, 116] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $911,011,905
Annual Return: 39.03%
Sharpe Ratio: 1.31166
Sortino Ratio: 1.249
Max Drawdown: -68.4%
Avg Drawdown: -14.1%
Normalized Score: -1.481
Lookback periods: [122, 132, 223] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 15m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,673,031,392
Annual Return: 41.49%
Sharpe Ratio: 1.38281
Sortino Ratio: 1.326
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: -0.372
Lookback periods: [174, 286, 296] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,049,516,423
Annual Return: 43.96%
Sharpe Ratio: 1.44220
Sortino Ratio: 1.402
Max Drawdown: -62.3%
Avg Drawdown: -13.1%
Normalized Score: 0.488
Lookback periods: [138, 150, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 12m 23sRunning iteration 31/1500... Est. remaining: 10m 18sRunning iteration 41/1500... Est. remaining: 9m 14sRunning iteration 51/1500... Est. remaining: 8m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,335,597,870
Annual Return: 44.33%
Sharpe Ratio: 1.48571
Sortino Ratio: 1.430
Max Drawdown: -60.0%
Avg Drawdown: -11.9%
Normalized Score: 0.758
Lookback periods: [123, 138, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 8m 20sRunning iteration 71/1500... Est. remaining: 7m 57sRunning iteration 81/1500... Est. remaining: 7m 40sRunning iteration 91/1500... Est. remaining: 7m 26sRunning iteration 101/1500... Est. remaining: 7m 13sbest_combination: {'lookbacks': [123, 138, 146], 'score': np.float64(0.757723312329808), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 3sRunning iteration 121/1500... Est. remaining: 6m 53sRunning iteration 131/1500... Est. remaining: 6m 46sRunning iteration 141/1500... Est. remaining: 6m 39sRunning iteration 151/1500... Est. remaining: 6m 32sRunning iteration 161/1500... Est. remaining: 6m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,739,089,687
Annual Return: 45.80%
Sharpe Ratio: 1.48840
Sortino Ratio: 1.442
Max Drawdown: -59.2%
Avg Drawdown: -12.5%
Normalized Score: 1.208
Lookback periods: [149, 157, 206] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 6m 25sRunning iteration 181/1500... Est. remaining: 6m 19sRunning iteration 191/1500... Est. remaining: 6m 14sRunning iteration 201/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [149, 157, 206], 'score': np.float64(1.2077465372141947), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 5sRunning iteration 221/1500... Est. remaining: 6m 0sRunning iteration 231/1500... Est. remaining: 5m 55sRunning iteration 241/1500... Est. remaining: 5m 51sRunning iteration 251/1500... Est. remaining: 5m 47sRunning iteration 261/1500... Est. remaining: 5m 43sRunning iteration 271/1500... Est. remaining: 5m 39sRunning iteration 281/1500... Est. remaining: 5m 36sRunning iteration 291/1500... Est. remaining: 5m 32sRunning iteration 301/1500... Est. remaining: 5m 28sbest_combination: {'lookbacks': [149, 157, 206], 'score': np.float64(1.2077465372141947), 'visits': 1}
Running iteration 311/1500... Est. remaining: 5m 25sRunning iteration 321/1500... Est. remaining: 5m 21sRunning iteration 331/1500... Est. remaining: 5m 18sRunning iteration 341/1500... Est. remaining: 5m 14sRunning iteration 351/1500... Est. remaining: 5m 11sRunning iteration 361/1500... Est. remaining: 5m 8sRunning iteration 371/1500... Est. remaining: 5m 4sRunning iteration 381/1500... Est. remaining: 5m 1sRunning iteration 391/1500... Est. remaining: 4m 58sRunning iteration 401/1500... Est. remaining: 4m 55sbest_combination: {'lookbacks': [149, 157, 206], 'score': np.float64(1.2077465372141947), 'visits': 1}
Running iteration 411/1500... Est. remaining: 4m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,980,152,442
Annual Return: 46.01%
Sharpe Ratio: 1.50006
Sortino Ratio: 1.464
Max Drawdown: -62.7%
Avg Drawdown: -12.5%
Normalized Score: 1.286
Lookback periods: [145, 188, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 4m 50sRunning iteration 431/1500... Est. remaining: 4m 47sRunning iteration 441/1500... Est. remaining: 4m 44sRunning iteration 451/1500... Est. remaining: 4m 41sRunning iteration 461/1500... Est. remaining: 4m 38sRunning iteration 471/1500... Est. remaining: 4m 35sRunning iteration 481/1500... Est. remaining: 4m 32sRunning iteration 491/1500... Est. remaining: 4m 29sRunning iteration 501/1500... Est. remaining: 4m 26sbest_combination: {'lookbacks': [145, 188, 192], 'score': np.float64(1.2861775337837331), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,143,634,268
Annual Return: 46.15%
Sharpe Ratio: 1.50708
Sortino Ratio: 1.472
Max Drawdown: -60.3%
Avg Drawdown: -12.1%
Normalized Score: 1.385
Lookback periods: [136, 192, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 4m 24sRunning iteration 521/1500... Est. remaining: 4m 22sRunning iteration 531/1500... Est. remaining: 4m 19sRunning iteration 541/1500... Est. remaining: 4m 16sRunning iteration 551/1500... Est. remaining: 4m 13sRunning iteration 561/1500... Est. remaining: 4m 10sRunning iteration 571/1500... Est. remaining: 4m 7sRunning iteration 581/1500... Est. remaining: 4m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,517,194,611
Annual Return: 47.15%
Sharpe Ratio: 1.53864
Sortino Ratio: 1.511
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 1.819
Lookback periods: [147, 189, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 4m 2sRunning iteration 601/1500... Est. remaining: 3m 59sbest_combination: {'lookbacks': [147, 189, 195], 'score': np.float64(1.819107201583393), 'visits': 1}
Running iteration 611/1500... Est. remaining: 3m 56sRunning iteration 621/1500... Est. remaining: 3m 53sRunning iteration 631/1500... Est. remaining: 3m 51sRunning iteration 641/1500... Est. remaining: 3m 48sRunning iteration 651/1500... Est. remaining: 3m 45sRunning iteration 661/1500... Est. remaining: 3m 42sRunning iteration 671/1500... Est. remaining: 3m 39sRunning iteration 681/1500... Est. remaining: 3m 37sRunning iteration 691/1500... Est. remaining: 3m 34sRunning iteration 701/1500... Est. remaining: 3m 31sbest_combination: {'lookbacks': [147, 189, 195], 'score': np.float64(1.819107201583393), 'visits': 1}
Running iteration 711/1500... Est. remaining: 3m 28sRunning iteration 721/1500... Est. remaining: 3m 25sRunning iteration 731/1500... Est. remaining: 3m 23sRunning iteration 741/1500... Est. remaining: 3m 20sRunning iteration 751/1500... Est. remaining: 3m 17sRunning iteration 761/1500... Est. remaining: 3m 14sRunning iteration 771/1500... Est. remaining: 3m 12sRunning iteration 781/1500... Est. remaining: 3m 9sRunning iteration 791/1500... Est. remaining: 3m 6sRunning iteration 801/1500... Est. remaining: 3m 3sbest_combination: {'lookbacks': [147, 189, 195], 'score': np.float64(1.819107201583393), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 1sRunning iteration 821/1500... Est. remaining: 2m 58sRunning iteration 831/1500... Est. remaining: 2m 55sRunning iteration 841/1500... Est. remaining: 2m 53sRunning iteration 851/1500... Est. remaining: 2m 50sRunning iteration 861/1500... Est. remaining: 2m 47sRunning iteration 871/1500... Est. remaining: 2m 45sRunning iteration 881/1500... Est. remaining: 2m 42sRunning iteration 891/1500... Est. remaining: 2m 39sRunning iteration 901/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [147, 189, 195], 'score': np.float64(1.819107201583393), 'visits': 1}
Running iteration 911/1500... Est. remaining: 2m 34sRunning iteration 921/1500... Est. remaining: 2m 31sRunning iteration 931/1500... Est. remaining: 2m 29sRunning iteration 941/1500... Est. remaining: 2m 26sRunning iteration 951/1500... Est. remaining: 2m 23sRunning iteration 961/1500... Est. remaining: 2m 21sRunning iteration 971/1500... Est. remaining: 2m 18sRunning iteration 981/1500... Est. remaining: 2m 15sRunning iteration 991/1500... Est. remaining: 2m 13sRunning iteration 1001/1500... Est. remaining: 2m 10sbest_combination: {'lookbacks': [147, 189, 195], 'score': np.float64(1.819107201583393), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 7sRunning iteration 1021/1500... Est. remaining: 2m 5sRunning iteration 1031/1500... Est. remaining: 2m 2sRunning iteration 1041/1500... Est. remaining: 1m 59sRunning iteration 1051/1500... Est. remaining: 1m 57sRunning iteration 1061/1500... Est. remaining: 1m 54sRunning iteration 1071/1500... Est. remaining: 1m 51sRunning iteration 1081/1500... Est. remaining: 1m 49sRunning iteration 1091/1500... Est. remaining: 1m 46sRunning iteration 1101/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [147, 189, 195], 'score': np.float64(1.819107201583393), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 41sRunning iteration 1121/1500... Est. remaining: 1m 38sRunning iteration 1131/1500... Est. remaining: 1m 36sRunning iteration 1141/1500... Est. remaining: 1m 33sRunning iteration 1151/1500... Est. remaining: 1m 30sRunning iteration 1161/1500... Est. remaining: 1m 28sRunning iteration 1171/1500... Est. remaining: 1m 25sRunning iteration 1181/1500... Est. remaining: 1m 23sRunning iteration 1191/1500... Est. remaining: 1m 20sRunning iteration 1201/1500... Est. remaining: 1m 17sbest_combination: {'lookbacks': [147, 189, 195], 'score': np.float64(1.819107201583393), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 15sRunning iteration 1221/1500... Est. remaining: 1m 12sRunning iteration 1231/1500... Est. remaining: 1m 10sRunning iteration 1241/1500... Est. remaining: 1m 7sRunning iteration 1251/1500... Est. remaining: 1m 4sRunning iteration 1261/1500... Est. remaining: 1m 2sRunning iteration 1271/1500... Est. remaining: 0m 59sRunning iteration 1281/1500... Est. remaining: 0m 56sRunning iteration 1291/1500... Est. remaining: 0m 54sRunning iteration 1301/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [147, 189, 195], 'score': np.float64(1.819107201583393), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 49sRunning iteration 1321/1500... Est. remaining: 0m 46sRunning iteration 1331/1500... Est. remaining: 0m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,845,921,083
Annual Return: 47.36%
Sharpe Ratio: 1.54340
Sortino Ratio: 1.501
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 1.865
Lookback periods: [159, 178, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1341/1500... Est. remaining: 0m 41sRunning iteration 1351/1500... Est. remaining: 0m 38sRunning iteration 1361/1500... Est. remaining: 0m 36sRunning iteration 1371/1500... Est. remaining: 0m 33sRunning iteration 1381/1500... Est. remaining: 0m 31sRunning iteration 1391/1500... Est. remaining: 0m 28sRunning iteration 1401/1500... Est. remaining: 0m 25sbest_combination: {'lookbacks': [159, 178, 198], 'score': np.float64(1.8652398972356867), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 23sRunning iteration 1421/1500... Est. remaining: 0m 20sRunning iteration 1431/1500... Est. remaining: 0m 18sRunning iteration 1441/1500... Est. remaining: 0m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,469,174,247
Annual Return: 47.73%
Sharpe Ratio: 1.55565
Sortino Ratio: 1.519
Max Drawdown: -61.4%
Avg Drawdown: -12.1%
Normalized Score: 1.984
Lookback periods: [155, 178, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1451/1500... Est. remaining: 0m 12sRunning iteration 1461/1500... Est. remaining: 0m 10sRunning iteration 1471/1500... Est. remaining: 0m 7sRunning iteration 1481/1500... Est. remaining: 0m 5sRunning iteration 1491/1500... Est. remaining: 0m 2s
Monte Carlo simulation completed in 6.5 minutes
Best normalized score: 1.98
best_combination: {'lookbacks': [155, 178, 179], 'score': np.float64(1.9842087551715035), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [155, 178, 179] (score: 1.9842)

Monte Carlo simulation completed in 6.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [155, 178, 179] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 118 selections (28.4%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 40 selections (9.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $7,469,174,246.78
Average Annualized Gain: 47.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 400m 6s
End time: Tue Aug 26 21:32:32 EDT 2025
Average time per successful run: 26m 40s
==============================================================
✓ All runs completed successfully!
