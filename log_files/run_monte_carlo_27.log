Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Mon Aug 25 20:20:35 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Mon Aug 25 20:20:35 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $196,008,637
Annual Return: 33.00%
Sharpe Ratio: 1.15949
Sortino Ratio: 1.073
Max Drawdown: -52.3%
Avg Drawdown: -12.6%
Normalized Score: -0.953
Lookback periods: [82, 114, 269] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $867,938,485
Annual Return: 38.83%
Sharpe Ratio: 1.43046
Sortino Ratio: 1.318
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 0.428
Lookback periods: [36, 77, 141] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 6sRunning iteration 21/1500... Est. remaining: 18m 29sRunning iteration 31/1500... Est. remaining: 16m 15sRunning iteration 41/1500... Est. remaining: 15m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,544,342,292
Annual Return: 46.46%
Sharpe Ratio: 1.50723
Sortino Ratio: 1.464
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.471
Lookback periods: [179, 193, 230] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 14m 55sRunning iteration 61/1500... Est. remaining: 14m 23sRunning iteration 71/1500... Est. remaining: 13m 57sRunning iteration 81/1500... Est. remaining: 13m 36sRunning iteration 91/1500... Est. remaining: 13m 17sRunning iteration 101/1500... Est. remaining: 13m 3sbest_combination: {'lookbacks': [179, 193, 230], 'score': np.float64(0.4712088086244973), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 50sRunning iteration 121/1500... Est. remaining: 12m 37sRunning iteration 131/1500... Est. remaining: 12m 25sRunning iteration 141/1500... Est. remaining: 12m 15sRunning iteration 151/1500... Est. remaining: 12m 5sRunning iteration 161/1500... Est. remaining: 11m 56sRunning iteration 171/1500... Est. remaining: 11m 47sRunning iteration 181/1500... Est. remaining: 11m 39sRunning iteration 191/1500... Est. remaining: 11m 32sRunning iteration 201/1500... Est. remaining: 11m 24sbest_combination: {'lookbacks': [179, 193, 230], 'score': np.float64(0.4712088086244973), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 17sRunning iteration 221/1500... Est. remaining: 11m 11sRunning iteration 231/1500... Est. remaining: 11m 5sRunning iteration 241/1500... Est. remaining: 10m 58sRunning iteration 251/1500... Est. remaining: 10m 51sRunning iteration 261/1500... Est. remaining: 10m 45sRunning iteration 271/1500... Est. remaining: 10m 38sRunning iteration 281/1500... Est. remaining: 10m 31sRunning iteration 291/1500... Est. remaining: 10m 25sRunning iteration 301/1500... Est. remaining: 10m 20sbest_combination: {'lookbacks': [179, 193, 230], 'score': np.float64(0.4712088086244973), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 14sRunning iteration 321/1500... Est. remaining: 10m 8sRunning iteration 331/1500... Est. remaining: 10m 2sRunning iteration 341/1500... Est. remaining: 9m 57sRunning iteration 351/1500... Est. remaining: 9m 51sRunning iteration 361/1500... Est. remaining: 9m 45sRunning iteration 371/1500... Est. remaining: 9m 40sRunning iteration 381/1500... Est. remaining: 9m 34sRunning iteration 391/1500... Est. remaining: 9m 29sRunning iteration 401/1500... Est. remaining: 9m 23sbest_combination: {'lookbacks': [179, 193, 230], 'score': np.float64(0.4712088086244973), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 17sRunning iteration 421/1500... Est. remaining: 9m 12sRunning iteration 431/1500... Est. remaining: 9m 6sRunning iteration 441/1500... Est. remaining: 9m 0sRunning iteration 451/1500... Est. remaining: 8m 54sRunning iteration 461/1500... Est. remaining: 8m 49sRunning iteration 471/1500... Est. remaining: 8m 43sRunning iteration 481/1500... Est. remaining: 8m 38sRunning iteration 491/1500... Est. remaining: 8m 32sRunning iteration 501/1500... Est. remaining: 8m 26sbest_combination: {'lookbacks': [179, 193, 230], 'score': np.float64(0.4712088086244973), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 21sRunning iteration 521/1500... Est. remaining: 8m 16sRunning iteration 531/1500... Est. remaining: 8m 10sRunning iteration 541/1500... Est. remaining: 8m 5sRunning iteration 551/1500... Est. remaining: 8m 0sRunning iteration 561/1500... Est. remaining: 7m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,313,638,531
Annual Return: 40.50%
Sharpe Ratio: 1.45673
Sortino Ratio: 1.356
Max Drawdown: -35.2%
Avg Drawdown: -9.9%
Normalized Score: 0.540
Lookback periods: [42, 49, 106] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 7m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,491,524,023
Annual Return: 43.12%
Sharpe Ratio: 1.56852
Sortino Ratio: 1.465
Max Drawdown: -35.2%
Avg Drawdown: -9.2%
Normalized Score: 0.969
Lookback periods: [41, 53, 107] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 7m 48sRunning iteration 591/1500... Est. remaining: 7m 43sRunning iteration 601/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [41, 53, 107], 'score': np.float64(0.968975469368135), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 32sRunning iteration 621/1500... Est. remaining: 7m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,724,943,428
Annual Return: 43.49%
Sharpe Ratio: 1.60745
Sortino Ratio: 1.504
Max Drawdown: -35.2%
Avg Drawdown: -9.1%
Normalized Score: 1.079
Lookback periods: [38, 49, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 7m 23sRunning iteration 641/1500... Est. remaining: 7m 17sRunning iteration 651/1500... Est. remaining: 7m 12sRunning iteration 661/1500... Est. remaining: 7m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,320,889,981
Annual Return: 44.31%
Sharpe Ratio: 1.60665
Sortino Ratio: 1.511
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 1.119
Lookback periods: [41, 52, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 7m 3sRunning iteration 681/1500... Est. remaining: 6m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,596,598,325
Annual Return: 44.64%
Sharpe Ratio: 1.62178
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.247
Lookback periods: [45, 52, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 6m 54sRunning iteration 701/1500... Est. remaining: 6m 48sbest_combination: {'lookbacks': [45, 52, 101], 'score': np.float64(1.246842863008482), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 43sRunning iteration 721/1500... Est. remaining: 6m 38sRunning iteration 731/1500... Est. remaining: 6m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,765,978,652
Annual Return: 44.84%
Sharpe Ratio: 1.64285
Sortino Ratio: 1.536
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.277
Lookback periods: [42, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 6m 28sRunning iteration 751/1500... Est. remaining: 6m 23sRunning iteration 761/1500... Est. remaining: 6m 18sRunning iteration 771/1500... Est. remaining: 6m 12sRunning iteration 781/1500... Est. remaining: 6m 7sRunning iteration 791/1500... Est. remaining: 6m 2sRunning iteration 801/1500... Est. remaining: 5m 56sbest_combination: {'lookbacks': [42, 52, 97], 'score': np.float64(1.2772204810843584), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 51sRunning iteration 821/1500... Est. remaining: 5m 46sRunning iteration 831/1500... Est. remaining: 5m 40sRunning iteration 841/1500... Est. remaining: 5m 35sRunning iteration 851/1500... Est. remaining: 5m 30sRunning iteration 861/1500... Est. remaining: 5m 24sRunning iteration 871/1500... Est. remaining: 5m 19sRunning iteration 881/1500... Est. remaining: 5m 14sRunning iteration 891/1500... Est. remaining: 5m 9sRunning iteration 901/1500... Est. remaining: 5m 3sbest_combination: {'lookbacks': [42, 52, 97], 'score': np.float64(1.2772204810843584), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 58sRunning iteration 921/1500... Est. remaining: 4m 53sRunning iteration 931/1500... Est. remaining: 4m 48sRunning iteration 941/1500... Est. remaining: 4m 43sRunning iteration 951/1500... Est. remaining: 4m 37sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 17sRunning iteration 1001/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [42, 52, 97], 'score': np.float64(1.2772204810843584), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 7sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 21sbest_combination: {'lookbacks': [42, 52, 97], 'score': np.float64(1.2772204810843584), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,702,990,578
Annual Return: 44.77%
Sharpe Ratio: 1.62686
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.300
Lookback periods: [41, 51, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1131/1500... Est. remaining: 3m 6sRunning iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 56sRunning iteration 1161/1500... Est. remaining: 2m 51sRunning iteration 1171/1500... Est. remaining: 2m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,183,237,143
Annual Return: 45.28%
Sharpe Ratio: 1.64397
Sortino Ratio: 1.550
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.335
Lookback periods: [45, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1181/1500... Est. remaining: 2m 41sRunning iteration 1191/1500... Est. remaining: 2m 36sRunning iteration 1201/1500... Est. remaining: 2m 31sbest_combination: {'lookbacks': [45, 52, 97], 'score': np.float64(1.3347970912110887), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,558,671,600
Annual Return: 45.64%
Sharpe Ratio: 1.64939
Sortino Ratio: 1.554
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.357
Lookback periods: [42, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1231/1500... Est. remaining: 2m 16sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [42, 50, 96], 'score': np.float64(1.3572624697635836), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [42, 50, 96], 'score': np.float64(1.3572624697635836), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 1.36
best_combination: {'lookbacks': [42, 50, 96], 'score': np.float64(1.3572624697635836), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 50, 96] (score: 1.3573)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 50, 96] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 107 selections (25.7%)
2. naz100_hma: 99 selections (23.8%)
3. naz100_pine: 83 selections (20.0%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,558,671,600.19
Average Annualized Gain: 45.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Mon Aug 25 20:33:13 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $170,866,720
Annual Return: 32.47%
Sharpe Ratio: 1.14328
Sortino Ratio: 1.040
Max Drawdown: -60.7%
Avg Drawdown: -13.4%
Normalized Score: -1.481
Lookback periods: [60, 207, 256] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,368,428,982
Annual Return: 40.67%
Sharpe Ratio: 1.33537
Sortino Ratio: 1.294
Max Drawdown: -67.8%
Avg Drawdown: -13.2%
Normalized Score: -0.554
Lookback periods: [169, 207, 272] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,314,114,394
Annual Return: 40.50%
Sharpe Ratio: 1.36205
Sortino Ratio: 1.312
Max Drawdown: -67.2%
Avg Drawdown: -12.9%
Normalized Score: -0.474
Lookback periods: [136, 245, 247] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,046,262,506
Annual Return: 39.58%
Sharpe Ratio: 1.40545
Sortino Ratio: 1.299
Max Drawdown: -51.1%
Avg Drawdown: -11.1%
Normalized Score: -0.145
Lookback periods: [49, 57, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,778,274,369
Annual Return: 48.42%
Sharpe Ratio: 1.57526
Sortino Ratio: 1.530
Max Drawdown: -57.2%
Avg Drawdown: -11.9%
Normalized Score: 0.708
Lookback periods: [139, 156, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 44sRunning iteration 31/1500... Est. remaining: 19m 4sRunning iteration 41/1500... Est. remaining: 17m 12sRunning iteration 51/1500... Est. remaining: 16m 2sRunning iteration 61/1500... Est. remaining: 15m 15sRunning iteration 71/1500... Est. remaining: 14m 40sRunning iteration 81/1500... Est. remaining: 14m 12sRunning iteration 91/1500... Est. remaining: 13m 50sRunning iteration 101/1500... Est. remaining: 13m 30sbest_combination: {'lookbacks': [139, 156, 203], 'score': np.float64(0.7076202034107079), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 15sRunning iteration 121/1500... Est. remaining: 13m 0sRunning iteration 131/1500... Est. remaining: 12m 48sRunning iteration 141/1500... Est. remaining: 12m 36sRunning iteration 151/1500... Est. remaining: 12m 26sRunning iteration 161/1500... Est. remaining: 12m 16sRunning iteration 171/1500... Est. remaining: 12m 7sRunning iteration 181/1500... Est. remaining: 11m 58sRunning iteration 191/1500... Est. remaining: 11m 49sRunning iteration 201/1500... Est. remaining: 11m 41sbest_combination: {'lookbacks': [139, 156, 203], 'score': np.float64(0.7076202034107079), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 33sRunning iteration 221/1500... Est. remaining: 11m 25sRunning iteration 231/1500... Est. remaining: 11m 17sRunning iteration 241/1500... Est. remaining: 11m 10sRunning iteration 251/1500... Est. remaining: 11m 3sRunning iteration 261/1500... Est. remaining: 10m 56sRunning iteration 271/1500... Est. remaining: 10m 50sRunning iteration 281/1500... Est. remaining: 10m 43sRunning iteration 291/1500... Est. remaining: 10m 37sRunning iteration 301/1500... Est. remaining: 10m 30sbest_combination: {'lookbacks': [139, 156, 203], 'score': np.float64(0.7076202034107079), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 24sRunning iteration 321/1500... Est. remaining: 10m 17sRunning iteration 331/1500... Est. remaining: 10m 11sRunning iteration 341/1500... Est. remaining: 10m 5sRunning iteration 351/1500... Est. remaining: 9m 59sRunning iteration 361/1500... Est. remaining: 9m 52sRunning iteration 371/1500... Est. remaining: 9m 46sRunning iteration 381/1500... Est. remaining: 9m 40sRunning iteration 391/1500... Est. remaining: 9m 34sRunning iteration 401/1500... Est. remaining: 9m 29sbest_combination: {'lookbacks': [139, 156, 203], 'score': np.float64(0.7076202034107079), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 23sRunning iteration 421/1500... Est. remaining: 9m 18sRunning iteration 431/1500... Est. remaining: 9m 12sRunning iteration 441/1500... Est. remaining: 9m 6sRunning iteration 451/1500... Est. remaining: 9m 1sRunning iteration 461/1500... Est. remaining: 8m 55sRunning iteration 471/1500... Est. remaining: 8m 49sRunning iteration 481/1500... Est. remaining: 8m 44sRunning iteration 491/1500... Est. remaining: 8m 38sRunning iteration 501/1500... Est. remaining: 8m 33sbest_combination: {'lookbacks': [139, 156, 203], 'score': np.float64(0.7076202034107079), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 27sRunning iteration 521/1500... Est. remaining: 8m 22sRunning iteration 531/1500... Est. remaining: 8m 16sRunning iteration 541/1500... Est. remaining: 8m 11sRunning iteration 551/1500... Est. remaining: 8m 5sRunning iteration 561/1500... Est. remaining: 8m 0sRunning iteration 571/1500... Est. remaining: 7m 55sRunning iteration 581/1500... Est. remaining: 7m 49sRunning iteration 591/1500... Est. remaining: 7m 44sRunning iteration 601/1500... Est. remaining: 7m 38sbest_combination: {'lookbacks': [139, 156, 203], 'score': np.float64(0.7076202034107079), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 33sRunning iteration 621/1500... Est. remaining: 7m 28sRunning iteration 631/1500... Est. remaining: 7m 23sRunning iteration 641/1500... Est. remaining: 7m 17sRunning iteration 651/1500... Est. remaining: 7m 12sRunning iteration 661/1500... Est. remaining: 7m 7sRunning iteration 671/1500... Est. remaining: 7m 2sRunning iteration 681/1500... Est. remaining: 6m 56sRunning iteration 691/1500... Est. remaining: 6m 51sRunning iteration 701/1500... Est. remaining: 6m 46sbest_combination: {'lookbacks': [139, 156, 203], 'score': np.float64(0.7076202034107079), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 41sRunning iteration 721/1500... Est. remaining: 6m 35sRunning iteration 731/1500... Est. remaining: 6m 30sRunning iteration 741/1500... Est. remaining: 6m 25sRunning iteration 751/1500... Est. remaining: 6m 20sRunning iteration 761/1500... Est. remaining: 6m 15sRunning iteration 771/1500... Est. remaining: 6m 9sRunning iteration 781/1500... Est. remaining: 6m 4sRunning iteration 791/1500... Est. remaining: 5m 59sRunning iteration 801/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [139, 156, 203], 'score': np.float64(0.7076202034107079), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 49sRunning iteration 821/1500... Est. remaining: 5m 43sRunning iteration 831/1500... Est. remaining: 5m 38sRunning iteration 841/1500... Est. remaining: 5m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,492,830,480
Annual Return: 48.28%
Sharpe Ratio: 1.59172
Sortino Ratio: 1.544
Max Drawdown: -58.1%
Avg Drawdown: -11.2%
Normalized Score: 0.772
Lookback periods: [139, 153, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 5m 29sRunning iteration 861/1500... Est. remaining: 5m 24sRunning iteration 871/1500... Est. remaining: 5m 19sRunning iteration 881/1500... Est. remaining: 5m 14sRunning iteration 891/1500... Est. remaining: 5m 8sRunning iteration 901/1500... Est. remaining: 5m 3sbest_combination: {'lookbacks': [139, 153, 191], 'score': np.float64(0.7722336402295485), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 58sRunning iteration 921/1500... Est. remaining: 4m 53sRunning iteration 931/1500... Est. remaining: 4m 48sRunning iteration 941/1500... Est. remaining: 4m 43sRunning iteration 951/1500... Est. remaining: 4m 38sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 17sRunning iteration 1001/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [139, 153, 191], 'score': np.float64(0.7722336402295485), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 7sRunning iteration 1021/1500... Est. remaining: 4m 2sRunning iteration 1031/1500... Est. remaining: 3m 57sRunning iteration 1041/1500... Est. remaining: 3m 52sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 21sbest_combination: {'lookbacks': [139, 153, 191], 'score': np.float64(0.7722336402295485), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 16sRunning iteration 1121/1500... Est. remaining: 3m 11sRunning iteration 1131/1500... Est. remaining: 3m 6sRunning iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 56sRunning iteration 1161/1500... Est. remaining: 2m 51sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [139, 153, 191], 'score': np.float64(0.7722336402295485), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [139, 153, 191], 'score': np.float64(0.7722336402295485), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [139, 153, 191], 'score': np.float64(0.7722336402295485), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 0.77
best_combination: {'lookbacks': [139, 153, 191], 'score': np.float64(0.7722336402295485), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 153, 191] (score: 0.7722)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 153, 191] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 112 selections (26.9%)
2. sp500_hma: 112 selections (26.9%)
3. naz100_pi: 76 selections (18.3%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 40 selections (9.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,492,830,480.17
Average Annualized Gain: 48.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Mon Aug 25 20:45:52 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $288,047,388
Annual Return: 34.48%
Sharpe Ratio: 1.20853
Sortino Ratio: 1.114
Max Drawdown: -62.9%
Avg Drawdown: -13.7%
Normalized Score: -1.491
Lookback periods: [66, 88, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $222,701,076
Annual Return: 33.49%
Sharpe Ratio: 1.17786
Sortino Ratio: 1.099
Max Drawdown: -52.3%
Avg Drawdown: -12.9%
Normalized Score: -1.441
Lookback periods: [67, 78, 118] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,811,323,903
Annual Return: 41.81%
Sharpe Ratio: 1.36739
Sortino Ratio: 1.321
Max Drawdown: -70.8%
Avg Drawdown: -13.1%
Normalized Score: -0.632
Lookback periods: [155, 198, 237] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,557,163,495
Annual Return: 41.19%
Sharpe Ratio: 1.36641
Sortino Ratio: 1.320
Max Drawdown: -67.8%
Avg Drawdown: -12.7%
Normalized Score: -0.617
Lookback periods: [220, 240, 267] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,879,913,505
Annual Return: 41.96%
Sharpe Ratio: 1.39485
Sortino Ratio: 1.337
Max Drawdown: -65.0%
Avg Drawdown: -12.6%
Normalized Score: -0.469
Lookback periods: [165, 241, 295] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,672,003,286
Annual Return: 44.73%
Sharpe Ratio: 1.46361
Sortino Ratio: 1.421
Max Drawdown: -59.0%
Avg Drawdown: -12.4%
Normalized Score: -0.010
Lookback periods: [157, 179, 208] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 6sRunning iteration 31/1500... Est. remaining: 20m 3sRunning iteration 41/1500... Est. remaining: 17m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,609,902,356
Annual Return: 45.68%
Sharpe Ratio: 1.49373
Sortino Ratio: 1.457
Max Drawdown: -68.5%
Avg Drawdown: -12.4%
Normalized Score: 0.011
Lookback periods: [126, 158, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 17m 17sRunning iteration 61/1500... Est. remaining: 16m 20sRunning iteration 71/1500... Est. remaining: 15m 37sRunning iteration 81/1500... Est. remaining: 15m 2sRunning iteration 91/1500... Est. remaining: 14m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,845,743,844
Annual Return: 48.45%
Sharpe Ratio: 1.55970
Sortino Ratio: 1.516
Max Drawdown: -60.2%
Avg Drawdown: -11.1%
Normalized Score: 0.514
Lookback periods: [189, 189, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 14m 25sbest_combination: {'lookbacks': [189, 189, 199], 'score': np.float64(0.5138111210206814), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 3sRunning iteration 121/1500... Est. remaining: 13m 44sRunning iteration 131/1500... Est. remaining: 13m 27sRunning iteration 141/1500... Est. remaining: 13m 12sRunning iteration 151/1500... Est. remaining: 12m 59sRunning iteration 161/1500... Est. remaining: 12m 46sRunning iteration 171/1500... Est. remaining: 12m 34sRunning iteration 181/1500... Est. remaining: 12m 23sRunning iteration 191/1500... Est. remaining: 12m 13sRunning iteration 201/1500... Est. remaining: 12m 3sbest_combination: {'lookbacks': [189, 189, 199], 'score': np.float64(0.5138111210206814), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 54sRunning iteration 221/1500... Est. remaining: 11m 44sRunning iteration 231/1500... Est. remaining: 11m 36sRunning iteration 241/1500... Est. remaining: 11m 27sRunning iteration 251/1500... Est. remaining: 11m 20sRunning iteration 261/1500... Est. remaining: 11m 12sRunning iteration 271/1500... Est. remaining: 11m 5sRunning iteration 281/1500... Est. remaining: 10m 57sRunning iteration 291/1500... Est. remaining: 10m 50sRunning iteration 301/1500... Est. remaining: 10m 43sbest_combination: {'lookbacks': [189, 189, 199], 'score': np.float64(0.5138111210206814), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 37sRunning iteration 321/1500... Est. remaining: 10m 30sRunning iteration 331/1500... Est. remaining: 10m 23sRunning iteration 341/1500... Est. remaining: 10m 16sRunning iteration 351/1500... Est. remaining: 10m 10sRunning iteration 361/1500... Est. remaining: 10m 3sRunning iteration 371/1500... Est. remaining: 9m 56sRunning iteration 381/1500... Est. remaining: 9m 50sRunning iteration 391/1500... Est. remaining: 9m 44sRunning iteration 401/1500... Est. remaining: 9m 38sbest_combination: {'lookbacks': [189, 189, 199], 'score': np.float64(0.5138111210206814), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 32sRunning iteration 421/1500... Est. remaining: 9m 25sRunning iteration 431/1500... Est. remaining: 9m 19sRunning iteration 441/1500... Est. remaining: 9m 13sRunning iteration 451/1500... Est. remaining: 9m 8sRunning iteration 461/1500... Est. remaining: 9m 2sRunning iteration 471/1500... Est. remaining: 8m 56sRunning iteration 481/1500... Est. remaining: 8m 50sRunning iteration 491/1500... Est. remaining: 8m 45sRunning iteration 501/1500... Est. remaining: 8m 39sbest_combination: {'lookbacks': [189, 189, 199], 'score': np.float64(0.5138111210206814), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 33sRunning iteration 521/1500... Est. remaining: 8m 27sRunning iteration 531/1500... Est. remaining: 8m 22sRunning iteration 541/1500... Est. remaining: 8m 16sRunning iteration 551/1500... Est. remaining: 8m 11sRunning iteration 561/1500... Est. remaining: 8m 5sRunning iteration 571/1500... Est. remaining: 8m 0sRunning iteration 581/1500... Est. remaining: 7m 54sRunning iteration 591/1500... Est. remaining: 7m 49sRunning iteration 601/1500... Est. remaining: 7m 43sbest_combination: {'lookbacks': [189, 189, 199], 'score': np.float64(0.5138111210206814), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 38sRunning iteration 621/1500... Est. remaining: 7m 33sRunning iteration 631/1500... Est. remaining: 7m 27sRunning iteration 641/1500... Est. remaining: 7m 22sRunning iteration 651/1500... Est. remaining: 7m 17sRunning iteration 661/1500... Est. remaining: 7m 11sRunning iteration 671/1500... Est. remaining: 7m 6sRunning iteration 681/1500... Est. remaining: 7m 1sRunning iteration 691/1500... Est. remaining: 6m 55sRunning iteration 701/1500... Est. remaining: 6m 50sbest_combination: {'lookbacks': [189, 189, 199], 'score': np.float64(0.5138111210206814), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 45sRunning iteration 721/1500... Est. remaining: 6m 39sRunning iteration 731/1500... Est. remaining: 6m 34sRunning iteration 741/1500... Est. remaining: 6m 29sRunning iteration 751/1500... Est. remaining: 6m 24sRunning iteration 761/1500... Est. remaining: 6m 18sRunning iteration 771/1500... Est. remaining: 6m 13sRunning iteration 781/1500... Est. remaining: 6m 8sRunning iteration 791/1500... Est. remaining: 6m 2sRunning iteration 801/1500... Est. remaining: 5m 57sbest_combination: {'lookbacks': [189, 189, 199], 'score': np.float64(0.5138111210206814), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 52sRunning iteration 821/1500... Est. remaining: 5m 47sRunning iteration 831/1500... Est. remaining: 5m 41sRunning iteration 841/1500... Est. remaining: 5m 36sRunning iteration 851/1500... Est. remaining: 5m 31sRunning iteration 861/1500... Est. remaining: 5m 26sRunning iteration 871/1500... Est. remaining: 5m 21sRunning iteration 881/1500... Est. remaining: 5m 16sRunning iteration 891/1500... Est. remaining: 5m 10sRunning iteration 901/1500... Est. remaining: 5m 5sbest_combination: {'lookbacks': [189, 189, 199], 'score': np.float64(0.5138111210206814), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 0sRunning iteration 921/1500... Est. remaining: 4m 55sRunning iteration 931/1500... Est. remaining: 4m 50sRunning iteration 941/1500... Est. remaining: 4m 44sRunning iteration 951/1500... Est. remaining: 4m 39sRunning iteration 961/1500... Est. remaining: 4m 34sRunning iteration 971/1500... Est. remaining: 4m 29sRunning iteration 981/1500... Est. remaining: 4m 24sRunning iteration 991/1500... Est. remaining: 4m 19sRunning iteration 1001/1500... Est. remaining: 4m 13sbest_combination: {'lookbacks': [189, 189, 199], 'score': np.float64(0.5138111210206814), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 8sRunning iteration 1021/1500... Est. remaining: 4m 3sRunning iteration 1031/1500... Est. remaining: 3m 58sRunning iteration 1041/1500... Est. remaining: 3m 53sRunning iteration 1051/1500... Est. remaining: 3m 48sRunning iteration 1061/1500... Est. remaining: 3m 43sRunning iteration 1071/1500... Est. remaining: 3m 38sRunning iteration 1081/1500... Est. remaining: 3m 32sRunning iteration 1091/1500... Est. remaining: 3m 27sRunning iteration 1101/1500... Est. remaining: 3m 22sbest_combination: {'lookbacks': [189, 189, 199], 'score': np.float64(0.5138111210206814), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 17sRunning iteration 1121/1500... Est. remaining: 3m 12sRunning iteration 1131/1500... Est. remaining: 3m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,426,404,809
Annual Return: 48.72%
Sharpe Ratio: 1.56342
Sortino Ratio: 1.533
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.567
Lookback periods: [175, 188, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1141/1500... Est. remaining: 3m 2sRunning iteration 1151/1500... Est. remaining: 2m 57sRunning iteration 1161/1500... Est. remaining: 2m 52sRunning iteration 1171/1500... Est. remaining: 2m 47sRunning iteration 1181/1500... Est. remaining: 2m 42sRunning iteration 1191/1500... Est. remaining: 2m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,771,523,757
Annual Return: 49.30%
Sharpe Ratio: 1.58467
Sortino Ratio: 1.550
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.661
Lookback periods: [176, 188, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 2m 32sbest_combination: {'lookbacks': [176, 188, 189], 'score': np.float64(0.661428480137547), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 27sRunning iteration 1221/1500... Est. remaining: 2m 22sRunning iteration 1231/1500... Est. remaining: 2m 17sRunning iteration 1241/1500... Est. remaining: 2m 11sRunning iteration 1251/1500... Est. remaining: 2m 6sRunning iteration 1261/1500... Est. remaining: 2m 1sRunning iteration 1271/1500... Est. remaining: 1m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,882,439,594
Annual Return: 49.34%
Sharpe Ratio: 1.59250
Sortino Ratio: 1.559
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.690
Lookback periods: [176, 188, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1281/1500... Est. remaining: 1m 51sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [176, 188, 205], 'score': np.float64(0.6901972016592349), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 36sRunning iteration 1321/1500... Est. remaining: 1m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,310,651,142
Annual Return: 49.51%
Sharpe Ratio: 1.60360
Sortino Ratio: 1.560
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.701
Lookback periods: [181, 189, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1331/1500... Est. remaining: 1m 26sRunning iteration 1341/1500... Est. remaining: 1m 21sRunning iteration 1351/1500... Est. remaining: 1m 16sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [181, 189, 191], 'score': np.float64(0.7009231944353626), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.7 minutes
Best normalized score: 0.70
best_combination: {'lookbacks': [181, 189, 191], 'score': np.float64(0.7009231944353626), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [181, 189, 191] (score: 0.7009)

Monte Carlo simulation completed in 12.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [181, 189, 191] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 121 selections (29.1%)
2. sp500_hma: 100 selections (24.0%)
3. naz100_pine: 83 selections (20.0%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 41 selections (9.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,310,651,142.46
Average Annualized Gain: 49.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Mon Aug 25 20:58:41 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $364,522,213
Annual Return: 35.40%
Sharpe Ratio: 1.18795
Sortino Ratio: 1.123
Max Drawdown: -68.9%
Avg Drawdown: -14.4%
Normalized Score: -1.524
Lookback periods: [79, 183, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,317,591,911
Annual Return: 40.51%
Sharpe Ratio: 1.35504
Sortino Ratio: 1.307
Max Drawdown: -69.1%
Avg Drawdown: -13.3%
Normalized Score: -0.628
Lookback periods: [135, 231, 252] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,148,177,274
Annual Return: 44.09%
Sharpe Ratio: 1.47910
Sortino Ratio: 1.423
Max Drawdown: -55.8%
Avg Drawdown: -12.0%
Normalized Score: 0.227
Lookback periods: [105, 126, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 31sRunning iteration 21/1500... Est. remaining: 19m 47sRunning iteration 31/1500... Est. remaining: 17m 6sRunning iteration 41/1500... Est. remaining: 15m 45sRunning iteration 51/1500... Est. remaining: 14m 54sRunning iteration 61/1500... Est. remaining: 14m 16sRunning iteration 71/1500... Est. remaining: 13m 49sRunning iteration 81/1500... Est. remaining: 13m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,138,815,122
Annual Return: 46.89%
Sharpe Ratio: 1.52692
Sortino Ratio: 1.488
Max Drawdown: -59.2%
Avg Drawdown: -12.8%
Normalized Score: 0.488
Lookback periods: [148, 154, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 13m 31sRunning iteration 101/1500... Est. remaining: 13m 14sbest_combination: {'lookbacks': [148, 154, 165], 'score': np.float64(0.4875859614887793), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 59sRunning iteration 121/1500... Est. remaining: 12m 45sRunning iteration 131/1500... Est. remaining: 12m 33sRunning iteration 141/1500... Est. remaining: 12m 22sRunning iteration 151/1500... Est. remaining: 12m 11sRunning iteration 161/1500... Est. remaining: 12m 2sRunning iteration 171/1500... Est. remaining: 11m 53sRunning iteration 181/1500... Est. remaining: 11m 44sRunning iteration 191/1500... Est. remaining: 11m 36sRunning iteration 201/1500... Est. remaining: 11m 29sbest_combination: {'lookbacks': [148, 154, 165], 'score': np.float64(0.4875859614887793), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 22sRunning iteration 221/1500... Est. remaining: 11m 14sRunning iteration 231/1500... Est. remaining: 11m 7sRunning iteration 241/1500... Est. remaining: 11m 1sRunning iteration 251/1500... Est. remaining: 10m 54sRunning iteration 261/1500... Est. remaining: 10m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,284,298,678
Annual Return: 44.27%
Sharpe Ratio: 1.58534
Sortino Ratio: 1.482
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 0.974
Lookback periods: [41, 52, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/1500... Est. remaining: 10m 46sRunning iteration 281/1500... Est. remaining: 10m 39sRunning iteration 291/1500... Est. remaining: 10m 33sRunning iteration 301/1500... Est. remaining: 10m 27sbest_combination: {'lookbacks': [41, 52, 131], 'score': np.float64(0.9737743017918354), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 21sRunning iteration 321/1500... Est. remaining: 10m 15sRunning iteration 331/1500... Est. remaining: 10m 9sRunning iteration 341/1500... Est. remaining: 10m 3sRunning iteration 351/1500... Est. remaining: 9m 57sRunning iteration 361/1500... Est. remaining: 9m 51sRunning iteration 371/1500... Est. remaining: 9m 45sRunning iteration 381/1500... Est. remaining: 9m 39sRunning iteration 391/1500... Est. remaining: 9m 33sRunning iteration 401/1500... Est. remaining: 9m 27sbest_combination: {'lookbacks': [41, 52, 131], 'score': np.float64(0.9737743017918354), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 21sRunning iteration 421/1500... Est. remaining: 9m 15sRunning iteration 431/1500... Est. remaining: 9m 9sRunning iteration 441/1500... Est. remaining: 9m 4sRunning iteration 451/1500... Est. remaining: 8m 58sRunning iteration 461/1500... Est. remaining: 8m 52sRunning iteration 471/1500... Est. remaining: 8m 47sRunning iteration 481/1500... Est. remaining: 8m 41sRunning iteration 491/1500... Est. remaining: 8m 36sRunning iteration 501/1500... Est. remaining: 8m 30sbest_combination: {'lookbacks': [41, 52, 131], 'score': np.float64(0.9737743017918354), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 24sRunning iteration 521/1500... Est. remaining: 8m 19sRunning iteration 531/1500... Est. remaining: 8m 13sRunning iteration 541/1500... Est. remaining: 8m 8sRunning iteration 551/1500... Est. remaining: 8m 3sRunning iteration 561/1500... Est. remaining: 7m 58sRunning iteration 571/1500... Est. remaining: 7m 52sRunning iteration 581/1500... Est. remaining: 7m 47sRunning iteration 591/1500... Est. remaining: 7m 42sRunning iteration 601/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [41, 52, 131], 'score': np.float64(0.9737743017918354), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 31sRunning iteration 621/1500... Est. remaining: 7m 26sRunning iteration 631/1500... Est. remaining: 7m 20sRunning iteration 641/1500... Est. remaining: 7m 15sRunning iteration 651/1500... Est. remaining: 7m 10sRunning iteration 661/1500... Est. remaining: 7m 4sRunning iteration 671/1500... Est. remaining: 6m 59sRunning iteration 681/1500... Est. remaining: 6m 54sRunning iteration 691/1500... Est. remaining: 6m 48sRunning iteration 701/1500... Est. remaining: 6m 43sbest_combination: {'lookbacks': [41, 52, 131], 'score': np.float64(0.9737743017918354), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 38sRunning iteration 721/1500... Est. remaining: 6m 32sRunning iteration 731/1500... Est. remaining: 6m 27sRunning iteration 741/1500... Est. remaining: 6m 22sRunning iteration 751/1500... Est. remaining: 6m 17sRunning iteration 761/1500... Est. remaining: 6m 11sRunning iteration 771/1500... Est. remaining: 6m 6sRunning iteration 781/1500... Est. remaining: 6m 1sRunning iteration 791/1500... Est. remaining: 5m 56sRunning iteration 801/1500... Est. remaining: 5m 51sbest_combination: {'lookbacks': [41, 52, 131], 'score': np.float64(0.9737743017918354), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 45sRunning iteration 821/1500... Est. remaining: 5m 40sRunning iteration 831/1500... Est. remaining: 5m 35sRunning iteration 841/1500... Est. remaining: 5m 30sRunning iteration 851/1500... Est. remaining: 5m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,515,402,639
Annual Return: 44.55%
Sharpe Ratio: 1.60307
Sortino Ratio: 1.498
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.053
Lookback periods: [41, 52, 129] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 5m 21sRunning iteration 871/1500... Est. remaining: 5m 16sRunning iteration 881/1500... Est. remaining: 5m 10sRunning iteration 891/1500... Est. remaining: 5m 5sRunning iteration 901/1500... Est. remaining: 5m 0sbest_combination: {'lookbacks': [41, 52, 129], 'score': np.float64(1.0529551215790975), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 55sRunning iteration 921/1500... Est. remaining: 4m 50sRunning iteration 931/1500... Est. remaining: 4m 45sRunning iteration 941/1500... Est. remaining: 4m 39sRunning iteration 951/1500... Est. remaining: 4m 34sRunning iteration 961/1500... Est. remaining: 4m 29sRunning iteration 971/1500... Est. remaining: 4m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,595,667,945
Annual Return: 45.67%
Sharpe Ratio: 1.63359
Sortino Ratio: 1.530
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.202
Lookback periods: [42, 52, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 981/1500... Est. remaining: 4m 19sRunning iteration 991/1500... Est. remaining: 4m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,371,948,821
Annual Return: 45.46%
Sharpe Ratio: 1.63054
Sortino Ratio: 1.531
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.203
Lookback periods: [41, 52, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [41, 52, 128], 'score': np.float64(1.2027999801091407), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 5sRunning iteration 1021/1500... Est. remaining: 4m 0sRunning iteration 1031/1500... Est. remaining: 3m 55sRunning iteration 1041/1500... Est. remaining: 3m 50sRunning iteration 1051/1500... Est. remaining: 3m 45sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 29sRunning iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [41, 52, 128], 'score': np.float64(1.2027999801091407), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4sRunning iteration 1141/1500... Est. remaining: 2m 59sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [41, 52, 128], 'score': np.float64(1.2027999801091407), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [41, 52, 128], 'score': np.float64(1.2027999801091407), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [41, 52, 128], 'score': np.float64(1.2027999801091407), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.20
best_combination: {'lookbacks': [41, 52, 128], 'score': np.float64(1.2027999801091407), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 52, 128] (score: 1.2028)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 52, 128] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,371,948,821.19
Average Annualized Gain: 45.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Mon Aug 25 21:11:12 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,107,869,555
Annual Return: 42.43%
Sharpe Ratio: 1.39739
Sortino Ratio: 1.360
Max Drawdown: -68.5%
Avg Drawdown: -12.2%
Normalized Score: -0.315
Lookback periods: [114, 173, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,204,747,141
Annual Return: 44.16%
Sharpe Ratio: 1.45327
Sortino Ratio: 1.406
Max Drawdown: -62.6%
Avg Drawdown: -12.5%
Normalized Score: -0.020
Lookback periods: [189, 247, 264] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 45sRunning iteration 21/1500... Est. remaining: 18m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,257,545,374
Annual Return: 46.24%
Sharpe Ratio: 1.51444
Sortino Ratio: 1.472
Max Drawdown: -59.7%
Avg Drawdown: -12.4%
Normalized Score: 0.304
Lookback periods: [148, 156, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 17m 3sRunning iteration 41/1500... Est. remaining: 15m 43sRunning iteration 51/1500... Est. remaining: 14m 55sRunning iteration 61/1500... Est. remaining: 14m 17sRunning iteration 71/1500... Est. remaining: 13m 52sRunning iteration 81/1500... Est. remaining: 13m 30sRunning iteration 91/1500... Est. remaining: 13m 12sRunning iteration 101/1500... Est. remaining: 12m 56sbest_combination: {'lookbacks': [148, 156, 165], 'score': np.float64(0.30352811480617753), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 43sRunning iteration 121/1500... Est. remaining: 12m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,025,992,487
Annual Return: 47.47%
Sharpe Ratio: 1.54684
Sortino Ratio: 1.508
Max Drawdown: -60.2%
Avg Drawdown: -11.4%
Normalized Score: 0.503
Lookback periods: [149, 171, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 12m 32sRunning iteration 141/1500... Est. remaining: 12m 22sRunning iteration 151/1500... Est. remaining: 12m 11sRunning iteration 161/1500... Est. remaining: 12m 2sRunning iteration 171/1500... Est. remaining: 11m 53sRunning iteration 181/1500... Est. remaining: 11m 44sRunning iteration 191/1500... Est. remaining: 11m 36sRunning iteration 201/1500... Est. remaining: 11m 28sbest_combination: {'lookbacks': [149, 171, 183], 'score': np.float64(0.5033826648098507), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 21sRunning iteration 221/1500... Est. remaining: 11m 14sRunning iteration 231/1500... Est. remaining: 11m 7sRunning iteration 241/1500... Est. remaining: 11m 0sRunning iteration 251/1500... Est. remaining: 10m 53sRunning iteration 261/1500... Est. remaining: 10m 47sRunning iteration 271/1500... Est. remaining: 10m 40sRunning iteration 281/1500... Est. remaining: 10m 33sRunning iteration 291/1500... Est. remaining: 10m 27sRunning iteration 301/1500... Est. remaining: 10m 21sbest_combination: {'lookbacks': [149, 171, 183], 'score': np.float64(0.5033826648098507), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,533,468,699
Annual Return: 47.16%
Sharpe Ratio: 1.54908
Sortino Ratio: 1.503
Max Drawdown: -57.2%
Avg Drawdown: -11.6%
Normalized Score: 0.517
Lookback periods: [130, 156, 206] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/1500... Est. remaining: 10m 13sRunning iteration 331/1500... Est. remaining: 10m 7sRunning iteration 341/1500... Est. remaining: 10m 1sRunning iteration 351/1500... Est. remaining: 9m 55sRunning iteration 361/1500... Est. remaining: 9m 49sRunning iteration 371/1500... Est. remaining: 9m 43sRunning iteration 381/1500... Est. remaining: 9m 37sRunning iteration 391/1500... Est. remaining: 9m 31sRunning iteration 401/1500... Est. remaining: 9m 26sbest_combination: {'lookbacks': [130, 156, 206], 'score': np.float64(0.5169582015256879), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 20sRunning iteration 421/1500... Est. remaining: 9m 14sRunning iteration 431/1500... Est. remaining: 9m 9sRunning iteration 441/1500... Est. remaining: 9m 3sRunning iteration 451/1500... Est. remaining: 8m 58sRunning iteration 461/1500... Est. remaining: 8m 52sRunning iteration 471/1500... Est. remaining: 8m 46sRunning iteration 481/1500... Est. remaining: 8m 41sRunning iteration 491/1500... Est. remaining: 8m 35sRunning iteration 501/1500... Est. remaining: 8m 30sbest_combination: {'lookbacks': [130, 156, 206], 'score': np.float64(0.5169582015256879), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 25sRunning iteration 521/1500... Est. remaining: 8m 19sRunning iteration 531/1500... Est. remaining: 8m 14sRunning iteration 541/1500... Est. remaining: 8m 9sRunning iteration 551/1500... Est. remaining: 8m 3sRunning iteration 561/1500... Est. remaining: 7m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,014,730,003
Annual Return: 48.03%
Sharpe Ratio: 1.57313
Sortino Ratio: 1.543
Max Drawdown: -59.0%
Avg Drawdown: -10.4%
Normalized Score: 0.690
Lookback periods: [158, 167, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 11m 33sRunning iteration 581/1500... Est. remaining: 28m 14sRunning iteration 591/1500... Est. remaining: 27m 35sRunning iteration 601/1500... Est. remaining: 49m 41sbest_combination: {'lookbacks': [158, 167, 168], 'score': np.float64(0.6895910103143559), 'visits': 1}
Running iteration 611/1500... Est. remaining: 48m 26sRunning iteration 621/1500... Est. remaining: 58m 3sRunning iteration 631/1500... Est. remaining: 67m 36sRunning iteration 641/1500... Est. remaining: 65m 53sRunning iteration 651/1500... Est. remaining: 69m 52sRunning iteration 661/1500... Est. remaining: 78m 10sRunning iteration 671/1500... Est. remaining: 76m 11sRunning iteration 681/1500... Est. remaining: 82m 48sRunning iteration 691/1500... Est. remaining: 82m 24sRunning iteration 701/1500... Est. remaining: 80m 19sbest_combination: {'lookbacks': [158, 167, 168], 'score': np.float64(0.6895910103143559), 'visits': 1}
Running iteration 711/1500... Est. remaining: 83m 35sRunning iteration 721/1500... Est. remaining: 81m 28sRunning iteration 731/1500... Est. remaining: 79m 24sRunning iteration 741/1500... Est. remaining: 77m 24sRunning iteration 751/1500... Est. remaining: 75m 26sRunning iteration 761/1500... Est. remaining: 73m 32sRunning iteration 771/1500... Est. remaining: 71m 41sRunning iteration 781/1500... Est. remaining: 69m 52sRunning iteration 791/1500... Est. remaining: 68m 6sRunning iteration 801/1500... Est. remaining: 66m 23sbest_combination: {'lookbacks': [158, 167, 168], 'score': np.float64(0.6895910103143559), 'visits': 1}
Running iteration 811/1500... Est. remaining: 64m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,901,027,777
Annual Return: 49.35%
Sharpe Ratio: 1.59810
Sortino Ratio: 1.563
Max Drawdown: -59.7%
Avg Drawdown: -11.5%
Normalized Score: 0.753
Lookback periods: [152, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 821/1500... Est. remaining: 63m 4sRunning iteration 831/1500... Est. remaining: 61m 27sRunning iteration 841/1500... Est. remaining: 59m 53sRunning iteration 851/1500... Est. remaining: 58m 20sRunning iteration 861/1500... Est. remaining: 56m 50sRunning iteration 871/1500... Est. remaining: 55m 22sRunning iteration 881/1500... Est. remaining: 53m 55sRunning iteration 891/1500... Est. remaining: 52m 31sRunning iteration 901/1500... Est. remaining: 51m 8sbest_combination: {'lookbacks': [152, 155, 172], 'score': np.float64(0.7530185236079814), 'visits': 1}
Running iteration 911/1500... Est. remaining: 49m 47sRunning iteration 921/1500... Est. remaining: 48m 27sRunning iteration 931/1500... Est. remaining: 47m 9sRunning iteration 941/1500... Est. remaining: 45m 53sRunning iteration 951/1500... Est. remaining: 44m 38sRunning iteration 961/1500... Est. remaining: 43m 25sRunning iteration 971/1500... Est. remaining: 42m 13sRunning iteration 981/1500... Est. remaining: 41m 2sRunning iteration 991/1500... Est. remaining: 39m 53sRunning iteration 1001/1500... Est. remaining: 38m 45sbest_combination: {'lookbacks': [152, 155, 172], 'score': np.float64(0.7530185236079814), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 37m 38sRunning iteration 1021/1500... Est. remaining: 36m 33sRunning iteration 1031/1500... Est. remaining: 35m 29sRunning iteration 1041/1500... Est. remaining: 34m 25sRunning iteration 1051/1500... Est. remaining: 33m 23sRunning iteration 1061/1500... Est. remaining: 32m 22sRunning iteration 1071/1500... Est. remaining: 31m 22sRunning iteration 1081/1500... Est. remaining: 30m 24sRunning iteration 1091/1500... Est. remaining: 29m 26sRunning iteration 1101/1500... Est. remaining: 28m 29sbest_combination: {'lookbacks': [152, 155, 172], 'score': np.float64(0.7530185236079814), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 27m 33sRunning iteration 1121/1500... Est. remaining: 26m 38sRunning iteration 1131/1500... Est. remaining: 25m 43sRunning iteration 1141/1500... Est. remaining: 24m 50sRunning iteration 1151/1500... Est. remaining: 23m 58sRunning iteration 1161/1500... Est. remaining: 23m 6sRunning iteration 1171/1500... Est. remaining: 22m 15sRunning iteration 1181/1500... Est. remaining: 21m 25sRunning iteration 1191/1500... Est. remaining: 20m 35sRunning iteration 1201/1500... Est. remaining: 19m 47sbest_combination: {'lookbacks': [152, 155, 172], 'score': np.float64(0.7530185236079814), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 18m 59sRunning iteration 1221/1500... Est. remaining: 18m 12sRunning iteration 1231/1500... Est. remaining: 17m 25sRunning iteration 1241/1500... Est. remaining: 16m 39sRunning iteration 1251/1500... Est. remaining: 15m 54sRunning iteration 1261/1500... Est. remaining: 15m 10sRunning iteration 1271/1500... Est. remaining: 14m 26sRunning iteration 1281/1500... Est. remaining: 13m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,279,354,427
Annual Return: 49.09%
Sharpe Ratio: 1.61284
Sortino Ratio: 1.568
Max Drawdown: -56.8%
Avg Drawdown: -10.8%
Normalized Score: 0.842
Lookback periods: [139, 158, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1291/1500... Est. remaining: 13m 0sRunning iteration 1301/1500... Est. remaining: 12m 18sbest_combination: {'lookbacks': [139, 158, 178], 'score': np.float64(0.8423160563117893), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 11m 36sRunning iteration 1321/1500... Est. remaining: 10m 55sRunning iteration 1331/1500... Est. remaining: 10m 15sRunning iteration 1341/1500... Est. remaining: 9m 35sRunning iteration 1351/1500... Est. remaining: 8m 56sRunning iteration 1361/1500... Est. remaining: 8m 17sRunning iteration 1371/1500... Est. remaining: 7m 38sRunning iteration 1381/1500... Est. remaining: 7m 0sRunning iteration 1391/1500... Est. remaining: 6m 23sRunning iteration 1401/1500... Est. remaining: 5m 46sbest_combination: {'lookbacks': [139, 158, 178], 'score': np.float64(0.8423160563117893), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 5m 9sRunning iteration 1421/1500... Est. remaining: 4m 33sRunning iteration 1431/1500... Est. remaining: 3m 58sRunning iteration 1441/1500... Est. remaining: 3m 22sRunning iteration 1451/1500... Est. remaining: 2m 48sRunning iteration 1461/1500... Est. remaining: 2m 13sRunning iteration 1471/1500... Est. remaining: 1m 39sRunning iteration 1481/1500... Est. remaining: 1m 6sRunning iteration 1491/1500... Est. remaining: 0m 32s
Monte Carlo simulation completed in 81.6 minutes
Best normalized score: 0.84
best_combination: {'lookbacks': [139, 158, 178], 'score': np.float64(0.8423160563117893), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 158, 178] (score: 0.8423)

Monte Carlo simulation completed in 81.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 158, 178] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 106 selections (25.5%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 44 selections (10.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,279,354,427.31
Average Annualized Gain: 49.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Mon Aug 25 22:32:58 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $225,945,847
Annual Return: 33.54%
Sharpe Ratio: 1.14275
Sortino Ratio: 1.066
Max Drawdown: -55.8%
Avg Drawdown: -14.1%
Normalized Score: -1.452
Lookback periods: [102, 116, 283] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,742,707,556
Annual Return: 44.81%
Sharpe Ratio: 1.46500
Sortino Ratio: 1.426
Max Drawdown: -61.0%
Avg Drawdown: -12.9%
Normalized Score: 0.106
Lookback periods: [139, 180, 211] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 30sRunning iteration 21/1500... Est. remaining: 18m 7sRunning iteration 31/1500... Est. remaining: 15m 56sRunning iteration 41/1500... Est. remaining: 14m 48sRunning iteration 51/1500... Est. remaining: 14m 7sRunning iteration 61/1500... Est. remaining: 13m 37sRunning iteration 71/1500... Est. remaining: 13m 15sRunning iteration 81/1500... Est. remaining: 12m 57sRunning iteration 91/1500... Est. remaining: 12m 43sRunning iteration 101/1500... Est. remaining: 12m 31sbest_combination: {'lookbacks': [139, 180, 211], 'score': np.float64(0.10568690912077686), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 18sRunning iteration 121/1500... Est. remaining: 12m 7sRunning iteration 131/1500... Est. remaining: 11m 57sRunning iteration 141/1500... Est. remaining: 11m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,659,821,889
Annual Return: 44.72%
Sharpe Ratio: 1.47501
Sortino Ratio: 1.432
Max Drawdown: -60.1%
Avg Drawdown: -12.0%
Normalized Score: 0.212
Lookback periods: [131, 156, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 11m 52sRunning iteration 161/1500... Est. remaining: 11m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,505,977,064
Annual Return: 45.59%
Sharpe Ratio: 1.48025
Sortino Ratio: 1.448
Max Drawdown: -60.8%
Avg Drawdown: -12.3%
Normalized Score: 0.252
Lookback periods: [149, 195, 214] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 11m 44sRunning iteration 181/1500... Est. remaining: 11m 35sRunning iteration 191/1500... Est. remaining: 11m 28sRunning iteration 201/1500... Est. remaining: 11m 20sbest_combination: {'lookbacks': [149, 195, 214], 'score': np.float64(0.2516830542976102), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 13sRunning iteration 221/1500... Est. remaining: 11m 6sRunning iteration 231/1500... Est. remaining: 10m 59sRunning iteration 241/1500... Est. remaining: 10m 53sRunning iteration 251/1500... Est. remaining: 10m 46sRunning iteration 261/1500... Est. remaining: 10m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,647,495,493
Annual Return: 45.72%
Sharpe Ratio: 1.47947
Sortino Ratio: 1.454
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.330
Lookback periods: [150, 170, 215] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,073,982,855
Annual Return: 48.56%
Sharpe Ratio: 1.56974
Sortino Ratio: 1.532
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.757
Lookback periods: [177, 189, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/1500... Est. remaining: 10m 44sRunning iteration 281/1500... Est. remaining: 10m 37sRunning iteration 291/1500... Est. remaining: 10m 31sRunning iteration 301/1500... Est. remaining: 10m 24sbest_combination: {'lookbacks': [177, 189, 194], 'score': np.float64(0.756931419590201), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 18sRunning iteration 321/1500... Est. remaining: 10m 12sRunning iteration 331/1500... Est. remaining: 10m 5sRunning iteration 341/1500... Est. remaining: 9m 59sRunning iteration 351/1500... Est. remaining: 9m 53sRunning iteration 361/1500... Est. remaining: 9m 47sRunning iteration 371/1500... Est. remaining: 9m 40sRunning iteration 381/1500... Est. remaining: 9m 34sRunning iteration 391/1500... Est. remaining: 9m 28sRunning iteration 401/1500... Est. remaining: 9m 23sbest_combination: {'lookbacks': [177, 189, 194], 'score': np.float64(0.756931419590201), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 17sRunning iteration 421/1500... Est. remaining: 9m 12sRunning iteration 431/1500... Est. remaining: 9m 6sRunning iteration 441/1500... Est. remaining: 9m 1sRunning iteration 451/1500... Est. remaining: 8m 55sRunning iteration 461/1500... Est. remaining: 8m 50sRunning iteration 471/1500... Est. remaining: 8m 44sRunning iteration 481/1500... Est. remaining: 8m 39sRunning iteration 491/1500... Est. remaining: 8m 33sRunning iteration 501/1500... Est. remaining: 8m 28sbest_combination: {'lookbacks': [177, 189, 194], 'score': np.float64(0.756931419590201), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 22sRunning iteration 521/1500... Est. remaining: 8m 16sRunning iteration 531/1500... Est. remaining: 8m 11sRunning iteration 541/1500... Est. remaining: 8m 5sRunning iteration 551/1500... Est. remaining: 8m 0sRunning iteration 561/1500... Est. remaining: 7m 54sRunning iteration 571/1500... Est. remaining: 7m 49sRunning iteration 581/1500... Est. remaining: 7m 43sRunning iteration 591/1500... Est. remaining: 7m 38sRunning iteration 601/1500... Est. remaining: 7m 33sbest_combination: {'lookbacks': [177, 189, 194], 'score': np.float64(0.756931419590201), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 27sRunning iteration 621/1500... Est. remaining: 7m 22sRunning iteration 631/1500... Est. remaining: 7m 17sRunning iteration 641/1500... Est. remaining: 7m 12sRunning iteration 651/1500... Est. remaining: 7m 7sRunning iteration 661/1500... Est. remaining: 7m 1sRunning iteration 671/1500... Est. remaining: 6m 56sRunning iteration 681/1500... Est. remaining: 6m 51sRunning iteration 691/1500... Est. remaining: 6m 46sRunning iteration 701/1500... Est. remaining: 6m 41sbest_combination: {'lookbacks': [177, 189, 194], 'score': np.float64(0.756931419590201), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 36sRunning iteration 721/1500... Est. remaining: 6m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,451,090,024
Annual Return: 49.17%
Sharpe Ratio: 1.58973
Sortino Ratio: 1.551
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.791
Lookback periods: [178, 184, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 6m 27sRunning iteration 741/1500... Est. remaining: 6m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,398,692,484
Annual Return: 49.14%
Sharpe Ratio: 1.58544
Sortino Ratio: 1.546
Max Drawdown: -60.2%
Avg Drawdown: -11.2%
Normalized Score: 0.810
Lookback periods: [183, 189, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 6m 18sRunning iteration 761/1500... Est. remaining: 6m 13sRunning iteration 771/1500... Est. remaining: 6m 8sRunning iteration 781/1500... Est. remaining: 6m 2sRunning iteration 791/1500... Est. remaining: 5m 57sRunning iteration 801/1500... Est. remaining: 5m 52sbest_combination: {'lookbacks': [183, 189, 190], 'score': np.float64(0.81031781301957), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 47sRunning iteration 821/1500... Est. remaining: 5m 42sRunning iteration 831/1500... Est. remaining: 5m 37sRunning iteration 841/1500... Est. remaining: 5m 31sRunning iteration 851/1500... Est. remaining: 5m 26sRunning iteration 861/1500... Est. remaining: 5m 21sRunning iteration 871/1500... Est. remaining: 5m 16sRunning iteration 881/1500... Est. remaining: 5m 11sRunning iteration 891/1500... Est. remaining: 5m 6sRunning iteration 901/1500... Est. remaining: 5m 0sbest_combination: {'lookbacks': [183, 189, 190], 'score': np.float64(0.81031781301957), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 55sRunning iteration 921/1500... Est. remaining: 4m 50sRunning iteration 931/1500... Est. remaining: 4m 45sRunning iteration 941/1500... Est. remaining: 4m 40sRunning iteration 951/1500... Est. remaining: 4m 35sRunning iteration 961/1500... Est. remaining: 4m 30sRunning iteration 971/1500... Est. remaining: 4m 25sRunning iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 15sRunning iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [183, 189, 190], 'score': np.float64(0.81031781301957), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 5sRunning iteration 1021/1500... Est. remaining: 3m 59sRunning iteration 1031/1500... Est. remaining: 3m 54sRunning iteration 1041/1500... Est. remaining: 3m 49sRunning iteration 1051/1500... Est. remaining: 3m 44sRunning iteration 1061/1500... Est. remaining: 3m 39sRunning iteration 1071/1500... Est. remaining: 3m 34sRunning iteration 1081/1500... Est. remaining: 3m 29sRunning iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [183, 189, 190], 'score': np.float64(0.81031781301957), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,216,129,178
Annual Return: 49.84%
Sharpe Ratio: 1.61596
Sortino Ratio: 1.567
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.921
Lookback periods: [181, 189, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [181, 189, 198], 'score': np.float64(0.9208432090443534), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [181, 189, 198], 'score': np.float64(0.9208432090443534), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,785,829,375
Annual Return: 43.58%
Sharpe Ratio: 1.58587
Sortino Ratio: 1.483
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.019
Lookback periods: [46, 51, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,404,867,011
Annual Return: 44.42%
Sharpe Ratio: 1.61685
Sortino Ratio: 1.519
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.194
Lookback periods: [41, 51, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [41, 51, 96], 'score': np.float64(1.1940656720698288), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.19
best_combination: {'lookbacks': [41, 51, 96], 'score': np.float64(1.1940656720698288), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 51, 96] (score: 1.1941)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 51, 96] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 91 selections (21.9%)
3. naz100_pi: 77 selections (18.5%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 65 selections (15.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,404,867,010.60
Average Annualized Gain: 44.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Mon Aug 25 22:45:32 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $237,153,156
Annual Return: 33.73%
Sharpe Ratio: 1.14144
Sortino Ratio: 1.082
Max Drawdown: -69.1%
Avg Drawdown: -13.9%
Normalized Score: -1.657
Lookback periods: [111, 235, 267] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,131,900,075
Annual Return: 39.90%
Sharpe Ratio: 1.35783
Sortino Ratio: 1.303
Max Drawdown: -62.7%
Avg Drawdown: -12.5%
Normalized Score: -0.458
Lookback periods: [141, 260, 270] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,787,560,583
Annual Return: 41.76%
Sharpe Ratio: 1.42714
Sortino Ratio: 1.361
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: 0.124
Lookback periods: [91, 128, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 23sRunning iteration 31/1500... Est. remaining: 16m 48sRunning iteration 41/1500... Est. remaining: 15m 27sRunning iteration 51/1500... Est. remaining: 14m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,243,716,948
Annual Return: 45.34%
Sharpe Ratio: 1.47847
Sortino Ratio: 1.437
Max Drawdown: -59.2%
Avg Drawdown: -12.1%
Normalized Score: 0.332
Lookback periods: [148, 155, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 14m 29sRunning iteration 71/1500... Est. remaining: 14m 3sRunning iteration 81/1500... Est. remaining: 13m 40sRunning iteration 91/1500... Est. remaining: 13m 20sRunning iteration 101/1500... Est. remaining: 13m 3sbest_combination: {'lookbacks': [148, 155, 161], 'score': np.float64(0.3321100152234116), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 49sRunning iteration 121/1500... Est. remaining: 35m 35sRunning iteration 131/1500... Est. remaining: 150m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,155,998,444
Annual Return: 46.16%
Sharpe Ratio: 1.51865
Sortino Ratio: 1.477
Max Drawdown: -59.0%
Avg Drawdown: -12.2%
Normalized Score: 0.486
Lookback periods: [147, 168, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 140m 7sRunning iteration 151/1500... Est. remaining: 130m 34sRunning iteration 161/1500... Est. remaining: 122m 11sRunning iteration 171/1500... Est. remaining: 114m 47sRunning iteration 181/1500... Est. remaining: 108m 11sRunning iteration 191/1500... Est. remaining: 102m 17sRunning iteration 201/1500... Est. remaining: 96m 57sbest_combination: {'lookbacks': [147, 168, 184], 'score': np.float64(0.4863794982436168), 'visits': 1}
Running iteration 211/1500... Est. remaining: 92m 8sRunning iteration 221/1500... Est. remaining: 87m 44sRunning iteration 231/1500... Est. remaining: 83m 42sRunning iteration 241/1500... Est. remaining: 80m 1sRunning iteration 251/1500... Est. remaining: 76m 36sRunning iteration 261/1500... Est. remaining: 73m 28sRunning iteration 271/1500... Est. remaining: 70m 32sRunning iteration 281/1500... Est. remaining: 67m 49sRunning iteration 291/1500... Est. remaining: 65m 17sRunning iteration 301/1500... Est. remaining: 62m 54sbest_combination: {'lookbacks': [147, 168, 184], 'score': np.float64(0.4863794982436168), 'visits': 1}
Running iteration 311/1500... Est. remaining: 60m 40sRunning iteration 321/1500... Est. remaining: 58m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,008,590,600
Annual Return: 42.23%
Sharpe Ratio: 1.52115
Sortino Ratio: 1.422
Max Drawdown: -35.2%
Avg Drawdown: -9.3%
Normalized Score: 0.766
Lookback periods: [41, 42, 109] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 331/1500... Est. remaining: 56m 41sRunning iteration 341/1500... Est. remaining: 54m 49sRunning iteration 351/1500... Est. remaining: 53m 3sRunning iteration 361/1500... Est. remaining: 51m 23sRunning iteration 371/1500... Est. remaining: 49m 49sRunning iteration 381/1500... Est. remaining: 48m 18sRunning iteration 391/1500... Est. remaining: 46m 52sRunning iteration 401/1500... Est. remaining: 45m 31sbest_combination: {'lookbacks': [41, 42, 109], 'score': np.float64(0.765744318372227), 'visits': 1}
Running iteration 411/1500... Est. remaining: 44m 13sRunning iteration 421/1500... Est. remaining: 42m 58sRunning iteration 431/1500... Est. remaining: 41m 47sRunning iteration 441/1500... Est. remaining: 40m 39sRunning iteration 451/1500... Est. remaining: 39m 33sRunning iteration 461/1500... Est. remaining: 38m 31sRunning iteration 471/1500... Est. remaining: 37m 30sRunning iteration 481/1500... Est. remaining: 36m 32sRunning iteration 491/1500... Est. remaining: 35m 37sRunning iteration 501/1500... Est. remaining: 34m 43sbest_combination: {'lookbacks': [41, 42, 109], 'score': np.float64(0.765744318372227), 'visits': 1}
Running iteration 511/1500... Est. remaining: 33m 51sRunning iteration 521/1500... Est. remaining: 33m 1sRunning iteration 531/1500... Est. remaining: 32m 13sRunning iteration 541/1500... Est. remaining: 31m 26sRunning iteration 551/1500... Est. remaining: 30m 41sRunning iteration 561/1500... Est. remaining: 29m 57sRunning iteration 571/1500... Est. remaining: 29m 14sRunning iteration 581/1500... Est. remaining: 28m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,832,601,509
Annual Return: 43.65%
Sharpe Ratio: 1.57434
Sortino Ratio: 1.472
Max Drawdown: -35.1%
Avg Drawdown: -8.7%
Normalized Score: 1.042
Lookback periods: [42, 44, 119] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 27m 55sRunning iteration 601/1500... Est. remaining: 27m 17sbest_combination: {'lookbacks': [42, 44, 119], 'score': np.float64(1.0419504214009223), 'visits': 1}
Running iteration 611/1500... Est. remaining: 26m 39sRunning iteration 621/1500... Est. remaining: 26m 3sRunning iteration 631/1500... Est. remaining: 25m 27sRunning iteration 641/1500... Est. remaining: 24m 53sRunning iteration 651/1500... Est. remaining: 24m 19sRunning iteration 661/1500... Est. remaining: 23m 46sRunning iteration 671/1500... Est. remaining: 23m 14sRunning iteration 681/1500... Est. remaining: 22m 43sRunning iteration 691/1500... Est. remaining: 22m 12sRunning iteration 701/1500... Est. remaining: 21m 43sbest_combination: {'lookbacks': [42, 44, 119], 'score': np.float64(1.0419504214009223), 'visits': 1}
Running iteration 711/1500... Est. remaining: 21m 14sRunning iteration 721/1500... Est. remaining: 20m 45sRunning iteration 731/1500... Est. remaining: 20m 17sRunning iteration 741/1500... Est. remaining: 19m 50sRunning iteration 751/1500... Est. remaining: 19m 24sRunning iteration 761/1500... Est. remaining: 18m 58sRunning iteration 771/1500... Est. remaining: 18m 32sRunning iteration 781/1500... Est. remaining: 18m 8sRunning iteration 791/1500... Est. remaining: 17m 43sRunning iteration 801/1500... Est. remaining: 17m 19sbest_combination: {'lookbacks': [42, 44, 119], 'score': np.float64(1.0419504214009223), 'visits': 1}
Running iteration 811/1500... Est. remaining: 16m 56sRunning iteration 821/1500... Est. remaining: 16m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,044,423,444
Annual Return: 43.95%
Sharpe Ratio: 1.58557
Sortino Ratio: 1.492
Max Drawdown: -35.2%
Avg Drawdown: -9.1%
Normalized Score: 1.073
Lookback periods: [41, 42, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 831/1500... Est. remaining: 16m 11sRunning iteration 841/1500... Est. remaining: 15m 49sRunning iteration 851/1500... Est. remaining: 15m 28sRunning iteration 861/1500... Est. remaining: 15m 6sRunning iteration 871/1500... Est. remaining: 14m 46sRunning iteration 881/1500... Est. remaining: 14m 25sRunning iteration 891/1500... Est. remaining: 14m 5sRunning iteration 901/1500... Est. remaining: 13m 45sbest_combination: {'lookbacks': [41, 42, 110], 'score': np.float64(1.072946913781284), 'visits': 1}
Running iteration 911/1500... Est. remaining: 13m 25sRunning iteration 921/1500... Est. remaining: 13m 6sRunning iteration 931/1500... Est. remaining: 12m 47sRunning iteration 941/1500... Est. remaining: 12m 29sRunning iteration 951/1500... Est. remaining: 12m 10sRunning iteration 961/1500... Est. remaining: 11m 52sRunning iteration 971/1500... Est. remaining: 11m 34sRunning iteration 981/1500... Est. remaining: 11m 17sRunning iteration 991/1500... Est. remaining: 11m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,104,390,952
Annual Return: 44.03%
Sharpe Ratio: 1.57802
Sortino Ratio: 1.485
Max Drawdown: -35.1%
Avg Drawdown: -8.6%
Normalized Score: 1.102
Lookback periods: [42, 44, 117] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1001/1500... Est. remaining: 10m 43sbest_combination: {'lookbacks': [42, 44, 117], 'score': np.float64(1.1015400720555493), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 10m 26sRunning iteration 1021/1500... Est. remaining: 10m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,017,863,921
Annual Return: 43.91%
Sharpe Ratio: 1.58303
Sortino Ratio: 1.488
Max Drawdown: -35.1%
Avg Drawdown: -8.5%
Normalized Score: 1.107
Lookback periods: [42, 44, 121] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1031/1500... Est. remaining: 9m 54sRunning iteration 1041/1500... Est. remaining: 9m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,903,497,282
Annual Return: 43.75%
Sharpe Ratio: 1.58753
Sortino Ratio: 1.483
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.122
Lookback periods: [42, 42, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1051/1500... Est. remaining: 9m 22sRunning iteration 1061/1500... Est. remaining: 9m 7sRunning iteration 1071/1500... Est. remaining: 8m 51sRunning iteration 1081/1500... Est. remaining: 8m 36sRunning iteration 1091/1500... Est. remaining: 8m 21sRunning iteration 1101/1500... Est. remaining: 8m 6sbest_combination: {'lookbacks': [42, 42, 128], 'score': np.float64(1.1222832126001874), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 7m 51sRunning iteration 1121/1500... Est. remaining: 7m 36sRunning iteration 1131/1500... Est. remaining: 7m 22sRunning iteration 1141/1500... Est. remaining: 7m 8sRunning iteration 1151/1500... Est. remaining: 6m 54sRunning iteration 1161/1500... Est. remaining: 6m 40sRunning iteration 1171/1500... Est. remaining: 6m 26sRunning iteration 1181/1500... Est. remaining: 6m 12sRunning iteration 1191/1500... Est. remaining: 5m 59sRunning iteration 1201/1500... Est. remaining: 5m 46sbest_combination: {'lookbacks': [42, 42, 128], 'score': np.float64(1.1222832126001874), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 5m 32sRunning iteration 1221/1500... Est. remaining: 5m 19sRunning iteration 1231/1500... Est. remaining: 5m 7sRunning iteration 1241/1500... Est. remaining: 4m 54sRunning iteration 1251/1500... Est. remaining: 4m 41sRunning iteration 1261/1500... Est. remaining: 4m 29sRunning iteration 1271/1500... Est. remaining: 4m 16sRunning iteration 1281/1500... Est. remaining: 4m 4sRunning iteration 1291/1500... Est. remaining: 3m 52sRunning iteration 1301/1500... Est. remaining: 3m 40sbest_combination: {'lookbacks': [42, 42, 128], 'score': np.float64(1.1222832126001874), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 3m 28sRunning iteration 1321/1500... Est. remaining: 3m 16sRunning iteration 1331/1500... Est. remaining: 3m 4sRunning iteration 1341/1500... Est. remaining: 2m 53sRunning iteration 1351/1500... Est. remaining: 2m 41sRunning iteration 1361/1500... Est. remaining: 2m 30sRunning iteration 1371/1500... Est. remaining: 2m 19sRunning iteration 1381/1500... Est. remaining: 2m 7sRunning iteration 1391/1500... Est. remaining: 1m 56sRunning iteration 1401/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [42, 42, 128], 'score': np.float64(1.1222832126001874), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 34sRunning iteration 1421/1500... Est. remaining: 1m 23sRunning iteration 1431/1500... Est. remaining: 1m 13sRunning iteration 1441/1500... Est. remaining: 1m 2sRunning iteration 1451/1500... Est. remaining: 0m 51sRunning iteration 1461/1500... Est. remaining: 0m 41sRunning iteration 1471/1500... Est. remaining: 0m 30sRunning iteration 1481/1500... Est. remaining: 0m 20sRunning iteration 1491/1500... Est. remaining: 0m 10s
Monte Carlo simulation completed in 25.4 minutes
Best normalized score: 1.12
best_combination: {'lookbacks': [42, 42, 128], 'score': np.float64(1.1222832126001874), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 42, 128] (score: 1.1223)

Monte Carlo simulation completed in 25.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 42, 128] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 94 selections (22.6%)
3. naz100_pine: 84 selections (20.2%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $2,903,497,281.89
Average Annualized Gain: 43.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Mon Aug 25 23:11:06 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $35,451,161
Annual Return: 26.60%
Sharpe Ratio: 0.95101
Sortino Ratio: 0.846
Max Drawdown: -62.2%
Avg Drawdown: -15.0%
Normalized Score: -2.413
Lookback periods: [59, 77, 230] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $697,087,650
Annual Return: 37.96%
Sharpe Ratio: 1.37109
Sortino Ratio: 1.271
Max Drawdown: -53.3%
Avg Drawdown: -11.3%
Normalized Score: -0.473
Lookback periods: [52, 58, 60] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,520,904,831
Annual Return: 43.17%
Sharpe Ratio: 1.43839
Sortino Ratio: 1.390
Max Drawdown: -65.6%
Avg Drawdown: -13.1%
Normalized Score: -0.197
Lookback periods: [108, 159, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,161,440,962
Annual Return: 44.11%
Sharpe Ratio: 1.45515
Sortino Ratio: 1.412
Max Drawdown: -69.3%
Avg Drawdown: -12.8%
Normalized Score: -0.118
Lookback periods: [121, 178, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,627,185,752
Annual Return: 43.34%
Sharpe Ratio: 1.44302
Sortino Ratio: 1.393
Max Drawdown: -62.0%
Avg Drawdown: -12.0%
Normalized Score: -0.088
Lookback periods: [160, 242, 257] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 56sRunning iteration 41/1500... Est. remaining: 17m 6sRunning iteration 51/1500... Est. remaining: 15m 58sRunning iteration 61/1500... Est. remaining: 15m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,706,702,286
Annual Return: 44.77%
Sharpe Ratio: 1.48761
Sortino Ratio: 1.445
Max Drawdown: -61.7%
Avg Drawdown: -11.7%
Normalized Score: 0.128
Lookback periods: [170, 248, 266] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 2sRunning iteration 81/1500... Est. remaining: 14m 33sRunning iteration 91/1500... Est. remaining: 14m 7sRunning iteration 101/1500... Est. remaining: 13m 45sbest_combination: {'lookbacks': [170, 248, 266], 'score': np.float64(0.12756424689512386), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 27sRunning iteration 121/1500... Est. remaining: 13m 10sRunning iteration 131/1500... Est. remaining: 12m 55sRunning iteration 141/1500... Est. remaining: 12m 42sRunning iteration 151/1500... Est. remaining: 12m 30sRunning iteration 161/1500... Est. remaining: 12m 19sRunning iteration 171/1500... Est. remaining: 12m 8sRunning iteration 181/1500... Est. remaining: 11m 58sRunning iteration 191/1500... Est. remaining: 11m 49sRunning iteration 201/1500... Est. remaining: 11m 40sbest_combination: {'lookbacks': [170, 248, 266], 'score': np.float64(0.12756424689512386), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 32sRunning iteration 221/1500... Est. remaining: 11m 24sRunning iteration 231/1500... Est. remaining: 11m 16sRunning iteration 241/1500... Est. remaining: 11m 9sRunning iteration 251/1500... Est. remaining: 11m 1sRunning iteration 261/1500... Est. remaining: 10m 54sRunning iteration 271/1500... Est. remaining: 10m 47sRunning iteration 281/1500... Est. remaining: 10m 40sRunning iteration 291/1500... Est. remaining: 10m 33sRunning iteration 301/1500... Est. remaining: 10m 27sbest_combination: {'lookbacks': [170, 248, 266], 'score': np.float64(0.12756424689512386), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 20sRunning iteration 321/1500... Est. remaining: 10m 14sRunning iteration 331/1500... Est. remaining: 10m 7sRunning iteration 341/1500... Est. remaining: 10m 1sRunning iteration 351/1500... Est. remaining: 9m 55sRunning iteration 361/1500... Est. remaining: 9m 49sRunning iteration 371/1500... Est. remaining: 9m 43sRunning iteration 381/1500... Est. remaining: 9m 37sRunning iteration 391/1500... Est. remaining: 9m 31sRunning iteration 401/1500... Est. remaining: 9m 25sbest_combination: {'lookbacks': [170, 248, 266], 'score': np.float64(0.12756424689512386), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 19sRunning iteration 421/1500... Est. remaining: 9m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,172,489,785
Annual Return: 42.56%
Sharpe Ratio: 1.55076
Sortino Ratio: 1.451
Max Drawdown: -34.9%
Avg Drawdown: -9.4%
Normalized Score: 0.483
Lookback periods: [41, 52, 67] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 9m 11sRunning iteration 441/1500... Est. remaining: 9m 5sRunning iteration 451/1500... Est. remaining: 8m 59sRunning iteration 461/1500... Est. remaining: 8m 54sRunning iteration 471/1500... Est. remaining: 8m 48sRunning iteration 481/1500... Est. remaining: 8m 42sRunning iteration 491/1500... Est. remaining: 8m 37sRunning iteration 501/1500... Est. remaining: 8m 31sbest_combination: {'lookbacks': [41, 52, 67], 'score': np.float64(0.48290863613079293), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 25sRunning iteration 521/1500... Est. remaining: 8m 20sRunning iteration 531/1500... Est. remaining: 8m 14sRunning iteration 541/1500... Est. remaining: 8m 9sRunning iteration 551/1500... Est. remaining: 8m 3sRunning iteration 561/1500... Est. remaining: 7m 58sRunning iteration 571/1500... Est. remaining: 7m 52sRunning iteration 581/1500... Est. remaining: 7m 47sRunning iteration 591/1500... Est. remaining: 7m 41sRunning iteration 601/1500... Est. remaining: 7m 36sbest_combination: {'lookbacks': [41, 52, 67], 'score': np.float64(0.48290863613079293), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 31sRunning iteration 621/1500... Est. remaining: 7m 25sRunning iteration 631/1500... Est. remaining: 7m 20sRunning iteration 641/1500... Est. remaining: 7m 15sRunning iteration 651/1500... Est. remaining: 7m 9sRunning iteration 661/1500... Est. remaining: 7m 4sRunning iteration 671/1500... Est. remaining: 6m 59sRunning iteration 681/1500... Est. remaining: 6m 53sRunning iteration 691/1500... Est. remaining: 6m 48sRunning iteration 701/1500... Est. remaining: 6m 43sbest_combination: {'lookbacks': [41, 52, 67], 'score': np.float64(0.48290863613079293), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 38sRunning iteration 721/1500... Est. remaining: 6m 32sRunning iteration 731/1500... Est. remaining: 6m 27sRunning iteration 741/1500... Est. remaining: 6m 22sRunning iteration 751/1500... Est. remaining: 6m 17sRunning iteration 761/1500... Est. remaining: 6m 11sRunning iteration 771/1500... Est. remaining: 6m 6sRunning iteration 781/1500... Est. remaining: 6m 1sRunning iteration 791/1500... Est. remaining: 5m 56sRunning iteration 801/1500... Est. remaining: 5m 50sbest_combination: {'lookbacks': [41, 52, 67], 'score': np.float64(0.48290863613079293), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 45sRunning iteration 821/1500... Est. remaining: 5m 40sRunning iteration 831/1500... Est. remaining: 5m 35sRunning iteration 841/1500... Est. remaining: 5m 30sRunning iteration 851/1500... Est. remaining: 5m 25sRunning iteration 861/1500... Est. remaining: 5m 20sRunning iteration 871/1500... Est. remaining: 5m 15sRunning iteration 881/1500... Est. remaining: 5m 9sRunning iteration 891/1500... Est. remaining: 5m 4sRunning iteration 901/1500... Est. remaining: 4m 59sbest_combination: {'lookbacks': [41, 52, 67], 'score': np.float64(0.48290863613079293), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 54sRunning iteration 921/1500... Est. remaining: 4m 49sRunning iteration 931/1500... Est. remaining: 4m 44sRunning iteration 941/1500... Est. remaining: 4m 39sRunning iteration 951/1500... Est. remaining: 4m 34sRunning iteration 961/1500... Est. remaining: 4m 29sRunning iteration 971/1500... Est. remaining: 4m 24sRunning iteration 981/1500... Est. remaining: 4m 19sRunning iteration 991/1500... Est. remaining: 4m 14sRunning iteration 1001/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [41, 52, 67], 'score': np.float64(0.48290863613079293), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 3sRunning iteration 1021/1500... Est. remaining: 3m 58sRunning iteration 1031/1500... Est. remaining: 3m 53sRunning iteration 1041/1500... Est. remaining: 3m 48sRunning iteration 1051/1500... Est. remaining: 3m 43sRunning iteration 1061/1500... Est. remaining: 3m 38sRunning iteration 1071/1500... Est. remaining: 3m 33sRunning iteration 1081/1500... Est. remaining: 3m 28sRunning iteration 1091/1500... Est. remaining: 3m 23sRunning iteration 1101/1500... Est. remaining: 3m 18sbest_combination: {'lookbacks': [41, 52, 67], 'score': np.float64(0.48290863613079293), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 13sRunning iteration 1121/1500... Est. remaining: 3m 8sRunning iteration 1131/1500... Est. remaining: 3m 3sRunning iteration 1141/1500... Est. remaining: 2m 58sRunning iteration 1151/1500... Est. remaining: 2m 53sRunning iteration 1161/1500... Est. remaining: 2m 48sRunning iteration 1171/1500... Est. remaining: 2m 43sRunning iteration 1181/1500... Est. remaining: 2m 38sRunning iteration 1191/1500... Est. remaining: 2m 33sRunning iteration 1201/1500... Est. remaining: 2m 28sbest_combination: {'lookbacks': [41, 52, 67], 'score': np.float64(0.48290863613079293), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 23sRunning iteration 1221/1500... Est. remaining: 2m 18sRunning iteration 1231/1500... Est. remaining: 2m 13sRunning iteration 1241/1500... Est. remaining: 2m 8sRunning iteration 1251/1500... Est. remaining: 2m 3sRunning iteration 1261/1500... Est. remaining: 1m 58sRunning iteration 1271/1500... Est. remaining: 1m 53sRunning iteration 1281/1500... Est. remaining: 1m 48sRunning iteration 1291/1500... Est. remaining: 1m 43sRunning iteration 1301/1500... Est. remaining: 1m 38sbest_combination: {'lookbacks': [41, 52, 67], 'score': np.float64(0.48290863613079293), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 33sRunning iteration 1321/1500... Est. remaining: 1m 28sRunning iteration 1331/1500... Est. remaining: 1m 23sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [41, 52, 67], 'score': np.float64(0.48290863613079293), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.3 minutes
Best normalized score: 0.48
best_combination: {'lookbacks': [41, 52, 67], 'score': np.float64(0.48290863613079293), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 52, 67] (score: 0.4829)

Monte Carlo simulation completed in 12.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 52, 67] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 102 selections (24.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pine: 89 selections (21.4%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 59 selections (14.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $2,172,489,785.49
Average Annualized Gain: 42.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Mon Aug 25 23:23:31 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,818,275,131
Annual Return: 41.83%
Sharpe Ratio: 1.36988
Sortino Ratio: 1.312
Max Drawdown: -59.0%
Avg Drawdown: -12.7%
Normalized Score: -0.381
Lookback periods: [202, 207, 250] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,296,621,026
Annual Return: 42.78%
Sharpe Ratio: 1.40270
Sortino Ratio: 1.362
Max Drawdown: -67.8%
Avg Drawdown: -13.2%
Normalized Score: -0.344
Lookback periods: [176, 181, 282] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 49sRunning iteration 21/1500... Est. remaining: 18m 22sRunning iteration 31/1500... Est. remaining: 16m 14sRunning iteration 41/1500... Est. remaining: 15m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $940,865,653
Annual Return: 39.16%
Sharpe Ratio: 1.40961
Sortino Ratio: 1.315
Max Drawdown: -51.1%
Avg Drawdown: -11.4%
Normalized Score: -0.340
Lookback periods: [44, 46, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 14m 54sRunning iteration 61/1500... Est. remaining: 14m 19sRunning iteration 71/1500... Est. remaining: 13m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,790,519,306
Annual Return: 41.76%
Sharpe Ratio: 1.40048
Sortino Ratio: 1.332
Max Drawdown: -52.3%
Avg Drawdown: -11.2%
Normalized Score: -0.202
Lookback periods: [99, 109, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 13m 51sRunning iteration 91/1500... Est. remaining: 13m 30sRunning iteration 101/1500... Est. remaining: 13m 13sbest_combination: {'lookbacks': [99, 109, 110], 'score': np.float64(-0.20181371757015154), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,485,475,774
Annual Return: 43.11%
Sharpe Ratio: 1.43091
Sortino Ratio: 1.387
Max Drawdown: -55.0%
Avg Drawdown: -13.0%
Normalized Score: -0.141
Lookback periods: [130, 141, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 12m 57sRunning iteration 131/1500... Est. remaining: 12m 45sRunning iteration 141/1500... Est. remaining: 12m 32sRunning iteration 151/1500... Est. remaining: 12m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,509,429,234
Annual Return: 44.54%
Sharpe Ratio: 1.52901
Sortino Ratio: 1.443
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.151
Lookback periods: [52, 148, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 12m 20sRunning iteration 171/1500... Est. remaining: 12m 9sRunning iteration 181/1500... Est. remaining: 11m 59sRunning iteration 191/1500... Est. remaining: 11m 50sRunning iteration 201/1500... Est. remaining: 11m 41sbest_combination: {'lookbacks': [52, 148, 152], 'score': np.float64(0.15073201496359392), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 33sRunning iteration 221/1500... Est. remaining: 11m 25sRunning iteration 231/1500... Est. remaining: 11m 17sRunning iteration 241/1500... Est. remaining: 11m 10sRunning iteration 251/1500... Est. remaining: 11m 3sRunning iteration 261/1500... Est. remaining: 10m 56sRunning iteration 271/1500... Est. remaining: 10m 49sRunning iteration 281/1500... Est. remaining: 10m 42sRunning iteration 291/1500... Est. remaining: 10m 35sRunning iteration 301/1500... Est. remaining: 10m 29sbest_combination: {'lookbacks': [52, 148, 152], 'score': np.float64(0.15073201496359392), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 22sRunning iteration 321/1500... Est. remaining: 10m 16sRunning iteration 331/1500... Est. remaining: 10m 9sRunning iteration 341/1500... Est. remaining: 10m 3sRunning iteration 351/1500... Est. remaining: 9m 57sRunning iteration 361/1500... Est. remaining: 9m 51sRunning iteration 371/1500... Est. remaining: 9m 44sRunning iteration 381/1500... Est. remaining: 9m 38sRunning iteration 391/1500... Est. remaining: 9m 32sRunning iteration 401/1500... Est. remaining: 9m 26sbest_combination: {'lookbacks': [52, 148, 152], 'score': np.float64(0.15073201496359392), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 21sRunning iteration 421/1500... Est. remaining: 9m 15sRunning iteration 431/1500... Est. remaining: 9m 9sRunning iteration 441/1500... Est. remaining: 9m 3sRunning iteration 451/1500... Est. remaining: 8m 58sRunning iteration 461/1500... Est. remaining: 8m 52sRunning iteration 471/1500... Est. remaining: 8m 46sRunning iteration 481/1500... Est. remaining: 8m 41sRunning iteration 491/1500... Est. remaining: 8m 35sRunning iteration 501/1500... Est. remaining: 8m 30sbest_combination: {'lookbacks': [52, 148, 152], 'score': np.float64(0.15073201496359392), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,409,508,559
Annual Return: 44.42%
Sharpe Ratio: 1.53394
Sortino Ratio: 1.444
Max Drawdown: -56.4%
Avg Drawdown: -10.7%
Normalized Score: 0.187
Lookback periods: [53, 148, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 21sRunning iteration 531/1500... Est. remaining: 8m 15sRunning iteration 541/1500... Est. remaining: 8m 10sRunning iteration 551/1500... Est. remaining: 8m 5sRunning iteration 561/1500... Est. remaining: 7m 59sRunning iteration 571/1500... Est. remaining: 7m 54sRunning iteration 581/1500... Est. remaining: 7m 48sRunning iteration 591/1500... Est. remaining: 7m 43sRunning iteration 601/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [53, 148, 153], 'score': np.float64(0.18697135372294188), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 32sRunning iteration 621/1500... Est. remaining: 7m 27sRunning iteration 631/1500... Est. remaining: 7m 21sRunning iteration 641/1500... Est. remaining: 7m 16sRunning iteration 651/1500... Est. remaining: 7m 11sRunning iteration 661/1500... Est. remaining: 7m 5sRunning iteration 671/1500... Est. remaining: 7m 0sRunning iteration 681/1500... Est. remaining: 6m 55sRunning iteration 691/1500... Est. remaining: 6m 49sRunning iteration 701/1500... Est. remaining: 6m 44sbest_combination: {'lookbacks': [53, 148, 153], 'score': np.float64(0.18697135372294188), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 39sRunning iteration 721/1500... Est. remaining: 6m 34sRunning iteration 731/1500... Est. remaining: 6m 29sRunning iteration 741/1500... Est. remaining: 6m 23sRunning iteration 751/1500... Est. remaining: 6m 18sRunning iteration 761/1500... Est. remaining: 6m 13sRunning iteration 771/1500... Est. remaining: 6m 8sRunning iteration 781/1500... Est. remaining: 6m 3sRunning iteration 791/1500... Est. remaining: 5m 57sRunning iteration 801/1500... Est. remaining: 5m 52sbest_combination: {'lookbacks': [53, 148, 153], 'score': np.float64(0.18697135372294188), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 47sRunning iteration 821/1500... Est. remaining: 5m 42sRunning iteration 831/1500... Est. remaining: 5m 37sRunning iteration 841/1500... Est. remaining: 5m 32sRunning iteration 851/1500... Est. remaining: 5m 26sRunning iteration 861/1500... Est. remaining: 5m 21sRunning iteration 871/1500... Est. remaining: 5m 16sRunning iteration 881/1500... Est. remaining: 5m 11sRunning iteration 891/1500... Est. remaining: 5m 6sRunning iteration 901/1500... Est. remaining: 5m 1sbest_combination: {'lookbacks': [53, 148, 153], 'score': np.float64(0.18697135372294188), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 55sRunning iteration 921/1500... Est. remaining: 4m 50sRunning iteration 931/1500... Est. remaining: 4m 45sRunning iteration 941/1500... Est. remaining: 4m 40sRunning iteration 951/1500... Est. remaining: 4m 35sRunning iteration 961/1500... Est. remaining: 4m 30sRunning iteration 971/1500... Est. remaining: 4m 25sRunning iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 15sRunning iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [53, 148, 153], 'score': np.float64(0.18697135372294188), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 5sRunning iteration 1021/1500... Est. remaining: 3m 59sRunning iteration 1031/1500... Est. remaining: 3m 54sRunning iteration 1041/1500... Est. remaining: 3m 49sRunning iteration 1051/1500... Est. remaining: 3m 44sRunning iteration 1061/1500... Est. remaining: 3m 39sRunning iteration 1071/1500... Est. remaining: 3m 34sRunning iteration 1081/1500... Est. remaining: 3m 29sRunning iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [53, 148, 153], 'score': np.float64(0.18697135372294188), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4sRunning iteration 1141/1500... Est. remaining: 2m 59sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,855,390,656
Annual Return: 47.36%
Sharpe Ratio: 1.55837
Sortino Ratio: 1.525
Max Drawdown: -63.5%
Avg Drawdown: -12.0%
Normalized Score: 0.335
Lookback periods: [132, 153, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [132, 153, 179], 'score': np.float64(0.3352734197832846), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,857,276,061
Annual Return: 47.36%
Sharpe Ratio: 1.56711
Sortino Ratio: 1.532
Max Drawdown: -57.3%
Avg Drawdown: -11.4%
Normalized Score: 0.437
Lookback periods: [136, 153, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1211/1500... Est. remaining: 2m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,792,803,745
Annual Return: 48.42%
Sharpe Ratio: 1.59495
Sortino Ratio: 1.557
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 0.546
Lookback periods: [136, 155, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [136, 155, 179], 'score': np.float64(0.5460961624179114), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [136, 155, 179], 'score': np.float64(0.5460961624179114), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,535,575,455
Annual Return: 48.30%
Sharpe Ratio: 1.59361
Sortino Ratio: 1.550
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 0.562
Lookback periods: [134, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 0.56
best_combination: {'lookbacks': [134, 157, 172], 'score': np.float64(0.5616864807373915), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [134, 157, 172] (score: 0.5617)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [134, 157, 172] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 115 selections (27.6%)
2. naz100_hma: 107 selections (25.7%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,535,575,455.30
Average Annualized Gain: 48.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Mon Aug 25 23:36:08 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $910,830,092
Annual Return: 39.03%
Sharpe Ratio: 1.30906
Sortino Ratio: 1.252
Max Drawdown: -67.3%
Avg Drawdown: -13.5%
Normalized Score: -0.570
Lookback periods: [164, 227, 264] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,094,919,317
Annual Return: 39.77%
Sharpe Ratio: 1.33604
Sortino Ratio: 1.285
Max Drawdown: -61.6%
Avg Drawdown: -12.6%
Normalized Score: -0.382
Lookback periods: [159, 279, 282] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,000,243,816
Annual Return: 43.89%
Sharpe Ratio: 1.44624
Sortino Ratio: 1.403
Max Drawdown: -63.0%
Avg Drawdown: -12.8%
Normalized Score: 0.081
Lookback periods: [134, 193, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 48sRunning iteration 31/1500... Est. remaining: 17m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,617,867,978
Annual Return: 47.81%
Sharpe Ratio: 1.55276
Sortino Ratio: 1.522
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.672
Lookback periods: [156, 162, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 16m 26sRunning iteration 51/1500... Est. remaining: 15m 26sRunning iteration 61/1500... Est. remaining: 14m 44sRunning iteration 71/1500... Est. remaining: 14m 14sRunning iteration 81/1500... Est. remaining: 13m 49sRunning iteration 91/1500... Est. remaining: 13m 26sRunning iteration 101/1500... Est. remaining: 13m 10sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(0.6718634092206869), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 55sRunning iteration 121/1500... Est. remaining: 12m 42sRunning iteration 131/1500... Est. remaining: 12m 30sRunning iteration 141/1500... Est. remaining: 12m 19sRunning iteration 151/1500... Est. remaining: 12m 9sRunning iteration 161/1500... Est. remaining: 12m 0sRunning iteration 171/1500... Est. remaining: 11m 50sRunning iteration 181/1500... Est. remaining: 11m 42sRunning iteration 191/1500... Est. remaining: 11m 34sRunning iteration 201/1500... Est. remaining: 11m 25sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(0.6718634092206869), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 18sRunning iteration 221/1500... Est. remaining: 11m 11sRunning iteration 231/1500... Est. remaining: 11m 4sRunning iteration 241/1500... Est. remaining: 10m 57sRunning iteration 251/1500... Est. remaining: 10m 50sRunning iteration 261/1500... Est. remaining: 10m 43sRunning iteration 271/1500... Est. remaining: 10m 37sRunning iteration 281/1500... Est. remaining: 10m 30sRunning iteration 291/1500... Est. remaining: 10m 24sRunning iteration 301/1500... Est. remaining: 10m 17sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(0.6718634092206869), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 11sRunning iteration 321/1500... Est. remaining: 10m 5sRunning iteration 331/1500... Est. remaining: 9m 59sRunning iteration 341/1500... Est. remaining: 9m 53sRunning iteration 351/1500... Est. remaining: 9m 47sRunning iteration 361/1500... Est. remaining: 9m 41sRunning iteration 371/1500... Est. remaining: 9m 35sRunning iteration 381/1500... Est. remaining: 9m 30sRunning iteration 391/1500... Est. remaining: 9m 24sRunning iteration 401/1500... Est. remaining: 9m 18sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(0.6718634092206869), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 13sRunning iteration 421/1500... Est. remaining: 9m 7sRunning iteration 431/1500... Est. remaining: 9m 2sRunning iteration 441/1500... Est. remaining: 8m 56sRunning iteration 451/1500... Est. remaining: 8m 51sRunning iteration 461/1500... Est. remaining: 8m 45sRunning iteration 471/1500... Est. remaining: 8m 40sRunning iteration 481/1500... Est. remaining: 8m 34sRunning iteration 491/1500... Est. remaining: 8m 29sRunning iteration 501/1500... Est. remaining: 8m 23sbest_combination: {'lookbacks': [156, 162, 172], 'score': np.float64(0.6718634092206869), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,784,779,901
Annual Return: 47.90%
Sharpe Ratio: 1.56896
Sortino Ratio: 1.536
Max Drawdown: -56.9%
Avg Drawdown: -11.0%
Normalized Score: 0.704
Lookback periods: [157, 160, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 15sRunning iteration 531/1500... Est. remaining: 8m 10sRunning iteration 541/1500... Est. remaining: 8m 4sRunning iteration 551/1500... Est. remaining: 7m 59sRunning iteration 561/1500... Est. remaining: 7m 53sRunning iteration 571/1500... Est. remaining: 7m 48sRunning iteration 581/1500... Est. remaining: 7m 43sRunning iteration 591/1500... Est. remaining: 7m 37sRunning iteration 601/1500... Est. remaining: 7m 32sbest_combination: {'lookbacks': [157, 160, 162], 'score': np.float64(0.7042575312159614), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 27sRunning iteration 621/1500... Est. remaining: 7m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,544,697,484
Annual Return: 48.30%
Sharpe Ratio: 1.57356
Sortino Ratio: 1.537
Max Drawdown: -59.0%
Avg Drawdown: -10.5%
Normalized Score: 0.725
Lookback periods: [156, 158, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 7m 18sRunning iteration 641/1500... Est. remaining: 7m 13sRunning iteration 651/1500... Est. remaining: 7m 7sRunning iteration 661/1500... Est. remaining: 7m 2sRunning iteration 671/1500... Est. remaining: 6m 57sRunning iteration 681/1500... Est. remaining: 6m 52sRunning iteration 691/1500... Est. remaining: 6m 47sRunning iteration 701/1500... Est. remaining: 6m 41sbest_combination: {'lookbacks': [156, 158, 169], 'score': np.float64(0.724656528732533), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 36sRunning iteration 721/1500... Est. remaining: 6m 31sRunning iteration 731/1500... Est. remaining: 6m 26sRunning iteration 741/1500... Est. remaining: 6m 21sRunning iteration 751/1500... Est. remaining: 6m 16sRunning iteration 761/1500... Est. remaining: 6m 11sRunning iteration 771/1500... Est. remaining: 6m 6sRunning iteration 781/1500... Est. remaining: 6m 0sRunning iteration 791/1500... Est. remaining: 5m 55sRunning iteration 801/1500... Est. remaining: 5m 50sbest_combination: {'lookbacks': [156, 158, 169], 'score': np.float64(0.724656528732533), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 45sRunning iteration 821/1500... Est. remaining: 5m 40sRunning iteration 831/1500... Est. remaining: 5m 35sRunning iteration 841/1500... Est. remaining: 5m 30sRunning iteration 851/1500... Est. remaining: 5m 25sRunning iteration 861/1500... Est. remaining: 5m 20sRunning iteration 871/1500... Est. remaining: 5m 14sRunning iteration 881/1500... Est. remaining: 5m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,644,453,225
Annual Return: 49.24%
Sharpe Ratio: 1.59633
Sortino Ratio: 1.562
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 0.796
Lookback periods: [150, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 5m 5sRunning iteration 901/1500... Est. remaining: 5m 0sbest_combination: {'lookbacks': [150, 154, 156], 'score': np.float64(0.7961423606664539), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 55sRunning iteration 921/1500... Est. remaining: 4m 50sRunning iteration 931/1500... Est. remaining: 4m 45sRunning iteration 941/1500... Est. remaining: 4m 40sRunning iteration 951/1500... Est. remaining: 4m 35sRunning iteration 961/1500... Est. remaining: 4m 30sRunning iteration 971/1500... Est. remaining: 4m 25sRunning iteration 981/1500... Est. remaining: 4m 19sRunning iteration 991/1500... Est. remaining: 4m 14sRunning iteration 1001/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [150, 154, 156], 'score': np.float64(0.7961423606664539), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 4sRunning iteration 1021/1500... Est. remaining: 3m 59sRunning iteration 1031/1500... Est. remaining: 3m 54sRunning iteration 1041/1500... Est. remaining: 3m 49sRunning iteration 1051/1500... Est. remaining: 3m 44sRunning iteration 1061/1500... Est. remaining: 3m 39sRunning iteration 1071/1500... Est. remaining: 3m 34sRunning iteration 1081/1500... Est. remaining: 3m 29sRunning iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [150, 154, 156], 'score': np.float64(0.7961423606664539), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4sRunning iteration 1141/1500... Est. remaining: 2m 59sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [150, 154, 156], 'score': np.float64(0.7961423606664539), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [150, 154, 156], 'score': np.float64(0.7961423606664539), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,377,430,899
Annual Return: 49.14%
Sharpe Ratio: 1.60854
Sortino Ratio: 1.576
Max Drawdown: -62.5%
Avg Drawdown: -11.3%
Normalized Score: 0.811
Lookback periods: [146, 155, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [146, 155, 165], 'score': np.float64(0.8108812506232725), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,398,106,492
Annual Return: 48.71%
Sharpe Ratio: 1.60691
Sortino Ratio: 1.566
Max Drawdown: -58.5%
Avg Drawdown: -10.9%
Normalized Score: 0.821
Lookback periods: [135, 155, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 0.82
best_combination: {'lookbacks': [135, 155, 171], 'score': np.float64(0.8206294931422633), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 155, 171] (score: 0.8206)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 155, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 113 selections (27.2%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pi: 77 selections (18.5%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,398,106,492.41
Average Annualized Gain: 48.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Mon Aug 25 23:48:42 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $624,707,900
Annual Return: 37.52%
Sharpe Ratio: 1.31976
Sortino Ratio: 1.225
Max Drawdown: -52.3%
Avg Drawdown: -11.1%
Normalized Score: -0.557
Lookback periods: [61, 83, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $611,678,128
Annual Return: 37.44%
Sharpe Ratio: 1.33962
Sortino Ratio: 1.233
Max Drawdown: -52.3%
Avg Drawdown: -10.3%
Normalized Score: -0.495
Lookback periods: [47, 78, 112] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,118,181,267
Annual Return: 45.21%
Sharpe Ratio: 1.47988
Sortino Ratio: 1.440
Max Drawdown: -58.5%
Avg Drawdown: -12.5%
Normalized Score: 0.166
Lookback periods: [121, 157, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 46sRunning iteration 31/1500... Est. remaining: 17m 3sRunning iteration 41/1500... Est. remaining: 15m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,304,967,153
Annual Return: 45.40%
Sharpe Ratio: 1.48830
Sortino Ratio: 1.446
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.231
Lookback periods: [158, 204, 206] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 15m 23sRunning iteration 61/1500... Est. remaining: 14m 42sRunning iteration 71/1500... Est. remaining: 14m 11sRunning iteration 81/1500... Est. remaining: 13m 46sRunning iteration 91/1500... Est. remaining: 13m 26sRunning iteration 101/1500... Est. remaining: 13m 10sbest_combination: {'lookbacks': [158, 204, 206], 'score': np.float64(0.23067307086530944), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 55sRunning iteration 121/1500... Est. remaining: 12m 42sRunning iteration 131/1500... Est. remaining: 12m 30sRunning iteration 141/1500... Est. remaining: 12m 19sRunning iteration 151/1500... Est. remaining: 12m 9sRunning iteration 161/1500... Est. remaining: 11m 59sRunning iteration 171/1500... Est. remaining: 11m 50sRunning iteration 181/1500... Est. remaining: 11m 42sRunning iteration 191/1500... Est. remaining: 11m 34sRunning iteration 201/1500... Est. remaining: 11m 26sbest_combination: {'lookbacks': [158, 204, 206], 'score': np.float64(0.23067307086530944), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 18sRunning iteration 221/1500... Est. remaining: 11m 11sRunning iteration 231/1500... Est. remaining: 11m 4sRunning iteration 241/1500... Est. remaining: 10m 57sRunning iteration 251/1500... Est. remaining: 10m 50sRunning iteration 261/1500... Est. remaining: 10m 44sRunning iteration 271/1500... Est. remaining: 10m 37sRunning iteration 281/1500... Est. remaining: 10m 30sRunning iteration 291/1500... Est. remaining: 10m 24sRunning iteration 301/1500... Est. remaining: 10m 18sbest_combination: {'lookbacks': [158, 204, 206], 'score': np.float64(0.23067307086530944), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 11sRunning iteration 321/1500... Est. remaining: 10m 5sRunning iteration 331/1500... Est. remaining: 9m 59sRunning iteration 341/1500... Est. remaining: 9m 53sRunning iteration 351/1500... Est. remaining: 9m 47sRunning iteration 361/1500... Est. remaining: 9m 41sRunning iteration 371/1500... Est. remaining: 9m 35sRunning iteration 381/1500... Est. remaining: 9m 29sRunning iteration 391/1500... Est. remaining: 9m 24sRunning iteration 401/1500... Est. remaining: 9m 18sbest_combination: {'lookbacks': [158, 204, 206], 'score': np.float64(0.23067307086530944), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,317,748,426
Annual Return: 40.51%
Sharpe Ratio: 1.47130
Sortino Ratio: 1.368
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 0.256
Lookback periods: [46, 48, 93] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 9m 16sRunning iteration 421/1500... Est. remaining: 9m 10sRunning iteration 431/1500... Est. remaining: 9m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,050,920,416
Annual Return: 46.83%
Sharpe Ratio: 1.51486
Sortino Ratio: 1.480
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.368
Lookback periods: [180, 189, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,399,126,037
Annual Return: 47.69%
Sharpe Ratio: 1.54216
Sortino Ratio: 1.509
Max Drawdown: -62.5%
Avg Drawdown: -11.6%
Normalized Score: 0.437
Lookback periods: [176, 186, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 8m 59sRunning iteration 461/1500... Est. remaining: 8m 53sRunning iteration 471/1500... Est. remaining: 8m 48sRunning iteration 481/1500... Est. remaining: 8m 42sRunning iteration 491/1500... Est. remaining: 8m 37sRunning iteration 501/1500... Est. remaining: 8m 31sbest_combination: {'lookbacks': [176, 186, 190], 'score': np.float64(0.43693906499549245), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 26sRunning iteration 521/1500... Est. remaining: 8m 21sRunning iteration 531/1500... Est. remaining: 8m 15sRunning iteration 541/1500... Est. remaining: 8m 10sRunning iteration 551/1500... Est. remaining: 8m 4sRunning iteration 561/1500... Est. remaining: 7m 59sRunning iteration 571/1500... Est. remaining: 7m 53sRunning iteration 581/1500... Est. remaining: 7m 48sRunning iteration 591/1500... Est. remaining: 7m 42sRunning iteration 601/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [176, 186, 190], 'score': np.float64(0.43693906499549245), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,581,581,764
Annual Return: 49.22%
Sharpe Ratio: 1.58646
Sortino Ratio: 1.551
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.673
Lookback periods: [176, 183, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 7m 28sRunning iteration 631/1500... Est. remaining: 7m 23sRunning iteration 641/1500... Est. remaining: 7m 17sRunning iteration 651/1500... Est. remaining: 7m 12sRunning iteration 661/1500... Est. remaining: 7m 7sRunning iteration 671/1500... Est. remaining: 7m 1sRunning iteration 681/1500... Est. remaining: 6m 56sRunning iteration 691/1500... Est. remaining: 6m 51sRunning iteration 701/1500... Est. remaining: 6m 45sbest_combination: {'lookbacks': [176, 183, 188], 'score': np.float64(0.6726671571733939), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 40sRunning iteration 721/1500... Est. remaining: 6m 35sRunning iteration 731/1500... Est. remaining: 6m 30sRunning iteration 741/1500... Est. remaining: 6m 25sRunning iteration 751/1500... Est. remaining: 6m 19sRunning iteration 761/1500... Est. remaining: 6m 14sRunning iteration 771/1500... Est. remaining: 6m 9sRunning iteration 781/1500... Est. remaining: 6m 4sRunning iteration 791/1500... Est. remaining: 5m 59sRunning iteration 801/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [176, 183, 188], 'score': np.float64(0.6726671571733939), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 48sRunning iteration 821/1500... Est. remaining: 5m 43sRunning iteration 831/1500... Est. remaining: 5m 38sRunning iteration 841/1500... Est. remaining: 5m 33sRunning iteration 851/1500... Est. remaining: 5m 28sRunning iteration 861/1500... Est. remaining: 5m 22sRunning iteration 871/1500... Est. remaining: 5m 17sRunning iteration 881/1500... Est. remaining: 5m 12sRunning iteration 891/1500... Est. remaining: 5m 7sRunning iteration 901/1500... Est. remaining: 5m 2sbest_combination: {'lookbacks': [176, 183, 188], 'score': np.float64(0.6726671571733939), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 57sRunning iteration 921/1500... Est. remaining: 4m 51sRunning iteration 931/1500... Est. remaining: 4m 46sRunning iteration 941/1500... Est. remaining: 4m 41sRunning iteration 951/1500... Est. remaining: 4m 36sRunning iteration 961/1500... Est. remaining: 4m 31sRunning iteration 971/1500... Est. remaining: 4m 26sRunning iteration 981/1500... Est. remaining: 4m 21sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [176, 183, 188], 'score': np.float64(0.6726671571733939), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 50sRunning iteration 1051/1500... Est. remaining: 3m 45sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [176, 183, 188], 'score': np.float64(0.6726671571733939), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [176, 183, 188], 'score': np.float64(0.6726671571733939), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [176, 183, 188], 'score': np.float64(0.6726671571733939), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [176, 183, 188], 'score': np.float64(0.6726671571733939), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 0.67
best_combination: {'lookbacks': [176, 183, 188], 'score': np.float64(0.6726671571733939), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [176, 183, 188] (score: 0.6727)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 183, 188] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 119 selections (28.6%)
2. sp500_hma: 103 selections (24.8%)
3. naz100_pine: 84 selections (20.2%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,581,581,764.28
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Tue Aug 26 00:01:18 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $167,909,083
Annual Return: 32.41%
Sharpe Ratio: 1.11246
Sortino Ratio: 1.024
Max Drawdown: -62.2%
Avg Drawdown: -15.1%
Normalized Score: -1.771
Lookback periods: [70, 71, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,788,494,206
Annual Return: 41.76%
Sharpe Ratio: 1.49358
Sortino Ratio: 1.402
Max Drawdown: -52.1%
Avg Drawdown: -10.1%
Normalized Score: 0.205
Lookback periods: [47, 50, 109] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,084,349,361
Annual Return: 46.10%
Sharpe Ratio: 1.51166
Sortino Ratio: 1.466
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.532
Lookback periods: [150, 159, 230] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 29sRunning iteration 21/1500... Est. remaining: 19m 47sRunning iteration 31/1500... Est. remaining: 17m 11sRunning iteration 41/1500... Est. remaining: 15m 45sRunning iteration 51/1500... Est. remaining: 14m 53sRunning iteration 61/1500... Est. remaining: 14m 16sRunning iteration 71/1500... Est. remaining: 13m 48sRunning iteration 81/1500... Est. remaining: 13m 27sRunning iteration 91/1500... Est. remaining: 13m 9sRunning iteration 101/1500... Est. remaining: 12m 54sbest_combination: {'lookbacks': [150, 159, 230], 'score': np.float64(0.5320762831827366), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 41sRunning iteration 121/1500... Est. remaining: 12m 29sRunning iteration 131/1500... Est. remaining: 12m 18sRunning iteration 141/1500... Est. remaining: 12m 9sRunning iteration 151/1500... Est. remaining: 11m 59sRunning iteration 161/1500... Est. remaining: 11m 51sRunning iteration 171/1500... Est. remaining: 11m 42sRunning iteration 181/1500... Est. remaining: 11m 35sRunning iteration 191/1500... Est. remaining: 11m 27sRunning iteration 201/1500... Est. remaining: 11m 20sbest_combination: {'lookbacks': [150, 159, 230], 'score': np.float64(0.5320762831827366), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 13sRunning iteration 221/1500... Est. remaining: 11m 6sRunning iteration 231/1500... Est. remaining: 11m 0sRunning iteration 241/1500... Est. remaining: 10m 53sRunning iteration 251/1500... Est. remaining: 10m 47sRunning iteration 261/1500... Est. remaining: 10m 41sRunning iteration 271/1500... Est. remaining: 10m 34sRunning iteration 281/1500... Est. remaining: 10m 28sRunning iteration 291/1500... Est. remaining: 10m 22sRunning iteration 301/1500... Est. remaining: 10m 16sbest_combination: {'lookbacks': [150, 159, 230], 'score': np.float64(0.5320762831827366), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 10sRunning iteration 321/1500... Est. remaining: 10m 4sRunning iteration 331/1500... Est. remaining: 9m 58sRunning iteration 341/1500... Est. remaining: 9m 52sRunning iteration 351/1500... Est. remaining: 9m 47sRunning iteration 361/1500... Est. remaining: 9m 41sRunning iteration 371/1500... Est. remaining: 9m 36sRunning iteration 381/1500... Est. remaining: 9m 30sRunning iteration 391/1500... Est. remaining: 9m 25sRunning iteration 401/1500... Est. remaining: 9m 19sbest_combination: {'lookbacks': [150, 159, 230], 'score': np.float64(0.5320762831827366), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 14sRunning iteration 421/1500... Est. remaining: 9m 8sRunning iteration 431/1500... Est. remaining: 9m 3sRunning iteration 441/1500... Est. remaining: 8m 58sRunning iteration 451/1500... Est. remaining: 8m 52sRunning iteration 461/1500... Est. remaining: 8m 47sRunning iteration 471/1500... Est. remaining: 8m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,923,897,448
Annual Return: 46.74%
Sharpe Ratio: 1.51450
Sortino Ratio: 1.480
Max Drawdown: -62.6%
Avg Drawdown: -12.6%
Normalized Score: 0.548
Lookback periods: [145, 158, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 8m 39sRunning iteration 491/1500... Est. remaining: 8m 34sRunning iteration 501/1500... Est. remaining: 8m 28sbest_combination: {'lookbacks': [145, 158, 201], 'score': np.float64(0.5478278836415338), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 23sRunning iteration 521/1500... Est. remaining: 8m 18sRunning iteration 531/1500... Est. remaining: 8m 12sRunning iteration 541/1500... Est. remaining: 8m 7sRunning iteration 551/1500... Est. remaining: 8m 1sRunning iteration 561/1500... Est. remaining: 7m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,694,313,237
Annual Return: 48.84%
Sharpe Ratio: 1.59630
Sortino Ratio: 1.556
Max Drawdown: -63.3%
Avg Drawdown: -12.0%
Normalized Score: 0.936
Lookback periods: [142, 159, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 7m 53sRunning iteration 581/1500... Est. remaining: 7m 47sRunning iteration 591/1500... Est. remaining: 7m 42sRunning iteration 601/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [142, 159, 189], 'score': np.float64(0.9355118505457828), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 31sRunning iteration 621/1500... Est. remaining: 7m 26sRunning iteration 631/1500... Est. remaining: 7m 21sRunning iteration 641/1500... Est. remaining: 7m 15sRunning iteration 651/1500... Est. remaining: 7m 10sRunning iteration 661/1500... Est. remaining: 7m 5sRunning iteration 671/1500... Est. remaining: 7m 0sRunning iteration 681/1500... Est. remaining: 6m 54sRunning iteration 691/1500... Est. remaining: 6m 49sRunning iteration 701/1500... Est. remaining: 6m 44sbest_combination: {'lookbacks': [142, 159, 189], 'score': np.float64(0.9355118505457828), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 39sRunning iteration 721/1500... Est. remaining: 6m 34sRunning iteration 731/1500... Est. remaining: 6m 28sRunning iteration 741/1500... Est. remaining: 6m 23sRunning iteration 751/1500... Est. remaining: 6m 18sRunning iteration 761/1500... Est. remaining: 6m 13sRunning iteration 771/1500... Est. remaining: 6m 8sRunning iteration 781/1500... Est. remaining: 6m 2sRunning iteration 791/1500... Est. remaining: 5m 57sRunning iteration 801/1500... Est. remaining: 5m 52sbest_combination: {'lookbacks': [142, 159, 189], 'score': np.float64(0.9355118505457828), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 47sRunning iteration 821/1500... Est. remaining: 5m 42sRunning iteration 831/1500... Est. remaining: 5m 37sRunning iteration 841/1500... Est. remaining: 5m 32sRunning iteration 851/1500... Est. remaining: 5m 26sRunning iteration 861/1500... Est. remaining: 5m 21sRunning iteration 871/1500... Est. remaining: 5m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,812,736,104
Annual Return: 48.43%
Sharpe Ratio: 1.59074
Sortino Ratio: 1.550
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.966
Lookback periods: [138, 156, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 881/1500... Est. remaining: 5m 12sRunning iteration 891/1500... Est. remaining: 5m 7sRunning iteration 901/1500... Est. remaining: 5m 2sbest_combination: {'lookbacks': [138, 156, 172], 'score': np.float64(0.9655274079579808), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 57sRunning iteration 921/1500... Est. remaining: 4m 51sRunning iteration 931/1500... Est. remaining: 4m 46sRunning iteration 941/1500... Est. remaining: 4m 41sRunning iteration 951/1500... Est. remaining: 4m 36sRunning iteration 961/1500... Est. remaining: 4m 31sRunning iteration 971/1500... Est. remaining: 4m 26sRunning iteration 981/1500... Est. remaining: 4m 21sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [138, 156, 172], 'score': np.float64(0.9655274079579808), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 0sRunning iteration 1031/1500... Est. remaining: 3m 55sRunning iteration 1041/1500... Est. remaining: 3m 50sRunning iteration 1051/1500... Est. remaining: 3m 45sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [138, 156, 172], 'score': np.float64(0.9655274079579808), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [138, 156, 172], 'score': np.float64(0.9655274079579808), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [138, 156, 172], 'score': np.float64(0.9655274079579808), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [138, 156, 172], 'score': np.float64(0.9655274079579808), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 0.97
best_combination: {'lookbacks': [138, 156, 172], 'score': np.float64(0.9655274079579808), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [138, 156, 172] (score: 0.9655)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [138, 156, 172] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 117 selections (28.1%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pi: 75 selections (18.0%)
4. naz100_pine: 74 selections (17.8%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,812,736,103.56
Average Annualized Gain: 48.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Tue Aug 26 00:13:53 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $629,757,709
Annual Return: 37.55%
Sharpe Ratio: 1.24636
Sortino Ratio: 1.195
Max Drawdown: -71.2%
Avg Drawdown: -13.8%
Normalized Score: -2.884
Lookback periods: [164, 225, 278] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $872,656,693
Annual Return: 38.85%
Sharpe Ratio: 1.30784
Sortino Ratio: 1.237
Max Drawdown: -64.9%
Avg Drawdown: -14.4%
Normalized Score: -2.319
Lookback periods: [108, 123, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,504,280,937
Annual Return: 44.54%
Sharpe Ratio: 1.44617
Sortino Ratio: 1.409
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: -0.025
Lookback periods: [174, 185, 211] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 30sRunning iteration 21/1500... Est. remaining: 19m 45sRunning iteration 31/1500... Est. remaining: 17m 6sRunning iteration 41/1500... Est. remaining: 15m 41sRunning iteration 51/1500... Est. remaining: 14m 49sRunning iteration 61/1500... Est. remaining: 14m 13sRunning iteration 71/1500... Est. remaining: 13m 45sRunning iteration 81/1500... Est. remaining: 13m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,213,278,905
Annual Return: 46.20%
Sharpe Ratio: 1.50425
Sortino Ratio: 1.467
Max Drawdown: -59.8%
Avg Drawdown: -12.0%
Normalized Score: 0.604
Lookback periods: [149, 194, 212] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 13m 25sRunning iteration 101/1500... Est. remaining: 13m 8sbest_combination: {'lookbacks': [149, 194, 212], 'score': np.float64(0.6043072447829664), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 52sRunning iteration 121/1500... Est. remaining: 12m 39sRunning iteration 131/1500... Est. remaining: 12m 27sRunning iteration 141/1500... Est. remaining: 12m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,380,510,788
Annual Return: 46.34%
Sharpe Ratio: 1.51758
Sortino Ratio: 1.483
Max Drawdown: -61.0%
Avg Drawdown: -12.3%
Normalized Score: 0.663
Lookback periods: [140, 179, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 12m 16sRunning iteration 161/1500... Est. remaining: 12m 7sRunning iteration 171/1500... Est. remaining: 11m 57sRunning iteration 181/1500... Est. remaining: 11m 48sRunning iteration 191/1500... Est. remaining: 11m 39sRunning iteration 201/1500... Est. remaining: 11m 31sbest_combination: {'lookbacks': [140, 179, 189], 'score': np.float64(0.6633268256138065), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 23sRunning iteration 221/1500... Est. remaining: 11m 16sRunning iteration 231/1500... Est. remaining: 11m 8sRunning iteration 241/1500... Est. remaining: 11m 1sRunning iteration 251/1500... Est. remaining: 10m 54sRunning iteration 261/1500... Est. remaining: 10m 47sRunning iteration 271/1500... Est. remaining: 10m 41sRunning iteration 281/1500... Est. remaining: 10m 34sRunning iteration 291/1500... Est. remaining: 10m 28sRunning iteration 301/1500... Est. remaining: 10m 21sbest_combination: {'lookbacks': [140, 179, 189], 'score': np.float64(0.6633268256138065), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 15sRunning iteration 321/1500... Est. remaining: 10m 9sRunning iteration 331/1500... Est. remaining: 10m 3sRunning iteration 341/1500... Est. remaining: 9m 57sRunning iteration 351/1500... Est. remaining: 9m 50sRunning iteration 361/1500... Est. remaining: 9m 44sRunning iteration 371/1500... Est. remaining: 9m 39sRunning iteration 381/1500... Est. remaining: 9m 33sRunning iteration 391/1500... Est. remaining: 9m 27sRunning iteration 401/1500... Est. remaining: 9m 21sbest_combination: {'lookbacks': [140, 179, 189], 'score': np.float64(0.6633268256138065), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 15sRunning iteration 421/1500... Est. remaining: 9m 10sRunning iteration 431/1500... Est. remaining: 9m 4sRunning iteration 441/1500... Est. remaining: 8m 58sRunning iteration 451/1500... Est. remaining: 8m 53sRunning iteration 461/1500... Est. remaining: 8m 47sRunning iteration 471/1500... Est. remaining: 8m 42sRunning iteration 481/1500... Est. remaining: 8m 36sRunning iteration 491/1500... Est. remaining: 8m 30sRunning iteration 501/1500... Est. remaining: 8m 25sbest_combination: {'lookbacks': [140, 179, 189], 'score': np.float64(0.6633268256138065), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,238,858,261
Annual Return: 46.96%
Sharpe Ratio: 1.52687
Sortino Ratio: 1.487
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.931
Lookback periods: [158, 161, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 16sRunning iteration 531/1500... Est. remaining: 8m 11sRunning iteration 541/1500... Est. remaining: 8m 6sRunning iteration 551/1500... Est. remaining: 8m 0sRunning iteration 561/1500... Est. remaining: 7m 55sRunning iteration 571/1500... Est. remaining: 7m 50sRunning iteration 581/1500... Est. remaining: 7m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,809,403,892
Annual Return: 47.33%
Sharpe Ratio: 1.54290
Sortino Ratio: 1.503
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 1.088
Lookback periods: [157, 161, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 7m 41sRunning iteration 601/1500... Est. remaining: 7m 36sbest_combination: {'lookbacks': [157, 161, 201], 'score': np.float64(1.0882286834489918), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 30sRunning iteration 621/1500... Est. remaining: 7m 25sRunning iteration 631/1500... Est. remaining: 7m 19sRunning iteration 641/1500... Est. remaining: 7m 14sRunning iteration 651/1500... Est. remaining: 7m 9sRunning iteration 661/1500... Est. remaining: 7m 4sRunning iteration 671/1500... Est. remaining: 6m 58sRunning iteration 681/1500... Est. remaining: 6m 53sRunning iteration 691/1500... Est. remaining: 6m 48sRunning iteration 701/1500... Est. remaining: 6m 43sbest_combination: {'lookbacks': [157, 161, 201], 'score': np.float64(1.0882286834489918), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 38sRunning iteration 721/1500... Est. remaining: 6m 32sRunning iteration 731/1500... Est. remaining: 6m 27sRunning iteration 741/1500... Est. remaining: 6m 22sRunning iteration 751/1500... Est. remaining: 6m 17sRunning iteration 761/1500... Est. remaining: 6m 12sRunning iteration 771/1500... Est. remaining: 6m 7sRunning iteration 781/1500... Est. remaining: 6m 1sRunning iteration 791/1500... Est. remaining: 5m 56sRunning iteration 801/1500... Est. remaining: 5m 51sbest_combination: {'lookbacks': [157, 161, 201], 'score': np.float64(1.0882286834489918), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 46sRunning iteration 821/1500... Est. remaining: 5m 41sRunning iteration 831/1500... Est. remaining: 5m 36sRunning iteration 841/1500... Est. remaining: 5m 30sRunning iteration 851/1500... Est. remaining: 5m 25sRunning iteration 861/1500... Est. remaining: 5m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,156,509,898
Annual Return: 48.60%
Sharpe Ratio: 1.57208
Sortino Ratio: 1.532
Max Drawdown: -60.2%
Avg Drawdown: -11.4%
Normalized Score: 1.522
Lookback periods: [155, 158, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 871/1500... Est. remaining: 5m 16sRunning iteration 881/1500... Est. remaining: 5m 11sRunning iteration 891/1500... Est. remaining: 5m 6sRunning iteration 901/1500... Est. remaining: 5m 1sbest_combination: {'lookbacks': [155, 158, 184], 'score': np.float64(1.522404659412736), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 55sRunning iteration 921/1500... Est. remaining: 4m 50sRunning iteration 931/1500... Est. remaining: 4m 45sRunning iteration 941/1500... Est. remaining: 4m 40sRunning iteration 951/1500... Est. remaining: 4m 35sRunning iteration 961/1500... Est. remaining: 4m 30sRunning iteration 971/1500... Est. remaining: 4m 25sRunning iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 15sRunning iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [155, 158, 184], 'score': np.float64(1.522404659412736), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 5sRunning iteration 1021/1500... Est. remaining: 4m 0sRunning iteration 1031/1500... Est. remaining: 3m 54sRunning iteration 1041/1500... Est. remaining: 3m 49sRunning iteration 1051/1500... Est. remaining: 3m 44sRunning iteration 1061/1500... Est. remaining: 3m 39sRunning iteration 1071/1500... Est. remaining: 3m 34sRunning iteration 1081/1500... Est. remaining: 3m 29sRunning iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [155, 158, 184], 'score': np.float64(1.522404659412736), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,562,177,613
Annual Return: 48.78%
Sharpe Ratio: 1.58698
Sortino Ratio: 1.546
Max Drawdown: -57.9%
Avg Drawdown: -11.7%
Normalized Score: 1.628
Lookback periods: [149, 159, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4sRunning iteration 1141/1500... Est. remaining: 2m 59sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [149, 159, 200], 'score': np.float64(1.6278481249859944), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [149, 159, 200], 'score': np.float64(1.6278481249859944), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [149, 159, 200], 'score': np.float64(1.6278481249859944), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.63
best_combination: {'lookbacks': [149, 159, 200], 'score': np.float64(1.6278481249859944), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [149, 159, 200] (score: 1.6278)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [149, 159, 200] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 118 selections (28.4%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 40 selections (9.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,562,177,613.03
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Tue Aug 26 00:26:26 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,686,828,759
Annual Return: 41.52%
Sharpe Ratio: 1.37207
Sortino Ratio: 1.331
Max Drawdown: -67.1%
Avg Drawdown: -12.9%
Normalized Score: -0.508
Lookback periods: [237, 240, 273] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,307,390,672
Annual Return: 44.30%
Sharpe Ratio: 1.44481
Sortino Ratio: 1.400
Max Drawdown: -68.2%
Avg Drawdown: -13.1%
Normalized Score: 0.207
Lookback periods: [146, 154, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 41sRunning iteration 21/1500... Est. remaining: 18m 11sRunning iteration 31/1500... Est. remaining: 16m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,043,030,397
Annual Return: 43.95%
Sharpe Ratio: 1.43958
Sortino Ratio: 1.402
Max Drawdown: -61.4%
Avg Drawdown: -12.4%
Normalized Score: 0.259
Lookback periods: [130, 173, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,205,956,154
Annual Return: 44.17%
Sharpe Ratio: 1.44725
Sortino Ratio: 1.409
Max Drawdown: -60.8%
Avg Drawdown: -12.8%
Normalized Score: 0.316
Lookback periods: [149, 180, 222] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 16m 18sRunning iteration 51/1500... Est. remaining: 15m 19sRunning iteration 61/1500... Est. remaining: 14m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,073,389,685
Annual Return: 46.09%
Sharpe Ratio: 1.49909
Sortino Ratio: 1.454
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.893
Lookback periods: [204, 205, 210] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 14m 29sRunning iteration 81/1500... Est. remaining: 14m 3sRunning iteration 91/1500... Est. remaining: 13m 41sRunning iteration 101/1500... Est. remaining: 13m 22sbest_combination: {'lookbacks': [204, 205, 210], 'score': np.float64(0.8930676858917741), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 6sRunning iteration 121/1500... Est. remaining: 12m 51sRunning iteration 131/1500... Est. remaining: 12m 38sRunning iteration 141/1500... Est. remaining: 12m 26sRunning iteration 151/1500... Est. remaining: 12m 15sRunning iteration 161/1500... Est. remaining: 12m 5sRunning iteration 171/1500... Est. remaining: 11m 55sRunning iteration 181/1500... Est. remaining: 11m 46sRunning iteration 191/1500... Est. remaining: 11m 38sRunning iteration 201/1500... Est. remaining: 11m 30sbest_combination: {'lookbacks': [204, 205, 210], 'score': np.float64(0.8930676858917741), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 22sRunning iteration 221/1500... Est. remaining: 11m 14sRunning iteration 231/1500... Est. remaining: 11m 7sRunning iteration 241/1500... Est. remaining: 10m 59sRunning iteration 251/1500... Est. remaining: 10m 52sRunning iteration 261/1500... Est. remaining: 10m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,229,597,600
Annual Return: 47.59%
Sharpe Ratio: 1.55593
Sortino Ratio: 1.526
Max Drawdown: -61.3%
Avg Drawdown: -11.5%
Normalized Score: 1.446
Lookback periods: [152, 159, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/1500... Est. remaining: 10m 44sRunning iteration 281/1500... Est. remaining: 10m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,497,278,576
Annual Return: 49.94%
Sharpe Ratio: 1.60760
Sortino Ratio: 1.577
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 2.050
Lookback periods: [176, 189, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 291/1500... Est. remaining: 10m 36sRunning iteration 301/1500... Est. remaining: 10m 30sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(2.049764210449096), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 23sRunning iteration 321/1500... Est. remaining: 10m 16sRunning iteration 331/1500... Est. remaining: 10m 10sRunning iteration 341/1500... Est. remaining: 10m 3sRunning iteration 351/1500... Est. remaining: 9m 57sRunning iteration 361/1500... Est. remaining: 9m 51sRunning iteration 371/1500... Est. remaining: 9m 44sRunning iteration 381/1500... Est. remaining: 9m 38sRunning iteration 391/1500... Est. remaining: 9m 32sRunning iteration 401/1500... Est. remaining: 9m 26sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(2.049764210449096), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 21sRunning iteration 421/1500... Est. remaining: 9m 15sRunning iteration 431/1500... Est. remaining: 9m 9sRunning iteration 441/1500... Est. remaining: 9m 4sRunning iteration 451/1500... Est. remaining: 8m 58sRunning iteration 461/1500... Est. remaining: 8m 52sRunning iteration 471/1500... Est. remaining: 8m 46sRunning iteration 481/1500... Est. remaining: 8m 40sRunning iteration 491/1500... Est. remaining: 8m 35sRunning iteration 501/1500... Est. remaining: 8m 29sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(2.049764210449096), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 24sRunning iteration 521/1500... Est. remaining: 8m 18sRunning iteration 531/1500... Est. remaining: 8m 13sRunning iteration 541/1500... Est. remaining: 8m 7sRunning iteration 551/1500... Est. remaining: 8m 2sRunning iteration 561/1500... Est. remaining: 7m 57sRunning iteration 571/1500... Est. remaining: 7m 51sRunning iteration 581/1500... Est. remaining: 7m 46sRunning iteration 591/1500... Est. remaining: 7m 40sRunning iteration 601/1500... Est. remaining: 7m 35sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(2.049764210449096), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 30sRunning iteration 621/1500... Est. remaining: 7m 25sRunning iteration 631/1500... Est. remaining: 7m 19sRunning iteration 641/1500... Est. remaining: 7m 14sRunning iteration 651/1500... Est. remaining: 7m 9sRunning iteration 661/1500... Est. remaining: 7m 4sRunning iteration 671/1500... Est. remaining: 6m 58sRunning iteration 681/1500... Est. remaining: 6m 53sRunning iteration 691/1500... Est. remaining: 6m 48sRunning iteration 701/1500... Est. remaining: 6m 43sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(2.049764210449096), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 37sRunning iteration 721/1500... Est. remaining: 6m 32sRunning iteration 731/1500... Est. remaining: 6m 27sRunning iteration 741/1500... Est. remaining: 6m 22sRunning iteration 751/1500... Est. remaining: 6m 17sRunning iteration 761/1500... Est. remaining: 6m 11sRunning iteration 771/1500... Est. remaining: 6m 6sRunning iteration 781/1500... Est. remaining: 6m 1sRunning iteration 791/1500... Est. remaining: 5m 56sRunning iteration 801/1500... Est. remaining: 5m 51sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(2.049764210449096), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 46sRunning iteration 821/1500... Est. remaining: 5m 40sRunning iteration 831/1500... Est. remaining: 5m 35sRunning iteration 841/1500... Est. remaining: 5m 30sRunning iteration 851/1500... Est. remaining: 5m 25sRunning iteration 861/1500... Est. remaining: 5m 20sRunning iteration 871/1500... Est. remaining: 5m 15sRunning iteration 881/1500... Est. remaining: 5m 10sRunning iteration 891/1500... Est. remaining: 5m 5sRunning iteration 901/1500... Est. remaining: 5m 0sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(2.049764210449096), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 55sRunning iteration 921/1500... Est. remaining: 4m 50sRunning iteration 931/1500... Est. remaining: 4m 45sRunning iteration 941/1500... Est. remaining: 4m 40sRunning iteration 951/1500... Est. remaining: 4m 35sRunning iteration 961/1500... Est. remaining: 4m 30sRunning iteration 971/1500... Est. remaining: 4m 25sRunning iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 15sRunning iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(2.049764210449096), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 5sRunning iteration 1021/1500... Est. remaining: 4m 0sRunning iteration 1031/1500... Est. remaining: 3m 54sRunning iteration 1041/1500... Est. remaining: 3m 49sRunning iteration 1051/1500... Est. remaining: 3m 44sRunning iteration 1061/1500... Est. remaining: 3m 39sRunning iteration 1071/1500... Est. remaining: 3m 34sRunning iteration 1081/1500... Est. remaining: 3m 29sRunning iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(2.049764210449096), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4sRunning iteration 1141/1500... Est. remaining: 2m 59sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(2.049764210449096), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(2.049764210449096), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(2.049764210449096), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 2.05
best_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(2.049764210449096), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [176, 189, 198] (score: 2.0498)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 189, 198] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 120 selections (28.8%)
2. sp500_hma: 103 selections (24.8%)
3. naz100_pine: 84 selections (20.2%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,497,278,576.31
Average Annualized Gain: 49.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Tue Aug 26 00:38:59 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,841,736,685
Annual Return: 41.88%
Sharpe Ratio: 1.38646
Sortino Ratio: 1.340
Max Drawdown: -66.7%
Avg Drawdown: -12.6%
Normalized Score: -0.393
Lookback periods: [227, 249, 268] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,384,616,841
Annual Return: 44.39%
Sharpe Ratio: 1.45243
Sortino Ratio: 1.412
Max Drawdown: -59.2%
Avg Drawdown: -12.3%
Normalized Score: 0.203
Lookback periods: [149, 164, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 50sRunning iteration 21/1500... Est. remaining: 18m 23sRunning iteration 31/1500... Est. remaining: 16m 11sRunning iteration 41/1500... Est. remaining: 15m 4sRunning iteration 51/1500... Est. remaining: 14m 19sRunning iteration 61/1500... Est. remaining: 13m 46sRunning iteration 71/1500... Est. remaining: 13m 20sRunning iteration 81/1500... Est. remaining: 13m 2sRunning iteration 91/1500... Est. remaining: 12m 47sRunning iteration 101/1500... Est. remaining: 12m 34sbest_combination: {'lookbacks': [149, 164, 179], 'score': np.float64(0.2031991177329054), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,442,151,364
Annual Return: 45.53%
Sharpe Ratio: 1.46624
Sortino Ratio: 1.415
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.311
Lookback periods: [189, 193, 207] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 12m 25sRunning iteration 131/1500... Est. remaining: 12m 15sRunning iteration 141/1500... Est. remaining: 12m 5sRunning iteration 151/1500... Est. remaining: 11m 56sRunning iteration 161/1500... Est. remaining: 11m 47sRunning iteration 171/1500... Est. remaining: 11m 39sRunning iteration 181/1500... Est. remaining: 11m 31sRunning iteration 191/1500... Est. remaining: 11m 24sRunning iteration 201/1500... Est. remaining: 11m 17sbest_combination: {'lookbacks': [189, 193, 207], 'score': np.float64(0.31135432555946324), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 10sRunning iteration 221/1500... Est. remaining: 11m 3sRunning iteration 231/1500... Est. remaining: 10m 56sRunning iteration 241/1500... Est. remaining: 10m 50sRunning iteration 251/1500... Est. remaining: 10m 44sRunning iteration 261/1500... Est. remaining: 10m 37sRunning iteration 271/1500... Est. remaining: 10m 31sRunning iteration 281/1500... Est. remaining: 10m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,012,386,201
Annual Return: 46.04%
Sharpe Ratio: 1.49461
Sortino Ratio: 1.447
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: 0.514
Lookback periods: [178, 187, 209] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 291/1500... Est. remaining: 10m 24sRunning iteration 301/1500... Est. remaining: 10m 18sbest_combination: {'lookbacks': [178, 187, 209], 'score': np.float64(0.5140388175066298), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 13sRunning iteration 321/1500... Est. remaining: 10m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,150,657,465
Annual Return: 45.24%
Sharpe Ratio: 1.51213
Sortino Ratio: 1.472
Max Drawdown: -61.3%
Avg Drawdown: -12.4%
Normalized Score: 0.607
Lookback periods: [142, 152, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 331/1500... Est. remaining: 10m 5sRunning iteration 341/1500... Est. remaining: 9m 59sRunning iteration 351/1500... Est. remaining: 9m 53sRunning iteration 361/1500... Est. remaining: 9m 47sRunning iteration 371/1500... Est. remaining: 9m 41sRunning iteration 381/1500... Est. remaining: 9m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,301,369,041
Annual Return: 47.63%
Sharpe Ratio: 1.54768
Sortino Ratio: 1.513
Max Drawdown: -58.5%
Avg Drawdown: -11.3%
Normalized Score: 0.993
Lookback periods: [154, 155, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 9m 33sRunning iteration 401/1500... Est. remaining: 9m 27sbest_combination: {'lookbacks': [154, 155, 162], 'score': np.float64(0.9933862185784553), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 21sRunning iteration 421/1500... Est. remaining: 9m 15sRunning iteration 431/1500... Est. remaining: 9m 10sRunning iteration 441/1500... Est. remaining: 9m 4sRunning iteration 451/1500... Est. remaining: 8m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,018,705,440
Annual Return: 47.46%
Sharpe Ratio: 1.55280
Sortino Ratio: 1.519
Max Drawdown: -59.7%
Avg Drawdown: -11.3%
Normalized Score: 1.015
Lookback periods: [150, 159, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 8m 55sRunning iteration 471/1500... Est. remaining: 8m 50sRunning iteration 481/1500... Est. remaining: 8m 44sRunning iteration 491/1500... Est. remaining: 8m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,239,074,003
Annual Return: 48.15%
Sharpe Ratio: 1.58684
Sortino Ratio: 1.548
Max Drawdown: -58.5%
Avg Drawdown: -11.3%
Normalized Score: 1.245
Lookback periods: [136, 155, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 8m 36sbest_combination: {'lookbacks': [136, 155, 178], 'score': np.float64(1.2450036054368987), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 31sRunning iteration 521/1500... Est. remaining: 8m 25sRunning iteration 531/1500... Est. remaining: 8m 19sRunning iteration 541/1500... Est. remaining: 8m 14sRunning iteration 551/1500... Est. remaining: 8m 8sRunning iteration 561/1500... Est. remaining: 8m 3sRunning iteration 571/1500... Est. remaining: 7m 57sRunning iteration 581/1500... Est. remaining: 7m 51sRunning iteration 591/1500... Est. remaining: 7m 46sRunning iteration 601/1500... Est. remaining: 7m 41sbest_combination: {'lookbacks': [136, 155, 178], 'score': np.float64(1.2450036054368987), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 35sRunning iteration 621/1500... Est. remaining: 7m 30sRunning iteration 631/1500... Est. remaining: 7m 24sRunning iteration 641/1500... Est. remaining: 7m 19sRunning iteration 651/1500... Est. remaining: 7m 14sRunning iteration 661/1500... Est. remaining: 7m 8sRunning iteration 671/1500... Est. remaining: 7m 3sRunning iteration 681/1500... Est. remaining: 6m 58sRunning iteration 691/1500... Est. remaining: 6m 52sRunning iteration 701/1500... Est. remaining: 6m 47sbest_combination: {'lookbacks': [136, 155, 178], 'score': np.float64(1.2450036054368987), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 42sRunning iteration 721/1500... Est. remaining: 6m 36sRunning iteration 731/1500... Est. remaining: 6m 31sRunning iteration 741/1500... Est. remaining: 6m 26sRunning iteration 751/1500... Est. remaining: 6m 21sRunning iteration 761/1500... Est. remaining: 6m 15sRunning iteration 771/1500... Est. remaining: 6m 10sRunning iteration 781/1500... Est. remaining: 6m 5sRunning iteration 791/1500... Est. remaining: 6m 0sRunning iteration 801/1500... Est. remaining: 5m 55sbest_combination: {'lookbacks': [136, 155, 178], 'score': np.float64(1.2450036054368987), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 50sRunning iteration 821/1500... Est. remaining: 5m 44sRunning iteration 831/1500... Est. remaining: 5m 39sRunning iteration 841/1500... Est. remaining: 5m 34sRunning iteration 851/1500... Est. remaining: 5m 29sRunning iteration 861/1500... Est. remaining: 5m 23sRunning iteration 871/1500... Est. remaining: 5m 18sRunning iteration 881/1500... Est. remaining: 5m 13sRunning iteration 891/1500... Est. remaining: 5m 8sRunning iteration 901/1500... Est. remaining: 5m 2sbest_combination: {'lookbacks': [136, 155, 178], 'score': np.float64(1.2450036054368987), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 57sRunning iteration 921/1500... Est. remaining: 4m 52sRunning iteration 931/1500... Est. remaining: 4m 47sRunning iteration 941/1500... Est. remaining: 4m 42sRunning iteration 951/1500... Est. remaining: 4m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,193,681,200
Annual Return: 48.62%
Sharpe Ratio: 1.58964
Sortino Ratio: 1.556
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 1.295
Lookback periods: [135, 155, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 17sRunning iteration 1001/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [135, 155, 176], 'score': np.float64(1.2951904209616862), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 7sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 21sbest_combination: {'lookbacks': [135, 155, 176], 'score': np.float64(1.2951904209616862), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 16sRunning iteration 1121/1500... Est. remaining: 3m 11sRunning iteration 1131/1500... Est. remaining: 3m 6sRunning iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 56sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,571,352,439
Annual Return: 48.79%
Sharpe Ratio: 1.60566
Sortino Ratio: 1.567
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 1.390
Lookback periods: [134, 155, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1181/1500... Est. remaining: 2m 41sRunning iteration 1191/1500... Est. remaining: 2m 36sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [134, 155, 171], 'score': np.float64(1.3897676130762184), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [134, 155, 171], 'score': np.float64(1.3897676130762184), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [134, 155, 171], 'score': np.float64(1.3897676130762184), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 1.39
best_combination: {'lookbacks': [134, 155, 171], 'score': np.float64(1.3897676130762184), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [134, 155, 171] (score: 1.3898)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [134, 155, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 111 selections (26.7%)
3. naz100_pi: 77 selections (18.5%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,571,352,439.29
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 270m 58s
End time: Tue Aug 26 00:51:33 EDT 2025
Average time per successful run: 18m 3s
==============================================================
✓ All runs completed successfully!
