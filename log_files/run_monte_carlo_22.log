Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Mon Aug 25 15:42:58 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Mon Aug 25 15:42:58 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $470,727,295
Annual Return: 36.40%
Sharpe Ratio: 1.27396
Sortino Ratio: 1.173
Max Drawdown: -71.5%
Avg Drawdown: -13.9%
Normalized Score: -1.751
Lookback periods: [62, 98, 133] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $833,124,593
Annual Return: 38.67%
Sharpe Ratio: 1.32337
Sortino Ratio: 1.236
Max Drawdown: -60.3%
Avg Drawdown: -12.5%
Normalized Score: -0.927
Lookback periods: [59, 146, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $707,753,990
Annual Return: 38.02%
Sharpe Ratio: 1.29992
Sortino Ratio: 1.219
Max Drawdown: -58.5%
Avg Drawdown: -11.5%
Normalized Score: -0.820
Lookback periods: [50, 144, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,949,977,281
Annual Return: 45.04%
Sharpe Ratio: 1.47199
Sortino Ratio: 1.435
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.095
Lookback periods: [156, 162, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 16m 16sRunning iteration 21/1500... Est. remaining: 11m 24sRunning iteration 31/1500... Est. remaining: 9m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,792,018,131
Annual Return: 46.65%
Sharpe Ratio: 1.52274
Sortino Ratio: 1.480
Max Drawdown: -62.3%
Avg Drawdown: -12.1%
Normalized Score: 0.103
Lookback periods: [139, 154, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 9m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,104,169,285
Annual Return: 46.11%
Sharpe Ratio: 1.51504
Sortino Ratio: 1.473
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.267
Lookback periods: [162, 168, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 8m 47sRunning iteration 61/1500... Est. remaining: 8m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,766,885,169
Annual Return: 46.63%
Sharpe Ratio: 1.55031
Sortino Ratio: 1.504
Max Drawdown: -58.5%
Avg Drawdown: -11.3%
Normalized Score: 0.376
Lookback periods: [136, 150, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 8m 28sRunning iteration 81/1500... Est. remaining: 8m 13sRunning iteration 91/1500... Est. remaining: 8m 0sRunning iteration 101/1500... Est. remaining: 7m 50sbest_combination: {'lookbacks': [136, 150, 158], 'score': np.float64(0.37648476537036124), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 41sRunning iteration 121/1500... Est. remaining: 7m 32sRunning iteration 131/1500... Est. remaining: 7m 25sRunning iteration 141/1500... Est. remaining: 7m 18sRunning iteration 151/1500... Est. remaining: 7m 11sRunning iteration 161/1500... Est. remaining: 7m 6sRunning iteration 171/1500... Est. remaining: 7m 1sRunning iteration 181/1500... Est. remaining: 6m 56sRunning iteration 191/1500... Est. remaining: 6m 51sRunning iteration 201/1500... Est. remaining: 6m 47sbest_combination: {'lookbacks': [136, 150, 158], 'score': np.float64(0.37648476537036124), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 42sRunning iteration 221/1500... Est. remaining: 6m 37sRunning iteration 231/1500... Est. remaining: 6m 33sRunning iteration 241/1500... Est. remaining: 6m 29sRunning iteration 251/1500... Est. remaining: 6m 24sRunning iteration 261/1500... Est. remaining: 6m 20sRunning iteration 271/1500... Est. remaining: 6m 16sRunning iteration 281/1500... Est. remaining: 6m 13sRunning iteration 291/1500... Est. remaining: 6m 9sRunning iteration 301/1500... Est. remaining: 6m 5sbest_combination: {'lookbacks': [136, 150, 158], 'score': np.float64(0.37648476537036124), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,133,493,753
Annual Return: 46.89%
Sharpe Ratio: 1.53128
Sortino Ratio: 1.500
Max Drawdown: -56.9%
Avg Drawdown: -11.0%
Normalized Score: 0.461
Lookback periods: [157, 161, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 6m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,612,854,715
Annual Return: 41.34%
Sharpe Ratio: 1.48376
Sortino Ratio: 1.382
Max Drawdown: -37.2%
Avg Drawdown: -9.7%
Normalized Score: 0.718
Lookback periods: [51, 52, 86] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/1500... Est. remaining: 6m 4sRunning iteration 331/1500... Est. remaining: 6m 0sRunning iteration 341/1500... Est. remaining: 5m 57sRunning iteration 351/1500... Est. remaining: 5m 53sRunning iteration 361/1500... Est. remaining: 5m 50sRunning iteration 371/1500... Est. remaining: 5m 46sRunning iteration 381/1500... Est. remaining: 5m 42sRunning iteration 391/1500... Est. remaining: 5m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,688,549,468
Annual Return: 41.52%
Sharpe Ratio: 1.49460
Sortino Ratio: 1.390
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 0.884
Lookback periods: [50, 57, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 5m 37sbest_combination: {'lookbacks': [50, 57, 83], 'score': np.float64(0.8839623870333551), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,229,417,452
Annual Return: 44.20%
Sharpe Ratio: 1.57610
Sortino Ratio: 1.489
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.285
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 5m 32sRunning iteration 431/1500... Est. remaining: 5m 29sRunning iteration 441/1500... Est. remaining: 5m 25sRunning iteration 451/1500... Est. remaining: 5m 22sRunning iteration 461/1500... Est. remaining: 5m 19sRunning iteration 471/1500... Est. remaining: 5m 15sRunning iteration 481/1500... Est. remaining: 5m 12sRunning iteration 491/1500... Est. remaining: 5m 8sRunning iteration 501/1500... Est. remaining: 5m 5sbest_combination: {'lookbacks': [50, 54, 90], 'score': np.float64(1.284776494711331), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,833,624,762
Annual Return: 43.65%
Sharpe Ratio: 1.57405
Sortino Ratio: 1.478
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.400
Lookback periods: [50, 50, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 5m 0sRunning iteration 531/1500... Est. remaining: 4m 56sRunning iteration 541/1500... Est. remaining: 4m 53sRunning iteration 551/1500... Est. remaining: 4m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.422
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,622,827,200
Annual Return: 44.68%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.504
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 4m 49sRunning iteration 571/1500... Est. remaining: 4m 46sRunning iteration 581/1500... Est. remaining: 4m 42sRunning iteration 591/1500... Est. remaining: 4m 39sRunning iteration 601/1500... Est. remaining: 4m 36sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.503858914951618), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 32sRunning iteration 621/1500... Est. remaining: 4m 29sRunning iteration 631/1500... Est. remaining: 4m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.725
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 4m 24sRunning iteration 651/1500... Est. remaining: 4m 20sRunning iteration 661/1500... Est. remaining: 4m 17sRunning iteration 671/1500... Est. remaining: 4m 14sRunning iteration 681/1500... Est. remaining: 4m 10sRunning iteration 691/1500... Est. remaining: 4m 7sRunning iteration 701/1500... Est. remaining: 4m 4sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7253090273278437), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 1sRunning iteration 721/1500... Est. remaining: 3m 57sRunning iteration 731/1500... Est. remaining: 3m 54sRunning iteration 741/1500... Est. remaining: 3m 51sRunning iteration 751/1500... Est. remaining: 3m 48sRunning iteration 761/1500... Est. remaining: 3m 45sRunning iteration 771/1500... Est. remaining: 3m 42sRunning iteration 781/1500... Est. remaining: 3m 39sRunning iteration 791/1500... Est. remaining: 3m 35sRunning iteration 801/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7253090273278437), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 29sRunning iteration 821/1500... Est. remaining: 3m 26sRunning iteration 831/1500... Est. remaining: 3m 23sRunning iteration 841/1500... Est. remaining: 3m 20sRunning iteration 851/1500... Est. remaining: 3m 17sRunning iteration 861/1500... Est. remaining: 3m 14sRunning iteration 871/1500... Est. remaining: 3m 11sRunning iteration 881/1500... Est. remaining: 3m 7sRunning iteration 891/1500... Est. remaining: 3m 4sRunning iteration 901/1500... Est. remaining: 3m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7253090273278437), 'visits': 1}
Running iteration 911/1500... Est. remaining: 2m 58sRunning iteration 921/1500... Est. remaining: 2m 55sRunning iteration 931/1500... Est. remaining: 2m 52sRunning iteration 941/1500... Est. remaining: 2m 49sRunning iteration 951/1500... Est. remaining: 2m 46sRunning iteration 961/1500... Est. remaining: 2m 43sRunning iteration 971/1500... Est. remaining: 2m 40sRunning iteration 981/1500... Est. remaining: 2m 37sRunning iteration 991/1500... Est. remaining: 2m 34sRunning iteration 1001/1500... Est. remaining: 2m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7253090273278437), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 28sRunning iteration 1021/1500... Est. remaining: 2m 24sRunning iteration 1031/1500... Est. remaining: 2m 21sRunning iteration 1041/1500... Est. remaining: 2m 18sRunning iteration 1051/1500... Est. remaining: 2m 15sRunning iteration 1061/1500... Est. remaining: 2m 12sRunning iteration 1071/1500... Est. remaining: 2m 9sRunning iteration 1081/1500... Est. remaining: 2m 6sRunning iteration 1091/1500... Est. remaining: 2m 3sRunning iteration 1101/1500... Est. remaining: 2m 0sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7253090273278437), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 57sRunning iteration 1121/1500... Est. remaining: 1m 54sRunning iteration 1131/1500... Est. remaining: 1m 51sRunning iteration 1141/1500... Est. remaining: 1m 48sRunning iteration 1151/1500... Est. remaining: 1m 45sRunning iteration 1161/1500... Est. remaining: 1m 42sRunning iteration 1171/1500... Est. remaining: 1m 39sRunning iteration 1181/1500... Est. remaining: 1m 36sRunning iteration 1191/1500... Est. remaining: 1m 33sRunning iteration 1201/1500... Est. remaining: 1m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7253090273278437), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 27sRunning iteration 1221/1500... Est. remaining: 1m 24sRunning iteration 1231/1500... Est. remaining: 1m 21sRunning iteration 1241/1500... Est. remaining: 1m 18sRunning iteration 1251/1500... Est. remaining: 1m 15sRunning iteration 1261/1500... Est. remaining: 1m 12sRunning iteration 1271/1500... Est. remaining: 1m 9sRunning iteration 1281/1500... Est. remaining: 1m 6sRunning iteration 1291/1500... Est. remaining: 1m 3sRunning iteration 1301/1500... Est. remaining: 1m 0sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7253090273278437), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 57sRunning iteration 1321/1500... Est. remaining: 0m 54sRunning iteration 1331/1500... Est. remaining: 0m 51sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7253090273278437), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.5 minutes
Best normalized score: 1.73
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7253090273278437), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.7253)

Monte Carlo simulation completed in 7.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Mon Aug 25 15:50:35 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $664,403,216
Annual Return: 37.77%
Sharpe Ratio: 1.35209
Sortino Ratio: 1.252
Max Drawdown: -34.7%
Avg Drawdown: -10.0%
Normalized Score: -0.034
Lookback periods: [50, 65, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,002,278,495
Annual Return: 42.22%
Sharpe Ratio: 1.43774
Sortino Ratio: 1.353
Max Drawdown: -52.3%
Avg Drawdown: -11.1%
Normalized Score: 0.003
Lookback periods: [90, 96, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 14m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,000,144,771
Annual Return: 47.45%
Sharpe Ratio: 1.55701
Sortino Ratio: 1.525
Max Drawdown: -63.5%
Avg Drawdown: -12.2%
Normalized Score: 0.420
Lookback periods: [135, 152, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 11m 5sRunning iteration 31/1500... Est. remaining: 9m 31sRunning iteration 41/1500... Est. remaining: 8m 42sRunning iteration 51/1500... Est. remaining: 8m 17sRunning iteration 61/1500... Est. remaining: 8m 1sRunning iteration 71/1500... Est. remaining: 7m 50sRunning iteration 81/1500... Est. remaining: 7m 46sRunning iteration 91/1500... Est. remaining: 7m 38sRunning iteration 101/1500... Est. remaining: 7m 32sbest_combination: {'lookbacks': [135, 152, 174], 'score': np.float64(0.42015833957084), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 26sRunning iteration 121/1500... Est. remaining: 7m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,217,098,376
Annual Return: 47.58%
Sharpe Ratio: 1.56648
Sortino Ratio: 1.537
Max Drawdown: -63.5%
Avg Drawdown: -11.4%
Normalized Score: 0.544
Lookback periods: [128, 152, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 7m 24sRunning iteration 141/1500... Est. remaining: 7m 20sRunning iteration 151/1500... Est. remaining: 7m 14sRunning iteration 161/1500... Est. remaining: 7m 9sRunning iteration 171/1500... Est. remaining: 7m 5sRunning iteration 181/1500... Est. remaining: 7m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,322,704,976
Annual Return: 47.64%
Sharpe Ratio: 1.54601
Sortino Ratio: 1.509
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 0.700
Lookback periods: [154, 156, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 7m 1sRunning iteration 201/1500... Est. remaining: 6m 57sbest_combination: {'lookbacks': [154, 156, 161], 'score': np.float64(0.700352508157883), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 54sRunning iteration 221/1500... Est. remaining: 6m 49sRunning iteration 231/1500... Est. remaining: 6m 45sRunning iteration 241/1500... Est. remaining: 6m 41sRunning iteration 251/1500... Est. remaining: 6m 37sRunning iteration 261/1500... Est. remaining: 6m 33sRunning iteration 271/1500... Est. remaining: 6m 29sRunning iteration 281/1500... Est. remaining: 6m 26sRunning iteration 291/1500... Est. remaining: 6m 22sRunning iteration 301/1500... Est. remaining: 6m 18sbest_combination: {'lookbacks': [154, 156, 161], 'score': np.float64(0.700352508157883), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 14sRunning iteration 321/1500... Est. remaining: 6m 11sRunning iteration 331/1500... Est. remaining: 6m 7sRunning iteration 341/1500... Est. remaining: 6m 4sRunning iteration 351/1500... Est. remaining: 6m 0sRunning iteration 361/1500... Est. remaining: 5m 57sRunning iteration 371/1500... Est. remaining: 5m 53sRunning iteration 381/1500... Est. remaining: 5m 50sRunning iteration 391/1500... Est. remaining: 5m 46sRunning iteration 401/1500... Est. remaining: 5m 43sbest_combination: {'lookbacks': [154, 156, 161], 'score': np.float64(0.700352508157883), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,545,100,074
Annual Return: 48.30%
Sharpe Ratio: 1.58134
Sortino Ratio: 1.539
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.870
Lookback periods: [154, 159, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 5m 42sRunning iteration 421/1500... Est. remaining: 5m 38sRunning iteration 431/1500... Est. remaining: 5m 35sRunning iteration 441/1500... Est. remaining: 5m 32sRunning iteration 451/1500... Est. remaining: 5m 28sRunning iteration 461/1500... Est. remaining: 5m 25sRunning iteration 471/1500... Est. remaining: 5m 22sRunning iteration 481/1500... Est. remaining: 5m 19sRunning iteration 491/1500... Est. remaining: 5m 15sRunning iteration 501/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(0.8701714433423204), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 9sRunning iteration 521/1500... Est. remaining: 5m 6sRunning iteration 531/1500... Est. remaining: 5m 2sRunning iteration 541/1500... Est. remaining: 4m 59sRunning iteration 551/1500... Est. remaining: 4m 56sRunning iteration 561/1500... Est. remaining: 4m 53sRunning iteration 571/1500... Est. remaining: 4m 49sRunning iteration 581/1500... Est. remaining: 4m 46sRunning iteration 591/1500... Est. remaining: 4m 43sRunning iteration 601/1500... Est. remaining: 4m 40sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(0.8701714433423204), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 37sRunning iteration 621/1500... Est. remaining: 4m 33sRunning iteration 631/1500... Est. remaining: 4m 30sRunning iteration 641/1500... Est. remaining: 4m 27sRunning iteration 651/1500... Est. remaining: 4m 24sRunning iteration 661/1500... Est. remaining: 4m 21sRunning iteration 671/1500... Est. remaining: 4m 18sRunning iteration 681/1500... Est. remaining: 4m 14sRunning iteration 691/1500... Est. remaining: 4m 11sRunning iteration 701/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(0.8701714433423204), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 5sRunning iteration 721/1500... Est. remaining: 4m 2sRunning iteration 731/1500... Est. remaining: 3m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,260,489,790
Annual Return: 48.65%
Sharpe Ratio: 1.60145
Sortino Ratio: 1.558
Max Drawdown: -57.2%
Avg Drawdown: -10.7%
Normalized Score: 0.968
Lookback periods: [138, 156, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 3m 56sRunning iteration 751/1500... Est. remaining: 3m 53sRunning iteration 761/1500... Est. remaining: 3m 50sRunning iteration 771/1500... Est. remaining: 3m 47sRunning iteration 781/1500... Est. remaining: 3m 44sRunning iteration 791/1500... Est. remaining: 3m 41sRunning iteration 801/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [138, 156, 158], 'score': np.float64(0.9684588870273148), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 34sRunning iteration 821/1500... Est. remaining: 3m 31sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 15sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [138, 156, 158], 'score': np.float64(0.9684588870273148), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 3sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 57sRunning iteration 941/1500... Est. remaining: 2m 53sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [138, 156, 158], 'score': np.float64(0.9684588870273148), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [138, 156, 158], 'score': np.float64(0.9684588870273148), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [138, 156, 158], 'score': np.float64(0.9684588870273148), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [138, 156, 158], 'score': np.float64(0.9684588870273148), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [138, 156, 158], 'score': np.float64(0.9684588870273148), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 0.97
best_combination: {'lookbacks': [138, 156, 158], 'score': np.float64(0.9684588870273148), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [138, 156, 158] (score: 0.9685)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [138, 156, 158] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 116 selections (27.9%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pi: 77 selections (18.5%)
4. naz100_pine: 74 selections (17.8%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,260,489,789.91
Average Annualized Gain: 48.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Mon Aug 25 15:58:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $676,285,973
Annual Return: 37.84%
Sharpe Ratio: 1.28672
Sortino Ratio: 1.211
Max Drawdown: -60.2%
Avg Drawdown: -13.6%
Normalized Score: -1.087
Lookback periods: [97, 105, 139] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $659,843,951
Annual Return: 37.74%
Sharpe Ratio: 1.30089
Sortino Ratio: 1.215
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: -0.534
Lookback periods: [84, 99, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,860,259,563
Annual Return: 44.94%
Sharpe Ratio: 1.49198
Sortino Ratio: 1.442
Max Drawdown: -56.0%
Avg Drawdown: -11.9%
Normalized Score: 0.086
Lookback periods: [127, 137, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 17m 38sRunning iteration 21/1500... Est. remaining: 11m 58sRunning iteration 31/1500... Est. remaining: 10m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $549,307,827
Annual Return: 37.01%
Sharpe Ratio: 1.33650
Sortino Ratio: 1.231
Max Drawdown: -34.7%
Avg Drawdown: -10.4%
Normalized Score: 0.395
Lookback periods: [50, 60, 77] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 9m 30sRunning iteration 51/1500... Est. remaining: 8m 59sRunning iteration 61/1500... Est. remaining: 8m 38sRunning iteration 71/1500... Est. remaining: 8m 25sRunning iteration 81/1500... Est. remaining: 8m 12sRunning iteration 91/1500... Est. remaining: 8m 2sRunning iteration 101/1500... Est. remaining: 7m 53sbest_combination: {'lookbacks': [50, 60, 77], 'score': np.float64(0.3949750234149304), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,278,027,773
Annual Return: 44.26%
Sharpe Ratio: 1.54306
Sortino Ratio: 1.450
Max Drawdown: -52.3%
Avg Drawdown: -9.1%
Normalized Score: 0.634
Lookback periods: [50, 95, 127] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 7m 54sRunning iteration 121/1500... Est. remaining: 7m 47sRunning iteration 131/1500... Est. remaining: 7m 40sRunning iteration 141/1500... Est. remaining: 7m 34sRunning iteration 151/1500... Est. remaining: 7m 29sRunning iteration 161/1500... Est. remaining: 7m 25sRunning iteration 171/1500... Est. remaining: 7m 19sRunning iteration 181/1500... Est. remaining: 7m 14sRunning iteration 191/1500... Est. remaining: 7m 10sRunning iteration 201/1500... Est. remaining: 7m 5sbest_combination: {'lookbacks': [50, 95, 127], 'score': np.float64(0.6344592885085606), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 0sRunning iteration 221/1500... Est. remaining: 6m 56sRunning iteration 231/1500... Est. remaining: 6m 52sRunning iteration 241/1500... Est. remaining: 6m 48sRunning iteration 251/1500... Est. remaining: 6m 44sRunning iteration 261/1500... Est. remaining: 6m 39sRunning iteration 271/1500... Est. remaining: 6m 35sRunning iteration 281/1500... Est. remaining: 6m 31sRunning iteration 291/1500... Est. remaining: 6m 27sRunning iteration 301/1500... Est. remaining: 6m 23sbest_combination: {'lookbacks': [50, 95, 127], 'score': np.float64(0.6344592885085606), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 20sRunning iteration 321/1500... Est. remaining: 6m 16sRunning iteration 331/1500... Est. remaining: 6m 12sRunning iteration 341/1500... Est. remaining: 6m 8sRunning iteration 351/1500... Est. remaining: 6m 4sRunning iteration 361/1500... Est. remaining: 6m 1sRunning iteration 371/1500... Est. remaining: 5m 57sRunning iteration 381/1500... Est. remaining: 5m 54sRunning iteration 391/1500... Est. remaining: 5m 51sRunning iteration 401/1500... Est. remaining: 5m 47sbest_combination: {'lookbacks': [50, 95, 127], 'score': np.float64(0.6344592885085606), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 44sRunning iteration 421/1500... Est. remaining: 5m 40sRunning iteration 431/1500... Est. remaining: 5m 37sRunning iteration 441/1500... Est. remaining: 5m 33sRunning iteration 451/1500... Est. remaining: 5m 30sRunning iteration 461/1500... Est. remaining: 5m 27sRunning iteration 471/1500... Est. remaining: 5m 23sRunning iteration 481/1500... Est. remaining: 5m 20sRunning iteration 491/1500... Est. remaining: 5m 16sRunning iteration 501/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [50, 95, 127], 'score': np.float64(0.6344592885085606), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 9sRunning iteration 521/1500... Est. remaining: 5m 6sRunning iteration 531/1500... Est. remaining: 5m 3sRunning iteration 541/1500... Est. remaining: 4m 59sRunning iteration 551/1500... Est. remaining: 4m 56sRunning iteration 561/1500... Est. remaining: 4m 52sRunning iteration 571/1500... Est. remaining: 4m 49sRunning iteration 581/1500... Est. remaining: 4m 46sRunning iteration 591/1500... Est. remaining: 4m 43sRunning iteration 601/1500... Est. remaining: 4m 39sbest_combination: {'lookbacks': [50, 95, 127], 'score': np.float64(0.6344592885085606), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 36sRunning iteration 621/1500... Est. remaining: 4m 33sRunning iteration 631/1500... Est. remaining: 4m 30sRunning iteration 641/1500... Est. remaining: 4m 26sRunning iteration 651/1500... Est. remaining: 4m 23sRunning iteration 661/1500... Est. remaining: 4m 20sRunning iteration 671/1500... Est. remaining: 4m 17sRunning iteration 681/1500... Est. remaining: 4m 14sRunning iteration 691/1500... Est. remaining: 4m 10sRunning iteration 701/1500... Est. remaining: 4m 7sbest_combination: {'lookbacks': [50, 95, 127], 'score': np.float64(0.6344592885085606), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 4sRunning iteration 721/1500... Est. remaining: 4m 1sRunning iteration 731/1500... Est. remaining: 3m 58sRunning iteration 741/1500... Est. remaining: 3m 54sRunning iteration 751/1500... Est. remaining: 3m 51sRunning iteration 761/1500... Est. remaining: 3m 48sRunning iteration 771/1500... Est. remaining: 3m 45sRunning iteration 781/1500... Est. remaining: 3m 42sRunning iteration 791/1500... Est. remaining: 3m 39sRunning iteration 801/1500... Est. remaining: 3m 35sbest_combination: {'lookbacks': [50, 95, 127], 'score': np.float64(0.6344592885085606), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 32sRunning iteration 821/1500... Est. remaining: 3m 29sRunning iteration 831/1500... Est. remaining: 3m 26sRunning iteration 841/1500... Est. remaining: 3m 23sRunning iteration 851/1500... Est. remaining: 3m 20sRunning iteration 861/1500... Est. remaining: 3m 17sRunning iteration 871/1500... Est. remaining: 3m 13sRunning iteration 881/1500... Est. remaining: 3m 10sRunning iteration 891/1500... Est. remaining: 3m 7sRunning iteration 901/1500... Est. remaining: 3m 4sbest_combination: {'lookbacks': [50, 95, 127], 'score': np.float64(0.6344592885085606), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 1sRunning iteration 921/1500... Est. remaining: 2m 58sRunning iteration 931/1500... Est. remaining: 2m 55sRunning iteration 941/1500... Est. remaining: 2m 52sRunning iteration 951/1500... Est. remaining: 2m 49sRunning iteration 961/1500... Est. remaining: 2m 45sRunning iteration 971/1500... Est. remaining: 2m 42sRunning iteration 981/1500... Est. remaining: 2m 39sRunning iteration 991/1500... Est. remaining: 2m 36sRunning iteration 1001/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [50, 95, 127], 'score': np.float64(0.6344592885085606), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 30sRunning iteration 1021/1500... Est. remaining: 2m 27sRunning iteration 1031/1500... Est. remaining: 2m 24sRunning iteration 1041/1500... Est. remaining: 2m 20sRunning iteration 1051/1500... Est. remaining: 2m 17sRunning iteration 1061/1500... Est. remaining: 2m 14sRunning iteration 1071/1500... Est. remaining: 2m 11sRunning iteration 1081/1500... Est. remaining: 2m 8sRunning iteration 1091/1500... Est. remaining: 2m 5sRunning iteration 1101/1500... Est. remaining: 2m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.656
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.6562788767282828), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 59sRunning iteration 1121/1500... Est. remaining: 1m 56sRunning iteration 1131/1500... Est. remaining: 1m 53sRunning iteration 1141/1500... Est. remaining: 1m 50sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.684
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.683821498580843), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 28sRunning iteration 1221/1500... Est. remaining: 1m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.702
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.702389131542639), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.702389131542639), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.827
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.83
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.826963082460574), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.8270)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Mon Aug 25 16:06:14 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $988,882,800
Annual Return: 39.36%
Sharpe Ratio: 1.33769
Sortino Ratio: 1.263
Max Drawdown: -58.2%
Avg Drawdown: -13.9%
Normalized Score: -1.317
Lookback periods: [86, 118, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $433,389,714
Annual Return: 36.08%
Sharpe Ratio: 1.24643
Sortino Ratio: 1.162
Max Drawdown: -52.3%
Avg Drawdown: -12.1%
Normalized Score: -1.260
Lookback periods: [82, 124, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,274,270,775
Annual Return: 44.25%
Sharpe Ratio: 1.46706
Sortino Ratio: 1.422
Max Drawdown: -62.9%
Avg Drawdown: -12.7%
Normalized Score: -0.662
Lookback periods: [104, 148, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,986,100,145
Annual Return: 45.07%
Sharpe Ratio: 1.49375
Sortino Ratio: 1.459
Max Drawdown: -67.5%
Avg Drawdown: -12.2%
Normalized Score: -0.616
Lookback periods: [119, 158, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 17m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,473,109,652
Annual Return: 44.50%
Sharpe Ratio: 1.45081
Sortino Ratio: 1.411
Max Drawdown: -61.4%
Avg Drawdown: -12.1%
Normalized Score: -0.562
Lookback periods: [150, 186, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,628,857,096
Annual Return: 44.68%
Sharpe Ratio: 1.51086
Sortino Ratio: 1.460
Max Drawdown: -59.3%
Avg Drawdown: -11.7%
Normalized Score: -0.246
Lookback periods: [110, 132, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 13m 51sRunning iteration 31/1500... Est. remaining: 11m 23sRunning iteration 41/1500... Est. remaining: 10m 4sRunning iteration 51/1500... Est. remaining: 9m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,424,327,443
Annual Return: 45.51%
Sharpe Ratio: 1.49712
Sortino Ratio: 1.468
Max Drawdown: -58.2%
Avg Drawdown: -11.3%
Normalized Score: -0.134
Lookback periods: [159, 165, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 9m 3sRunning iteration 71/1500... Est. remaining: 8m 43sRunning iteration 81/1500... Est. remaining: 8m 32sRunning iteration 91/1500... Est. remaining: 8m 21sRunning iteration 101/1500... Est. remaining: 8m 12sbest_combination: {'lookbacks': [159, 165, 166], 'score': np.float64(-0.13442622074116842), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 4sRunning iteration 121/1500... Est. remaining: 7m 57sRunning iteration 131/1500... Est. remaining: 7m 50sRunning iteration 141/1500... Est. remaining: 7m 42sRunning iteration 151/1500... Est. remaining: 7m 36sRunning iteration 161/1500... Est. remaining: 7m 30sRunning iteration 171/1500... Est. remaining: 7m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $543,757,451
Annual Return: 36.97%
Sharpe Ratio: 1.35700
Sortino Ratio: 1.254
Max Drawdown: -34.7%
Avg Drawdown: -10.3%
Normalized Score: -0.038
Lookback periods: [50, 61, 92] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/1500... Est. remaining: 7m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,056,328,366
Annual Return: 43.97%
Sharpe Ratio: 1.47754
Sortino Ratio: 1.410
Max Drawdown: -52.3%
Avg Drawdown: -10.7%
Normalized Score: -0.025
Lookback periods: [83, 130, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 7m 25sRunning iteration 201/1500... Est. remaining: 7m 20sbest_combination: {'lookbacks': [83, 130, 130], 'score': np.float64(-0.025083636289156313), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 15sRunning iteration 221/1500... Est. remaining: 7m 9sRunning iteration 231/1500... Est. remaining: 7m 4sRunning iteration 241/1500... Est. remaining: 6m 59sRunning iteration 251/1500... Est. remaining: 6m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,437,808,928
Annual Return: 47.71%
Sharpe Ratio: 1.57042
Sortino Ratio: 1.521
Max Drawdown: -57.2%
Avg Drawdown: -12.1%
Normalized Score: 0.047
Lookback periods: [135, 156, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 6m 53sRunning iteration 271/1500... Est. remaining: 6m 49sRunning iteration 281/1500... Est. remaining: 6m 44sRunning iteration 291/1500... Est. remaining: 6m 40sRunning iteration 301/1500... Est. remaining: 6m 35sbest_combination: {'lookbacks': [135, 156, 181], 'score': np.float64(0.04744769129572526), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 31sRunning iteration 321/1500... Est. remaining: 6m 27sRunning iteration 331/1500... Est. remaining: 6m 23sRunning iteration 341/1500... Est. remaining: 6m 19sRunning iteration 351/1500... Est. remaining: 6m 15sRunning iteration 361/1500... Est. remaining: 6m 11sRunning iteration 371/1500... Est. remaining: 6m 7sRunning iteration 381/1500... Est. remaining: 6m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,979,531,957
Annual Return: 47.44%
Sharpe Ratio: 1.56244
Sortino Ratio: 1.523
Max Drawdown: -58.5%
Avg Drawdown: -11.7%
Normalized Score: 0.053
Lookback periods: [136, 155, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 6m 1sRunning iteration 401/1500... Est. remaining: 5m 58sbest_combination: {'lookbacks': [136, 155, 167], 'score': np.float64(0.052580398577055654), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 54sRunning iteration 421/1500... Est. remaining: 5m 51sRunning iteration 431/1500... Est. remaining: 5m 47sRunning iteration 441/1500... Est. remaining: 5m 43sRunning iteration 451/1500... Est. remaining: 5m 39sRunning iteration 461/1500... Est. remaining: 5m 36sRunning iteration 471/1500... Est. remaining: 5m 32sRunning iteration 481/1500... Est. remaining: 5m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,051,479,965
Annual Return: 48.05%
Sharpe Ratio: 1.57316
Sortino Ratio: 1.534
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.219
Lookback periods: [143, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 5m 26sRunning iteration 501/1500... Est. remaining: 5m 23sbest_combination: {'lookbacks': [143, 155, 156], 'score': np.float64(0.21900905500335002), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 19sRunning iteration 521/1500... Est. remaining: 5m 16sRunning iteration 531/1500... Est. remaining: 5m 12sRunning iteration 541/1500... Est. remaining: 5m 9sRunning iteration 551/1500... Est. remaining: 5m 5sRunning iteration 561/1500... Est. remaining: 5m 2sRunning iteration 571/1500... Est. remaining: 4m 59sRunning iteration 581/1500... Est. remaining: 4m 55sRunning iteration 591/1500... Est. remaining: 4m 52sRunning iteration 601/1500... Est. remaining: 4m 48sbest_combination: {'lookbacks': [143, 155, 156], 'score': np.float64(0.21900905500335002), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 45sRunning iteration 621/1500... Est. remaining: 4m 41sRunning iteration 631/1500... Est. remaining: 4m 38sRunning iteration 641/1500... Est. remaining: 4m 34sRunning iteration 651/1500... Est. remaining: 4m 31sRunning iteration 661/1500... Est. remaining: 4m 28sRunning iteration 671/1500... Est. remaining: 4m 24sRunning iteration 681/1500... Est. remaining: 4m 21sRunning iteration 691/1500... Est. remaining: 4m 18sRunning iteration 701/1500... Est. remaining: 4m 14sbest_combination: {'lookbacks': [143, 155, 156], 'score': np.float64(0.21900905500335002), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 11sRunning iteration 721/1500... Est. remaining: 4m 8sRunning iteration 731/1500... Est. remaining: 4m 4sRunning iteration 741/1500... Est. remaining: 4m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,006,654,986
Annual Return: 48.02%
Sharpe Ratio: 1.57834
Sortino Ratio: 1.540
Max Drawdown: -55.0%
Avg Drawdown: -11.3%
Normalized Score: 0.300
Lookback periods: [146, 156, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 3m 59sRunning iteration 761/1500... Est. remaining: 3m 55sRunning iteration 771/1500... Est. remaining: 3m 52sRunning iteration 781/1500... Est. remaining: 3m 49sRunning iteration 791/1500... Est. remaining: 3m 45sRunning iteration 801/1500... Est. remaining: 3m 42sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.2996783212068073), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 39sRunning iteration 821/1500... Est. remaining: 3m 35sRunning iteration 831/1500... Est. remaining: 3m 32sRunning iteration 841/1500... Est. remaining: 3m 29sRunning iteration 851/1500... Est. remaining: 3m 26sRunning iteration 861/1500... Est. remaining: 3m 22sRunning iteration 871/1500... Est. remaining: 3m 19sRunning iteration 881/1500... Est. remaining: 3m 16sRunning iteration 891/1500... Est. remaining: 3m 13sRunning iteration 901/1500... Est. remaining: 3m 9sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.2996783212068073), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 6sRunning iteration 921/1500... Est. remaining: 3m 3sRunning iteration 931/1500... Est. remaining: 3m 0sRunning iteration 941/1500... Est. remaining: 2m 56sRunning iteration 951/1500... Est. remaining: 2m 53sRunning iteration 961/1500... Est. remaining: 2m 50sRunning iteration 971/1500... Est. remaining: 2m 47sRunning iteration 981/1500... Est. remaining: 2m 44sRunning iteration 991/1500... Est. remaining: 2m 40sRunning iteration 1001/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.2996783212068073), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 34sRunning iteration 1021/1500... Est. remaining: 2m 31sRunning iteration 1031/1500... Est. remaining: 2m 28sRunning iteration 1041/1500... Est. remaining: 2m 24sRunning iteration 1051/1500... Est. remaining: 2m 21sRunning iteration 1061/1500... Est. remaining: 2m 18sRunning iteration 1071/1500... Est. remaining: 2m 15sRunning iteration 1081/1500... Est. remaining: 2m 12sRunning iteration 1091/1500... Est. remaining: 2m 8sRunning iteration 1101/1500... Est. remaining: 2m 5sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.2996783212068073), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 2sRunning iteration 1121/1500... Est. remaining: 1m 59sRunning iteration 1131/1500... Est. remaining: 1m 56sRunning iteration 1141/1500... Est. remaining: 1m 53sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 46sRunning iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 40sRunning iteration 1191/1500... Est. remaining: 1m 37sRunning iteration 1201/1500... Est. remaining: 1m 34sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.2996783212068073), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 18sRunning iteration 1261/1500... Est. remaining: 1m 15sRunning iteration 1271/1500... Est. remaining: 1m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,658,555,397
Annual Return: 47.83%
Sharpe Ratio: 1.55948
Sortino Ratio: 1.529
Max Drawdown: -55.0%
Avg Drawdown: -10.8%
Normalized Score: 0.328
Lookback periods: [157, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1281/1500... Est. remaining: 1m 9sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [157, 162, 169], 'score': np.float64(0.3280428810346044), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 53sRunning iteration 1341/1500... Est. remaining: 0m 50sRunning iteration 1351/1500... Est. remaining: 0m 47sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [157, 162, 169], 'score': np.float64(0.3280428810346044), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 25sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 0.33
best_combination: {'lookbacks': [157, 162, 169], 'score': np.float64(0.3280428810346044), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [157, 162, 169] (score: 0.3280)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [157, 162, 169] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $7,658,555,397.19
Average Annualized Gain: 47.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Mon Aug 25 16:14:10 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,730,428,576
Annual Return: 41.62%
Sharpe Ratio: 1.40735
Sortino Ratio: 1.342
Max Drawdown: -56.1%
Avg Drawdown: -12.1%
Normalized Score: -0.248
Lookback periods: [84, 111, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,131,115,395
Annual Return: 44.07%
Sharpe Ratio: 1.44870
Sortino Ratio: 1.408
Max Drawdown: -61.2%
Avg Drawdown: -11.5%
Normalized Score: 0.077
Lookback periods: [162, 167, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,443,168,440
Annual Return: 47.10%
Sharpe Ratio: 1.53146
Sortino Ratio: 1.498
Max Drawdown: -60.8%
Avg Drawdown: -12.2%
Normalized Score: 0.518
Lookback periods: [155, 181, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 15m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,182,528,392
Annual Return: 46.92%
Sharpe Ratio: 1.53098
Sortino Ratio: 1.487
Max Drawdown: -56.6%
Avg Drawdown: -11.3%
Normalized Score: 0.768
Lookback periods: [154, 158, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 12m 0sRunning iteration 31/1500... Est. remaining: 10m 7sRunning iteration 41/1500... Est. remaining: 9m 4sRunning iteration 51/1500... Est. remaining: 8m 29sRunning iteration 61/1500... Est. remaining: 8m 4sRunning iteration 71/1500... Est. remaining: 7m 53sRunning iteration 81/1500... Est. remaining: 7m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,153,300,005
Annual Return: 47.54%
Sharpe Ratio: 1.55291
Sortino Ratio: 1.522
Max Drawdown: -56.9%
Avg Drawdown: -11.0%
Normalized Score: 0.947
Lookback periods: [157, 161, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 7m 52sRunning iteration 101/1500... Est. remaining: 7m 45sbest_combination: {'lookbacks': [157, 161, 166], 'score': np.float64(0.947028663300619), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 39sRunning iteration 121/1500... Est. remaining: 7m 33sRunning iteration 131/1500... Est. remaining: 7m 27sRunning iteration 141/1500... Est. remaining: 7m 22sRunning iteration 151/1500... Est. remaining: 7m 17sRunning iteration 161/1500... Est. remaining: 7m 13sRunning iteration 171/1500... Est. remaining: 7m 8sRunning iteration 181/1500... Est. remaining: 7m 4sRunning iteration 191/1500... Est. remaining: 7m 0sRunning iteration 201/1500... Est. remaining: 6m 56sbest_combination: {'lookbacks': [157, 161, 166], 'score': np.float64(0.947028663300619), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 52sRunning iteration 221/1500... Est. remaining: 6m 48sRunning iteration 231/1500... Est. remaining: 6m 44sRunning iteration 241/1500... Est. remaining: 6m 41sRunning iteration 251/1500... Est. remaining: 6m 37sRunning iteration 261/1500... Est. remaining: 6m 33sRunning iteration 271/1500... Est. remaining: 6m 30sRunning iteration 281/1500... Est. remaining: 6m 26sRunning iteration 291/1500... Est. remaining: 6m 22sRunning iteration 301/1500... Est. remaining: 6m 19sbest_combination: {'lookbacks': [157, 161, 166], 'score': np.float64(0.947028663300619), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 15sRunning iteration 321/1500... Est. remaining: 6m 12sRunning iteration 331/1500... Est. remaining: 6m 8sRunning iteration 341/1500... Est. remaining: 6m 4sRunning iteration 351/1500... Est. remaining: 6m 1sRunning iteration 361/1500... Est. remaining: 5m 57sRunning iteration 371/1500... Est. remaining: 5m 54sRunning iteration 381/1500... Est. remaining: 5m 51sRunning iteration 391/1500... Est. remaining: 5m 48sRunning iteration 401/1500... Est. remaining: 5m 45sbest_combination: {'lookbacks': [157, 161, 166], 'score': np.float64(0.947028663300619), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 41sRunning iteration 421/1500... Est. remaining: 5m 38sRunning iteration 431/1500... Est. remaining: 5m 35sRunning iteration 441/1500... Est. remaining: 5m 31sRunning iteration 451/1500... Est. remaining: 5m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,254,804,803
Annual Return: 48.15%
Sharpe Ratio: 1.58909
Sortino Ratio: 1.542
Max Drawdown: -56.8%
Avg Drawdown: -10.8%
Normalized Score: 1.117
Lookback periods: [141, 158, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 5m 26sRunning iteration 471/1500... Est. remaining: 5m 23sRunning iteration 481/1500... Est. remaining: 5m 20sRunning iteration 491/1500... Est. remaining: 5m 16sRunning iteration 501/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [141, 158, 178], 'score': np.float64(1.11668836652895), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 10sRunning iteration 521/1500... Est. remaining: 5m 6sRunning iteration 531/1500... Est. remaining: 5m 3sRunning iteration 541/1500... Est. remaining: 5m 0sRunning iteration 551/1500... Est. remaining: 4m 56sRunning iteration 561/1500... Est. remaining: 4m 53sRunning iteration 571/1500... Est. remaining: 4m 50sRunning iteration 581/1500... Est. remaining: 4m 47sRunning iteration 591/1500... Est. remaining: 4m 43sRunning iteration 601/1500... Est. remaining: 4m 40sbest_combination: {'lookbacks': [141, 158, 178], 'score': np.float64(1.11668836652895), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 37sRunning iteration 621/1500... Est. remaining: 4m 34sRunning iteration 631/1500... Est. remaining: 4m 31sRunning iteration 641/1500... Est. remaining: 4m 27sRunning iteration 651/1500... Est. remaining: 4m 24sRunning iteration 661/1500... Est. remaining: 4m 21sRunning iteration 671/1500... Est. remaining: 4m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,106,068,908
Annual Return: 49.80%
Sharpe Ratio: 1.61256
Sortino Ratio: 1.577
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 1.293
Lookback periods: [154, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 4m 16sRunning iteration 691/1500... Est. remaining: 4m 12sRunning iteration 701/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.292562826766978), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 6sRunning iteration 721/1500... Est. remaining: 4m 3sRunning iteration 731/1500... Est. remaining: 4m 0sRunning iteration 741/1500... Est. remaining: 3m 57sRunning iteration 751/1500... Est. remaining: 3m 53sRunning iteration 761/1500... Est. remaining: 3m 50sRunning iteration 771/1500... Est. remaining: 3m 47sRunning iteration 781/1500... Est. remaining: 3m 44sRunning iteration 791/1500... Est. remaining: 3m 41sRunning iteration 801/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.292562826766978), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 34sRunning iteration 821/1500... Est. remaining: 3m 31sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 18sRunning iteration 871/1500... Est. remaining: 3m 15sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 11sRunning iteration 901/1500... Est. remaining: 3m 9sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.292562826766978), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 7sRunning iteration 921/1500... Est. remaining: 3m 5sRunning iteration 931/1500... Est. remaining: 3m 3sRunning iteration 941/1500... Est. remaining: 3m 1sRunning iteration 951/1500... Est. remaining: 2m 59sRunning iteration 961/1500... Est. remaining: 2m 56sRunning iteration 971/1500... Est. remaining: 2m 54sRunning iteration 981/1500... Est. remaining: 2m 52sRunning iteration 991/1500... Est. remaining: 2m 49sRunning iteration 1001/1500... Est. remaining: 2m 47sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.292562826766978), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 45sRunning iteration 1021/1500... Est. remaining: 2m 42sRunning iteration 1031/1500... Est. remaining: 2m 39sRunning iteration 1041/1500... Est. remaining: 2m 37sRunning iteration 1051/1500... Est. remaining: 2m 34sRunning iteration 1061/1500... Est. remaining: 2m 31sRunning iteration 1071/1500... Est. remaining: 2m 29sRunning iteration 1081/1500... Est. remaining: 2m 26sRunning iteration 1091/1500... Est. remaining: 2m 23sRunning iteration 1101/1500... Est. remaining: 2m 20sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.292562826766978), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 17sRunning iteration 1121/1500... Est. remaining: 2m 14sRunning iteration 1131/1500... Est. remaining: 2m 11sRunning iteration 1141/1500... Est. remaining: 2m 8sRunning iteration 1151/1500... Est. remaining: 2m 5sRunning iteration 1161/1500... Est. remaining: 2m 2sRunning iteration 1171/1500... Est. remaining: 1m 59sRunning iteration 1181/1500... Est. remaining: 1m 55sRunning iteration 1191/1500... Est. remaining: 1m 52sRunning iteration 1201/1500... Est. remaining: 1m 49sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.292562826766978), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 46sRunning iteration 1221/1500... Est. remaining: 1m 42sRunning iteration 1231/1500... Est. remaining: 1m 39sRunning iteration 1241/1500... Est. remaining: 1m 36sRunning iteration 1251/1500... Est. remaining: 1m 32sRunning iteration 1261/1500... Est. remaining: 1m 29sRunning iteration 1271/1500... Est. remaining: 1m 25sRunning iteration 1281/1500... Est. remaining: 1m 22sRunning iteration 1291/1500... Est. remaining: 1m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,217,270,780
Annual Return: 49.07%
Sharpe Ratio: 1.61329
Sortino Ratio: 1.575
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 1.341
Lookback periods: [139, 155, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1301/1500... Est. remaining: 1m 15sbest_combination: {'lookbacks': [139, 155, 158], 'score': np.float64(1.3413329109437875), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 11sRunning iteration 1321/1500... Est. remaining: 1m 8sRunning iteration 1331/1500... Est. remaining: 1m 4sRunning iteration 1341/1500... Est. remaining: 1m 0sRunning iteration 1351/1500... Est. remaining: 0m 57sRunning iteration 1361/1500... Est. remaining: 0m 53sRunning iteration 1371/1500... Est. remaining: 0m 49sRunning iteration 1381/1500... Est. remaining: 0m 46sRunning iteration 1391/1500... Est. remaining: 0m 42sRunning iteration 1401/1500... Est. remaining: 0m 38sbest_combination: {'lookbacks': [139, 155, 158], 'score': np.float64(1.3413329109437875), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 34sRunning iteration 1421/1500... Est. remaining: 0m 31sRunning iteration 1431/1500... Est. remaining: 0m 27sRunning iteration 1441/1500... Est. remaining: 0m 23sRunning iteration 1451/1500... Est. remaining: 0m 19sRunning iteration 1461/1500... Est. remaining: 0m 15sRunning iteration 1471/1500... Est. remaining: 0m 11sRunning iteration 1481/1500... Est. remaining: 0m 7sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 9.9 minutes
Best normalized score: 1.34
best_combination: {'lookbacks': [139, 155, 158], 'score': np.float64(1.3413329109437875), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 155, 158] (score: 1.3413)

Monte Carlo simulation completed in 9.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 155, 158] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,217,270,780.39
Average Annualized Gain: 49.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Mon Aug 25 16:24:10 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $177,103,458
Annual Return: 32.61%
Sharpe Ratio: 1.15084
Sortino Ratio: 1.057
Max Drawdown: -65.0%
Avg Drawdown: -14.9%
Normalized Score: -2.542
Lookback periods: [66, 94, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,501,560,779
Annual Return: 43.14%
Sharpe Ratio: 1.44371
Sortino Ratio: 1.384
Max Drawdown: -63.6%
Avg Drawdown: -13.3%
Normalized Score: -0.389
Lookback periods: [129, 142, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,068,872,320
Annual Return: 46.84%
Sharpe Ratio: 1.52867
Sortino Ratio: 1.489
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.781
Lookback periods: [159, 161, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 49sRunning iteration 21/1500... Est. remaining: 20m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,788,764,333
Annual Return: 47.91%
Sharpe Ratio: 1.56758
Sortino Ratio: 1.528
Max Drawdown: -60.3%
Avg Drawdown: -11.2%
Normalized Score: 0.877
Lookback periods: [127, 157, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 31sRunning iteration 41/1500... Est. remaining: 16m 53sRunning iteration 51/1500... Est. remaining: 15m 48sRunning iteration 61/1500... Est. remaining: 15m 2sRunning iteration 71/1500... Est. remaining: 14m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,363,662,215
Annual Return: 47.05%
Sharpe Ratio: 1.55170
Sortino Ratio: 1.508
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.919
Lookback periods: [137, 154, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 14m 26sRunning iteration 91/1500... Est. remaining: 14m 4sRunning iteration 101/1500... Est. remaining: 13m 44sbest_combination: {'lookbacks': [137, 154, 171], 'score': np.float64(0.9187072999106928), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 27sRunning iteration 121/1500... Est. remaining: 13m 12sRunning iteration 131/1500... Est. remaining: 12m 59sRunning iteration 141/1500... Est. remaining: 12m 47sRunning iteration 151/1500... Est. remaining: 12m 36sRunning iteration 161/1500... Est. remaining: 12m 26sRunning iteration 171/1500... Est. remaining: 12m 16sRunning iteration 181/1500... Est. remaining: 12m 7sRunning iteration 191/1500... Est. remaining: 11m 59sRunning iteration 201/1500... Est. remaining: 11m 50sbest_combination: {'lookbacks': [137, 154, 171], 'score': np.float64(0.9187072999106928), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 42sRunning iteration 221/1500... Est. remaining: 11m 35sRunning iteration 231/1500... Est. remaining: 11m 27sRunning iteration 241/1500... Est. remaining: 11m 20sRunning iteration 251/1500... Est. remaining: 11m 13sRunning iteration 261/1500... Est. remaining: 11m 6sRunning iteration 271/1500... Est. remaining: 10m 59sRunning iteration 281/1500... Est. remaining: 10m 53sRunning iteration 291/1500... Est. remaining: 10m 46sRunning iteration 301/1500... Est. remaining: 10m 39sbest_combination: {'lookbacks': [137, 154, 171], 'score': np.float64(0.9187072999106928), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 33sRunning iteration 321/1500... Est. remaining: 10m 26sRunning iteration 331/1500... Est. remaining: 10m 20sRunning iteration 341/1500... Est. remaining: 10m 14sRunning iteration 351/1500... Est. remaining: 10m 8sRunning iteration 361/1500... Est. remaining: 10m 2sRunning iteration 371/1500... Est. remaining: 9m 56sRunning iteration 381/1500... Est. remaining: 9m 50sRunning iteration 391/1500... Est. remaining: 9m 44sRunning iteration 401/1500... Est. remaining: 9m 38sbest_combination: {'lookbacks': [137, 154, 171], 'score': np.float64(0.9187072999106928), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 33sRunning iteration 421/1500... Est. remaining: 9m 27sRunning iteration 431/1500... Est. remaining: 9m 21sRunning iteration 441/1500... Est. remaining: 9m 15sRunning iteration 451/1500... Est. remaining: 9m 10sRunning iteration 461/1500... Est. remaining: 9m 4sRunning iteration 471/1500... Est. remaining: 8m 58sRunning iteration 481/1500... Est. remaining: 8m 53sRunning iteration 491/1500... Est. remaining: 8m 47sRunning iteration 501/1500... Est. remaining: 8m 41sbest_combination: {'lookbacks': [137, 154, 171], 'score': np.float64(0.9187072999106928), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 36sRunning iteration 521/1500... Est. remaining: 8m 30sRunning iteration 531/1500... Est. remaining: 8m 25sRunning iteration 541/1500... Est. remaining: 8m 19sRunning iteration 551/1500... Est. remaining: 8m 14sRunning iteration 561/1500... Est. remaining: 8m 9sRunning iteration 571/1500... Est. remaining: 8m 3sRunning iteration 581/1500... Est. remaining: 7m 58sRunning iteration 591/1500... Est. remaining: 7m 52sRunning iteration 601/1500... Est. remaining: 7m 47sbest_combination: {'lookbacks': [137, 154, 171], 'score': np.float64(0.9187072999106928), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 42sRunning iteration 621/1500... Est. remaining: 7m 36sRunning iteration 631/1500... Est. remaining: 7m 31sRunning iteration 641/1500... Est. remaining: 7m 25sRunning iteration 651/1500... Est. remaining: 7m 20sRunning iteration 661/1500... Est. remaining: 7m 15sRunning iteration 671/1500... Est. remaining: 7m 9sRunning iteration 681/1500... Est. remaining: 7m 4sRunning iteration 691/1500... Est. remaining: 6m 59sRunning iteration 701/1500... Est. remaining: 6m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,968,431,076
Annual Return: 49.37%
Sharpe Ratio: 1.63056
Sortino Ratio: 1.585
Max Drawdown: -56.8%
Avg Drawdown: -10.7%
Normalized Score: 1.395
Lookback periods: [135, 157, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.395130013467221), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 50sRunning iteration 721/1500... Est. remaining: 6m 44sRunning iteration 731/1500... Est. remaining: 6m 39sRunning iteration 741/1500... Est. remaining: 6m 34sRunning iteration 751/1500... Est. remaining: 6m 28sRunning iteration 761/1500... Est. remaining: 6m 23sRunning iteration 771/1500... Est. remaining: 6m 18sRunning iteration 781/1500... Est. remaining: 6m 12sRunning iteration 791/1500... Est. remaining: 6m 7sRunning iteration 801/1500... Est. remaining: 6m 2sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.395130013467221), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 57sRunning iteration 821/1500... Est. remaining: 5m 51sRunning iteration 831/1500... Est. remaining: 5m 46sRunning iteration 841/1500... Est. remaining: 5m 41sRunning iteration 851/1500... Est. remaining: 5m 35sRunning iteration 861/1500... Est. remaining: 5m 30sRunning iteration 871/1500... Est. remaining: 5m 25sRunning iteration 881/1500... Est. remaining: 5m 20sRunning iteration 891/1500... Est. remaining: 5m 15sRunning iteration 901/1500... Est. remaining: 5m 9sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.395130013467221), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 4sRunning iteration 921/1500... Est. remaining: 4m 59sRunning iteration 931/1500... Est. remaining: 4m 54sRunning iteration 941/1500... Est. remaining: 4m 48sRunning iteration 951/1500... Est. remaining: 4m 43sRunning iteration 961/1500... Est. remaining: 4m 38sRunning iteration 971/1500... Est. remaining: 4m 33sRunning iteration 981/1500... Est. remaining: 4m 28sRunning iteration 991/1500... Est. remaining: 4m 22sRunning iteration 1001/1500... Est. remaining: 4m 17sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.395130013467221), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 12sRunning iteration 1021/1500... Est. remaining: 4m 7sRunning iteration 1031/1500... Est. remaining: 4m 2sRunning iteration 1041/1500... Est. remaining: 3m 56sRunning iteration 1051/1500... Est. remaining: 3m 51sRunning iteration 1061/1500... Est. remaining: 3m 46sRunning iteration 1071/1500... Est. remaining: 3m 41sRunning iteration 1081/1500... Est. remaining: 3m 36sRunning iteration 1091/1500... Est. remaining: 3m 31sRunning iteration 1101/1500... Est. remaining: 3m 25sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.395130013467221), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 20sRunning iteration 1121/1500... Est. remaining: 3m 15sRunning iteration 1131/1500... Est. remaining: 3m 10sRunning iteration 1141/1500... Est. remaining: 3m 5sRunning iteration 1151/1500... Est. remaining: 2m 59sRunning iteration 1161/1500... Est. remaining: 2m 54sRunning iteration 1171/1500... Est. remaining: 2m 49sRunning iteration 1181/1500... Est. remaining: 2m 44sRunning iteration 1191/1500... Est. remaining: 2m 39sRunning iteration 1201/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.395130013467221), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 23sRunning iteration 1231/1500... Est. remaining: 2m 18sRunning iteration 1241/1500... Est. remaining: 2m 13sRunning iteration 1251/1500... Est. remaining: 2m 8sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 52sRunning iteration 1291/1500... Est. remaining: 1m 47sRunning iteration 1301/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.395130013467221), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 16sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.395130013467221), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 1.40
best_combination: {'lookbacks': [135, 157, 178], 'score': np.float64(1.395130013467221), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 157, 178] (score: 1.3951)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 157, 178] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pi: 74 selections (17.8%)
4. naz100_pine: 74 selections (17.8%)
5. cash: 43 selections (10.3%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,968,431,075.98
Average Annualized Gain: 49.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Mon Aug 25 16:37:08 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $701,271,998
Annual Return: 37.98%
Sharpe Ratio: 1.28996
Sortino Ratio: 1.210
Max Drawdown: -58.9%
Avg Drawdown: -13.6%
Normalized Score: -1.035
Lookback periods: [90, 125, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,051,598,337
Annual Return: 39.60%
Sharpe Ratio: 1.34588
Sortino Ratio: 1.278
Max Drawdown: -67.7%
Avg Drawdown: -13.0%
Normalized Score: -0.975
Lookback periods: [62, 168, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,224,592,236
Annual Return: 42.65%
Sharpe Ratio: 1.39462
Sortino Ratio: 1.358
Max Drawdown: -65.5%
Avg Drawdown: -13.1%
Normalized Score: -0.619
Lookback periods: [127, 180, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $651,873,289
Annual Return: 37.69%
Sharpe Ratio: 1.33200
Sortino Ratio: 1.225
Max Drawdown: -52.3%
Avg Drawdown: -12.0%
Normalized Score: -0.489
Lookback periods: [57, 85, 125] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,031,989,548
Annual Return: 42.28%
Sharpe Ratio: 1.38776
Sortino Ratio: 1.349
Max Drawdown: -59.0%
Avg Drawdown: -12.4%
Normalized Score: -0.331
Lookback periods: [163, 177, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,867,899,156
Annual Return: 43.70%
Sharpe Ratio: 1.43381
Sortino Ratio: 1.392
Max Drawdown: -62.1%
Avg Drawdown: -12.6%
Normalized Score: -0.278
Lookback periods: [123, 181, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 38m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,001,778,295
Annual Return: 42.22%
Sharpe Ratio: 1.44505
Sortino Ratio: 1.367
Max Drawdown: -52.3%
Avg Drawdown: -11.4%
Normalized Score: 0.155
Lookback periods: [94, 95, 135] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 26m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $889,979,977
Annual Return: 38.93%
Sharpe Ratio: 1.38321
Sortino Ratio: 1.298
Max Drawdown: -34.7%
Avg Drawdown: -9.7%
Normalized Score: 0.690
Lookback periods: [53, 64, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 22m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,179,508,423
Annual Return: 40.07%
Sharpe Ratio: 1.46489
Sortino Ratio: 1.356
Max Drawdown: -34.7%
Avg Drawdown: -10.0%
Normalized Score: 0.899
Lookback periods: [50, 57, 91] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 20m 37sRunning iteration 51/1500... Est. remaining: 18m 51sRunning iteration 61/1500... Est. remaining: 17m 38sRunning iteration 71/1500... Est. remaining: 16m 39sRunning iteration 81/1500... Est. remaining: 15m 55sRunning iteration 91/1500... Est. remaining: 15m 22sRunning iteration 101/1500... Est. remaining: 14m 55sbest_combination: {'lookbacks': [50, 57, 91], 'score': np.float64(0.8991033596099722), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 33sRunning iteration 121/1500... Est. remaining: 14m 12sRunning iteration 131/1500... Est. remaining: 13m 55sRunning iteration 141/1500... Est. remaining: 13m 38sRunning iteration 151/1500... Est. remaining: 13m 23sRunning iteration 161/1500... Est. remaining: 13m 10sRunning iteration 171/1500... Est. remaining: 12m 57sRunning iteration 181/1500... Est. remaining: 12m 46sRunning iteration 191/1500... Est. remaining: 12m 35sRunning iteration 201/1500... Est. remaining: 12m 25sbest_combination: {'lookbacks': [50, 57, 91], 'score': np.float64(0.8991033596099722), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 15sRunning iteration 221/1500... Est. remaining: 12m 6sRunning iteration 231/1500... Est. remaining: 11m 56sRunning iteration 241/1500... Est. remaining: 11m 48sRunning iteration 251/1500... Est. remaining: 11m 39sRunning iteration 261/1500... Est. remaining: 11m 31sRunning iteration 271/1500... Est. remaining: 11m 23sRunning iteration 281/1500... Est. remaining: 11m 16sRunning iteration 291/1500... Est. remaining: 11m 8sRunning iteration 301/1500... Est. remaining: 11m 0sbest_combination: {'lookbacks': [50, 57, 91], 'score': np.float64(0.8991033596099722), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 53sRunning iteration 321/1500... Est. remaining: 10m 46sRunning iteration 331/1500... Est. remaining: 10m 39sRunning iteration 341/1500... Est. remaining: 10m 32sRunning iteration 351/1500... Est. remaining: 10m 25sRunning iteration 361/1500... Est. remaining: 10m 18sRunning iteration 371/1500... Est. remaining: 10m 12sRunning iteration 381/1500... Est. remaining: 10m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,165,015,500
Annual Return: 40.02%
Sharpe Ratio: 1.47716
Sortino Ratio: 1.368
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.111
Lookback periods: [50, 58, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 10m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,517,404,259
Annual Return: 41.09%
Sharpe Ratio: 1.47910
Sortino Ratio: 1.392
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.155
Lookback periods: [50, 63, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 9m 59sbest_combination: {'lookbacks': [50, 63, 97], 'score': np.float64(1.1550151390345789), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 53sRunning iteration 421/1500... Est. remaining: 9m 46sRunning iteration 431/1500... Est. remaining: 9m 40sRunning iteration 441/1500... Est. remaining: 9m 34sRunning iteration 451/1500... Est. remaining: 9m 27sRunning iteration 461/1500... Est. remaining: 9m 21sRunning iteration 471/1500... Est. remaining: 9m 15sRunning iteration 481/1500... Est. remaining: 9m 9sRunning iteration 491/1500... Est. remaining: 9m 2sRunning iteration 501/1500... Est. remaining: 8m 56sbest_combination: {'lookbacks': [50, 63, 97], 'score': np.float64(1.1550151390345789), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 50sRunning iteration 521/1500... Est. remaining: 8m 44sRunning iteration 531/1500... Est. remaining: 8m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,350,142,452
Annual Return: 40.61%
Sharpe Ratio: 1.47616
Sortino Ratio: 1.376
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.193
Lookback periods: [50, 61, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 29sRunning iteration 561/1500... Est. remaining: 8m 23sRunning iteration 571/1500... Est. remaining: 8m 17sRunning iteration 581/1500... Est. remaining: 8m 11sRunning iteration 591/1500... Est. remaining: 8m 5sRunning iteration 601/1500... Est. remaining: 7m 59sbest_combination: {'lookbacks': [50, 61, 99], 'score': np.float64(1.193320661785433), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,946,238,557
Annual Return: 42.10%
Sharpe Ratio: 1.52310
Sortino Ratio: 1.419
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.303
Lookback periods: [50, 55, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 7m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,622,827,200
Annual Return: 44.68%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.815
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 7m 46sRunning iteration 641/1500... Est. remaining: 7m 40sRunning iteration 651/1500... Est. remaining: 7m 34sRunning iteration 661/1500... Est. remaining: 7m 28sRunning iteration 671/1500... Est. remaining: 7m 22sRunning iteration 681/1500... Est. remaining: 7m 16sRunning iteration 691/1500... Est. remaining: 7m 11sRunning iteration 701/1500... Est. remaining: 7m 5sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.8148398895951996), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 59sRunning iteration 721/1500... Est. remaining: 6m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.898
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 6m 49sRunning iteration 741/1500... Est. remaining: 6m 44sRunning iteration 751/1500... Est. remaining: 6m 38sRunning iteration 761/1500... Est. remaining: 6m 33sRunning iteration 771/1500... Est. remaining: 6m 27sRunning iteration 781/1500... Est. remaining: 6m 22sRunning iteration 791/1500... Est. remaining: 6m 16sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8978020281894898), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 5sRunning iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 54sRunning iteration 841/1500... Est. remaining: 5m 48sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 37sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8978020281894898), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 27sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8978020281894898), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 4m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.044
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.043742890068809), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.043742890068809), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.043742890068809), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.043742890068809), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 2.04
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.043742890068809), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.0437)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Mon Aug 25 16:50:10 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $229,559,744
Annual Return: 33.61%
Sharpe Ratio: 1.16313
Sortino Ratio: 1.078
Max Drawdown: -57.3%
Avg Drawdown: -14.0%
Normalized Score: -2.399
Lookback periods: [70, 96, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,196,035,234
Annual Return: 42.60%
Sharpe Ratio: 1.40849
Sortino Ratio: 1.358
Max Drawdown: -65.6%
Avg Drawdown: -12.8%
Normalized Score: -0.950
Lookback periods: [107, 157, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 26m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,787,280,862
Annual Return: 44.86%
Sharpe Ratio: 1.45949
Sortino Ratio: 1.419
Max Drawdown: -60.2%
Avg Drawdown: -11.9%
Normalized Score: -0.176
Lookback periods: [159, 191, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 20m 27sRunning iteration 31/1500... Est. remaining: 17m 40sRunning iteration 41/1500... Est. remaining: 16m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,345,874,671
Annual Return: 42.87%
Sharpe Ratio: 1.46232
Sortino Ratio: 1.386
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: 0.143
Lookback periods: [87, 109, 126] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 15m 52sRunning iteration 61/1500... Est. remaining: 15m 9sRunning iteration 71/1500... Est. remaining: 14m 36sRunning iteration 81/1500... Est. remaining: 14m 6sRunning iteration 91/1500... Est. remaining: 13m 45sRunning iteration 101/1500... Est. remaining: 13m 29sbest_combination: {'lookbacks': [87, 109, 126], 'score': np.float64(0.14346038713869513), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,657,902,267
Annual Return: 49.64%
Sharpe Ratio: 1.63612
Sortino Ratio: 1.588
Max Drawdown: -56.8%
Avg Drawdown: -10.6%
Normalized Score: 1.113
Lookback periods: [139, 157, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 15sRunning iteration 131/1500... Est. remaining: 13m 3sRunning iteration 141/1500... Est. remaining: 12m 50sRunning iteration 151/1500... Est. remaining: 12m 39sRunning iteration 161/1500... Est. remaining: 12m 30sRunning iteration 171/1500... Est. remaining: 12m 20sRunning iteration 181/1500... Est. remaining: 12m 11sRunning iteration 191/1500... Est. remaining: 12m 2sRunning iteration 201/1500... Est. remaining: 11m 53sbest_combination: {'lookbacks': [139, 157, 178], 'score': np.float64(1.1127936109267593), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 46sRunning iteration 221/1500... Est. remaining: 11m 38sRunning iteration 231/1500... Est. remaining: 11m 31sRunning iteration 241/1500... Est. remaining: 11m 23sRunning iteration 251/1500... Est. remaining: 11m 17sRunning iteration 261/1500... Est. remaining: 11m 9sRunning iteration 271/1500... Est. remaining: 11m 3sRunning iteration 281/1500... Est. remaining: 10m 56sRunning iteration 291/1500... Est. remaining: 10m 49sRunning iteration 301/1500... Est. remaining: 10m 42sbest_combination: {'lookbacks': [139, 157, 178], 'score': np.float64(1.1127936109267593), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 36sRunning iteration 321/1500... Est. remaining: 10m 29sRunning iteration 331/1500... Est. remaining: 10m 23sRunning iteration 341/1500... Est. remaining: 10m 17sRunning iteration 351/1500... Est. remaining: 10m 10sRunning iteration 361/1500... Est. remaining: 10m 4sRunning iteration 371/1500... Est. remaining: 9m 58sRunning iteration 381/1500... Est. remaining: 9m 52sRunning iteration 391/1500... Est. remaining: 9m 46sRunning iteration 401/1500... Est. remaining: 9m 40sbest_combination: {'lookbacks': [139, 157, 178], 'score': np.float64(1.1127936109267593), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 34sRunning iteration 421/1500... Est. remaining: 9m 28sRunning iteration 431/1500... Est. remaining: 9m 22sRunning iteration 441/1500... Est. remaining: 9m 17sRunning iteration 451/1500... Est. remaining: 9m 11sRunning iteration 461/1500... Est. remaining: 9m 5sRunning iteration 471/1500... Est. remaining: 8m 59sRunning iteration 481/1500... Est. remaining: 8m 54sRunning iteration 491/1500... Est. remaining: 8m 48sRunning iteration 501/1500... Est. remaining: 8m 42sbest_combination: {'lookbacks': [139, 157, 178], 'score': np.float64(1.1127936109267593), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 37sRunning iteration 521/1500... Est. remaining: 8m 31sRunning iteration 531/1500... Est. remaining: 8m 26sRunning iteration 541/1500... Est. remaining: 8m 20sRunning iteration 551/1500... Est. remaining: 8m 15sRunning iteration 561/1500... Est. remaining: 8m 9sRunning iteration 571/1500... Est. remaining: 8m 4sRunning iteration 581/1500... Est. remaining: 7m 58sRunning iteration 591/1500... Est. remaining: 7m 53sRunning iteration 601/1500... Est. remaining: 7m 47sbest_combination: {'lookbacks': [139, 157, 178], 'score': np.float64(1.1127936109267593), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 42sRunning iteration 621/1500... Est. remaining: 7m 37sRunning iteration 631/1500... Est. remaining: 7m 31sRunning iteration 641/1500... Est. remaining: 7m 26sRunning iteration 651/1500... Est. remaining: 7m 20sRunning iteration 661/1500... Est. remaining: 7m 15sRunning iteration 671/1500... Est. remaining: 7m 10sRunning iteration 681/1500... Est. remaining: 7m 4sRunning iteration 691/1500... Est. remaining: 6m 59sRunning iteration 701/1500... Est. remaining: 6m 54sbest_combination: {'lookbacks': [139, 157, 178], 'score': np.float64(1.1127936109267593), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 48sRunning iteration 721/1500... Est. remaining: 6m 43sRunning iteration 731/1500... Est. remaining: 6m 38sRunning iteration 741/1500... Est. remaining: 6m 32sRunning iteration 751/1500... Est. remaining: 6m 27sRunning iteration 761/1500... Est. remaining: 6m 22sRunning iteration 771/1500... Est. remaining: 6m 17sRunning iteration 781/1500... Est. remaining: 6m 11sRunning iteration 791/1500... Est. remaining: 6m 6sRunning iteration 801/1500... Est. remaining: 6m 1sbest_combination: {'lookbacks': [139, 157, 178], 'score': np.float64(1.1127936109267593), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 56sRunning iteration 821/1500... Est. remaining: 5m 50sRunning iteration 831/1500... Est. remaining: 5m 45sRunning iteration 841/1500... Est. remaining: 5m 40sRunning iteration 851/1500... Est. remaining: 5m 35sRunning iteration 861/1500... Est. remaining: 5m 29sRunning iteration 871/1500... Est. remaining: 5m 24sRunning iteration 881/1500... Est. remaining: 5m 19sRunning iteration 891/1500... Est. remaining: 5m 14sRunning iteration 901/1500... Est. remaining: 5m 9sbest_combination: {'lookbacks': [139, 157, 178], 'score': np.float64(1.1127936109267593), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 3sRunning iteration 921/1500... Est. remaining: 4m 58sRunning iteration 931/1500... Est. remaining: 4m 53sRunning iteration 941/1500... Est. remaining: 4m 48sRunning iteration 951/1500... Est. remaining: 4m 43sRunning iteration 961/1500... Est. remaining: 4m 37sRunning iteration 971/1500... Est. remaining: 4m 32sRunning iteration 981/1500... Est. remaining: 4m 27sRunning iteration 991/1500... Est. remaining: 4m 22sRunning iteration 1001/1500... Est. remaining: 4m 17sbest_combination: {'lookbacks': [139, 157, 178], 'score': np.float64(1.1127936109267593), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 11sRunning iteration 1021/1500... Est. remaining: 4m 6sRunning iteration 1031/1500... Est. remaining: 4m 1sRunning iteration 1041/1500... Est. remaining: 3m 56sRunning iteration 1051/1500... Est. remaining: 3m 51sRunning iteration 1061/1500... Est. remaining: 3m 46sRunning iteration 1071/1500... Est. remaining: 3m 40sRunning iteration 1081/1500... Est. remaining: 3m 35sRunning iteration 1091/1500... Est. remaining: 3m 30sRunning iteration 1101/1500... Est. remaining: 3m 25sbest_combination: {'lookbacks': [139, 157, 178], 'score': np.float64(1.1127936109267593), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 20sRunning iteration 1121/1500... Est. remaining: 3m 15sRunning iteration 1131/1500... Est. remaining: 3m 9sRunning iteration 1141/1500... Est. remaining: 3m 4sRunning iteration 1151/1500... Est. remaining: 2m 59sRunning iteration 1161/1500... Est. remaining: 2m 54sRunning iteration 1171/1500... Est. remaining: 2m 49sRunning iteration 1181/1500... Est. remaining: 2m 44sRunning iteration 1191/1500... Est. remaining: 2m 39sRunning iteration 1201/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [139, 157, 178], 'score': np.float64(1.1127936109267593), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 28sRunning iteration 1221/1500... Est. remaining: 2m 23sRunning iteration 1231/1500... Est. remaining: 2m 18sRunning iteration 1241/1500... Est. remaining: 2m 13sRunning iteration 1251/1500... Est. remaining: 2m 8sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 57sRunning iteration 1281/1500... Est. remaining: 1m 52sRunning iteration 1291/1500... Est. remaining: 1m 47sRunning iteration 1301/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [139, 157, 178], 'score': np.float64(1.1127936109267593), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 16sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [139, 157, 178], 'score': np.float64(1.1127936109267593), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 1.11
best_combination: {'lookbacks': [139, 157, 178], 'score': np.float64(1.1127936109267593), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 157, 178] (score: 1.1128)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 157, 178] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pi: 75 selections (18.0%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 43 selections (10.3%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,657,902,267.39
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Mon Aug 25 17:03:06 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,514,223,775
Annual Return: 41.08%
Sharpe Ratio: 1.38190
Sortino Ratio: 1.324
Max Drawdown: -58.7%
Avg Drawdown: -13.2%
Normalized Score: -0.381
Lookback periods: [118, 133, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,076,601,828
Annual Return: 39.70%
Sharpe Ratio: 1.38144
Sortino Ratio: 1.300
Max Drawdown: -54.1%
Avg Drawdown: -13.2%
Normalized Score: -0.320
Lookback periods: [89, 96, 114] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,471,070,576
Annual Return: 46.41%
Sharpe Ratio: 1.51990
Sortino Ratio: 1.484
Max Drawdown: -63.5%
Avg Drawdown: -12.8%
Normalized Score: 0.107
Lookback periods: [130, 153, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,036,822,324
Annual Return: 46.06%
Sharpe Ratio: 1.51222
Sortino Ratio: 1.467
Max Drawdown: -57.9%
Avg Drawdown: -11.6%
Normalized Score: 0.368
Lookback periods: [147, 158, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 26sRunning iteration 31/1500... Est. remaining: 18m 55sRunning iteration 41/1500... Est. remaining: 17m 2sRunning iteration 51/1500... Est. remaining: 15m 52sRunning iteration 61/1500... Est. remaining: 15m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,118,528,243
Annual Return: 46.13%
Sharpe Ratio: 1.51229
Sortino Ratio: 1.468
Max Drawdown: -55.0%
Avg Drawdown: -12.4%
Normalized Score: 0.382
Lookback periods: [147, 157, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 3sRunning iteration 81/1500... Est. remaining: 14m 31sRunning iteration 91/1500... Est. remaining: 14m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,649,694,866
Annual Return: 46.54%
Sharpe Ratio: 1.53879
Sortino Ratio: 1.496
Max Drawdown: -55.0%
Avg Drawdown: -12.4%
Normalized Score: 0.473
Lookback periods: [128, 132, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 14m 4sbest_combination: {'lookbacks': [128, 132, 136], 'score': np.float64(0.47333249128623744), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 48sRunning iteration 121/1500... Est. remaining: 13m 31sRunning iteration 131/1500... Est. remaining: 13m 17sRunning iteration 141/1500... Est. remaining: 13m 3sRunning iteration 151/1500... Est. remaining: 12m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,084,226,140
Annual Return: 39.73%
Sharpe Ratio: 1.43300
Sortino Ratio: 1.332
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 0.823
Lookback periods: [50, 58, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 12m 51sRunning iteration 171/1500... Est. remaining: 12m 39sRunning iteration 181/1500... Est. remaining: 12m 29sRunning iteration 191/1500... Est. remaining: 12m 19sRunning iteration 201/1500... Est. remaining: 12m 10sbest_combination: {'lookbacks': [50, 58, 84], 'score': np.float64(0.8229285720868633), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 1sRunning iteration 221/1500... Est. remaining: 11m 52sRunning iteration 231/1500... Est. remaining: 11m 44sRunning iteration 241/1500... Est. remaining: 11m 36sRunning iteration 251/1500... Est. remaining: 11m 28sRunning iteration 261/1500... Est. remaining: 11m 21sRunning iteration 271/1500... Est. remaining: 11m 13sRunning iteration 281/1500... Est. remaining: 11m 6sRunning iteration 291/1500... Est. remaining: 10m 59sRunning iteration 301/1500... Est. remaining: 10m 52sbest_combination: {'lookbacks': [50, 58, 84], 'score': np.float64(0.8229285720868633), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 45sRunning iteration 321/1500... Est. remaining: 10m 38sRunning iteration 331/1500... Est. remaining: 10m 32sRunning iteration 341/1500... Est. remaining: 10m 26sRunning iteration 351/1500... Est. remaining: 10m 20sRunning iteration 361/1500... Est. remaining: 10m 14sRunning iteration 371/1500... Est. remaining: 10m 8sRunning iteration 381/1500... Est. remaining: 17m 17sRunning iteration 391/1500... Est. remaining: 16m 56sRunning iteration 401/1500... Est. remaining: 21m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,336,249,694
Annual Return: 40.57%
Sharpe Ratio: 1.46593
Sortino Ratio: 1.358
Max Drawdown: -34.7%
Avg Drawdown: -9.9%
Normalized Score: 0.888
Lookback periods: [50, 57, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [50, 57, 85], 'score': np.float64(0.8875833299690452), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,779,940,917
Annual Return: 43.57%
Sharpe Ratio: 1.56839
Sortino Ratio: 1.467
Max Drawdown: -37.2%
Avg Drawdown: -9.3%
Normalized Score: 1.275
Lookback periods: [50, 52, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 21m 33sRunning iteration 421/1500... Est. remaining: 21m 4sRunning iteration 431/1500... Est. remaining: 20m 35sRunning iteration 441/1500... Est. remaining: 20m 8sRunning iteration 451/1500... Est. remaining: 19m 42sRunning iteration 461/1500... Est. remaining: 19m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,706,662,664
Annual Return: 43.46%
Sharpe Ratio: 1.54505
Sortino Ratio: 1.456
Max Drawdown: -35.6%
Avg Drawdown: -9.1%
Normalized Score: 1.295
Lookback periods: [50, 53, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 18m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.839
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 18m 34sRunning iteration 491/1500... Est. remaining: 18m 11sRunning iteration 501/1500... Est. remaining: 17m 48sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8387908018774302), 'visits': 1}
Running iteration 511/1500... Est. remaining: 17m 27sRunning iteration 521/1500... Est. remaining: 17m 6sRunning iteration 531/1500... Est. remaining: 16m 45sRunning iteration 541/1500... Est. remaining: 16m 25sRunning iteration 551/1500... Est. remaining: 16m 6sRunning iteration 561/1500... Est. remaining: 15m 47sRunning iteration 571/1500... Est. remaining: 15m 29sRunning iteration 581/1500... Est. remaining: 15m 11sRunning iteration 591/1500... Est. remaining: 14m 54sRunning iteration 601/1500... Est. remaining: 14m 37sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8387908018774302), 'visits': 1}
Running iteration 611/1500... Est. remaining: 14m 20sRunning iteration 621/1500... Est. remaining: 14m 4sRunning iteration 631/1500... Est. remaining: 13m 48sRunning iteration 641/1500... Est. remaining: 13m 32sRunning iteration 651/1500... Est. remaining: 13m 17sRunning iteration 661/1500... Est. remaining: 13m 2sRunning iteration 671/1500... Est. remaining: 12m 48sRunning iteration 681/1500... Est. remaining: 12m 33sRunning iteration 691/1500... Est. remaining: 12m 20sRunning iteration 701/1500... Est. remaining: 12m 6sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8387908018774302), 'visits': 1}
Running iteration 711/1500... Est. remaining: 11m 52sRunning iteration 721/1500... Est. remaining: 11m 39sRunning iteration 731/1500... Est. remaining: 11m 26sRunning iteration 741/1500... Est. remaining: 11m 13sRunning iteration 751/1500... Est. remaining: 11m 0sRunning iteration 761/1500... Est. remaining: 10m 48sRunning iteration 771/1500... Est. remaining: 10m 36sRunning iteration 781/1500... Est. remaining: 10m 24sRunning iteration 791/1500... Est. remaining: 10m 12sRunning iteration 801/1500... Est. remaining: 10m 0sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8387908018774302), 'visits': 1}
Running iteration 811/1500... Est. remaining: 9m 48sRunning iteration 821/1500... Est. remaining: 9m 37sRunning iteration 831/1500... Est. remaining: 9m 26sRunning iteration 841/1500... Est. remaining: 9m 14sRunning iteration 851/1500... Est. remaining: 9m 3sRunning iteration 861/1500... Est. remaining: 8m 53sRunning iteration 871/1500... Est. remaining: 8m 42sRunning iteration 881/1500... Est. remaining: 8m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.887
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 8m 22sRunning iteration 901/1500... Est. remaining: 8m 11sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8872866469530176), 'visits': 1}
Running iteration 911/1500... Est. remaining: 8m 1sRunning iteration 921/1500... Est. remaining: 7m 51sRunning iteration 931/1500... Est. remaining: 7m 41sRunning iteration 941/1500... Est. remaining: 7m 31sRunning iteration 951/1500... Est. remaining: 7m 21sRunning iteration 961/1500... Est. remaining: 7m 11sRunning iteration 971/1500... Est. remaining: 7m 2sRunning iteration 981/1500... Est. remaining: 6m 52sRunning iteration 991/1500... Est. remaining: 6m 43sRunning iteration 1001/1500... Est. remaining: 6m 34sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8872866469530176), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 6m 25sRunning iteration 1021/1500... Est. remaining: 6m 16sRunning iteration 1031/1500... Est. remaining: 6m 7sRunning iteration 1041/1500... Est. remaining: 5m 58sRunning iteration 1051/1500... Est. remaining: 5m 49sRunning iteration 1061/1500... Est. remaining: 5m 40sRunning iteration 1071/1500... Est. remaining: 5m 31sRunning iteration 1081/1500... Est. remaining: 5m 22sRunning iteration 1091/1500... Est. remaining: 5m 13sRunning iteration 1101/1500... Est. remaining: 5m 5sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8872866469530176), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 56sRunning iteration 1121/1500... Est. remaining: 4m 48sRunning iteration 1131/1500... Est. remaining: 4m 39sRunning iteration 1141/1500... Est. remaining: 4m 31sRunning iteration 1151/1500... Est. remaining: 4m 23sRunning iteration 1161/1500... Est. remaining: 4m 15sRunning iteration 1171/1500... Est. remaining: 4m 6sRunning iteration 1181/1500... Est. remaining: 3m 58sRunning iteration 1191/1500... Est. remaining: 3m 50sRunning iteration 1201/1500... Est. remaining: 3m 42sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8872866469530176), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 34sRunning iteration 1221/1500... Est. remaining: 3m 26sRunning iteration 1231/1500... Est. remaining: 3m 18sRunning iteration 1241/1500... Est. remaining: 3m 10sRunning iteration 1251/1500... Est. remaining: 3m 3sRunning iteration 1261/1500... Est. remaining: 2m 55sRunning iteration 1271/1500... Est. remaining: 2m 47sRunning iteration 1281/1500... Est. remaining: 2m 39sRunning iteration 1291/1500... Est. remaining: 2m 32sRunning iteration 1301/1500... Est. remaining: 2m 24sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8872866469530176), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 17sRunning iteration 1321/1500... Est. remaining: 2m 9sRunning iteration 1331/1500... Est. remaining: 2m 2sRunning iteration 1341/1500... Est. remaining: 1m 54sRunning iteration 1351/1500... Est. remaining: 1m 47sRunning iteration 1361/1500... Est. remaining: 1m 39sRunning iteration 1371/1500... Est. remaining: 1m 32sRunning iteration 1381/1500... Est. remaining: 1m 25sRunning iteration 1391/1500... Est. remaining: 1m 18sRunning iteration 1401/1500... Est. remaining: 1m 10sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8872866469530176), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 3sRunning iteration 1421/1500... Est. remaining: 0m 56sRunning iteration 1431/1500... Est. remaining: 0m 49sRunning iteration 1441/1500... Est. remaining: 0m 42sRunning iteration 1451/1500... Est. remaining: 0m 35sRunning iteration 1461/1500... Est. remaining: 0m 27sRunning iteration 1471/1500... Est. remaining: 0m 20sRunning iteration 1481/1500... Est. remaining: 0m 13sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 17.4 minutes
Best normalized score: 1.89
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8872866469530176), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 1.8873)

Monte Carlo simulation completed in 17.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Mon Aug 25 17:20:35 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $182,126,675
Annual Return: 32.72%
Sharpe Ratio: 1.15570
Sortino Ratio: 1.051
Max Drawdown: -62.2%
Avg Drawdown: -13.6%
Normalized Score: -1.478
Lookback periods: [53, 83, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $168,669,623
Annual Return: 32.42%
Sharpe Ratio: 1.14959
Sortino Ratio: 1.047
Max Drawdown: -52.3%
Avg Drawdown: -12.1%
Normalized Score: -1.016
Lookback periods: [53, 82, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $878,537,346
Annual Return: 38.88%
Sharpe Ratio: 1.35224
Sortino Ratio: 1.252
Max Drawdown: -55.0%
Avg Drawdown: -12.4%
Normalized Score: -0.341
Lookback periods: [52, 133, 141] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $598,765,856
Annual Return: 37.35%
Sharpe Ratio: 1.29648
Sortino Ratio: 1.216
Max Drawdown: -52.3%
Avg Drawdown: -10.5%
Normalized Score: -0.238
Lookback periods: [81, 108, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 32m 7sRunning iteration 21/1500... Est. remaining: 22m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,901,881,798
Annual Return: 47.39%
Sharpe Ratio: 1.53423
Sortino Ratio: 1.489
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.506
Lookback periods: [179, 189, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 45sRunning iteration 41/1500... Est. remaining: 17m 49sRunning iteration 51/1500... Est. remaining: 16m 35sRunning iteration 61/1500... Est. remaining: 15m 44sRunning iteration 71/1500... Est. remaining: 15m 6sRunning iteration 81/1500... Est. remaining: 14m 38sRunning iteration 91/1500... Est. remaining: 14m 15sRunning iteration 101/1500... Est. remaining: 13m 57sbest_combination: {'lookbacks': [179, 189, 200], 'score': np.float64(0.5058290051736724), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,809,499,649
Annual Return: 47.33%
Sharpe Ratio: 1.56151
Sortino Ratio: 1.509
Max Drawdown: -57.2%
Avg Drawdown: -12.1%
Normalized Score: 0.573
Lookback periods: [138, 156, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 13m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,206,285,258
Annual Return: 47.57%
Sharpe Ratio: 1.55613
Sortino Ratio: 1.510
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: 0.750
Lookback periods: [157, 159, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 55sRunning iteration 131/1500... Est. remaining: 13m 40sRunning iteration 141/1500... Est. remaining: 13m 26sRunning iteration 151/1500... Est. remaining: 13m 13sRunning iteration 161/1500... Est. remaining: 13m 0sRunning iteration 171/1500... Est. remaining: 12m 49sRunning iteration 181/1500... Est. remaining: 12m 38sRunning iteration 191/1500... Est. remaining: 12m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,819,321,576
Annual Return: 41.83%
Sharpe Ratio: 1.54653
Sortino Ratio: 1.440
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.400
Lookback periods: [50, 58, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 12m 27sbest_combination: {'lookbacks': [50, 58, 98], 'score': np.float64(1.4002810317905021), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 18sRunning iteration 221/1500... Est. remaining: 12m 9sRunning iteration 231/1500... Est. remaining: 12m 0sRunning iteration 241/1500... Est. remaining: 11m 51sRunning iteration 251/1500... Est. remaining: 11m 43sRunning iteration 261/1500... Est. remaining: 11m 35sRunning iteration 271/1500... Est. remaining: 11m 27sRunning iteration 281/1500... Est. remaining: 11m 19sRunning iteration 291/1500... Est. remaining: 11m 11sRunning iteration 301/1500... Est. remaining: 11m 4sbest_combination: {'lookbacks': [50, 58, 98], 'score': np.float64(1.4002810317905021), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 57sRunning iteration 321/1500... Est. remaining: 10m 49sRunning iteration 331/1500... Est. remaining: 10m 43sRunning iteration 341/1500... Est. remaining: 10m 36sRunning iteration 351/1500... Est. remaining: 10m 29sRunning iteration 361/1500... Est. remaining: 10m 22sRunning iteration 371/1500... Est. remaining: 10m 16sRunning iteration 381/1500... Est. remaining: 10m 9sRunning iteration 391/1500... Est. remaining: 10m 3sRunning iteration 401/1500... Est. remaining: 9m 56sbest_combination: {'lookbacks': [50, 58, 98], 'score': np.float64(1.4002810317905021), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 50sRunning iteration 421/1500... Est. remaining: 9m 44sRunning iteration 431/1500... Est. remaining: 9m 37sRunning iteration 441/1500... Est. remaining: 9m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,159,076,333
Annual Return: 42.53%
Sharpe Ratio: 1.53430
Sortino Ratio: 1.444
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.402
Lookback periods: [50, 62, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 28sRunning iteration 461/1500... Est. remaining: 9m 22sRunning iteration 471/1500... Est. remaining: 9m 16sRunning iteration 481/1500... Est. remaining: 9m 10sRunning iteration 491/1500... Est. remaining: 9m 4sRunning iteration 501/1500... Est. remaining: 8m 58sbest_combination: {'lookbacks': [50, 62, 97], 'score': np.float64(1.4021977612123724), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 52sRunning iteration 521/1500... Est. remaining: 8m 46sRunning iteration 531/1500... Est. remaining: 8m 40sRunning iteration 541/1500... Est. remaining: 8m 34sRunning iteration 551/1500... Est. remaining: 8m 28sRunning iteration 561/1500... Est. remaining: 8m 22sRunning iteration 571/1500... Est. remaining: 8m 16sRunning iteration 581/1500... Est. remaining: 8m 11sRunning iteration 591/1500... Est. remaining: 8m 5sRunning iteration 601/1500... Est. remaining: 7m 59sbest_combination: {'lookbacks': [50, 62, 97], 'score': np.float64(1.4021977612123724), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 54sRunning iteration 621/1500... Est. remaining: 7m 48sRunning iteration 631/1500... Est. remaining: 7m 42sRunning iteration 641/1500... Est. remaining: 7m 37sRunning iteration 651/1500... Est. remaining: 7m 31sRunning iteration 661/1500... Est. remaining: 7m 25sRunning iteration 671/1500... Est. remaining: 7m 20sRunning iteration 681/1500... Est. remaining: 7m 14sRunning iteration 691/1500... Est. remaining: 7m 8sRunning iteration 701/1500... Est. remaining: 7m 3sbest_combination: {'lookbacks': [50, 62, 97], 'score': np.float64(1.4021977612123724), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 57sRunning iteration 721/1500... Est. remaining: 6m 52sRunning iteration 731/1500... Est. remaining: 6m 46sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 35sRunning iteration 761/1500... Est. remaining: 6m 30sRunning iteration 771/1500... Est. remaining: 6m 24sRunning iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 13sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [50, 62, 97], 'score': np.float64(1.4021977612123724), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 46sRunning iteration 851/1500... Est. remaining: 5m 41sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 30sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 19sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [50, 62, 97], 'score': np.float64(1.4021977612123724), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 3sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 47sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 31sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [50, 62, 97], 'score': np.float64(1.4021977612123724), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,315,445,915
Annual Return: 42.82%
Sharpe Ratio: 1.55820
Sortino Ratio: 1.459
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.455
Lookback periods: [50, 57, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,237,925,818
Annual Return: 44.21%
Sharpe Ratio: 1.56725
Sortino Ratio: 1.490
Max Drawdown: -34.9%
Avg Drawdown: -8.9%
Normalized Score: 1.509
Lookback periods: [52, 53, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1061/1500... Est. remaining: 3m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,833,624,762
Annual Return: 43.65%
Sharpe Ratio: 1.57405
Sortino Ratio: 1.478
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.598
Lookback periods: [50, 50, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1071/1500... Est. remaining: 3m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.717
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.7171546691603499), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.748
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.7475257249042655), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.902
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9021400841740808), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9021400841740808), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.90
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9021400841740808), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9021)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Mon Aug 25 17:33:45 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $675,866,670
Annual Return: 37.83%
Sharpe Ratio: 1.32519
Sortino Ratio: 1.222
Max Drawdown: -63.9%
Avg Drawdown: -13.2%
Normalized Score: -1.252
Lookback periods: [56, 100, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $824,634,157
Annual Return: 38.63%
Sharpe Ratio: 1.33517
Sortino Ratio: 1.257
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: -0.364
Lookback periods: [80, 137, 142] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,891,991,311
Annual Return: 44.97%
Sharpe Ratio: 1.46505
Sortino Ratio: 1.432
Max Drawdown: -59.9%
Avg Drawdown: -12.0%
Normalized Score: -0.146
Lookback periods: [151, 192, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 5sRunning iteration 21/1500... Est. remaining: 20m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,269,508,567
Annual Return: 40.36%
Sharpe Ratio: 1.44351
Sortino Ratio: 1.336
Max Drawdown: -38.3%
Avg Drawdown: -10.3%
Normalized Score: 0.597
Lookback periods: [51, 53, 76] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 38sRunning iteration 41/1500... Est. remaining: 16m 58sRunning iteration 51/1500... Est. remaining: 15m 49sRunning iteration 61/1500... Est. remaining: 15m 3sRunning iteration 71/1500... Est. remaining: 14m 30sRunning iteration 81/1500... Est. remaining: 14m 3sRunning iteration 91/1500... Est. remaining: 13m 43sRunning iteration 101/1500... Est. remaining: 13m 27sbest_combination: {'lookbacks': [51, 53, 76], 'score': np.float64(0.5966735101955538), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 13sRunning iteration 121/1500... Est. remaining: 13m 0sRunning iteration 131/1500... Est. remaining: 12m 49sRunning iteration 141/1500... Est. remaining: 12m 38sRunning iteration 151/1500... Est. remaining: 12m 28sRunning iteration 161/1500... Est. remaining: 12m 19sRunning iteration 171/1500... Est. remaining: 12m 10sRunning iteration 181/1500... Est. remaining: 12m 1sRunning iteration 191/1500... Est. remaining: 11m 53sRunning iteration 201/1500... Est. remaining: 11m 45sbest_combination: {'lookbacks': [51, 53, 76], 'score': np.float64(0.5966735101955538), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 38sRunning iteration 221/1500... Est. remaining: 11m 31sRunning iteration 231/1500... Est. remaining: 11m 23sRunning iteration 241/1500... Est. remaining: 11m 17sRunning iteration 251/1500... Est. remaining: 11m 10sRunning iteration 261/1500... Est. remaining: 11m 4sRunning iteration 271/1500... Est. remaining: 10m 58sRunning iteration 281/1500... Est. remaining: 10m 51sRunning iteration 291/1500... Est. remaining: 10m 45sRunning iteration 301/1500... Est. remaining: 10m 38sbest_combination: {'lookbacks': [51, 53, 76], 'score': np.float64(0.5966735101955538), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 32sRunning iteration 321/1500... Est. remaining: 10m 26sRunning iteration 331/1500... Est. remaining: 10m 20sRunning iteration 341/1500... Est. remaining: 10m 14sRunning iteration 351/1500... Est. remaining: 10m 7sRunning iteration 361/1500... Est. remaining: 10m 2sRunning iteration 371/1500... Est. remaining: 9m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,611,652,436
Annual Return: 41.33%
Sharpe Ratio: 1.47171
Sortino Ratio: 1.370
Max Drawdown: -36.9%
Avg Drawdown: -9.7%
Normalized Score: 0.862
Lookback periods: [50, 54, 78] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 9m 53sRunning iteration 391/1500... Est. remaining: 9m 47sRunning iteration 401/1500... Est. remaining: 9m 41sbest_combination: {'lookbacks': [50, 54, 78], 'score': np.float64(0.8623581883367255), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 35sRunning iteration 421/1500... Est. remaining: 9m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,616,046,731
Annual Return: 41.34%
Sharpe Ratio: 1.48168
Sortino Ratio: 1.374
Max Drawdown: -35.7%
Avg Drawdown: -9.8%
Normalized Score: 0.923
Lookback periods: [51, 52, 78] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 9m 27sRunning iteration 441/1500... Est. remaining: 9m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,194,696,065
Annual Return: 42.60%
Sharpe Ratio: 1.52901
Sortino Ratio: 1.429
Max Drawdown: -35.6%
Avg Drawdown: -9.2%
Normalized Score: 1.194
Lookback periods: [50, 52, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 18sRunning iteration 461/1500... Est. remaining: 9m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,778,317,395
Annual Return: 41.74%
Sharpe Ratio: 1.51109
Sortino Ratio: 1.412
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.241
Lookback periods: [50, 50, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 9m 9sRunning iteration 481/1500... Est. remaining: 9m 3sRunning iteration 491/1500... Est. remaining: 8m 57sRunning iteration 501/1500... Est. remaining: 8m 51sbest_combination: {'lookbacks': [50, 50, 84], 'score': np.float64(1.2405265310288054), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,109,906,920
Annual Return: 44.04%
Sharpe Ratio: 1.57266
Sortino Ratio: 1.479
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.351
Lookback periods: [50, 53, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 42sRunning iteration 531/1500... Est. remaining: 8m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.877
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 8m 32sRunning iteration 551/1500... Est. remaining: 8m 27sRunning iteration 561/1500... Est. remaining: 8m 21sRunning iteration 571/1500... Est. remaining: 8m 15sRunning iteration 581/1500... Est. remaining: 8m 9sRunning iteration 591/1500... Est. remaining: 8m 3sRunning iteration 601/1500... Est. remaining: 7m 58sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8773765080477118), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 52sRunning iteration 621/1500... Est. remaining: 7m 46sRunning iteration 631/1500... Est. remaining: 7m 41sRunning iteration 641/1500... Est. remaining: 7m 35sRunning iteration 651/1500... Est. remaining: 7m 29sRunning iteration 661/1500... Est. remaining: 7m 24sRunning iteration 671/1500... Est. remaining: 7m 18sRunning iteration 681/1500... Est. remaining: 7m 13sRunning iteration 691/1500... Est. remaining: 7m 7sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8773765080477118), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 56sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 45sRunning iteration 741/1500... Est. remaining: 6m 39sRunning iteration 751/1500... Est. remaining: 6m 34sRunning iteration 761/1500... Est. remaining: 6m 28sRunning iteration 771/1500... Est. remaining: 6m 23sRunning iteration 781/1500... Est. remaining: 6m 18sRunning iteration 791/1500... Est. remaining: 6m 12sRunning iteration 801/1500... Est. remaining: 6m 7sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8773765080477118), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 1sRunning iteration 821/1500... Est. remaining: 5m 56sRunning iteration 831/1500... Est. remaining: 5m 50sRunning iteration 841/1500... Est. remaining: 5m 45sRunning iteration 851/1500... Est. remaining: 5m 40sRunning iteration 861/1500... Est. remaining: 5m 34sRunning iteration 871/1500... Est. remaining: 5m 29sRunning iteration 881/1500... Est. remaining: 5m 23sRunning iteration 891/1500... Est. remaining: 5m 18sRunning iteration 901/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8773765080477118), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 7sRunning iteration 921/1500... Est. remaining: 5m 2sRunning iteration 931/1500... Est. remaining: 4m 57sRunning iteration 941/1500... Est. remaining: 4m 51sRunning iteration 951/1500... Est. remaining: 4m 46sRunning iteration 961/1500... Est. remaining: 4m 41sRunning iteration 971/1500... Est. remaining: 4m 35sRunning iteration 981/1500... Est. remaining: 4m 30sRunning iteration 991/1500... Est. remaining: 4m 25sRunning iteration 1001/1500... Est. remaining: 4m 19sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8773765080477118), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 14sRunning iteration 1021/1500... Est. remaining: 4m 9sRunning iteration 1031/1500... Est. remaining: 4m 4sRunning iteration 1041/1500... Est. remaining: 3m 58sRunning iteration 1051/1500... Est. remaining: 3m 53sRunning iteration 1061/1500... Est. remaining: 3m 48sRunning iteration 1071/1500... Est. remaining: 3m 43sRunning iteration 1081/1500... Est. remaining: 3m 37sRunning iteration 1091/1500... Est. remaining: 3m 32sRunning iteration 1101/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8773765080477118), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 22sRunning iteration 1121/1500... Est. remaining: 3m 16sRunning iteration 1131/1500... Est. remaining: 3m 11sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 55sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8773765080477118), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8773765080477118), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8773765080477118), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 1.88
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8773765080477118), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.8774)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 17:46:44 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $352,054,647
Annual Return: 35.26%
Sharpe Ratio: 1.25797
Sortino Ratio: 1.150
Max Drawdown: -52.3%
Avg Drawdown: -11.4%
Normalized Score: -1.276
Lookback periods: [48, 91, 141] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,218,510,913
Annual Return: 40.20%
Sharpe Ratio: 1.36606
Sortino Ratio: 1.297
Max Drawdown: -59.9%
Avg Drawdown: -13.2%
Normalized Score: -0.936
Lookback periods: [90, 139, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $767,822,873
Annual Return: 38.34%
Sharpe Ratio: 1.31175
Sortino Ratio: 1.230
Max Drawdown: -52.3%
Avg Drawdown: -12.0%
Normalized Score: -0.846
Lookback periods: [81, 111, 140] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,609,609,624
Annual Return: 44.66%
Sharpe Ratio: 1.45143
Sortino Ratio: 1.408
Max Drawdown: -64.8%
Avg Drawdown: -12.4%
Normalized Score: -0.337
Lookback periods: [174, 188, 240] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 29sRunning iteration 31/1500... Est. remaining: 18m 27sRunning iteration 41/1500... Est. remaining: 16m 53sRunning iteration 51/1500... Est. remaining: 15m 54sRunning iteration 61/1500... Est. remaining: 15m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $802,690,008
Annual Return: 38.52%
Sharpe Ratio: 1.40653
Sortino Ratio: 1.299
Max Drawdown: -44.8%
Avg Drawdown: -11.7%
Normalized Score: -0.287
Lookback periods: [26, 90, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,565,168,180
Annual Return: 44.61%
Sharpe Ratio: 1.45188
Sortino Ratio: 1.409
Max Drawdown: -61.8%
Avg Drawdown: -12.6%
Normalized Score: -0.242
Lookback periods: [143, 193, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 14m 52sRunning iteration 91/1500... Est. remaining: 14m 27sRunning iteration 101/1500... Est. remaining: 14m 7sbest_combination: {'lookbacks': [143, 193, 201], 'score': np.float64(-0.24153875386512028), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,464,103,976
Annual Return: 44.49%
Sharpe Ratio: 1.48083
Sortino Ratio: 1.432
Max Drawdown: -61.2%
Avg Drawdown: -11.9%
Normalized Score: -0.089
Lookback periods: [127, 140, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 4sRunning iteration 121/1500... Est. remaining: 13m 47sRunning iteration 131/1500... Est. remaining: 13m 32sRunning iteration 141/1500... Est. remaining: 13m 19sRunning iteration 151/1500... Est. remaining: 13m 6sRunning iteration 161/1500... Est. remaining: 12m 55sRunning iteration 171/1500... Est. remaining: 12m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,142,277,735
Annual Return: 48.10%
Sharpe Ratio: 1.57050
Sortino Ratio: 1.538
Max Drawdown: -58.5%
Avg Drawdown: -11.8%
Normalized Score: 0.651
Lookback periods: [138, 155, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/1500... Est. remaining: 12m 42sRunning iteration 191/1500... Est. remaining: 12m 34sRunning iteration 201/1500... Est. remaining: 12m 24sbest_combination: {'lookbacks': [138, 155, 174], 'score': np.float64(0.6507136137596969), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 14sRunning iteration 221/1500... Est. remaining: 12m 5sRunning iteration 231/1500... Est. remaining: 11m 56sRunning iteration 241/1500... Est. remaining: 11m 48sRunning iteration 251/1500... Est. remaining: 11m 40sRunning iteration 261/1500... Est. remaining: 11m 32sRunning iteration 271/1500... Est. remaining: 11m 24sRunning iteration 281/1500... Est. remaining: 11m 17sRunning iteration 291/1500... Est. remaining: 11m 10sRunning iteration 301/1500... Est. remaining: 11m 2sbest_combination: {'lookbacks': [138, 155, 174], 'score': np.float64(0.6507136137596969), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 55sRunning iteration 321/1500... Est. remaining: 10m 48sRunning iteration 331/1500... Est. remaining: 10m 41sRunning iteration 341/1500... Est. remaining: 10m 34sRunning iteration 351/1500... Est. remaining: 10m 28sRunning iteration 361/1500... Est. remaining: 10m 21sRunning iteration 371/1500... Est. remaining: 10m 15sRunning iteration 381/1500... Est. remaining: 10m 8sRunning iteration 391/1500... Est. remaining: 10m 2sRunning iteration 401/1500... Est. remaining: 9m 56sbest_combination: {'lookbacks': [138, 155, 174], 'score': np.float64(0.6507136137596969), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 49sRunning iteration 421/1500... Est. remaining: 9m 43sRunning iteration 431/1500... Est. remaining: 9m 37sRunning iteration 441/1500... Est. remaining: 9m 31sRunning iteration 451/1500... Est. remaining: 9m 25sRunning iteration 461/1500... Est. remaining: 9m 19sRunning iteration 471/1500... Est. remaining: 9m 13sRunning iteration 481/1500... Est. remaining: 9m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,921,078,973
Annual Return: 48.94%
Sharpe Ratio: 1.59300
Sortino Ratio: 1.555
Max Drawdown: -59.6%
Avg Drawdown: -11.6%
Normalized Score: 0.769
Lookback periods: [146, 157, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 9m 4sRunning iteration 501/1500... Est. remaining: 8m 58sbest_combination: {'lookbacks': [146, 157, 189], 'score': np.float64(0.7692156969713317), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 52sRunning iteration 521/1500... Est. remaining: 8m 46sRunning iteration 531/1500... Est. remaining: 8m 40sRunning iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 29sRunning iteration 561/1500... Est. remaining: 8m 23sRunning iteration 571/1500... Est. remaining: 8m 17sRunning iteration 581/1500... Est. remaining: 8m 12sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 0sbest_combination: {'lookbacks': [146, 157, 189], 'score': np.float64(0.7692156969713317), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 54sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 43sRunning iteration 641/1500... Est. remaining: 7m 37sRunning iteration 651/1500... Est. remaining: 7m 32sRunning iteration 661/1500... Est. remaining: 7m 26sRunning iteration 671/1500... Est. remaining: 7m 21sRunning iteration 681/1500... Est. remaining: 7m 15sRunning iteration 691/1500... Est. remaining: 7m 10sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [146, 157, 189], 'score': np.float64(0.7692156969713317), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 58sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 47sRunning iteration 741/1500... Est. remaining: 6m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,483,818,570
Annual Return: 48.27%
Sharpe Ratio: 1.57982
Sortino Ratio: 1.538
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.817
Lookback periods: [139, 157, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 6m 38sRunning iteration 761/1500... Est. remaining: 6m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,127,404,353
Annual Return: 49.44%
Sharpe Ratio: 1.62901
Sortino Ratio: 1.584
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 1.075
Lookback periods: [136, 157, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 771/1500... Est. remaining: 6m 28sRunning iteration 781/1500... Est. remaining: 6m 22sRunning iteration 791/1500... Est. remaining: 6m 17sRunning iteration 801/1500... Est. remaining: 6m 11sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0747422895381444), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 6sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 55sRunning iteration 841/1500... Est. remaining: 5m 50sRunning iteration 851/1500... Est. remaining: 5m 44sRunning iteration 861/1500... Est. remaining: 5m 39sRunning iteration 871/1500... Est. remaining: 5m 33sRunning iteration 881/1500... Est. remaining: 5m 28sRunning iteration 891/1500... Est. remaining: 5m 22sRunning iteration 901/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0747422895381444), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 11sRunning iteration 921/1500... Est. remaining: 5m 6sRunning iteration 931/1500... Est. remaining: 5m 1sRunning iteration 941/1500... Est. remaining: 4m 55sRunning iteration 951/1500... Est. remaining: 4m 50sRunning iteration 961/1500... Est. remaining: 4m 45sRunning iteration 971/1500... Est. remaining: 4m 39sRunning iteration 981/1500... Est. remaining: 4m 34sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0747422895381444), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 18sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0747422895381444), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0747422895381444), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0747422895381444), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0747422895381444), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.07
best_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0747422895381444), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 157, 179] (score: 1.0747)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 157, 179] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 41 selections (9.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,127,404,352.86
Average Annualized Gain: 49.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 17:59:58 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $120,101,304
Annual Return: 31.13%
Sharpe Ratio: 1.10433
Sortino Ratio: 1.002
Max Drawdown: -63.3%
Avg Drawdown: -14.3%
Normalized Score: -1.916
Lookback periods: [55, 69, 213] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,422,356,633
Annual Return: 40.82%
Sharpe Ratio: 1.35600
Sortino Ratio: 1.297
Max Drawdown: -66.4%
Avg Drawdown: -13.1%
Normalized Score: -0.692
Lookback periods: [280, 287, 298] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,423,620,670
Annual Return: 40.83%
Sharpe Ratio: 1.34433
Sortino Ratio: 1.290
Max Drawdown: -64.1%
Avg Drawdown: -13.1%
Normalized Score: -0.646
Lookback periods: [186, 234, 300] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $183,636,288
Annual Return: 32.75%
Sharpe Ratio: 1.20214
Sortino Ratio: 1.080
Max Drawdown: -41.9%
Avg Drawdown: -10.2%
Normalized Score: -0.486
Lookback periods: [33, 50, 230] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,848,958,936
Annual Return: 41.89%
Sharpe Ratio: 1.37607
Sortino Ratio: 1.332
Max Drawdown: -62.6%
Avg Drawdown: -12.5%
Normalized Score: -0.386
Lookback periods: [185, 236, 270] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 55sRunning iteration 31/1500... Est. remaining: 20m 2sRunning iteration 41/1500... Est. remaining: 18m 0sRunning iteration 51/1500... Est. remaining: 16m 40sRunning iteration 61/1500... Est. remaining: 15m 48sRunning iteration 71/1500... Est. remaining: 15m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,364,906,555
Annual Return: 42.91%
Sharpe Ratio: 1.41221
Sortino Ratio: 1.350
Max Drawdown: -59.0%
Avg Drawdown: -12.3%
Normalized Score: -0.141
Lookback periods: [189, 189, 257] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 15m 4sRunning iteration 91/1500... Est. remaining: 14m 41sRunning iteration 101/1500... Est. remaining: 14m 19sbest_combination: {'lookbacks': [189, 189, 257], 'score': np.float64(-0.14110135364516213), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,289,828,693
Annual Return: 45.38%
Sharpe Ratio: 1.49952
Sortino Ratio: 1.457
Max Drawdown: -62.0%
Avg Drawdown: -12.4%
Normalized Score: 0.124
Lookback periods: [118, 155, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 58sRunning iteration 131/1500... Est. remaining: 13m 41sRunning iteration 141/1500... Est. remaining: 13m 27sRunning iteration 151/1500... Est. remaining: 13m 13sRunning iteration 161/1500... Est. remaining: 13m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $856,416,423
Annual Return: 38.78%
Sharpe Ratio: 1.38776
Sortino Ratio: 1.280
Max Drawdown: -36.9%
Avg Drawdown: -9.8%
Normalized Score: 0.484
Lookback periods: [49, 50, 79] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 12m 58sRunning iteration 181/1500... Est. remaining: 12m 47sRunning iteration 191/1500... Est. remaining: 12m 36sRunning iteration 201/1500... Est. remaining: 12m 26sbest_combination: {'lookbacks': [49, 50, 79], 'score': np.float64(0.4840233300964235), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 17sRunning iteration 221/1500... Est. remaining: 12m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,323,208,685
Annual Return: 44.32%
Sharpe Ratio: 1.53213
Sortino Ratio: 1.454
Max Drawdown: -52.3%
Avg Drawdown: -10.7%
Normalized Score: 0.599
Lookback periods: [89, 93, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 12m 4sRunning iteration 241/1500... Est. remaining: 11m 56sRunning iteration 251/1500... Est. remaining: 11m 48sRunning iteration 261/1500... Est. remaining: 11m 39sRunning iteration 271/1500... Est. remaining: 11m 31sRunning iteration 281/1500... Est. remaining: 11m 23sRunning iteration 291/1500... Est. remaining: 11m 15sRunning iteration 301/1500... Est. remaining: 11m 7sbest_combination: {'lookbacks': [89, 93, 145], 'score': np.float64(0.5994646245618372), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 0sRunning iteration 321/1500... Est. remaining: 10m 52sRunning iteration 331/1500... Est. remaining: 10m 45sRunning iteration 341/1500... Est. remaining: 10m 39sRunning iteration 351/1500... Est. remaining: 10m 32sRunning iteration 361/1500... Est. remaining: 10m 25sRunning iteration 371/1500... Est. remaining: 10m 18sRunning iteration 381/1500... Est. remaining: 10m 12sRunning iteration 391/1500... Est. remaining: 10m 5sRunning iteration 401/1500... Est. remaining: 9m 59sbest_combination: {'lookbacks': [89, 93, 145], 'score': np.float64(0.5994646245618372), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 52sRunning iteration 421/1500... Est. remaining: 9m 46sRunning iteration 431/1500... Est. remaining: 9m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,044,829,038
Annual Return: 39.58%
Sharpe Ratio: 1.44792
Sortino Ratio: 1.335
Max Drawdown: -34.7%
Avg Drawdown: -10.0%
Normalized Score: 0.697
Lookback periods: [36, 48, 75] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 36sRunning iteration 451/1500... Est. remaining: 9m 30sRunning iteration 461/1500... Est. remaining: 9m 24sRunning iteration 471/1500... Est. remaining: 9m 18sRunning iteration 481/1500... Est. remaining: 9m 12sRunning iteration 491/1500... Est. remaining: 9m 6sRunning iteration 501/1500... Est. remaining: 9m 0sbest_combination: {'lookbacks': [36, 48, 75], 'score': np.float64(0.6971443325582977), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 54sRunning iteration 521/1500... Est. remaining: 8m 48sRunning iteration 531/1500... Est. remaining: 8m 42sRunning iteration 541/1500... Est. remaining: 8m 37sRunning iteration 551/1500... Est. remaining: 8m 31sRunning iteration 561/1500... Est. remaining: 8m 25sRunning iteration 571/1500... Est. remaining: 8m 19sRunning iteration 581/1500... Est. remaining: 8m 13sRunning iteration 591/1500... Est. remaining: 8m 7sRunning iteration 601/1500... Est. remaining: 8m 1sbest_combination: {'lookbacks': [36, 48, 75], 'score': np.float64(0.6971443325582977), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,234,417,694
Annual Return: 40.25%
Sharpe Ratio: 1.45966
Sortino Ratio: 1.350
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.809
Lookback periods: [35, 50, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 7m 51sRunning iteration 631/1500... Est. remaining: 7m 46sRunning iteration 641/1500... Est. remaining: 7m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,087,951,591
Annual Return: 39.74%
Sharpe Ratio: 1.49132
Sortino Ratio: 1.356
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 0.900
Lookback periods: [36, 45, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 7m 36sRunning iteration 661/1500... Est. remaining: 7m 30sRunning iteration 671/1500... Est. remaining: 7m 24sRunning iteration 681/1500... Est. remaining: 7m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,906,476,276
Annual Return: 42.02%
Sharpe Ratio: 1.51724
Sortino Ratio: 1.410
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.132
Lookback periods: [39, 47, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 7m 15sRunning iteration 701/1500... Est. remaining: 7m 9sbest_combination: {'lookbacks': [39, 47, 84], 'score': np.float64(1.1324896060812786), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 3sRunning iteration 721/1500... Est. remaining: 6m 57sRunning iteration 731/1500... Est. remaining: 6m 52sRunning iteration 741/1500... Est. remaining: 6m 46sRunning iteration 751/1500... Est. remaining: 6m 40sRunning iteration 761/1500... Est. remaining: 6m 34sRunning iteration 771/1500... Est. remaining: 6m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,967,849,215
Annual Return: 42.15%
Sharpe Ratio: 1.54162
Sortino Ratio: 1.437
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.172
Lookback periods: [42, 47, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 781/1500... Est. remaining: 6m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,702,990,578
Annual Return: 44.77%
Sharpe Ratio: 1.62686
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.689
Lookback periods: [41, 51, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 6m 20sRunning iteration 801/1500... Est. remaining: 6m 14sbest_combination: {'lookbacks': [41, 51, 97], 'score': np.float64(1.6889245399531014), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 9sRunning iteration 821/1500... Est. remaining: 6m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,008,937,375
Annual Return: 46.03%
Sharpe Ratio: 1.67914
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.822
Lookback periods: [41, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 831/1500... Est. remaining: 5m 58sRunning iteration 841/1500... Est. remaining: 5m 53sRunning iteration 851/1500... Est. remaining: 5m 47sRunning iteration 861/1500... Est. remaining: 5m 41sRunning iteration 871/1500... Est. remaining: 5m 36sRunning iteration 881/1500... Est. remaining: 5m 30sRunning iteration 891/1500... Est. remaining: 5m 25sRunning iteration 901/1500... Est. remaining: 5m 19sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.8217525056307593), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 14sRunning iteration 921/1500... Est. remaining: 5m 8sRunning iteration 931/1500... Est. remaining: 5m 2sRunning iteration 941/1500... Est. remaining: 4m 57sRunning iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 41sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 30sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.8217525056307593), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.8217525056307593), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.8217525056307593), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.8217525056307593), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.8217525056307593), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,083,243,334
Annual Return: 46.10%
Sharpe Ratio: 1.66852
Sortino Ratio: 1.569
Max Drawdown: -34.7%
Avg Drawdown: -8.1%
Normalized Score: 1.825
Lookback periods: [42, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.83
best_combination: {'lookbacks': [42, 50, 98], 'score': np.float64(1.8250976652605253), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 50, 98] (score: 1.8251)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 50, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 101 selections (24.3%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 55 selections (13.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,083,243,334.12
Average Annualized Gain: 46.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 18:13:04 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $185,781,313
Annual Return: 32.79%
Sharpe Ratio: 1.16779
Sortino Ratio: 1.069
Max Drawdown: -43.0%
Avg Drawdown: -12.0%
Normalized Score: -0.609
Lookback periods: [46, 50, 253] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $595,937,863
Annual Return: 37.33%
Sharpe Ratio: 1.34183
Sortino Ratio: 1.223
Max Drawdown: -59.3%
Avg Drawdown: -12.7%
Normalized Score: -0.548
Lookback periods: [26, 53, 108] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,156,723,134
Annual Return: 39.99%
Sharpe Ratio: 1.36076
Sortino Ratio: 1.294
Max Drawdown: -55.0%
Avg Drawdown: -12.3%
Normalized Score: -0.200
Lookback periods: [93, 150, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,136,721,005
Annual Return: 42.49%
Sharpe Ratio: 1.40197
Sortino Ratio: 1.350
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.011
Lookback periods: [162, 187, 231] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 52sRunning iteration 31/1500... Est. remaining: 18m 42sRunning iteration 41/1500... Est. remaining: 17m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,357,341,310
Annual Return: 44.36%
Sharpe Ratio: 1.42995
Sortino Ratio: 1.385
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.139
Lookback periods: [188, 204, 208] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 16m 39sRunning iteration 61/1500... Est. remaining: 15m 52sRunning iteration 71/1500... Est. remaining: 15m 10sRunning iteration 81/1500... Est. remaining: 14m 38sRunning iteration 91/1500... Est. remaining: 14m 15sRunning iteration 101/1500... Est. remaining: 13m 54sbest_combination: {'lookbacks': [188, 204, 208], 'score': np.float64(0.13883506028328335), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 38sRunning iteration 121/1500... Est. remaining: 13m 22sRunning iteration 131/1500... Est. remaining: 13m 8sRunning iteration 141/1500... Est. remaining: 12m 56sRunning iteration 151/1500... Est. remaining: 12m 45sRunning iteration 161/1500... Est. remaining: 12m 33sRunning iteration 171/1500... Est. remaining: 12m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,603,542,319
Annual Return: 47.20%
Sharpe Ratio: 1.56062
Sortino Ratio: 1.520
Max Drawdown: -55.0%
Avg Drawdown: -12.0%
Normalized Score: 0.571
Lookback periods: [131, 132, 137] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/1500... Est. remaining: 12m 23sRunning iteration 191/1500... Est. remaining: 12m 14sRunning iteration 201/1500... Est. remaining: 12m 5sbest_combination: {'lookbacks': [131, 132, 137], 'score': np.float64(0.570944551043569), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 57sRunning iteration 221/1500... Est. remaining: 11m 48sRunning iteration 231/1500... Est. remaining: 11m 40sRunning iteration 241/1500... Est. remaining: 11m 32sRunning iteration 251/1500... Est. remaining: 11m 24sRunning iteration 261/1500... Est. remaining: 11m 17sRunning iteration 271/1500... Est. remaining: 11m 10sRunning iteration 281/1500... Est. remaining: 11m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,698,830,680
Annual Return: 41.55%
Sharpe Ratio: 1.49239
Sortino Ratio: 1.393
Max Drawdown: -41.9%
Avg Drawdown: -9.9%
Normalized Score: 0.718
Lookback periods: [44, 49, 112] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 291/1500... Est. remaining: 11m 1sRunning iteration 301/1500... Est. remaining: 10m 54sbest_combination: {'lookbacks': [44, 49, 112], 'score': np.float64(0.7179672730251208), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 47sRunning iteration 321/1500... Est. remaining: 10m 40sRunning iteration 331/1500... Est. remaining: 10m 33sRunning iteration 341/1500... Est. remaining: 10m 27sRunning iteration 351/1500... Est. remaining: 10m 20sRunning iteration 361/1500... Est. remaining: 10m 14sRunning iteration 371/1500... Est. remaining: 10m 8sRunning iteration 381/1500... Est. remaining: 10m 1sRunning iteration 391/1500... Est. remaining: 9m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,889,391,311
Annual Return: 43.73%
Sharpe Ratio: 1.56723
Sortino Ratio: 1.473
Max Drawdown: -34.9%
Avg Drawdown: -8.8%
Normalized Score: 1.269
Lookback periods: [42, 45, 120] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 9m 53sbest_combination: {'lookbacks': [42, 45, 120], 'score': np.float64(1.2686359185471547), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 47sRunning iteration 421/1500... Est. remaining: 9m 41sRunning iteration 431/1500... Est. remaining: 9m 35sRunning iteration 441/1500... Est. remaining: 9m 29sRunning iteration 451/1500... Est. remaining: 9m 23sRunning iteration 461/1500... Est. remaining: 9m 17sRunning iteration 471/1500... Est. remaining: 9m 11sRunning iteration 481/1500... Est. remaining: 9m 5sRunning iteration 491/1500... Est. remaining: 8m 59sRunning iteration 501/1500... Est. remaining: 8m 53sbest_combination: {'lookbacks': [42, 45, 120], 'score': np.float64(1.2686359185471547), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 47sRunning iteration 521/1500... Est. remaining: 8m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,574,813,499
Annual Return: 43.26%
Sharpe Ratio: 1.57330
Sortino Ratio: 1.461
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.310
Lookback periods: [42, 44, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 8m 37sRunning iteration 541/1500... Est. remaining: 8m 32sRunning iteration 551/1500... Est. remaining: 8m 26sRunning iteration 561/1500... Est. remaining: 8m 20sRunning iteration 571/1500... Est. remaining: 8m 14sRunning iteration 581/1500... Est. remaining: 8m 8sRunning iteration 591/1500... Est. remaining: 8m 2sRunning iteration 601/1500... Est. remaining: 7m 57sbest_combination: {'lookbacks': [42, 44, 131], 'score': np.float64(1.3098886401759564), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 51sRunning iteration 621/1500... Est. remaining: 7m 45sRunning iteration 631/1500... Est. remaining: 7m 40sRunning iteration 641/1500... Est. remaining: 7m 34sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 23sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 12sRunning iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [42, 44, 131], 'score': np.float64(1.3098886401759564), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 55sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 44sRunning iteration 741/1500... Est. remaining: 6m 39sRunning iteration 751/1500... Est. remaining: 6m 33sRunning iteration 761/1500... Est. remaining: 6m 28sRunning iteration 771/1500... Est. remaining: 6m 22sRunning iteration 781/1500... Est. remaining: 6m 17sRunning iteration 791/1500... Est. remaining: 6m 11sRunning iteration 801/1500... Est. remaining: 6m 6sbest_combination: {'lookbacks': [42, 44, 131], 'score': np.float64(1.3098886401759564), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 1sRunning iteration 821/1500... Est. remaining: 5m 55sRunning iteration 831/1500... Est. remaining: 5m 50sRunning iteration 841/1500... Est. remaining: 5m 44sRunning iteration 851/1500... Est. remaining: 5m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,017,863,921
Annual Return: 43.91%
Sharpe Ratio: 1.58303
Sortino Ratio: 1.488
Max Drawdown: -35.1%
Avg Drawdown: -8.5%
Normalized Score: 1.339
Lookback periods: [42, 44, 121] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 5m 35sRunning iteration 871/1500... Est. remaining: 5m 29sRunning iteration 881/1500... Est. remaining: 5m 24sRunning iteration 891/1500... Est. remaining: 5m 18sRunning iteration 901/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [42, 44, 121], 'score': np.float64(1.339218393788598), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 8sRunning iteration 921/1500... Est. remaining: 5m 3sRunning iteration 931/1500... Est. remaining: 4m 57sRunning iteration 941/1500... Est. remaining: 4m 52sRunning iteration 951/1500... Est. remaining: 4m 47sRunning iteration 961/1500... Est. remaining: 4m 41sRunning iteration 971/1500... Est. remaining: 4m 36sRunning iteration 981/1500... Est. remaining: 4m 31sRunning iteration 991/1500... Est. remaining: 4m 25sRunning iteration 1001/1500... Est. remaining: 4m 20sbest_combination: {'lookbacks': [42, 44, 121], 'score': np.float64(1.339218393788598), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 9sRunning iteration 1031/1500... Est. remaining: 4m 4sRunning iteration 1041/1500... Est. remaining: 3m 59sRunning iteration 1051/1500... Est. remaining: 3m 53sRunning iteration 1061/1500... Est. remaining: 3m 48sRunning iteration 1071/1500... Est. remaining: 3m 43sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 32sRunning iteration 1101/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [42, 44, 121], 'score': np.float64(1.339218393788598), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 22sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 11sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [42, 44, 121], 'score': np.float64(1.339218393788598), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,512,602,142
Annual Return: 44.55%
Sharpe Ratio: 1.59205
Sortino Ratio: 1.502
Max Drawdown: -35.2%
Avg Drawdown: -8.8%
Normalized Score: 1.350
Lookback periods: [42, 44, 111] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [42, 44, 111], 'score': np.float64(1.350017516705954), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [42, 44, 111], 'score': np.float64(1.350017516705954), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 1.35
best_combination: {'lookbacks': [42, 44, 111], 'score': np.float64(1.350017516705954), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 44, 111] (score: 1.3500)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 44, 111] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 52 selections (12.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,512,602,142.19
Average Annualized Gain: 44.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 18:26:02 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,053,250,390
Annual Return: 43.96%
Sharpe Ratio: 1.43496
Sortino Ratio: 1.393
Max Drawdown: -59.0%
Avg Drawdown: -12.0%
Normalized Score: 0.024
Lookback periods: [175, 180, 208] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,720,433,660
Annual Return: 45.78%
Sharpe Ratio: 1.48142
Sortino Ratio: 1.448
Max Drawdown: -59.7%
Avg Drawdown: -12.3%
Normalized Score: 0.188
Lookback periods: [148, 188, 213] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 47sRunning iteration 31/1500... Est. remaining: 17m 9sRunning iteration 41/1500... Est. remaining: 15m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,565,703,579
Annual Return: 46.48%
Sharpe Ratio: 1.51052
Sortino Ratio: 1.480
Max Drawdown: -61.4%
Avg Drawdown: -12.0%
Normalized Score: 0.288
Lookback periods: [148, 172, 202] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 15m 44sRunning iteration 61/1500... Est. remaining: 15m 4sRunning iteration 71/1500... Est. remaining: 14m 33sRunning iteration 81/1500... Est. remaining: 14m 7sRunning iteration 91/1500... Est. remaining: 13m 43sRunning iteration 101/1500... Est. remaining: 13m 23sbest_combination: {'lookbacks': [148, 172, 202], 'score': np.float64(0.28806059209255086), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 7sRunning iteration 121/1500... Est. remaining: 12m 54sRunning iteration 131/1500... Est. remaining: 12m 43sRunning iteration 141/1500... Est. remaining: 12m 33sRunning iteration 151/1500... Est. remaining: 12m 24sRunning iteration 161/1500... Est. remaining: 12m 15sRunning iteration 171/1500... Est. remaining: 12m 6sRunning iteration 181/1500... Est. remaining: 11m 58sRunning iteration 191/1500... Est. remaining: 11m 50sRunning iteration 201/1500... Est. remaining: 11m 42sbest_combination: {'lookbacks': [148, 172, 202], 'score': np.float64(0.28806059209255086), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 35sRunning iteration 221/1500... Est. remaining: 11m 28sRunning iteration 231/1500... Est. remaining: 11m 21sRunning iteration 241/1500... Est. remaining: 11m 14sRunning iteration 251/1500... Est. remaining: 11m 7sRunning iteration 261/1500... Est. remaining: 11m 1sRunning iteration 271/1500... Est. remaining: 10m 55sRunning iteration 281/1500... Est. remaining: 10m 48sRunning iteration 291/1500... Est. remaining: 10m 42sRunning iteration 301/1500... Est. remaining: 10m 36sbest_combination: {'lookbacks': [148, 172, 202], 'score': np.float64(0.28806059209255086), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 30sRunning iteration 321/1500... Est. remaining: 10m 24sRunning iteration 331/1500... Est. remaining: 10m 18sRunning iteration 341/1500... Est. remaining: 10m 12sRunning iteration 351/1500... Est. remaining: 10m 5sRunning iteration 361/1500... Est. remaining: 9m 59sRunning iteration 371/1500... Est. remaining: 9m 53sRunning iteration 381/1500... Est. remaining: 9m 48sRunning iteration 391/1500... Est. remaining: 9m 42sRunning iteration 401/1500... Est. remaining: 9m 36sbest_combination: {'lookbacks': [148, 172, 202], 'score': np.float64(0.28806059209255086), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 30sRunning iteration 421/1500... Est. remaining: 9m 24sRunning iteration 431/1500... Est. remaining: 9m 19sRunning iteration 441/1500... Est. remaining: 9m 13sRunning iteration 451/1500... Est. remaining: 9m 8sRunning iteration 461/1500... Est. remaining: 9m 2sRunning iteration 471/1500... Est. remaining: 8m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,414,256,604
Annual Return: 46.36%
Sharpe Ratio: 1.50715
Sortino Ratio: 1.465
Max Drawdown: -60.7%
Avg Drawdown: -11.7%
Normalized Score: 0.289
Lookback periods: [159, 184, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 8m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,536,775,352
Annual Return: 46.46%
Sharpe Ratio: 1.51030
Sortino Ratio: 1.470
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.377
Lookback periods: [156, 158, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 8m 51sRunning iteration 501/1500... Est. remaining: 8m 45sbest_combination: {'lookbacks': [156, 158, 194], 'score': np.float64(0.37651972869178085), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 40sRunning iteration 521/1500... Est. remaining: 8m 35sRunning iteration 531/1500... Est. remaining: 8m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,210,030,602
Annual Return: 46.20%
Sharpe Ratio: 1.51188
Sortino Ratio: 1.477
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.383
Lookback periods: [159, 170, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 8m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,229,547,603
Annual Return: 46.96%
Sharpe Ratio: 1.53180
Sortino Ratio: 1.497
Max Drawdown: -59.7%
Avg Drawdown: -11.5%
Normalized Score: 0.424
Lookback periods: [150, 159, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 22sRunning iteration 561/1500... Est. remaining: 8m 17sRunning iteration 571/1500... Est. remaining: 8m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,697,619,791
Annual Return: 46.58%
Sharpe Ratio: 1.51908
Sortino Ratio: 1.478
Max Drawdown: -59.0%
Avg Drawdown: -10.7%
Normalized Score: 0.436
Lookback periods: [158, 161, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 8m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,506,936,687
Annual Return: 46.43%
Sharpe Ratio: 1.51762
Sortino Ratio: 1.484
Max Drawdown: -55.0%
Avg Drawdown: -11.4%
Normalized Score: 0.466
Lookback periods: [156, 163, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 8m 4sRunning iteration 601/1500... Est. remaining: 7m 58sbest_combination: {'lookbacks': [156, 163, 168], 'score': np.float64(0.466086822526396), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 53sRunning iteration 621/1500... Est. remaining: 7m 47sRunning iteration 631/1500... Est. remaining: 7m 41sRunning iteration 641/1500... Est. remaining: 7m 36sRunning iteration 651/1500... Est. remaining: 7m 30sRunning iteration 661/1500... Est. remaining: 7m 25sRunning iteration 671/1500... Est. remaining: 7m 19sRunning iteration 681/1500... Est. remaining: 7m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,719,853,782
Annual Return: 47.87%
Sharpe Ratio: 1.57776
Sortino Ratio: 1.542
Max Drawdown: -57.2%
Avg Drawdown: -11.9%
Normalized Score: 0.599
Lookback periods: [140, 147, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 7m 10sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [140, 147, 156], 'score': np.float64(0.5989458973099179), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 59sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 48sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 37sRunning iteration 761/1500... Est. remaining: 6m 31sRunning iteration 771/1500... Est. remaining: 6m 26sRunning iteration 781/1500... Est. remaining: 6m 20sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [140, 147, 156], 'score': np.float64(0.5989458973099179), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 4sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 53sRunning iteration 841/1500... Est. remaining: 5m 48sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 37sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [140, 147, 156], 'score': np.float64(0.5989458973099179), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 27sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [140, 147, 156], 'score': np.float64(0.5989458973099179), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,975,150,256
Annual Return: 48.51%
Sharpe Ratio: 1.58699
Sortino Ratio: 1.551
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.704
Lookback periods: [139, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [139, 154, 156], 'score': np.float64(0.7043540231457189), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [139, 154, 156], 'score': np.float64(0.7043540231457189), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [139, 154, 156], 'score': np.float64(0.7043540231457189), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [139, 154, 156], 'score': np.float64(0.7043540231457189), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 0.70
best_combination: {'lookbacks': [139, 154, 156], 'score': np.float64(0.7043540231457189), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 154, 156] (score: 0.7044)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 154, 156] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 112 selections (26.9%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,975,150,256.00
Average Annualized Gain: 48.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 176m 7s
End time: Mon Aug 25 18:39:05 EDT 2025
Average time per successful run: 11m 44s
==============================================================
✓ All runs completed successfully!
