Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Mon Aug 25 15:43:05 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Mon Aug 25 15:43:05 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $215,140,404
Annual Return: 33.36%
Sharpe Ratio: 1.14716
Sortino Ratio: 1.065
Max Drawdown: -63.0%
Avg Drawdown: -14.8%
Normalized Score: -2.213
Lookback periods: [69, 90, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,554,319,804
Annual Return: 44.60%
Sharpe Ratio: 1.47598
Sortino Ratio: 1.425
Max Drawdown: -64.9%
Avg Drawdown: -12.5%
Normalized Score: -0.245
Lookback periods: [134, 144, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,320,272,537
Annual Return: 44.31%
Sharpe Ratio: 1.44699
Sortino Ratio: 1.413
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: -0.031
Lookback periods: [168, 175, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 14m 49sRunning iteration 21/1500... Est. remaining: 10m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,500,346,633
Annual Return: 44.53%
Sharpe Ratio: 1.45585
Sortino Ratio: 1.413
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.017
Lookback periods: [168, 199, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 9m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,686,687,292
Annual Return: 46.57%
Sharpe Ratio: 1.50971
Sortino Ratio: 1.482
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.400
Lookback periods: [153, 174, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 9m 31sRunning iteration 51/1500... Est. remaining: 8m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $694,201,668
Annual Return: 37.94%
Sharpe Ratio: 1.37518
Sortino Ratio: 1.272
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 0.473
Lookback periods: [50, 69, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 8m 53sRunning iteration 71/1500... Est. remaining: 8m 35sRunning iteration 81/1500... Est. remaining: 8m 21sRunning iteration 91/1500... Est. remaining: 8m 9sRunning iteration 101/1500... Est. remaining: 7m 58sbest_combination: {'lookbacks': [50, 69, 98], 'score': np.float64(0.4727647450763386), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 49sRunning iteration 121/1500... Est. remaining: 7m 41sRunning iteration 131/1500... Est. remaining: 7m 33sRunning iteration 141/1500... Est. remaining: 7m 27sRunning iteration 151/1500... Est. remaining: 7m 21sRunning iteration 161/1500... Est. remaining: 7m 15sRunning iteration 171/1500... Est. remaining: 7m 9sRunning iteration 181/1500... Est. remaining: 7m 4sRunning iteration 191/1500... Est. remaining: 6m 58sRunning iteration 201/1500... Est. remaining: 6m 54sbest_combination: {'lookbacks': [50, 69, 98], 'score': np.float64(0.4727647450763386), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 49sRunning iteration 221/1500... Est. remaining: 6m 45sRunning iteration 231/1500... Est. remaining: 6m 40sRunning iteration 241/1500... Est. remaining: 6m 36sRunning iteration 251/1500... Est. remaining: 6m 32sRunning iteration 261/1500... Est. remaining: 6m 28sRunning iteration 271/1500... Est. remaining: 6m 24sRunning iteration 281/1500... Est. remaining: 6m 20sRunning iteration 291/1500... Est. remaining: 6m 16sRunning iteration 301/1500... Est. remaining: 6m 12sbest_combination: {'lookbacks': [50, 69, 98], 'score': np.float64(0.4727647450763386), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 9sRunning iteration 321/1500... Est. remaining: 6m 5sRunning iteration 331/1500... Est. remaining: 6m 1sRunning iteration 341/1500... Est. remaining: 5m 58sRunning iteration 351/1500... Est. remaining: 5m 54sRunning iteration 361/1500... Est. remaining: 5m 50sRunning iteration 371/1500... Est. remaining: 5m 47sRunning iteration 381/1500... Est. remaining: 5m 43sRunning iteration 391/1500... Est. remaining: 5m 40sRunning iteration 401/1500... Est. remaining: 5m 36sbest_combination: {'lookbacks': [50, 69, 98], 'score': np.float64(0.4727647450763386), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 33sRunning iteration 421/1500... Est. remaining: 5m 30sRunning iteration 431/1500... Est. remaining: 5m 26sRunning iteration 441/1500... Est. remaining: 5m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $950,696,026
Annual Return: 39.20%
Sharpe Ratio: 1.40399
Sortino Ratio: 1.310
Max Drawdown: -34.7%
Avg Drawdown: -9.8%
Normalized Score: 0.575
Lookback periods: [50, 68, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 5m 21sRunning iteration 461/1500... Est. remaining: 5m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,152,958,420
Annual Return: 39.97%
Sharpe Ratio: 1.43121
Sortino Ratio: 1.344
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 0.862
Lookback periods: [50, 66, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 5m 16sRunning iteration 481/1500... Est. remaining: 5m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,266,660,780
Annual Return: 40.35%
Sharpe Ratio: 1.45776
Sortino Ratio: 1.368
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 0.956
Lookback periods: [50, 64, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 5m 11sRunning iteration 501/1500... Est. remaining: 5m 8sbest_combination: {'lookbacks': [50, 64, 98], 'score': np.float64(0.956462005750765), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 4sRunning iteration 521/1500... Est. remaining: 5m 1sRunning iteration 531/1500... Est. remaining: 4m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,965,063,700
Annual Return: 42.14%
Sharpe Ratio: 1.51583
Sortino Ratio: 1.427
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.314
Lookback periods: [50, 62, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 4m 56sRunning iteration 551/1500... Est. remaining: 4m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,891,279,993
Annual Return: 41.99%
Sharpe Ratio: 1.51964
Sortino Ratio: 1.431
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.341
Lookback periods: [50, 62, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 4m 50sRunning iteration 571/1500... Est. remaining: 4m 47sRunning iteration 581/1500... Est. remaining: 4m 43sRunning iteration 591/1500... Est. remaining: 4m 40sRunning iteration 601/1500... Est. remaining: 4m 37sbest_combination: {'lookbacks': [50, 62, 98], 'score': np.float64(1.3408203999291455), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 33sRunning iteration 621/1500... Est. remaining: 4m 30sRunning iteration 631/1500... Est. remaining: 4m 27sRunning iteration 641/1500... Est. remaining: 4m 24sRunning iteration 651/1500... Est. remaining: 4m 20sRunning iteration 661/1500... Est. remaining: 4m 17sRunning iteration 671/1500... Est. remaining: 4m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,991,297,407
Annual Return: 42.20%
Sharpe Ratio: 1.53443
Sortino Ratio: 1.433
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.376
Lookback periods: [50, 57, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 4m 11sRunning iteration 691/1500... Est. remaining: 4m 8sRunning iteration 701/1500... Est. remaining: 4m 5sbest_combination: {'lookbacks': [50, 57, 100], 'score': np.float64(1.3762668687430364), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 2sRunning iteration 721/1500... Est. remaining: 3m 58sRunning iteration 731/1500... Est. remaining: 3m 55sRunning iteration 741/1500... Est. remaining: 3m 52sRunning iteration 751/1500... Est. remaining: 3m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,613,029,033
Annual Return: 43.32%
Sharpe Ratio: 1.58577
Sortino Ratio: 1.485
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.547
Lookback periods: [50, 57, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 3m 46sRunning iteration 771/1500... Est. remaining: 3m 43sRunning iteration 781/1500... Est. remaining: 3m 40sRunning iteration 791/1500... Est. remaining: 3m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,576,078,638
Annual Return: 45.65%
Sharpe Ratio: 1.62275
Sortino Ratio: 1.552
Max Drawdown: -37.4%
Avg Drawdown: -9.2%
Normalized Score: 1.601
Lookback periods: [52, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 801/1500... Est. remaining: 3m 35sbest_combination: {'lookbacks': [52, 53, 95], 'score': np.float64(1.6010656738457238), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 31sRunning iteration 821/1500... Est. remaining: 3m 28sRunning iteration 831/1500... Est. remaining: 3m 25sRunning iteration 841/1500... Est. remaining: 3m 22sRunning iteration 851/1500... Est. remaining: 3m 19sRunning iteration 861/1500... Est. remaining: 3m 16sRunning iteration 871/1500... Est. remaining: 3m 13sRunning iteration 881/1500... Est. remaining: 3m 9sRunning iteration 891/1500... Est. remaining: 3m 6sRunning iteration 901/1500... Est. remaining: 3m 3sbest_combination: {'lookbacks': [52, 53, 95], 'score': np.float64(1.6010656738457238), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,833,624,762
Annual Return: 43.65%
Sharpe Ratio: 1.57405
Sortino Ratio: 1.478
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.664
Lookback periods: [50, 50, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 3m 1sRunning iteration 921/1500... Est. remaining: 2m 58sRunning iteration 931/1500... Est. remaining: 2m 54sRunning iteration 941/1500... Est. remaining: 2m 51sRunning iteration 951/1500... Est. remaining: 2m 48sRunning iteration 961/1500... Est. remaining: 2m 45sRunning iteration 971/1500... Est. remaining: 2m 42sRunning iteration 981/1500... Est. remaining: 2m 39sRunning iteration 991/1500... Est. remaining: 2m 36sRunning iteration 1001/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [50, 50, 95], 'score': np.float64(1.6636383750383288), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.854
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1021/1500... Est. remaining: 2m 27sRunning iteration 1031/1500... Est. remaining: 2m 24sRunning iteration 1041/1500... Est. remaining: 2m 21sRunning iteration 1051/1500... Est. remaining: 2m 18sRunning iteration 1061/1500... Est. remaining: 2m 14sRunning iteration 1071/1500... Est. remaining: 2m 11sRunning iteration 1081/1500... Est. remaining: 2m 8sRunning iteration 1091/1500... Est. remaining: 2m 5sRunning iteration 1101/1500... Est. remaining: 2m 2sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8544832318955973), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.983
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1121/1500... Est. remaining: 1m 56sRunning iteration 1131/1500... Est. remaining: 1m 53sRunning iteration 1141/1500... Est. remaining: 1m 50sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9827557674420837), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 28sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9827557674420837), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 51sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9827557674420837), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 1.98
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9827557674420837), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9828)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Mon Aug 25 15:50:47 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $149,814,619
Annual Return: 31.97%
Sharpe Ratio: 1.12913
Sortino Ratio: 1.041
Max Drawdown: -58.3%
Avg Drawdown: -14.6%
Normalized Score: -2.201
Lookback periods: [51, 71, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,241,811,593
Annual Return: 42.69%
Sharpe Ratio: 1.39659
Sortino Ratio: 1.345
Max Drawdown: -66.0%
Avg Drawdown: -12.6%
Normalized Score: -0.678
Lookback periods: [107, 191, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 16m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,943,126
Annual Return: 43.90%
Sharpe Ratio: 1.44503
Sortino Ratio: 1.407
Max Drawdown: -65.5%
Avg Drawdown: -12.5%
Normalized Score: -0.390
Lookback periods: [142, 146, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,591,945,086
Annual Return: 45.67%
Sharpe Ratio: 1.49358
Sortino Ratio: 1.452
Max Drawdown: -58.3%
Avg Drawdown: -11.8%
Normalized Score: 0.234
Lookback periods: [146, 157, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,920,160,219
Annual Return: 46.74%
Sharpe Ratio: 1.52395
Sortino Ratio: 1.488
Max Drawdown: -57.2%
Avg Drawdown: -12.0%
Normalized Score: 0.427
Lookback periods: [140, 154, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 14m 51sRunning iteration 31/1500... Est. remaining: 12m 22sRunning iteration 41/1500... Est. remaining: 11m 7sRunning iteration 51/1500... Est. remaining: 10m 18sRunning iteration 61/1500... Est. remaining: 9m 43sRunning iteration 71/1500... Est. remaining: 9m 18sRunning iteration 81/1500... Est. remaining: 8m 58sRunning iteration 91/1500... Est. remaining: 8m 41sRunning iteration 101/1500... Est. remaining: 8m 28sbest_combination: {'lookbacks': [140, 154, 170], 'score': np.float64(0.42722447326108026), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 17sRunning iteration 121/1500... Est. remaining: 8m 7sRunning iteration 131/1500... Est. remaining: 7m 59sRunning iteration 141/1500... Est. remaining: 7m 50sRunning iteration 151/1500... Est. remaining: 7m 43sRunning iteration 161/1500... Est. remaining: 7m 36sRunning iteration 171/1500... Est. remaining: 7m 30sRunning iteration 181/1500... Est. remaining: 7m 24sRunning iteration 191/1500... Est. remaining: 7m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,699,407,578
Annual Return: 46.58%
Sharpe Ratio: 1.54496
Sortino Ratio: 1.499
Max Drawdown: -60.1%
Avg Drawdown: -11.2%
Normalized Score: 0.449
Lookback periods: [134, 157, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 7m 17sbest_combination: {'lookbacks': [134, 157, 179], 'score': np.float64(0.4489011063793386), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,595,490,531
Annual Return: 46.50%
Sharpe Ratio: 1.53731
Sortino Ratio: 1.492
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.646
Lookback periods: [141, 156, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/1500... Est. remaining: 7m 16sRunning iteration 221/1500... Est. remaining: 7m 11sRunning iteration 231/1500... Est. remaining: 7m 6sRunning iteration 241/1500... Est. remaining: 7m 1sRunning iteration 251/1500... Est. remaining: 6m 56sRunning iteration 261/1500... Est. remaining: 6m 51sRunning iteration 271/1500... Est. remaining: 6m 47sRunning iteration 281/1500... Est. remaining: 6m 42sRunning iteration 291/1500... Est. remaining: 6m 38sRunning iteration 301/1500... Est. remaining: 6m 33sbest_combination: {'lookbacks': [141, 156, 171], 'score': np.float64(0.6459255133092776), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 29sRunning iteration 321/1500... Est. remaining: 6m 25sRunning iteration 331/1500... Est. remaining: 6m 20sRunning iteration 341/1500... Est. remaining: 6m 16sRunning iteration 351/1500... Est. remaining: 6m 12sRunning iteration 361/1500... Est. remaining: 6m 8sRunning iteration 371/1500... Est. remaining: 6m 4sRunning iteration 381/1500... Est. remaining: 6m 1sRunning iteration 391/1500... Est. remaining: 5m 57sRunning iteration 401/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [141, 156, 171], 'score': np.float64(0.6459255133092776), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 50sRunning iteration 421/1500... Est. remaining: 5m 46sRunning iteration 431/1500... Est. remaining: 5m 42sRunning iteration 441/1500... Est. remaining: 5m 39sRunning iteration 451/1500... Est. remaining: 5m 35sRunning iteration 461/1500... Est. remaining: 5m 32sRunning iteration 471/1500... Est. remaining: 5m 28sRunning iteration 481/1500... Est. remaining: 5m 24sRunning iteration 491/1500... Est. remaining: 5m 21sRunning iteration 501/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [141, 156, 171], 'score': np.float64(0.6459255133092776), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 14sRunning iteration 521/1500... Est. remaining: 5m 11sRunning iteration 531/1500... Est. remaining: 5m 7sRunning iteration 541/1500... Est. remaining: 5m 4sRunning iteration 551/1500... Est. remaining: 5m 0sRunning iteration 561/1500... Est. remaining: 4m 57sRunning iteration 571/1500... Est. remaining: 4m 54sRunning iteration 581/1500... Est. remaining: 4m 50sRunning iteration 591/1500... Est. remaining: 4m 47sRunning iteration 601/1500... Est. remaining: 4m 44sbest_combination: {'lookbacks': [141, 156, 171], 'score': np.float64(0.6459255133092776), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 40sRunning iteration 621/1500... Est. remaining: 4m 37sRunning iteration 631/1500... Est. remaining: 4m 34sRunning iteration 641/1500... Est. remaining: 4m 30sRunning iteration 651/1500... Est. remaining: 4m 27sRunning iteration 661/1500... Est. remaining: 4m 24sRunning iteration 671/1500... Est. remaining: 4m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,139,190,189
Annual Return: 47.53%
Sharpe Ratio: 1.55906
Sortino Ratio: 1.515
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 0.677
Lookback periods: [139, 157, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 4m 18sRunning iteration 691/1500... Est. remaining: 4m 15sRunning iteration 701/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [139, 157, 175], 'score': np.float64(0.6771011512219048), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 8sRunning iteration 721/1500... Est. remaining: 4m 5sRunning iteration 731/1500... Est. remaining: 4m 2sRunning iteration 741/1500... Est. remaining: 3m 59sRunning iteration 751/1500... Est. remaining: 3m 55sRunning iteration 761/1500... Est. remaining: 3m 52sRunning iteration 771/1500... Est. remaining: 3m 49sRunning iteration 781/1500... Est. remaining: 3m 46sRunning iteration 791/1500... Est. remaining: 3m 42sRunning iteration 801/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [139, 157, 175], 'score': np.float64(0.6771011512219048), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 36sRunning iteration 821/1500... Est. remaining: 3m 33sRunning iteration 831/1500... Est. remaining: 3m 29sRunning iteration 841/1500... Est. remaining: 3m 26sRunning iteration 851/1500... Est. remaining: 3m 23sRunning iteration 861/1500... Est. remaining: 3m 20sRunning iteration 871/1500... Est. remaining: 3m 17sRunning iteration 881/1500... Est. remaining: 3m 13sRunning iteration 891/1500... Est. remaining: 3m 10sRunning iteration 901/1500... Est. remaining: 3m 7sbest_combination: {'lookbacks': [139, 157, 175], 'score': np.float64(0.6771011512219048), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 4sRunning iteration 921/1500... Est. remaining: 3m 1sRunning iteration 931/1500... Est. remaining: 2m 57sRunning iteration 941/1500... Est. remaining: 2m 54sRunning iteration 951/1500... Est. remaining: 2m 51sRunning iteration 961/1500... Est. remaining: 2m 48sRunning iteration 971/1500... Est. remaining: 2m 45sRunning iteration 981/1500... Est. remaining: 2m 42sRunning iteration 991/1500... Est. remaining: 2m 39sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [139, 157, 175], 'score': np.float64(0.6771011512219048), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,889,914,877
Annual Return: 47.96%
Sharpe Ratio: 1.57935
Sortino Ratio: 1.545
Max Drawdown: -58.5%
Avg Drawdown: -11.0%
Normalized Score: 0.748
Lookback periods: [139, 149, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 2m 33sRunning iteration 1021/1500... Est. remaining: 2m 30sRunning iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 23sRunning iteration 1051/1500... Est. remaining: 2m 20sRunning iteration 1061/1500... Est. remaining: 2m 17sRunning iteration 1071/1500... Est. remaining: 2m 14sRunning iteration 1081/1500... Est. remaining: 2m 11sRunning iteration 1091/1500... Est. remaining: 2m 8sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [139, 149, 171], 'score': np.float64(0.74828050013056), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,125,139,243
Annual Return: 48.09%
Sharpe Ratio: 1.58591
Sortino Ratio: 1.544
Max Drawdown: -56.8%
Avg Drawdown: -11.3%
Normalized Score: 0.803
Lookback periods: [135, 154, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 58sRunning iteration 1131/1500... Est. remaining: 1m 55sRunning iteration 1141/1500... Est. remaining: 1m 52sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 46sRunning iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [135, 154, 179], 'score': np.float64(0.8032696709942074), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 18sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [135, 154, 179], 'score': np.float64(0.8032696709942074), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 53sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [135, 154, 179], 'score': np.float64(0.8032696709942074), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 0.80
best_combination: {'lookbacks': [135, 154, 179], 'score': np.float64(0.8032696709942074), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 154, 179] (score: 0.8033)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 154, 179] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 112 selections (26.9%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 41 selections (9.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,125,139,243.29
Average Annualized Gain: 48.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Mon Aug 25 15:58:39 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $150,442,920
Annual Return: 31.99%
Sharpe Ratio: 1.10545
Sortino Ratio: 1.019
Max Drawdown: -69.9%
Avg Drawdown: -16.0%
Normalized Score: -2.539
Lookback periods: [73, 104, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,352,468,093
Annual Return: 40.62%
Sharpe Ratio: 1.35487
Sortino Ratio: 1.300
Max Drawdown: -68.2%
Avg Drawdown: -13.3%
Normalized Score: -1.035
Lookback periods: [110, 136, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,164,585,592
Annual Return: 40.01%
Sharpe Ratio: 1.38443
Sortino Ratio: 1.291
Max Drawdown: -60.4%
Avg Drawdown: -12.8%
Normalized Score: -0.734
Lookback periods: [54, 111, 142] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,665,424,934
Annual Return: 43.40%
Sharpe Ratio: 1.44009
Sortino Ratio: 1.399
Max Drawdown: -68.0%
Avg Drawdown: -12.5%
Normalized Score: -0.566
Lookback periods: [116, 149, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,128,428,767
Annual Return: 42.47%
Sharpe Ratio: 1.42806
Sortino Ratio: 1.369
Max Drawdown: -58.2%
Avg Drawdown: -12.4%
Normalized Score: -0.356
Lookback periods: [101, 146, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 23m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,945,643,375
Annual Return: 45.03%
Sharpe Ratio: 1.48375
Sortino Ratio: 1.441
Max Drawdown: -58.1%
Avg Drawdown: -12.8%
Normalized Score: -0.144
Lookback periods: [141, 149, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 16m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,557,404,920
Annual Return: 45.64%
Sharpe Ratio: 1.50605
Sortino Ratio: 1.459
Max Drawdown: -64.8%
Avg Drawdown: -11.7%
Normalized Score: -0.087
Lookback periods: [128, 179, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 14m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,962,871,789
Annual Return: 46.77%
Sharpe Ratio: 1.53694
Sortino Ratio: 1.493
Max Drawdown: -58.5%
Avg Drawdown: -12.3%
Normalized Score: 0.134
Lookback periods: [139, 155, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 12m 47sRunning iteration 51/1500... Est. remaining: 11m 37sRunning iteration 61/1500... Est. remaining: 10m 51sRunning iteration 71/1500... Est. remaining: 10m 16sRunning iteration 81/1500... Est. remaining: 9m 52sRunning iteration 91/1500... Est. remaining: 9m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,867,693,812
Annual Return: 46.70%
Sharpe Ratio: 1.52241
Sortino Ratio: 1.491
Max Drawdown: -59.9%
Avg Drawdown: -11.5%
Normalized Score: 0.181
Lookback periods: [157, 176, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 9m 25sbest_combination: {'lookbacks': [157, 176, 178], 'score': np.float64(0.18083902555294434), 'visits': 1}
Running iteration 111/1500... Est. remaining: 9m 8sRunning iteration 121/1500... Est. remaining: 8m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,235,516,178
Annual Return: 46.22%
Sharpe Ratio: 1.53085
Sortino Ratio: 1.493
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: 0.215
Lookback periods: [122, 130, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 8m 49sRunning iteration 141/1500... Est. remaining: 8m 37sRunning iteration 151/1500... Est. remaining: 8m 27sRunning iteration 161/1500... Est. remaining: 8m 17sRunning iteration 171/1500... Est. remaining: 8m 8sRunning iteration 181/1500... Est. remaining: 8m 0sRunning iteration 191/1500... Est. remaining: 7m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,882,708,981
Annual Return: 41.97%
Sharpe Ratio: 1.46595
Sortino Ratio: 1.375
Max Drawdown: -52.3%
Avg Drawdown: -9.2%
Normalized Score: 0.339
Lookback periods: [50, 95, 114] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 7m 51sbest_combination: {'lookbacks': [50, 95, 114], 'score': np.float64(0.33862970691119365), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 44sRunning iteration 221/1500... Est. remaining: 7m 37sRunning iteration 231/1500... Est. remaining: 7m 31sRunning iteration 241/1500... Est. remaining: 7m 25sRunning iteration 251/1500... Est. remaining: 7m 19sRunning iteration 261/1500... Est. remaining: 7m 13sRunning iteration 271/1500... Est. remaining: 7m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,174,015,872
Annual Return: 49.45%
Sharpe Ratio: 1.61679
Sortino Ratio: 1.578
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.642
Lookback periods: [136, 157, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/1500... Est. remaining: 7m 6sRunning iteration 291/1500... Est. remaining: 7m 1sRunning iteration 301/1500... Est. remaining: 6m 56sbest_combination: {'lookbacks': [136, 157, 174], 'score': np.float64(0.6422637780113778), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 51sRunning iteration 321/1500... Est. remaining: 6m 46sRunning iteration 331/1500... Est. remaining: 6m 42sRunning iteration 341/1500... Est. remaining: 6m 37sRunning iteration 351/1500... Est. remaining: 6m 33sRunning iteration 361/1500... Est. remaining: 6m 28sRunning iteration 371/1500... Est. remaining: 6m 24sRunning iteration 381/1500... Est. remaining: 6m 19sRunning iteration 391/1500... Est. remaining: 6m 15sRunning iteration 401/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [136, 157, 174], 'score': np.float64(0.6422637780113778), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 6sRunning iteration 421/1500... Est. remaining: 6m 2sRunning iteration 431/1500... Est. remaining: 5m 58sRunning iteration 441/1500... Est. remaining: 5m 54sRunning iteration 451/1500... Est. remaining: 5m 49sRunning iteration 461/1500... Est. remaining: 5m 45sRunning iteration 471/1500... Est. remaining: 5m 41sRunning iteration 481/1500... Est. remaining: 5m 38sRunning iteration 491/1500... Est. remaining: 5m 34sRunning iteration 501/1500... Est. remaining: 5m 30sbest_combination: {'lookbacks': [136, 157, 174], 'score': np.float64(0.6422637780113778), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 26sRunning iteration 521/1500... Est. remaining: 5m 22sRunning iteration 531/1500... Est. remaining: 5m 19sRunning iteration 541/1500... Est. remaining: 5m 15sRunning iteration 551/1500... Est. remaining: 5m 11sRunning iteration 561/1500... Est. remaining: 5m 7sRunning iteration 571/1500... Est. remaining: 5m 4sRunning iteration 581/1500... Est. remaining: 5m 0sRunning iteration 591/1500... Est. remaining: 4m 57sRunning iteration 601/1500... Est. remaining: 4m 53sbest_combination: {'lookbacks': [136, 157, 174], 'score': np.float64(0.6422637780113778), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 49sRunning iteration 621/1500... Est. remaining: 4m 46sRunning iteration 631/1500... Est. remaining: 4m 42sRunning iteration 641/1500... Est. remaining: 4m 39sRunning iteration 651/1500... Est. remaining: 4m 35sRunning iteration 661/1500... Est. remaining: 4m 32sRunning iteration 671/1500... Est. remaining: 4m 29sRunning iteration 681/1500... Est. remaining: 4m 25sRunning iteration 691/1500... Est. remaining: 4m 22sRunning iteration 701/1500... Est. remaining: 4m 18sbest_combination: {'lookbacks': [136, 157, 174], 'score': np.float64(0.6422637780113778), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 15sRunning iteration 721/1500... Est. remaining: 4m 11sRunning iteration 731/1500... Est. remaining: 4m 8sRunning iteration 741/1500... Est. remaining: 4m 4sRunning iteration 751/1500... Est. remaining: 4m 1sRunning iteration 761/1500... Est. remaining: 3m 58sRunning iteration 771/1500... Est. remaining: 3m 54sRunning iteration 781/1500... Est. remaining: 3m 51sRunning iteration 791/1500... Est. remaining: 3m 47sRunning iteration 801/1500... Est. remaining: 3m 44sbest_combination: {'lookbacks': [136, 157, 174], 'score': np.float64(0.6422637780113778), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 41sRunning iteration 821/1500... Est. remaining: 3m 37sRunning iteration 831/1500... Est. remaining: 3m 34sRunning iteration 841/1500... Est. remaining: 3m 31sRunning iteration 851/1500... Est. remaining: 3m 27sRunning iteration 861/1500... Est. remaining: 3m 24sRunning iteration 871/1500... Est. remaining: 3m 21sRunning iteration 881/1500... Est. remaining: 3m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,440,029,295
Annual Return: 40.87%
Sharpe Ratio: 1.46000
Sortino Ratio: 1.365
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 0.782
Lookback periods: [50, 95, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 3m 15sRunning iteration 901/1500... Est. remaining: 3m 11sbest_combination: {'lookbacks': [50, 95, 97], 'score': np.float64(0.7823328673688097), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,469,373,082
Annual Return: 40.96%
Sharpe Ratio: 1.46569
Sortino Ratio: 1.370
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 0.859
Lookback periods: [50, 95, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 3m 9sRunning iteration 921/1500... Est. remaining: 3m 5sRunning iteration 931/1500... Est. remaining: 3m 2sRunning iteration 941/1500... Est. remaining: 2m 59sRunning iteration 951/1500... Est. remaining: 2m 55sRunning iteration 961/1500... Est. remaining: 2m 52sRunning iteration 971/1500... Est. remaining: 2m 49sRunning iteration 981/1500... Est. remaining: 2m 46sRunning iteration 991/1500... Est. remaining: 2m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,684,482,987
Annual Return: 43.43%
Sharpe Ratio: 1.53307
Sortino Ratio: 1.444
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.159
Lookback periods: [50, 97, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1001/1500... Est. remaining: 2m 39sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.1587203870359244), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 36sRunning iteration 1021/1500... Est. remaining: 2m 33sRunning iteration 1031/1500... Est. remaining: 2m 30sRunning iteration 1041/1500... Est. remaining: 2m 26sRunning iteration 1051/1500... Est. remaining: 2m 23sRunning iteration 1061/1500... Est. remaining: 2m 20sRunning iteration 1071/1500... Est. remaining: 2m 16sRunning iteration 1081/1500... Est. remaining: 2m 13sRunning iteration 1091/1500... Est. remaining: 2m 10sRunning iteration 1101/1500... Est. remaining: 2m 7sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.1587203870359244), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 3sRunning iteration 1121/1500... Est. remaining: 2m 0sRunning iteration 1131/1500... Est. remaining: 1m 57sRunning iteration 1141/1500... Est. remaining: 1m 54sRunning iteration 1151/1500... Est. remaining: 1m 51sRunning iteration 1161/1500... Est. remaining: 1m 47sRunning iteration 1171/1500... Est. remaining: 1m 44sRunning iteration 1181/1500... Est. remaining: 1m 41sRunning iteration 1191/1500... Est. remaining: 1m 38sRunning iteration 1201/1500... Est. remaining: 1m 35sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.1587203870359244), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 31sRunning iteration 1221/1500... Est. remaining: 1m 28sRunning iteration 1231/1500... Est. remaining: 1m 25sRunning iteration 1241/1500... Est. remaining: 1m 22sRunning iteration 1251/1500... Est. remaining: 1m 19sRunning iteration 1261/1500... Est. remaining: 1m 15sRunning iteration 1271/1500... Est. remaining: 1m 12sRunning iteration 1281/1500... Est. remaining: 1m 9sRunning iteration 1291/1500... Est. remaining: 1m 6sRunning iteration 1301/1500... Est. remaining: 1m 3sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.1587203870359244), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 53sRunning iteration 1341/1500... Est. remaining: 0m 50sRunning iteration 1351/1500... Est. remaining: 0m 47sRunning iteration 1361/1500... Est. remaining: 0m 44sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.1587203870359244), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 25sRunning iteration 1431/1500... Est. remaining: 0m 22sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 1.16
best_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.1587203870359244), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 97, 98] (score: 1.1587)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 97, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 122 selections (29.3%)
2. naz100_hma: 96 selections (23.1%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 67 selections (16.1%)
5. cash: 52 selections (12.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $2,684,482,987.25
Average Annualized Gain: 43.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Mon Aug 25 16:06:34 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $438,148,874
Annual Return: 36.12%
Sharpe Ratio: 1.25834
Sortino Ratio: 1.168
Max Drawdown: -59.5%
Avg Drawdown: -12.9%
Normalized Score: -1.503
Lookback periods: [58, 68, 71] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $719,108,838
Annual Return: 38.08%
Sharpe Ratio: 1.31075
Sortino Ratio: 1.221
Max Drawdown: -55.0%
Avg Drawdown: -11.3%
Normalized Score: -0.816
Lookback periods: [54, 162, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,019,564,753
Annual Return: 45.11%
Sharpe Ratio: 1.47057
Sortino Ratio: 1.438
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: -0.090
Lookback periods: [156, 164, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,066,151,474
Annual Return: 45.16%
Sharpe Ratio: 1.48019
Sortino Ratio: 1.442
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.028
Lookback periods: [159, 171, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 15m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,268,667,979
Annual Return: 42.73%
Sharpe Ratio: 1.46656
Sortino Ratio: 1.392
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: 0.046
Lookback periods: [92, 95, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 13m 27sRunning iteration 41/1500... Est. remaining: 11m 55sRunning iteration 51/1500... Est. remaining: 10m 58sRunning iteration 61/1500... Est. remaining: 10m 17sRunning iteration 71/1500... Est. remaining: 9m 46sRunning iteration 81/1500... Est. remaining: 9m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,559,747,263
Annual Return: 46.47%
Sharpe Ratio: 1.52281
Sortino Ratio: 1.481
Max Drawdown: -58.5%
Avg Drawdown: -11.4%
Normalized Score: 0.145
Lookback periods: [145, 156, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 9m 16sRunning iteration 101/1500... Est. remaining: 9m 0sbest_combination: {'lookbacks': [145, 156, 173], 'score': np.float64(0.14530630206433048), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 46sRunning iteration 121/1500... Est. remaining: 8m 34sRunning iteration 131/1500... Est. remaining: 8m 23sRunning iteration 141/1500... Est. remaining: 8m 13sRunning iteration 151/1500... Est. remaining: 8m 4sRunning iteration 161/1500... Est. remaining: 7m 55sRunning iteration 171/1500... Est. remaining: 7m 47sRunning iteration 181/1500... Est. remaining: 7m 40sRunning iteration 191/1500... Est. remaining: 7m 34sRunning iteration 201/1500... Est. remaining: 7m 27sbest_combination: {'lookbacks': [145, 156, 173], 'score': np.float64(0.14530630206433048), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 21sRunning iteration 221/1500... Est. remaining: 7m 15sRunning iteration 231/1500... Est. remaining: 7m 10sRunning iteration 241/1500... Est. remaining: 7m 5sRunning iteration 251/1500... Est. remaining: 7m 0sRunning iteration 261/1500... Est. remaining: 6m 55sRunning iteration 271/1500... Est. remaining: 6m 50sRunning iteration 281/1500... Est. remaining: 6m 45sRunning iteration 291/1500... Est. remaining: 6m 40sRunning iteration 301/1500... Est. remaining: 6m 36sbest_combination: {'lookbacks': [145, 156, 173], 'score': np.float64(0.14530630206433048), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 31sRunning iteration 321/1500... Est. remaining: 6m 27sRunning iteration 331/1500... Est. remaining: 6m 23sRunning iteration 341/1500... Est. remaining: 6m 19sRunning iteration 351/1500... Est. remaining: 6m 15sRunning iteration 361/1500... Est. remaining: 6m 10sRunning iteration 371/1500... Est. remaining: 6m 6sRunning iteration 381/1500... Est. remaining: 6m 3sRunning iteration 391/1500... Est. remaining: 5m 59sRunning iteration 401/1500... Est. remaining: 5m 55sbest_combination: {'lookbacks': [145, 156, 173], 'score': np.float64(0.14530630206433048), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 51sRunning iteration 421/1500... Est. remaining: 5m 47sRunning iteration 431/1500... Est. remaining: 5m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,973,386,997
Annual Return: 48.01%
Sharpe Ratio: 1.57629
Sortino Ratio: 1.537
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 0.480
Lookback periods: [135, 157, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 5m 42sRunning iteration 451/1500... Est. remaining: 5m 38sRunning iteration 461/1500... Est. remaining: 5m 35sRunning iteration 471/1500... Est. remaining: 5m 31sRunning iteration 481/1500... Est. remaining: 5m 27sRunning iteration 491/1500... Est. remaining: 5m 24sRunning iteration 501/1500... Est. remaining: 5m 20sbest_combination: {'lookbacks': [135, 157, 174], 'score': np.float64(0.48048832669086927), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 17sRunning iteration 521/1500... Est. remaining: 5m 13sRunning iteration 531/1500... Est. remaining: 5m 9sRunning iteration 541/1500... Est. remaining: 5m 6sRunning iteration 551/1500... Est. remaining: 5m 2sRunning iteration 561/1500... Est. remaining: 4m 59sRunning iteration 571/1500... Est. remaining: 4m 55sRunning iteration 581/1500... Est. remaining: 4m 52sRunning iteration 591/1500... Est. remaining: 4m 48sRunning iteration 601/1500... Est. remaining: 4m 45sbest_combination: {'lookbacks': [135, 157, 174], 'score': np.float64(0.48048832669086927), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 42sRunning iteration 621/1500... Est. remaining: 4m 38sRunning iteration 631/1500... Est. remaining: 4m 35sRunning iteration 641/1500... Est. remaining: 4m 32sRunning iteration 651/1500... Est. remaining: 4m 28sRunning iteration 661/1500... Est. remaining: 4m 25sRunning iteration 671/1500... Est. remaining: 4m 22sRunning iteration 681/1500... Est. remaining: 4m 18sRunning iteration 691/1500... Est. remaining: 4m 15sRunning iteration 701/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [135, 157, 174], 'score': np.float64(0.48048832669086927), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 8sRunning iteration 721/1500... Est. remaining: 4m 5sRunning iteration 731/1500... Est. remaining: 4m 2sRunning iteration 741/1500... Est. remaining: 3m 58sRunning iteration 751/1500... Est. remaining: 3m 55sRunning iteration 761/1500... Est. remaining: 3m 52sRunning iteration 771/1500... Est. remaining: 3m 49sRunning iteration 781/1500... Est. remaining: 3m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,651,885,004
Annual Return: 48.82%
Sharpe Ratio: 1.59990
Sortino Ratio: 1.556
Max Drawdown: -56.8%
Avg Drawdown: -11.6%
Normalized Score: 0.495
Lookback periods: [140, 159, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 3m 43sRunning iteration 801/1500... Est. remaining: 3m 40sbest_combination: {'lookbacks': [140, 159, 188], 'score': np.float64(0.4948568266720489), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 36sRunning iteration 821/1500... Est. remaining: 3m 33sRunning iteration 831/1500... Est. remaining: 3m 30sRunning iteration 841/1500... Est. remaining: 3m 27sRunning iteration 851/1500... Est. remaining: 3m 23sRunning iteration 861/1500... Est. remaining: 3m 20sRunning iteration 871/1500... Est. remaining: 3m 17sRunning iteration 881/1500... Est. remaining: 3m 14sRunning iteration 891/1500... Est. remaining: 3m 10sRunning iteration 901/1500... Est. remaining: 3m 7sbest_combination: {'lookbacks': [140, 159, 188], 'score': np.float64(0.4948568266720489), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,216,049,947
Annual Return: 49.47%
Sharpe Ratio: 1.61119
Sortino Ratio: 1.568
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.606
Lookback periods: [139, 156, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 3m 5sRunning iteration 921/1500... Est. remaining: 3m 1sRunning iteration 931/1500... Est. remaining: 2m 58sRunning iteration 941/1500... Est. remaining: 2m 55sRunning iteration 951/1500... Est. remaining: 2m 52sRunning iteration 961/1500... Est. remaining: 2m 49sRunning iteration 971/1500... Est. remaining: 2m 45sRunning iteration 981/1500... Est. remaining: 2m 42sRunning iteration 991/1500... Est. remaining: 2m 39sRunning iteration 1001/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.6055838795238981), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 33sRunning iteration 1021/1500... Est. remaining: 2m 30sRunning iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 23sRunning iteration 1051/1500... Est. remaining: 2m 20sRunning iteration 1061/1500... Est. remaining: 2m 17sRunning iteration 1071/1500... Est. remaining: 2m 14sRunning iteration 1081/1500... Est. remaining: 2m 11sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.6055838795238981), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 58sRunning iteration 1131/1500... Est. remaining: 1m 55sRunning iteration 1141/1500... Est. remaining: 1m 52sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.6055838795238981), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.6055838795238981), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.6055838795238981), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 0.61
best_combination: {'lookbacks': [139, 156, 200], 'score': np.float64(0.6055838795238981), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 156, 200] (score: 0.6056)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 156, 200] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pi: 77 selections (18.5%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,216,049,946.98
Average Annualized Gain: 49.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Mon Aug 25 16:14:24 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,213,564,487
Annual Return: 40.18%
Sharpe Ratio: 1.35606
Sortino Ratio: 1.296
Max Drawdown: -58.1%
Avg Drawdown: -13.1%
Normalized Score: -0.442
Lookback periods: [99, 128, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,451,845,422
Annual Return: 47.10%
Sharpe Ratio: 1.52795
Sortino Ratio: 1.490
Max Drawdown: -56.6%
Avg Drawdown: -12.0%
Normalized Score: 0.679
Lookback periods: [154, 154, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 13m 20sRunning iteration 21/1500... Est. remaining: 9m 55sRunning iteration 31/1500... Est. remaining: 9m 3sRunning iteration 41/1500... Est. remaining: 8m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,741,766,474
Annual Return: 41.65%
Sharpe Ratio: 1.47672
Sortino Ratio: 1.385
Max Drawdown: -37.2%
Avg Drawdown: -9.3%
Normalized Score: 1.353
Lookback periods: [51, 52, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 8m 41sRunning iteration 61/1500... Est. remaining: 8m 26sRunning iteration 71/1500... Est. remaining: 8m 14sRunning iteration 81/1500... Est. remaining: 8m 4sRunning iteration 91/1500... Est. remaining: 7m 55sRunning iteration 101/1500... Est. remaining: 7m 47sbest_combination: {'lookbacks': [51, 52, 100], 'score': np.float64(1.3533761120614833), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 40sRunning iteration 121/1500... Est. remaining: 7m 35sRunning iteration 131/1500... Est. remaining: 7m 29sRunning iteration 141/1500... Est. remaining: 7m 24sRunning iteration 151/1500... Est. remaining: 7m 19sRunning iteration 161/1500... Est. remaining: 7m 14sRunning iteration 171/1500... Est. remaining: 7m 9sRunning iteration 181/1500... Est. remaining: 7m 5sRunning iteration 191/1500... Est. remaining: 7m 1sRunning iteration 201/1500... Est. remaining: 6m 57sbest_combination: {'lookbacks': [51, 52, 100], 'score': np.float64(1.3533761120614833), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 53sRunning iteration 221/1500... Est. remaining: 6m 49sRunning iteration 231/1500... Est. remaining: 6m 45sRunning iteration 241/1500... Est. remaining: 6m 41sRunning iteration 251/1500... Est. remaining: 6m 37sRunning iteration 261/1500... Est. remaining: 6m 34sRunning iteration 271/1500... Est. remaining: 6m 30sRunning iteration 281/1500... Est. remaining: 6m 26sRunning iteration 291/1500... Est. remaining: 6m 23sRunning iteration 301/1500... Est. remaining: 6m 19sbest_combination: {'lookbacks': [51, 52, 100], 'score': np.float64(1.3533761120614833), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 15sRunning iteration 321/1500... Est. remaining: 6m 12sRunning iteration 331/1500... Est. remaining: 6m 9sRunning iteration 341/1500... Est. remaining: 6m 5sRunning iteration 351/1500... Est. remaining: 6m 2sRunning iteration 361/1500... Est. remaining: 5m 59sRunning iteration 371/1500... Est. remaining: 5m 56sRunning iteration 381/1500... Est. remaining: 5m 52sRunning iteration 391/1500... Est. remaining: 5m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,713,909,259
Annual Return: 43.47%
Sharpe Ratio: 1.54563
Sortino Ratio: 1.457
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.770
Lookback periods: [50, 53, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 5m 48sbest_combination: {'lookbacks': [50, 53, 99], 'score': np.float64(1.7704031769157946), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 44sRunning iteration 421/1500... Est. remaining: 5m 41sRunning iteration 431/1500... Est. remaining: 5m 37sRunning iteration 441/1500... Est. remaining: 5m 34sRunning iteration 451/1500... Est. remaining: 5m 31sRunning iteration 461/1500... Est. remaining: 5m 27sRunning iteration 471/1500... Est. remaining: 5m 24sRunning iteration 481/1500... Est. remaining: 5m 20sRunning iteration 491/1500... Est. remaining: 5m 17sRunning iteration 501/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [50, 53, 99], 'score': np.float64(1.7704031769157946), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 10sRunning iteration 521/1500... Est. remaining: 5m 7sRunning iteration 531/1500... Est. remaining: 5m 3sRunning iteration 541/1500... Est. remaining: 5m 0sRunning iteration 551/1500... Est. remaining: 4m 57sRunning iteration 561/1500... Est. remaining: 4m 54sRunning iteration 571/1500... Est. remaining: 4m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,456,560,666
Annual Return: 44.48%
Sharpe Ratio: 1.58489
Sortino Ratio: 1.492
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.947
Lookback periods: [50, 54, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 4m 48sRunning iteration 591/1500... Est. remaining: 4m 45sRunning iteration 601/1500... Est. remaining: 4m 42sbest_combination: {'lookbacks': [50, 54, 99], 'score': np.float64(1.9468491593364157), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 38sRunning iteration 621/1500... Est. remaining: 4m 35sRunning iteration 631/1500... Est. remaining: 4m 32sRunning iteration 641/1500... Est. remaining: 4m 29sRunning iteration 651/1500... Est. remaining: 4m 25sRunning iteration 661/1500... Est. remaining: 4m 22sRunning iteration 671/1500... Est. remaining: 4m 19sRunning iteration 681/1500... Est. remaining: 4m 16sRunning iteration 691/1500... Est. remaining: 4m 12sRunning iteration 701/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [50, 54, 99], 'score': np.float64(1.9468491593364157), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 6sRunning iteration 721/1500... Est. remaining: 4m 3sRunning iteration 731/1500... Est. remaining: 4m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,675,852,350
Annual Return: 43.42%
Sharpe Ratio: 1.55307
Sortino Ratio: 1.460
Max Drawdown: -34.7%
Avg Drawdown: -8.1%
Normalized Score: 1.974
Lookback periods: [50, 50, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 3m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,796,731,139
Annual Return: 43.60%
Sharpe Ratio: 1.56916
Sortino Ratio: 1.470
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.033
Lookback periods: [50, 50, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.397
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 3m 55sRunning iteration 761/1500... Est. remaining: 3m 52sRunning iteration 771/1500... Est. remaining: 3m 49sRunning iteration 781/1500... Est. remaining: 3m 46sRunning iteration 791/1500... Est. remaining: 3m 42sRunning iteration 801/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 36sRunning iteration 821/1500... Est. remaining: 3m 33sRunning iteration 831/1500... Est. remaining: 3m 30sRunning iteration 841/1500... Est. remaining: 3m 28sRunning iteration 851/1500... Est. remaining: 3m 26sRunning iteration 861/1500... Est. remaining: 3m 25sRunning iteration 871/1500... Est. remaining: 3m 23sRunning iteration 881/1500... Est. remaining: 3m 21sRunning iteration 891/1500... Est. remaining: 3m 19sRunning iteration 901/1500... Est. remaining: 3m 17sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 15sRunning iteration 921/1500... Est. remaining: 3m 12sRunning iteration 931/1500... Est. remaining: 3m 10sRunning iteration 941/1500... Est. remaining: 3m 8sRunning iteration 951/1500... Est. remaining: 3m 5sRunning iteration 961/1500... Est. remaining: 3m 3sRunning iteration 971/1500... Est. remaining: 3m 0sRunning iteration 981/1500... Est. remaining: 2m 58sRunning iteration 991/1500... Est. remaining: 2m 55sRunning iteration 1001/1500... Est. remaining: 2m 53sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 50sRunning iteration 1021/1500... Est. remaining: 2m 47sRunning iteration 1031/1500... Est. remaining: 2m 44sRunning iteration 1041/1500... Est. remaining: 2m 42sRunning iteration 1051/1500... Est. remaining: 2m 39sRunning iteration 1061/1500... Est. remaining: 2m 36sRunning iteration 1071/1500... Est. remaining: 2m 33sRunning iteration 1081/1500... Est. remaining: 2m 30sRunning iteration 1091/1500... Est. remaining: 2m 27sRunning iteration 1101/1500... Est. remaining: 2m 24sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 21sRunning iteration 1121/1500... Est. remaining: 2m 18sRunning iteration 1131/1500... Est. remaining: 2m 14sRunning iteration 1141/1500... Est. remaining: 2m 11sRunning iteration 1151/1500... Est. remaining: 2m 8sRunning iteration 1161/1500... Est. remaining: 2m 5sRunning iteration 1171/1500... Est. remaining: 2m 1sRunning iteration 1181/1500... Est. remaining: 1m 58sRunning iteration 1191/1500... Est. remaining: 1m 55sRunning iteration 1201/1500... Est. remaining: 1m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 48sRunning iteration 1221/1500... Est. remaining: 1m 45sRunning iteration 1231/1500... Est. remaining: 1m 41sRunning iteration 1241/1500... Est. remaining: 1m 38sRunning iteration 1251/1500... Est. remaining: 1m 34sRunning iteration 1261/1500... Est. remaining: 1m 31sRunning iteration 1271/1500... Est. remaining: 1m 27sRunning iteration 1281/1500... Est. remaining: 1m 23sRunning iteration 1291/1500... Est. remaining: 1m 20sRunning iteration 1301/1500... Est. remaining: 1m 16sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 12sRunning iteration 1321/1500... Est. remaining: 1m 9sRunning iteration 1331/1500... Est. remaining: 1m 5sRunning iteration 1341/1500... Est. remaining: 1m 1sRunning iteration 1351/1500... Est. remaining: 0m 58sRunning iteration 1361/1500... Est. remaining: 0m 54sRunning iteration 1371/1500... Est. remaining: 0m 50sRunning iteration 1381/1500... Est. remaining: 0m 46sRunning iteration 1391/1500... Est. remaining: 0m 42sRunning iteration 1401/1500... Est. remaining: 0m 39sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 35sRunning iteration 1421/1500... Est. remaining: 0m 31sRunning iteration 1431/1500... Est. remaining: 0m 27sRunning iteration 1441/1500... Est. remaining: 0m 23sRunning iteration 1451/1500... Est. remaining: 0m 19sRunning iteration 1461/1500... Est. remaining: 0m 15sRunning iteration 1471/1500... Est. remaining: 0m 11sRunning iteration 1481/1500... Est. remaining: 0m 7sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 10.0 minutes
Best normalized score: 2.40
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.3972)

Monte Carlo simulation completed in 10.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Mon Aug 25 16:24:29 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,988,016,384
Annual Return: 42.19%
Sharpe Ratio: 1.40524
Sortino Ratio: 1.347
Max Drawdown: -61.4%
Avg Drawdown: -12.9%
Normalized Score: -0.383
Lookback periods: [105, 135, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,953,520,994
Annual Return: 45.04%
Sharpe Ratio: 1.49563
Sortino Ratio: 1.451
Max Drawdown: -61.3%
Avg Drawdown: -12.7%
Normalized Score: 0.041
Lookback periods: [116, 157, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 31sRunning iteration 31/1500... Est. remaining: 16m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,087,290,608
Annual Return: 47.50%
Sharpe Ratio: 1.54065
Sortino Ratio: 1.508
Max Drawdown: -63.5%
Avg Drawdown: -11.9%
Normalized Score: 0.308
Lookback periods: [155, 182, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 16m 28sRunning iteration 51/1500... Est. remaining: 15m 31sRunning iteration 61/1500... Est. remaining: 14m 51sRunning iteration 71/1500... Est. remaining: 14m 21sRunning iteration 81/1500... Est. remaining: 13m 57sRunning iteration 91/1500... Est. remaining: 13m 37sRunning iteration 101/1500... Est. remaining: 13m 20sbest_combination: {'lookbacks': [155, 182, 188], 'score': np.float64(0.30836018497631856), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,357,042,766
Annual Return: 45.45%
Sharpe Ratio: 1.50729
Sortino Ratio: 1.475
Max Drawdown: -56.1%
Avg Drawdown: -12.5%
Normalized Score: 0.312
Lookback periods: [133, 134, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 13m 21sRunning iteration 121/1500... Est. remaining: 13m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,870,000,010
Annual Return: 41.94%
Sharpe Ratio: 1.45124
Sortino Ratio: 1.370
Max Drawdown: -51.1%
Avg Drawdown: -10.6%
Normalized Score: 0.338
Lookback periods: [50, 96, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 7sRunning iteration 141/1500... Est. remaining: 12m 55sRunning iteration 151/1500... Est. remaining: 12m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,396,042,220
Annual Return: 47.69%
Sharpe Ratio: 1.55824
Sortino Ratio: 1.514
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.747
Lookback periods: [157, 159, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 12m 43sRunning iteration 171/1500... Est. remaining: 12m 32sRunning iteration 181/1500... Est. remaining: 12m 22sRunning iteration 191/1500... Est. remaining: 12m 14sRunning iteration 201/1500... Est. remaining: 12m 4sbest_combination: {'lookbacks': [157, 159, 176], 'score': np.float64(0.7470817713334875), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 55sRunning iteration 221/1500... Est. remaining: 11m 46sRunning iteration 231/1500... Est. remaining: 11m 38sRunning iteration 241/1500... Est. remaining: 11m 30sRunning iteration 251/1500... Est. remaining: 11m 22sRunning iteration 261/1500... Est. remaining: 11m 15sRunning iteration 271/1500... Est. remaining: 11m 7sRunning iteration 281/1500... Est. remaining: 11m 0sRunning iteration 291/1500... Est. remaining: 10m 53sRunning iteration 301/1500... Est. remaining: 10m 46sbest_combination: {'lookbacks': [157, 159, 176], 'score': np.float64(0.7470817713334875), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 39sRunning iteration 321/1500... Est. remaining: 10m 32sRunning iteration 331/1500... Est. remaining: 10m 25sRunning iteration 341/1500... Est. remaining: 10m 19sRunning iteration 351/1500... Est. remaining: 10m 12sRunning iteration 361/1500... Est. remaining: 10m 6sRunning iteration 371/1500... Est. remaining: 10m 0sRunning iteration 381/1500... Est. remaining: 9m 54sRunning iteration 391/1500... Est. remaining: 9m 48sRunning iteration 401/1500... Est. remaining: 9m 42sbest_combination: {'lookbacks': [157, 159, 176], 'score': np.float64(0.7470817713334875), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,155,799,392
Annual Return: 48.10%
Sharpe Ratio: 1.58002
Sortino Ratio: 1.531
Max Drawdown: -56.0%
Avg Drawdown: -11.0%
Normalized Score: 0.791
Lookback periods: [138, 156, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 33sRunning iteration 431/1500... Est. remaining: 9m 27sRunning iteration 441/1500... Est. remaining: 9m 21sRunning iteration 451/1500... Est. remaining: 9m 15sRunning iteration 461/1500... Est. remaining: 9m 9sRunning iteration 471/1500... Est. remaining: 9m 3sRunning iteration 481/1500... Est. remaining: 8m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,890,149,913
Annual Return: 50.07%
Sharpe Ratio: 1.61380
Sortino Ratio: 1.581
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.832
Lookback periods: [181, 189, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 8m 54sRunning iteration 501/1500... Est. remaining: 8m 48sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.8319998694184301), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 42sRunning iteration 521/1500... Est. remaining: 8m 37sRunning iteration 531/1500... Est. remaining: 8m 31sRunning iteration 541/1500... Est. remaining: 8m 25sRunning iteration 551/1500... Est. remaining: 8m 19sRunning iteration 561/1500... Est. remaining: 8m 14sRunning iteration 571/1500... Est. remaining: 8m 8sRunning iteration 581/1500... Est. remaining: 8m 2sRunning iteration 591/1500... Est. remaining: 7m 57sRunning iteration 601/1500... Est. remaining: 7m 51sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.8319998694184301), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 46sRunning iteration 621/1500... Est. remaining: 7m 40sRunning iteration 631/1500... Est. remaining: 7m 35sRunning iteration 641/1500... Est. remaining: 7m 29sRunning iteration 651/1500... Est. remaining: 7m 24sRunning iteration 661/1500... Est. remaining: 7m 18sRunning iteration 671/1500... Est. remaining: 7m 13sRunning iteration 681/1500... Est. remaining: 7m 7sRunning iteration 691/1500... Est. remaining: 7m 2sRunning iteration 701/1500... Est. remaining: 6m 56sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.8319998694184301), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 51sRunning iteration 721/1500... Est. remaining: 6m 46sRunning iteration 731/1500... Est. remaining: 6m 40sRunning iteration 741/1500... Est. remaining: 6m 35sRunning iteration 751/1500... Est. remaining: 6m 29sRunning iteration 761/1500... Est. remaining: 6m 24sRunning iteration 771/1500... Est. remaining: 6m 19sRunning iteration 781/1500... Est. remaining: 6m 13sRunning iteration 791/1500... Est. remaining: 6m 8sRunning iteration 801/1500... Est. remaining: 6m 3sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.8319998694184301), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 57sRunning iteration 821/1500... Est. remaining: 5m 52sRunning iteration 831/1500... Est. remaining: 5m 47sRunning iteration 841/1500... Est. remaining: 5m 41sRunning iteration 851/1500... Est. remaining: 5m 36sRunning iteration 861/1500... Est. remaining: 5m 31sRunning iteration 871/1500... Est. remaining: 5m 26sRunning iteration 881/1500... Est. remaining: 5m 20sRunning iteration 891/1500... Est. remaining: 5m 15sRunning iteration 901/1500... Est. remaining: 5m 10sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.8319998694184301), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 4sRunning iteration 921/1500... Est. remaining: 4m 59sRunning iteration 931/1500... Est. remaining: 4m 54sRunning iteration 941/1500... Est. remaining: 4m 49sRunning iteration 951/1500... Est. remaining: 4m 43sRunning iteration 961/1500... Est. remaining: 4m 38sRunning iteration 971/1500... Est. remaining: 4m 33sRunning iteration 981/1500... Est. remaining: 4m 28sRunning iteration 991/1500... Est. remaining: 4m 23sRunning iteration 1001/1500... Est. remaining: 4m 17sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.8319998694184301), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 12sRunning iteration 1021/1500... Est. remaining: 4m 7sRunning iteration 1031/1500... Est. remaining: 4m 2sRunning iteration 1041/1500... Est. remaining: 3m 57sRunning iteration 1051/1500... Est. remaining: 3m 51sRunning iteration 1061/1500... Est. remaining: 3m 46sRunning iteration 1071/1500... Est. remaining: 3m 41sRunning iteration 1081/1500... Est. remaining: 3m 36sRunning iteration 1091/1500... Est. remaining: 3m 31sRunning iteration 1101/1500... Est. remaining: 3m 25sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.8319998694184301), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 20sRunning iteration 1121/1500... Est. remaining: 3m 15sRunning iteration 1131/1500... Est. remaining: 3m 10sRunning iteration 1141/1500... Est. remaining: 3m 5sRunning iteration 1151/1500... Est. remaining: 3m 0sRunning iteration 1161/1500... Est. remaining: 2m 54sRunning iteration 1171/1500... Est. remaining: 2m 49sRunning iteration 1181/1500... Est. remaining: 2m 44sRunning iteration 1191/1500... Est. remaining: 2m 39sRunning iteration 1201/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.8319998694184301), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 23sRunning iteration 1231/1500... Est. remaining: 2m 18sRunning iteration 1241/1500... Est. remaining: 2m 13sRunning iteration 1251/1500... Est. remaining: 2m 8sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 47sRunning iteration 1301/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.8319998694184301), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.8319998694184301), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 0.83
best_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.8319998694184301), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [181, 189, 196] (score: 0.8320)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [181, 189, 196] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 122 selections (29.3%)
2. sp500_hma: 99 selections (23.8%)
3. naz100_pine: 84 selections (20.2%)
4. naz100_pi: 72 selections (17.3%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,890,149,913.25
Average Annualized Gain: 50.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Mon Aug 25 16:37:26 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,255,827,211
Annual Return: 40.32%
Sharpe Ratio: 1.35899
Sortino Ratio: 1.289
Max Drawdown: -56.5%
Avg Drawdown: -13.4%
Normalized Score: -0.622
Lookback periods: [87, 129, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $995,207,418
Annual Return: 39.38%
Sharpe Ratio: 1.35209
Sortino Ratio: 1.279
Max Drawdown: -52.3%
Avg Drawdown: -11.3%
Normalized Score: -0.325
Lookback periods: [80, 113, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 26m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,100,516,844
Annual Return: 46.11%
Sharpe Ratio: 1.53304
Sortino Ratio: 1.484
Max Drawdown: -58.5%
Avg Drawdown: -11.8%
Normalized Score: 0.445
Lookback periods: [136, 150, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 20m 53sRunning iteration 31/1500... Est. remaining: 17m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,890,609,492
Annual Return: 47.38%
Sharpe Ratio: 1.56305
Sortino Ratio: 1.523
Max Drawdown: -61.3%
Avg Drawdown: -12.1%
Normalized Score: 0.513
Lookback periods: [128, 152, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,516,132,349
Annual Return: 47.15%
Sharpe Ratio: 1.54556
Sortino Ratio: 1.515
Max Drawdown: -59.7%
Avg Drawdown: -11.2%
Normalized Score: 0.618
Lookback periods: [145, 172, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 16m 41sRunning iteration 61/1500... Est. remaining: 15m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,322,903,634
Annual Return: 47.02%
Sharpe Ratio: 1.53986
Sortino Ratio: 1.492
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: 0.699
Lookback periods: [156, 159, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 40sRunning iteration 81/1500... Est. remaining: 15m 7sRunning iteration 91/1500... Est. remaining: 14m 40sRunning iteration 101/1500... Est. remaining: 14m 18sbest_combination: {'lookbacks': [156, 159, 179], 'score': np.float64(0.6994885376434823), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 59sRunning iteration 121/1500... Est. remaining: 13m 42sRunning iteration 131/1500... Est. remaining: 13m 27sRunning iteration 141/1500... Est. remaining: 13m 13sRunning iteration 151/1500... Est. remaining: 13m 1sRunning iteration 161/1500... Est. remaining: 12m 50sRunning iteration 171/1500... Est. remaining: 12m 39sRunning iteration 181/1500... Est. remaining: 12m 29sRunning iteration 191/1500... Est. remaining: 12m 19sRunning iteration 201/1500... Est. remaining: 12m 10sbest_combination: {'lookbacks': [156, 159, 179], 'score': np.float64(0.6994885376434823), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 2sRunning iteration 221/1500... Est. remaining: 11m 53sRunning iteration 231/1500... Est. remaining: 11m 45sRunning iteration 241/1500... Est. remaining: 11m 37sRunning iteration 251/1500... Est. remaining: 11m 29sRunning iteration 261/1500... Est. remaining: 11m 22sRunning iteration 271/1500... Est. remaining: 11m 14sRunning iteration 281/1500... Est. remaining: 11m 7sRunning iteration 291/1500... Est. remaining: 11m 0sRunning iteration 301/1500... Est. remaining: 10m 53sbest_combination: {'lookbacks': [156, 159, 179], 'score': np.float64(0.6994885376434823), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,389,202,382
Annual Return: 47.06%
Sharpe Ratio: 1.55777
Sortino Ratio: 1.509
Max Drawdown: -55.0%
Avg Drawdown: -11.1%
Normalized Score: 0.762
Lookback periods: [141, 157, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/1500... Est. remaining: 10m 44sRunning iteration 331/1500... Est. remaining: 10m 38sRunning iteration 341/1500... Est. remaining: 10m 31sRunning iteration 351/1500... Est. remaining: 10m 25sRunning iteration 361/1500... Est. remaining: 10m 18sRunning iteration 371/1500... Est. remaining: 10m 12sRunning iteration 381/1500... Est. remaining: 10m 5sRunning iteration 391/1500... Est. remaining: 9m 59sRunning iteration 401/1500... Est. remaining: 9m 53sbest_combination: {'lookbacks': [141, 157, 178], 'score': np.float64(0.7615476884330974), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 46sRunning iteration 421/1500... Est. remaining: 9m 40sRunning iteration 431/1500... Est. remaining: 9m 34sRunning iteration 441/1500... Est. remaining: 9m 28sRunning iteration 451/1500... Est. remaining: 9m 22sRunning iteration 461/1500... Est. remaining: 9m 16sRunning iteration 471/1500... Est. remaining: 9m 10sRunning iteration 481/1500... Est. remaining: 9m 4sRunning iteration 491/1500... Est. remaining: 8m 59sRunning iteration 501/1500... Est. remaining: 8m 53sbest_combination: {'lookbacks': [141, 157, 178], 'score': np.float64(0.7615476884330974), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 47sRunning iteration 521/1500... Est. remaining: 8m 41sRunning iteration 531/1500... Est. remaining: 8m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,115,157,247
Annual Return: 47.52%
Sharpe Ratio: 1.57077
Sortino Ratio: 1.522
Max Drawdown: -56.0%
Avg Drawdown: -11.4%
Normalized Score: 0.764
Lookback periods: [138, 156, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 8m 32sRunning iteration 551/1500... Est. remaining: 8m 26sRunning iteration 561/1500... Est. remaining: 8m 20sRunning iteration 571/1500... Est. remaining: 8m 15sRunning iteration 581/1500... Est. remaining: 8m 9sRunning iteration 591/1500... Est. remaining: 8m 3sRunning iteration 601/1500... Est. remaining: 7m 58sbest_combination: {'lookbacks': [138, 156, 186], 'score': np.float64(0.7637974613171514), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,166,702,711
Annual Return: 49.45%
Sharpe Ratio: 1.58805
Sortino Ratio: 1.548
Max Drawdown: -59.6%
Avg Drawdown: -11.0%
Normalized Score: 0.908
Lookback periods: [183, 188, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 7m 48sRunning iteration 631/1500... Est. remaining: 7m 43sRunning iteration 641/1500... Est. remaining: 7m 37sRunning iteration 651/1500... Est. remaining: 7m 31sRunning iteration 661/1500... Est. remaining: 7m 26sRunning iteration 671/1500... Est. remaining: 7m 20sRunning iteration 681/1500... Est. remaining: 7m 15sRunning iteration 691/1500... Est. remaining: 7m 9sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [183, 188, 188], 'score': np.float64(0.9077649467689719), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 58sRunning iteration 721/1500... Est. remaining: 6m 52sRunning iteration 731/1500... Est. remaining: 6m 47sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 36sRunning iteration 761/1500... Est. remaining: 6m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,890,149,913
Annual Return: 50.07%
Sharpe Ratio: 1.61380
Sortino Ratio: 1.581
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.991
Lookback periods: [181, 189, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 771/1500... Est. remaining: 6m 26sRunning iteration 781/1500... Est. remaining: 6m 21sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.9910745921198345), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 4sRunning iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 54sRunning iteration 841/1500... Est. remaining: 5m 48sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 37sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 27sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.9910745921198345), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 44sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.9910745921198345), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.9910745921198345), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.9910745921198345), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.9910745921198345), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.9910745921198345), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $13,088,205,072
Annual Return: 50.14%
Sharpe Ratio: 1.61612
Sortino Ratio: 1.580
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 1.045
Lookback periods: [178, 189, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.04
best_combination: {'lookbacks': [178, 189, 196], 'score': np.float64(1.0448162783199793), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [178, 189, 196] (score: 1.0448)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [178, 189, 196] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 121 selections (29.1%)
2. sp500_hma: 102 selections (24.5%)
3. naz100_pine: 84 selections (20.2%)
4. naz100_pi: 68 selections (16.3%)
5. cash: 41 selections (9.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $13,088,205,072.40
Average Annualized Gain: 50.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Mon Aug 25 16:50:37 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $516,018,395
Annual Return: 36.76%
Sharpe Ratio: 1.26353
Sortino Ratio: 1.186
Max Drawdown: -69.7%
Avg Drawdown: -13.2%
Normalized Score: -1.795
Lookback periods: [58, 154, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,199,903,682
Annual Return: 44.16%
Sharpe Ratio: 1.45714
Sortino Ratio: 1.412
Max Drawdown: -56.4%
Avg Drawdown: -12.6%
Normalized Score: -0.316
Lookback periods: [130, 147, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 26m 44sRunning iteration 21/1500... Est. remaining: 19m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,407,181,086
Annual Return: 44.42%
Sharpe Ratio: 1.45006
Sortino Ratio: 1.409
Max Drawdown: -59.6%
Avg Drawdown: -11.8%
Normalized Score: -0.265
Lookback periods: [161, 185, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 17m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,115,671,802
Annual Return: 46.12%
Sharpe Ratio: 1.50550
Sortino Ratio: 1.474
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.098
Lookback periods: [146, 171, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 4sRunning iteration 51/1500... Est. remaining: 16m 1sRunning iteration 61/1500... Est. remaining: 15m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,892,047,852
Annual Return: 41.99%
Sharpe Ratio: 1.48916
Sortino Ratio: 1.385
Max Drawdown: -35.6%
Avg Drawdown: -9.5%
Normalized Score: 0.921
Lookback periods: [52, 52, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 11sRunning iteration 81/1500... Est. remaining: 14m 41sRunning iteration 91/1500... Est. remaining: 14m 17sRunning iteration 101/1500... Est. remaining: 13m 57sbest_combination: {'lookbacks': [52, 52, 84], 'score': np.float64(0.9205000369732652), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 40sRunning iteration 121/1500... Est. remaining: 13m 26sRunning iteration 131/1500... Est. remaining: 13m 12sRunning iteration 141/1500... Est. remaining: 13m 0sRunning iteration 151/1500... Est. remaining: 12m 48sRunning iteration 161/1500... Est. remaining: 12m 38sRunning iteration 171/1500... Est. remaining: 12m 27sRunning iteration 181/1500... Est. remaining: 12m 18sRunning iteration 191/1500... Est. remaining: 12m 9sRunning iteration 201/1500... Est. remaining: 12m 0sbest_combination: {'lookbacks': [52, 52, 84], 'score': np.float64(0.9205000369732652), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 52sRunning iteration 221/1500... Est. remaining: 11m 44sRunning iteration 231/1500... Est. remaining: 11m 37sRunning iteration 241/1500... Est. remaining: 11m 29sRunning iteration 251/1500... Est. remaining: 11m 22sRunning iteration 261/1500... Est. remaining: 11m 15sRunning iteration 271/1500... Est. remaining: 11m 8sRunning iteration 281/1500... Est. remaining: 11m 1sRunning iteration 291/1500... Est. remaining: 10m 54sRunning iteration 301/1500... Est. remaining: 10m 47sbest_combination: {'lookbacks': [52, 52, 84], 'score': np.float64(0.9205000369732652), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,421,397,372
Annual Return: 43.00%
Sharpe Ratio: 1.52981
Sortino Ratio: 1.443
Max Drawdown: -35.6%
Avg Drawdown: -9.4%
Normalized Score: 1.121
Lookback periods: [50, 53, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 10m 45sRunning iteration 321/1500... Est. remaining: 10m 39sRunning iteration 331/1500... Est. remaining: 10m 32sRunning iteration 341/1500... Est. remaining: 10m 26sRunning iteration 351/1500... Est. remaining: 10m 19sRunning iteration 361/1500... Est. remaining: 10m 13sRunning iteration 371/1500... Est. remaining: 10m 7sRunning iteration 381/1500... Est. remaining: 10m 0sRunning iteration 391/1500... Est. remaining: 9m 54sRunning iteration 401/1500... Est. remaining: 9m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,357,528,316
Annual Return: 42.89%
Sharpe Ratio: 1.57054
Sortino Ratio: 1.463
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.468
Lookback periods: [50, 57, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [50, 57, 98], 'score': np.float64(1.4684225707681904), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 45sRunning iteration 421/1500... Est. remaining: 9m 39sRunning iteration 431/1500... Est. remaining: 9m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,622,827,200
Annual Return: 44.68%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.688
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 30sRunning iteration 451/1500... Est. remaining: 9m 24sRunning iteration 461/1500... Est. remaining: 9m 18sRunning iteration 471/1500... Est. remaining: 9m 12sRunning iteration 481/1500... Est. remaining: 9m 6sRunning iteration 491/1500... Est. remaining: 9m 0sRunning iteration 501/1500... Est. remaining: 8m 54sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.6878080551992074), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 48sRunning iteration 521/1500... Est. remaining: 8m 42sRunning iteration 531/1500... Est. remaining: 8m 36sRunning iteration 541/1500... Est. remaining: 8m 30sRunning iteration 551/1500... Est. remaining: 8m 24sRunning iteration 561/1500... Est. remaining: 8m 19sRunning iteration 571/1500... Est. remaining: 8m 13sRunning iteration 581/1500... Est. remaining: 8m 7sRunning iteration 591/1500... Est. remaining: 8m 2sRunning iteration 601/1500... Est. remaining: 7m 56sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.6878080551992074), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 50sRunning iteration 621/1500... Est. remaining: 7m 44sRunning iteration 631/1500... Est. remaining: 7m 39sRunning iteration 641/1500... Est. remaining: 7m 33sRunning iteration 651/1500... Est. remaining: 7m 27sRunning iteration 661/1500... Est. remaining: 7m 22sRunning iteration 671/1500... Est. remaining: 7m 16sRunning iteration 681/1500... Est. remaining: 7m 11sRunning iteration 691/1500... Est. remaining: 7m 5sRunning iteration 701/1500... Est. remaining: 7m 0sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.6878080551992074), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 54sRunning iteration 721/1500... Est. remaining: 6m 49sRunning iteration 731/1500... Est. remaining: 6m 43sRunning iteration 741/1500... Est. remaining: 6m 38sRunning iteration 751/1500... Est. remaining: 6m 32sRunning iteration 761/1500... Est. remaining: 6m 27sRunning iteration 771/1500... Est. remaining: 6m 22sRunning iteration 781/1500... Est. remaining: 6m 16sRunning iteration 791/1500... Est. remaining: 6m 11sRunning iteration 801/1500... Est. remaining: 6m 5sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.6878080551992074), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 0sRunning iteration 821/1500... Est. remaining: 5m 55sRunning iteration 831/1500... Est. remaining: 5m 49sRunning iteration 841/1500... Est. remaining: 5m 44sRunning iteration 851/1500... Est. remaining: 5m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.799
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 5m 34sRunning iteration 871/1500... Est. remaining: 5m 29sRunning iteration 881/1500... Est. remaining: 5m 23sRunning iteration 891/1500... Est. remaining: 5m 18sRunning iteration 901/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.799496593298511), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 7sRunning iteration 921/1500... Est. remaining: 5m 2sRunning iteration 931/1500... Est. remaining: 4m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.930
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 4m 52sRunning iteration 951/1500... Est. remaining: 4m 47sRunning iteration 961/1500... Est. remaining: 4m 41sRunning iteration 971/1500... Est. remaining: 4m 36sRunning iteration 981/1500... Est. remaining: 4m 31sRunning iteration 991/1500... Est. remaining: 4m 25sRunning iteration 1001/1500... Est. remaining: 4m 20sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.93027753183162), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 9sRunning iteration 1031/1500... Est. remaining: 4m 4sRunning iteration 1041/1500... Est. remaining: 3m 59sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 48sRunning iteration 1071/1500... Est. remaining: 3m 43sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 32sRunning iteration 1101/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.93027753183162), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 22sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 11sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.93027753183162), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.93027753183162), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.93027753183162), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 1.93
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.93027753183162), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9303)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Mon Aug 25 17:03:36 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $316,969,717
Annual Return: 34.85%
Sharpe Ratio: 1.23658
Sortino Ratio: 1.138
Max Drawdown: -52.3%
Avg Drawdown: -12.5%
Normalized Score: -1.052
Lookback periods: [51, 88, 116] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,671,902,983
Annual Return: 43.41%
Sharpe Ratio: 1.42700
Sortino Ratio: 1.389
Max Drawdown: -68.2%
Avg Drawdown: -12.6%
Normalized Score: -0.401
Lookback periods: [117, 171, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,905,137,831
Annual Return: 44.99%
Sharpe Ratio: 1.48023
Sortino Ratio: 1.430
Max Drawdown: -60.5%
Avg Drawdown: -12.7%
Normalized Score: 0.026
Lookback periods: [128, 181, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,340,684,893
Annual Return: 45.43%
Sharpe Ratio: 1.50258
Sortino Ratio: 1.463
Max Drawdown: -57.2%
Avg Drawdown: -11.6%
Normalized Score: 0.447
Lookback periods: [137, 153, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 32m 46sRunning iteration 21/1500... Est. remaining: 22m 23sRunning iteration 31/1500... Est. remaining: 18m 50sRunning iteration 41/1500... Est. remaining: 17m 3sRunning iteration 51/1500... Est. remaining: 16m 0sRunning iteration 61/1500... Est. remaining: 15m 16sRunning iteration 71/1500... Est. remaining: 14m 42sRunning iteration 81/1500... Est. remaining: 14m 16sRunning iteration 91/1500... Est. remaining: 13m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,143,528,786
Annual Return: 46.15%
Sharpe Ratio: 1.50800
Sortino Ratio: 1.464
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.534
Lookback periods: [168, 186, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 13m 53sbest_combination: {'lookbacks': [168, 186, 188], 'score': np.float64(0.5336326029299482), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 37sRunning iteration 121/1500... Est. remaining: 13m 21sRunning iteration 131/1500... Est. remaining: 13m 7sRunning iteration 141/1500... Est. remaining: 12m 55sRunning iteration 151/1500... Est. remaining: 12m 43sRunning iteration 161/1500... Est. remaining: 12m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,299,995,703
Annual Return: 48.18%
Sharpe Ratio: 1.58523
Sortino Ratio: 1.544
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 0.940
Lookback periods: [128, 157, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 12m 33sRunning iteration 181/1500... Est. remaining: 12m 23sRunning iteration 191/1500... Est. remaining: 12m 14sRunning iteration 201/1500... Est. remaining: 12m 5sbest_combination: {'lookbacks': [128, 157, 178], 'score': np.float64(0.939615021797169), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 56sRunning iteration 221/1500... Est. remaining: 11m 47sRunning iteration 231/1500... Est. remaining: 11m 39sRunning iteration 241/1500... Est. remaining: 11m 31sRunning iteration 251/1500... Est. remaining: 11m 24sRunning iteration 261/1500... Est. remaining: 11m 16sRunning iteration 271/1500... Est. remaining: 11m 10sRunning iteration 281/1500... Est. remaining: 11m 3sRunning iteration 291/1500... Est. remaining: 10m 57sRunning iteration 301/1500... Est. remaining: 10m 51sbest_combination: {'lookbacks': [128, 157, 178], 'score': np.float64(0.939615021797169), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 44sRunning iteration 321/1500... Est. remaining: 19m 42sRunning iteration 331/1500... Est. remaining: 19m 15sRunning iteration 341/1500... Est. remaining: 25m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,684,482,987
Annual Return: 43.43%
Sharpe Ratio: 1.53307
Sortino Ratio: 1.444
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.600
Lookback periods: [50, 97, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 351/1500... Est. remaining: 24m 51sRunning iteration 361/1500... Est. remaining: 24m 13sRunning iteration 371/1500... Est. remaining: 23m 37sRunning iteration 381/1500... Est. remaining: 23m 2sRunning iteration 391/1500... Est. remaining: 22m 29sRunning iteration 401/1500... Est. remaining: 21m 57sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.6003287390307726), 'visits': 1}
Running iteration 411/1500... Est. remaining: 21m 27sRunning iteration 421/1500... Est. remaining: 20m 58sRunning iteration 431/1500... Est. remaining: 20m 30sRunning iteration 441/1500... Est. remaining: 20m 2sRunning iteration 451/1500... Est. remaining: 19m 36sRunning iteration 461/1500... Est. remaining: 19m 11sRunning iteration 471/1500... Est. remaining: 18m 47sRunning iteration 481/1500... Est. remaining: 18m 23sRunning iteration 491/1500... Est. remaining: 18m 1sRunning iteration 501/1500... Est. remaining: 17m 39sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.6003287390307726), 'visits': 1}
Running iteration 511/1500... Est. remaining: 17m 17sRunning iteration 521/1500... Est. remaining: 16m 56sRunning iteration 531/1500... Est. remaining: 16m 36sRunning iteration 541/1500... Est. remaining: 16m 17sRunning iteration 551/1500... Est. remaining: 15m 58sRunning iteration 561/1500... Est. remaining: 15m 40sRunning iteration 571/1500... Est. remaining: 15m 21sRunning iteration 581/1500... Est. remaining: 15m 4sRunning iteration 591/1500... Est. remaining: 14m 47sRunning iteration 601/1500... Est. remaining: 14m 30sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.6003287390307726), 'visits': 1}
Running iteration 611/1500... Est. remaining: 14m 14sRunning iteration 621/1500... Est. remaining: 13m 58sRunning iteration 631/1500... Est. remaining: 13m 42sRunning iteration 641/1500... Est. remaining: 13m 26sRunning iteration 651/1500... Est. remaining: 13m 11sRunning iteration 661/1500... Est. remaining: 12m 57sRunning iteration 671/1500... Est. remaining: 12m 42sRunning iteration 681/1500... Est. remaining: 12m 28sRunning iteration 691/1500... Est. remaining: 12m 14sRunning iteration 701/1500... Est. remaining: 12m 1sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.6003287390307726), 'visits': 1}
Running iteration 711/1500... Est. remaining: 11m 47sRunning iteration 721/1500... Est. remaining: 11m 34sRunning iteration 731/1500... Est. remaining: 11m 21sRunning iteration 741/1500... Est. remaining: 11m 8sRunning iteration 751/1500... Est. remaining: 10m 56sRunning iteration 761/1500... Est. remaining: 10m 43sRunning iteration 771/1500... Est. remaining: 10m 31sRunning iteration 781/1500... Est. remaining: 10m 19sRunning iteration 791/1500... Est. remaining: 10m 7sRunning iteration 801/1500... Est. remaining: 9m 56sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.6003287390307726), 'visits': 1}
Running iteration 811/1500... Est. remaining: 9m 44sRunning iteration 821/1500... Est. remaining: 9m 33sRunning iteration 831/1500... Est. remaining: 9m 22sRunning iteration 841/1500... Est. remaining: 9m 11sRunning iteration 851/1500... Est. remaining: 9m 0sRunning iteration 861/1500... Est. remaining: 8m 49sRunning iteration 871/1500... Est. remaining: 8m 38sRunning iteration 881/1500... Est. remaining: 8m 28sRunning iteration 891/1500... Est. remaining: 8m 17sRunning iteration 901/1500... Est. remaining: 8m 7sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.6003287390307726), 'visits': 1}
Running iteration 911/1500... Est. remaining: 7m 57sRunning iteration 921/1500... Est. remaining: 7m 47sRunning iteration 931/1500... Est. remaining: 7m 37sRunning iteration 941/1500... Est. remaining: 7m 27sRunning iteration 951/1500... Est. remaining: 7m 18sRunning iteration 961/1500... Est. remaining: 7m 8sRunning iteration 971/1500... Est. remaining: 6m 59sRunning iteration 981/1500... Est. remaining: 6m 50sRunning iteration 991/1500... Est. remaining: 6m 40sRunning iteration 1001/1500... Est. remaining: 6m 31sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.6003287390307726), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 6m 22sRunning iteration 1021/1500... Est. remaining: 6m 13sRunning iteration 1031/1500... Est. remaining: 6m 4sRunning iteration 1041/1500... Est. remaining: 5m 55sRunning iteration 1051/1500... Est. remaining: 5m 46sRunning iteration 1061/1500... Est. remaining: 5m 37sRunning iteration 1071/1500... Est. remaining: 5m 28sRunning iteration 1081/1500... Est. remaining: 5m 20sRunning iteration 1091/1500... Est. remaining: 5m 11sRunning iteration 1101/1500... Est. remaining: 5m 3sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.6003287390307726), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 54sRunning iteration 1121/1500... Est. remaining: 4m 46sRunning iteration 1131/1500... Est. remaining: 4m 37sRunning iteration 1141/1500... Est. remaining: 4m 29sRunning iteration 1151/1500... Est. remaining: 4m 21sRunning iteration 1161/1500... Est. remaining: 4m 13sRunning iteration 1171/1500... Est. remaining: 4m 4sRunning iteration 1181/1500... Est. remaining: 3m 56sRunning iteration 1191/1500... Est. remaining: 3m 48sRunning iteration 1201/1500... Est. remaining: 3m 40sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.6003287390307726), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 32sRunning iteration 1221/1500... Est. remaining: 3m 25sRunning iteration 1231/1500... Est. remaining: 3m 17sRunning iteration 1241/1500... Est. remaining: 3m 9sRunning iteration 1251/1500... Est. remaining: 3m 1sRunning iteration 1261/1500... Est. remaining: 2m 54sRunning iteration 1271/1500... Est. remaining: 2m 46sRunning iteration 1281/1500... Est. remaining: 2m 38sRunning iteration 1291/1500... Est. remaining: 2m 31sRunning iteration 1301/1500... Est. remaining: 2m 23sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.6003287390307726), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 16sRunning iteration 1321/1500... Est. remaining: 2m 8sRunning iteration 1331/1500... Est. remaining: 2m 1sRunning iteration 1341/1500... Est. remaining: 1m 53sRunning iteration 1351/1500... Est. remaining: 1m 46sRunning iteration 1361/1500... Est. remaining: 1m 39sRunning iteration 1371/1500... Est. remaining: 1m 31sRunning iteration 1381/1500... Est. remaining: 1m 24sRunning iteration 1391/1500... Est. remaining: 1m 17sRunning iteration 1401/1500... Est. remaining: 1m 10sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.6003287390307726), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 3sRunning iteration 1421/1500... Est. remaining: 0m 55sRunning iteration 1431/1500... Est. remaining: 0m 48sRunning iteration 1441/1500... Est. remaining: 0m 41sRunning iteration 1451/1500... Est. remaining: 0m 34sRunning iteration 1461/1500... Est. remaining: 0m 27sRunning iteration 1471/1500... Est. remaining: 0m 20sRunning iteration 1481/1500... Est. remaining: 0m 13sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 17.2 minutes
Best normalized score: 1.60
best_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.6003287390307726), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 97, 98] (score: 1.6003)

Monte Carlo simulation completed in 17.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 97, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 122 selections (29.3%)
2. naz100_hma: 96 selections (23.1%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 67 selections (16.1%)
5. cash: 52 selections (12.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $2,684,482,987.25
Average Annualized Gain: 43.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Mon Aug 25 17:20:57 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,023,180,761
Annual Return: 43.92%
Sharpe Ratio: 1.46740
Sortino Ratio: 1.411
Max Drawdown: -66.0%
Avg Drawdown: -12.8%
Normalized Score: -0.227
Lookback periods: [121, 137, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,257,534,637
Annual Return: 44.23%
Sharpe Ratio: 1.46869
Sortino Ratio: 1.421
Max Drawdown: -65.6%
Avg Drawdown: -12.9%
Normalized Score: -0.185
Lookback periods: [111, 157, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,811,967,411
Annual Return: 41.81%
Sharpe Ratio: 1.45340
Sortino Ratio: 1.350
Max Drawdown: -55.9%
Avg Drawdown: -11.4%
Normalized Score: 0.101
Lookback periods: [51, 106, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,322,006,605
Annual Return: 40.53%
Sharpe Ratio: 1.43351
Sortino Ratio: 1.337
Max Drawdown: -52.1%
Avg Drawdown: -11.2%
Normalized Score: 0.139
Lookback periods: [52, 58, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 33sRunning iteration 31/1500... Est. remaining: 19m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,938,510,214
Annual Return: 45.02%
Sharpe Ratio: 1.48720
Sortino Ratio: 1.449
Max Drawdown: -59.8%
Avg Drawdown: -12.7%
Normalized Score: 0.177
Lookback periods: [133, 149, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,915,244,092
Annual Return: 46.74%
Sharpe Ratio: 1.53673
Sortino Ratio: 1.496
Max Drawdown: -62.4%
Avg Drawdown: -12.0%
Normalized Score: 0.373
Lookback periods: [127, 156, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 17m 15sRunning iteration 61/1500... Est. remaining: 16m 18sRunning iteration 71/1500... Est. remaining: 15m 35sRunning iteration 81/1500... Est. remaining: 15m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,183,775,765
Annual Return: 46.92%
Sharpe Ratio: 1.54568
Sortino Ratio: 1.502
Max Drawdown: -62.4%
Avg Drawdown: -11.5%
Normalized Score: 0.458
Lookback periods: [125, 158, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 55sRunning iteration 101/1500... Est. remaining: 14m 32sbest_combination: {'lookbacks': [125, 158, 173], 'score': np.float64(0.45841224172649514), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,988,541,762
Annual Return: 46.02%
Sharpe Ratio: 1.52710
Sortino Ratio: 1.479
Max Drawdown: -57.2%
Avg Drawdown: -12.4%
Normalized Score: 0.461
Lookback periods: [138, 139, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 26sRunning iteration 121/1500... Est. remaining: 14m 7sRunning iteration 131/1500... Est. remaining: 13m 49sRunning iteration 141/1500... Est. remaining: 13m 34sRunning iteration 151/1500... Est. remaining: 13m 20sRunning iteration 161/1500... Est. remaining: 13m 7sRunning iteration 171/1500... Est. remaining: 12m 55sRunning iteration 181/1500... Est. remaining: 12m 44sRunning iteration 191/1500... Est. remaining: 12m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,664,855,900
Annual Return: 44.72%
Sharpe Ratio: 1.50434
Sortino Ratio: 1.437
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: 0.647
Lookback periods: [102, 125, 127] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,630,699,402
Annual Return: 44.68%
Sharpe Ratio: 1.51599
Sortino Ratio: 1.452
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: 0.669
Lookback periods: [87, 110, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 12m 39sbest_combination: {'lookbacks': [87, 110, 144], 'score': np.float64(0.6693562789466552), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 29sRunning iteration 221/1500... Est. remaining: 12m 19sRunning iteration 231/1500... Est. remaining: 12m 9sRunning iteration 241/1500... Est. remaining: 12m 0sRunning iteration 251/1500... Est. remaining: 11m 50sRunning iteration 261/1500... Est. remaining: 11m 42sRunning iteration 271/1500... Est. remaining: 11m 33sRunning iteration 281/1500... Est. remaining: 11m 25sRunning iteration 291/1500... Est. remaining: 11m 17sRunning iteration 301/1500... Est. remaining: 11m 9sbest_combination: {'lookbacks': [87, 110, 144], 'score': np.float64(0.6693562789466552), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 2sRunning iteration 321/1500... Est. remaining: 10m 54sRunning iteration 331/1500... Est. remaining: 10m 47sRunning iteration 341/1500... Est. remaining: 10m 40sRunning iteration 351/1500... Est. remaining: 10m 33sRunning iteration 361/1500... Est. remaining: 10m 26sRunning iteration 371/1500... Est. remaining: 10m 19sRunning iteration 381/1500... Est. remaining: 10m 12sRunning iteration 391/1500... Est. remaining: 10m 6sRunning iteration 401/1500... Est. remaining: 9m 59sbest_combination: {'lookbacks': [87, 110, 144], 'score': np.float64(0.6693562789466552), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 53sRunning iteration 421/1500... Est. remaining: 9m 46sRunning iteration 431/1500... Est. remaining: 9m 40sRunning iteration 441/1500... Est. remaining: 9m 33sRunning iteration 451/1500... Est. remaining: 9m 27sRunning iteration 461/1500... Est. remaining: 9m 21sRunning iteration 471/1500... Est. remaining: 9m 15sRunning iteration 481/1500... Est. remaining: 9m 9sRunning iteration 491/1500... Est. remaining: 9m 3sRunning iteration 501/1500... Est. remaining: 8m 57sbest_combination: {'lookbacks': [87, 110, 144], 'score': np.float64(0.6693562789466552), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 51sRunning iteration 521/1500... Est. remaining: 8m 45sRunning iteration 531/1500... Est. remaining: 8m 39sRunning iteration 541/1500... Est. remaining: 8m 33sRunning iteration 551/1500... Est. remaining: 8m 27sRunning iteration 561/1500... Est. remaining: 8m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,568,202,840
Annual Return: 44.61%
Sharpe Ratio: 1.51326
Sortino Ratio: 1.444
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: 0.693
Lookback periods: [94, 126, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 8m 18sRunning iteration 581/1500... Est. remaining: 8m 12sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 0sbest_combination: {'lookbacks': [94, 126, 134], 'score': np.float64(0.6930893643463103), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 55sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 43sRunning iteration 641/1500... Est. remaining: 7m 38sRunning iteration 651/1500... Est. remaining: 7m 32sRunning iteration 661/1500... Est. remaining: 7m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,421,179,247
Annual Return: 40.82%
Sharpe Ratio: 1.45202
Sortino Ratio: 1.358
Max Drawdown: -41.9%
Avg Drawdown: -9.4%
Normalized Score: 0.812
Lookback periods: [50, 52, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 7m 22sRunning iteration 681/1500... Est. remaining: 7m 17sRunning iteration 691/1500... Est. remaining: 7m 11sRunning iteration 701/1500... Est. remaining: 7m 5sbest_combination: {'lookbacks': [50, 52, 128], 'score': np.float64(0.811773899315854), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,580,230,226
Annual Return: 41.25%
Sharpe Ratio: 1.46465
Sortino Ratio: 1.360
Max Drawdown: -41.9%
Avg Drawdown: -9.1%
Normalized Score: 0.890
Lookback periods: [50, 50, 132] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 711/1500... Est. remaining: 7m 1sRunning iteration 721/1500... Est. remaining: 6m 55sRunning iteration 731/1500... Est. remaining: 6m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,586,442,905
Annual Return: 41.27%
Sharpe Ratio: 1.46329
Sortino Ratio: 1.363
Max Drawdown: -41.9%
Avg Drawdown: -9.1%
Normalized Score: 0.894
Lookback periods: [50, 50, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 6m 46sRunning iteration 751/1500... Est. remaining: 6m 40sRunning iteration 761/1500... Est. remaining: 6m 34sRunning iteration 771/1500... Est. remaining: 6m 29sRunning iteration 781/1500... Est. remaining: 6m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,776,477,701
Annual Return: 41.73%
Sharpe Ratio: 1.48560
Sortino Ratio: 1.378
Max Drawdown: -41.9%
Avg Drawdown: -9.2%
Normalized Score: 0.958
Lookback periods: [50, 50, 133] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 6m 19sRunning iteration 801/1500... Est. remaining: 6m 13sbest_combination: {'lookbacks': [50, 50, 133], 'score': np.float64(0.9577229772735946), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 8sRunning iteration 821/1500... Est. remaining: 6m 2sRunning iteration 831/1500... Est. remaining: 5m 56sRunning iteration 841/1500... Est. remaining: 5m 51sRunning iteration 851/1500... Est. remaining: 5m 45sRunning iteration 861/1500... Est. remaining: 5m 40sRunning iteration 871/1500... Est. remaining: 5m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,172,923,839
Annual Return: 42.56%
Sharpe Ratio: 1.50797
Sortino Ratio: 1.412
Max Drawdown: -41.9%
Avg Drawdown: -9.0%
Normalized Score: 1.102
Lookback periods: [50, 50, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 881/1500... Est. remaining: 5m 30sRunning iteration 891/1500... Est. remaining: 5m 24sRunning iteration 901/1500... Est. remaining: 5m 19sbest_combination: {'lookbacks': [50, 50, 128], 'score': np.float64(1.1017396528933738), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 13sRunning iteration 921/1500... Est. remaining: 5m 8sRunning iteration 931/1500... Est. remaining: 5m 2sRunning iteration 941/1500... Est. remaining: 4m 57sRunning iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 40sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 30sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [50, 50, 128], 'score': np.float64(1.1017396528933738), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 3sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [50, 50, 128], 'score': np.float64(1.1017396528933738), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [50, 50, 128], 'score': np.float64(1.1017396528933738), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [50, 50, 128], 'score': np.float64(1.1017396528933738), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 50, 128], 'score': np.float64(1.1017396528933738), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.10
best_combination: {'lookbacks': [50, 50, 128], 'score': np.float64(1.1017396528933738), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 50, 128] (score: 1.1017)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 50, 128] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 102 selections (24.5%)
3. naz100_pine: 82 selections (19.7%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 50 selections (12.0%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $2,172,923,839.30
Average Annualized Gain: 42.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Mon Aug 25 17:34:06 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $712,400,050
Annual Return: 38.04%
Sharpe Ratio: 1.30012
Sortino Ratio: 1.221
Max Drawdown: -57.2%
Avg Drawdown: -12.2%
Normalized Score: -0.673
Lookback periods: [59, 150, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $450,870,432
Annual Return: 36.23%
Sharpe Ratio: 1.28715
Sortino Ratio: 1.195
Max Drawdown: -49.6%
Avg Drawdown: -11.0%
Normalized Score: -0.446
Lookback periods: [50, 98, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,746,614,480
Annual Return: 45.81%
Sharpe Ratio: 1.49099
Sortino Ratio: 1.453
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.308
Lookback periods: [158, 160, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 7sRunning iteration 21/1500... Est. remaining: 20m 33sRunning iteration 31/1500... Est. remaining: 17m 32sRunning iteration 41/1500... Est. remaining: 16m 3sRunning iteration 51/1500... Est. remaining: 15m 11sRunning iteration 61/1500... Est. remaining: 14m 33sRunning iteration 71/1500... Est. remaining: 14m 6sRunning iteration 81/1500... Est. remaining: 13m 43sRunning iteration 91/1500... Est. remaining: 13m 25sRunning iteration 101/1500... Est. remaining: 13m 9sbest_combination: {'lookbacks': [158, 160, 199], 'score': np.float64(0.3075473413114712), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 55sRunning iteration 121/1500... Est. remaining: 12m 43sRunning iteration 131/1500... Est. remaining: 12m 32sRunning iteration 141/1500... Est. remaining: 12m 22sRunning iteration 151/1500... Est. remaining: 12m 12sRunning iteration 161/1500... Est. remaining: 12m 3sRunning iteration 171/1500... Est. remaining: 11m 55sRunning iteration 181/1500... Est. remaining: 11m 47sRunning iteration 191/1500... Est. remaining: 11m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,818,629,517
Annual Return: 45.87%
Sharpe Ratio: 1.51487
Sortino Ratio: 1.474
Max Drawdown: -57.2%
Avg Drawdown: -11.9%
Normalized Score: 0.340
Lookback periods: [134, 139, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 11m 40sbest_combination: {'lookbacks': [134, 139, 170], 'score': np.float64(0.33979625859728657), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 33sRunning iteration 221/1500... Est. remaining: 11m 26sRunning iteration 231/1500... Est. remaining: 11m 19sRunning iteration 241/1500... Est. remaining: 11m 13sRunning iteration 251/1500... Est. remaining: 11m 6sRunning iteration 261/1500... Est. remaining: 10m 59sRunning iteration 271/1500... Est. remaining: 10m 52sRunning iteration 281/1500... Est. remaining: 10m 46sRunning iteration 291/1500... Est. remaining: 10m 40sRunning iteration 301/1500... Est. remaining: 10m 33sbest_combination: {'lookbacks': [134, 139, 170], 'score': np.float64(0.33979625859728657), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 27sRunning iteration 321/1500... Est. remaining: 10m 21sRunning iteration 331/1500... Est. remaining: 10m 15sRunning iteration 341/1500... Est. remaining: 10m 9sRunning iteration 351/1500... Est. remaining: 10m 3sRunning iteration 361/1500... Est. remaining: 9m 57sRunning iteration 371/1500... Est. remaining: 9m 51sRunning iteration 381/1500... Est. remaining: 9m 45sRunning iteration 391/1500... Est. remaining: 9m 39sRunning iteration 401/1500... Est. remaining: 9m 33sbest_combination: {'lookbacks': [134, 139, 170], 'score': np.float64(0.33979625859728657), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 28sRunning iteration 421/1500... Est. remaining: 9m 22sRunning iteration 431/1500... Est. remaining: 9m 16sRunning iteration 441/1500... Est. remaining: 9m 11sRunning iteration 451/1500... Est. remaining: 9m 5sRunning iteration 461/1500... Est. remaining: 8m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,301,579,425
Annual Return: 47.00%
Sharpe Ratio: 1.54083
Sortino Ratio: 1.504
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 0.549
Lookback periods: [142, 156, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 8m 57sRunning iteration 481/1500... Est. remaining: 8m 51sRunning iteration 491/1500... Est. remaining: 8m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,814,606,975
Annual Return: 41.82%
Sharpe Ratio: 1.50097
Sortino Ratio: 1.401
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 0.955
Lookback periods: [50, 55, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 8m 42sbest_combination: {'lookbacks': [50, 55, 84], 'score': np.float64(0.9551249969853156), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 36sRunning iteration 521/1500... Est. remaining: 8m 31sRunning iteration 531/1500... Est. remaining: 8m 25sRunning iteration 541/1500... Est. remaining: 8m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,279,521,716
Annual Return: 42.75%
Sharpe Ratio: 1.54812
Sortino Ratio: 1.448
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.162
Lookback periods: [50, 59, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,090,291,433
Annual Return: 44.01%
Sharpe Ratio: 1.56952
Sortino Ratio: 1.484
Max Drawdown: -36.1%
Avg Drawdown: -9.4%
Normalized Score: 1.223
Lookback periods: [51, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 8m 12sRunning iteration 571/1500... Est. remaining: 8m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.554
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 8m 3sRunning iteration 591/1500... Est. remaining: 7m 57sRunning iteration 601/1500... Est. remaining: 7m 52sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.5540049727617045), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 46sRunning iteration 621/1500... Est. remaining: 7m 40sRunning iteration 631/1500... Est. remaining: 7m 35sRunning iteration 641/1500... Est. remaining: 7m 29sRunning iteration 651/1500... Est. remaining: 7m 24sRunning iteration 661/1500... Est. remaining: 7m 18sRunning iteration 671/1500... Est. remaining: 7m 13sRunning iteration 681/1500... Est. remaining: 7m 7sRunning iteration 691/1500... Est. remaining: 7m 2sRunning iteration 701/1500... Est. remaining: 6m 56sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.5540049727617045), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 51sRunning iteration 721/1500... Est. remaining: 6m 45sRunning iteration 731/1500... Est. remaining: 6m 40sRunning iteration 741/1500... Est. remaining: 6m 35sRunning iteration 751/1500... Est. remaining: 6m 29sRunning iteration 761/1500... Est. remaining: 6m 24sRunning iteration 771/1500... Est. remaining: 6m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.797
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 781/1500... Est. remaining: 6m 14sRunning iteration 791/1500... Est. remaining: 6m 9sRunning iteration 801/1500... Est. remaining: 6m 3sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.796725831778295), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 58sRunning iteration 821/1500... Est. remaining: 5m 53sRunning iteration 831/1500... Est. remaining: 5m 47sRunning iteration 841/1500... Est. remaining: 5m 42sRunning iteration 851/1500... Est. remaining: 5m 37sRunning iteration 861/1500... Est. remaining: 5m 31sRunning iteration 871/1500... Est. remaining: 5m 26sRunning iteration 881/1500... Est. remaining: 5m 21sRunning iteration 891/1500... Est. remaining: 5m 15sRunning iteration 901/1500... Est. remaining: 5m 10sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.796725831778295), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 5sRunning iteration 921/1500... Est. remaining: 4m 59sRunning iteration 931/1500... Est. remaining: 4m 54sRunning iteration 941/1500... Est. remaining: 4m 49sRunning iteration 951/1500... Est. remaining: 4m 43sRunning iteration 961/1500... Est. remaining: 4m 38sRunning iteration 971/1500... Est. remaining: 4m 33sRunning iteration 981/1500... Est. remaining: 4m 28sRunning iteration 991/1500... Est. remaining: 4m 22sRunning iteration 1001/1500... Est. remaining: 4m 17sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.796725831778295), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 12sRunning iteration 1021/1500... Est. remaining: 4m 7sRunning iteration 1031/1500... Est. remaining: 4m 1sRunning iteration 1041/1500... Est. remaining: 3m 56sRunning iteration 1051/1500... Est. remaining: 3m 51sRunning iteration 1061/1500... Est. remaining: 3m 46sRunning iteration 1071/1500... Est. remaining: 3m 41sRunning iteration 1081/1500... Est. remaining: 3m 35sRunning iteration 1091/1500... Est. remaining: 3m 30sRunning iteration 1101/1500... Est. remaining: 3m 25sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.796725831778295), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 20sRunning iteration 1121/1500... Est. remaining: 3m 15sRunning iteration 1131/1500... Est. remaining: 3m 9sRunning iteration 1141/1500... Est. remaining: 3m 4sRunning iteration 1151/1500... Est. remaining: 2m 59sRunning iteration 1161/1500... Est. remaining: 2m 54sRunning iteration 1171/1500... Est. remaining: 2m 49sRunning iteration 1181/1500... Est. remaining: 2m 44sRunning iteration 1191/1500... Est. remaining: 2m 38sRunning iteration 1201/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.796725831778295), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 28sRunning iteration 1221/1500... Est. remaining: 2m 23sRunning iteration 1231/1500... Est. remaining: 2m 18sRunning iteration 1241/1500... Est. remaining: 2m 13sRunning iteration 1251/1500... Est. remaining: 2m 7sRunning iteration 1261/1500... Est. remaining: 2m 2sRunning iteration 1271/1500... Est. remaining: 1m 57sRunning iteration 1281/1500... Est. remaining: 1m 52sRunning iteration 1291/1500... Est. remaining: 1m 47sRunning iteration 1301/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.796725831778295), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 31sRunning iteration 1331/1500... Est. remaining: 1m 26sRunning iteration 1341/1500... Est. remaining: 1m 21sRunning iteration 1351/1500... Est. remaining: 1m 16sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.796725831778295), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.7 minutes
Best normalized score: 1.80
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.796725831778295), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 1.7967)

Monte Carlo simulation completed in 12.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 17:46:58 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $523,269,667
Annual Return: 36.82%
Sharpe Ratio: 1.21216
Sortino Ratio: 1.157
Max Drawdown: -76.2%
Avg Drawdown: -15.7%
Normalized Score: -2.158
Lookback periods: [234, 276, 286] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,295,044,907
Annual Return: 40.44%
Sharpe Ratio: 1.42434
Sortino Ratio: 1.318
Max Drawdown: -55.0%
Avg Drawdown: -11.7%
Normalized Score: -0.239
Lookback periods: [37, 108, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 26m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,703,480,216
Annual Return: 44.77%
Sharpe Ratio: 1.46965
Sortino Ratio: 1.436
Max Drawdown: -65.0%
Avg Drawdown: -12.5%
Normalized Score: -0.206
Lookback periods: [133, 156, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,442,828,575
Annual Return: 40.88%
Sharpe Ratio: 1.40677
Sortino Ratio: 1.324
Max Drawdown: -52.3%
Avg Drawdown: -11.2%
Normalized Score: -0.084
Lookback periods: [93, 96, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,022,818,264
Annual Return: 39.49%
Sharpe Ratio: 1.40387
Sortino Ratio: 1.298
Max Drawdown: -41.9%
Avg Drawdown: -10.7%
Normalized Score: 0.218
Lookback periods: [42, 49, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $834,896,552
Annual Return: 38.68%
Sharpe Ratio: 1.38698
Sortino Ratio: 1.288
Max Drawdown: -39.4%
Avg Drawdown: -10.3%
Normalized Score: 0.271
Lookback periods: [51, 58, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 53sRunning iteration 41/1500... Est. remaining: 18m 36sRunning iteration 51/1500... Est. remaining: 17m 14sRunning iteration 61/1500... Est. remaining: 16m 13sRunning iteration 71/1500... Est. remaining: 15m 32sRunning iteration 81/1500... Est. remaining: 15m 1sRunning iteration 91/1500... Est. remaining: 14m 37sRunning iteration 101/1500... Est. remaining: 14m 15sbest_combination: {'lookbacks': [51, 58, 82], 'score': np.float64(0.2711001878317534), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 56sRunning iteration 121/1500... Est. remaining: 13m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,163,513,462
Annual Return: 40.01%
Sharpe Ratio: 1.40314
Sortino Ratio: 1.327
Max Drawdown: -44.8%
Avg Drawdown: -9.5%
Normalized Score: 0.347
Lookback periods: [50, 78, 107] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 40sRunning iteration 141/1500... Est. remaining: 13m 26sRunning iteration 151/1500... Est. remaining: 13m 14sRunning iteration 161/1500... Est. remaining: 13m 4sRunning iteration 171/1500... Est. remaining: 12m 53sRunning iteration 181/1500... Est. remaining: 12m 41sRunning iteration 191/1500... Est. remaining: 12m 31sRunning iteration 201/1500... Est. remaining: 12m 21sbest_combination: {'lookbacks': [50, 78, 107], 'score': np.float64(0.34698788719077184), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,403,551,107
Annual Return: 40.77%
Sharpe Ratio: 1.48489
Sortino Ratio: 1.374
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 0.926
Lookback periods: [41, 50, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 12m 10sRunning iteration 231/1500... Est. remaining: 12m 1sRunning iteration 241/1500... Est. remaining: 11m 52sRunning iteration 251/1500... Est. remaining: 11m 44sRunning iteration 261/1500... Est. remaining: 11m 35sRunning iteration 271/1500... Est. remaining: 11m 28sRunning iteration 281/1500... Est. remaining: 11m 20sRunning iteration 291/1500... Est. remaining: 11m 12sRunning iteration 301/1500... Est. remaining: 11m 5sbest_combination: {'lookbacks': [41, 50, 87], 'score': np.float64(0.9261565092816013), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 58sRunning iteration 321/1500... Est. remaining: 10m 50sRunning iteration 331/1500... Est. remaining: 10m 43sRunning iteration 341/1500... Est. remaining: 10m 36sRunning iteration 351/1500... Est. remaining: 10m 29sRunning iteration 361/1500... Est. remaining: 10m 23sRunning iteration 371/1500... Est. remaining: 10m 16sRunning iteration 381/1500... Est. remaining: 10m 10sRunning iteration 391/1500... Est. remaining: 10m 3sRunning iteration 401/1500... Est. remaining: 9m 57sbest_combination: {'lookbacks': [41, 50, 87], 'score': np.float64(0.9261565092816013), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,545,216,016
Annual Return: 43.21%
Sharpe Ratio: 1.57009
Sortino Ratio: 1.454
Max Drawdown: -39.7%
Avg Drawdown: -9.2%
Normalized Score: 1.127
Lookback periods: [37, 52, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 47sRunning iteration 431/1500... Est. remaining: 9m 41sRunning iteration 441/1500... Est. remaining: 9m 35sRunning iteration 451/1500... Est. remaining: 9m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,786,801,192
Annual Return: 41.75%
Sharpe Ratio: 1.53257
Sortino Ratio: 1.410
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.173
Lookback periods: [36, 48, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 9m 25sRunning iteration 471/1500... Est. remaining: 9m 19sRunning iteration 481/1500... Est. remaining: 9m 13sRunning iteration 491/1500... Est. remaining: 9m 7sRunning iteration 501/1500... Est. remaining: 9m 1sbest_combination: {'lookbacks': [36, 48, 84], 'score': np.float64(1.1734590348584113), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 55sRunning iteration 521/1500... Est. remaining: 8m 49sRunning iteration 531/1500... Est. remaining: 8m 43sRunning iteration 541/1500... Est. remaining: 8m 37sRunning iteration 551/1500... Est. remaining: 8m 31sRunning iteration 561/1500... Est. remaining: 8m 25sRunning iteration 571/1500... Est. remaining: 8m 19sRunning iteration 581/1500... Est. remaining: 8m 13sRunning iteration 591/1500... Est. remaining: 8m 8sRunning iteration 601/1500... Est. remaining: 8m 2sbest_combination: {'lookbacks': [36, 48, 84], 'score': np.float64(1.1734590348584113), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 56sRunning iteration 621/1500... Est. remaining: 7m 50sRunning iteration 631/1500... Est. remaining: 7m 44sRunning iteration 641/1500... Est. remaining: 7m 39sRunning iteration 651/1500... Est. remaining: 7m 33sRunning iteration 661/1500... Est. remaining: 7m 27sRunning iteration 671/1500... Est. remaining: 7m 22sRunning iteration 681/1500... Est. remaining: 7m 16sRunning iteration 691/1500... Est. remaining: 7m 10sRunning iteration 701/1500... Est. remaining: 7m 5sbest_combination: {'lookbacks': [36, 48, 84], 'score': np.float64(1.1734590348584113), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 59sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 48sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 37sRunning iteration 761/1500... Est. remaining: 6m 31sRunning iteration 771/1500... Est. remaining: 6m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,978,251,016
Annual Return: 43.86%
Sharpe Ratio: 1.60077
Sortino Ratio: 1.493
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.533
Lookback periods: [37, 47, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 781/1500... Est. remaining: 6m 21sRunning iteration 791/1500... Est. remaining: 6m 16sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [37, 47, 84], 'score': np.float64(1.533199255573551), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 5sRunning iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 54sRunning iteration 841/1500... Est. remaining: 5m 48sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 37sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [37, 47, 84], 'score': np.float64(1.533199255573551), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 27sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [37, 47, 84], 'score': np.float64(1.533199255573551), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [37, 47, 84], 'score': np.float64(1.533199255573551), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [37, 47, 84], 'score': np.float64(1.533199255573551), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [37, 47, 84], 'score': np.float64(1.533199255573551), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [37, 47, 84], 'score': np.float64(1.533199255573551), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 1.53
best_combination: {'lookbacks': [37, 47, 84], 'score': np.float64(1.533199255573551), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [37, 47, 84] (score: 1.5332)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [37, 47, 84] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 105 selections (25.2%)
2. naz100_hma: 99 selections (23.8%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 59 selections (14.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $2,978,251,015.61
Average Annualized Gain: 43.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 18:00:02 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $509,152,125
Annual Return: 36.71%
Sharpe Ratio: 1.25727
Sortino Ratio: 1.185
Max Drawdown: -64.1%
Avg Drawdown: -14.4%
Normalized Score: -1.291
Lookback periods: [124, 139, 273] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,337,414,258
Annual Return: 44.33%
Sharpe Ratio: 1.45704
Sortino Ratio: 1.422
Max Drawdown: -66.2%
Avg Drawdown: -13.0%
Normalized Score: -0.352
Lookback periods: [139, 153, 222] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $481,046,740
Annual Return: 36.49%
Sharpe Ratio: 1.29654
Sortino Ratio: 1.196
Max Drawdown: -52.3%
Avg Drawdown: -10.2%
Normalized Score: -0.239
Lookback periods: [43, 83, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $293,444,034
Annual Return: 34.56%
Sharpe Ratio: 1.29116
Sortino Ratio: 1.165
Max Drawdown: -35.3%
Avg Drawdown: -9.9%
Normalized Score: 0.354
Lookback periods: [31, 47, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 34m 0sRunning iteration 21/1500... Est. remaining: 23m 16sRunning iteration 31/1500... Est. remaining: 19m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $760,578,522
Annual Return: 38.30%
Sharpe Ratio: 1.38988
Sortino Ratio: 1.279
Max Drawdown: -41.5%
Avg Drawdown: -9.8%
Normalized Score: 0.525
Lookback periods: [41, 42, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 21sRunning iteration 51/1500... Est. remaining: 17m 4sRunning iteration 61/1500... Est. remaining: 16m 14sRunning iteration 71/1500... Est. remaining: 15m 33sRunning iteration 81/1500... Est. remaining: 15m 3sRunning iteration 91/1500... Est. remaining: 14m 38sRunning iteration 101/1500... Est. remaining: 14m 17sbest_combination: {'lookbacks': [41, 42, 178], 'score': np.float64(0.5248873891232083), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 59sRunning iteration 121/1500... Est. remaining: 13m 42sRunning iteration 131/1500... Est. remaining: 13m 28sRunning iteration 141/1500... Est. remaining: 13m 14sRunning iteration 151/1500... Est. remaining: 13m 1sRunning iteration 161/1500... Est. remaining: 12m 50sRunning iteration 171/1500... Est. remaining: 12m 39sRunning iteration 181/1500... Est. remaining: 12m 29sRunning iteration 191/1500... Est. remaining: 12m 20sRunning iteration 201/1500... Est. remaining: 12m 11sbest_combination: {'lookbacks': [41, 42, 178], 'score': np.float64(0.5248873891232083), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 3sRunning iteration 221/1500... Est. remaining: 11m 54sRunning iteration 231/1500... Est. remaining: 11m 45sRunning iteration 241/1500... Est. remaining: 11m 38sRunning iteration 251/1500... Est. remaining: 11m 30sRunning iteration 261/1500... Est. remaining: 11m 22sRunning iteration 271/1500... Est. remaining: 11m 15sRunning iteration 281/1500... Est. remaining: 11m 7sRunning iteration 291/1500... Est. remaining: 11m 1sRunning iteration 301/1500... Est. remaining: 10m 54sbest_combination: {'lookbacks': [41, 42, 178], 'score': np.float64(0.5248873891232083), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 47sRunning iteration 321/1500... Est. remaining: 10m 40sRunning iteration 331/1500... Est. remaining: 10m 34sRunning iteration 341/1500... Est. remaining: 10m 28sRunning iteration 351/1500... Est. remaining: 10m 21sRunning iteration 361/1500... Est. remaining: 10m 15sRunning iteration 371/1500... Est. remaining: 10m 9sRunning iteration 381/1500... Est. remaining: 10m 3sRunning iteration 391/1500... Est. remaining: 9m 57sRunning iteration 401/1500... Est. remaining: 9m 50sbest_combination: {'lookbacks': [41, 42, 178], 'score': np.float64(0.5248873891232083), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 44sRunning iteration 421/1500... Est. remaining: 9m 38sRunning iteration 431/1500... Est. remaining: 9m 32sRunning iteration 441/1500... Est. remaining: 9m 26sRunning iteration 451/1500... Est. remaining: 9m 20sRunning iteration 461/1500... Est. remaining: 9m 14sRunning iteration 471/1500... Est. remaining: 9m 9sRunning iteration 481/1500... Est. remaining: 9m 3sRunning iteration 491/1500... Est. remaining: 8m 57sRunning iteration 501/1500... Est. remaining: 8m 51sbest_combination: {'lookbacks': [41, 42, 178], 'score': np.float64(0.5248873891232083), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 46sRunning iteration 521/1500... Est. remaining: 8m 40sRunning iteration 531/1500... Est. remaining: 8m 35sRunning iteration 541/1500... Est. remaining: 8m 29sRunning iteration 551/1500... Est. remaining: 8m 24sRunning iteration 561/1500... Est. remaining: 8m 18sRunning iteration 571/1500... Est. remaining: 8m 13sRunning iteration 581/1500... Est. remaining: 8m 7sRunning iteration 591/1500... Est. remaining: 8m 2sRunning iteration 601/1500... Est. remaining: 7m 56sbest_combination: {'lookbacks': [41, 42, 178], 'score': np.float64(0.5248873891232083), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 50sRunning iteration 621/1500... Est. remaining: 7m 45sRunning iteration 631/1500... Est. remaining: 7m 39sRunning iteration 641/1500... Est. remaining: 7m 34sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 23sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 12sRunning iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [41, 42, 178], 'score': np.float64(0.5248873891232083), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 55sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 44sRunning iteration 741/1500... Est. remaining: 6m 39sRunning iteration 751/1500... Est. remaining: 6m 33sRunning iteration 761/1500... Est. remaining: 6m 28sRunning iteration 771/1500... Est. remaining: 6m 22sRunning iteration 781/1500... Est. remaining: 6m 17sRunning iteration 791/1500... Est. remaining: 6m 11sRunning iteration 801/1500... Est. remaining: 6m 6sbest_combination: {'lookbacks': [41, 42, 178], 'score': np.float64(0.5248873891232083), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 1sRunning iteration 821/1500... Est. remaining: 5m 55sRunning iteration 831/1500... Est. remaining: 5m 50sRunning iteration 841/1500... Est. remaining: 5m 45sRunning iteration 851/1500... Est. remaining: 5m 39sRunning iteration 861/1500... Est. remaining: 5m 34sRunning iteration 871/1500... Est. remaining: 5m 28sRunning iteration 881/1500... Est. remaining: 5m 23sRunning iteration 891/1500... Est. remaining: 5m 18sRunning iteration 901/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [41, 42, 178], 'score': np.float64(0.5248873891232083), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 7sRunning iteration 921/1500... Est. remaining: 5m 2sRunning iteration 931/1500... Est. remaining: 4m 56sRunning iteration 941/1500... Est. remaining: 4m 51sRunning iteration 951/1500... Est. remaining: 4m 46sRunning iteration 961/1500... Est. remaining: 4m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $614,930,346
Annual Return: 37.46%
Sharpe Ratio: 1.36676
Sortino Ratio: 1.262
Max Drawdown: -34.7%
Avg Drawdown: -10.0%
Normalized Score: 0.702
Lookback periods: [41, 55, 64] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $626,675,881
Annual Return: 37.53%
Sharpe Ratio: 1.37759
Sortino Ratio: 1.276
Max Drawdown: -36.3%
Avg Drawdown: -9.7%
Normalized Score: 0.716
Lookback periods: [41, 53, 65] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 971/1500... Est. remaining: 4m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,323,312,200
Annual Return: 40.53%
Sharpe Ratio: 1.46566
Sortino Ratio: 1.375
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.206
Lookback periods: [42, 51, 61] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,603,492,908
Annual Return: 41.31%
Sharpe Ratio: 1.49732
Sortino Ratio: 1.406
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.356
Lookback periods: [41, 50, 57] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [41, 50, 57], 'score': np.float64(1.3555061100414583), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,916,785,855
Annual Return: 42.04%
Sharpe Ratio: 1.52822
Sortino Ratio: 1.431
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.445
Lookback periods: [41, 50, 56] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [41, 50, 56], 'score': np.float64(1.4447200687581119), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,163,200,713
Annual Return: 42.54%
Sharpe Ratio: 1.53504
Sortino Ratio: 1.446
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.463
Lookback periods: [40, 51, 52] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [40, 51, 52], 'score': np.float64(1.4628307575597899), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [40, 51, 52], 'score': np.float64(1.4628307575597899), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [40, 51, 52], 'score': np.float64(1.4628307575597899), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.46
best_combination: {'lookbacks': [40, 51, 52], 'score': np.float64(1.4628307575597899), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [40, 51, 52] (score: 1.4628)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [40, 51, 52] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 105 selections (25.2%)
2. naz100_hma: 95 selections (22.8%)
3. naz100_pine: 84 selections (20.2%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $2,163,200,712.68
Average Annualized Gain: 42.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 18:13:07 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $243,426,804
Annual Return: 33.83%
Sharpe Ratio: 1.17576
Sortino Ratio: 1.082
Max Drawdown: -68.4%
Avg Drawdown: -13.6%
Normalized Score: -2.098
Lookback periods: [56, 190, 207] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,100,159,827
Annual Return: 42.42%
Sharpe Ratio: 1.39719
Sortino Ratio: 1.355
Max Drawdown: -66.9%
Avg Drawdown: -12.2%
Normalized Score: -0.338
Lookback periods: [172, 203, 272] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,157,433,991
Annual Return: 44.10%
Sharpe Ratio: 1.44925
Sortino Ratio: 1.415
Max Drawdown: -68.4%
Avg Drawdown: -13.2%
Normalized Score: -0.186
Lookback periods: [134, 148, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,957,433,235
Annual Return: 42.13%
Sharpe Ratio: 1.39462
Sortino Ratio: 1.340
Max Drawdown: -59.0%
Avg Drawdown: -12.2%
Normalized Score: -0.185
Lookback periods: [195, 282, 299] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 47sRunning iteration 31/1500... Est. remaining: 19m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,146,511,518
Annual Return: 39.95%
Sharpe Ratio: 1.41301
Sortino Ratio: 1.319
Max Drawdown: -51.1%
Avg Drawdown: -11.2%
Normalized Score: -0.075
Lookback periods: [49, 53, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 11sRunning iteration 51/1500... Est. remaining: 17m 3sRunning iteration 61/1500... Est. remaining: 16m 6sRunning iteration 71/1500... Est. remaining: 15m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,231,149,831
Annual Return: 45.32%
Sharpe Ratio: 1.51239
Sortino Ratio: 1.467
Max Drawdown: -70.1%
Avg Drawdown: -12.3%
Normalized Score: 0.156
Lookback periods: [106, 178, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 15m 17sRunning iteration 91/1500... Est. remaining: 14m 50sRunning iteration 101/1500... Est. remaining: 14m 28sbest_combination: {'lookbacks': [106, 178, 179], 'score': np.float64(0.1561437001351968), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 9sRunning iteration 121/1500... Est. remaining: 13m 52sRunning iteration 131/1500... Est. remaining: 13m 37sRunning iteration 141/1500... Est. remaining: 13m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,734,017,551
Annual Return: 41.63%
Sharpe Ratio: 1.51410
Sortino Ratio: 1.416
Max Drawdown: -37.2%
Avg Drawdown: -9.4%
Normalized Score: 0.966
Lookback periods: [45, 52, 93] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 13m 22sRunning iteration 161/1500... Est. remaining: 13m 10sRunning iteration 171/1500... Est. remaining: 12m 58sRunning iteration 181/1500... Est. remaining: 12m 47sRunning iteration 191/1500... Est. remaining: 12m 37sRunning iteration 201/1500... Est. remaining: 12m 27sbest_combination: {'lookbacks': [45, 52, 93], 'score': np.float64(0.965917265948628), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 18sRunning iteration 221/1500... Est. remaining: 12m 9sRunning iteration 231/1500... Est. remaining: 12m 1sRunning iteration 241/1500... Est. remaining: 11m 52sRunning iteration 251/1500... Est. remaining: 11m 44sRunning iteration 261/1500... Est. remaining: 11m 36sRunning iteration 271/1500... Est. remaining: 11m 28sRunning iteration 281/1500... Est. remaining: 11m 21sRunning iteration 291/1500... Est. remaining: 11m 13sRunning iteration 301/1500... Est. remaining: 11m 6sbest_combination: {'lookbacks': [45, 52, 93], 'score': np.float64(0.965917265948628), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 58sRunning iteration 321/1500... Est. remaining: 10m 52sRunning iteration 331/1500... Est. remaining: 10m 45sRunning iteration 341/1500... Est. remaining: 10m 38sRunning iteration 351/1500... Est. remaining: 10m 31sRunning iteration 361/1500... Est. remaining: 10m 25sRunning iteration 371/1500... Est. remaining: 10m 19sRunning iteration 381/1500... Est. remaining: 10m 13sRunning iteration 391/1500... Est. remaining: 10m 7sRunning iteration 401/1500... Est. remaining: 10m 0sbest_combination: {'lookbacks': [45, 52, 93], 'score': np.float64(0.965917265948628), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 54sRunning iteration 421/1500... Est. remaining: 9m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,582,856,276
Annual Return: 41.26%
Sharpe Ratio: 1.51806
Sortino Ratio: 1.410
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.094
Lookback periods: [43, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 9m 45sRunning iteration 441/1500... Est. remaining: 9m 38sRunning iteration 451/1500... Est. remaining: 9m 32sRunning iteration 461/1500... Est. remaining: 9m 26sRunning iteration 471/1500... Est. remaining: 9m 20sRunning iteration 481/1500... Est. remaining: 9m 14sRunning iteration 491/1500... Est. remaining: 9m 8sRunning iteration 501/1500... Est. remaining: 9m 1sbest_combination: {'lookbacks': [43, 52, 95], 'score': np.float64(1.093970300119355), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 56sRunning iteration 521/1500... Est. remaining: 8m 50sRunning iteration 531/1500... Est. remaining: 8m 44sRunning iteration 541/1500... Est. remaining: 8m 38sRunning iteration 551/1500... Est. remaining: 8m 32sRunning iteration 561/1500... Est. remaining: 8m 26sRunning iteration 571/1500... Est. remaining: 8m 20sRunning iteration 581/1500... Est. remaining: 8m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,855,388,026
Annual Return: 41.91%
Sharpe Ratio: 1.52518
Sortino Ratio: 1.422
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.182
Lookback periods: [46, 48, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 8m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,680,237,494
Annual Return: 43.42%
Sharpe Ratio: 1.57987
Sortino Ratio: 1.484
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.516
Lookback periods: [44, 52, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/1500... Est. remaining: 8m 6sbest_combination: {'lookbacks': [44, 52, 101], 'score': np.float64(1.5159767917412763), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,083,295,114
Annual Return: 45.18%
Sharpe Ratio: 1.63015
Sortino Ratio: 1.535
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.751
Lookback periods: [41, 52, 104] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 7m 56sRunning iteration 631/1500... Est. remaining: 7m 51sRunning iteration 641/1500... Est. remaining: 7m 45sRunning iteration 651/1500... Est. remaining: 7m 39sRunning iteration 661/1500... Est. remaining: 7m 33sRunning iteration 671/1500... Est. remaining: 7m 27sRunning iteration 681/1500... Est. remaining: 7m 21sRunning iteration 691/1500... Est. remaining: 7m 16sRunning iteration 701/1500... Est. remaining: 7m 10sbest_combination: {'lookbacks': [41, 52, 104], 'score': np.float64(1.7507590984786703), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 4sRunning iteration 721/1500... Est. remaining: 6m 58sRunning iteration 731/1500... Est. remaining: 6m 53sRunning iteration 741/1500... Est. remaining: 6m 47sRunning iteration 751/1500... Est. remaining: 6m 42sRunning iteration 761/1500... Est. remaining: 6m 36sRunning iteration 771/1500... Est. remaining: 6m 30sRunning iteration 781/1500... Est. remaining: 6m 25sRunning iteration 791/1500... Est. remaining: 6m 19sRunning iteration 801/1500... Est. remaining: 6m 13sbest_combination: {'lookbacks': [41, 52, 104], 'score': np.float64(1.7507590984786703), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 8sRunning iteration 821/1500... Est. remaining: 6m 2sRunning iteration 831/1500... Est. remaining: 5m 57sRunning iteration 841/1500... Est. remaining: 5m 51sRunning iteration 851/1500... Est. remaining: 5m 46sRunning iteration 861/1500... Est. remaining: 5m 40sRunning iteration 871/1500... Est. remaining: 5m 35sRunning iteration 881/1500... Est. remaining: 5m 29sRunning iteration 891/1500... Est. remaining: 5m 24sRunning iteration 901/1500... Est. remaining: 5m 18sbest_combination: {'lookbacks': [41, 52, 104], 'score': np.float64(1.7507590984786703), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 13sRunning iteration 921/1500... Est. remaining: 5m 7sRunning iteration 931/1500... Est. remaining: 5m 2sRunning iteration 941/1500... Est. remaining: 4m 57sRunning iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 40sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 29sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [41, 52, 104], 'score': np.float64(1.7507590984786703), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 3sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [41, 52, 104], 'score': np.float64(1.7507590984786703), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,991,609,847
Annual Return: 45.08%
Sharpe Ratio: 1.64802
Sortino Ratio: 1.543
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.846
Lookback periods: [42, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,372,958,566
Annual Return: 45.46%
Sharpe Ratio: 1.63893
Sortino Ratio: 1.535
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.897
Lookback periods: [40, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [40, 50, 96], 'score': np.float64(1.897306574702061), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,008,937,375
Annual Return: 46.03%
Sharpe Ratio: 1.67914
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 2.059
Lookback periods: [41, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(2.058718060815217), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(2.058718060815217), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 2.06
best_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(2.058718060815217), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 52, 98] (score: 2.0587)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,008,937,374.54
Average Annualized Gain: 46.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 18:26:19 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $573,939,932
Annual Return: 37.18%
Sharpe Ratio: 1.26466
Sortino Ratio: 1.185
Max Drawdown: -61.8%
Avg Drawdown: -13.9%
Normalized Score: -1.048
Lookback periods: [99, 133, 244] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,287,110,302
Annual Return: 40.42%
Sharpe Ratio: 1.33224
Sortino Ratio: 1.282
Max Drawdown: -67.8%
Avg Drawdown: -13.0%
Normalized Score: -0.781
Lookback periods: [195, 208, 278] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $536,925,707
Annual Return: 36.92%
Sharpe Ratio: 1.27678
Sortino Ratio: 1.196
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: -0.573
Lookback periods: [82, 111, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,599,746,997
Annual Return: 44.65%
Sharpe Ratio: 1.47989
Sortino Ratio: 1.427
Max Drawdown: -58.1%
Avg Drawdown: -12.6%
Normalized Score: 0.050
Lookback periods: [139, 151, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,659,795,678
Annual Return: 45.73%
Sharpe Ratio: 1.49208
Sortino Ratio: 1.444
Max Drawdown: -59.0%
Avg Drawdown: -12.6%
Normalized Score: 0.097
Lookback periods: [181, 181, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 24sRunning iteration 31/1500... Est. remaining: 20m 25sRunning iteration 41/1500... Est. remaining: 18m 23sRunning iteration 51/1500... Est. remaining: 17m 4sRunning iteration 61/1500... Est. remaining: 16m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,180,540,943
Annual Return: 42.57%
Sharpe Ratio: 1.46826
Sortino Ratio: 1.380
Max Drawdown: -55.0%
Avg Drawdown: -10.8%
Normalized Score: 0.155
Lookback periods: [62, 110, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,767,398,520
Annual Return: 45.83%
Sharpe Ratio: 1.49650
Sortino Ratio: 1.468
Max Drawdown: -60.3%
Avg Drawdown: -11.9%
Normalized Score: 0.179
Lookback periods: [136, 174, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 16m 13sRunning iteration 81/1500... Est. remaining: 15m 38sRunning iteration 91/1500... Est. remaining: 15m 6sRunning iteration 101/1500... Est. remaining: 14m 41sbest_combination: {'lookbacks': [136, 174, 197], 'score': np.float64(0.17913751177716528), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,291,332,656
Annual Return: 47.00%
Sharpe Ratio: 1.52362
Sortino Ratio: 1.494
Max Drawdown: -60.4%
Avg Drawdown: -12.1%
Normalized Score: 0.264
Lookback periods: [154, 181, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 35sRunning iteration 121/1500... Est. remaining: 14m 16sRunning iteration 131/1500... Est. remaining: 13m 58sRunning iteration 141/1500... Est. remaining: 13m 41sRunning iteration 151/1500... Est. remaining: 13m 27sRunning iteration 161/1500... Est. remaining: 13m 13sRunning iteration 171/1500... Est. remaining: 13m 1sRunning iteration 181/1500... Est. remaining: 12m 50sRunning iteration 191/1500... Est. remaining: 12m 39sRunning iteration 201/1500... Est. remaining: 12m 29sbest_combination: {'lookbacks': [154, 181, 185], 'score': np.float64(0.2638102801799094), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $975,180,716
Annual Return: 39.30%
Sharpe Ratio: 1.43802
Sortino Ratio: 1.327
Max Drawdown: -41.4%
Avg Drawdown: -10.2%
Normalized Score: 0.343
Lookback periods: [40, 53, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 12m 17sRunning iteration 231/1500... Est. remaining: 12m 8sRunning iteration 241/1500... Est. remaining: 11m 59sRunning iteration 251/1500... Est. remaining: 11m 51sRunning iteration 261/1500... Est. remaining: 11m 42sRunning iteration 271/1500... Est. remaining: 11m 34sRunning iteration 281/1500... Est. remaining: 11m 26sRunning iteration 291/1500... Est. remaining: 11m 18sRunning iteration 301/1500... Est. remaining: 11m 11sbest_combination: {'lookbacks': [40, 53, 100], 'score': np.float64(0.34329162597914226), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 4sRunning iteration 321/1500... Est. remaining: 10m 56sRunning iteration 331/1500... Est. remaining: 10m 49sRunning iteration 341/1500... Est. remaining: 10m 42sRunning iteration 351/1500... Est. remaining: 10m 35sRunning iteration 361/1500... Est. remaining: 10m 28sRunning iteration 371/1500... Est. remaining: 10m 22sRunning iteration 381/1500... Est. remaining: 10m 15sRunning iteration 391/1500... Est. remaining: 10m 9sRunning iteration 401/1500... Est. remaining: 10m 2sbest_combination: {'lookbacks': [40, 53, 100], 'score': np.float64(0.34329162597914226), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,297,225,435
Annual Return: 42.79%
Sharpe Ratio: 1.56806
Sortino Ratio: 1.459
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.105
Lookback periods: [40, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 9m 59sRunning iteration 421/1500... Est. remaining: 9m 53sRunning iteration 431/1500... Est. remaining: 9m 46sRunning iteration 441/1500... Est. remaining: 9m 40sRunning iteration 451/1500... Est. remaining: 9m 33sRunning iteration 461/1500... Est. remaining: 9m 27sRunning iteration 471/1500... Est. remaining: 9m 21sRunning iteration 481/1500... Est. remaining: 9m 14sRunning iteration 491/1500... Est. remaining: 9m 8sRunning iteration 501/1500... Est. remaining: 9m 2sbest_combination: {'lookbacks': [40, 52, 98], 'score': np.float64(1.1051780286420783), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,387,691,345
Annual Return: 42.95%
Sharpe Ratio: 1.55213
Sortino Ratio: 1.458
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.218
Lookback periods: [43, 51, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 52sRunning iteration 531/1500... Est. remaining: 8m 46sRunning iteration 541/1500... Est. remaining: 8m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,072,806,675
Annual Return: 43.99%
Sharpe Ratio: 1.60622
Sortino Ratio: 1.512
Max Drawdown: -37.8%
Avg Drawdown: -8.4%
Normalized Score: 1.248
Lookback periods: [43, 53, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 36sRunning iteration 561/1500... Est. remaining: 8m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,527,858,081
Annual Return: 44.56%
Sharpe Ratio: 1.61703
Sortino Ratio: 1.523
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.402
Lookback periods: [47, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 8m 26sRunning iteration 581/1500... Est. remaining: 8m 20sRunning iteration 591/1500... Est. remaining: 8m 14sRunning iteration 601/1500... Est. remaining: 8m 8sbest_combination: {'lookbacks': [47, 52, 98], 'score': np.float64(1.4019169710187462), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 2sRunning iteration 621/1500... Est. remaining: 7m 56sRunning iteration 631/1500... Est. remaining: 7m 51sRunning iteration 641/1500... Est. remaining: 7m 45sRunning iteration 651/1500... Est. remaining: 7m 39sRunning iteration 661/1500... Est. remaining: 7m 33sRunning iteration 671/1500... Est. remaining: 7m 27sRunning iteration 681/1500... Est. remaining: 7m 21sRunning iteration 691/1500... Est. remaining: 7m 15sRunning iteration 701/1500... Est. remaining: 7m 10sbest_combination: {'lookbacks': [47, 52, 98], 'score': np.float64(1.4019169710187462), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 4sRunning iteration 721/1500... Est. remaining: 6m 58sRunning iteration 731/1500... Est. remaining: 6m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,509,510,623
Annual Return: 45.59%
Sharpe Ratio: 1.64393
Sortino Ratio: 1.555
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.517
Lookback periods: [47, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 6m 48sRunning iteration 751/1500... Est. remaining: 6m 42sRunning iteration 761/1500... Est. remaining: 6m 37sRunning iteration 771/1500... Est. remaining: 6m 31sRunning iteration 781/1500... Est. remaining: 6m 25sRunning iteration 791/1500... Est. remaining: 6m 20sRunning iteration 801/1500... Est. remaining: 6m 14sbest_combination: {'lookbacks': [47, 52, 95], 'score': np.float64(1.5167525107389381), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 9sRunning iteration 821/1500... Est. remaining: 6m 3sRunning iteration 831/1500... Est. remaining: 5m 57sRunning iteration 841/1500... Est. remaining: 5m 52sRunning iteration 851/1500... Est. remaining: 5m 46sRunning iteration 861/1500... Est. remaining: 5m 41sRunning iteration 871/1500... Est. remaining: 5m 35sRunning iteration 881/1500... Est. remaining: 5m 30sRunning iteration 891/1500... Est. remaining: 5m 24sRunning iteration 901/1500... Est. remaining: 5m 19sbest_combination: {'lookbacks': [47, 52, 95], 'score': np.float64(1.5167525107389381), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 13sRunning iteration 921/1500... Est. remaining: 5m 8sRunning iteration 931/1500... Est. remaining: 5m 2sRunning iteration 941/1500... Est. remaining: 4m 57sRunning iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 40sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 30sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [47, 52, 95], 'score': np.float64(1.5167525107389381), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [47, 52, 95], 'score': np.float64(1.5167525107389381), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [47, 52, 95], 'score': np.float64(1.5167525107389381), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [47, 52, 95], 'score': np.float64(1.5167525107389381), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [47, 52, 95], 'score': np.float64(1.5167525107389381), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,236,710,918
Annual Return: 46.22%
Sharpe Ratio: 1.66334
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.590
Lookback periods: [46, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.59
best_combination: {'lookbacks': [46, 52, 95], 'score': np.float64(1.5902262327679617), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [46, 52, 95] (score: 1.5902)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [46, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 81 selections (19.5%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 54 selections (13.0%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,236,710,918.02
Average Annualized Gain: 46.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 176m 18s
End time: Mon Aug 25 18:39:23 EDT 2025
Average time per successful run: 11m 45s
==============================================================
✓ All runs completed successfully!
