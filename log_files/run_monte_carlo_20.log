Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Mon Aug 25 12:52:16 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Mon Aug 25 12:52:16 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-25T12:34:50.600826
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.0504
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,053,941,079
Annual Return: 39.61%
Sharpe Ratio: 1.33460
Sortino Ratio: 1.261
Max Drawdown: -61.9%
Avg Drawdown: -12.7%
Normalized Score: -0.580
Lookback periods: [63, 169, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,303,484,438
Annual Return: 42.80%
Sharpe Ratio: 1.42822
Sortino Ratio: 1.382
Max Drawdown: -67.0%
Avg Drawdown: -12.8%
Normalized Score: -0.331
Lookback periods: [118, 150, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,348,950,736
Annual Return: 44.35%
Sharpe Ratio: 1.46958
Sortino Ratio: 1.423
Max Drawdown: -58.5%
Avg Drawdown: -12.6%
Normalized Score: 0.134
Lookback periods: [144, 147, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,449,989,339
Annual Return: 46.39%
Sharpe Ratio: 1.51780
Sortino Ratio: 1.480
Max Drawdown: -59.0%
Avg Drawdown: -10.5%
Normalized Score: 0.751
Lookback periods: [157, 167, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,543,088,559
Annual Return: 41.16%
Sharpe Ratio: 1.49712
Sortino Ratio: 1.400
Max Drawdown: -39.7%
Avg Drawdown: -10.1%
Normalized Score: 1.024
Lookback periods: [51, 56, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 15sRunning iteration 31/1500... Est. remaining: 20m 16sRunning iteration 41/1500... Est. remaining: 18m 11sRunning iteration 51/1500... Est. remaining: 16m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,075,823,579
Annual Return: 42.37%
Sharpe Ratio: 1.52158
Sortino Ratio: 1.430
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 1.422
Lookback periods: [50, 54, 91] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 31sRunning iteration 71/1500... Est. remaining: 15m 49sRunning iteration 81/1500... Est. remaining: 15m 15sRunning iteration 91/1500... Est. remaining: 14m 47sRunning iteration 101/1500... Est. remaining: 14m 24sbest_combination: {'lookbacks': [50, 54, 91], 'score': np.float64(1.4219164971178855), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 4sRunning iteration 121/1500... Est. remaining: 13m 47sRunning iteration 131/1500... Est. remaining: 13m 31sRunning iteration 141/1500... Est. remaining: 13m 17sRunning iteration 151/1500... Est. remaining: 13m 4sRunning iteration 161/1500... Est. remaining: 12m 52sRunning iteration 171/1500... Est. remaining: 12m 41sRunning iteration 181/1500... Est. remaining: 12m 30sRunning iteration 191/1500... Est. remaining: 12m 20sRunning iteration 201/1500... Est. remaining: 12m 11sbest_combination: {'lookbacks': [50, 54, 91], 'score': np.float64(1.4219164971178855), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 2sRunning iteration 221/1500... Est. remaining: 11m 53sRunning iteration 231/1500... Est. remaining: 11m 45sRunning iteration 241/1500... Est. remaining: 11m 37sRunning iteration 251/1500... Est. remaining: 11m 29sRunning iteration 261/1500... Est. remaining: 11m 21sRunning iteration 271/1500... Est. remaining: 11m 14sRunning iteration 281/1500... Est. remaining: 11m 7sRunning iteration 291/1500... Est. remaining: 11m 0sRunning iteration 301/1500... Est. remaining: 10m 53sbest_combination: {'lookbacks': [50, 54, 91], 'score': np.float64(1.4219164971178855), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 46sRunning iteration 321/1500... Est. remaining: 10m 39sRunning iteration 331/1500... Est. remaining: 10m 33sRunning iteration 341/1500... Est. remaining: 10m 26sRunning iteration 351/1500... Est. remaining: 10m 20sRunning iteration 361/1500... Est. remaining: 10m 13sRunning iteration 371/1500... Est. remaining: 10m 7sRunning iteration 381/1500... Est. remaining: 10m 1sRunning iteration 391/1500... Est. remaining: 9m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,613,270,791
Annual Return: 43.32%
Sharpe Ratio: 1.54766
Sortino Ratio: 1.454
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.587
Lookback periods: [50, 54, 86] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 9m 52sbest_combination: {'lookbacks': [50, 54, 86], 'score': np.float64(1.5868434378223975), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 46sRunning iteration 421/1500... Est. remaining: 9m 39sRunning iteration 431/1500... Est. remaining: 9m 33sRunning iteration 441/1500... Est. remaining: 9m 27sRunning iteration 451/1500... Est. remaining: 9m 21sRunning iteration 461/1500... Est. remaining: 9m 15sRunning iteration 471/1500... Est. remaining: 9m 9sRunning iteration 481/1500... Est. remaining: 9m 4sRunning iteration 491/1500... Est. remaining: 8m 58sRunning iteration 501/1500... Est. remaining: 8m 52sbest_combination: {'lookbacks': [50, 54, 86], 'score': np.float64(1.5868434378223975), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 46sRunning iteration 521/1500... Est. remaining: 8m 40sRunning iteration 531/1500... Est. remaining: 8m 35sRunning iteration 541/1500... Est. remaining: 8m 29sRunning iteration 551/1500... Est. remaining: 8m 23sRunning iteration 561/1500... Est. remaining: 8m 17sRunning iteration 571/1500... Est. remaining: 8m 12sRunning iteration 581/1500... Est. remaining: 8m 6sRunning iteration 591/1500... Est. remaining: 8m 0sRunning iteration 601/1500... Est. remaining: 7m 55sbest_combination: {'lookbacks': [50, 54, 86], 'score': np.float64(1.5868434378223975), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 49sRunning iteration 621/1500... Est. remaining: 7m 44sRunning iteration 631/1500... Est. remaining: 7m 39sRunning iteration 641/1500... Est. remaining: 7m 33sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 22sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 12sRunning iteration 691/1500... Est. remaining: 7m 7sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [50, 54, 86], 'score': np.float64(1.5868434378223975), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 56sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,109,906,920
Annual Return: 44.04%
Sharpe Ratio: 1.57266
Sortino Ratio: 1.479
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.621
Lookback periods: [50, 53, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 35sRunning iteration 761/1500... Est. remaining: 6m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.958
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 20sRunning iteration 791/1500... Est. remaining: 6m 14sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.9583188718564286), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 4sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 53sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.9583188718564286), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.028
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 27sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(2.027879634478473), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.215
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.214945344337619), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.214945344337619), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.214945344337619), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.214945344337619), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 2.21
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.214945344337619), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [50, 52, 95] (score: 2.2149)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Mon Aug 25 13:05:22 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $188,352,926
Annual Return: 32.84%
Sharpe Ratio: 1.14542
Sortino Ratio: 1.052
Max Drawdown: -62.9%
Avg Drawdown: -15.2%
Normalized Score: -2.371
Lookback periods: [72, 85, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,868,776,155
Annual Return: 43.70%
Sharpe Ratio: 1.46884
Sortino Ratio: 1.410
Max Drawdown: -57.7%
Avg Drawdown: -11.7%
Normalized Score: -0.176
Lookback periods: [104, 132, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,806,192,739
Annual Return: 46.66%
Sharpe Ratio: 1.53043
Sortino Ratio: 1.483
Max Drawdown: -57.9%
Avg Drawdown: -12.3%
Normalized Score: -0.027
Lookback periods: [147, 159, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 20m 26sRunning iteration 31/1500... Est. remaining: 17m 38sRunning iteration 41/1500... Est. remaining: 16m 13sRunning iteration 51/1500... Est. remaining: 15m 18sRunning iteration 61/1500... Est. remaining: 14m 41sRunning iteration 71/1500... Est. remaining: 14m 18sRunning iteration 81/1500... Est. remaining: 13m 55sRunning iteration 91/1500... Est. remaining: 13m 36sRunning iteration 101/1500... Est. remaining: 13m 20sbest_combination: {'lookbacks': [147, 159, 178], 'score': np.float64(-0.02700040423549801), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $605,834,762
Annual Return: 37.40%
Sharpe Ratio: 1.31992
Sortino Ratio: 1.229
Max Drawdown: -44.8%
Avg Drawdown: -9.6%
Normalized Score: -0.008
Lookback periods: [51, 83, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 13m 22sRunning iteration 121/1500... Est. remaining: 13m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,839,561,894
Annual Return: 46.68%
Sharpe Ratio: 1.54422
Sortino Ratio: 1.501
Max Drawdown: -58.5%
Avg Drawdown: -12.2%
Normalized Score: 0.027
Lookback periods: [134, 150, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 8sRunning iteration 141/1500... Est. remaining: 12m 56sRunning iteration 151/1500... Est. remaining: 12m 45sRunning iteration 161/1500... Est. remaining: 12m 35sRunning iteration 171/1500... Est. remaining: 12m 24sRunning iteration 181/1500... Est. remaining: 12m 15sRunning iteration 191/1500... Est. remaining: 12m 6sRunning iteration 201/1500... Est. remaining: 11m 57sbest_combination: {'lookbacks': [134, 150, 156], 'score': np.float64(0.02739662837119856), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,458,071,749
Annual Return: 44.48%
Sharpe Ratio: 1.51447
Sortino Ratio: 1.458
Max Drawdown: -52.3%
Avg Drawdown: -10.2%
Normalized Score: 0.444
Lookback periods: [94, 111, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/1500... Est. remaining: 11m 55sRunning iteration 221/1500... Est. remaining: 11m 48sRunning iteration 231/1500... Est. remaining: 11m 40sRunning iteration 241/1500... Est. remaining: 11m 34sRunning iteration 251/1500... Est. remaining: 11m 27sRunning iteration 261/1500... Est. remaining: 11m 20sRunning iteration 271/1500... Est. remaining: 11m 12sRunning iteration 281/1500... Est. remaining: 11m 5sRunning iteration 291/1500... Est. remaining: 10m 58sRunning iteration 301/1500... Est. remaining: 10m 51sbest_combination: {'lookbacks': [94, 111, 131], 'score': np.float64(0.4441961658384722), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 45sRunning iteration 321/1500... Est. remaining: 10m 38sRunning iteration 331/1500... Est. remaining: 10m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,153,930,166
Annual Return: 48.60%
Sharpe Ratio: 1.60671
Sortino Ratio: 1.558
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.533
Lookback periods: [138, 157, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 341/1500... Est. remaining: 10m 29sRunning iteration 351/1500... Est. remaining: 10m 23sRunning iteration 361/1500... Est. remaining: 10m 16sRunning iteration 371/1500... Est. remaining: 10m 10sRunning iteration 381/1500... Est. remaining: 10m 3sRunning iteration 391/1500... Est. remaining: 9m 57sRunning iteration 401/1500... Est. remaining: 9m 50sbest_combination: {'lookbacks': [138, 157, 179], 'score': np.float64(0.532550177338353), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 44sRunning iteration 421/1500... Est. remaining: 9m 38sRunning iteration 431/1500... Est. remaining: 9m 32sRunning iteration 441/1500... Est. remaining: 9m 25sRunning iteration 451/1500... Est. remaining: 9m 19sRunning iteration 461/1500... Est. remaining: 9m 14sRunning iteration 471/1500... Est. remaining: 9m 8sRunning iteration 481/1500... Est. remaining: 9m 2sRunning iteration 491/1500... Est. remaining: 8m 56sRunning iteration 501/1500... Est. remaining: 8m 50sbest_combination: {'lookbacks': [138, 157, 179], 'score': np.float64(0.532550177338353), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 44sRunning iteration 521/1500... Est. remaining: 8m 39sRunning iteration 531/1500... Est. remaining: 8m 33sRunning iteration 541/1500... Est. remaining: 8m 27sRunning iteration 551/1500... Est. remaining: 8m 21sRunning iteration 561/1500... Est. remaining: 8m 16sRunning iteration 571/1500... Est. remaining: 8m 10sRunning iteration 581/1500... Est. remaining: 8m 4sRunning iteration 591/1500... Est. remaining: 7m 59sRunning iteration 601/1500... Est. remaining: 7m 53sbest_combination: {'lookbacks': [138, 157, 179], 'score': np.float64(0.532550177338353), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 48sRunning iteration 621/1500... Est. remaining: 7m 43sRunning iteration 631/1500... Est. remaining: 7m 37sRunning iteration 641/1500... Est. remaining: 7m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,056,785,687
Annual Return: 42.33%
Sharpe Ratio: 1.48746
Sortino Ratio: 1.393
Max Drawdown: -38.0%
Avg Drawdown: -9.9%
Normalized Score: 0.788
Lookback periods: [52, 53, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,393,760,919
Annual Return: 42.96%
Sharpe Ratio: 1.53142
Sortino Ratio: 1.432
Max Drawdown: -38.3%
Avg Drawdown: -9.7%
Normalized Score: 0.949
Lookback periods: [50, 52, 75] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 7m 29sRunning iteration 661/1500... Est. remaining: 7m 24sRunning iteration 671/1500... Est. remaining: 7m 18sRunning iteration 681/1500... Est. remaining: 7m 12sRunning iteration 691/1500... Est. remaining: 7m 7sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [50, 52, 75], 'score': np.float64(0.9489731000421683), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 56sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 45sRunning iteration 741/1500... Est. remaining: 6m 39sRunning iteration 751/1500... Est. remaining: 6m 34sRunning iteration 761/1500... Est. remaining: 6m 28sRunning iteration 771/1500... Est. remaining: 6m 23sRunning iteration 781/1500... Est. remaining: 6m 17sRunning iteration 791/1500... Est. remaining: 6m 12sRunning iteration 801/1500... Est. remaining: 6m 6sbest_combination: {'lookbacks': [50, 52, 75], 'score': np.float64(0.9489731000421683), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,880,619,945
Annual Return: 41.96%
Sharpe Ratio: 1.50274
Sortino Ratio: 1.397
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 0.992
Lookback periods: [50, 51, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 811/1500... Est. remaining: 6m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,275,652,430
Annual Return: 42.75%
Sharpe Ratio: 1.51314
Sortino Ratio: 1.406
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 1.020
Lookback periods: [51, 52, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,988,750,556
Annual Return: 43.87%
Sharpe Ratio: 1.55360
Sortino Ratio: 1.462
Max Drawdown: -36.7%
Avg Drawdown: -9.4%
Normalized Score: 1.179
Lookback periods: [50, 53, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,606,599,028
Annual Return: 43.31%
Sharpe Ratio: 1.54845
Sortino Ratio: 1.453
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.241
Lookback periods: [50, 54, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 37sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,611,462,174
Annual Return: 44.66%
Sharpe Ratio: 1.57548
Sortino Ratio: 1.485
Max Drawdown: -35.6%
Avg Drawdown: -9.2%
Normalized Score: 1.340
Lookback periods: [52, 54, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 5m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,229,417,452
Annual Return: 44.20%
Sharpe Ratio: 1.57610
Sortino Ratio: 1.489
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.361
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 901/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [50, 54, 90], 'score': np.float64(1.3612644108745149), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,734,383,559
Annual Return: 44.80%
Sharpe Ratio: 1.61116
Sortino Ratio: 1.516
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.555
Lookback periods: [50, 54, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 5m 12sRunning iteration 921/1500... Est. remaining: 5m 7sRunning iteration 931/1500... Est. remaining: 5m 1sRunning iteration 941/1500... Est. remaining: 4m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.759
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 40sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 29sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7592761854609855), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 18sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7592761854609855), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7592761854609855), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7592761854609855), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.871
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8706681984268627), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.87
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8706681984268627), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.8707)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Mon Aug 25 13:18:28 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $490,986,771
Annual Return: 36.57%
Sharpe Ratio: 1.23998
Sortino Ratio: 1.169
Max Drawdown: -67.8%
Avg Drawdown: -14.6%
Normalized Score: -1.787
Lookback periods: [91, 149, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,136,285,885
Annual Return: 39.92%
Sharpe Ratio: 1.35561
Sortino Ratio: 1.280
Max Drawdown: -55.3%
Avg Drawdown: -12.8%
Normalized Score: -0.606
Lookback periods: [87, 127, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $631,156,934
Annual Return: 37.56%
Sharpe Ratio: 1.33382
Sortino Ratio: 1.243
Max Drawdown: -52.3%
Avg Drawdown: -12.0%
Normalized Score: -0.506
Lookback periods: [58, 89, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,294,982,011
Annual Return: 42.78%
Sharpe Ratio: 1.42813
Sortino Ratio: 1.370
Max Drawdown: -55.0%
Avg Drawdown: -12.8%
Normalized Score: -0.277
Lookback periods: [97, 137, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,055,823,456
Annual Return: 45.15%
Sharpe Ratio: 1.47346
Sortino Ratio: 1.435
Max Drawdown: -59.0%
Avg Drawdown: -12.4%
Normalized Score: -0.088
Lookback periods: [164, 181, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 2sRunning iteration 31/1500... Est. remaining: 20m 8sRunning iteration 41/1500... Est. remaining: 18m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,040,505,205
Annual Return: 42.30%
Sharpe Ratio: 1.44284
Sortino Ratio: 1.368
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: -0.015
Lookback periods: [94, 98, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 17m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,316,791,414
Annual Return: 47.01%
Sharpe Ratio: 1.53562
Sortino Ratio: 1.505
Max Drawdown: -59.9%
Avg Drawdown: -12.3%
Normalized Score: 0.121
Lookback periods: [136, 178, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 57sRunning iteration 71/1500... Est. remaining: 16m 10sRunning iteration 81/1500... Est. remaining: 15m 33sRunning iteration 91/1500... Est. remaining: 15m 3sRunning iteration 101/1500... Est. remaining: 14m 39sbest_combination: {'lookbacks': [136, 178, 189], 'score': np.float64(0.12080072859329279), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,140,053,647
Annual Return: 49.04%
Sharpe Ratio: 1.58767
Sortino Ratio: 1.556
Max Drawdown: -61.2%
Avg Drawdown: -11.6%
Normalized Score: 0.439
Lookback periods: [157, 183, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 33sRunning iteration 121/1500... Est. remaining: 14m 14sRunning iteration 131/1500... Est. remaining: 13m 56sRunning iteration 141/1500... Est. remaining: 13m 40sRunning iteration 151/1500... Est. remaining: 13m 26sRunning iteration 161/1500... Est. remaining: 13m 12sRunning iteration 171/1500... Est. remaining: 12m 59sRunning iteration 181/1500... Est. remaining: 12m 47sRunning iteration 191/1500... Est. remaining: 12m 36sRunning iteration 201/1500... Est. remaining: 12m 26sbest_combination: {'lookbacks': [157, 183, 184], 'score': np.float64(0.4386574550147134), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 16sRunning iteration 221/1500... Est. remaining: 12m 7sRunning iteration 231/1500... Est. remaining: 11m 58sRunning iteration 241/1500... Est. remaining: 11m 49sRunning iteration 251/1500... Est. remaining: 11m 41sRunning iteration 261/1500... Est. remaining: 11m 33sRunning iteration 271/1500... Est. remaining: 11m 25sRunning iteration 281/1500... Est. remaining: 11m 18sRunning iteration 291/1500... Est. remaining: 11m 10sRunning iteration 301/1500... Est. remaining: 11m 3sbest_combination: {'lookbacks': [157, 183, 184], 'score': np.float64(0.4386574550147134), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 55sRunning iteration 321/1500... Est. remaining: 10m 48sRunning iteration 331/1500... Est. remaining: 10m 41sRunning iteration 341/1500... Est. remaining: 10m 34sRunning iteration 351/1500... Est. remaining: 10m 28sRunning iteration 361/1500... Est. remaining: 10m 21sRunning iteration 371/1500... Est. remaining: 10m 14sRunning iteration 381/1500... Est. remaining: 10m 8sRunning iteration 391/1500... Est. remaining: 10m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $787,943,080
Annual Return: 38.45%
Sharpe Ratio: 1.37182
Sortino Ratio: 1.277
Max Drawdown: -34.7%
Avg Drawdown: -10.3%
Normalized Score: 0.549
Lookback periods: [51, 66, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 9m 58sbest_combination: {'lookbacks': [51, 66, 83], 'score': np.float64(0.5487906441134024), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 52sRunning iteration 421/1500... Est. remaining: 9m 46sRunning iteration 431/1500... Est. remaining: 9m 40sRunning iteration 441/1500... Est. remaining: 9m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $903,708,231
Annual Return: 38.99%
Sharpe Ratio: 1.38839
Sortino Ratio: 1.290
Max Drawdown: -35.1%
Avg Drawdown: -10.4%
Normalized Score: 0.575
Lookback periods: [50, 66, 76] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 30sRunning iteration 461/1500... Est. remaining: 9m 24sRunning iteration 471/1500... Est. remaining: 9m 18sRunning iteration 481/1500... Est. remaining: 9m 11sRunning iteration 491/1500... Est. remaining: 9m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $759,382,629
Annual Return: 38.30%
Sharpe Ratio: 1.36786
Sortino Ratio: 1.269
Max Drawdown: -34.7%
Avg Drawdown: -10.0%
Normalized Score: 0.586
Lookback periods: [51, 60, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 9m 2sbest_combination: {'lookbacks': [51, 60, 80], 'score': np.float64(0.5862917704292822), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 56sRunning iteration 521/1500... Est. remaining: 8m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $827,444,099
Annual Return: 38.64%
Sharpe Ratio: 1.39316
Sortino Ratio: 1.294
Max Drawdown: -36.5%
Avg Drawdown: -9.9%
Normalized Score: 0.612
Lookback periods: [50, 61, 81] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 8m 46sRunning iteration 541/1500... Est. remaining: 8m 40sRunning iteration 551/1500... Est. remaining: 8m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,116,795,817
Annual Return: 48.58%
Sharpe Ratio: 1.60090
Sortino Ratio: 1.565
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.613
Lookback periods: [139, 153, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 8m 30sRunning iteration 571/1500... Est. remaining: 8m 24sRunning iteration 581/1500... Est. remaining: 8m 18sRunning iteration 591/1500... Est. remaining: 8m 12sRunning iteration 601/1500... Est. remaining: 8m 6sbest_combination: {'lookbacks': [139, 153, 159], 'score': np.float64(0.6127662113465592), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 0sRunning iteration 621/1500... Est. remaining: 7m 55sRunning iteration 631/1500... Est. remaining: 7m 49sRunning iteration 641/1500... Est. remaining: 7m 43sRunning iteration 651/1500... Est. remaining: 7m 37sRunning iteration 661/1500... Est. remaining: 7m 31sRunning iteration 671/1500... Est. remaining: 7m 26sRunning iteration 681/1500... Est. remaining: 7m 20sRunning iteration 691/1500... Est. remaining: 7m 14sRunning iteration 701/1500... Est. remaining: 7m 8sbest_combination: {'lookbacks': [139, 153, 159], 'score': np.float64(0.6127662113465592), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 3sRunning iteration 721/1500... Est. remaining: 6m 57sRunning iteration 731/1500... Est. remaining: 6m 51sRunning iteration 741/1500... Est. remaining: 6m 46sRunning iteration 751/1500... Est. remaining: 6m 40sRunning iteration 761/1500... Est. remaining: 6m 35sRunning iteration 771/1500... Est. remaining: 6m 29sRunning iteration 781/1500... Est. remaining: 6m 23sRunning iteration 791/1500... Est. remaining: 6m 18sRunning iteration 801/1500... Est. remaining: 6m 12sbest_combination: {'lookbacks': [139, 153, 159], 'score': np.float64(0.6127662113465592), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 7sRunning iteration 821/1500... Est. remaining: 6m 1sRunning iteration 831/1500... Est. remaining: 5m 56sRunning iteration 841/1500... Est. remaining: 5m 50sRunning iteration 851/1500... Est. remaining: 5m 45sRunning iteration 861/1500... Est. remaining: 5m 39sRunning iteration 871/1500... Est. remaining: 5m 34sRunning iteration 881/1500... Est. remaining: 5m 28sRunning iteration 891/1500... Est. remaining: 5m 23sRunning iteration 901/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [139, 153, 159], 'score': np.float64(0.6127662113465592), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 12sRunning iteration 921/1500... Est. remaining: 5m 7sRunning iteration 931/1500... Est. remaining: 5m 1sRunning iteration 941/1500... Est. remaining: 4m 56sRunning iteration 951/1500... Est. remaining: 4m 50sRunning iteration 961/1500... Est. remaining: 4m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,162,506,563
Annual Return: 40.01%
Sharpe Ratio: 1.44328
Sortino Ratio: 1.353
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.085
Lookback periods: [50, 59, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 971/1500... Est. remaining: 4m 40sRunning iteration 981/1500... Est. remaining: 4m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,159,076,333
Annual Return: 42.53%
Sharpe Ratio: 1.53430
Sortino Ratio: 1.444
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.504
Lookback periods: [50, 62, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,357,528,316
Annual Return: 42.89%
Sharpe Ratio: 1.57054
Sortino Ratio: 1.463
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.604
Lookback periods: [50, 57, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 991/1500... Est. remaining: 4m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.836
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1001/1500... Est. remaining: 4m 26sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.8363673195414827), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 20sRunning iteration 1021/1500... Est. remaining: 4m 15sRunning iteration 1031/1500... Est. remaining: 4m 9sRunning iteration 1041/1500... Est. remaining: 4m 4sRunning iteration 1051/1500... Est. remaining: 3m 59sRunning iteration 1061/1500... Est. remaining: 3m 53sRunning iteration 1071/1500... Est. remaining: 3m 48sRunning iteration 1081/1500... Est. remaining: 3m 42sRunning iteration 1091/1500... Est. remaining: 3m 37sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.8363673195414827), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.011
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1111/1500... Est. remaining: 3m 27sRunning iteration 1121/1500... Est. remaining: 3m 21sRunning iteration 1131/1500... Est. remaining: 3m 16sRunning iteration 1141/1500... Est. remaining: 3m 10sRunning iteration 1151/1500... Est. remaining: 3m 5sRunning iteration 1161/1500... Est. remaining: 3m 0sRunning iteration 1171/1500... Est. remaining: 2m 54sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.010665601060359), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 33sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.010665601060359), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.010665601060359), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 2.01
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.010665601060359), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.0107)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Mon Aug 25 13:31:40 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $950,288,804
Annual Return: 39.20%
Sharpe Ratio: 1.32401
Sortino Ratio: 1.245
Max Drawdown: -55.0%
Avg Drawdown: -13.0%
Normalized Score: -0.741
Lookback periods: [75, 116, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $917,544,311
Annual Return: 39.05%
Sharpe Ratio: 1.32737
Sortino Ratio: 1.248
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: -0.519
Lookback periods: [79, 118, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,424,029,682
Annual Return: 47.09%
Sharpe Ratio: 1.52464
Sortino Ratio: 1.488
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.202
Lookback periods: [180, 185, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 11sRunning iteration 31/1500... Est. remaining: 18m 11sRunning iteration 41/1500... Est. remaining: 16m 40sRunning iteration 51/1500... Est. remaining: 15m 41sRunning iteration 61/1500... Est. remaining: 15m 0sRunning iteration 71/1500... Est. remaining: 14m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,724,333,835
Annual Return: 46.60%
Sharpe Ratio: 1.52668
Sortino Ratio: 1.486
Max Drawdown: -57.2%
Avg Drawdown: -11.9%
Normalized Score: 0.215
Lookback periods: [140, 155, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 14m 28sRunning iteration 91/1500... Est. remaining: 14m 7sRunning iteration 101/1500... Est. remaining: 13m 49sbest_combination: {'lookbacks': [140, 155, 159], 'score': np.float64(0.21478793344802893), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 32sRunning iteration 121/1500... Est. remaining: 13m 18sRunning iteration 131/1500... Est. remaining: 13m 4sRunning iteration 141/1500... Est. remaining: 12m 53sRunning iteration 151/1500... Est. remaining: 12m 42sRunning iteration 161/1500... Est. remaining: 12m 32sRunning iteration 171/1500... Est. remaining: 12m 23sRunning iteration 181/1500... Est. remaining: 12m 14sRunning iteration 191/1500... Est. remaining: 12m 5sRunning iteration 201/1500... Est. remaining: 11m 57sbest_combination: {'lookbacks': [140, 155, 159], 'score': np.float64(0.21478793344802893), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 49sRunning iteration 221/1500... Est. remaining: 11m 41sRunning iteration 231/1500... Est. remaining: 11m 34sRunning iteration 241/1500... Est. remaining: 11m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,572,034,539
Annual Return: 48.79%
Sharpe Ratio: 1.57871
Sortino Ratio: 1.542
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.407
Lookback periods: [178, 181, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 11m 26sRunning iteration 261/1500... Est. remaining: 11m 18sRunning iteration 271/1500... Est. remaining: 11m 11sRunning iteration 281/1500... Est. remaining: 11m 4sRunning iteration 291/1500... Est. remaining: 10m 57sRunning iteration 301/1500... Est. remaining: 10m 50sbest_combination: {'lookbacks': [178, 181, 184], 'score': np.float64(0.40691554735250063), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 44sRunning iteration 321/1500... Est. remaining: 10m 37sRunning iteration 331/1500... Est. remaining: 10m 31sRunning iteration 341/1500... Est. remaining: 10m 24sRunning iteration 351/1500... Est. remaining: 10m 18sRunning iteration 361/1500... Est. remaining: 10m 12sRunning iteration 371/1500... Est. remaining: 10m 5sRunning iteration 381/1500... Est. remaining: 9m 59sRunning iteration 391/1500... Est. remaining: 9m 53sRunning iteration 401/1500... Est. remaining: 9m 47sbest_combination: {'lookbacks': [178, 181, 184], 'score': np.float64(0.40691554735250063), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 41sRunning iteration 421/1500... Est. remaining: 9m 35sRunning iteration 431/1500... Est. remaining: 9m 29sRunning iteration 441/1500... Est. remaining: 9m 23sRunning iteration 451/1500... Est. remaining: 9m 18sRunning iteration 461/1500... Est. remaining: 9m 12sRunning iteration 471/1500... Est. remaining: 9m 6sRunning iteration 481/1500... Est. remaining: 9m 0sRunning iteration 491/1500... Est. remaining: 8m 55sRunning iteration 501/1500... Est. remaining: 8m 49sbest_combination: {'lookbacks': [178, 181, 184], 'score': np.float64(0.40691554735250063), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 44sRunning iteration 521/1500... Est. remaining: 8m 38sRunning iteration 531/1500... Est. remaining: 8m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,193,377,320
Annual Return: 49.46%
Sharpe Ratio: 1.59997
Sortino Ratio: 1.557
Max Drawdown: -59.6%
Avg Drawdown: -11.0%
Normalized Score: 0.555
Lookback periods: [183, 189, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 8m 29sRunning iteration 551/1500... Est. remaining: 8m 23sRunning iteration 561/1500... Est. remaining: 8m 18sRunning iteration 571/1500... Est. remaining: 8m 12sRunning iteration 581/1500... Est. remaining: 8m 6sRunning iteration 591/1500... Est. remaining: 8m 1sRunning iteration 601/1500... Est. remaining: 7m 55sbest_combination: {'lookbacks': [183, 189, 194], 'score': np.float64(0.5550598272844364), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 50sRunning iteration 621/1500... Est. remaining: 7m 44sRunning iteration 631/1500... Est. remaining: 7m 39sRunning iteration 641/1500... Est. remaining: 7m 33sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 22sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 11sRunning iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [183, 189, 194], 'score': np.float64(0.5550598272844364), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 55sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 44sRunning iteration 741/1500... Est. remaining: 6m 39sRunning iteration 751/1500... Est. remaining: 6m 33sRunning iteration 761/1500... Est. remaining: 6m 28sRunning iteration 771/1500... Est. remaining: 6m 23sRunning iteration 781/1500... Est. remaining: 6m 17sRunning iteration 791/1500... Est. remaining: 6m 12sRunning iteration 801/1500... Est. remaining: 6m 7sbest_combination: {'lookbacks': [183, 189, 194], 'score': np.float64(0.5550598272844364), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 1sRunning iteration 821/1500... Est. remaining: 5m 56sRunning iteration 831/1500... Est. remaining: 5m 51sRunning iteration 841/1500... Est. remaining: 5m 45sRunning iteration 851/1500... Est. remaining: 5m 40sRunning iteration 861/1500... Est. remaining: 5m 35sRunning iteration 871/1500... Est. remaining: 5m 29sRunning iteration 881/1500... Est. remaining: 5m 24sRunning iteration 891/1500... Est. remaining: 5m 19sRunning iteration 901/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [183, 189, 194], 'score': np.float64(0.5550598272844364), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 8sRunning iteration 921/1500... Est. remaining: 5m 3sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 52sRunning iteration 951/1500... Est. remaining: 4m 47sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 36sRunning iteration 981/1500... Est. remaining: 4m 31sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [183, 189, 194], 'score': np.float64(0.5550598272844364), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [183, 189, 194], 'score': np.float64(0.5550598272844364), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [183, 189, 194], 'score': np.float64(0.5550598272844364), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,330,133,874
Annual Return: 49.88%
Sharpe Ratio: 1.61584
Sortino Ratio: 1.570
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.588
Lookback periods: [181, 190, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [181, 190, 198], 'score': np.float64(0.5877899151475707), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [181, 190, 198], 'score': np.float64(0.5877899151475707), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $13,050,184,761
Annual Return: 50.12%
Sharpe Ratio: 1.61464
Sortino Ratio: 1.575
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.636
Lookback periods: [178, 189, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 0.64
best_combination: {'lookbacks': [178, 189, 190], 'score': np.float64(0.6362103093323819), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [178, 189, 190] (score: 0.6362)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [178, 189, 190] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 123 selections (29.6%)
2. sp500_hma: 103 selections (24.8%)
3. naz100_pine: 83 selections (20.0%)
4. naz100_pi: 68 selections (16.3%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $13,050,184,761.00
Average Annualized Gain: 50.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Mon Aug 25 13:44:51 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,022,348,232
Annual Return: 42.26%
Sharpe Ratio: 1.40938
Sortino Ratio: 1.361
Max Drawdown: -58.9%
Avg Drawdown: -13.4%
Normalized Score: -0.703
Lookback periods: [122, 125, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,139,437,016
Annual Return: 44.08%
Sharpe Ratio: 1.44396
Sortino Ratio: 1.402
Max Drawdown: -60.6%
Avg Drawdown: -11.9%
Normalized Score: -0.263
Lookback periods: [156, 194, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,363,974,507
Annual Return: 44.37%
Sharpe Ratio: 1.46064
Sortino Ratio: 1.424
Max Drawdown: -59.6%
Avg Drawdown: -11.9%
Normalized Score: -0.159
Lookback periods: [146, 174, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,134,179,721
Annual Return: 45.23%
Sharpe Ratio: 1.47414
Sortino Ratio: 1.430
Max Drawdown: -59.9%
Avg Drawdown: -12.7%
Normalized Score: -0.155
Lookback periods: [135, 184, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 56sRunning iteration 31/1500... Est. remaining: 19m 20sRunning iteration 41/1500... Est. remaining: 17m 27sRunning iteration 51/1500... Est. remaining: 16m 18sRunning iteration 61/1500... Est. remaining: 15m 30sRunning iteration 71/1500... Est. remaining: 14m 55sRunning iteration 81/1500... Est. remaining: 14m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,171,210,039
Annual Return: 44.12%
Sharpe Ratio: 1.51868
Sortino Ratio: 1.437
Max Drawdown: -52.3%
Avg Drawdown: -11.6%
Normalized Score: 0.166
Lookback periods: [89, 94, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,104,465,310
Annual Return: 46.87%
Sharpe Ratio: 1.51668
Sortino Ratio: 1.481
Max Drawdown: -62.9%
Avg Drawdown: -11.8%
Normalized Score: 0.178
Lookback periods: [175, 184, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 14m 20sbest_combination: {'lookbacks': [175, 184, 194], 'score': np.float64(0.1775155487028623), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 0sRunning iteration 121/1500... Est. remaining: 13m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,563,473,509
Annual Return: 47.78%
Sharpe Ratio: 1.54644
Sortino Ratio: 1.512
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.525
Lookback periods: [177, 188, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 39sRunning iteration 141/1500... Est. remaining: 13m 24sRunning iteration 151/1500... Est. remaining: 13m 10sRunning iteration 161/1500... Est. remaining: 12m 57sRunning iteration 171/1500... Est. remaining: 12m 45sRunning iteration 181/1500... Est. remaining: 12m 33sRunning iteration 191/1500... Est. remaining: 12m 23sRunning iteration 201/1500... Est. remaining: 12m 13sbest_combination: {'lookbacks': [177, 188, 196], 'score': np.float64(0.5250414032657721), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 3sRunning iteration 221/1500... Est. remaining: 11m 54sRunning iteration 231/1500... Est. remaining: 11m 46sRunning iteration 241/1500... Est. remaining: 11m 37sRunning iteration 251/1500... Est. remaining: 11m 29sRunning iteration 261/1500... Est. remaining: 11m 21sRunning iteration 271/1500... Est. remaining: 11m 14sRunning iteration 281/1500... Est. remaining: 11m 6sRunning iteration 291/1500... Est. remaining: 10m 59sRunning iteration 301/1500... Est. remaining: 10m 51sbest_combination: {'lookbacks': [177, 188, 196], 'score': np.float64(0.5250414032657721), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 44sRunning iteration 321/1500... Est. remaining: 10m 37sRunning iteration 331/1500... Est. remaining: 10m 31sRunning iteration 341/1500... Est. remaining: 10m 24sRunning iteration 351/1500... Est. remaining: 10m 17sRunning iteration 361/1500... Est. remaining: 10m 11sRunning iteration 371/1500... Est. remaining: 10m 4sRunning iteration 381/1500... Est. remaining: 9m 58sRunning iteration 391/1500... Est. remaining: 9m 52sRunning iteration 401/1500... Est. remaining: 9m 45sbest_combination: {'lookbacks': [177, 188, 196], 'score': np.float64(0.5250414032657721), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 39sRunning iteration 421/1500... Est. remaining: 9m 33sRunning iteration 431/1500... Est. remaining: 9m 27sRunning iteration 441/1500... Est. remaining: 9m 21sRunning iteration 451/1500... Est. remaining: 9m 15sRunning iteration 461/1500... Est. remaining: 9m 9sRunning iteration 471/1500... Est. remaining: 9m 3sRunning iteration 481/1500... Est. remaining: 8m 57sRunning iteration 491/1500... Est. remaining: 8m 52sRunning iteration 501/1500... Est. remaining: 8m 46sbest_combination: {'lookbacks': [177, 188, 196], 'score': np.float64(0.5250414032657721), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 40sRunning iteration 521/1500... Est. remaining: 8m 34sRunning iteration 531/1500... Est. remaining: 8m 29sRunning iteration 541/1500... Est. remaining: 8m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $13,464,785,095
Annual Return: 50.26%
Sharpe Ratio: 1.62361
Sortino Ratio: 1.592
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 1.039
Lookback periods: [176, 184, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 19sRunning iteration 561/1500... Est. remaining: 8m 14sRunning iteration 571/1500... Est. remaining: 8m 8sRunning iteration 581/1500... Est. remaining: 8m 3sRunning iteration 591/1500... Est. remaining: 7m 57sRunning iteration 601/1500... Est. remaining: 7m 52sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(1.0388574634917331), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 46sRunning iteration 621/1500... Est. remaining: 7m 41sRunning iteration 631/1500... Est. remaining: 7m 35sRunning iteration 641/1500... Est. remaining: 7m 30sRunning iteration 651/1500... Est. remaining: 7m 24sRunning iteration 661/1500... Est. remaining: 7m 19sRunning iteration 671/1500... Est. remaining: 7m 13sRunning iteration 681/1500... Est. remaining: 7m 8sRunning iteration 691/1500... Est. remaining: 7m 2sRunning iteration 701/1500... Est. remaining: 6m 57sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(1.0388574634917331), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 52sRunning iteration 721/1500... Est. remaining: 6m 46sRunning iteration 731/1500... Est. remaining: 6m 41sRunning iteration 741/1500... Est. remaining: 6m 36sRunning iteration 751/1500... Est. remaining: 6m 30sRunning iteration 761/1500... Est. remaining: 6m 25sRunning iteration 771/1500... Est. remaining: 6m 20sRunning iteration 781/1500... Est. remaining: 6m 14sRunning iteration 791/1500... Est. remaining: 6m 9sRunning iteration 801/1500... Est. remaining: 6m 4sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(1.0388574634917331), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 58sRunning iteration 821/1500... Est. remaining: 5m 53sRunning iteration 831/1500... Est. remaining: 5m 46sRunning iteration 841/1500... Est. remaining: 5m 39sRunning iteration 851/1500... Est. remaining: 5m 32sRunning iteration 861/1500... Est. remaining: 5m 25sRunning iteration 871/1500... Est. remaining: 5m 19sRunning iteration 881/1500... Est. remaining: 5m 12sRunning iteration 891/1500... Est. remaining: 5m 5sRunning iteration 901/1500... Est. remaining: 4m 59sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(1.0388574634917331), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 53sRunning iteration 921/1500... Est. remaining: 4m 47sRunning iteration 931/1500... Est. remaining: 4m 40sRunning iteration 941/1500... Est. remaining: 4m 34sRunning iteration 951/1500... Est. remaining: 4m 28sRunning iteration 961/1500... Est. remaining: 4m 22sRunning iteration 971/1500... Est. remaining: 4m 17sRunning iteration 981/1500... Est. remaining: 4m 11sRunning iteration 991/1500... Est. remaining: 4m 5sRunning iteration 1001/1500... Est. remaining: 3m 59sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(1.0388574634917331), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 3m 54sRunning iteration 1021/1500... Est. remaining: 3m 48sRunning iteration 1031/1500... Est. remaining: 3m 42sRunning iteration 1041/1500... Est. remaining: 3m 37sRunning iteration 1051/1500... Est. remaining: 3m 31sRunning iteration 1061/1500... Est. remaining: 3m 26sRunning iteration 1071/1500... Est. remaining: 3m 21sRunning iteration 1081/1500... Est. remaining: 3m 15sRunning iteration 1091/1500... Est. remaining: 3m 10sRunning iteration 1101/1500... Est. remaining: 3m 5sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(1.0388574634917331), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 0sRunning iteration 1121/1500... Est. remaining: 2m 54sRunning iteration 1131/1500... Est. remaining: 2m 49sRunning iteration 1141/1500... Est. remaining: 2m 44sRunning iteration 1151/1500... Est. remaining: 2m 39sRunning iteration 1161/1500... Est. remaining: 2m 34sRunning iteration 1171/1500... Est. remaining: 2m 29sRunning iteration 1181/1500... Est. remaining: 2m 24sRunning iteration 1191/1500... Est. remaining: 2m 19sRunning iteration 1201/1500... Est. remaining: 2m 15sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(1.0388574634917331), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 10sRunning iteration 1221/1500... Est. remaining: 2m 5sRunning iteration 1231/1500... Est. remaining: 2m 0sRunning iteration 1241/1500... Est. remaining: 1m 55sRunning iteration 1251/1500... Est. remaining: 1m 50sRunning iteration 1261/1500... Est. remaining: 1m 46sRunning iteration 1271/1500... Est. remaining: 1m 41sRunning iteration 1281/1500... Est. remaining: 1m 36sRunning iteration 1291/1500... Est. remaining: 1m 32sRunning iteration 1301/1500... Est. remaining: 1m 27sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(1.0388574634917331), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 22sRunning iteration 1321/1500... Est. remaining: 1m 18sRunning iteration 1331/1500... Est. remaining: 1m 13sRunning iteration 1341/1500... Est. remaining: 1m 9sRunning iteration 1351/1500... Est. remaining: 1m 4sRunning iteration 1361/1500... Est. remaining: 1m 0sRunning iteration 1371/1500... Est. remaining: 0m 56sRunning iteration 1381/1500... Est. remaining: 0m 51sRunning iteration 1391/1500... Est. remaining: 0m 47sRunning iteration 1401/1500... Est. remaining: 0m 42sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(1.0388574634917331), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 38sRunning iteration 1421/1500... Est. remaining: 0m 34sRunning iteration 1431/1500... Est. remaining: 0m 29sRunning iteration 1441/1500... Est. remaining: 0m 25sRunning iteration 1451/1500... Est. remaining: 0m 21sRunning iteration 1461/1500... Est. remaining: 0m 16sRunning iteration 1471/1500... Est. remaining: 0m 12sRunning iteration 1481/1500... Est. remaining: 0m 8sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 10.5 minutes
Best normalized score: 1.04
best_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(1.0388574634917331), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [176, 184, 189] (score: 1.0389)

Monte Carlo simulation completed in 10.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 184, 189] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 122 selections (29.3%)
2. sp500_hma: 102 selections (24.5%)
3. naz100_pine: 84 selections (20.2%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $13,464,785,094.64
Average Annualized Gain: 50.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Mon Aug 25 13:55:26 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,303,682,097
Annual Return: 40.47%
Sharpe Ratio: 1.40216
Sortino Ratio: 1.311
Max Drawdown: -57.1%
Avg Drawdown: -11.9%
Normalized Score: -0.467
Lookback periods: [55, 178, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $864,772,724
Annual Return: 38.82%
Sharpe Ratio: 1.39817
Sortino Ratio: 1.308
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.493
Lookback periods: [50, 77, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 20m 38sRunning iteration 21/1500... Est. remaining: 14m 0sRunning iteration 31/1500... Est. remaining: 11m 44sRunning iteration 41/1500... Est. remaining: 10m 35sRunning iteration 51/1500... Est. remaining: 9m 52sRunning iteration 61/1500... Est. remaining: 9m 25sRunning iteration 71/1500... Est. remaining: 9m 2sRunning iteration 81/1500... Est. remaining: 8m 45sRunning iteration 91/1500... Est. remaining: 8m 32sRunning iteration 101/1500... Est. remaining: 8m 21sbest_combination: {'lookbacks': [50, 77, 98], 'score': np.float64(0.4931086310364581), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 10sRunning iteration 121/1500... Est. remaining: 8m 1sRunning iteration 131/1500... Est. remaining: 7m 53sRunning iteration 141/1500... Est. remaining: 7m 46sRunning iteration 151/1500... Est. remaining: 7m 39sRunning iteration 161/1500... Est. remaining: 7m 32sRunning iteration 171/1500... Est. remaining: 7m 26sRunning iteration 181/1500... Est. remaining: 7m 20sRunning iteration 191/1500... Est. remaining: 7m 14sRunning iteration 201/1500... Est. remaining: 7m 10sbest_combination: {'lookbacks': [50, 77, 98], 'score': np.float64(0.4931086310364581), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 5sRunning iteration 221/1500... Est. remaining: 7m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,135,236,149
Annual Return: 44.07%
Sharpe Ratio: 1.52458
Sortino Ratio: 1.437
Max Drawdown: -52.3%
Avg Drawdown: -9.2%
Normalized Score: 0.554
Lookback periods: [50, 96, 127] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 7m 0sRunning iteration 241/1500... Est. remaining: 6m 56sRunning iteration 251/1500... Est. remaining: 6m 51sRunning iteration 261/1500... Est. remaining: 6m 47sRunning iteration 271/1500... Est. remaining: 6m 42sRunning iteration 281/1500... Est. remaining: 6m 38sRunning iteration 291/1500... Est. remaining: 6m 34sRunning iteration 301/1500... Est. remaining: 6m 30sbest_combination: {'lookbacks': [50, 96, 127], 'score': np.float64(0.5543676636214365), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 26sRunning iteration 321/1500... Est. remaining: 6m 22sRunning iteration 331/1500... Est. remaining: 6m 18sRunning iteration 341/1500... Est. remaining: 6m 14sRunning iteration 351/1500... Est. remaining: 6m 10sRunning iteration 361/1500... Est. remaining: 6m 7sRunning iteration 371/1500... Est. remaining: 6m 3sRunning iteration 381/1500... Est. remaining: 5m 59sRunning iteration 391/1500... Est. remaining: 5m 55sRunning iteration 401/1500... Est. remaining: 5m 52sbest_combination: {'lookbacks': [50, 96, 127], 'score': np.float64(0.5543676636214365), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 49sRunning iteration 421/1500... Est. remaining: 5m 45sRunning iteration 431/1500... Est. remaining: 5m 41sRunning iteration 441/1500... Est. remaining: 5m 38sRunning iteration 451/1500... Est. remaining: 5m 35sRunning iteration 461/1500... Est. remaining: 5m 31sRunning iteration 471/1500... Est. remaining: 5m 28sRunning iteration 481/1500... Est. remaining: 5m 24sRunning iteration 491/1500... Est. remaining: 5m 21sRunning iteration 501/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [50, 96, 127], 'score': np.float64(0.5543676636214365), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 14sRunning iteration 521/1500... Est. remaining: 5m 11sRunning iteration 531/1500... Est. remaining: 5m 7sRunning iteration 541/1500... Est. remaining: 5m 4sRunning iteration 551/1500... Est. remaining: 5m 0sRunning iteration 561/1500... Est. remaining: 4m 57sRunning iteration 571/1500... Est. remaining: 4m 54sRunning iteration 581/1500... Est. remaining: 4m 50sRunning iteration 591/1500... Est. remaining: 4m 47sRunning iteration 601/1500... Est. remaining: 4m 44sbest_combination: {'lookbacks': [50, 96, 127], 'score': np.float64(0.5543676636214365), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 40sRunning iteration 621/1500... Est. remaining: 4m 37sRunning iteration 631/1500... Est. remaining: 4m 34sRunning iteration 641/1500... Est. remaining: 4m 30sRunning iteration 651/1500... Est. remaining: 4m 27sRunning iteration 661/1500... Est. remaining: 4m 24sRunning iteration 671/1500... Est. remaining: 4m 21sRunning iteration 681/1500... Est. remaining: 4m 18sRunning iteration 691/1500... Est. remaining: 4m 14sRunning iteration 701/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [50, 96, 127], 'score': np.float64(0.5543676636214365), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 8sRunning iteration 721/1500... Est. remaining: 4m 5sRunning iteration 731/1500... Est. remaining: 4m 1sRunning iteration 741/1500... Est. remaining: 3m 58sRunning iteration 751/1500... Est. remaining: 3m 55sRunning iteration 761/1500... Est. remaining: 3m 52sRunning iteration 771/1500... Est. remaining: 3m 48sRunning iteration 781/1500... Est. remaining: 3m 45sRunning iteration 791/1500... Est. remaining: 3m 42sRunning iteration 801/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [50, 96, 127], 'score': np.float64(0.5543676636214365), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 36sRunning iteration 821/1500... Est. remaining: 3m 32sRunning iteration 831/1500... Est. remaining: 3m 29sRunning iteration 841/1500... Est. remaining: 3m 26sRunning iteration 851/1500... Est. remaining: 3m 23sRunning iteration 861/1500... Est. remaining: 3m 20sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 13sRunning iteration 891/1500... Est. remaining: 3m 10sRunning iteration 901/1500... Est. remaining: 3m 7sbest_combination: {'lookbacks': [50, 96, 127], 'score': np.float64(0.5543676636214365), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 4sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 57sRunning iteration 941/1500... Est. remaining: 2m 54sRunning iteration 951/1500... Est. remaining: 2m 51sRunning iteration 961/1500... Est. remaining: 2m 48sRunning iteration 971/1500... Est. remaining: 2m 45sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 96, 127], 'score': np.float64(0.5543676636214365), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 29sRunning iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [50, 96, 127], 'score': np.float64(0.5543676636214365), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [50, 96, 127], 'score': np.float64(0.5543676636214365), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 96, 127], 'score': np.float64(0.5543676636214365), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 96, 127], 'score': np.float64(0.5543676636214365), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,278,027,773
Annual Return: 44.26%
Sharpe Ratio: 1.54306
Sortino Ratio: 1.450
Max Drawdown: -52.3%
Avg Drawdown: -9.1%
Normalized Score: 0.620
Lookback periods: [50, 95, 127] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 0.62
best_combination: {'lookbacks': [50, 95, 127], 'score': np.float64(0.6198890655690571), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 95, 127] (score: 0.6199)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 95, 127] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 101 selections (24.3%)
3. naz100_pi: 85 selections (20.4%)
4. naz100_pine: 67 selections (16.1%)
5. cash: 51 selections (12.3%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,278,027,773.50
Average Annualized Gain: 44.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Mon Aug 25 14:03:12 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,840,029,102
Annual Return: 43.66%
Sharpe Ratio: 1.44226
Sortino Ratio: 1.397
Max Drawdown: -65.0%
Avg Drawdown: -12.7%
Normalized Score: -0.588
Lookback periods: [113, 158, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,025,998,450
Annual Return: 46.05%
Sharpe Ratio: 1.52277
Sortino Ratio: 1.479
Max Drawdown: -59.7%
Avg Drawdown: -12.4%
Normalized Score: 0.047
Lookback periods: [144, 151, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 19m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $632,899,147
Annual Return: 37.57%
Sharpe Ratio: 1.35448
Sortino Ratio: 1.254
Max Drawdown: -34.7%
Avg Drawdown: -10.1%
Normalized Score: 0.154
Lookback periods: [50, 70, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 14m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,726,654,302
Annual Return: 44.79%
Sharpe Ratio: 1.53927
Sortino Ratio: 1.457
Max Drawdown: -52.3%
Avg Drawdown: -8.9%
Normalized Score: 0.628
Lookback periods: [50, 96, 109] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 12m 37sRunning iteration 41/1500... Est. remaining: 11m 13sRunning iteration 51/1500... Est. remaining: 10m 22sRunning iteration 61/1500... Est. remaining: 9m 45sRunning iteration 71/1500... Est. remaining: 9m 20sRunning iteration 81/1500... Est. remaining: 9m 0sRunning iteration 91/1500... Est. remaining: 8m 43sRunning iteration 101/1500... Est. remaining: 8m 29sbest_combination: {'lookbacks': [50, 96, 109], 'score': np.float64(0.6283733633495758), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 18sRunning iteration 121/1500... Est. remaining: 8m 8sRunning iteration 131/1500... Est. remaining: 7m 59sRunning iteration 141/1500... Est. remaining: 7m 50sRunning iteration 151/1500... Est. remaining: 7m 43sRunning iteration 161/1500... Est. remaining: 7m 37sRunning iteration 171/1500... Est. remaining: 7m 30sRunning iteration 181/1500... Est. remaining: 7m 23sRunning iteration 191/1500... Est. remaining: 7m 18sRunning iteration 201/1500... Est. remaining: 7m 12sbest_combination: {'lookbacks': [50, 96, 109], 'score': np.float64(0.6283733633495758), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 7sRunning iteration 221/1500... Est. remaining: 7m 2sRunning iteration 231/1500... Est. remaining: 6m 57sRunning iteration 241/1500... Est. remaining: 6m 52sRunning iteration 251/1500... Est. remaining: 6m 48sRunning iteration 261/1500... Est. remaining: 6m 43sRunning iteration 271/1500... Est. remaining: 6m 39sRunning iteration 281/1500... Est. remaining: 6m 34sRunning iteration 291/1500... Est. remaining: 6m 30sRunning iteration 301/1500... Est. remaining: 6m 26sbest_combination: {'lookbacks': [50, 96, 109], 'score': np.float64(0.6283733633495758), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 22sRunning iteration 321/1500... Est. remaining: 6m 18sRunning iteration 331/1500... Est. remaining: 6m 13sRunning iteration 341/1500... Est. remaining: 6m 10sRunning iteration 351/1500... Est. remaining: 6m 6sRunning iteration 361/1500... Est. remaining: 6m 2sRunning iteration 371/1500... Est. remaining: 5m 58sRunning iteration 381/1500... Est. remaining: 5m 54sRunning iteration 391/1500... Est. remaining: 5m 51sRunning iteration 401/1500... Est. remaining: 5m 47sbest_combination: {'lookbacks': [50, 96, 109], 'score': np.float64(0.6283733633495758), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 44sRunning iteration 421/1500... Est. remaining: 5m 40sRunning iteration 431/1500... Est. remaining: 5m 36sRunning iteration 441/1500... Est. remaining: 5m 33sRunning iteration 451/1500... Est. remaining: 5m 29sRunning iteration 461/1500... Est. remaining: 5m 26sRunning iteration 471/1500... Est. remaining: 5m 22sRunning iteration 481/1500... Est. remaining: 5m 19sRunning iteration 491/1500... Est. remaining: 5m 15sRunning iteration 501/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [50, 96, 109], 'score': np.float64(0.6283733633495758), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 9sRunning iteration 521/1500... Est. remaining: 5m 5sRunning iteration 531/1500... Est. remaining: 5m 2sRunning iteration 541/1500... Est. remaining: 4m 59sRunning iteration 551/1500... Est. remaining: 4m 56sRunning iteration 561/1500... Est. remaining: 4m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,279,322,118
Annual Return: 49.09%
Sharpe Ratio: 1.60533
Sortino Ratio: 1.577
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 0.653
Lookback periods: [135, 155, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 4m 50sRunning iteration 581/1500... Est. remaining: 4m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,557,886,956
Annual Return: 41.19%
Sharpe Ratio: 1.48339
Sortino Ratio: 1.379
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 0.862
Lookback periods: [50, 55, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 4m 45sRunning iteration 601/1500... Est. remaining: 4m 41sbest_combination: {'lookbacks': [50, 55, 100], 'score': np.float64(0.8623887672074749), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,293,289,579
Annual Return: 44.28%
Sharpe Ratio: 1.58522
Sortino Ratio: 1.495
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.428
Lookback periods: [50, 53, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 4m 36sRunning iteration 631/1500... Est. remaining: 4m 32sRunning iteration 641/1500... Est. remaining: 4m 29sRunning iteration 651/1500... Est. remaining: 4m 26sRunning iteration 661/1500... Est. remaining: 4m 22sRunning iteration 671/1500... Est. remaining: 4m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,000,795,877
Annual Return: 43.89%
Sharpe Ratio: 1.59063
Sortino Ratio: 1.492
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.452
Lookback periods: [50, 52, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 4m 17sRunning iteration 691/1500... Est. remaining: 4m 13sRunning iteration 701/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [50, 52, 102], 'score': np.float64(1.4515184574127276), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.899
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 711/1500... Est. remaining: 4m 8sRunning iteration 721/1500... Est. remaining: 4m 4sRunning iteration 731/1500... Est. remaining: 4m 1sRunning iteration 741/1500... Est. remaining: 3m 58sRunning iteration 751/1500... Est. remaining: 3m 54sRunning iteration 761/1500... Est. remaining: 3m 51sRunning iteration 771/1500... Est. remaining: 3m 48sRunning iteration 781/1500... Est. remaining: 3m 44sRunning iteration 791/1500... Est. remaining: 3m 41sRunning iteration 801/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8992162352882662), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 31sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 15sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8992162352882662), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 2sRunning iteration 921/1500... Est. remaining: 2m 59sRunning iteration 931/1500... Est. remaining: 2m 56sRunning iteration 941/1500... Est. remaining: 2m 53sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 43sRunning iteration 981/1500... Est. remaining: 2m 40sRunning iteration 991/1500... Est. remaining: 2m 37sRunning iteration 1001/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8992162352882662), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 31sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 24sRunning iteration 1041/1500... Est. remaining: 2m 21sRunning iteration 1051/1500... Est. remaining: 2m 18sRunning iteration 1061/1500... Est. remaining: 2m 15sRunning iteration 1071/1500... Est. remaining: 2m 12sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 2sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8992162352882662), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 59sRunning iteration 1121/1500... Est. remaining: 1m 56sRunning iteration 1131/1500... Est. remaining: 1m 53sRunning iteration 1141/1500... Est. remaining: 1m 50sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 31sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8992162352882662), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 28sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 3sRunning iteration 1301/1500... Est. remaining: 1m 0sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8992162352882662), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 57sRunning iteration 1321/1500... Est. remaining: 0m 54sRunning iteration 1331/1500... Est. remaining: 0m 51sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8992162352882662), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 1.90
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8992162352882662), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 1.8992)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Mon Aug 25 14:10:53 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $125,867,391
Annual Return: 31.31%
Sharpe Ratio: 1.09737
Sortino Ratio: 0.997
Max Drawdown: -62.2%
Avg Drawdown: -14.3%
Normalized Score: -2.400
Lookback periods: [61, 73, 140] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $617,351,997
Annual Return: 37.47%
Sharpe Ratio: 1.28390
Sortino Ratio: 1.207
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: -0.753
Lookback periods: [78, 110, 117] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,153,783,698
Annual Return: 44.10%
Sharpe Ratio: 1.46044
Sortino Ratio: 1.421
Max Drawdown: -55.0%
Avg Drawdown: -12.4%
Normalized Score: -0.388
Lookback periods: [126, 132, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 15m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,594,177,620
Annual Return: 45.67%
Sharpe Ratio: 1.50431
Sortino Ratio: 1.459
Max Drawdown: -60.3%
Avg Drawdown: -12.1%
Normalized Score: -0.325
Lookback periods: [122, 157, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 11m 43sRunning iteration 31/1500... Est. remaining: 10m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,343,723,905
Annual Return: 40.59%
Sharpe Ratio: 1.40749
Sortino Ratio: 1.321
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: -0.260
Lookback periods: [50, 97, 120] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 9m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,268,887,459
Annual Return: 45.36%
Sharpe Ratio: 1.49619
Sortino Ratio: 1.451
Max Drawdown: -57.2%
Avg Drawdown: -11.7%
Normalized Score: -0.189
Lookback periods: [130, 157, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 9m 55sRunning iteration 61/1500... Est. remaining: 9m 26sRunning iteration 71/1500... Est. remaining: 9m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,642,301,848
Annual Return: 45.71%
Sharpe Ratio: 1.49332
Sortino Ratio: 1.455
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: -0.109
Lookback periods: [159, 162, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 9m 2sRunning iteration 91/1500... Est. remaining: 8m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,984,460,266
Annual Return: 46.79%
Sharpe Ratio: 1.53531
Sortino Ratio: 1.486
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.021
Lookback periods: [139, 156, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,775,451,752
Annual Return: 47.31%
Sharpe Ratio: 1.55470
Sortino Ratio: 1.506
Max Drawdown: -56.0%
Avg Drawdown: -11.1%
Normalized Score: 0.180
Lookback periods: [138, 157, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 8m 54sbest_combination: {'lookbacks': [138, 157, 191], 'score': np.float64(0.17954110370190948), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 41sRunning iteration 121/1500... Est. remaining: 8m 30sRunning iteration 131/1500... Est. remaining: 8m 19sRunning iteration 141/1500... Est. remaining: 8m 9sRunning iteration 151/1500... Est. remaining: 8m 0sRunning iteration 161/1500... Est. remaining: 7m 53sRunning iteration 171/1500... Est. remaining: 7m 46sRunning iteration 181/1500... Est. remaining: 7m 39sRunning iteration 191/1500... Est. remaining: 7m 34sRunning iteration 201/1500... Est. remaining: 7m 28sbest_combination: {'lookbacks': [138, 157, 191], 'score': np.float64(0.17954110370190948), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 22sRunning iteration 221/1500... Est. remaining: 7m 16sRunning iteration 231/1500... Est. remaining: 7m 10sRunning iteration 241/1500... Est. remaining: 7m 5sRunning iteration 251/1500... Est. remaining: 7m 0sRunning iteration 261/1500... Est. remaining: 6m 55sRunning iteration 271/1500... Est. remaining: 6m 51sRunning iteration 281/1500... Est. remaining: 6m 46sRunning iteration 291/1500... Est. remaining: 6m 41sRunning iteration 301/1500... Est. remaining: 6m 36sbest_combination: {'lookbacks': [138, 157, 191], 'score': np.float64(0.17954110370190948), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 32sRunning iteration 321/1500... Est. remaining: 6m 28sRunning iteration 331/1500... Est. remaining: 6m 23sRunning iteration 341/1500... Est. remaining: 6m 19sRunning iteration 351/1500... Est. remaining: 6m 15sRunning iteration 361/1500... Est. remaining: 6m 11sRunning iteration 371/1500... Est. remaining: 6m 7sRunning iteration 381/1500... Est. remaining: 6m 3sRunning iteration 391/1500... Est. remaining: 5m 59sRunning iteration 401/1500... Est. remaining: 5m 55sbest_combination: {'lookbacks': [138, 157, 191], 'score': np.float64(0.17954110370190948), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 51sRunning iteration 421/1500... Est. remaining: 5m 47sRunning iteration 431/1500... Est. remaining: 5m 43sRunning iteration 441/1500... Est. remaining: 5m 40sRunning iteration 451/1500... Est. remaining: 5m 36sRunning iteration 461/1500... Est. remaining: 5m 32sRunning iteration 471/1500... Est. remaining: 5m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $864,772,724
Annual Return: 38.82%
Sharpe Ratio: 1.39817
Sortino Ratio: 1.308
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.382
Lookback periods: [50, 77, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 5m 26sRunning iteration 491/1500... Est. remaining: 5m 23sRunning iteration 501/1500... Est. remaining: 5m 19sbest_combination: {'lookbacks': [50, 77, 98], 'score': np.float64(0.381910589852502), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 16sRunning iteration 521/1500... Est. remaining: 5m 12sRunning iteration 531/1500... Est. remaining: 5m 8sRunning iteration 541/1500... Est. remaining: 5m 5sRunning iteration 551/1500... Est. remaining: 5m 1sRunning iteration 561/1500... Est. remaining: 4m 58sRunning iteration 571/1500... Est. remaining: 4m 54sRunning iteration 581/1500... Est. remaining: 4m 51sRunning iteration 591/1500... Est. remaining: 4m 47sRunning iteration 601/1500... Est. remaining: 4m 44sbest_combination: {'lookbacks': [50, 77, 98], 'score': np.float64(0.381910589852502), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 41sRunning iteration 621/1500... Est. remaining: 4m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,276,448,219
Annual Return: 40.39%
Sharpe Ratio: 1.43488
Sortino Ratio: 1.336
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.522
Lookback periods: [50, 84, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 4m 35sRunning iteration 641/1500... Est. remaining: 4m 31sRunning iteration 651/1500... Est. remaining: 4m 28sRunning iteration 661/1500... Est. remaining: 4m 25sRunning iteration 671/1500... Est. remaining: 4m 21sRunning iteration 681/1500... Est. remaining: 4m 18sRunning iteration 691/1500... Est. remaining: 4m 14sRunning iteration 701/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [50, 84, 97], 'score': np.float64(0.5220184319277618), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 8sRunning iteration 721/1500... Est. remaining: 4m 4sRunning iteration 731/1500... Est. remaining: 4m 1sRunning iteration 741/1500... Est. remaining: 3m 58sRunning iteration 751/1500... Est. remaining: 3m 54sRunning iteration 761/1500... Est. remaining: 3m 51sRunning iteration 771/1500... Est. remaining: 3m 48sRunning iteration 781/1500... Est. remaining: 3m 45sRunning iteration 791/1500... Est. remaining: 3m 41sRunning iteration 801/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [50, 84, 97], 'score': np.float64(0.5220184319277618), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 32sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,310,583,323
Annual Return: 40.49%
Sharpe Ratio: 1.43422
Sortino Ratio: 1.341
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 0.548
Lookback periods: [50, 84, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 13sRunning iteration 891/1500... Est. remaining: 3m 10sRunning iteration 901/1500... Est. remaining: 3m 7sbest_combination: {'lookbacks': [50, 84, 98], 'score': np.float64(0.5480539297322755), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 3sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 57sRunning iteration 941/1500... Est. remaining: 2m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,215,143,078
Annual Return: 40.19%
Sharpe Ratio: 1.44318
Sortino Ratio: 1.357
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 0.579
Lookback periods: [50, 78, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 2m 51sRunning iteration 961/1500... Est. remaining: 2m 48sRunning iteration 971/1500... Est. remaining: 2m 45sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(0.5786378273653503), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 29sRunning iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 23sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(0.5786378273653503), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,575,990,285
Annual Return: 41.24%
Sharpe Ratio: 1.47372
Sortino Ratio: 1.380
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 0.679
Lookback periods: [50, 74, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [50, 74, 98], 'score': np.float64(0.679235814298492), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 74, 98], 'score': np.float64(0.679235814298492), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 74, 98], 'score': np.float64(0.679235814298492), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 0.68
best_combination: {'lookbacks': [50, 74, 98], 'score': np.float64(0.679235814298492), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 74, 98] (score: 0.6792)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 74, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 116 selections (27.9%)
2. naz100_hma: 96 selections (23.1%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $1,575,990,285.23
Average Annualized Gain: 41.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Mon Aug 25 14:18:40 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,688,188,324
Annual Return: 43.43%
Sharpe Ratio: 1.42526
Sortino Ratio: 1.386
Max Drawdown: -70.0%
Avg Drawdown: -13.6%
Normalized Score: -0.644
Lookback periods: [127, 177, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,545,247,659
Annual Return: 43.21%
Sharpe Ratio: 1.43641
Sortino Ratio: 1.392
Max Drawdown: -55.0%
Avg Drawdown: -13.1%
Normalized Score: -0.072
Lookback periods: [131, 149, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 13m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,359,973,284
Annual Return: 45.45%
Sharpe Ratio: 1.48006
Sortino Ratio: 1.448
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.234
Lookback periods: [154, 171, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 10m 52sRunning iteration 31/1500... Est. remaining: 9m 38sRunning iteration 41/1500... Est. remaining: 8m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,951,314,187
Annual Return: 46.76%
Sharpe Ratio: 1.53691
Sortino Ratio: 1.496
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 0.429
Lookback periods: [137, 155, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 8m 54sRunning iteration 61/1500... Est. remaining: 8m 36sRunning iteration 71/1500... Est. remaining: 8m 22sRunning iteration 81/1500... Est. remaining: 8m 11sRunning iteration 91/1500... Est. remaining: 8m 0sRunning iteration 101/1500... Est. remaining: 7m 52sbest_combination: {'lookbacks': [137, 155, 155], 'score': np.float64(0.42861072172403347), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 44sRunning iteration 121/1500... Est. remaining: 7m 37sRunning iteration 131/1500... Est. remaining: 7m 31sRunning iteration 141/1500... Est. remaining: 7m 26sRunning iteration 151/1500... Est. remaining: 7m 20sRunning iteration 161/1500... Est. remaining: 7m 15sRunning iteration 171/1500... Est. remaining: 7m 10sRunning iteration 181/1500... Est. remaining: 7m 6sRunning iteration 191/1500... Est. remaining: 7m 1sRunning iteration 201/1500... Est. remaining: 6m 57sbest_combination: {'lookbacks': [137, 155, 155], 'score': np.float64(0.42861072172403347), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 53sRunning iteration 221/1500... Est. remaining: 6m 48sRunning iteration 231/1500... Est. remaining: 6m 44sRunning iteration 241/1500... Est. remaining: 6m 40sRunning iteration 251/1500... Est. remaining: 6m 36sRunning iteration 261/1500... Est. remaining: 6m 32sRunning iteration 271/1500... Est. remaining: 6m 28sRunning iteration 281/1500... Est. remaining: 6m 24sRunning iteration 291/1500... Est. remaining: 6m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,441,721,177
Annual Return: 49.16%
Sharpe Ratio: 1.60285
Sortino Ratio: 1.570
Max Drawdown: -58.5%
Avg Drawdown: -11.4%
Normalized Score: 0.768
Lookback periods: [139, 155, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 301/1500... Est. remaining: 6m 20sbest_combination: {'lookbacks': [139, 155, 174], 'score': np.float64(0.7677528823698991), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 16sRunning iteration 321/1500... Est. remaining: 6m 12sRunning iteration 331/1500... Est. remaining: 6m 8sRunning iteration 341/1500... Est. remaining: 6m 5sRunning iteration 351/1500... Est. remaining: 6m 1sRunning iteration 361/1500... Est. remaining: 5m 58sRunning iteration 371/1500... Est. remaining: 5m 54sRunning iteration 381/1500... Est. remaining: 5m 50sRunning iteration 391/1500... Est. remaining: 5m 47sRunning iteration 401/1500... Est. remaining: 5m 44sbest_combination: {'lookbacks': [139, 155, 174], 'score': np.float64(0.7677528823698991), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 40sRunning iteration 421/1500... Est. remaining: 5m 37sRunning iteration 431/1500... Est. remaining: 5m 33sRunning iteration 441/1500... Est. remaining: 5m 30sRunning iteration 451/1500... Est. remaining: 5m 27sRunning iteration 461/1500... Est. remaining: 5m 24sRunning iteration 471/1500... Est. remaining: 5m 20sRunning iteration 481/1500... Est. remaining: 5m 17sRunning iteration 491/1500... Est. remaining: 5m 14sRunning iteration 501/1500... Est. remaining: 5m 10sbest_combination: {'lookbacks': [139, 155, 174], 'score': np.float64(0.7677528823698991), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 7sRunning iteration 521/1500... Est. remaining: 5m 4sRunning iteration 531/1500... Est. remaining: 5m 1sRunning iteration 541/1500... Est. remaining: 4m 57sRunning iteration 551/1500... Est. remaining: 4m 54sRunning iteration 561/1500... Est. remaining: 4m 51sRunning iteration 571/1500... Est. remaining: 4m 48sRunning iteration 581/1500... Est. remaining: 4m 44sRunning iteration 591/1500... Est. remaining: 4m 41sRunning iteration 601/1500... Est. remaining: 4m 38sbest_combination: {'lookbacks': [139, 155, 174], 'score': np.float64(0.7677528823698991), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 35sRunning iteration 621/1500... Est. remaining: 4m 32sRunning iteration 631/1500... Est. remaining: 4m 28sRunning iteration 641/1500... Est. remaining: 4m 25sRunning iteration 651/1500... Est. remaining: 4m 22sRunning iteration 661/1500... Est. remaining: 4m 19sRunning iteration 671/1500... Est. remaining: 4m 16sRunning iteration 681/1500... Est. remaining: 4m 13sRunning iteration 691/1500... Est. remaining: 4m 9sRunning iteration 701/1500... Est. remaining: 4m 6sbest_combination: {'lookbacks': [139, 155, 174], 'score': np.float64(0.7677528823698991), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 3sRunning iteration 721/1500... Est. remaining: 4m 0sRunning iteration 731/1500... Est. remaining: 3m 57sRunning iteration 741/1500... Est. remaining: 3m 54sRunning iteration 751/1500... Est. remaining: 3m 50sRunning iteration 761/1500... Est. remaining: 3m 47sRunning iteration 771/1500... Est. remaining: 3m 44sRunning iteration 781/1500... Est. remaining: 3m 41sRunning iteration 791/1500... Est. remaining: 3m 38sRunning iteration 801/1500... Est. remaining: 3m 35sbest_combination: {'lookbacks': [139, 155, 174], 'score': np.float64(0.7677528823698991), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 32sRunning iteration 821/1500... Est. remaining: 3m 29sRunning iteration 831/1500... Est. remaining: 3m 25sRunning iteration 841/1500... Est. remaining: 3m 22sRunning iteration 851/1500... Est. remaining: 3m 19sRunning iteration 861/1500... Est. remaining: 3m 16sRunning iteration 871/1500... Est. remaining: 3m 13sRunning iteration 881/1500... Est. remaining: 3m 10sRunning iteration 891/1500... Est. remaining: 3m 7sRunning iteration 901/1500... Est. remaining: 3m 4sbest_combination: {'lookbacks': [139, 155, 174], 'score': np.float64(0.7677528823698991), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 1sRunning iteration 921/1500... Est. remaining: 2m 57sRunning iteration 931/1500... Est. remaining: 2m 54sRunning iteration 941/1500... Est. remaining: 2m 51sRunning iteration 951/1500... Est. remaining: 2m 48sRunning iteration 961/1500... Est. remaining: 2m 45sRunning iteration 971/1500... Est. remaining: 2m 42sRunning iteration 981/1500... Est. remaining: 2m 39sRunning iteration 991/1500... Est. remaining: 2m 36sRunning iteration 1001/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [139, 155, 174], 'score': np.float64(0.7677528823698991), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 30sRunning iteration 1021/1500... Est. remaining: 2m 27sRunning iteration 1031/1500... Est. remaining: 2m 24sRunning iteration 1041/1500... Est. remaining: 2m 21sRunning iteration 1051/1500... Est. remaining: 2m 17sRunning iteration 1061/1500... Est. remaining: 2m 14sRunning iteration 1071/1500... Est. remaining: 2m 11sRunning iteration 1081/1500... Est. remaining: 2m 8sRunning iteration 1091/1500... Est. remaining: 2m 5sRunning iteration 1101/1500... Est. remaining: 2m 2sbest_combination: {'lookbacks': [139, 155, 174], 'score': np.float64(0.7677528823698991), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 59sRunning iteration 1121/1500... Est. remaining: 1m 56sRunning iteration 1131/1500... Est. remaining: 1m 53sRunning iteration 1141/1500... Est. remaining: 1m 50sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 37sRunning iteration 1191/1500... Est. remaining: 1m 34sRunning iteration 1201/1500... Est. remaining: 1m 31sbest_combination: {'lookbacks': [139, 155, 174], 'score': np.float64(0.7677528823698991), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 28sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [139, 155, 174], 'score': np.float64(0.7677528823698991), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 54sRunning iteration 1331/1500... Est. remaining: 0m 51sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [139, 155, 174], 'score': np.float64(0.7677528823698991), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,702,614,220
Annual Return: 48.85%
Sharpe Ratio: 1.60276
Sortino Ratio: 1.567
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 0.854
Lookback periods: [125, 156, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 0.85
best_combination: {'lookbacks': [125, 156, 158], 'score': np.float64(0.8541538295012702), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [125, 156, 158] (score: 0.8542)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [125, 156, 158] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,702,614,220.45
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Mon Aug 25 14:26:24 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,361,379,744
Annual Return: 40.65%
Sharpe Ratio: 1.39160
Sortino Ratio: 1.311
Max Drawdown: -56.9%
Avg Drawdown: -12.7%
Normalized Score: -0.368
Lookback periods: [94, 117, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,835,984,988
Annual Return: 43.66%
Sharpe Ratio: 1.42204
Sortino Ratio: 1.379
Max Drawdown: -59.0%
Avg Drawdown: -12.3%
Normalized Score: 0.032
Lookback periods: [166, 181, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,138,598,116
Annual Return: 44.08%
Sharpe Ratio: 1.45225
Sortino Ratio: 1.401
Max Drawdown: -60.0%
Avg Drawdown: -12.9%
Normalized Score: 0.034
Lookback periods: [127, 132, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 17m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,281,062,742
Annual Return: 45.37%
Sharpe Ratio: 1.48282
Sortino Ratio: 1.444
Max Drawdown: -62.2%
Avg Drawdown: -11.4%
Normalized Score: 0.361
Lookback periods: [145, 158, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 12m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,519,161,011
Annual Return: 43.17%
Sharpe Ratio: 1.47727
Sortino Ratio: 1.398
Max Drawdown: -52.3%
Avg Drawdown: -10.7%
Normalized Score: 0.490
Lookback periods: [84, 125, 133] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,498,959,115
Annual Return: 46.43%
Sharpe Ratio: 1.52421
Sortino Ratio: 1.503
Max Drawdown: -57.3%
Avg Drawdown: -12.2%
Normalized Score: 0.655
Lookback periods: [130, 131, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 11m 49sRunning iteration 41/1500... Est. remaining: 10m 38sRunning iteration 51/1500... Est. remaining: 9m 54sRunning iteration 61/1500... Est. remaining: 9m 27sRunning iteration 71/1500... Est. remaining: 9m 5sRunning iteration 81/1500... Est. remaining: 8m 48sRunning iteration 91/1500... Est. remaining: 8m 33sRunning iteration 101/1500... Est. remaining: 8m 21sbest_combination: {'lookbacks': [130, 131, 153], 'score': np.float64(0.6553986572181283), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 11sRunning iteration 121/1500... Est. remaining: 8m 2sRunning iteration 131/1500... Est. remaining: 7m 53sRunning iteration 141/1500... Est. remaining: 7m 46sRunning iteration 151/1500... Est. remaining: 7m 39sRunning iteration 161/1500... Est. remaining: 7m 33sRunning iteration 171/1500... Est. remaining: 7m 27sRunning iteration 181/1500... Est. remaining: 7m 21sRunning iteration 191/1500... Est. remaining: 7m 16sRunning iteration 201/1500... Est. remaining: 7m 10sbest_combination: {'lookbacks': [130, 131, 153], 'score': np.float64(0.6553986572181283), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 5sRunning iteration 221/1500... Est. remaining: 7m 1sRunning iteration 231/1500... Est. remaining: 6m 56sRunning iteration 241/1500... Est. remaining: 6m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,994,258,474
Annual Return: 48.52%
Sharpe Ratio: 1.59167
Sortino Ratio: 1.555
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 1.150
Lookback periods: [128, 157, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 6m 51sRunning iteration 261/1500... Est. remaining: 6m 46sRunning iteration 271/1500... Est. remaining: 6m 42sRunning iteration 281/1500... Est. remaining: 6m 37sRunning iteration 291/1500... Est. remaining: 6m 33sRunning iteration 301/1500... Est. remaining: 6m 29sbest_combination: {'lookbacks': [128, 157, 173], 'score': np.float64(1.1500687146641968), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 25sRunning iteration 321/1500... Est. remaining: 6m 21sRunning iteration 331/1500... Est. remaining: 6m 17sRunning iteration 341/1500... Est. remaining: 6m 13sRunning iteration 351/1500... Est. remaining: 6m 9sRunning iteration 361/1500... Est. remaining: 6m 5sRunning iteration 371/1500... Est. remaining: 6m 1sRunning iteration 381/1500... Est. remaining: 5m 57sRunning iteration 391/1500... Est. remaining: 5m 54sRunning iteration 401/1500... Est. remaining: 5m 50sbest_combination: {'lookbacks': [128, 157, 173], 'score': np.float64(1.1500687146641968), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 46sRunning iteration 421/1500... Est. remaining: 5m 43sRunning iteration 431/1500... Est. remaining: 5m 39sRunning iteration 441/1500... Est. remaining: 5m 36sRunning iteration 451/1500... Est. remaining: 5m 32sRunning iteration 461/1500... Est. remaining: 5m 29sRunning iteration 471/1500... Est. remaining: 5m 25sRunning iteration 481/1500... Est. remaining: 5m 22sRunning iteration 491/1500... Est. remaining: 5m 19sRunning iteration 501/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [128, 157, 173], 'score': np.float64(1.1500687146641968), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 12sRunning iteration 521/1500... Est. remaining: 5m 9sRunning iteration 531/1500... Est. remaining: 5m 6sRunning iteration 541/1500... Est. remaining: 5m 2sRunning iteration 551/1500... Est. remaining: 4m 59sRunning iteration 561/1500... Est. remaining: 4m 56sRunning iteration 571/1500... Est. remaining: 4m 53sRunning iteration 581/1500... Est. remaining: 4m 49sRunning iteration 591/1500... Est. remaining: 4m 46sRunning iteration 601/1500... Est. remaining: 4m 43sbest_combination: {'lookbacks': [128, 157, 173], 'score': np.float64(1.1500687146641968), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 40sRunning iteration 621/1500... Est. remaining: 4m 37sRunning iteration 631/1500... Est. remaining: 4m 33sRunning iteration 641/1500... Est. remaining: 4m 30sRunning iteration 651/1500... Est. remaining: 4m 27sRunning iteration 661/1500... Est. remaining: 4m 24sRunning iteration 671/1500... Est. remaining: 4m 21sRunning iteration 681/1500... Est. remaining: 4m 17sRunning iteration 691/1500... Est. remaining: 4m 14sRunning iteration 701/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [128, 157, 173], 'score': np.float64(1.1500687146641968), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 8sRunning iteration 721/1500... Est. remaining: 4m 5sRunning iteration 731/1500... Est. remaining: 4m 2sRunning iteration 741/1500... Est. remaining: 3m 58sRunning iteration 751/1500... Est. remaining: 3m 55sRunning iteration 761/1500... Est. remaining: 3m 52sRunning iteration 771/1500... Est. remaining: 3m 49sRunning iteration 781/1500... Est. remaining: 3m 46sRunning iteration 791/1500... Est. remaining: 3m 42sRunning iteration 801/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [128, 157, 173], 'score': np.float64(1.1500687146641968), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 36sRunning iteration 821/1500... Est. remaining: 3m 33sRunning iteration 831/1500... Est. remaining: 3m 29sRunning iteration 841/1500... Est. remaining: 3m 26sRunning iteration 851/1500... Est. remaining: 3m 23sRunning iteration 861/1500... Est. remaining: 3m 20sRunning iteration 871/1500... Est. remaining: 3m 17sRunning iteration 881/1500... Est. remaining: 3m 13sRunning iteration 891/1500... Est. remaining: 3m 10sRunning iteration 901/1500... Est. remaining: 3m 7sbest_combination: {'lookbacks': [128, 157, 173], 'score': np.float64(1.1500687146641968), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 4sRunning iteration 921/1500... Est. remaining: 3m 1sRunning iteration 931/1500... Est. remaining: 2m 58sRunning iteration 941/1500... Est. remaining: 2m 54sRunning iteration 951/1500... Est. remaining: 2m 51sRunning iteration 961/1500... Est. remaining: 2m 48sRunning iteration 971/1500... Est. remaining: 2m 45sRunning iteration 981/1500... Est. remaining: 2m 42sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [128, 157, 173], 'score': np.float64(1.1500687146641968), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 29sRunning iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 23sRunning iteration 1051/1500... Est. remaining: 2m 20sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [128, 157, 173], 'score': np.float64(1.1500687146641968), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 58sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [128, 157, 173], 'score': np.float64(1.1500687146641968), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [128, 157, 173], 'score': np.float64(1.1500687146641968), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,014,039,551
Annual Return: 43.91%
Sharpe Ratio: 1.59069
Sortino Ratio: 1.496
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.692
Lookback periods: [50, 51, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,734,383,559
Annual Return: 44.80%
Sharpe Ratio: 1.61116
Sortino Ratio: 1.516
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.788
Lookback periods: [50, 54, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 54, 98], 'score': np.float64(1.7884900070514242), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.850
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.918
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.92
best_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.9178107404768685), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 50, 98] (score: 1.9178)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 50, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 104 selections (25.0%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 53 selections (12.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,748,142,591.11
Average Annualized Gain: 44.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Mon Aug 25 14:34:14 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,050,930,193
Annual Return: 39.60%
Sharpe Ratio: 1.35667
Sortino Ratio: 1.290
Max Drawdown: -54.8%
Avg Drawdown: -13.0%
Normalized Score: -1.018
Lookback periods: [94, 107, 116] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,173,396,030
Annual Return: 46.92%
Sharpe Ratio: 1.51576
Sortino Ratio: 1.482
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.173
Lookback periods: [175, 183, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 13m 42sRunning iteration 21/1500... Est. remaining: 10m 23sRunning iteration 31/1500... Est. remaining: 9m 15sRunning iteration 41/1500... Est. remaining: 8m 42sRunning iteration 51/1500... Est. remaining: 8m 21sRunning iteration 61/1500... Est. remaining: 8m 6sRunning iteration 71/1500... Est. remaining: 7m 56sRunning iteration 81/1500... Est. remaining: 7m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,752,567,211
Annual Return: 48.87%
Sharpe Ratio: 1.58255
Sortino Ratio: 1.545
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.590
Lookback periods: [155, 159, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 7m 51sRunning iteration 101/1500... Est. remaining: 7m 44sbest_combination: {'lookbacks': [155, 159, 188], 'score': np.float64(0.5895776079316449), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 36sRunning iteration 121/1500... Est. remaining: 7m 30sRunning iteration 131/1500... Est. remaining: 7m 23sRunning iteration 141/1500... Est. remaining: 7m 18sRunning iteration 151/1500... Est. remaining: 7m 13sRunning iteration 161/1500... Est. remaining: 7m 9sRunning iteration 171/1500... Est. remaining: 7m 4sRunning iteration 181/1500... Est. remaining: 7m 0sRunning iteration 191/1500... Est. remaining: 6m 55sRunning iteration 201/1500... Est. remaining: 6m 51sbest_combination: {'lookbacks': [155, 159, 188], 'score': np.float64(0.5895776079316449), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 47sRunning iteration 221/1500... Est. remaining: 6m 44sRunning iteration 231/1500... Est. remaining: 6m 39sRunning iteration 241/1500... Est. remaining: 6m 36sRunning iteration 251/1500... Est. remaining: 6m 32sRunning iteration 261/1500... Est. remaining: 6m 29sRunning iteration 271/1500... Est. remaining: 6m 25sRunning iteration 281/1500... Est. remaining: 6m 21sRunning iteration 291/1500... Est. remaining: 6m 17sRunning iteration 301/1500... Est. remaining: 6m 14sbest_combination: {'lookbacks': [155, 159, 188], 'score': np.float64(0.5895776079316449), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 10sRunning iteration 321/1500... Est. remaining: 6m 7sRunning iteration 331/1500... Est. remaining: 6m 3sRunning iteration 341/1500... Est. remaining: 6m 0sRunning iteration 351/1500... Est. remaining: 5m 57sRunning iteration 361/1500... Est. remaining: 5m 54sRunning iteration 371/1500... Est. remaining: 5m 50sRunning iteration 381/1500... Est. remaining: 5m 47sRunning iteration 391/1500... Est. remaining: 5m 43sRunning iteration 401/1500... Est. remaining: 5m 40sbest_combination: {'lookbacks': [155, 159, 188], 'score': np.float64(0.5895776079316449), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 37sRunning iteration 421/1500... Est. remaining: 5m 34sRunning iteration 431/1500... Est. remaining: 5m 30sRunning iteration 441/1500... Est. remaining: 5m 27sRunning iteration 451/1500... Est. remaining: 5m 24sRunning iteration 461/1500... Est. remaining: 5m 21sRunning iteration 471/1500... Est. remaining: 5m 17sRunning iteration 481/1500... Est. remaining: 5m 14sRunning iteration 491/1500... Est. remaining: 5m 11sRunning iteration 501/1500... Est. remaining: 5m 8sbest_combination: {'lookbacks': [155, 159, 188], 'score': np.float64(0.5895776079316449), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 4sRunning iteration 521/1500... Est. remaining: 5m 1sRunning iteration 531/1500... Est. remaining: 4m 58sRunning iteration 541/1500... Est. remaining: 4m 55sRunning iteration 551/1500... Est. remaining: 4m 52sRunning iteration 561/1500... Est. remaining: 4m 48sRunning iteration 571/1500... Est. remaining: 4m 45sRunning iteration 581/1500... Est. remaining: 4m 42sRunning iteration 591/1500... Est. remaining: 4m 39sRunning iteration 601/1500... Est. remaining: 4m 36sbest_combination: {'lookbacks': [155, 159, 188], 'score': np.float64(0.5895776079316449), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 33sRunning iteration 621/1500... Est. remaining: 4m 29sRunning iteration 631/1500... Est. remaining: 4m 26sRunning iteration 641/1500... Est. remaining: 4m 23sRunning iteration 651/1500... Est. remaining: 4m 20sRunning iteration 661/1500... Est. remaining: 4m 17sRunning iteration 671/1500... Est. remaining: 4m 14sRunning iteration 681/1500... Est. remaining: 4m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,785,742,608
Annual Return: 49.68%
Sharpe Ratio: 1.60840
Sortino Ratio: 1.567
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.738
Lookback periods: [178, 189, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 4m 9sRunning iteration 701/1500... Est. remaining: 4m 6sbest_combination: {'lookbacks': [178, 189, 191], 'score': np.float64(0.7384580859547233), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 2sRunning iteration 721/1500... Est. remaining: 3m 59sRunning iteration 731/1500... Est. remaining: 3m 56sRunning iteration 741/1500... Est. remaining: 3m 53sRunning iteration 751/1500... Est. remaining: 3m 50sRunning iteration 761/1500... Est. remaining: 3m 47sRunning iteration 771/1500... Est. remaining: 3m 44sRunning iteration 781/1500... Est. remaining: 3m 41sRunning iteration 791/1500... Est. remaining: 3m 38sRunning iteration 801/1500... Est. remaining: 3m 34sbest_combination: {'lookbacks': [178, 189, 191], 'score': np.float64(0.7384580859547233), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 31sRunning iteration 821/1500... Est. remaining: 3m 28sRunning iteration 831/1500... Est. remaining: 3m 25sRunning iteration 841/1500... Est. remaining: 3m 22sRunning iteration 851/1500... Est. remaining: 3m 19sRunning iteration 861/1500... Est. remaining: 3m 16sRunning iteration 871/1500... Est. remaining: 3m 13sRunning iteration 881/1500... Est. remaining: 3m 10sRunning iteration 891/1500... Est. remaining: 3m 7sRunning iteration 901/1500... Est. remaining: 3m 4sbest_combination: {'lookbacks': [178, 189, 191], 'score': np.float64(0.7384580859547233), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 0sRunning iteration 921/1500... Est. remaining: 2m 57sRunning iteration 931/1500... Est. remaining: 2m 54sRunning iteration 941/1500... Est. remaining: 2m 51sRunning iteration 951/1500... Est. remaining: 2m 48sRunning iteration 961/1500... Est. remaining: 2m 45sRunning iteration 971/1500... Est. remaining: 2m 42sRunning iteration 981/1500... Est. remaining: 2m 39sRunning iteration 991/1500... Est. remaining: 2m 36sRunning iteration 1001/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [178, 189, 191], 'score': np.float64(0.7384580859547233), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 30sRunning iteration 1021/1500... Est. remaining: 2m 27sRunning iteration 1031/1500... Est. remaining: 2m 24sRunning iteration 1041/1500... Est. remaining: 2m 21sRunning iteration 1051/1500... Est. remaining: 2m 17sRunning iteration 1061/1500... Est. remaining: 2m 14sRunning iteration 1071/1500... Est. remaining: 2m 11sRunning iteration 1081/1500... Est. remaining: 2m 8sRunning iteration 1091/1500... Est. remaining: 2m 5sRunning iteration 1101/1500... Est. remaining: 2m 2sbest_combination: {'lookbacks': [178, 189, 191], 'score': np.float64(0.7384580859547233), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 59sRunning iteration 1121/1500... Est. remaining: 1m 56sRunning iteration 1131/1500... Est. remaining: 1m 53sRunning iteration 1141/1500... Est. remaining: 1m 50sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 31sbest_combination: {'lookbacks': [178, 189, 191], 'score': np.float64(0.7384580859547233), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 28sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [178, 189, 191], 'score': np.float64(0.7384580859547233), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [178, 189, 191], 'score': np.float64(0.7384580859547233), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $13,464,785,095
Annual Return: 50.26%
Sharpe Ratio: 1.62361
Sortino Ratio: 1.592
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.854
Lookback periods: [176, 184, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 0.85
best_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(0.8537217113851187), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [176, 184, 189] (score: 0.8537)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 184, 189] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 122 selections (29.3%)
2. sp500_hma: 102 selections (24.5%)
3. naz100_pine: 84 selections (20.2%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $13,464,785,094.64
Average Annualized Gain: 50.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 14:41:59 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,763,106,663
Annual Return: 41.70%
Sharpe Ratio: 1.39403
Sortino Ratio: 1.335
Max Drawdown: -69.1%
Avg Drawdown: -13.8%
Normalized Score: -0.734
Lookback periods: [106, 140, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,327,982,501
Annual Return: 40.55%
Sharpe Ratio: 1.37436
Sortino Ratio: 1.309
Max Drawdown: -66.0%
Avg Drawdown: -13.1%
Normalized Score: -0.669
Lookback periods: [89, 152, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,864,429,402
Annual Return: 43.70%
Sharpe Ratio: 1.46749
Sortino Ratio: 1.412
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: 0.472
Lookback periods: [97, 108, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 14m 54sRunning iteration 21/1500... Est. remaining: 10m 43sRunning iteration 31/1500... Est. remaining: 9m 30sRunning iteration 41/1500... Est. remaining: 8m 53sRunning iteration 51/1500... Est. remaining: 8m 29sRunning iteration 61/1500... Est. remaining: 8m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,435,183,465
Annual Return: 46.38%
Sharpe Ratio: 1.50330
Sortino Ratio: 1.480
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.473
Lookback periods: [152, 171, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 8m 16sRunning iteration 81/1500... Est. remaining: 8m 5sRunning iteration 91/1500... Est. remaining: 7m 55sRunning iteration 101/1500... Est. remaining: 7m 46sbest_combination: {'lookbacks': [152, 171, 188], 'score': np.float64(0.4728288512284239), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,996,479,205
Annual Return: 46.79%
Sharpe Ratio: 1.53117
Sortino Ratio: 1.490
Max Drawdown: -58.5%
Avg Drawdown: -11.9%
Normalized Score: 0.520
Lookback periods: [153, 159, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 7m 41sRunning iteration 131/1500... Est. remaining: 7m 34sRunning iteration 141/1500... Est. remaining: 7m 28sRunning iteration 151/1500... Est. remaining: 7m 22sRunning iteration 161/1500... Est. remaining: 7m 17sRunning iteration 171/1500... Est. remaining: 7m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,065,359,603
Annual Return: 47.49%
Sharpe Ratio: 1.55715
Sortino Ratio: 1.513
Max Drawdown: -58.5%
Avg Drawdown: -12.2%
Normalized Score: 0.587
Lookback periods: [137, 155, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/1500... Est. remaining: 7m 13sRunning iteration 191/1500... Est. remaining: 7m 8sRunning iteration 201/1500... Est. remaining: 7m 3sbest_combination: {'lookbacks': [137, 155, 183], 'score': np.float64(0.5866856468373609), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 58sRunning iteration 221/1500... Est. remaining: 6m 54sRunning iteration 231/1500... Est. remaining: 6m 49sRunning iteration 241/1500... Est. remaining: 6m 45sRunning iteration 251/1500... Est. remaining: 6m 40sRunning iteration 261/1500... Est. remaining: 6m 37sRunning iteration 271/1500... Est. remaining: 6m 32sRunning iteration 281/1500... Est. remaining: 6m 28sRunning iteration 291/1500... Est. remaining: 6m 24sRunning iteration 301/1500... Est. remaining: 6m 20sbest_combination: {'lookbacks': [137, 155, 183], 'score': np.float64(0.5866856468373609), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 16sRunning iteration 321/1500... Est. remaining: 6m 13sRunning iteration 331/1500... Est. remaining: 6m 9sRunning iteration 341/1500... Est. remaining: 6m 5sRunning iteration 351/1500... Est. remaining: 6m 2sRunning iteration 361/1500... Est. remaining: 5m 58sRunning iteration 371/1500... Est. remaining: 5m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,032,956,449
Annual Return: 43.94%
Sharpe Ratio: 1.51106
Sortino Ratio: 1.434
Max Drawdown: -52.3%
Avg Drawdown: -10.0%
Normalized Score: 0.717
Lookback periods: [50, 99, 105] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 5m 53sRunning iteration 391/1500... Est. remaining: 5m 50sRunning iteration 401/1500... Est. remaining: 5m 46sbest_combination: {'lookbacks': [50, 99, 105], 'score': np.float64(0.7168418724169594), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,975,150,256
Annual Return: 48.51%
Sharpe Ratio: 1.58699
Sortino Ratio: 1.551
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.940
Lookback periods: [139, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 5m 45sRunning iteration 421/1500... Est. remaining: 5m 41sRunning iteration 431/1500... Est. remaining: 5m 38sRunning iteration 441/1500... Est. remaining: 5m 34sRunning iteration 451/1500... Est. remaining: 5m 31sRunning iteration 461/1500... Est. remaining: 5m 27sRunning iteration 471/1500... Est. remaining: 5m 24sRunning iteration 481/1500... Est. remaining: 5m 20sRunning iteration 491/1500... Est. remaining: 5m 17sRunning iteration 501/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [139, 154, 156], 'score': np.float64(0.9397758751256096), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 10sRunning iteration 521/1500... Est. remaining: 5m 7sRunning iteration 531/1500... Est. remaining: 5m 3sRunning iteration 541/1500... Est. remaining: 5m 0sRunning iteration 551/1500... Est. remaining: 4m 57sRunning iteration 561/1500... Est. remaining: 4m 53sRunning iteration 571/1500... Est. remaining: 4m 50sRunning iteration 581/1500... Est. remaining: 4m 47sRunning iteration 591/1500... Est. remaining: 4m 43sRunning iteration 601/1500... Est. remaining: 4m 40sbest_combination: {'lookbacks': [139, 154, 156], 'score': np.float64(0.9397758751256096), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,394,647,572
Annual Return: 40.74%
Sharpe Ratio: 1.47915
Sortino Ratio: 1.372
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.948
Lookback periods: [50, 57, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,124,873,640
Annual Return: 42.47%
Sharpe Ratio: 1.53883
Sortino Ratio: 1.440
Max Drawdown: -37.8%
Avg Drawdown: -9.5%
Normalized Score: 1.139
Lookback periods: [51, 55, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,929,534,714
Annual Return: 43.79%
Sharpe Ratio: 1.57927
Sortino Ratio: 1.479
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.582
Lookback periods: [50, 52, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 4m 37sRunning iteration 631/1500... Est. remaining: 4m 34sRunning iteration 641/1500... Est. remaining: 4m 30sRunning iteration 651/1500... Est. remaining: 4m 27sRunning iteration 661/1500... Est. remaining: 4m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,005,011
Annual Return: 43.90%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.655
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 4m 21sRunning iteration 681/1500... Est. remaining: 4m 18sRunning iteration 691/1500... Est. remaining: 4m 15sRunning iteration 701/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.654696966667018), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.666
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 711/1500... Est. remaining: 4m 9sRunning iteration 721/1500... Est. remaining: 4m 5sRunning iteration 731/1500... Est. remaining: 4m 2sRunning iteration 741/1500... Est. remaining: 3m 59sRunning iteration 751/1500... Est. remaining: 3m 55sRunning iteration 761/1500... Est. remaining: 3m 52sRunning iteration 771/1500... Est. remaining: 3m 49sRunning iteration 781/1500... Est. remaining: 3m 46sRunning iteration 791/1500... Est. remaining: 3m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,589,594,090
Annual Return: 44.64%
Sharpe Ratio: 1.59155
Sortino Ratio: 1.507
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.674
Lookback periods: [52, 52, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 801/1500... Est. remaining: 3m 40sbest_combination: {'lookbacks': [52, 52, 101], 'score': np.float64(1.6742244792925463), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 36sRunning iteration 821/1500... Est. remaining: 3m 33sRunning iteration 831/1500... Est. remaining: 3m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,916,377,953
Annual Return: 45.00%
Sharpe Ratio: 1.61386
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.704
Lookback periods: [50, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 841/1500... Est. remaining: 3m 27sRunning iteration 851/1500... Est. remaining: 3m 24sRunning iteration 861/1500... Est. remaining: 3m 21sRunning iteration 871/1500... Est. remaining: 3m 17sRunning iteration 881/1500... Est. remaining: 3m 14sRunning iteration 891/1500... Est. remaining: 3m 11sRunning iteration 901/1500... Est. remaining: 3m 8sbest_combination: {'lookbacks': [50, 54, 95], 'score': np.float64(1.7043084960030985), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,622,827,200
Annual Return: 44.68%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.739
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 3m 5sRunning iteration 921/1500... Est. remaining: 3m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.831
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 2m 59sRunning iteration 941/1500... Est. remaining: 2m 56sRunning iteration 951/1500... Est. remaining: 2m 52sRunning iteration 961/1500... Est. remaining: 2m 49sRunning iteration 971/1500... Est. remaining: 2m 46sRunning iteration 981/1500... Est. remaining: 2m 43sRunning iteration 991/1500... Est. remaining: 2m 40sRunning iteration 1001/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8307119410612684), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 33sRunning iteration 1021/1500... Est. remaining: 2m 30sRunning iteration 1031/1500... Est. remaining: 2m 27sRunning iteration 1041/1500... Est. remaining: 2m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.968
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1051/1500... Est. remaining: 2m 21sRunning iteration 1061/1500... Est. remaining: 2m 17sRunning iteration 1071/1500... Est. remaining: 2m 14sRunning iteration 1081/1500... Est. remaining: 2m 11sRunning iteration 1091/1500... Est. remaining: 2m 8sRunning iteration 1101/1500... Est. remaining: 2m 5sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9683993196315668), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 2sRunning iteration 1121/1500... Est. remaining: 1m 58sRunning iteration 1131/1500... Est. remaining: 1m 55sRunning iteration 1141/1500... Est. remaining: 1m 52sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 46sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9683993196315668), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9683993196315668), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9683993196315668), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.97
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9683993196315668), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9684)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 14:49:47 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $411,251,620
Annual Return: 35.87%
Sharpe Ratio: 1.23155
Sortino Ratio: 1.139
Max Drawdown: -58.3%
Avg Drawdown: -13.5%
Normalized Score: -1.807
Lookback periods: [52, 129, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $344,860,174
Annual Return: 35.18%
Sharpe Ratio: 1.24277
Sortino Ratio: 1.153
Max Drawdown: -52.3%
Avg Drawdown: -12.5%
Normalized Score: -1.530
Lookback periods: [73, 87, 114] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,756,383,335
Annual Return: 44.83%
Sharpe Ratio: 1.45979
Sortino Ratio: 1.413
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.007
Lookback periods: [168, 187, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 14m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,245,926,300
Annual Return: 45.34%
Sharpe Ratio: 1.49145
Sortino Ratio: 1.457
Max Drawdown: -58.1%
Avg Drawdown: -12.7%
Normalized Score: 0.112
Lookback periods: [142, 150, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,113,568,447
Annual Return: 46.88%
Sharpe Ratio: 1.55277
Sortino Ratio: 1.507
Max Drawdown: -55.0%
Avg Drawdown: -12.1%
Normalized Score: 0.587
Lookback periods: [128, 134, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 12m 42sRunning iteration 31/1500... Est. remaining: 10m 55sRunning iteration 41/1500... Est. remaining: 10m 1sRunning iteration 51/1500... Est. remaining: 9m 24sRunning iteration 61/1500... Est. remaining: 8m 59sRunning iteration 71/1500... Est. remaining: 8m 40sRunning iteration 81/1500... Est. remaining: 8m 26sRunning iteration 91/1500... Est. remaining: 8m 14sRunning iteration 101/1500... Est. remaining: 8m 3sbest_combination: {'lookbacks': [128, 134, 136], 'score': np.float64(0.5871461805669599), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 55sRunning iteration 121/1500... Est. remaining: 7m 47sRunning iteration 131/1500... Est. remaining: 7m 40sRunning iteration 141/1500... Est. remaining: 7m 33sRunning iteration 151/1500... Est. remaining: 7m 27sRunning iteration 161/1500... Est. remaining: 7m 22sRunning iteration 171/1500... Est. remaining: 7m 17sRunning iteration 181/1500... Est. remaining: 7m 12sRunning iteration 191/1500... Est. remaining: 7m 7sRunning iteration 201/1500... Est. remaining: 7m 2sbest_combination: {'lookbacks': [128, 134, 136], 'score': np.float64(0.5871461805669599), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 58sRunning iteration 221/1500... Est. remaining: 6m 53sRunning iteration 231/1500... Est. remaining: 6m 49sRunning iteration 241/1500... Est. remaining: 6m 45sRunning iteration 251/1500... Est. remaining: 6m 41sRunning iteration 261/1500... Est. remaining: 6m 37sRunning iteration 271/1500... Est. remaining: 6m 33sRunning iteration 281/1500... Est. remaining: 6m 29sRunning iteration 291/1500... Est. remaining: 6m 25sRunning iteration 301/1500... Est. remaining: 6m 22sbest_combination: {'lookbacks': [128, 134, 136], 'score': np.float64(0.5871461805669599), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 18sRunning iteration 321/1500... Est. remaining: 6m 14sRunning iteration 331/1500... Est. remaining: 6m 11sRunning iteration 341/1500... Est. remaining: 6m 7sRunning iteration 351/1500... Est. remaining: 6m 3sRunning iteration 361/1500... Est. remaining: 6m 0sRunning iteration 371/1500... Est. remaining: 5m 56sRunning iteration 381/1500... Est. remaining: 5m 53sRunning iteration 391/1500... Est. remaining: 5m 49sRunning iteration 401/1500... Est. remaining: 5m 46sbest_combination: {'lookbacks': [128, 134, 136], 'score': np.float64(0.5871461805669599), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 42sRunning iteration 421/1500... Est. remaining: 5m 39sRunning iteration 431/1500... Est. remaining: 5m 35sRunning iteration 441/1500... Est. remaining: 5m 32sRunning iteration 451/1500... Est. remaining: 5m 28sRunning iteration 461/1500... Est. remaining: 5m 25sRunning iteration 471/1500... Est. remaining: 5m 22sRunning iteration 481/1500... Est. remaining: 5m 18sRunning iteration 491/1500... Est. remaining: 5m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,229,911,921
Annual Return: 48.14%
Sharpe Ratio: 1.57069
Sortino Ratio: 1.527
Max Drawdown: -59.0%
Avg Drawdown: -10.5%
Normalized Score: 0.812
Lookback periods: [156, 158, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [156, 158, 178], 'score': np.float64(0.81224114246742), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 10sRunning iteration 521/1500... Est. remaining: 5m 7sRunning iteration 531/1500... Est. remaining: 5m 4sRunning iteration 541/1500... Est. remaining: 5m 0sRunning iteration 551/1500... Est. remaining: 4m 57sRunning iteration 561/1500... Est. remaining: 4m 54sRunning iteration 571/1500... Est. remaining: 4m 50sRunning iteration 581/1500... Est. remaining: 4m 47sRunning iteration 591/1500... Est. remaining: 4m 44sRunning iteration 601/1500... Est. remaining: 4m 40sbest_combination: {'lookbacks': [156, 158, 178], 'score': np.float64(0.81224114246742), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 37sRunning iteration 621/1500... Est. remaining: 4m 34sRunning iteration 631/1500... Est. remaining: 4m 31sRunning iteration 641/1500... Est. remaining: 4m 28sRunning iteration 651/1500... Est. remaining: 4m 24sRunning iteration 661/1500... Est. remaining: 4m 21sRunning iteration 671/1500... Est. remaining: 4m 18sRunning iteration 681/1500... Est. remaining: 4m 15sRunning iteration 691/1500... Est. remaining: 4m 11sRunning iteration 701/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [156, 158, 178], 'score': np.float64(0.81224114246742), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 5sRunning iteration 721/1500... Est. remaining: 4m 2sRunning iteration 731/1500... Est. remaining: 3m 59sRunning iteration 741/1500... Est. remaining: 3m 55sRunning iteration 751/1500... Est. remaining: 3m 52sRunning iteration 761/1500... Est. remaining: 3m 49sRunning iteration 771/1500... Est. remaining: 3m 46sRunning iteration 781/1500... Est. remaining: 3m 43sRunning iteration 791/1500... Est. remaining: 3m 40sRunning iteration 801/1500... Est. remaining: 3m 36sbest_combination: {'lookbacks': [156, 158, 178], 'score': np.float64(0.81224114246742), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 33sRunning iteration 821/1500... Est. remaining: 3m 30sRunning iteration 831/1500... Est. remaining: 3m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,243,955,312
Annual Return: 48.64%
Sharpe Ratio: 1.58949
Sortino Ratio: 1.559
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 0.885
Lookback periods: [142, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 841/1500... Est. remaining: 3m 24sRunning iteration 851/1500... Est. remaining: 3m 21sRunning iteration 861/1500... Est. remaining: 3m 18sRunning iteration 871/1500... Est. remaining: 3m 15sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 5sbest_combination: {'lookbacks': [142, 155, 172], 'score': np.float64(0.8850987332587351), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 2sRunning iteration 921/1500... Est. remaining: 2m 59sRunning iteration 931/1500... Est. remaining: 2m 56sRunning iteration 941/1500... Est. remaining: 2m 53sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 40sRunning iteration 991/1500... Est. remaining: 2m 37sRunning iteration 1001/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [142, 155, 172], 'score': np.float64(0.8850987332587351), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 31sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 12sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [142, 155, 172], 'score': np.float64(0.8850987332587351), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [142, 155, 172], 'score': np.float64(0.8850987332587351), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [142, 155, 172], 'score': np.float64(0.8850987332587351), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [142, 155, 172], 'score': np.float64(0.8850987332587351), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,011,712,760
Annual Return: 49.39%
Sharpe Ratio: 1.62961
Sortino Ratio: 1.584
Max Drawdown: -56.8%
Avg Drawdown: -10.8%
Normalized Score: 1.156
Lookback periods: [135, 158, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.16
best_combination: {'lookbacks': [135, 158, 178], 'score': np.float64(1.15571619409746), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 158, 178] (score: 1.1557)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 158, 178] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 43 selections (10.3%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,011,712,759.77
Average Annualized Gain: 49.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 14:57:34 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-25T14:57:33.823187
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 2.1198
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,124,547,861
Annual Return: 39.87%
Sharpe Ratio: 1.38535
Sortino Ratio: 1.307
Max Drawdown: -54.6%
Avg Drawdown: -11.9%
Normalized Score: -0.637
Lookback periods: [84, 91, 133] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,066,875,826
Annual Return: 43.98%
Sharpe Ratio: 1.43432
Sortino Ratio: 1.400
Max Drawdown: -68.5%
Avg Drawdown: -12.4%
Normalized Score: -0.507
Lookback periods: [142, 160, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 13m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,760,209,543
Annual Return: 43.54%
Sharpe Ratio: 1.43409
Sortino Ratio: 1.389
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: -0.220
Lookback periods: [169, 169, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 10m 30sRunning iteration 31/1500... Est. remaining: 9m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,724,379,728
Annual Return: 41.61%
Sharpe Ratio: 1.41161
Sortino Ratio: 1.338
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: -0.206
Lookback periods: [95, 104, 109] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 9m 5sRunning iteration 51/1500... Est. remaining: 8m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,322,510,234
Annual Return: 44.31%
Sharpe Ratio: 1.48424
Sortino Ratio: 1.440
Max Drawdown: -58.7%
Avg Drawdown: -12.6%
Normalized Score: -0.108
Lookback periods: [107, 131, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,399,349,075
Annual Return: 46.35%
Sharpe Ratio: 1.53752
Sortino Ratio: 1.495
Max Drawdown: -55.0%
Avg Drawdown: -11.7%
Normalized Score: 0.460
Lookback periods: [128, 139, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 9m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,130,985,507
Annual Return: 49.03%
Sharpe Ratio: 1.59271
Sortino Ratio: 1.562
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.772
Lookback periods: [145, 158, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 8m 57sRunning iteration 81/1500... Est. remaining: 8m 40sRunning iteration 91/1500... Est. remaining: 8m 26sRunning iteration 101/1500... Est. remaining: 8m 14sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 4sRunning iteration 121/1500... Est. remaining: 7m 55sRunning iteration 131/1500... Est. remaining: 7m 47sRunning iteration 141/1500... Est. remaining: 7m 40sRunning iteration 151/1500... Est. remaining: 7m 33sRunning iteration 161/1500... Est. remaining: 7m 27sRunning iteration 171/1500... Est. remaining: 7m 21sRunning iteration 181/1500... Est. remaining: 7m 15sRunning iteration 191/1500... Est. remaining: 7m 10sRunning iteration 201/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 59sRunning iteration 221/1500... Est. remaining: 6m 55sRunning iteration 231/1500... Est. remaining: 6m 50sRunning iteration 241/1500... Est. remaining: 6m 46sRunning iteration 251/1500... Est. remaining: 6m 41sRunning iteration 261/1500... Est. remaining: 6m 37sRunning iteration 271/1500... Est. remaining: 6m 33sRunning iteration 281/1500... Est. remaining: 6m 29sRunning iteration 291/1500... Est. remaining: 6m 25sRunning iteration 301/1500... Est. remaining: 6m 21sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 17sRunning iteration 321/1500... Est. remaining: 6m 13sRunning iteration 331/1500... Est. remaining: 6m 9sRunning iteration 341/1500... Est. remaining: 6m 6sRunning iteration 351/1500... Est. remaining: 6m 2sRunning iteration 361/1500... Est. remaining: 5m 58sRunning iteration 371/1500... Est. remaining: 5m 55sRunning iteration 381/1500... Est. remaining: 5m 51sRunning iteration 391/1500... Est. remaining: 5m 48sRunning iteration 401/1500... Est. remaining: 5m 44sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 41sRunning iteration 421/1500... Est. remaining: 5m 37sRunning iteration 431/1500... Est. remaining: 5m 34sRunning iteration 441/1500... Est. remaining: 5m 31sRunning iteration 451/1500... Est. remaining: 5m 27sRunning iteration 461/1500... Est. remaining: 5m 24sRunning iteration 471/1500... Est. remaining: 5m 20sRunning iteration 481/1500... Est. remaining: 5m 17sRunning iteration 491/1500... Est. remaining: 5m 13sRunning iteration 501/1500... Est. remaining: 5m 10sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 7sRunning iteration 521/1500... Est. remaining: 5m 3sRunning iteration 531/1500... Est. remaining: 5m 0sRunning iteration 541/1500... Est. remaining: 4m 57sRunning iteration 551/1500... Est. remaining: 4m 54sRunning iteration 561/1500... Est. remaining: 4m 50sRunning iteration 571/1500... Est. remaining: 4m 47sRunning iteration 581/1500... Est. remaining: 4m 44sRunning iteration 591/1500... Est. remaining: 4m 41sRunning iteration 601/1500... Est. remaining: 4m 37sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 34sRunning iteration 621/1500... Est. remaining: 4m 31sRunning iteration 631/1500... Est. remaining: 4m 28sRunning iteration 641/1500... Est. remaining: 4m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,613,029,033
Annual Return: 43.32%
Sharpe Ratio: 1.58577
Sortino Ratio: 1.485
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.182
Lookback periods: [50, 57, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 4m 22sRunning iteration 661/1500... Est. remaining: 4m 19sRunning iteration 671/1500... Est. remaining: 4m 16sRunning iteration 681/1500... Est. remaining: 4m 13sRunning iteration 691/1500... Est. remaining: 4m 10sRunning iteration 701/1500... Est. remaining: 4m 6sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 3sRunning iteration 721/1500... Est. remaining: 4m 0sRunning iteration 731/1500... Est. remaining: 3m 57sRunning iteration 741/1500... Est. remaining: 3m 54sRunning iteration 751/1500... Est. remaining: 3m 51sRunning iteration 761/1500... Est. remaining: 3m 47sRunning iteration 771/1500... Est. remaining: 3m 44sRunning iteration 781/1500... Est. remaining: 3m 41sRunning iteration 791/1500... Est. remaining: 3m 38sRunning iteration 801/1500... Est. remaining: 3m 35sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 32sRunning iteration 821/1500... Est. remaining: 3m 29sRunning iteration 831/1500... Est. remaining: 3m 25sRunning iteration 841/1500... Est. remaining: 3m 22sRunning iteration 851/1500... Est. remaining: 3m 19sRunning iteration 861/1500... Est. remaining: 3m 16sRunning iteration 871/1500... Est. remaining: 3m 13sRunning iteration 881/1500... Est. remaining: 3m 10sRunning iteration 891/1500... Est. remaining: 3m 7sRunning iteration 901/1500... Est. remaining: 3m 4sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 0sRunning iteration 921/1500... Est. remaining: 2m 57sRunning iteration 931/1500... Est. remaining: 2m 54sRunning iteration 941/1500... Est. remaining: 2m 51sRunning iteration 951/1500... Est. remaining: 2m 48sRunning iteration 961/1500... Est. remaining: 2m 45sRunning iteration 971/1500... Est. remaining: 2m 42sRunning iteration 981/1500... Est. remaining: 2m 39sRunning iteration 991/1500... Est. remaining: 2m 36sRunning iteration 1001/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 29sRunning iteration 1021/1500... Est. remaining: 2m 26sRunning iteration 1031/1500... Est. remaining: 2m 23sRunning iteration 1041/1500... Est. remaining: 2m 20sRunning iteration 1051/1500... Est. remaining: 2m 17sRunning iteration 1061/1500... Est. remaining: 2m 14sRunning iteration 1071/1500... Est. remaining: 2m 11sRunning iteration 1081/1500... Est. remaining: 2m 8sRunning iteration 1091/1500... Est. remaining: 2m 5sRunning iteration 1101/1500... Est. remaining: 2m 2sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,000,795,877
Annual Return: 43.89%
Sharpe Ratio: 1.59063
Sortino Ratio: 1.492
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.261
Lookback periods: [50, 52, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1121/1500... Est. remaining: 1m 56sRunning iteration 1131/1500... Est. remaining: 1m 53sRunning iteration 1141/1500... Est. remaining: 1m 50sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 43sRunning iteration 1171/1500... Est. remaining: 1m 40sRunning iteration 1181/1500... Est. remaining: 1m 37sRunning iteration 1191/1500... Est. remaining: 1m 34sRunning iteration 1201/1500... Est. remaining: 1m 31sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 28sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.447
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 51sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 1.45
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [52, 52, 98] (score: 2.1198)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 53, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 102 selections (24.5%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 53 selections (12.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,191,381,501.82
Average Annualized Gain: 45.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 15:05:16 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,112,091,495
Annual Return: 42.44%
Sharpe Ratio: 1.39620
Sortino Ratio: 1.353
Max Drawdown: -61.4%
Avg Drawdown: -12.6%
Normalized Score: -0.437
Lookback periods: [141, 173, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,678,173,144
Annual Return: 45.75%
Sharpe Ratio: 1.51302
Sortino Ratio: 1.464
Max Drawdown: -59.7%
Avg Drawdown: -12.3%
Normalized Score: 0.229
Lookback periods: [136, 151, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 14m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,804,683,068
Annual Return: 46.66%
Sharpe Ratio: 1.51552
Sortino Ratio: 1.482
Max Drawdown: -62.5%
Avg Drawdown: -12.1%
Normalized Score: 0.239
Lookback periods: [149, 176, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 11m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,754,618,623
Annual Return: 45.81%
Sharpe Ratio: 1.51366
Sortino Ratio: 1.482
Max Drawdown: -57.9%
Avg Drawdown: -12.1%
Normalized Score: 0.369
Lookback periods: [134, 147, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 10m 10sRunning iteration 41/1500... Est. remaining: 9m 20sRunning iteration 51/1500... Est. remaining: 8m 52sRunning iteration 61/1500... Est. remaining: 8m 32sRunning iteration 71/1500... Est. remaining: 8m 18sRunning iteration 81/1500... Est. remaining: 8m 6sRunning iteration 91/1500... Est. remaining: 7m 56sRunning iteration 101/1500... Est. remaining: 7m 48sbest_combination: {'lookbacks': [134, 147, 168], 'score': np.float64(0.36913526850422523), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 40sRunning iteration 121/1500... Est. remaining: 7m 34sRunning iteration 131/1500... Est. remaining: 7m 28sRunning iteration 141/1500... Est. remaining: 7m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,926,825,999
Annual Return: 47.41%
Sharpe Ratio: 1.56569
Sortino Ratio: 1.518
Max Drawdown: -58.5%
Avg Drawdown: -11.7%
Normalized Score: 0.628
Lookback periods: [128, 150, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 7m 26sRunning iteration 161/1500... Est. remaining: 7m 20sRunning iteration 171/1500... Est. remaining: 7m 15sRunning iteration 181/1500... Est. remaining: 7m 10sRunning iteration 191/1500... Est. remaining: 7m 5sRunning iteration 201/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [128, 150, 156], 'score': np.float64(0.6283382288837651), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 56sRunning iteration 221/1500... Est. remaining: 6m 52sRunning iteration 231/1500... Est. remaining: 6m 48sRunning iteration 241/1500... Est. remaining: 6m 44sRunning iteration 251/1500... Est. remaining: 6m 40sRunning iteration 261/1500... Est. remaining: 6m 36sRunning iteration 271/1500... Est. remaining: 6m 32sRunning iteration 281/1500... Est. remaining: 6m 28sRunning iteration 291/1500... Est. remaining: 6m 24sRunning iteration 301/1500... Est. remaining: 6m 20sbest_combination: {'lookbacks': [128, 150, 156], 'score': np.float64(0.6283382288837651), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 17sRunning iteration 321/1500... Est. remaining: 6m 13sRunning iteration 331/1500... Est. remaining: 6m 9sRunning iteration 341/1500... Est. remaining: 6m 5sRunning iteration 351/1500... Est. remaining: 6m 2sRunning iteration 361/1500... Est. remaining: 5m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,986,307,076
Annual Return: 46.79%
Sharpe Ratio: 1.55210
Sortino Ratio: 1.502
Max Drawdown: -56.8%
Avg Drawdown: -11.2%
Normalized Score: 0.691
Lookback periods: [140, 159, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 371/1500... Est. remaining: 5m 58sRunning iteration 381/1500... Est. remaining: 5m 54sRunning iteration 391/1500... Est. remaining: 5m 51sRunning iteration 401/1500... Est. remaining: 5m 47sbest_combination: {'lookbacks': [140, 159, 167], 'score': np.float64(0.6905321087930937), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 44sRunning iteration 421/1500... Est. remaining: 5m 40sRunning iteration 431/1500... Est. remaining: 5m 37sRunning iteration 441/1500... Est. remaining: 5m 33sRunning iteration 451/1500... Est. remaining: 5m 30sRunning iteration 461/1500... Est. remaining: 5m 27sRunning iteration 471/1500... Est. remaining: 5m 23sRunning iteration 481/1500... Est. remaining: 5m 20sRunning iteration 491/1500... Est. remaining: 5m 16sRunning iteration 501/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [140, 159, 167], 'score': np.float64(0.6905321087930937), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 10sRunning iteration 521/1500... Est. remaining: 5m 6sRunning iteration 531/1500... Est. remaining: 5m 3sRunning iteration 541/1500... Est. remaining: 5m 0sRunning iteration 551/1500... Est. remaining: 4m 56sRunning iteration 561/1500... Est. remaining: 4m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,036,059,246
Annual Return: 48.99%
Sharpe Ratio: 1.61377
Sortino Ratio: 1.571
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 1.035
Lookback periods: [136, 156, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 4m 51sRunning iteration 581/1500... Est. remaining: 4m 48sRunning iteration 591/1500... Est. remaining: 4m 45sRunning iteration 601/1500... Est. remaining: 4m 41sbest_combination: {'lookbacks': [136, 156, 179], 'score': np.float64(1.0354075239845917), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 38sRunning iteration 621/1500... Est. remaining: 4m 35sRunning iteration 631/1500... Est. remaining: 4m 32sRunning iteration 641/1500... Est. remaining: 4m 28sRunning iteration 651/1500... Est. remaining: 4m 25sRunning iteration 661/1500... Est. remaining: 4m 22sRunning iteration 671/1500... Est. remaining: 4m 18sRunning iteration 681/1500... Est. remaining: 4m 15sRunning iteration 691/1500... Est. remaining: 4m 12sRunning iteration 701/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [136, 156, 179], 'score': np.float64(1.0354075239845917), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 6sRunning iteration 721/1500... Est. remaining: 4m 2sRunning iteration 731/1500... Est. remaining: 3m 59sRunning iteration 741/1500... Est. remaining: 3m 56sRunning iteration 751/1500... Est. remaining: 3m 53sRunning iteration 761/1500... Est. remaining: 3m 50sRunning iteration 771/1500... Est. remaining: 3m 46sRunning iteration 781/1500... Est. remaining: 3m 43sRunning iteration 791/1500... Est. remaining: 3m 40sRunning iteration 801/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [136, 156, 179], 'score': np.float64(1.0354075239845917), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 34sRunning iteration 821/1500... Est. remaining: 3m 31sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 24sRunning iteration 851/1500... Est. remaining: 3m 21sRunning iteration 861/1500... Est. remaining: 3m 18sRunning iteration 871/1500... Est. remaining: 3m 15sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 5sbest_combination: {'lookbacks': [136, 156, 179], 'score': np.float64(1.0354075239845917), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 2sRunning iteration 921/1500... Est. remaining: 2m 59sRunning iteration 931/1500... Est. remaining: 2m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,204,840,037
Annual Return: 49.06%
Sharpe Ratio: 1.60847
Sortino Ratio: 1.574
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 1.045
Lookback periods: [128, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 2m 53sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [128, 157, 172], 'score': np.float64(1.0453014639385785), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [128, 157, 172], 'score': np.float64(1.0453014639385785), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [128, 157, 172], 'score': np.float64(1.0453014639385785), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [128, 157, 172], 'score': np.float64(1.0453014639385785), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [128, 157, 172], 'score': np.float64(1.0453014639385785), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 1.05
best_combination: {'lookbacks': [128, 157, 172], 'score': np.float64(1.0453014639385785), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [128, 157, 172] (score: 1.0453)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [128, 157, 172] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 113 selections (27.2%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,204,840,037.48
Average Annualized Gain: 49.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 140m 38s
End time: Mon Aug 25 15:12:54 EDT 2025
Average time per successful run: 9m 22s
==============================================================
✓ All runs completed successfully!
