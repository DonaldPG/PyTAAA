Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Mon Aug 25 12:52:03 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Mon Aug 25 12:52:03 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-25T12:34:50.600826
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.0504
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,530,742,764
Annual Return: 41.12%
Sharpe Ratio: 1.37903
Sortino Ratio: 1.319
Max Drawdown: -58.7%
Avg Drawdown: -13.2%
Normalized Score: -0.584
Lookback periods: [103, 117, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,729,132,402
Annual Return: 41.62%
Sharpe Ratio: 1.44748
Sortino Ratio: 1.364
Max Drawdown: -52.3%
Avg Drawdown: -11.7%
Normalized Score: -0.048
Lookback periods: [87, 92, 109] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,685,602,318
Annual Return: 44.75%
Sharpe Ratio: 1.45435
Sortino Ratio: 1.411
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: -0.025
Lookback periods: [174, 191, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,831,280,425
Annual Return: 45.88%
Sharpe Ratio: 1.49096
Sortino Ratio: 1.446
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.131
Lookback periods: [156, 156, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 9sRunning iteration 31/1500... Est. remaining: 18m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,249,092,747
Annual Return: 46.23%
Sharpe Ratio: 1.51543
Sortino Ratio: 1.482
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.248
Lookback periods: [138, 167, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,632,794,340
Annual Return: 47.82%
Sharpe Ratio: 1.57598
Sortino Ratio: 1.526
Max Drawdown: -57.2%
Avg Drawdown: -12.0%
Normalized Score: 0.446
Lookback periods: [136, 156, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 16m 48sRunning iteration 61/1500... Est. remaining: 15m 57sRunning iteration 71/1500... Est. remaining: 15m 19sRunning iteration 81/1500... Est. remaining: 14m 48sRunning iteration 91/1500... Est. remaining: 14m 23sRunning iteration 101/1500... Est. remaining: 14m 2sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 43sRunning iteration 121/1500... Est. remaining: 13m 26sRunning iteration 131/1500... Est. remaining: 13m 12sRunning iteration 141/1500... Est. remaining: 12m 58sRunning iteration 151/1500... Est. remaining: 12m 46sRunning iteration 161/1500... Est. remaining: 12m 35sRunning iteration 171/1500... Est. remaining: 12m 25sRunning iteration 181/1500... Est. remaining: 12m 15sRunning iteration 191/1500... Est. remaining: 12m 5sRunning iteration 201/1500... Est. remaining: 11m 56sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 48sRunning iteration 221/1500... Est. remaining: 11m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,103,232,432
Annual Return: 39.80%
Sharpe Ratio: 1.43130
Sortino Ratio: 1.326
Max Drawdown: -36.9%
Avg Drawdown: -10.3%
Normalized Score: 0.454
Lookback periods: [50, 55, 79] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 11m 38sRunning iteration 241/1500... Est. remaining: 11m 31sRunning iteration 251/1500... Est. remaining: 11m 23sRunning iteration 261/1500... Est. remaining: 11m 15sRunning iteration 271/1500... Est. remaining: 11m 8sRunning iteration 281/1500... Est. remaining: 11m 0sRunning iteration 291/1500... Est. remaining: 10m 53sRunning iteration 301/1500... Est. remaining: 10m 47sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 40sRunning iteration 321/1500... Est. remaining: 10m 33sRunning iteration 331/1500... Est. remaining: 10m 26sRunning iteration 341/1500... Est. remaining: 10m 20sRunning iteration 351/1500... Est. remaining: 10m 14sRunning iteration 361/1500... Est. remaining: 10m 7sRunning iteration 371/1500... Est. remaining: 10m 1sRunning iteration 381/1500... Est. remaining: 9m 55sRunning iteration 391/1500... Est. remaining: 9m 49sRunning iteration 401/1500... Est. remaining: 9m 43sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,751,860,183
Annual Return: 41.67%
Sharpe Ratio: 1.48722
Sortino Ratio: 1.383
Max Drawdown: -40.7%
Avg Drawdown: -10.4%
Normalized Score: 0.552
Lookback periods: [50, 54, 75] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 34sRunning iteration 431/1500... Est. remaining: 9m 28sRunning iteration 441/1500... Est. remaining: 9m 22sRunning iteration 451/1500... Est. remaining: 9m 16sRunning iteration 461/1500... Est. remaining: 9m 10sRunning iteration 471/1500... Est. remaining: 9m 4sRunning iteration 481/1500... Est. remaining: 8m 58sRunning iteration 491/1500... Est. remaining: 8m 52sRunning iteration 501/1500... Est. remaining: 8m 46sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 40sRunning iteration 521/1500... Est. remaining: 8m 35sRunning iteration 531/1500... Est. remaining: 8m 29sRunning iteration 541/1500... Est. remaining: 8m 24sRunning iteration 551/1500... Est. remaining: 8m 18sRunning iteration 561/1500... Est. remaining: 8m 12sRunning iteration 571/1500... Est. remaining: 8m 6sRunning iteration 581/1500... Est. remaining: 8m 1sRunning iteration 591/1500... Est. remaining: 7m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,733,807,082
Annual Return: 48.40%
Sharpe Ratio: 1.60139
Sortino Ratio: 1.563
Max Drawdown: -57.2%
Avg Drawdown: -11.6%
Normalized Score: 0.604
Lookback periods: [140, 148, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/1500... Est. remaining: 7m 52sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 46sRunning iteration 621/1500... Est. remaining: 7m 41sRunning iteration 631/1500... Est. remaining: 7m 35sRunning iteration 641/1500... Est. remaining: 7m 30sRunning iteration 651/1500... Est. remaining: 7m 25sRunning iteration 661/1500... Est. remaining: 7m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,907,454,513
Annual Return: 48.94%
Sharpe Ratio: 1.59606
Sortino Ratio: 1.568
Max Drawdown: -59.0%
Avg Drawdown: -10.4%
Normalized Score: 0.695
Lookback periods: [158, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 7m 16sRunning iteration 681/1500... Est. remaining: 7m 10sRunning iteration 691/1500... Est. remaining: 7m 5sRunning iteration 701/1500... Est. remaining: 7m 0sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 54sRunning iteration 721/1500... Est. remaining: 6m 49sRunning iteration 731/1500... Est. remaining: 6m 44sRunning iteration 741/1500... Est. remaining: 6m 38sRunning iteration 751/1500... Est. remaining: 6m 33sRunning iteration 761/1500... Est. remaining: 6m 27sRunning iteration 771/1500... Est. remaining: 6m 22sRunning iteration 781/1500... Est. remaining: 6m 16sRunning iteration 791/1500... Est. remaining: 6m 11sRunning iteration 801/1500... Est. remaining: 6m 6sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 0sRunning iteration 821/1500... Est. remaining: 5m 55sRunning iteration 831/1500... Est. remaining: 5m 50sRunning iteration 841/1500... Est. remaining: 5m 44sRunning iteration 851/1500... Est. remaining: 5m 39sRunning iteration 861/1500... Est. remaining: 5m 33sRunning iteration 871/1500... Est. remaining: 5m 28sRunning iteration 881/1500... Est. remaining: 5m 23sRunning iteration 891/1500... Est. remaining: 5m 17sRunning iteration 901/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 7sRunning iteration 921/1500... Est. remaining: 5m 2sRunning iteration 931/1500... Est. remaining: 4m 56sRunning iteration 941/1500... Est. remaining: 4m 51sRunning iteration 951/1500... Est. remaining: 4m 46sRunning iteration 961/1500... Est. remaining: 4m 40sRunning iteration 971/1500... Est. remaining: 4m 35sRunning iteration 981/1500... Est. remaining: 4m 30sRunning iteration 991/1500... Est. remaining: 4m 25sRunning iteration 1001/1500... Est. remaining: 4m 19sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 14sRunning iteration 1021/1500... Est. remaining: 4m 9sRunning iteration 1031/1500... Est. remaining: 4m 3sRunning iteration 1041/1500... Est. remaining: 3m 58sRunning iteration 1051/1500... Est. remaining: 3m 53sRunning iteration 1061/1500... Est. remaining: 3m 48sRunning iteration 1071/1500... Est. remaining: 3m 42sRunning iteration 1081/1500... Est. remaining: 3m 37sRunning iteration 1091/1500... Est. remaining: 3m 32sRunning iteration 1101/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 22sRunning iteration 1121/1500... Est. remaining: 3m 16sRunning iteration 1131/1500... Est. remaining: 3m 11sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 55sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 0.70
best_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [154, 155, 156] (score: 1.0504)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [158, 162, 169] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 78 selections (18.8%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,907,454,512.91
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Mon Aug 25 13:05:03 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $516,306,339
Annual Return: 36.77%
Sharpe Ratio: 1.26094
Sortino Ratio: 1.175
Max Drawdown: -57.2%
Avg Drawdown: -12.4%
Normalized Score: -0.890
Lookback periods: [51, 148, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,804,305,646
Annual Return: 43.61%
Sharpe Ratio: 1.44596
Sortino Ratio: 1.403
Max Drawdown: -67.0%
Avg Drawdown: -12.5%
Normalized Score: -0.538
Lookback periods: [114, 146, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,880,708,572
Annual Return: 41.96%
Sharpe Ratio: 1.44496
Sortino Ratio: 1.357
Max Drawdown: -52.3%
Avg Drawdown: -11.3%
Normalized Score: 0.128
Lookback periods: [84, 124, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,215,143,078
Annual Return: 40.19%
Sharpe Ratio: 1.44318
Sortino Ratio: 1.357
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 1.076
Lookback periods: [50, 78, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 30sRunning iteration 31/1500... Est. remaining: 18m 17sRunning iteration 41/1500... Est. remaining: 16m 42sRunning iteration 51/1500... Est. remaining: 15m 42sRunning iteration 61/1500... Est. remaining: 15m 1sRunning iteration 71/1500... Est. remaining: 14m 30sRunning iteration 81/1500... Est. remaining: 14m 6sRunning iteration 91/1500... Est. remaining: 13m 47sRunning iteration 101/1500... Est. remaining: 13m 31sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 19sRunning iteration 121/1500... Est. remaining: 13m 5sRunning iteration 131/1500... Est. remaining: 12m 54sRunning iteration 141/1500... Est. remaining: 12m 43sRunning iteration 151/1500... Est. remaining: 12m 33sRunning iteration 161/1500... Est. remaining: 12m 23sRunning iteration 171/1500... Est. remaining: 12m 14sRunning iteration 181/1500... Est. remaining: 12m 5sRunning iteration 191/1500... Est. remaining: 11m 57sRunning iteration 201/1500... Est. remaining: 11m 49sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 41sRunning iteration 221/1500... Est. remaining: 11m 34sRunning iteration 231/1500... Est. remaining: 11m 27sRunning iteration 241/1500... Est. remaining: 11m 20sRunning iteration 251/1500... Est. remaining: 11m 13sRunning iteration 261/1500... Est. remaining: 11m 7sRunning iteration 271/1500... Est. remaining: 11m 0sRunning iteration 281/1500... Est. remaining: 10m 56sRunning iteration 291/1500... Est. remaining: 10m 50sRunning iteration 301/1500... Est. remaining: 10m 44sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 37sRunning iteration 321/1500... Est. remaining: 10m 31sRunning iteration 331/1500... Est. remaining: 10m 25sRunning iteration 341/1500... Est. remaining: 10m 19sRunning iteration 351/1500... Est. remaining: 10m 13sRunning iteration 361/1500... Est. remaining: 10m 7sRunning iteration 371/1500... Est. remaining: 10m 1sRunning iteration 381/1500... Est. remaining: 9m 55sRunning iteration 391/1500... Est. remaining: 9m 49sRunning iteration 401/1500... Est. remaining: 9m 43sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 38sRunning iteration 421/1500... Est. remaining: 9m 32sRunning iteration 431/1500... Est. remaining: 9m 26sRunning iteration 441/1500... Est. remaining: 9m 20sRunning iteration 451/1500... Est. remaining: 9m 14sRunning iteration 461/1500... Est. remaining: 9m 9sRunning iteration 471/1500... Est. remaining: 9m 3sRunning iteration 481/1500... Est. remaining: 8m 57sRunning iteration 491/1500... Est. remaining: 8m 52sRunning iteration 501/1500... Est. remaining: 8m 46sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 41sRunning iteration 521/1500... Est. remaining: 8m 35sRunning iteration 531/1500... Est. remaining: 8m 30sRunning iteration 541/1500... Est. remaining: 8m 24sRunning iteration 551/1500... Est. remaining: 8m 19sRunning iteration 561/1500... Est. remaining: 8m 13sRunning iteration 571/1500... Est. remaining: 8m 7sRunning iteration 581/1500... Est. remaining: 8m 2sRunning iteration 591/1500... Est. remaining: 7m 56sRunning iteration 601/1500... Est. remaining: 7m 51sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 45sRunning iteration 621/1500... Est. remaining: 7m 40sRunning iteration 631/1500... Est. remaining: 7m 35sRunning iteration 641/1500... Est. remaining: 7m 29sRunning iteration 651/1500... Est. remaining: 7m 24sRunning iteration 661/1500... Est. remaining: 7m 19sRunning iteration 671/1500... Est. remaining: 7m 14sRunning iteration 681/1500... Est. remaining: 7m 8sRunning iteration 691/1500... Est. remaining: 7m 3sRunning iteration 701/1500... Est. remaining: 6m 57sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 52sRunning iteration 721/1500... Est. remaining: 6m 47sRunning iteration 731/1500... Est. remaining: 6m 41sRunning iteration 741/1500... Est. remaining: 6m 36sRunning iteration 751/1500... Est. remaining: 6m 31sRunning iteration 761/1500... Est. remaining: 6m 25sRunning iteration 771/1500... Est. remaining: 6m 20sRunning iteration 781/1500... Est. remaining: 6m 14sRunning iteration 791/1500... Est. remaining: 6m 9sRunning iteration 801/1500... Est. remaining: 6m 4sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 58sRunning iteration 821/1500... Est. remaining: 5m 53sRunning iteration 831/1500... Est. remaining: 5m 48sRunning iteration 841/1500... Est. remaining: 5m 42sRunning iteration 851/1500... Est. remaining: 5m 37sRunning iteration 861/1500... Est. remaining: 5m 32sRunning iteration 871/1500... Est. remaining: 5m 27sRunning iteration 881/1500... Est. remaining: 5m 21sRunning iteration 891/1500... Est. remaining: 5m 16sRunning iteration 901/1500... Est. remaining: 5m 11sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 6sRunning iteration 921/1500... Est. remaining: 5m 0sRunning iteration 931/1500... Est. remaining: 4m 55sRunning iteration 941/1500... Est. remaining: 4m 50sRunning iteration 951/1500... Est. remaining: 4m 44sRunning iteration 961/1500... Est. remaining: 4m 39sRunning iteration 971/1500... Est. remaining: 4m 34sRunning iteration 981/1500... Est. remaining: 4m 29sRunning iteration 991/1500... Est. remaining: 4m 23sRunning iteration 1001/1500... Est. remaining: 4m 18sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 13sRunning iteration 1021/1500... Est. remaining: 4m 8sRunning iteration 1031/1500... Est. remaining: 4m 3sRunning iteration 1041/1500... Est. remaining: 3m 57sRunning iteration 1051/1500... Est. remaining: 3m 52sRunning iteration 1061/1500... Est. remaining: 3m 47sRunning iteration 1071/1500... Est. remaining: 3m 42sRunning iteration 1081/1500... Est. remaining: 3m 36sRunning iteration 1091/1500... Est. remaining: 3m 31sRunning iteration 1101/1500... Est. remaining: 3m 26sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 21sRunning iteration 1121/1500... Est. remaining: 3m 16sRunning iteration 1131/1500... Est. remaining: 3m 10sRunning iteration 1141/1500... Est. remaining: 3m 5sRunning iteration 1151/1500... Est. remaining: 3m 0sRunning iteration 1161/1500... Est. remaining: 2m 55sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 44sRunning iteration 1191/1500... Est. remaining: 2m 39sRunning iteration 1201/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 13sRunning iteration 1251/1500... Est. remaining: 2m 8sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 1.08
best_combination: {'lookbacks': [50, 78, 98], 'score': np.float64(1.0757352157018198), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 78, 98] (score: 1.0757)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 78, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 119 selections (28.6%)
2. naz100_hma: 95 selections (22.8%)
3. naz100_pi: 77 selections (18.5%)
4. naz100_pine: 72 selections (17.3%)
5. cash: 53 selections (12.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $1,215,143,078.22
Average Annualized Gain: 40.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Mon Aug 25 13:18:00 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,139,784,157
Annual Return: 39.93%
Sharpe Ratio: 1.34792
Sortino Ratio: 1.282
Max Drawdown: -70.5%
Avg Drawdown: -13.7%
Normalized Score: -1.156
Lookback periods: [88, 158, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,864,109,968
Annual Return: 43.70%
Sharpe Ratio: 1.44445
Sortino Ratio: 1.393
Max Drawdown: -67.6%
Avg Drawdown: -13.0%
Normalized Score: -0.590
Lookback periods: [124, 148, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,503,483,395
Annual Return: 41.05%
Sharpe Ratio: 1.39461
Sortino Ratio: 1.327
Max Drawdown: -52.3%
Avg Drawdown: -11.5%
Normalized Score: -0.130
Lookback periods: [86, 108, 112] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 6sRunning iteration 31/1500... Est. remaining: 18m 4sRunning iteration 41/1500... Est. remaining: 16m 22sRunning iteration 51/1500... Est. remaining: 15m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,138,541,680
Annual Return: 47.53%
Sharpe Ratio: 1.55449
Sortino Ratio: 1.511
Max Drawdown: -62.7%
Avg Drawdown: -12.1%
Normalized Score: 0.083
Lookback periods: [136, 156, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 15m 16sRunning iteration 71/1500... Est. remaining: 14m 43sRunning iteration 81/1500... Est. remaining: 14m 18sRunning iteration 91/1500... Est. remaining: 13m 57sRunning iteration 101/1500... Est. remaining: 13m 39sbest_combination: {'lookbacks': [136, 156, 193], 'score': np.float64(0.08263766626457698), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $757,536,449
Annual Return: 38.29%
Sharpe Ratio: 1.36809
Sortino Ratio: 1.284
Max Drawdown: -37.7%
Avg Drawdown: -10.3%
Normalized Score: 0.333
Lookback periods: [51, 75, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 25sRunning iteration 131/1500... Est. remaining: 13m 13sRunning iteration 141/1500... Est. remaining: 13m 0sRunning iteration 151/1500... Est. remaining: 12m 48sRunning iteration 161/1500... Est. remaining: 12m 37sRunning iteration 171/1500... Est. remaining: 12m 27sRunning iteration 181/1500... Est. remaining: 12m 18sRunning iteration 191/1500... Est. remaining: 12m 8sRunning iteration 201/1500... Est. remaining: 11m 59sbest_combination: {'lookbacks': [51, 75, 97], 'score': np.float64(0.3331548400957366), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 51sRunning iteration 221/1500... Est. remaining: 11m 44sRunning iteration 231/1500... Est. remaining: 11m 36sRunning iteration 241/1500... Est. remaining: 11m 28sRunning iteration 251/1500... Est. remaining: 11m 21sRunning iteration 261/1500... Est. remaining: 11m 14sRunning iteration 271/1500... Est. remaining: 11m 7sRunning iteration 281/1500... Est. remaining: 11m 0sRunning iteration 291/1500... Est. remaining: 10m 53sRunning iteration 301/1500... Est. remaining: 10m 46sbest_combination: {'lookbacks': [51, 75, 97], 'score': np.float64(0.3331548400957366), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 40sRunning iteration 321/1500... Est. remaining: 10m 33sRunning iteration 331/1500... Est. remaining: 10m 27sRunning iteration 341/1500... Est. remaining: 10m 21sRunning iteration 351/1500... Est. remaining: 10m 15sRunning iteration 361/1500... Est. remaining: 10m 9sRunning iteration 371/1500... Est. remaining: 10m 3sRunning iteration 381/1500... Est. remaining: 9m 57sRunning iteration 391/1500... Est. remaining: 9m 51sRunning iteration 401/1500... Est. remaining: 9m 45sbest_combination: {'lookbacks': [51, 75, 97], 'score': np.float64(0.3331548400957366), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 39sRunning iteration 421/1500... Est. remaining: 9m 33sRunning iteration 431/1500... Est. remaining: 9m 27sRunning iteration 441/1500... Est. remaining: 9m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $559,158,987
Annual Return: 37.08%
Sharpe Ratio: 1.35400
Sortino Ratio: 1.247
Max Drawdown: -34.7%
Avg Drawdown: -10.1%
Normalized Score: 0.353
Lookback periods: [50, 70, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 18sRunning iteration 461/1500... Est. remaining: 9m 12sRunning iteration 471/1500... Est. remaining: 9m 6sRunning iteration 481/1500... Est. remaining: 9m 1sRunning iteration 491/1500... Est. remaining: 8m 55sRunning iteration 501/1500... Est. remaining: 8m 49sbest_combination: {'lookbacks': [50, 70, 97], 'score': np.float64(0.35310936201489546), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 43sRunning iteration 521/1500... Est. remaining: 8m 38sRunning iteration 531/1500... Est. remaining: 8m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $738,782,516
Annual Return: 38.19%
Sharpe Ratio: 1.35851
Sortino Ratio: 1.265
Max Drawdown: -34.7%
Avg Drawdown: -9.7%
Normalized Score: 0.475
Lookback periods: [50, 65, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 8m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $951,800,598
Annual Return: 39.20%
Sharpe Ratio: 1.40478
Sortino Ratio: 1.316
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 0.649
Lookback periods: [50, 67, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 25sRunning iteration 561/1500... Est. remaining: 8m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,162,096,773
Annual Return: 40.01%
Sharpe Ratio: 1.45504
Sortino Ratio: 1.359
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 0.907
Lookback periods: [50, 61, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,411,997,531
Annual Return: 42.99%
Sharpe Ratio: 1.55260
Sortino Ratio: 1.465
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.272
Lookback periods: [50, 62, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 8m 18sRunning iteration 581/1500... Est. remaining: 8m 12sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 0sbest_combination: {'lookbacks': [50, 62, 96], 'score': np.float64(1.2719253434726787), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 55sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 43sRunning iteration 641/1500... Est. remaining: 7m 38sRunning iteration 651/1500... Est. remaining: 7m 32sRunning iteration 661/1500... Est. remaining: 7m 26sRunning iteration 671/1500... Est. remaining: 7m 21sRunning iteration 681/1500... Est. remaining: 7m 15sRunning iteration 691/1500... Est. remaining: 7m 9sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [50, 62, 96], 'score': np.float64(1.2719253434726787), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 58sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 47sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 36sRunning iteration 761/1500... Est. remaining: 6m 31sRunning iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 20sRunning iteration 791/1500... Est. remaining: 6m 14sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [50, 62, 96], 'score': np.float64(1.2719253434726787), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,357,528,316
Annual Return: 42.89%
Sharpe Ratio: 1.57054
Sortino Ratio: 1.463
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.293
Lookback periods: [50, 57, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 53sRunning iteration 841/1500... Est. remaining: 5m 48sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 37sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [50, 57, 98], 'score': np.float64(1.2926569079097678), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.654
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 5m 11sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 44sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6539381851669934), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6539381851669934), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6539381851669934), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.697
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.696759835200283), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.696759835200283), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.70
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.696759835200283), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 1.6968)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Mon Aug 25 13:31:07 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,340,916,236
Annual Return: 45.43%
Sharpe Ratio: 1.47445
Sortino Ratio: 1.435
Max Drawdown: -60.2%
Avg Drawdown: -11.7%
Normalized Score: -0.002
Lookback periods: [167, 187, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 23m 23sRunning iteration 21/1500... Est. remaining: 17m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,943,397,562
Annual Return: 46.76%
Sharpe Ratio: 1.53373
Sortino Ratio: 1.496
Max Drawdown: -62.4%
Avg Drawdown: -12.2%
Normalized Score: 0.070
Lookback periods: [124, 159, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 16m 43sRunning iteration 41/1500... Est. remaining: 15m 32sRunning iteration 51/1500... Est. remaining: 14m 43sRunning iteration 61/1500... Est. remaining: 14m 8sRunning iteration 71/1500... Est. remaining: 13m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,228,669,382
Annual Return: 47.59%
Sharpe Ratio: 1.53366
Sortino Ratio: 1.500
Max Drawdown: -62.3%
Avg Drawdown: -11.6%
Normalized Score: 0.179
Lookback periods: [183, 192, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 13m 51sRunning iteration 91/1500... Est. remaining: 13m 33sRunning iteration 101/1500... Est. remaining: 13m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,495,426,466
Annual Return: 47.74%
Sharpe Ratio: 1.54701
Sortino Ratio: 1.516
Max Drawdown: -58.5%
Avg Drawdown: -12.0%
Normalized Score: 0.299
Lookback periods: [152, 154, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [152, 154, 169], 'score': np.float64(0.29852267607151334), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 21sRunning iteration 121/1500... Est. remaining: 13m 8sRunning iteration 131/1500... Est. remaining: 12m 56sRunning iteration 141/1500... Est. remaining: 12m 44sRunning iteration 151/1500... Est. remaining: 12m 34sRunning iteration 161/1500... Est. remaining: 12m 24sRunning iteration 171/1500... Est. remaining: 12m 15sRunning iteration 181/1500... Est. remaining: 12m 6sRunning iteration 191/1500... Est. remaining: 11m 58sRunning iteration 201/1500... Est. remaining: 11m 49sbest_combination: {'lookbacks': [152, 154, 169], 'score': np.float64(0.29852267607151334), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $752,961,134
Annual Return: 38.26%
Sharpe Ratio: 1.38163
Sortino Ratio: 1.280
Max Drawdown: -34.7%
Avg Drawdown: -9.9%
Normalized Score: 0.433
Lookback periods: [50, 63, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/1500... Est. remaining: 11m 49sRunning iteration 221/1500... Est. remaining: 11m 42sRunning iteration 231/1500... Est. remaining: 11m 34sRunning iteration 241/1500... Est. remaining: 11m 27sRunning iteration 251/1500... Est. remaining: 11m 20sRunning iteration 261/1500... Est. remaining: 11m 13sRunning iteration 271/1500... Est. remaining: 11m 6sRunning iteration 281/1500... Est. remaining: 10m 59sRunning iteration 291/1500... Est. remaining: 10m 52sRunning iteration 301/1500... Est. remaining: 10m 45sbest_combination: {'lookbacks': [50, 63, 84], 'score': np.float64(0.43255205784646733), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 38sRunning iteration 321/1500... Est. remaining: 10m 32sRunning iteration 331/1500... Est. remaining: 10m 26sRunning iteration 341/1500... Est. remaining: 10m 19sRunning iteration 351/1500... Est. remaining: 10m 13sRunning iteration 361/1500... Est. remaining: 10m 7sRunning iteration 371/1500... Est. remaining: 10m 1sRunning iteration 381/1500... Est. remaining: 9m 55sRunning iteration 391/1500... Est. remaining: 9m 49sRunning iteration 401/1500... Est. remaining: 9m 43sbest_combination: {'lookbacks': [50, 63, 84], 'score': np.float64(0.43255205784646733), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $996,458,031
Annual Return: 39.39%
Sharpe Ratio: 1.41914
Sortino Ratio: 1.321
Max Drawdown: -34.7%
Avg Drawdown: -9.7%
Normalized Score: 0.587
Lookback periods: [50, 63, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 9m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,935,739,260
Annual Return: 48.95%
Sharpe Ratio: 1.60647
Sortino Ratio: 1.561
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.627
Lookback periods: [138, 156, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 38sRunning iteration 431/1500... Est. remaining: 9m 31sRunning iteration 441/1500... Est. remaining: 9m 25sRunning iteration 451/1500... Est. remaining: 9m 19sRunning iteration 461/1500... Est. remaining: 9m 13sRunning iteration 471/1500... Est. remaining: 9m 8sRunning iteration 481/1500... Est. remaining: 9m 2sRunning iteration 491/1500... Est. remaining: 8m 56sRunning iteration 501/1500... Est. remaining: 8m 50sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.6265878097009236), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 44sRunning iteration 521/1500... Est. remaining: 8m 39sRunning iteration 531/1500... Est. remaining: 8m 33sRunning iteration 541/1500... Est. remaining: 8m 27sRunning iteration 551/1500... Est. remaining: 8m 22sRunning iteration 561/1500... Est. remaining: 8m 16sRunning iteration 571/1500... Est. remaining: 8m 11sRunning iteration 581/1500... Est. remaining: 8m 5sRunning iteration 591/1500... Est. remaining: 8m 0sRunning iteration 601/1500... Est. remaining: 7m 54sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.6265878097009236), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 49sRunning iteration 621/1500... Est. remaining: 7m 43sRunning iteration 631/1500... Est. remaining: 7m 38sRunning iteration 641/1500... Est. remaining: 7m 32sRunning iteration 651/1500... Est. remaining: 7m 27sRunning iteration 661/1500... Est. remaining: 7m 21sRunning iteration 671/1500... Est. remaining: 7m 16sRunning iteration 681/1500... Est. remaining: 7m 10sRunning iteration 691/1500... Est. remaining: 7m 5sRunning iteration 701/1500... Est. remaining: 6m 59sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.6265878097009236), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 54sRunning iteration 721/1500... Est. remaining: 6m 48sRunning iteration 731/1500... Est. remaining: 6m 43sRunning iteration 741/1500... Est. remaining: 6m 38sRunning iteration 751/1500... Est. remaining: 6m 32sRunning iteration 761/1500... Est. remaining: 6m 27sRunning iteration 771/1500... Est. remaining: 6m 21sRunning iteration 781/1500... Est. remaining: 6m 16sRunning iteration 791/1500... Est. remaining: 6m 11sRunning iteration 801/1500... Est. remaining: 6m 5sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.6265878097009236), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 0sRunning iteration 821/1500... Est. remaining: 5m 55sRunning iteration 831/1500... Est. remaining: 5m 49sRunning iteration 841/1500... Est. remaining: 5m 44sRunning iteration 851/1500... Est. remaining: 5m 39sRunning iteration 861/1500... Est. remaining: 5m 33sRunning iteration 871/1500... Est. remaining: 5m 28sRunning iteration 881/1500... Est. remaining: 5m 23sRunning iteration 891/1500... Est. remaining: 5m 18sRunning iteration 901/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.6265878097009236), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 7sRunning iteration 921/1500... Est. remaining: 5m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,456,560,666
Annual Return: 44.48%
Sharpe Ratio: 1.58489
Sortino Ratio: 1.492
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.281
Lookback periods: [50, 54, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 4m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,929,534,714
Annual Return: 43.79%
Sharpe Ratio: 1.57927
Sortino Ratio: 1.479
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.285
Lookback periods: [50, 52, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 47sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,833,624,762
Annual Return: 43.65%
Sharpe Ratio: 1.57405
Sortino Ratio: 1.478
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.330
Lookback periods: [50, 50, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.609
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 991/1500... Est. remaining: 4m 27sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6088229803527436), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6088229803527436), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6088229803527436), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6088229803527436), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6088229803527436), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.61
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6088229803527436), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.6088)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Mon Aug 25 13:44:13 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $192,923,134
Annual Return: 32.94%
Sharpe Ratio: 1.15669
Sortino Ratio: 1.057
Max Drawdown: -52.3%
Avg Drawdown: -13.0%
Normalized Score: -1.579
Lookback periods: [75, 83, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,509,173,348
Annual Return: 41.07%
Sharpe Ratio: 1.36518
Sortino Ratio: 1.319
Max Drawdown: -72.9%
Avg Drawdown: -13.4%
Normalized Score: -1.106
Lookback periods: [100, 168, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,674,240,721
Annual Return: 41.49%
Sharpe Ratio: 1.37011
Sortino Ratio: 1.322
Max Drawdown: -68.9%
Avg Drawdown: -13.3%
Normalized Score: -0.931
Lookback periods: [142, 164, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,459,479,512
Annual Return: 40.93%
Sharpe Ratio: 1.38770
Sortino Ratio: 1.317
Max Drawdown: -56.8%
Avg Drawdown: -12.7%
Normalized Score: -0.521
Lookback periods: [80, 160, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 32m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,610,209,315
Annual Return: 43.31%
Sharpe Ratio: 1.44238
Sortino Ratio: 1.397
Max Drawdown: -61.0%
Avg Drawdown: -11.7%
Normalized Score: -0.154
Lookback periods: [140, 168, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,904,982,581
Annual Return: 44.99%
Sharpe Ratio: 1.46092
Sortino Ratio: 1.413
Max Drawdown: -60.2%
Avg Drawdown: -11.7%
Normalized Score: 0.012
Lookback periods: [186, 192, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 25m 26sRunning iteration 31/1500... Est. remaining: 20m 57sRunning iteration 41/1500... Est. remaining: 18m 42sRunning iteration 51/1500... Est. remaining: 17m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,280,508,614
Annual Return: 42.76%
Sharpe Ratio: 1.44438
Sortino Ratio: 1.376
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: 0.134
Lookback periods: [97, 102, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 40sRunning iteration 71/1500... Est. remaining: 15m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,302,834,020
Annual Return: 46.27%
Sharpe Ratio: 1.53019
Sortino Ratio: 1.498
Max Drawdown: -63.5%
Avg Drawdown: -12.1%
Normalized Score: 0.135
Lookback periods: [130, 152, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,299,260,440
Annual Return: 47.00%
Sharpe Ratio: 1.54442
Sortino Ratio: 1.510
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.485
Lookback periods: [143, 171, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 16m 4sRunning iteration 91/1500... Est. remaining: 15m 30sRunning iteration 101/1500... Est. remaining: 15m 3sbest_combination: {'lookbacks': [143, 171, 178], 'score': np.float64(0.4853087112779274), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 39sRunning iteration 121/1500... Est. remaining: 14m 18sRunning iteration 131/1500... Est. remaining: 14m 0sRunning iteration 141/1500... Est. remaining: 13m 43sRunning iteration 151/1500... Est. remaining: 13m 28sRunning iteration 161/1500... Est. remaining: 13m 15sRunning iteration 171/1500... Est. remaining: 13m 2sRunning iteration 181/1500... Est. remaining: 12m 50sRunning iteration 191/1500... Est. remaining: 12m 40sRunning iteration 201/1500... Est. remaining: 12m 29sbest_combination: {'lookbacks': [143, 171, 178], 'score': np.float64(0.4853087112779274), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 19sRunning iteration 221/1500... Est. remaining: 12m 9sRunning iteration 231/1500... Est. remaining: 12m 0sRunning iteration 241/1500... Est. remaining: 11m 51sRunning iteration 251/1500... Est. remaining: 11m 43sRunning iteration 261/1500... Est. remaining: 11m 35sRunning iteration 271/1500... Est. remaining: 11m 27sRunning iteration 281/1500... Est. remaining: 11m 19sRunning iteration 291/1500... Est. remaining: 11m 11sRunning iteration 301/1500... Est. remaining: 11m 4sbest_combination: {'lookbacks': [143, 171, 178], 'score': np.float64(0.4853087112779274), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,825,806,996
Annual Return: 41.84%
Sharpe Ratio: 1.49310
Sortino Ratio: 1.398
Max Drawdown: -35.6%
Avg Drawdown: -9.5%
Normalized Score: 0.864
Lookback periods: [51, 53, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/1500... Est. remaining: 10m 54sRunning iteration 331/1500... Est. remaining: 10m 47sRunning iteration 341/1500... Est. remaining: 10m 40sRunning iteration 351/1500... Est. remaining: 10m 33sRunning iteration 361/1500... Est. remaining: 10m 27sRunning iteration 371/1500... Est. remaining: 10m 20sRunning iteration 381/1500... Est. remaining: 10m 13sRunning iteration 391/1500... Est. remaining: 10m 7sRunning iteration 401/1500... Est. remaining: 10m 0sbest_combination: {'lookbacks': [51, 53, 87], 'score': np.float64(0.8636074038300873), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 54sRunning iteration 421/1500... Est. remaining: 9m 47sRunning iteration 431/1500... Est. remaining: 9m 41sRunning iteration 441/1500... Est. remaining: 9m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,456,816,714
Annual Return: 40.92%
Sharpe Ratio: 1.50243
Sortino Ratio: 1.395
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 0.935
Lookback periods: [50, 50, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 32sRunning iteration 461/1500... Est. remaining: 9m 26sRunning iteration 471/1500... Est. remaining: 9m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,674,526,590
Annual Return: 43.41%
Sharpe Ratio: 1.56783
Sortino Ratio: 1.473
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.334
Lookback periods: [50, 51, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 9m 16sRunning iteration 491/1500... Est. remaining: 9m 10sRunning iteration 501/1500... Est. remaining: 9m 4sbest_combination: {'lookbacks': [50, 51, 102], 'score': np.float64(1.3336011119764053), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 57sRunning iteration 521/1500... Est. remaining: 8m 51sRunning iteration 531/1500... Est. remaining: 8m 45sRunning iteration 541/1500... Est. remaining: 8m 39sRunning iteration 551/1500... Est. remaining: 8m 33sRunning iteration 561/1500... Est. remaining: 8m 27sRunning iteration 571/1500... Est. remaining: 8m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.644
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 8m 17sRunning iteration 591/1500... Est. remaining: 8m 11sRunning iteration 601/1500... Est. remaining: 8m 5sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6443739506994635), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 0sRunning iteration 621/1500... Est. remaining: 7m 54sRunning iteration 631/1500... Est. remaining: 7m 48sRunning iteration 641/1500... Est. remaining: 7m 42sRunning iteration 651/1500... Est. remaining: 7m 36sRunning iteration 661/1500... Est. remaining: 7m 31sRunning iteration 671/1500... Est. remaining: 7m 25sRunning iteration 681/1500... Est. remaining: 7m 19sRunning iteration 691/1500... Est. remaining: 7m 14sRunning iteration 701/1500... Est. remaining: 7m 8sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6443739506994635), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 2sRunning iteration 721/1500... Est. remaining: 6m 57sRunning iteration 731/1500... Est. remaining: 6m 51sRunning iteration 741/1500... Est. remaining: 6m 45sRunning iteration 751/1500... Est. remaining: 6m 40sRunning iteration 761/1500... Est. remaining: 6m 34sRunning iteration 771/1500... Est. remaining: 6m 29sRunning iteration 781/1500... Est. remaining: 6m 23sRunning iteration 791/1500... Est. remaining: 6m 18sRunning iteration 801/1500... Est. remaining: 6m 12sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6443739506994635), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 7sRunning iteration 821/1500... Est. remaining: 6m 1sRunning iteration 831/1500... Est. remaining: 5m 56sRunning iteration 841/1500... Est. remaining: 5m 50sRunning iteration 851/1500... Est. remaining: 5m 45sRunning iteration 861/1500... Est. remaining: 5m 39sRunning iteration 871/1500... Est. remaining: 5m 34sRunning iteration 881/1500... Est. remaining: 5m 28sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6443739506994635), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 7sRunning iteration 921/1500... Est. remaining: 5m 0sRunning iteration 931/1500... Est. remaining: 4m 54sRunning iteration 941/1500... Est. remaining: 4m 47sRunning iteration 951/1500... Est. remaining: 4m 41sRunning iteration 961/1500... Est. remaining: 4m 35sRunning iteration 971/1500... Est. remaining: 4m 28sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6443739506994635), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 4sRunning iteration 1021/1500... Est. remaining: 3m 58sRunning iteration 1031/1500... Est. remaining: 3m 52sRunning iteration 1041/1500... Est. remaining: 3m 47sRunning iteration 1051/1500... Est. remaining: 3m 41sRunning iteration 1061/1500... Est. remaining: 3m 35sRunning iteration 1071/1500... Est. remaining: 3m 29sRunning iteration 1081/1500... Est. remaining: 3m 24sRunning iteration 1091/1500... Est. remaining: 3m 18sRunning iteration 1101/1500... Est. remaining: 3m 13sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6443739506994635), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 7sRunning iteration 1121/1500... Est. remaining: 3m 2sRunning iteration 1131/1500... Est. remaining: 2m 56sRunning iteration 1141/1500... Est. remaining: 2m 51sRunning iteration 1151/1500... Est. remaining: 2m 46sRunning iteration 1161/1500... Est. remaining: 2m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.791
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1171/1500... Est. remaining: 2m 36sRunning iteration 1181/1500... Est. remaining: 2m 30sRunning iteration 1191/1500... Est. remaining: 2m 25sRunning iteration 1201/1500... Est. remaining: 2m 20sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7910316511993476), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 15sRunning iteration 1221/1500... Est. remaining: 2m 10sRunning iteration 1231/1500... Est. remaining: 2m 5sRunning iteration 1241/1500... Est. remaining: 2m 0sRunning iteration 1251/1500... Est. remaining: 1m 55sRunning iteration 1261/1500... Est. remaining: 1m 50sRunning iteration 1271/1500... Est. remaining: 1m 45sRunning iteration 1281/1500... Est. remaining: 1m 40sRunning iteration 1291/1500... Est. remaining: 1m 35sRunning iteration 1301/1500... Est. remaining: 1m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7910316511993476), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 26sRunning iteration 1321/1500... Est. remaining: 1m 21sRunning iteration 1331/1500... Est. remaining: 1m 16sRunning iteration 1341/1500... Est. remaining: 1m 12sRunning iteration 1351/1500... Est. remaining: 1m 7sRunning iteration 1361/1500... Est. remaining: 1m 2sRunning iteration 1371/1500... Est. remaining: 0m 58sRunning iteration 1381/1500... Est. remaining: 0m 53sRunning iteration 1391/1500... Est. remaining: 0m 48sRunning iteration 1401/1500... Est. remaining: 0m 44sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7910316511993476), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 39sRunning iteration 1421/1500... Est. remaining: 0m 35sRunning iteration 1431/1500... Est. remaining: 0m 30sRunning iteration 1441/1500... Est. remaining: 0m 26sRunning iteration 1451/1500... Est. remaining: 0m 21sRunning iteration 1461/1500... Est. remaining: 0m 17sRunning iteration 1471/1500... Est. remaining: 0m 13sRunning iteration 1481/1500... Est. remaining: 0m 8sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 10.8 minutes
Best normalized score: 1.79
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7910316511993476), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.7910)

Monte Carlo simulation completed in 10.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Mon Aug 25 13:55:10 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $257,232,550
Annual Return: 34.04%
Sharpe Ratio: 1.18723
Sortino Ratio: 1.097
Max Drawdown: -52.3%
Avg Drawdown: -12.9%
Normalized Score: -1.580
Lookback periods: [75, 87, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,107,146,955
Annual Return: 42.43%
Sharpe Ratio: 1.38876
Sortino Ratio: 1.356
Max Drawdown: -62.5%
Avg Drawdown: -12.1%
Normalized Score: -0.449
Lookback periods: [165, 171, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,736,694,709
Annual Return: 43.51%
Sharpe Ratio: 1.42296
Sortino Ratio: 1.381
Max Drawdown: -59.0%
Avg Drawdown: -12.2%
Normalized Score: -0.136
Lookback periods: [166, 180, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 19m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,025,153,038
Annual Return: 46.05%
Sharpe Ratio: 1.50710
Sortino Ratio: 1.469
Max Drawdown: -62.8%
Avg Drawdown: -12.3%
Normalized Score: 0.187
Lookback periods: [135, 155, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 13m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,004,547,343
Annual Return: 46.80%
Sharpe Ratio: 1.52085
Sortino Ratio: 1.477
Max Drawdown: -59.0%
Avg Drawdown: -12.6%
Normalized Score: 0.410
Lookback periods: [181, 184, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 11m 54sRunning iteration 41/1500... Est. remaining: 10m 33sRunning iteration 51/1500... Est. remaining: 9m 44sRunning iteration 61/1500... Est. remaining: 9m 19sRunning iteration 71/1500... Est. remaining: 8m 59sRunning iteration 81/1500... Est. remaining: 8m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,285,708,140
Annual Return: 46.99%
Sharpe Ratio: 1.52489
Sortino Ratio: 1.492
Max Drawdown: -60.0%
Avg Drawdown: -11.6%
Normalized Score: 0.517
Lookback periods: [154, 186, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 8m 41sRunning iteration 101/1500... Est. remaining: 8m 29sbest_combination: {'lookbacks': [154, 186, 189], 'score': np.float64(0.5169492616053221), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 18sRunning iteration 121/1500... Est. remaining: 8m 8sRunning iteration 131/1500... Est. remaining: 7m 59sRunning iteration 141/1500... Est. remaining: 7m 53sRunning iteration 151/1500... Est. remaining: 7m 45sRunning iteration 161/1500... Est. remaining: 7m 38sRunning iteration 171/1500... Est. remaining: 7m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,204,840,037
Annual Return: 49.06%
Sharpe Ratio: 1.60847
Sortino Ratio: 1.574
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 1.116
Lookback periods: [128, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/1500... Est. remaining: 7m 32sRunning iteration 191/1500... Est. remaining: 7m 26sRunning iteration 201/1500... Est. remaining: 7m 20sbest_combination: {'lookbacks': [128, 157, 172], 'score': np.float64(1.1157435274861047), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 15sRunning iteration 221/1500... Est. remaining: 7m 9sRunning iteration 231/1500... Est. remaining: 7m 4sRunning iteration 241/1500... Est. remaining: 7m 0sRunning iteration 251/1500... Est. remaining: 6m 55sRunning iteration 261/1500... Est. remaining: 6m 50sRunning iteration 271/1500... Est. remaining: 6m 46sRunning iteration 281/1500... Est. remaining: 6m 42sRunning iteration 291/1500... Est. remaining: 6m 38sRunning iteration 301/1500... Est. remaining: 6m 33sbest_combination: {'lookbacks': [128, 157, 172], 'score': np.float64(1.1157435274861047), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 29sRunning iteration 321/1500... Est. remaining: 6m 25sRunning iteration 331/1500... Est. remaining: 6m 21sRunning iteration 341/1500... Est. remaining: 6m 17sRunning iteration 351/1500... Est. remaining: 6m 13sRunning iteration 361/1500... Est. remaining: 6m 9sRunning iteration 371/1500... Est. remaining: 6m 5sRunning iteration 381/1500... Est. remaining: 6m 1sRunning iteration 391/1500... Est. remaining: 5m 57sRunning iteration 401/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [128, 157, 172], 'score': np.float64(1.1157435274861047), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 50sRunning iteration 421/1500... Est. remaining: 5m 47sRunning iteration 431/1500... Est. remaining: 5m 43sRunning iteration 441/1500... Est. remaining: 5m 39sRunning iteration 451/1500... Est. remaining: 5m 36sRunning iteration 461/1500... Est. remaining: 5m 32sRunning iteration 471/1500... Est. remaining: 5m 29sRunning iteration 481/1500... Est. remaining: 5m 25sRunning iteration 491/1500... Est. remaining: 5m 22sRunning iteration 501/1500... Est. remaining: 5m 18sbest_combination: {'lookbacks': [128, 157, 172], 'score': np.float64(1.1157435274861047), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 15sRunning iteration 521/1500... Est. remaining: 5m 12sRunning iteration 531/1500... Est. remaining: 5m 8sRunning iteration 541/1500... Est. remaining: 5m 5sRunning iteration 551/1500... Est. remaining: 5m 1sRunning iteration 561/1500... Est. remaining: 4m 58sRunning iteration 571/1500... Est. remaining: 4m 55sRunning iteration 581/1500... Est. remaining: 4m 51sRunning iteration 591/1500... Est. remaining: 4m 48sRunning iteration 601/1500... Est. remaining: 4m 45sbest_combination: {'lookbacks': [128, 157, 172], 'score': np.float64(1.1157435274861047), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 41sRunning iteration 621/1500... Est. remaining: 4m 38sRunning iteration 631/1500... Est. remaining: 4m 35sRunning iteration 641/1500... Est. remaining: 4m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,470,974,373
Annual Return: 43.09%
Sharpe Ratio: 1.54959
Sortino Ratio: 1.450
Max Drawdown: -37.8%
Avg Drawdown: -9.5%
Normalized Score: 1.204
Lookback periods: [51, 54, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,005,011
Annual Return: 43.90%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.669
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 4m 30sRunning iteration 661/1500... Est. remaining: 4m 27sRunning iteration 671/1500... Est. remaining: 4m 23sRunning iteration 681/1500... Est. remaining: 4m 20sRunning iteration 691/1500... Est. remaining: 4m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.671
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/1500... Est. remaining: 4m 14sbest_combination: {'lookbacks': [50, 50, 96], 'score': np.float64(1.67129136148388), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,622,827,200
Annual Return: 44.68%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.795
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 4m 8sRunning iteration 731/1500... Est. remaining: 4m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.833
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 4m 2sRunning iteration 751/1500... Est. remaining: 3m 59sRunning iteration 761/1500... Est. remaining: 3m 56sRunning iteration 771/1500... Est. remaining: 3m 52sRunning iteration 781/1500... Est. remaining: 3m 49sRunning iteration 791/1500... Est. remaining: 3m 46sRunning iteration 801/1500... Est. remaining: 3m 42sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.8329104854615146), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 39sRunning iteration 821/1500... Est. remaining: 3m 36sRunning iteration 831/1500... Est. remaining: 3m 32sRunning iteration 841/1500... Est. remaining: 3m 29sRunning iteration 851/1500... Est. remaining: 3m 26sRunning iteration 861/1500... Est. remaining: 3m 22sRunning iteration 871/1500... Est. remaining: 3m 19sRunning iteration 881/1500... Est. remaining: 3m 16sRunning iteration 891/1500... Est. remaining: 3m 13sRunning iteration 901/1500... Est. remaining: 3m 9sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.8329104854615146), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 6sRunning iteration 921/1500... Est. remaining: 3m 3sRunning iteration 931/1500... Est. remaining: 3m 0sRunning iteration 941/1500... Est. remaining: 2m 56sRunning iteration 951/1500... Est. remaining: 2m 53sRunning iteration 961/1500... Est. remaining: 2m 50sRunning iteration 971/1500... Est. remaining: 2m 47sRunning iteration 981/1500... Est. remaining: 2m 43sRunning iteration 991/1500... Est. remaining: 2m 40sRunning iteration 1001/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.8329104854615146), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 34sRunning iteration 1021/1500... Est. remaining: 2m 31sRunning iteration 1031/1500... Est. remaining: 2m 27sRunning iteration 1041/1500... Est. remaining: 2m 24sRunning iteration 1051/1500... Est. remaining: 2m 21sRunning iteration 1061/1500... Est. remaining: 2m 18sRunning iteration 1071/1500... Est. remaining: 2m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.071
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1081/1500... Est. remaining: 2m 12sRunning iteration 1091/1500... Est. remaining: 2m 8sRunning iteration 1101/1500... Est. remaining: 2m 5sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0710113025488055), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 2sRunning iteration 1121/1500... Est. remaining: 1m 59sRunning iteration 1131/1500... Est. remaining: 1m 56sRunning iteration 1141/1500... Est. remaining: 1m 53sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 46sRunning iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 40sRunning iteration 1191/1500... Est. remaining: 1m 37sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0710113025488055), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 18sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0710113025488055), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0710113025488055), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 2.07
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0710113025488055), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.0710)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Mon Aug 25 14:03:01 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $166,685,311
Annual Return: 32.38%
Sharpe Ratio: 1.10508
Sortino Ratio: 1.023
Max Drawdown: -63.4%
Avg Drawdown: -16.2%
Normalized Score: -2.433
Lookback periods: [71, 124, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $346,790,477
Annual Return: 35.21%
Sharpe Ratio: 1.20485
Sortino Ratio: 1.126
Max Drawdown: -63.9%
Avg Drawdown: -13.7%
Normalized Score: -1.650
Lookback periods: [51, 151, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $305,661,753
Annual Return: 34.71%
Sharpe Ratio: 1.19962
Sortino Ratio: 1.106
Max Drawdown: -63.3%
Avg Drawdown: -12.4%
Normalized Score: -1.498
Lookback periods: [52, 60, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $293,946,320
Annual Return: 34.56%
Sharpe Ratio: 1.21635
Sortino Ratio: 1.119
Max Drawdown: -52.3%
Avg Drawdown: -11.4%
Normalized Score: -0.999
Lookback periods: [52, 81, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,130,639,830
Annual Return: 39.90%
Sharpe Ratio: 1.33538
Sortino Ratio: 1.279
Max Drawdown: -63.9%
Avg Drawdown: -13.0%
Normalized Score: -0.900
Lookback periods: [112, 126, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,782,667,384
Annual Return: 43.58%
Sharpe Ratio: 1.45235
Sortino Ratio: 1.412
Max Drawdown: -67.9%
Avg Drawdown: -12.0%
Normalized Score: -0.333
Lookback periods: [107, 168, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 22m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,100,657,520
Annual Return: 45.19%
Sharpe Ratio: 1.46685
Sortino Ratio: 1.430
Max Drawdown: -65.4%
Avg Drawdown: -12.7%
Normalized Score: -0.236
Lookback periods: [148, 184, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,254,754,900
Annual Return: 40.32%
Sharpe Ratio: 1.37600
Sortino Ratio: 1.302
Max Drawdown: -52.3%
Avg Drawdown: -10.8%
Normalized Score: -0.137
Lookback periods: [81, 111, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 15m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,458,870,895
Annual Return: 45.54%
Sharpe Ratio: 1.49090
Sortino Ratio: 1.450
Max Drawdown: -60.6%
Avg Drawdown: -11.8%
Normalized Score: 0.120
Lookback periods: [156, 193, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 13m 26sRunning iteration 41/1500... Est. remaining: 11m 53sRunning iteration 51/1500... Est. remaining: 10m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,113,868,416
Annual Return: 42.44%
Sharpe Ratio: 1.45323
Sortino Ratio: 1.378
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: 0.171
Lookback periods: [83, 134, 135] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 10m 32sRunning iteration 71/1500... Est. remaining: 10m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,251,650,851
Annual Return: 46.97%
Sharpe Ratio: 1.53078
Sortino Ratio: 1.500
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.376
Lookback periods: [147, 189, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 9m 49sRunning iteration 91/1500... Est. remaining: 9m 30sRunning iteration 101/1500... Est. remaining: 9m 12sbest_combination: {'lookbacks': [147, 189, 196], 'score': np.float64(0.3759024649101024), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 57sRunning iteration 121/1500... Est. remaining: 8m 44sRunning iteration 131/1500... Est. remaining: 8m 32sRunning iteration 141/1500... Est. remaining: 8m 21sRunning iteration 151/1500... Est. remaining: 8m 12sRunning iteration 161/1500... Est. remaining: 8m 3sRunning iteration 171/1500... Est. remaining: 7m 57sRunning iteration 181/1500... Est. remaining: 7m 49sRunning iteration 191/1500... Est. remaining: 7m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,093,985,524
Annual Return: 42.40%
Sharpe Ratio: 1.46806
Sortino Ratio: 1.375
Max Drawdown: -52.3%
Avg Drawdown: -9.1%
Normalized Score: 0.456
Lookback periods: [50, 102, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 7m 40sbest_combination: {'lookbacks': [50, 102, 145], 'score': np.float64(0.45561704210333165), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 33sRunning iteration 221/1500... Est. remaining: 7m 27sRunning iteration 231/1500... Est. remaining: 7m 22sRunning iteration 241/1500... Est. remaining: 7m 16sRunning iteration 251/1500... Est. remaining: 7m 11sRunning iteration 261/1500... Est. remaining: 7m 5sRunning iteration 271/1500... Est. remaining: 7m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,222,939,309
Annual Return: 40.21%
Sharpe Ratio: 1.45261
Sortino Ratio: 1.344
Max Drawdown: -38.3%
Avg Drawdown: -10.0%
Normalized Score: 0.546
Lookback periods: [50, 52, 76] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/1500... Est. remaining: 6m 59sRunning iteration 291/1500... Est. remaining: 6m 54sRunning iteration 301/1500... Est. remaining: 6m 49sbest_combination: {'lookbacks': [50, 52, 76], 'score': np.float64(0.5456865371004687), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 45sRunning iteration 321/1500... Est. remaining: 6m 40sRunning iteration 331/1500... Est. remaining: 6m 35sRunning iteration 341/1500... Est. remaining: 6m 31sRunning iteration 351/1500... Est. remaining: 6m 26sRunning iteration 361/1500... Est. remaining: 6m 22sRunning iteration 371/1500... Est. remaining: 6m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,880,619,945
Annual Return: 41.96%
Sharpe Ratio: 1.50274
Sortino Ratio: 1.397
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 0.953
Lookback periods: [50, 51, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 6m 16sRunning iteration 391/1500... Est. remaining: 6m 12sRunning iteration 401/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [50, 51, 82], 'score': np.float64(0.9534833869179853), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,606,599,028
Annual Return: 43.31%
Sharpe Ratio: 1.54845
Sortino Ratio: 1.453
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.214
Lookback periods: [50, 54, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 6m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,044,945,767
Annual Return: 43.95%
Sharpe Ratio: 1.57562
Sortino Ratio: 1.473
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.265
Lookback periods: [50, 52, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 6m 4sRunning iteration 431/1500... Est. remaining: 6m 0sRunning iteration 441/1500... Est. remaining: 5m 55sRunning iteration 451/1500... Est. remaining: 5m 51sRunning iteration 461/1500... Est. remaining: 5m 47sRunning iteration 471/1500... Est. remaining: 5m 43sRunning iteration 481/1500... Est. remaining: 5m 39sRunning iteration 491/1500... Est. remaining: 5m 36sRunning iteration 501/1500... Est. remaining: 5m 32sbest_combination: {'lookbacks': [50, 52, 83], 'score': np.float64(1.264907671055663), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 28sRunning iteration 521/1500... Est. remaining: 5m 24sRunning iteration 531/1500... Est. remaining: 5m 20sRunning iteration 541/1500... Est. remaining: 5m 16sRunning iteration 551/1500... Est. remaining: 5m 13sRunning iteration 561/1500... Est. remaining: 5m 9sRunning iteration 571/1500... Est. remaining: 5m 6sRunning iteration 581/1500... Est. remaining: 5m 2sRunning iteration 591/1500... Est. remaining: 4m 58sRunning iteration 601/1500... Est. remaining: 4m 55sbest_combination: {'lookbacks': [50, 52, 83], 'score': np.float64(1.264907671055663), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 51sRunning iteration 621/1500... Est. remaining: 4m 47sRunning iteration 631/1500... Est. remaining: 4m 44sRunning iteration 641/1500... Est. remaining: 4m 40sRunning iteration 651/1500... Est. remaining: 4m 37sRunning iteration 661/1500... Est. remaining: 4m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,315,947,560
Annual Return: 44.31%
Sharpe Ratio: 1.57346
Sortino Ratio: 1.481
Max Drawdown: -35.6%
Avg Drawdown: -9.2%
Normalized Score: 1.310
Lookback periods: [50, 53, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 4m 30sRunning iteration 681/1500... Est. remaining: 4m 27sRunning iteration 691/1500... Est. remaining: 4m 23sRunning iteration 701/1500... Est. remaining: 4m 20sbest_combination: {'lookbacks': [50, 53, 83], 'score': np.float64(1.3096976337677968), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 16sRunning iteration 721/1500... Est. remaining: 4m 13sRunning iteration 731/1500... Est. remaining: 4m 9sRunning iteration 741/1500... Est. remaining: 4m 6sRunning iteration 751/1500... Est. remaining: 4m 2sRunning iteration 761/1500... Est. remaining: 3m 59sRunning iteration 771/1500... Est. remaining: 3m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,229,417,452
Annual Return: 44.20%
Sharpe Ratio: 1.57610
Sortino Ratio: 1.489
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.351
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 781/1500... Est. remaining: 3m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,206,322,414
Annual Return: 44.17%
Sharpe Ratio: 1.58573
Sortino Ratio: 1.493
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.398
Lookback periods: [50, 54, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,576,078,638
Annual Return: 45.65%
Sharpe Ratio: 1.62275
Sortino Ratio: 1.552
Max Drawdown: -37.4%
Avg Drawdown: -9.2%
Normalized Score: 1.504
Lookback periods: [52, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 3m 50sRunning iteration 801/1500... Est. remaining: 3m 47sbest_combination: {'lookbacks': [52, 53, 95], 'score': np.float64(1.504268860323431), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 44sRunning iteration 821/1500... Est. remaining: 3m 40sRunning iteration 831/1500... Est. remaining: 3m 37sRunning iteration 841/1500... Est. remaining: 3m 33sRunning iteration 851/1500... Est. remaining: 3m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.837
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 3m 27sRunning iteration 871/1500... Est. remaining: 3m 24sRunning iteration 881/1500... Est. remaining: 3m 20sRunning iteration 891/1500... Est. remaining: 3m 17sRunning iteration 901/1500... Est. remaining: 3m 13sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8370336430289942), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 10sRunning iteration 921/1500... Est. remaining: 3m 7sRunning iteration 931/1500... Est. remaining: 3m 3sRunning iteration 941/1500... Est. remaining: 3m 0sRunning iteration 951/1500... Est. remaining: 2m 57sRunning iteration 961/1500... Est. remaining: 2m 53sRunning iteration 971/1500... Est. remaining: 2m 50sRunning iteration 981/1500... Est. remaining: 2m 47sRunning iteration 991/1500... Est. remaining: 2m 43sRunning iteration 1001/1500... Est. remaining: 2m 40sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8370336430289942), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 37sRunning iteration 1021/1500... Est. remaining: 2m 33sRunning iteration 1031/1500... Est. remaining: 2m 30sRunning iteration 1041/1500... Est. remaining: 2m 27sRunning iteration 1051/1500... Est. remaining: 2m 24sRunning iteration 1061/1500... Est. remaining: 2m 20sRunning iteration 1071/1500... Est. remaining: 2m 17sRunning iteration 1081/1500... Est. remaining: 2m 14sRunning iteration 1091/1500... Est. remaining: 2m 10sRunning iteration 1101/1500... Est. remaining: 2m 7sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8370336430289942), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 4sRunning iteration 1121/1500... Est. remaining: 2m 1sRunning iteration 1131/1500... Est. remaining: 1m 57sRunning iteration 1141/1500... Est. remaining: 1m 54sRunning iteration 1151/1500... Est. remaining: 1m 51sRunning iteration 1161/1500... Est. remaining: 1m 48sRunning iteration 1171/1500... Est. remaining: 1m 44sRunning iteration 1181/1500... Est. remaining: 1m 41sRunning iteration 1191/1500... Est. remaining: 1m 38sRunning iteration 1201/1500... Est. remaining: 1m 35sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8370336430289942), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 32sRunning iteration 1221/1500... Est. remaining: 1m 28sRunning iteration 1231/1500... Est. remaining: 1m 25sRunning iteration 1241/1500... Est. remaining: 1m 22sRunning iteration 1251/1500... Est. remaining: 1m 19sRunning iteration 1261/1500... Est. remaining: 1m 15sRunning iteration 1271/1500... Est. remaining: 1m 12sRunning iteration 1281/1500... Est. remaining: 1m 9sRunning iteration 1291/1500... Est. remaining: 1m 6sRunning iteration 1301/1500... Est. remaining: 1m 3sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8370336430289942), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 53sRunning iteration 1341/1500... Est. remaining: 0m 50sRunning iteration 1351/1500... Est. remaining: 0m 47sRunning iteration 1361/1500... Est. remaining: 0m 44sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8370336430289942), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 25sRunning iteration 1431/1500... Est. remaining: 0m 22sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 1.84
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8370336430289942), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.8370)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Mon Aug 25 14:10:57 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,451,681,809
Annual Return: 40.91%
Sharpe Ratio: 1.38176
Sortino Ratio: 1.309
Max Drawdown: -60.4%
Avg Drawdown: -12.7%
Normalized Score: -0.636
Lookback periods: [112, 117, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,765,469,355
Annual Return: 41.71%
Sharpe Ratio: 1.43445
Sortino Ratio: 1.347
Max Drawdown: -52.3%
Avg Drawdown: -9.5%
Normalized Score: 0.299
Lookback periods: [50, 101, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,175,793,148
Annual Return: 48.61%
Sharpe Ratio: 1.60595
Sortino Ratio: 1.569
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.861
Lookback periods: [139, 147, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 22m 23sRunning iteration 21/1500... Est. remaining: 14m 58sRunning iteration 31/1500... Est. remaining: 12m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,204,840,037
Annual Return: 49.06%
Sharpe Ratio: 1.60847
Sortino Ratio: 1.574
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.883
Lookback periods: [128, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 11m 38sRunning iteration 51/1500... Est. remaining: 10m 47sRunning iteration 61/1500... Est. remaining: 10m 8sRunning iteration 71/1500... Est. remaining: 9m 39sRunning iteration 81/1500... Est. remaining: 9m 18sRunning iteration 91/1500... Est. remaining: 8m 59sRunning iteration 101/1500... Est. remaining: 8m 44sbest_combination: {'lookbacks': [128, 157, 172], 'score': np.float64(0.8834906799206189), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 31sRunning iteration 121/1500... Est. remaining: 8m 19sRunning iteration 131/1500... Est. remaining: 8m 9sRunning iteration 141/1500... Est. remaining: 7m 59sRunning iteration 151/1500... Est. remaining: 7m 52sRunning iteration 161/1500... Est. remaining: 7m 46sRunning iteration 171/1500... Est. remaining: 7m 38sRunning iteration 181/1500... Est. remaining: 7m 32sRunning iteration 191/1500... Est. remaining: 7m 26sRunning iteration 201/1500... Est. remaining: 7m 20sbest_combination: {'lookbacks': [128, 157, 172], 'score': np.float64(0.8834906799206189), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 14sRunning iteration 221/1500... Est. remaining: 7m 8sRunning iteration 231/1500... Est. remaining: 7m 3sRunning iteration 241/1500... Est. remaining: 6m 58sRunning iteration 251/1500... Est. remaining: 6m 53sRunning iteration 261/1500... Est. remaining: 6m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,990,190,289
Annual Return: 42.20%
Sharpe Ratio: 1.51168
Sortino Ratio: 1.416
Max Drawdown: -37.2%
Avg Drawdown: -9.4%
Normalized Score: 1.070
Lookback periods: [50, 52, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/1500... Est. remaining: 6m 47sRunning iteration 281/1500... Est. remaining: 6m 43sRunning iteration 291/1500... Est. remaining: 6m 38sRunning iteration 301/1500... Est. remaining: 6m 34sbest_combination: {'lookbacks': [50, 52, 90], 'score': np.float64(1.0696776373990822), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 29sRunning iteration 321/1500... Est. remaining: 6m 25sRunning iteration 331/1500... Est. remaining: 6m 20sRunning iteration 341/1500... Est. remaining: 6m 16sRunning iteration 351/1500... Est. remaining: 6m 12sRunning iteration 361/1500... Est. remaining: 6m 8sRunning iteration 371/1500... Est. remaining: 6m 4sRunning iteration 381/1500... Est. remaining: 6m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,582,693,160
Annual Return: 44.63%
Sharpe Ratio: 1.59347
Sortino Ratio: 1.511
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.616
Lookback periods: [50, 53, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 5m 58sRunning iteration 401/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [50, 53, 96], 'score': np.float64(1.616027074092925), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 50sRunning iteration 421/1500... Est. remaining: 5m 46sRunning iteration 431/1500... Est. remaining: 5m 42sRunning iteration 441/1500... Est. remaining: 5m 39sRunning iteration 451/1500... Est. remaining: 5m 35sRunning iteration 461/1500... Est. remaining: 5m 31sRunning iteration 471/1500... Est. remaining: 5m 28sRunning iteration 481/1500... Est. remaining: 5m 24sRunning iteration 491/1500... Est. remaining: 5m 20sRunning iteration 501/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [50, 53, 96], 'score': np.float64(1.616027074092925), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 13sRunning iteration 521/1500... Est. remaining: 5m 9sRunning iteration 531/1500... Est. remaining: 5m 6sRunning iteration 541/1500... Est. remaining: 5m 2sRunning iteration 551/1500... Est. remaining: 4m 59sRunning iteration 561/1500... Est. remaining: 4m 55sRunning iteration 571/1500... Est. remaining: 4m 52sRunning iteration 581/1500... Est. remaining: 4m 49sRunning iteration 591/1500... Est. remaining: 4m 45sRunning iteration 601/1500... Est. remaining: 4m 42sbest_combination: {'lookbacks': [50, 53, 96], 'score': np.float64(1.616027074092925), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 38sRunning iteration 621/1500... Est. remaining: 4m 35sRunning iteration 631/1500... Est. remaining: 4m 32sRunning iteration 641/1500... Est. remaining: 4m 28sRunning iteration 651/1500... Est. remaining: 4m 25sRunning iteration 661/1500... Est. remaining: 4m 22sRunning iteration 671/1500... Est. remaining: 4m 18sRunning iteration 681/1500... Est. remaining: 4m 15sRunning iteration 691/1500... Est. remaining: 4m 12sRunning iteration 701/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [50, 53, 96], 'score': np.float64(1.616027074092925), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 5sRunning iteration 721/1500... Est. remaining: 4m 2sRunning iteration 731/1500... Est. remaining: 3m 59sRunning iteration 741/1500... Est. remaining: 3m 55sRunning iteration 751/1500... Est. remaining: 3m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.839
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 3m 50sRunning iteration 771/1500... Est. remaining: 3m 46sRunning iteration 781/1500... Est. remaining: 3m 43sRunning iteration 791/1500... Est. remaining: 3m 40sRunning iteration 801/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8387392756503704), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 33sRunning iteration 821/1500... Est. remaining: 3m 30sRunning iteration 831/1500... Est. remaining: 3m 27sRunning iteration 841/1500... Est. remaining: 3m 24sRunning iteration 851/1500... Est. remaining: 3m 21sRunning iteration 861/1500... Est. remaining: 3m 17sRunning iteration 871/1500... Est. remaining: 3m 14sRunning iteration 881/1500... Est. remaining: 3m 11sRunning iteration 891/1500... Est. remaining: 3m 8sRunning iteration 901/1500... Est. remaining: 3m 5sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8387392756503704), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 1sRunning iteration 921/1500... Est. remaining: 2m 58sRunning iteration 931/1500... Est. remaining: 2m 55sRunning iteration 941/1500... Est. remaining: 2m 52sRunning iteration 951/1500... Est. remaining: 2m 49sRunning iteration 961/1500... Est. remaining: 2m 46sRunning iteration 971/1500... Est. remaining: 2m 42sRunning iteration 981/1500... Est. remaining: 2m 39sRunning iteration 991/1500... Est. remaining: 2m 36sRunning iteration 1001/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8387392756503704), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 30sRunning iteration 1021/1500... Est. remaining: 2m 27sRunning iteration 1031/1500... Est. remaining: 2m 24sRunning iteration 1041/1500... Est. remaining: 2m 21sRunning iteration 1051/1500... Est. remaining: 2m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.996
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1061/1500... Est. remaining: 2m 15sRunning iteration 1071/1500... Est. remaining: 2m 12sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 2sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9957236202633317), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 59sRunning iteration 1121/1500... Est. remaining: 1m 56sRunning iteration 1131/1500... Est. remaining: 1m 53sRunning iteration 1141/1500... Est. remaining: 1m 50sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9957236202633317), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 28sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9957236202633317), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 57sRunning iteration 1321/1500... Est. remaining: 0m 54sRunning iteration 1331/1500... Est. remaining: 0m 51sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9957236202633317), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 2.00
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9957236202633317), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9957)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Mon Aug 25 14:18:40 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $294,955,958
Annual Return: 34.58%
Sharpe Ratio: 1.17580
Sortino Ratio: 1.102
Max Drawdown: -63.7%
Avg Drawdown: -14.2%
Normalized Score: -1.978
Lookback periods: [82, 145, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $587,277,470
Annual Return: 37.28%
Sharpe Ratio: 1.30522
Sortino Ratio: 1.203
Max Drawdown: -52.3%
Avg Drawdown: -11.7%
Normalized Score: -0.762
Lookback periods: [83, 95, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,364,596,509
Annual Return: 44.37%
Sharpe Ratio: 1.47390
Sortino Ratio: 1.420
Max Drawdown: -65.6%
Avg Drawdown: -12.6%
Normalized Score: -0.514
Lookback periods: [104, 145, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 15m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,669,112,455
Annual Return: 41.48%
Sharpe Ratio: 1.40766
Sortino Ratio: 1.340
Max Drawdown: -55.0%
Avg Drawdown: -12.8%
Normalized Score: -0.460
Lookback periods: [87, 124, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,769,139,010
Annual Return: 46.63%
Sharpe Ratio: 1.53171
Sortino Ratio: 1.495
Max Drawdown: -57.3%
Avg Drawdown: -12.6%
Normalized Score: 0.120
Lookback periods: [138, 152, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 12m 46sRunning iteration 31/1500... Est. remaining: 10m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,977,251,811
Annual Return: 42.17%
Sharpe Ratio: 1.47202
Sortino Ratio: 1.386
Max Drawdown: -52.3%
Avg Drawdown: -9.5%
Normalized Score: 0.249
Lookback periods: [50, 98, 116] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 10m 22sRunning iteration 51/1500... Est. remaining: 9m 43sRunning iteration 61/1500... Est. remaining: 9m 15sRunning iteration 71/1500... Est. remaining: 8m 54sRunning iteration 81/1500... Est. remaining: 8m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,793,474,486
Annual Return: 46.65%
Sharpe Ratio: 1.52573
Sortino Ratio: 1.497
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: 0.396
Lookback periods: [161, 164, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 8m 36sRunning iteration 101/1500... Est. remaining: 8m 24sbest_combination: {'lookbacks': [161, 164, 168], 'score': np.float64(0.39576827009010584), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 14sRunning iteration 121/1500... Est. remaining: 8m 5sRunning iteration 131/1500... Est. remaining: 7m 57sRunning iteration 141/1500... Est. remaining: 7m 49sRunning iteration 151/1500... Est. remaining: 7m 42sRunning iteration 161/1500... Est. remaining: 7m 35sRunning iteration 171/1500... Est. remaining: 7m 29sRunning iteration 181/1500... Est. remaining: 7m 24sRunning iteration 191/1500... Est. remaining: 7m 18sRunning iteration 201/1500... Est. remaining: 7m 13sbest_combination: {'lookbacks': [161, 164, 168], 'score': np.float64(0.39576827009010584), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 7sRunning iteration 221/1500... Est. remaining: 7m 3sRunning iteration 231/1500... Est. remaining: 6m 58sRunning iteration 241/1500... Est. remaining: 6m 53sRunning iteration 251/1500... Est. remaining: 6m 48sRunning iteration 261/1500... Est. remaining: 6m 44sRunning iteration 271/1500... Est. remaining: 6m 39sRunning iteration 281/1500... Est. remaining: 6m 35sRunning iteration 291/1500... Est. remaining: 6m 31sRunning iteration 301/1500... Est. remaining: 6m 27sbest_combination: {'lookbacks': [161, 164, 168], 'score': np.float64(0.39576827009010584), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 23sRunning iteration 321/1500... Est. remaining: 6m 19sRunning iteration 331/1500... Est. remaining: 6m 15sRunning iteration 341/1500... Est. remaining: 6m 11sRunning iteration 351/1500... Est. remaining: 6m 8sRunning iteration 361/1500... Est. remaining: 6m 4sRunning iteration 371/1500... Est. remaining: 6m 0sRunning iteration 381/1500... Est. remaining: 5m 56sRunning iteration 391/1500... Est. remaining: 5m 52sRunning iteration 401/1500... Est. remaining: 5m 49sbest_combination: {'lookbacks': [161, 164, 168], 'score': np.float64(0.39576827009010584), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 45sRunning iteration 421/1500... Est. remaining: 5m 42sRunning iteration 431/1500... Est. remaining: 5m 38sRunning iteration 441/1500... Est. remaining: 5m 35sRunning iteration 451/1500... Est. remaining: 5m 31sRunning iteration 461/1500... Est. remaining: 5m 28sRunning iteration 471/1500... Est. remaining: 5m 24sRunning iteration 481/1500... Est. remaining: 5m 21sRunning iteration 491/1500... Est. remaining: 5m 18sRunning iteration 501/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [161, 164, 168], 'score': np.float64(0.39576827009010584), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 11sRunning iteration 521/1500... Est. remaining: 5m 8sRunning iteration 531/1500... Est. remaining: 5m 4sRunning iteration 541/1500... Est. remaining: 5m 1sRunning iteration 551/1500... Est. remaining: 4m 57sRunning iteration 561/1500... Est. remaining: 4m 54sRunning iteration 571/1500... Est. remaining: 4m 51sRunning iteration 581/1500... Est. remaining: 4m 47sRunning iteration 591/1500... Est. remaining: 4m 44sRunning iteration 601/1500... Est. remaining: 4m 41sbest_combination: {'lookbacks': [161, 164, 168], 'score': np.float64(0.39576827009010584), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,516,822,683
Annual Return: 47.75%
Sharpe Ratio: 1.55870
Sortino Ratio: 1.525
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.399
Lookback periods: [158, 160, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 4m 35sRunning iteration 631/1500... Est. remaining: 4m 32sRunning iteration 641/1500... Est. remaining: 4m 29sRunning iteration 651/1500... Est. remaining: 4m 26sRunning iteration 661/1500... Est. remaining: 4m 22sRunning iteration 671/1500... Est. remaining: 4m 19sRunning iteration 681/1500... Est. remaining: 4m 16sRunning iteration 691/1500... Est. remaining: 4m 13sRunning iteration 701/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [158, 160, 172], 'score': np.float64(0.399434071685244), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 6sRunning iteration 721/1500... Est. remaining: 4m 3sRunning iteration 731/1500... Est. remaining: 4m 0sRunning iteration 741/1500... Est. remaining: 3m 56sRunning iteration 751/1500... Est. remaining: 3m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,605,168,415
Annual Return: 47.80%
Sharpe Ratio: 1.56426
Sortino Ratio: 1.538
Max Drawdown: -56.9%
Avg Drawdown: -11.2%
Normalized Score: 0.489
Lookback periods: [159, 161, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 3m 51sRunning iteration 771/1500... Est. remaining: 3m 47sRunning iteration 781/1500... Est. remaining: 3m 44sRunning iteration 791/1500... Est. remaining: 3m 41sRunning iteration 801/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [159, 161, 166], 'score': np.float64(0.4888441256761976), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 31sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 15sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [159, 161, 166], 'score': np.float64(0.4888441256761976), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 3sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 56sRunning iteration 941/1500... Est. remaining: 2m 53sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 37sRunning iteration 1001/1500... Est. remaining: 2m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,966,330,428
Annual Return: 47.43%
Sharpe Ratio: 1.55084
Sortino Ratio: 1.507
Max Drawdown: -55.0%
Avg Drawdown: -10.8%
Normalized Score: 0.522
Lookback periods: [156, 159, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [156, 159, 170], 'score': np.float64(0.5224379133039704), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,252,963,994
Annual Return: 48.64%
Sharpe Ratio: 1.58032
Sortino Ratio: 1.550
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 0.606
Lookback periods: [154, 161, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 29sRunning iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 23sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [154, 161, 172], 'score': np.float64(0.6063946359736264), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,571,974,078
Annual Return: 43.25%
Sharpe Ratio: 1.55030
Sortino Ratio: 1.452
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.188
Lookback periods: [50, 55, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1131/1500... Est. remaining: 1m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,279,521,716
Annual Return: 42.75%
Sharpe Ratio: 1.54812
Sortino Ratio: 1.448
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.208
Lookback periods: [50, 59, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1141/1500... Est. remaining: 1m 52sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,686,695,618
Annual Return: 43.43%
Sharpe Ratio: 1.55041
Sortino Ratio: 1.458
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.255
Lookback periods: [50, 54, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1191/1500... Est. remaining: 1m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,650,069,972
Annual Return: 43.38%
Sharpe Ratio: 1.54673
Sortino Ratio: 1.453
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.256
Lookback periods: [50, 54, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [50, 54, 84], 'score': np.float64(1.256267872992558), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,037,914,546
Annual Return: 43.94%
Sharpe Ratio: 1.57274
Sortino Ratio: 1.474
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.337
Lookback periods: [50, 54, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,916,377,953
Annual Return: 45.00%
Sharpe Ratio: 1.61386
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.578
Lookback periods: [50, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [50, 54, 95], 'score': np.float64(1.5781087862581846), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.659
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.677
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6768523955963268), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.832
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 1.83
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8319580165731708), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.8320)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Mon Aug 25 14:26:32 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $858,973,140
Annual Return: 38.79%
Sharpe Ratio: 1.30786
Sortino Ratio: 1.247
Max Drawdown: -64.2%
Avg Drawdown: -13.2%
Normalized Score: -1.112
Lookback periods: [96, 154, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,442,240,840
Annual Return: 45.53%
Sharpe Ratio: 1.50897
Sortino Ratio: 1.474
Max Drawdown: -67.5%
Avg Drawdown: -12.0%
Normalized Score: -0.208
Lookback periods: [116, 156, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 15m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,369,949,282
Annual Return: 42.91%
Sharpe Ratio: 1.45297
Sortino Ratio: 1.389
Max Drawdown: -55.0%
Avg Drawdown: -12.0%
Normalized Score: -0.149
Lookback periods: [89, 127, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,222,970,159
Annual Return: 48.63%
Sharpe Ratio: 1.59943
Sortino Ratio: 1.563
Max Drawdown: -58.5%
Avg Drawdown: -11.4%
Normalized Score: 0.491
Lookback periods: [134, 153, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 13m 8sRunning iteration 31/1500... Est. remaining: 11m 13sRunning iteration 41/1500... Est. remaining: 10m 16sRunning iteration 51/1500... Est. remaining: 9m 37sRunning iteration 61/1500... Est. remaining: 9m 10sRunning iteration 71/1500... Est. remaining: 8m 48sRunning iteration 81/1500... Est. remaining: 8m 32sRunning iteration 91/1500... Est. remaining: 8m 19sRunning iteration 101/1500... Est. remaining: 8m 8sbest_combination: {'lookbacks': [134, 153, 171], 'score': np.float64(0.49061627019778076), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 59sRunning iteration 121/1500... Est. remaining: 7m 50sRunning iteration 131/1500... Est. remaining: 7m 42sRunning iteration 141/1500... Est. remaining: 7m 35sRunning iteration 151/1500... Est. remaining: 7m 28sRunning iteration 161/1500... Est. remaining: 7m 22sRunning iteration 171/1500... Est. remaining: 7m 16sRunning iteration 181/1500... Est. remaining: 7m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,929,534,714
Annual Return: 43.79%
Sharpe Ratio: 1.57927
Sortino Ratio: 1.479
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.300
Lookback periods: [50, 52, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 7m 10sRunning iteration 201/1500... Est. remaining: 7m 5sbest_combination: {'lookbacks': [50, 52, 99], 'score': np.float64(1.3001074413720053), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 0sRunning iteration 221/1500... Est. remaining: 6m 55sRunning iteration 231/1500... Est. remaining: 6m 50sRunning iteration 241/1500... Est. remaining: 6m 45sRunning iteration 251/1500... Est. remaining: 6m 41sRunning iteration 261/1500... Est. remaining: 6m 37sRunning iteration 271/1500... Est. remaining: 6m 33sRunning iteration 281/1500... Est. remaining: 6m 28sRunning iteration 291/1500... Est. remaining: 6m 24sRunning iteration 301/1500... Est. remaining: 6m 20sbest_combination: {'lookbacks': [50, 52, 99], 'score': np.float64(1.3001074413720053), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 17sRunning iteration 321/1500... Est. remaining: 6m 13sRunning iteration 331/1500... Est. remaining: 6m 9sRunning iteration 341/1500... Est. remaining: 6m 5sRunning iteration 351/1500... Est. remaining: 6m 1sRunning iteration 361/1500... Est. remaining: 5m 58sRunning iteration 371/1500... Est. remaining: 5m 54sRunning iteration 381/1500... Est. remaining: 5m 50sRunning iteration 391/1500... Est. remaining: 5m 47sRunning iteration 401/1500... Est. remaining: 5m 43sbest_combination: {'lookbacks': [50, 52, 99], 'score': np.float64(1.3001074413720053), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 40sRunning iteration 421/1500... Est. remaining: 5m 36sRunning iteration 431/1500... Est. remaining: 5m 33sRunning iteration 441/1500... Est. remaining: 5m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,005,011
Annual Return: 43.90%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.375
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 5m 28sRunning iteration 461/1500... Est. remaining: 5m 25sRunning iteration 471/1500... Est. remaining: 5m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.382
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 5m 20sRunning iteration 491/1500... Est. remaining: 5m 17sRunning iteration 501/1500... Est. remaining: 5m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.532
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.5323466574422624), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 12sRunning iteration 521/1500... Est. remaining: 5m 8sRunning iteration 531/1500... Est. remaining: 5m 5sRunning iteration 541/1500... Est. remaining: 5m 2sRunning iteration 551/1500... Est. remaining: 4m 59sRunning iteration 561/1500... Est. remaining: 4m 55sRunning iteration 571/1500... Est. remaining: 4m 52sRunning iteration 581/1500... Est. remaining: 4m 49sRunning iteration 591/1500... Est. remaining: 4m 45sRunning iteration 601/1500... Est. remaining: 4m 42sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.5323466574422624), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 39sRunning iteration 621/1500... Est. remaining: 4m 35sRunning iteration 631/1500... Est. remaining: 4m 32sRunning iteration 641/1500... Est. remaining: 4m 29sRunning iteration 651/1500... Est. remaining: 4m 26sRunning iteration 661/1500... Est. remaining: 4m 22sRunning iteration 671/1500... Est. remaining: 4m 19sRunning iteration 681/1500... Est. remaining: 4m 16sRunning iteration 691/1500... Est. remaining: 4m 13sRunning iteration 701/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.5323466574422624), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 6sRunning iteration 721/1500... Est. remaining: 4m 3sRunning iteration 731/1500... Est. remaining: 4m 0sRunning iteration 741/1500... Est. remaining: 3m 57sRunning iteration 751/1500... Est. remaining: 3m 53sRunning iteration 761/1500... Est. remaining: 3m 50sRunning iteration 771/1500... Est. remaining: 3m 47sRunning iteration 781/1500... Est. remaining: 3m 44sRunning iteration 791/1500... Est. remaining: 3m 41sRunning iteration 801/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.5323466574422624), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 34sRunning iteration 821/1500... Est. remaining: 3m 31sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 24sRunning iteration 851/1500... Est. remaining: 3m 21sRunning iteration 861/1500... Est. remaining: 3m 18sRunning iteration 871/1500... Est. remaining: 3m 15sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 8sRunning iteration 901/1500... Est. remaining: 3m 5sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.5323466574422624), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.655
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 921/1500... Est. remaining: 2m 59sRunning iteration 931/1500... Est. remaining: 2m 56sRunning iteration 941/1500... Est. remaining: 2m 53sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 43sRunning iteration 981/1500... Est. remaining: 2m 40sRunning iteration 991/1500... Est. remaining: 2m 37sRunning iteration 1001/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 31sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 21sRunning iteration 1051/1500... Est. remaining: 2m 18sRunning iteration 1061/1500... Est. remaining: 2m 15sRunning iteration 1071/1500... Est. remaining: 2m 12sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 59sRunning iteration 1121/1500... Est. remaining: 1m 56sRunning iteration 1131/1500... Est. remaining: 1m 53sRunning iteration 1141/1500... Est. remaining: 1m 50sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 28sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 54sRunning iteration 1331/1500... Est. remaining: 0m 51sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 1.65
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.6549)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Mon Aug 25 14:34:12 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $660,342,060
Annual Return: 37.74%
Sharpe Ratio: 1.29901
Sortino Ratio: 1.221
Max Drawdown: -60.1%
Avg Drawdown: -13.9%
Normalized Score: -0.896
Lookback periods: [89, 114, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,588,423,785
Annual Return: 41.27%
Sharpe Ratio: 1.39710
Sortino Ratio: 1.340
Max Drawdown: -65.0%
Avg Drawdown: -13.2%
Normalized Score: -0.352
Lookback periods: [117, 138, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,245,713,963
Annual Return: 40.29%
Sharpe Ratio: 1.38489
Sortino Ratio: 1.302
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: 0.126
Lookback periods: [84, 97, 114] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,516,632,012
Annual Return: 44.55%
Sharpe Ratio: 1.45784
Sortino Ratio: 1.422
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.578
Lookback periods: [156, 175, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 16m 21sRunning iteration 21/1500... Est. remaining: 11m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,880,195,567
Annual Return: 46.71%
Sharpe Ratio: 1.51388
Sortino Ratio: 1.488
Max Drawdown: -61.4%
Avg Drawdown: -11.9%
Normalized Score: 0.861
Lookback periods: [154, 177, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 10m 43sRunning iteration 41/1500... Est. remaining: 9m 50sRunning iteration 51/1500... Est. remaining: 9m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,500,420,485
Annual Return: 47.74%
Sharpe Ratio: 1.55760
Sortino Ratio: 1.509
Max Drawdown: -57.9%
Avg Drawdown: -11.5%
Normalized Score: 1.241
Lookback periods: [155, 159, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 9m 10sRunning iteration 71/1500... Est. remaining: 8m 51sRunning iteration 81/1500... Est. remaining: 8m 34sRunning iteration 91/1500... Est. remaining: 8m 22sRunning iteration 101/1500... Est. remaining: 8m 11sbest_combination: {'lookbacks': [155, 159, 181], 'score': np.float64(1.2412528663343187), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 1sRunning iteration 121/1500... Est. remaining: 7m 52sRunning iteration 131/1500... Est. remaining: 7m 44sRunning iteration 141/1500... Est. remaining: 7m 37sRunning iteration 151/1500... Est. remaining: 7m 31sRunning iteration 161/1500... Est. remaining: 7m 24sRunning iteration 171/1500... Est. remaining: 7m 18sRunning iteration 181/1500... Est. remaining: 7m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,063,345,188
Annual Return: 46.08%
Sharpe Ratio: 1.58179
Sortino Ratio: 1.485
Max Drawdown: -55.0%
Avg Drawdown: -10.4%
Normalized Score: 1.305
Lookback periods: [50, 107, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 7m 13sRunning iteration 201/1500... Est. remaining: 7m 8sbest_combination: {'lookbacks': [50, 107, 144], 'score': np.float64(1.3048616366389307), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 3sRunning iteration 221/1500... Est. remaining: 6m 58sRunning iteration 231/1500... Est. remaining: 6m 53sRunning iteration 241/1500... Est. remaining: 6m 49sRunning iteration 251/1500... Est. remaining: 6m 45sRunning iteration 261/1500... Est. remaining: 6m 40sRunning iteration 271/1500... Est. remaining: 6m 36sRunning iteration 281/1500... Est. remaining: 6m 32sRunning iteration 291/1500... Est. remaining: 6m 28sRunning iteration 301/1500... Est. remaining: 6m 24sbest_combination: {'lookbacks': [50, 107, 144], 'score': np.float64(1.3048616366389307), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 20sRunning iteration 321/1500... Est. remaining: 6m 16sRunning iteration 331/1500... Est. remaining: 6m 12sRunning iteration 341/1500... Est. remaining: 6m 9sRunning iteration 351/1500... Est. remaining: 6m 5sRunning iteration 361/1500... Est. remaining: 6m 1sRunning iteration 371/1500... Est. remaining: 5m 58sRunning iteration 381/1500... Est. remaining: 5m 54sRunning iteration 391/1500... Est. remaining: 5m 50sRunning iteration 401/1500... Est. remaining: 5m 47sbest_combination: {'lookbacks': [50, 107, 144], 'score': np.float64(1.3048616366389307), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 43sRunning iteration 421/1500... Est. remaining: 5m 40sRunning iteration 431/1500... Est. remaining: 5m 36sRunning iteration 441/1500... Est. remaining: 5m 33sRunning iteration 451/1500... Est. remaining: 5m 29sRunning iteration 461/1500... Est. remaining: 5m 26sRunning iteration 471/1500... Est. remaining: 5m 22sRunning iteration 481/1500... Est. remaining: 5m 19sRunning iteration 491/1500... Est. remaining: 5m 16sRunning iteration 501/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [50, 107, 144], 'score': np.float64(1.3048616366389307), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 9sRunning iteration 521/1500... Est. remaining: 5m 6sRunning iteration 531/1500... Est. remaining: 5m 2sRunning iteration 541/1500... Est. remaining: 4m 59sRunning iteration 551/1500... Est. remaining: 4m 56sRunning iteration 561/1500... Est. remaining: 4m 52sRunning iteration 571/1500... Est. remaining: 4m 49sRunning iteration 581/1500... Est. remaining: 4m 46sRunning iteration 591/1500... Est. remaining: 4m 43sRunning iteration 601/1500... Est. remaining: 4m 39sbest_combination: {'lookbacks': [50, 107, 144], 'score': np.float64(1.3048616366389307), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 36sRunning iteration 621/1500... Est. remaining: 4m 33sRunning iteration 631/1500... Est. remaining: 4m 30sRunning iteration 641/1500... Est. remaining: 4m 26sRunning iteration 651/1500... Est. remaining: 4m 23sRunning iteration 661/1500... Est. remaining: 4m 20sRunning iteration 671/1500... Est. remaining: 4m 17sRunning iteration 681/1500... Est. remaining: 4m 13sRunning iteration 691/1500... Est. remaining: 4m 10sRunning iteration 701/1500... Est. remaining: 4m 7sbest_combination: {'lookbacks': [50, 107, 144], 'score': np.float64(1.3048616366389307), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 4sRunning iteration 721/1500... Est. remaining: 4m 1sRunning iteration 731/1500... Est. remaining: 3m 58sRunning iteration 741/1500... Est. remaining: 3m 54sRunning iteration 751/1500... Est. remaining: 3m 51sRunning iteration 761/1500... Est. remaining: 3m 48sRunning iteration 771/1500... Est. remaining: 3m 45sRunning iteration 781/1500... Est. remaining: 3m 42sRunning iteration 791/1500... Est. remaining: 3m 38sRunning iteration 801/1500... Est. remaining: 3m 35sbest_combination: {'lookbacks': [50, 107, 144], 'score': np.float64(1.3048616366389307), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 32sRunning iteration 821/1500... Est. remaining: 3m 29sRunning iteration 831/1500... Est. remaining: 3m 26sRunning iteration 841/1500... Est. remaining: 3m 23sRunning iteration 851/1500... Est. remaining: 3m 20sRunning iteration 861/1500... Est. remaining: 3m 16sRunning iteration 871/1500... Est. remaining: 3m 13sRunning iteration 881/1500... Est. remaining: 3m 10sRunning iteration 891/1500... Est. remaining: 3m 7sRunning iteration 901/1500... Est. remaining: 3m 4sbest_combination: {'lookbacks': [50, 107, 144], 'score': np.float64(1.3048616366389307), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 1sRunning iteration 921/1500... Est. remaining: 2m 58sRunning iteration 931/1500... Est. remaining: 2m 55sRunning iteration 941/1500... Est. remaining: 2m 52sRunning iteration 951/1500... Est. remaining: 2m 48sRunning iteration 961/1500... Est. remaining: 2m 45sRunning iteration 971/1500... Est. remaining: 2m 42sRunning iteration 981/1500... Est. remaining: 2m 39sRunning iteration 991/1500... Est. remaining: 2m 36sRunning iteration 1001/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [50, 107, 144], 'score': np.float64(1.3048616366389307), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 30sRunning iteration 1021/1500... Est. remaining: 2m 27sRunning iteration 1031/1500... Est. remaining: 2m 24sRunning iteration 1041/1500... Est. remaining: 2m 21sRunning iteration 1051/1500... Est. remaining: 2m 17sRunning iteration 1061/1500... Est. remaining: 2m 14sRunning iteration 1071/1500... Est. remaining: 2m 11sRunning iteration 1081/1500... Est. remaining: 2m 8sRunning iteration 1091/1500... Est. remaining: 2m 5sRunning iteration 1101/1500... Est. remaining: 2m 2sbest_combination: {'lookbacks': [50, 107, 144], 'score': np.float64(1.3048616366389307), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 59sRunning iteration 1121/1500... Est. remaining: 1m 56sRunning iteration 1131/1500... Est. remaining: 1m 53sRunning iteration 1141/1500... Est. remaining: 1m 50sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 40sRunning iteration 1181/1500... Est. remaining: 1m 37sRunning iteration 1191/1500... Est. remaining: 1m 34sRunning iteration 1201/1500... Est. remaining: 1m 31sbest_combination: {'lookbacks': [50, 107, 144], 'score': np.float64(1.3048616366389307), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 28sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 107, 144], 'score': np.float64(1.3048616366389307), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 54sRunning iteration 1331/1500... Est. remaining: 0m 51sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 107, 144], 'score': np.float64(1.3048616366389307), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,058,119,067
Annual Return: 45.15%
Sharpe Ratio: 1.55614
Sortino Ratio: 1.461
Max Drawdown: -52.3%
Avg Drawdown: -8.8%
Normalized Score: 1.419
Lookback periods: [50, 99, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 1.42
best_combination: {'lookbacks': [50, 99, 144], 'score': np.float64(1.4193189999217992), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 99, 144] (score: 1.4193)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 99, 144] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pi: 85 selections (20.4%)
4. naz100_pine: 68 selections (16.3%)
5. cash: 51 selections (12.3%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,058,119,067.45
Average Annualized Gain: 45.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 14:41:55 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $224,701,067
Annual Return: 33.52%
Sharpe Ratio: 1.17928
Sortino Ratio: 1.084
Max Drawdown: -52.3%
Avg Drawdown: -12.8%
Normalized Score: -1.389
Lookback periods: [73, 78, 112] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $221,153,743
Annual Return: 33.46%
Sharpe Ratio: 1.16637
Sortino Ratio: 1.087
Max Drawdown: -52.3%
Avg Drawdown: -12.4%
Normalized Score: -1.326
Lookback periods: [83, 121, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $655,760,187
Annual Return: 37.71%
Sharpe Ratio: 1.28414
Sortino Ratio: 1.209
Max Drawdown: -58.6%
Avg Drawdown: -13.7%
Normalized Score: -1.034
Lookback periods: [84, 103, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $502,011,588
Annual Return: 36.66%
Sharpe Ratio: 1.26065
Sortino Ratio: 1.185
Max Drawdown: -55.0%
Avg Drawdown: -13.0%
Normalized Score: -0.967
Lookback periods: [75, 102, 127] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,035,535,543
Annual Return: 39.54%
Sharpe Ratio: 1.33580
Sortino Ratio: 1.277
Max Drawdown: -62.1%
Avg Drawdown: -13.7%
Normalized Score: -0.805
Lookback periods: [88, 149, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,363,921,277
Annual Return: 40.65%
Sharpe Ratio: 1.35677
Sortino Ratio: 1.295
Max Drawdown: -57.6%
Avg Drawdown: -13.4%
Normalized Score: -0.445
Lookback periods: [102, 149, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,612,477,255
Annual Return: 45.69%
Sharpe Ratio: 1.50388
Sortino Ratio: 1.456
Max Drawdown: -57.9%
Avg Drawdown: -12.6%
Normalized Score: 0.608
Lookback periods: [127, 155, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 27sRunning iteration 21/1500... Est. remaining: 13m 55sRunning iteration 31/1500... Est. remaining: 11m 28sRunning iteration 41/1500... Est. remaining: 10m 18sRunning iteration 51/1500... Est. remaining: 9m 35sRunning iteration 61/1500... Est. remaining: 9m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,187,687,943
Annual Return: 47.56%
Sharpe Ratio: 1.55989
Sortino Ratio: 1.520
Max Drawdown: -62.4%
Avg Drawdown: -12.0%
Normalized Score: 0.926
Lookback periods: [136, 159, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 9m 5sRunning iteration 81/1500... Est. remaining: 8m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,930,949,822
Annual Return: 48.49%
Sharpe Ratio: 1.58883
Sortino Ratio: 1.549
Max Drawdown: -56.8%
Avg Drawdown: -11.2%
Normalized Score: 1.425
Lookback periods: [142, 157, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 8m 46sRunning iteration 101/1500... Est. remaining: 8m 33sbest_combination: {'lookbacks': [142, 157, 178], 'score': np.float64(1.4245728261670927), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 22sRunning iteration 121/1500... Est. remaining: 8m 11sRunning iteration 131/1500... Est. remaining: 8m 3sRunning iteration 141/1500... Est. remaining: 7m 54sRunning iteration 151/1500... Est. remaining: 7m 47sRunning iteration 161/1500... Est. remaining: 7m 40sRunning iteration 171/1500... Est. remaining: 7m 34sRunning iteration 181/1500... Est. remaining: 7m 28sRunning iteration 191/1500... Est. remaining: 7m 22sRunning iteration 201/1500... Est. remaining: 7m 16sbest_combination: {'lookbacks': [142, 157, 178], 'score': np.float64(1.4245728261670927), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 11sRunning iteration 221/1500... Est. remaining: 7m 6sRunning iteration 231/1500... Est. remaining: 7m 1sRunning iteration 241/1500... Est. remaining: 6m 57sRunning iteration 251/1500... Est. remaining: 6m 52sRunning iteration 261/1500... Est. remaining: 6m 48sRunning iteration 271/1500... Est. remaining: 6m 43sRunning iteration 281/1500... Est. remaining: 6m 39sRunning iteration 291/1500... Est. remaining: 6m 34sRunning iteration 301/1500... Est. remaining: 6m 30sbest_combination: {'lookbacks': [142, 157, 178], 'score': np.float64(1.4245728261670927), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 26sRunning iteration 321/1500... Est. remaining: 6m 22sRunning iteration 331/1500... Est. remaining: 6m 18sRunning iteration 341/1500... Est. remaining: 6m 14sRunning iteration 351/1500... Est. remaining: 6m 10sRunning iteration 361/1500... Est. remaining: 6m 6sRunning iteration 371/1500... Est. remaining: 6m 3sRunning iteration 381/1500... Est. remaining: 5m 59sRunning iteration 391/1500... Est. remaining: 5m 55sRunning iteration 401/1500... Est. remaining: 5m 51sbest_combination: {'lookbacks': [142, 157, 178], 'score': np.float64(1.4245728261670927), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 48sRunning iteration 421/1500... Est. remaining: 5m 44sRunning iteration 431/1500... Est. remaining: 5m 41sRunning iteration 441/1500... Est. remaining: 5m 37sRunning iteration 451/1500... Est. remaining: 5m 34sRunning iteration 461/1500... Est. remaining: 5m 30sRunning iteration 471/1500... Est. remaining: 5m 27sRunning iteration 481/1500... Est. remaining: 5m 23sRunning iteration 491/1500... Est. remaining: 5m 20sRunning iteration 501/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [142, 157, 178], 'score': np.float64(1.4245728261670927), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 13sRunning iteration 521/1500... Est. remaining: 5m 9sRunning iteration 531/1500... Est. remaining: 5m 6sRunning iteration 541/1500... Est. remaining: 5m 3sRunning iteration 551/1500... Est. remaining: 4m 59sRunning iteration 561/1500... Est. remaining: 4m 56sRunning iteration 571/1500... Est. remaining: 4m 53sRunning iteration 581/1500... Est. remaining: 4m 49sRunning iteration 591/1500... Est. remaining: 4m 46sRunning iteration 601/1500... Est. remaining: 4m 43sbest_combination: {'lookbacks': [142, 157, 178], 'score': np.float64(1.4245728261670927), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 39sRunning iteration 621/1500... Est. remaining: 4m 36sRunning iteration 631/1500... Est. remaining: 4m 33sRunning iteration 641/1500... Est. remaining: 4m 30sRunning iteration 651/1500... Est. remaining: 4m 26sRunning iteration 661/1500... Est. remaining: 4m 23sRunning iteration 671/1500... Est. remaining: 4m 20sRunning iteration 681/1500... Est. remaining: 4m 16sRunning iteration 691/1500... Est. remaining: 4m 13sRunning iteration 701/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [142, 157, 178], 'score': np.float64(1.4245728261670927), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 7sRunning iteration 721/1500... Est. remaining: 4m 3sRunning iteration 731/1500... Est. remaining: 4m 0sRunning iteration 741/1500... Est. remaining: 3m 57sRunning iteration 751/1500... Est. remaining: 3m 54sRunning iteration 761/1500... Est. remaining: 3m 51sRunning iteration 771/1500... Est. remaining: 3m 47sRunning iteration 781/1500... Est. remaining: 3m 44sRunning iteration 791/1500... Est. remaining: 3m 41sRunning iteration 801/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [142, 157, 178], 'score': np.float64(1.4245728261670927), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 31sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [142, 157, 178], 'score': np.float64(1.4245728261670927), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 3sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 57sRunning iteration 941/1500... Est. remaining: 2m 54sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [142, 157, 178], 'score': np.float64(1.4245728261670927), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,861,126,434
Annual Return: 47.95%
Sharpe Ratio: 1.58544
Sortino Ratio: 1.542
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 1.427
Lookback periods: [134, 157, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 23sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [134, 157, 173], 'score': np.float64(1.4267803637263519), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 58sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,088,413,376
Annual Return: 49.42%
Sharpe Ratio: 1.62253
Sortino Ratio: 1.581
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 1.678
Lookback periods: [136, 158, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [136, 158, 171], 'score': np.float64(1.6779628991240156), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [136, 158, 171], 'score': np.float64(1.6779628991240156), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [136, 158, 171], 'score': np.float64(1.6779628991240156), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.68
best_combination: {'lookbacks': [136, 158, 171], 'score': np.float64(1.6779628991240156), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 158, 171] (score: 1.6780)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 158, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 115 selections (27.6%)
2. naz100_hma: 111 selections (26.7%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 72 selections (17.3%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,088,413,376.35
Average Annualized Gain: 49.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 14:49:45 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $489,029,053
Annual Return: 36.55%
Sharpe Ratio: 1.22858
Sortino Ratio: 1.165
Max Drawdown: -56.1%
Avg Drawdown: -14.4%
Normalized Score: -1.177
Lookback periods: [99, 106, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,073,429,677
Annual Return: 39.69%
Sharpe Ratio: 1.36623
Sortino Ratio: 1.286
Max Drawdown: -56.9%
Avg Drawdown: -13.0%
Normalized Score: -0.547
Lookback periods: [93, 109, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,477,968,319
Annual Return: 44.50%
Sharpe Ratio: 1.44877
Sortino Ratio: 1.408
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.103
Lookback periods: [170, 187, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 14m 35sRunning iteration 21/1500... Est. remaining: 10m 28sRunning iteration 31/1500... Est. remaining: 9m 16sRunning iteration 41/1500... Est. remaining: 8m 41sRunning iteration 51/1500... Est. remaining: 8m 21sRunning iteration 61/1500... Est. remaining: 8m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,935,584,442
Annual Return: 46.75%
Sharpe Ratio: 1.54965
Sortino Ratio: 1.504
Max Drawdown: -57.2%
Avg Drawdown: -11.9%
Normalized Score: 0.447
Lookback periods: [138, 150, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 8m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,566,293,429
Annual Return: 47.18%
Sharpe Ratio: 1.53997
Sortino Ratio: 1.506
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.545
Lookback periods: [154, 161, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 8m 13sRunning iteration 91/1500... Est. remaining: 8m 1sRunning iteration 101/1500... Est. remaining: 7m 52sbest_combination: {'lookbacks': [154, 161, 169], 'score': np.float64(0.545330150529343), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 45sRunning iteration 121/1500... Est. remaining: 7m 37sRunning iteration 131/1500... Est. remaining: 7m 31sRunning iteration 141/1500... Est. remaining: 7m 26sRunning iteration 151/1500... Est. remaining: 7m 20sRunning iteration 161/1500... Est. remaining: 7m 15sRunning iteration 171/1500... Est. remaining: 7m 10sRunning iteration 181/1500... Est. remaining: 7m 5sRunning iteration 191/1500... Est. remaining: 7m 0sRunning iteration 201/1500... Est. remaining: 6m 56sbest_combination: {'lookbacks': [154, 161, 169], 'score': np.float64(0.545330150529343), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 51sRunning iteration 221/1500... Est. remaining: 6m 47sRunning iteration 231/1500... Est. remaining: 6m 43sRunning iteration 241/1500... Est. remaining: 6m 39sRunning iteration 251/1500... Est. remaining: 6m 36sRunning iteration 261/1500... Est. remaining: 6m 32sRunning iteration 271/1500... Est. remaining: 6m 28sRunning iteration 281/1500... Est. remaining: 6m 24sRunning iteration 291/1500... Est. remaining: 6m 20sRunning iteration 301/1500... Est. remaining: 6m 17sbest_combination: {'lookbacks': [154, 161, 169], 'score': np.float64(0.545330150529343), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 13sRunning iteration 321/1500... Est. remaining: 6m 9sRunning iteration 331/1500... Est. remaining: 6m 6sRunning iteration 341/1500... Est. remaining: 6m 2sRunning iteration 351/1500... Est. remaining: 5m 59sRunning iteration 361/1500... Est. remaining: 5m 55sRunning iteration 371/1500... Est. remaining: 5m 52sRunning iteration 381/1500... Est. remaining: 5m 48sRunning iteration 391/1500... Est. remaining: 5m 45sRunning iteration 401/1500... Est. remaining: 5m 42sbest_combination: {'lookbacks': [154, 161, 169], 'score': np.float64(0.545330150529343), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 38sRunning iteration 421/1500... Est. remaining: 5m 35sRunning iteration 431/1500... Est. remaining: 5m 32sRunning iteration 441/1500... Est. remaining: 5m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,544,205,869
Annual Return: 49.20%
Sharpe Ratio: 1.59522
Sortino Ratio: 1.560
Max Drawdown: -60.2%
Avg Drawdown: -11.5%
Normalized Score: 0.669
Lookback periods: [149, 158, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 5m 27sRunning iteration 461/1500... Est. remaining: 5m 24sRunning iteration 471/1500... Est. remaining: 5m 20sRunning iteration 481/1500... Est. remaining: 5m 17sRunning iteration 491/1500... Est. remaining: 5m 14sRunning iteration 501/1500... Est. remaining: 5m 10sbest_combination: {'lookbacks': [149, 158, 184], 'score': np.float64(0.6685986133613416), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 7sRunning iteration 521/1500... Est. remaining: 5m 4sRunning iteration 531/1500... Est. remaining: 5m 0sRunning iteration 541/1500... Est. remaining: 4m 57sRunning iteration 551/1500... Est. remaining: 4m 54sRunning iteration 561/1500... Est. remaining: 4m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,112,778,760
Annual Return: 48.58%
Sharpe Ratio: 1.59073
Sortino Ratio: 1.558
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: 0.693
Lookback periods: [128, 131, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 4m 49sRunning iteration 581/1500... Est. remaining: 4m 45sRunning iteration 591/1500... Est. remaining: 4m 42sRunning iteration 601/1500... Est. remaining: 4m 39sbest_combination: {'lookbacks': [128, 131, 131], 'score': np.float64(0.692654751901118), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 36sRunning iteration 621/1500... Est. remaining: 4m 32sRunning iteration 631/1500... Est. remaining: 4m 29sRunning iteration 641/1500... Est. remaining: 4m 26sRunning iteration 651/1500... Est. remaining: 4m 23sRunning iteration 661/1500... Est. remaining: 4m 20sRunning iteration 671/1500... Est. remaining: 4m 16sRunning iteration 681/1500... Est. remaining: 4m 13sRunning iteration 691/1500... Est. remaining: 4m 10sRunning iteration 701/1500... Est. remaining: 4m 7sbest_combination: {'lookbacks': [128, 131, 131], 'score': np.float64(0.692654751901118), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 4sRunning iteration 721/1500... Est. remaining: 4m 0sRunning iteration 731/1500... Est. remaining: 3m 57sRunning iteration 741/1500... Est. remaining: 3m 54sRunning iteration 751/1500... Est. remaining: 3m 51sRunning iteration 761/1500... Est. remaining: 3m 48sRunning iteration 771/1500... Est. remaining: 3m 45sRunning iteration 781/1500... Est. remaining: 3m 42sRunning iteration 791/1500... Est. remaining: 3m 38sRunning iteration 801/1500... Est. remaining: 3m 35sbest_combination: {'lookbacks': [128, 131, 131], 'score': np.float64(0.692654751901118), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 32sRunning iteration 821/1500... Est. remaining: 3m 29sRunning iteration 831/1500... Est. remaining: 3m 26sRunning iteration 841/1500... Est. remaining: 3m 23sRunning iteration 851/1500... Est. remaining: 3m 20sRunning iteration 861/1500... Est. remaining: 3m 16sRunning iteration 871/1500... Est. remaining: 3m 13sRunning iteration 881/1500... Est. remaining: 3m 10sRunning iteration 891/1500... Est. remaining: 3m 7sRunning iteration 901/1500... Est. remaining: 3m 4sbest_combination: {'lookbacks': [128, 131, 131], 'score': np.float64(0.692654751901118), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 1sRunning iteration 921/1500... Est. remaining: 2m 58sRunning iteration 931/1500... Est. remaining: 2m 55sRunning iteration 941/1500... Est. remaining: 2m 52sRunning iteration 951/1500... Est. remaining: 2m 49sRunning iteration 961/1500... Est. remaining: 2m 45sRunning iteration 971/1500... Est. remaining: 2m 42sRunning iteration 981/1500... Est. remaining: 2m 39sRunning iteration 991/1500... Est. remaining: 2m 36sRunning iteration 1001/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [128, 131, 131], 'score': np.float64(0.692654751901118), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,475,743,604
Annual Return: 48.27%
Sharpe Ratio: 1.60562
Sortino Ratio: 1.559
Max Drawdown: -55.0%
Avg Drawdown: -11.9%
Normalized Score: 0.731
Lookback periods: [132, 135, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 2m 30sRunning iteration 1021/1500... Est. remaining: 2m 27sRunning iteration 1031/1500... Est. remaining: 2m 24sRunning iteration 1041/1500... Est. remaining: 2m 21sRunning iteration 1051/1500... Est. remaining: 2m 18sRunning iteration 1061/1500... Est. remaining: 2m 15sRunning iteration 1071/1500... Est. remaining: 2m 12sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 2sbest_combination: {'lookbacks': [132, 135, 136], 'score': np.float64(0.7313976662976075), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 59sRunning iteration 1121/1500... Est. remaining: 1m 56sRunning iteration 1131/1500... Est. remaining: 1m 53sRunning iteration 1141/1500... Est. remaining: 1m 50sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [132, 135, 136], 'score': np.float64(0.7313976662976075), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 28sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [132, 135, 136], 'score': np.float64(0.7313976662976075), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [132, 135, 136], 'score': np.float64(0.7313976662976075), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 0.73
best_combination: {'lookbacks': [132, 135, 136], 'score': np.float64(0.7313976662976075), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [132, 135, 136] (score: 0.7314)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [132, 135, 136] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 111 selections (26.7%)
2. naz100_hma: 104 selections (25.0%)
3. naz100_pi: 84 selections (20.2%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,475,743,603.61
Average Annualized Gain: 48.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 14:57:29 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,844,276,107
Annual Return: 45.89%
Sharpe Ratio: 1.49196
Sortino Ratio: 1.460
Max Drawdown: -61.0%
Avg Drawdown: -12.3%
Normalized Score: 0.311
Lookback periods: [145, 172, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,796,689,498
Annual Return: 46.65%
Sharpe Ratio: 1.52058
Sortino Ratio: 1.495
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.674
Lookback periods: [158, 175, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 13m 36sRunning iteration 21/1500... Est. remaining: 10m 5sRunning iteration 31/1500... Est. remaining: 8m 53sRunning iteration 41/1500... Est. remaining: 8m 15sRunning iteration 51/1500... Est. remaining: 7m 55sRunning iteration 61/1500... Est. remaining: 7m 46sRunning iteration 71/1500... Est. remaining: 7m 38sRunning iteration 81/1500... Est. remaining: 7m 32sRunning iteration 91/1500... Est. remaining: 7m 28sRunning iteration 101/1500... Est. remaining: 7m 23sbest_combination: {'lookbacks': [158, 175, 181], 'score': np.float64(0.6740329803379155), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $955,717,104
Annual Return: 39.22%
Sharpe Ratio: 1.40572
Sortino Ratio: 1.307
Max Drawdown: -36.5%
Avg Drawdown: -10.0%
Normalized Score: 0.773
Lookback periods: [51, 59, 81] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 7m 29sRunning iteration 121/1500... Est. remaining: 7m 24sRunning iteration 131/1500... Est. remaining: 7m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,170,276,853
Annual Return: 49.45%
Sharpe Ratio: 1.62027
Sortino Ratio: 1.588
Max Drawdown: -60.1%
Avg Drawdown: -11.0%
Normalized Score: 1.016
Lookback periods: [128, 156, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 7m 23sRunning iteration 151/1500... Est. remaining: 7m 18sRunning iteration 161/1500... Est. remaining: 7m 13sRunning iteration 171/1500... Est. remaining: 7m 8sRunning iteration 181/1500... Est. remaining: 7m 4sRunning iteration 191/1500... Est. remaining: 7m 0sRunning iteration 201/1500... Est. remaining: 6m 56sbest_combination: {'lookbacks': [128, 156, 158], 'score': np.float64(1.015605712298449), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 51sRunning iteration 221/1500... Est. remaining: 6m 47sRunning iteration 231/1500... Est. remaining: 6m 44sRunning iteration 241/1500... Est. remaining: 6m 39sRunning iteration 251/1500... Est. remaining: 6m 36sRunning iteration 261/1500... Est. remaining: 6m 32sRunning iteration 271/1500... Est. remaining: 6m 28sRunning iteration 281/1500... Est. remaining: 6m 25sRunning iteration 291/1500... Est. remaining: 6m 21sRunning iteration 301/1500... Est. remaining: 6m 17sbest_combination: {'lookbacks': [128, 156, 158], 'score': np.float64(1.015605712298449), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 14sRunning iteration 321/1500... Est. remaining: 6m 10sRunning iteration 331/1500... Est. remaining: 6m 7sRunning iteration 341/1500... Est. remaining: 6m 3sRunning iteration 351/1500... Est. remaining: 6m 0sRunning iteration 361/1500... Est. remaining: 5m 57sRunning iteration 371/1500... Est. remaining: 5m 53sRunning iteration 381/1500... Est. remaining: 5m 50sRunning iteration 391/1500... Est. remaining: 5m 46sRunning iteration 401/1500... Est. remaining: 5m 43sbest_combination: {'lookbacks': [128, 156, 158], 'score': np.float64(1.015605712298449), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 40sRunning iteration 421/1500... Est. remaining: 5m 37sRunning iteration 431/1500... Est. remaining: 5m 33sRunning iteration 441/1500... Est. remaining: 5m 30sRunning iteration 451/1500... Est. remaining: 5m 27sRunning iteration 461/1500... Est. remaining: 5m 24sRunning iteration 471/1500... Est. remaining: 5m 20sRunning iteration 481/1500... Est. remaining: 5m 17sRunning iteration 491/1500... Est. remaining: 5m 14sRunning iteration 501/1500... Est. remaining: 5m 11sbest_combination: {'lookbacks': [128, 156, 158], 'score': np.float64(1.015605712298449), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 7sRunning iteration 521/1500... Est. remaining: 5m 4sRunning iteration 531/1500... Est. remaining: 5m 1sRunning iteration 541/1500... Est. remaining: 4m 58sRunning iteration 551/1500... Est. remaining: 4m 55sRunning iteration 561/1500... Est. remaining: 4m 51sRunning iteration 571/1500... Est. remaining: 4m 48sRunning iteration 581/1500... Est. remaining: 4m 45sRunning iteration 591/1500... Est. remaining: 4m 42sRunning iteration 601/1500... Est. remaining: 4m 39sbest_combination: {'lookbacks': [128, 156, 158], 'score': np.float64(1.015605712298449), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 36sRunning iteration 621/1500... Est. remaining: 4m 32sRunning iteration 631/1500... Est. remaining: 4m 29sRunning iteration 641/1500... Est. remaining: 4m 26sRunning iteration 651/1500... Est. remaining: 4m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,413,272,446
Annual Return: 40.80%
Sharpe Ratio: 1.45407
Sortino Ratio: 1.358
Max Drawdown: -34.7%
Avg Drawdown: -9.7%
Normalized Score: 1.077
Lookback periods: [50, 51, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,778,317,395
Annual Return: 41.74%
Sharpe Ratio: 1.51109
Sortino Ratio: 1.412
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.409
Lookback periods: [50, 50, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 4m 22sRunning iteration 671/1500... Est. remaining: 4m 18sRunning iteration 681/1500... Est. remaining: 4m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,686,695,618
Annual Return: 43.43%
Sharpe Ratio: 1.55041
Sortino Ratio: 1.458
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.526
Lookback periods: [50, 54, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 4m 13sRunning iteration 701/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [50, 54, 88], 'score': np.float64(1.5258694338790222), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.787
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 4m 4sRunning iteration 731/1500... Est. remaining: 4m 1sRunning iteration 741/1500... Est. remaining: 3m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.089
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 3m 55sRunning iteration 761/1500... Est. remaining: 3m 52sRunning iteration 771/1500... Est. remaining: 3m 48sRunning iteration 781/1500... Est. remaining: 3m 45sRunning iteration 791/1500... Est. remaining: 3m 42sRunning iteration 801/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0885703979510737), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 32sRunning iteration 831/1500... Est. remaining: 3m 29sRunning iteration 841/1500... Est. remaining: 3m 26sRunning iteration 851/1500... Est. remaining: 3m 23sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 13sRunning iteration 891/1500... Est. remaining: 3m 10sRunning iteration 901/1500... Est. remaining: 3m 7sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0885703979510737), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 3sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 57sRunning iteration 941/1500... Est. remaining: 2m 54sRunning iteration 951/1500... Est. remaining: 2m 51sRunning iteration 961/1500... Est. remaining: 2m 48sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0885703979510737), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 29sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0885703979510737), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0885703979510737), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.142
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1421799067498073), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1421799067498073), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 2.14
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1421799067498073), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 2.1422)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 15:05:16 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $317,963,787
Annual Return: 34.87%
Sharpe Ratio: 1.19494
Sortino Ratio: 1.120
Max Drawdown: -64.5%
Avg Drawdown: -14.2%
Normalized Score: -1.626
Lookback periods: [66, 152, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $645,840,049
Annual Return: 37.65%
Sharpe Ratio: 1.28231
Sortino Ratio: 1.201
Max Drawdown: -57.1%
Avg Drawdown: -14.0%
Normalized Score: -1.033
Lookback periods: [63, 124, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,875,394,819
Annual Return: 46.71%
Sharpe Ratio: 1.52497
Sortino Ratio: 1.492
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.307
Lookback periods: [158, 170, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 16m 6sRunning iteration 21/1500... Est. remaining: 11m 15sRunning iteration 31/1500... Est. remaining: 9m 33sRunning iteration 41/1500... Est. remaining: 8m 51sRunning iteration 51/1500... Est. remaining: 8m 30sRunning iteration 61/1500... Est. remaining: 8m 15sRunning iteration 71/1500... Est. remaining: 8m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,951,831,076
Annual Return: 46.76%
Sharpe Ratio: 1.55869
Sortino Ratio: 1.513
Max Drawdown: -56.9%
Avg Drawdown: -11.2%
Normalized Score: 0.422
Lookback periods: [129, 146, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 8m 7sRunning iteration 91/1500... Est. remaining: 7m 59sRunning iteration 101/1500... Est. remaining: 7m 50sbest_combination: {'lookbacks': [129, 146, 156], 'score': np.float64(0.42167289957527465), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 44sRunning iteration 121/1500... Est. remaining: 7m 37sRunning iteration 131/1500... Est. remaining: 7m 31sRunning iteration 141/1500... Est. remaining: 7m 26sRunning iteration 151/1500... Est. remaining: 7m 21sRunning iteration 161/1500... Est. remaining: 7m 16sRunning iteration 171/1500... Est. remaining: 7m 11sRunning iteration 181/1500... Est. remaining: 7m 6sRunning iteration 191/1500... Est. remaining: 7m 2sRunning iteration 201/1500... Est. remaining: 6m 58sbest_combination: {'lookbacks': [129, 146, 156], 'score': np.float64(0.42167289957527465), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 54sRunning iteration 221/1500... Est. remaining: 6m 50sRunning iteration 231/1500... Est. remaining: 6m 46sRunning iteration 241/1500... Est. remaining: 6m 42sRunning iteration 251/1500... Est. remaining: 6m 38sRunning iteration 261/1500... Est. remaining: 6m 34sRunning iteration 271/1500... Est. remaining: 6m 31sRunning iteration 281/1500... Est. remaining: 6m 27sRunning iteration 291/1500... Est. remaining: 6m 23sRunning iteration 301/1500... Est. remaining: 6m 19sbest_combination: {'lookbacks': [129, 146, 156], 'score': np.float64(0.42167289957527465), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 16sRunning iteration 321/1500... Est. remaining: 6m 12sRunning iteration 331/1500... Est. remaining: 6m 9sRunning iteration 341/1500... Est. remaining: 6m 5sRunning iteration 351/1500... Est. remaining: 6m 2sRunning iteration 361/1500... Est. remaining: 5m 58sRunning iteration 371/1500... Est. remaining: 5m 55sRunning iteration 381/1500... Est. remaining: 5m 51sRunning iteration 391/1500... Est. remaining: 5m 48sRunning iteration 401/1500... Est. remaining: 5m 44sbest_combination: {'lookbacks': [129, 146, 156], 'score': np.float64(0.42167289957527465), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 41sRunning iteration 421/1500... Est. remaining: 5m 37sRunning iteration 431/1500... Est. remaining: 5m 34sRunning iteration 441/1500... Est. remaining: 5m 31sRunning iteration 451/1500... Est. remaining: 5m 27sRunning iteration 461/1500... Est. remaining: 5m 24sRunning iteration 471/1500... Est. remaining: 5m 21sRunning iteration 481/1500... Est. remaining: 5m 17sRunning iteration 491/1500... Est. remaining: 5m 14sRunning iteration 501/1500... Est. remaining: 5m 11sbest_combination: {'lookbacks': [129, 146, 156], 'score': np.float64(0.42167289957527465), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 8sRunning iteration 521/1500... Est. remaining: 5m 4sRunning iteration 531/1500... Est. remaining: 5m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,847,315,349
Annual Return: 48.45%
Sharpe Ratio: 1.58621
Sortino Ratio: 1.547
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.579
Lookback periods: [139, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 4m 59sRunning iteration 551/1500... Est. remaining: 4m 56sRunning iteration 561/1500... Est. remaining: 4m 53sRunning iteration 571/1500... Est. remaining: 4m 50sRunning iteration 581/1500... Est. remaining: 4m 46sRunning iteration 591/1500... Est. remaining: 4m 43sRunning iteration 601/1500... Est. remaining: 4m 40sbest_combination: {'lookbacks': [139, 155, 156], 'score': np.float64(0.5790740958411729), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 37sRunning iteration 621/1500... Est. remaining: 4m 33sRunning iteration 631/1500... Est. remaining: 4m 30sRunning iteration 641/1500... Est. remaining: 4m 27sRunning iteration 651/1500... Est. remaining: 4m 24sRunning iteration 661/1500... Est. remaining: 4m 21sRunning iteration 671/1500... Est. remaining: 4m 17sRunning iteration 681/1500... Est. remaining: 4m 14sRunning iteration 691/1500... Est. remaining: 4m 11sRunning iteration 701/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [139, 155, 156], 'score': np.float64(0.5790740958411729), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 5sRunning iteration 721/1500... Est. remaining: 4m 2sRunning iteration 731/1500... Est. remaining: 3m 58sRunning iteration 741/1500... Est. remaining: 3m 55sRunning iteration 751/1500... Est. remaining: 3m 52sRunning iteration 761/1500... Est. remaining: 3m 49sRunning iteration 771/1500... Est. remaining: 3m 46sRunning iteration 781/1500... Est. remaining: 3m 43sRunning iteration 791/1500... Est. remaining: 3m 40sRunning iteration 801/1500... Est. remaining: 3m 36sbest_combination: {'lookbacks': [139, 155, 156], 'score': np.float64(0.5790740958411729), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 33sRunning iteration 821/1500... Est. remaining: 3m 30sRunning iteration 831/1500... Est. remaining: 3m 27sRunning iteration 841/1500... Est. remaining: 3m 24sRunning iteration 851/1500... Est. remaining: 3m 21sRunning iteration 861/1500... Est. remaining: 3m 18sRunning iteration 871/1500... Est. remaining: 3m 14sRunning iteration 881/1500... Est. remaining: 3m 11sRunning iteration 891/1500... Est. remaining: 3m 8sRunning iteration 901/1500... Est. remaining: 3m 5sbest_combination: {'lookbacks': [139, 155, 156], 'score': np.float64(0.5790740958411729), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 2sRunning iteration 921/1500... Est. remaining: 2m 59sRunning iteration 931/1500... Est. remaining: 2m 56sRunning iteration 941/1500... Est. remaining: 2m 53sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 46sRunning iteration 971/1500... Est. remaining: 2m 43sRunning iteration 981/1500... Est. remaining: 2m 40sRunning iteration 991/1500... Est. remaining: 2m 37sRunning iteration 1001/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [139, 155, 156], 'score': np.float64(0.5790740958411729), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 31sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 15sRunning iteration 1071/1500... Est. remaining: 2m 12sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [139, 155, 156], 'score': np.float64(0.5790740958411729), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [139, 155, 156], 'score': np.float64(0.5790740958411729), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [139, 155, 156], 'score': np.float64(0.5790740958411729), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [139, 155, 156], 'score': np.float64(0.5790740958411729), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 0.58
best_combination: {'lookbacks': [139, 155, 156], 'score': np.float64(0.5790740958411729), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 155, 156] (score: 0.5791)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 155, 156] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 111 selections (26.7%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,847,315,349.28
Average Annualized Gain: 48.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 140m 51s
End time: Mon Aug 25 15:12:54 EDT 2025
Average time per successful run: 9m 23s
==============================================================
✓ All runs completed successfully!
