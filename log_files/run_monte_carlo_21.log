Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Mon Aug 25 15:42:54 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Mon Aug 25 15:42:54 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,243,946,855
Annual Return: 42.69%
Sharpe Ratio: 1.39505
Sortino Ratio: 1.348
Max Drawdown: -68.9%
Avg Drawdown: -12.9%
Normalized Score: -0.811
Lookback periods: [126, 184, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,230,658,895
Annual Return: 44.20%
Sharpe Ratio: 1.46325
Sortino Ratio: 1.413
Max Drawdown: -62.3%
Avg Drawdown: -12.8%
Normalized Score: -0.337
Lookback periods: [139, 141, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,418,247,495
Annual Return: 40.81%
Sharpe Ratio: 1.40749
Sortino Ratio: 1.330
Max Drawdown: -52.3%
Avg Drawdown: -11.3%
Normalized Score: -0.168
Lookback periods: [90, 95, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 14m 11sRunning iteration 21/1500... Est. remaining: 10m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $863,564,512
Annual Return: 38.81%
Sharpe Ratio: 1.36140
Sortino Ratio: 1.263
Max Drawdown: -41.9%
Avg Drawdown: -10.1%
Normalized Score: 0.092
Lookback periods: [50, 51, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 9m 29sRunning iteration 41/1500... Est. remaining: 8m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,375,073,544
Annual Return: 47.67%
Sharpe Ratio: 1.56440
Sortino Ratio: 1.533
Max Drawdown: -61.3%
Avg Drawdown: -11.4%
Normalized Score: 0.319
Lookback periods: [152, 159, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 8m 26sRunning iteration 61/1500... Est. remaining: 8m 2sRunning iteration 71/1500... Est. remaining: 7m 47sRunning iteration 81/1500... Est. remaining: 7m 37sRunning iteration 91/1500... Est. remaining: 7m 29sRunning iteration 101/1500... Est. remaining: 7m 22sbest_combination: {'lookbacks': [152, 159, 166], 'score': np.float64(0.31856723900619893), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 15sRunning iteration 121/1500... Est. remaining: 7m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,193,256,426
Annual Return: 49.06%
Sharpe Ratio: 1.60947
Sortino Ratio: 1.569
Max Drawdown: -62.3%
Avg Drawdown: -11.9%
Normalized Score: 0.382
Lookback periods: [135, 159, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 7m 12sRunning iteration 141/1500... Est. remaining: 7m 6sRunning iteration 151/1500... Est. remaining: 7m 0sRunning iteration 161/1500... Est. remaining: 6m 55sRunning iteration 171/1500... Est. remaining: 6m 51sRunning iteration 181/1500... Est. remaining: 6m 47sRunning iteration 191/1500... Est. remaining: 6m 42sRunning iteration 201/1500... Est. remaining: 6m 38sbest_combination: {'lookbacks': [135, 159, 189], 'score': np.float64(0.38169592004988506), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 34sRunning iteration 221/1500... Est. remaining: 6m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,703,426,500
Annual Return: 43.46%
Sharpe Ratio: 1.50532
Sortino Ratio: 1.416
Max Drawdown: -52.3%
Avg Drawdown: -9.3%
Normalized Score: 0.443
Lookback periods: [50, 96, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 6m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,436,139,793
Annual Return: 40.86%
Sharpe Ratio: 1.44705
Sortino Ratio: 1.344
Max Drawdown: -36.3%
Avg Drawdown: -10.4%
Normalized Score: 0.545
Lookback periods: [51, 53, 79] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/1500... Est. remaining: 6m 30sRunning iteration 251/1500... Est. remaining: 6m 26sRunning iteration 261/1500... Est. remaining: 6m 22sRunning iteration 271/1500... Est. remaining: 6m 18sRunning iteration 281/1500... Est. remaining: 6m 14sRunning iteration 291/1500... Est. remaining: 6m 10sRunning iteration 301/1500... Est. remaining: 6m 6sbest_combination: {'lookbacks': [51, 53, 79], 'score': np.float64(0.5454376606272631), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 3sRunning iteration 321/1500... Est. remaining: 5m 59sRunning iteration 331/1500... Est. remaining: 5m 55sRunning iteration 341/1500... Est. remaining: 5m 52sRunning iteration 351/1500... Est. remaining: 5m 49sRunning iteration 361/1500... Est. remaining: 5m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,760,746,011
Annual Return: 41.69%
Sharpe Ratio: 1.50070
Sortino Ratio: 1.405
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 0.929
Lookback periods: [50, 53, 93] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 371/1500... Est. remaining: 5m 44sRunning iteration 381/1500... Est. remaining: 5m 41sRunning iteration 391/1500... Est. remaining: 5m 37sRunning iteration 401/1500... Est. remaining: 5m 34sbest_combination: {'lookbacks': [50, 53, 93], 'score': np.float64(0.9289113657869056), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 30sRunning iteration 421/1500... Est. remaining: 5m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,179,851,876
Annual Return: 42.57%
Sharpe Ratio: 1.50350
Sortino Ratio: 1.422
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.151
Lookback periods: [50, 50, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 5m 25sRunning iteration 441/1500... Est. remaining: 5m 22sRunning iteration 451/1500... Est. remaining: 5m 18sRunning iteration 461/1500... Est. remaining: 5m 15sRunning iteration 471/1500... Est. remaining: 5m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,532,770,341
Annual Return: 43.19%
Sharpe Ratio: 1.55944
Sortino Ratio: 1.461
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.250
Lookback periods: [50, 51, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 5m 10sRunning iteration 491/1500... Est. remaining: 5m 6sRunning iteration 501/1500... Est. remaining: 5m 3sbest_combination: {'lookbacks': [50, 51, 99], 'score': np.float64(1.2503169779509375), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 0sRunning iteration 521/1500... Est. remaining: 4m 56sRunning iteration 531/1500... Est. remaining: 4m 53sRunning iteration 541/1500... Est. remaining: 4m 50sRunning iteration 551/1500... Est. remaining: 4m 47sRunning iteration 561/1500... Est. remaining: 4m 43sRunning iteration 571/1500... Est. remaining: 4m 40sRunning iteration 581/1500... Est. remaining: 4m 37sRunning iteration 591/1500... Est. remaining: 4m 34sRunning iteration 601/1500... Est. remaining: 4m 30sbest_combination: {'lookbacks': [50, 51, 99], 'score': np.float64(1.2503169779509375), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 27sRunning iteration 621/1500... Est. remaining: 4m 24sRunning iteration 631/1500... Est. remaining: 4m 21sRunning iteration 641/1500... Est. remaining: 4m 18sRunning iteration 651/1500... Est. remaining: 4m 15sRunning iteration 661/1500... Est. remaining: 4m 11sRunning iteration 671/1500... Est. remaining: 4m 8sRunning iteration 681/1500... Est. remaining: 4m 5sRunning iteration 691/1500... Est. remaining: 4m 2sRunning iteration 701/1500... Est. remaining: 3m 59sbest_combination: {'lookbacks': [50, 51, 99], 'score': np.float64(1.2503169779509375), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,833,624,762
Annual Return: 43.65%
Sharpe Ratio: 1.57405
Sortino Ratio: 1.478
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.379
Lookback periods: [50, 50, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.524
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 711/1500... Est. remaining: 3m 57sRunning iteration 721/1500... Est. remaining: 3m 54sRunning iteration 731/1500... Est. remaining: 3m 51sRunning iteration 741/1500... Est. remaining: 3m 48sRunning iteration 751/1500... Est. remaining: 3m 45sRunning iteration 761/1500... Est. remaining: 3m 42sRunning iteration 771/1500... Est. remaining: 3m 38sRunning iteration 781/1500... Est. remaining: 3m 35sRunning iteration 791/1500... Est. remaining: 3m 32sRunning iteration 801/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.5238191691148604), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 26sRunning iteration 821/1500... Est. remaining: 3m 23sRunning iteration 831/1500... Est. remaining: 3m 20sRunning iteration 841/1500... Est. remaining: 3m 17sRunning iteration 851/1500... Est. remaining: 3m 14sRunning iteration 861/1500... Est. remaining: 3m 11sRunning iteration 871/1500... Est. remaining: 3m 8sRunning iteration 881/1500... Est. remaining: 3m 5sRunning iteration 891/1500... Est. remaining: 3m 2sRunning iteration 901/1500... Est. remaining: 2m 59sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.5238191691148604), 'visits': 1}
Running iteration 911/1500... Est. remaining: 2m 56sRunning iteration 921/1500... Est. remaining: 2m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.682
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 2m 50sRunning iteration 941/1500... Est. remaining: 2m 47sRunning iteration 951/1500... Est. remaining: 2m 44sRunning iteration 961/1500... Est. remaining: 2m 41sRunning iteration 971/1500... Est. remaining: 2m 38sRunning iteration 981/1500... Est. remaining: 2m 35sRunning iteration 991/1500... Est. remaining: 2m 32sRunning iteration 1001/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6820972258477602), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 26sRunning iteration 1021/1500... Est. remaining: 2m 23sRunning iteration 1031/1500... Est. remaining: 2m 20sRunning iteration 1041/1500... Est. remaining: 2m 17sRunning iteration 1051/1500... Est. remaining: 2m 14sRunning iteration 1061/1500... Est. remaining: 2m 11sRunning iteration 1071/1500... Est. remaining: 2m 8sRunning iteration 1081/1500... Est. remaining: 2m 5sRunning iteration 1091/1500... Est. remaining: 2m 2sRunning iteration 1101/1500... Est. remaining: 1m 59sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6820972258477602), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 56sRunning iteration 1121/1500... Est. remaining: 1m 53sRunning iteration 1131/1500... Est. remaining: 1m 50sRunning iteration 1141/1500... Est. remaining: 1m 47sRunning iteration 1151/1500... Est. remaining: 1m 44sRunning iteration 1161/1500... Est. remaining: 1m 41sRunning iteration 1171/1500... Est. remaining: 1m 38sRunning iteration 1181/1500... Est. remaining: 1m 35sRunning iteration 1191/1500... Est. remaining: 1m 32sRunning iteration 1201/1500... Est. remaining: 1m 29sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6820972258477602), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 26sRunning iteration 1221/1500... Est. remaining: 1m 23sRunning iteration 1231/1500... Est. remaining: 1m 20sRunning iteration 1241/1500... Est. remaining: 1m 17sRunning iteration 1251/1500... Est. remaining: 1m 14sRunning iteration 1261/1500... Est. remaining: 1m 11sRunning iteration 1271/1500... Est. remaining: 1m 8sRunning iteration 1281/1500... Est. remaining: 1m 5sRunning iteration 1291/1500... Est. remaining: 1m 2sRunning iteration 1301/1500... Est. remaining: 0m 59sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6820972258477602), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 56sRunning iteration 1321/1500... Est. remaining: 0m 53sRunning iteration 1331/1500... Est. remaining: 0m 50sRunning iteration 1341/1500... Est. remaining: 0m 47sRunning iteration 1351/1500... Est. remaining: 0m 44sRunning iteration 1361/1500... Est. remaining: 0m 41sRunning iteration 1371/1500... Est. remaining: 0m 38sRunning iteration 1381/1500... Est. remaining: 0m 35sRunning iteration 1391/1500... Est. remaining: 0m 32sRunning iteration 1401/1500... Est. remaining: 0m 29sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6820972258477602), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 26sRunning iteration 1421/1500... Est. remaining: 0m 23sRunning iteration 1431/1500... Est. remaining: 0m 20sRunning iteration 1441/1500... Est. remaining: 0m 17sRunning iteration 1451/1500... Est. remaining: 0m 14sRunning iteration 1461/1500... Est. remaining: 0m 11sRunning iteration 1471/1500... Est. remaining: 0m 8sRunning iteration 1481/1500... Est. remaining: 0m 5sRunning iteration 1491/1500... Est. remaining: 0m 2s
Monte Carlo simulation completed in 7.5 minutes
Best normalized score: 1.68
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6820972258477602), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.6821)

Monte Carlo simulation completed in 7.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Mon Aug 25 15:50:29 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,075,123,889
Annual Return: 39.69%
Sharpe Ratio: 1.32368
Sortino Ratio: 1.270
Max Drawdown: -64.8%
Avg Drawdown: -14.0%
Normalized Score: -0.812
Lookback periods: [112, 131, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,103,076,603
Annual Return: 42.42%
Sharpe Ratio: 1.44219
Sortino Ratio: 1.369
Max Drawdown: -55.0%
Avg Drawdown: -11.9%
Normalized Score: 0.123
Lookback periods: [87, 109, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 15m 20sRunning iteration 21/1500... Est. remaining: 10m 47sRunning iteration 31/1500... Est. remaining: 9m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,420,852,366
Annual Return: 45.51%
Sharpe Ratio: 1.48400
Sortino Ratio: 1.452
Max Drawdown: -61.4%
Avg Drawdown: -12.1%
Normalized Score: 0.248
Lookback periods: [152, 168, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,499,869,604
Annual Return: 47.14%
Sharpe Ratio: 1.52451
Sortino Ratio: 1.492
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: 0.533
Lookback periods: [171, 178, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 9m 18sRunning iteration 51/1500... Est. remaining: 8m 42sRunning iteration 61/1500... Est. remaining: 8m 16sRunning iteration 71/1500... Est. remaining: 8m 2sRunning iteration 81/1500... Est. remaining: 7m 50sRunning iteration 91/1500... Est. remaining: 7m 42sRunning iteration 101/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [171, 178, 184], 'score': np.float64(0.5330158714753784), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 30sRunning iteration 121/1500... Est. remaining: 7m 24sRunning iteration 131/1500... Est. remaining: 7m 19sRunning iteration 141/1500... Est. remaining: 7m 14sRunning iteration 151/1500... Est. remaining: 7m 10sRunning iteration 161/1500... Est. remaining: 7m 5sRunning iteration 171/1500... Est. remaining: 7m 0sRunning iteration 181/1500... Est. remaining: 6m 56sRunning iteration 191/1500... Est. remaining: 6m 51sRunning iteration 201/1500... Est. remaining: 6m 47sbest_combination: {'lookbacks': [171, 178, 184], 'score': np.float64(0.5330158714753784), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 43sRunning iteration 221/1500... Est. remaining: 6m 40sRunning iteration 231/1500... Est. remaining: 6m 36sRunning iteration 241/1500... Est. remaining: 6m 33sRunning iteration 251/1500... Est. remaining: 6m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,050,234,639
Annual Return: 47.48%
Sharpe Ratio: 1.55955
Sortino Ratio: 1.516
Max Drawdown: -59.3%
Avg Drawdown: -12.0%
Normalized Score: 0.611
Lookback periods: [146, 152, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 6m 29sRunning iteration 271/1500... Est. remaining: 6m 26sRunning iteration 281/1500... Est. remaining: 6m 22sRunning iteration 291/1500... Est. remaining: 6m 19sRunning iteration 301/1500... Est. remaining: 6m 15sbest_combination: {'lookbacks': [146, 152, 169], 'score': np.float64(0.6113729783811234), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 12sRunning iteration 321/1500... Est. remaining: 6m 8sRunning iteration 331/1500... Est. remaining: 6m 4sRunning iteration 341/1500... Est. remaining: 6m 1sRunning iteration 351/1500... Est. remaining: 5m 58sRunning iteration 361/1500... Est. remaining: 5m 54sRunning iteration 371/1500... Est. remaining: 5m 51sRunning iteration 381/1500... Est. remaining: 5m 48sRunning iteration 391/1500... Est. remaining: 5m 44sRunning iteration 401/1500... Est. remaining: 5m 41sbest_combination: {'lookbacks': [146, 152, 169], 'score': np.float64(0.6113729783811234), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 38sRunning iteration 421/1500... Est. remaining: 5m 34sRunning iteration 431/1500... Est. remaining: 5m 31sRunning iteration 441/1500... Est. remaining: 5m 28sRunning iteration 451/1500... Est. remaining: 5m 24sRunning iteration 461/1500... Est. remaining: 5m 21sRunning iteration 471/1500... Est. remaining: 5m 18sRunning iteration 481/1500... Est. remaining: 5m 15sRunning iteration 491/1500... Est. remaining: 5m 12sRunning iteration 501/1500... Est. remaining: 5m 9sbest_combination: {'lookbacks': [146, 152, 169], 'score': np.float64(0.6113729783811234), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 6sRunning iteration 521/1500... Est. remaining: 5m 3sRunning iteration 531/1500... Est. remaining: 4m 59sRunning iteration 541/1500... Est. remaining: 4m 56sRunning iteration 551/1500... Est. remaining: 4m 53sRunning iteration 561/1500... Est. remaining: 4m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,822,922,508
Annual Return: 47.92%
Sharpe Ratio: 1.55726
Sortino Ratio: 1.527
Max Drawdown: -58.5%
Avg Drawdown: -12.0%
Normalized Score: 0.672
Lookback periods: [152, 154, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 4m 48sRunning iteration 581/1500... Est. remaining: 4m 45sRunning iteration 591/1500... Est. remaining: 4m 41sRunning iteration 601/1500... Est. remaining: 4m 38sbest_combination: {'lookbacks': [152, 154, 166], 'score': np.float64(0.6721077939590697), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 35sRunning iteration 621/1500... Est. remaining: 4m 32sRunning iteration 631/1500... Est. remaining: 4m 29sRunning iteration 641/1500... Est. remaining: 4m 26sRunning iteration 651/1500... Est. remaining: 4m 23sRunning iteration 661/1500... Est. remaining: 4m 19sRunning iteration 671/1500... Est. remaining: 4m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,389,202,382
Annual Return: 47.06%
Sharpe Ratio: 1.55777
Sortino Ratio: 1.509
Max Drawdown: -55.0%
Avg Drawdown: -11.1%
Normalized Score: 0.790
Lookback periods: [141, 157, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 4m 14sRunning iteration 691/1500... Est. remaining: 4m 11sRunning iteration 701/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [141, 157, 178], 'score': np.float64(0.7903310685426597), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 5sRunning iteration 721/1500... Est. remaining: 4m 2sRunning iteration 731/1500... Est. remaining: 3m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,303,576,757
Annual Return: 49.10%
Sharpe Ratio: 1.58006
Sortino Ratio: 1.541
Max Drawdown: -60.7%
Avg Drawdown: -11.3%
Normalized Score: 0.793
Lookback periods: [183, 184, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 3m 56sRunning iteration 751/1500... Est. remaining: 3m 53sRunning iteration 761/1500... Est. remaining: 3m 50sRunning iteration 771/1500... Est. remaining: 3m 46sRunning iteration 781/1500... Est. remaining: 3m 43sRunning iteration 791/1500... Est. remaining: 3m 40sRunning iteration 801/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [183, 184, 188], 'score': np.float64(0.7925334424211676), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 34sRunning iteration 821/1500... Est. remaining: 3m 31sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,528,882,800
Annual Return: 41.12%
Sharpe Ratio: 1.48183
Sortino Ratio: 1.385
Max Drawdown: -37.2%
Avg Drawdown: -9.5%
Normalized Score: 0.898
Lookback periods: [50, 51, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,757,258,274
Annual Return: 41.69%
Sharpe Ratio: 1.49806
Sortino Ratio: 1.398
Max Drawdown: -35.6%
Avg Drawdown: -9.5%
Normalized Score: 1.009
Lookback periods: [50, 55, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 3m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,983,869,161
Annual Return: 42.18%
Sharpe Ratio: 1.50258
Sortino Ratio: 1.410
Max Drawdown: -35.7%
Avg Drawdown: -9.5%
Normalized Score: 1.053
Lookback periods: [50, 53, 81] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 3m 20sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,197,149,983
Annual Return: 42.60%
Sharpe Ratio: 1.52354
Sortino Ratio: 1.434
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 1.150
Lookback periods: [50, 55, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 3m 11sRunning iteration 901/1500... Est. remaining: 3m 7sbest_combination: {'lookbacks': [50, 55, 80], 'score': np.float64(1.1500109361475608), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 4sRunning iteration 921/1500... Est. remaining: 3m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,606,599,028
Annual Return: 43.31%
Sharpe Ratio: 1.54845
Sortino Ratio: 1.453
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.295
Lookback periods: [50, 54, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 2m 58sRunning iteration 941/1500... Est. remaining: 2m 55sRunning iteration 951/1500... Est. remaining: 2m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,229,417,452
Annual Return: 44.20%
Sharpe Ratio: 1.57610
Sortino Ratio: 1.489
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.429
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,005,011
Annual Return: 43.90%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.553
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 961/1500... Est. remaining: 2m 50sRunning iteration 971/1500... Est. remaining: 2m 46sRunning iteration 981/1500... Est. remaining: 2m 43sRunning iteration 991/1500... Est. remaining: 2m 40sRunning iteration 1001/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.553021951123296), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 34sRunning iteration 1021/1500... Est. remaining: 2m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.657
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1031/1500... Est. remaining: 2m 27sRunning iteration 1041/1500... Est. remaining: 2m 24sRunning iteration 1051/1500... Est. remaining: 2m 21sRunning iteration 1061/1500... Est. remaining: 2m 18sRunning iteration 1071/1500... Est. remaining: 2m 15sRunning iteration 1081/1500... Est. remaining: 2m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.701
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1091/1500... Est. remaining: 2m 9sRunning iteration 1101/1500... Est. remaining: 2m 5sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7006833607404785), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 2sRunning iteration 1121/1500... Est. remaining: 1m 59sRunning iteration 1131/1500... Est. remaining: 1m 56sRunning iteration 1141/1500... Est. remaining: 1m 53sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 46sRunning iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 40sRunning iteration 1191/1500... Est. remaining: 1m 37sRunning iteration 1201/1500... Est. remaining: 1m 34sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7006833607404785), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 18sRunning iteration 1261/1500... Est. remaining: 1m 15sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7006833607404785), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.916
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1341/1500... Est. remaining: 0m 50sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.915926502626526), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 25sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 1.92
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.915926502626526), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 1.9159)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Mon Aug 25 15:58:25 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $224,820,368
Annual Return: 33.52%
Sharpe Ratio: 1.15945
Sortino Ratio: 1.074
Max Drawdown: -57.2%
Avg Drawdown: -14.0%
Normalized Score: -1.473
Lookback periods: [52, 132, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,360,774,664
Annual Return: 46.32%
Sharpe Ratio: 1.52751
Sortino Ratio: 1.482
Max Drawdown: -56.8%
Avg Drawdown: -11.5%
Normalized Score: 0.534
Lookback periods: [140, 158, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 14m 41sRunning iteration 21/1500... Est. remaining: 10m 31sRunning iteration 31/1500... Est. remaining: 9m 4sRunning iteration 41/1500... Est. remaining: 8m 19sRunning iteration 51/1500... Est. remaining: 7m 52sRunning iteration 61/1500... Est. remaining: 7m 42sRunning iteration 71/1500... Est. remaining: 7m 35sRunning iteration 81/1500... Est. remaining: 7m 33sRunning iteration 91/1500... Est. remaining: 7m 30sRunning iteration 101/1500... Est. remaining: 7m 26sbest_combination: {'lookbacks': [140, 158, 169], 'score': np.float64(0.5340311909740806), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 21sRunning iteration 121/1500... Est. remaining: 7m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,305,289,392
Annual Return: 47.01%
Sharpe Ratio: 1.56440
Sortino Ratio: 1.522
Max Drawdown: -58.5%
Avg Drawdown: -11.5%
Normalized Score: 0.626
Lookback periods: [137, 152, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 7m 20sRunning iteration 141/1500... Est. remaining: 7m 16sRunning iteration 151/1500... Est. remaining: 7m 12sRunning iteration 161/1500... Est. remaining: 7m 8sRunning iteration 171/1500... Est. remaining: 7m 5sRunning iteration 181/1500... Est. remaining: 7m 0sRunning iteration 191/1500... Est. remaining: 6m 56sRunning iteration 201/1500... Est. remaining: 6m 52sbest_combination: {'lookbacks': [137, 152, 155], 'score': np.float64(0.6262853287311048), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 48sRunning iteration 221/1500... Est. remaining: 6m 45sRunning iteration 231/1500... Est. remaining: 6m 41sRunning iteration 241/1500... Est. remaining: 6m 37sRunning iteration 251/1500... Est. remaining: 6m 34sRunning iteration 261/1500... Est. remaining: 6m 31sRunning iteration 271/1500... Est. remaining: 6m 27sRunning iteration 281/1500... Est. remaining: 6m 24sRunning iteration 291/1500... Est. remaining: 6m 20sRunning iteration 301/1500... Est. remaining: 6m 17sbest_combination: {'lookbacks': [137, 152, 155], 'score': np.float64(0.6262853287311048), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,458,775,664
Annual Return: 46.40%
Sharpe Ratio: 1.54805
Sortino Ratio: 1.508
Max Drawdown: -56.1%
Avg Drawdown: -11.4%
Normalized Score: 0.628
Lookback periods: [110, 136, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/1500... Est. remaining: 6m 13sRunning iteration 331/1500... Est. remaining: 6m 9sRunning iteration 341/1500... Est. remaining: 6m 6sRunning iteration 351/1500... Est. remaining: 6m 2sRunning iteration 361/1500... Est. remaining: 5m 58sRunning iteration 371/1500... Est. remaining: 5m 55sRunning iteration 381/1500... Est. remaining: 5m 51sRunning iteration 391/1500... Est. remaining: 5m 49sRunning iteration 401/1500... Est. remaining: 5m 46sbest_combination: {'lookbacks': [110, 136, 145], 'score': np.float64(0.6280717578279116), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 42sRunning iteration 421/1500... Est. remaining: 5m 39sRunning iteration 431/1500... Est. remaining: 5m 35sRunning iteration 441/1500... Est. remaining: 5m 32sRunning iteration 451/1500... Est. remaining: 5m 29sRunning iteration 461/1500... Est. remaining: 5m 25sRunning iteration 471/1500... Est. remaining: 5m 22sRunning iteration 481/1500... Est. remaining: 5m 19sRunning iteration 491/1500... Est. remaining: 5m 15sRunning iteration 501/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [110, 136, 145], 'score': np.float64(0.6280717578279116), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 9sRunning iteration 521/1500... Est. remaining: 5m 5sRunning iteration 531/1500... Est. remaining: 5m 2sRunning iteration 541/1500... Est. remaining: 4m 59sRunning iteration 551/1500... Est. remaining: 4m 56sRunning iteration 561/1500... Est. remaining: 4m 52sRunning iteration 571/1500... Est. remaining: 4m 49sRunning iteration 581/1500... Est. remaining: 4m 46sRunning iteration 591/1500... Est. remaining: 4m 43sRunning iteration 601/1500... Est. remaining: 4m 39sbest_combination: {'lookbacks': [110, 136, 145], 'score': np.float64(0.6280717578279116), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 36sRunning iteration 621/1500... Est. remaining: 4m 33sRunning iteration 631/1500... Est. remaining: 4m 30sRunning iteration 641/1500... Est. remaining: 4m 27sRunning iteration 651/1500... Est. remaining: 4m 23sRunning iteration 661/1500... Est. remaining: 4m 20sRunning iteration 671/1500... Est. remaining: 4m 17sRunning iteration 681/1500... Est. remaining: 4m 14sRunning iteration 691/1500... Est. remaining: 4m 11sRunning iteration 701/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [110, 136, 145], 'score': np.float64(0.6280717578279116), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 4sRunning iteration 721/1500... Est. remaining: 4m 1sRunning iteration 731/1500... Est. remaining: 3m 58sRunning iteration 741/1500... Est. remaining: 3m 55sRunning iteration 751/1500... Est. remaining: 3m 52sRunning iteration 761/1500... Est. remaining: 3m 49sRunning iteration 771/1500... Est. remaining: 3m 46sRunning iteration 781/1500... Est. remaining: 3m 42sRunning iteration 791/1500... Est. remaining: 3m 39sRunning iteration 801/1500... Est. remaining: 3m 36sbest_combination: {'lookbacks': [110, 136, 145], 'score': np.float64(0.6280717578279116), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 33sRunning iteration 821/1500... Est. remaining: 3m 30sRunning iteration 831/1500... Est. remaining: 3m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,549,167,630
Annual Return: 46.47%
Sharpe Ratio: 1.55055
Sortino Ratio: 1.511
Max Drawdown: -56.1%
Avg Drawdown: -11.4%
Normalized Score: 0.640
Lookback periods: [110, 137, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 841/1500... Est. remaining: 3m 24sRunning iteration 851/1500... Est. remaining: 3m 21sRunning iteration 861/1500... Est. remaining: 3m 18sRunning iteration 871/1500... Est. remaining: 3m 15sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 8sRunning iteration 901/1500... Est. remaining: 3m 5sbest_combination: {'lookbacks': [110, 137, 145], 'score': np.float64(0.6396047781601549), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 2sRunning iteration 921/1500... Est. remaining: 2m 59sRunning iteration 931/1500... Est. remaining: 2m 56sRunning iteration 941/1500... Est. remaining: 2m 53sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 43sRunning iteration 981/1500... Est. remaining: 2m 40sRunning iteration 991/1500... Est. remaining: 2m 37sRunning iteration 1001/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [110, 137, 145], 'score': np.float64(0.6396047781601549), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 31sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,097,776,607
Annual Return: 48.57%
Sharpe Ratio: 1.56925
Sortino Ratio: 1.536
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.731
Lookback periods: [175, 188, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [175, 188, 198], 'score': np.float64(0.7310861068062842), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,429,506,015
Annual Return: 48.72%
Sharpe Ratio: 1.57973
Sortino Ratio: 1.540
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.737
Lookback periods: [178, 178, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [178, 178, 184], 'score': np.float64(0.7371056676775722), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,627,817,354
Annual Return: 49.24%
Sharpe Ratio: 1.59350
Sortino Ratio: 1.556
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.829
Lookback periods: [180, 188, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [180, 188, 197], 'score': np.float64(0.8290594334933337), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,353,200,894
Annual Return: 49.52%
Sharpe Ratio: 1.59801
Sortino Ratio: 1.553
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.847
Lookback periods: [181, 189, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [181, 189, 190], 'score': np.float64(0.846972074487535), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 0.85
best_combination: {'lookbacks': [181, 189, 190], 'score': np.float64(0.846972074487535), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [181, 189, 190] (score: 0.8470)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [181, 189, 190] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 123 selections (29.6%)
2. sp500_hma: 100 selections (24.0%)
3. naz100_pine: 82 selections (19.7%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 40 selections (9.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,353,200,893.58
Average Annualized Gain: 49.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Mon Aug 25 16:06:18 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,586,809,643
Annual Return: 41.27%
Sharpe Ratio: 1.38691
Sortino Ratio: 1.325
Max Drawdown: -63.9%
Avg Drawdown: -13.7%
Normalized Score: -0.923
Lookback periods: [108, 128, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $797,971,243
Annual Return: 38.50%
Sharpe Ratio: 1.34841
Sortino Ratio: 1.267
Max Drawdown: -52.3%
Avg Drawdown: -12.1%
Normalized Score: -0.565
Lookback periods: [91, 92, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,299,488,464
Annual Return: 40.46%
Sharpe Ratio: 1.37141
Sortino Ratio: 1.302
Max Drawdown: -52.3%
Avg Drawdown: -11.5%
Normalized Score: -0.259
Lookback periods: [80, 117, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 18m 30sRunning iteration 21/1500... Est. remaining: 12m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,873,680,461
Annual Return: 44.95%
Sharpe Ratio: 1.46301
Sortino Ratio: 1.424
Max Drawdown: -60.6%
Avg Drawdown: -11.7%
Normalized Score: 0.020
Lookback periods: [156, 188, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 11m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,291,981,438
Annual Return: 46.27%
Sharpe Ratio: 1.49911
Sortino Ratio: 1.457
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.278
Lookback periods: [177, 194, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 10m 17sRunning iteration 51/1500... Est. remaining: 9m 33sRunning iteration 61/1500... Est. remaining: 9m 12sRunning iteration 71/1500... Est. remaining: 8m 55sRunning iteration 81/1500... Est. remaining: 8m 40sRunning iteration 91/1500... Est. remaining: 8m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,615,479,292
Annual Return: 48.34%
Sharpe Ratio: 1.56208
Sortino Ratio: 1.526
Max Drawdown: -59.0%
Avg Drawdown: -12.2%
Normalized Score: 0.468
Lookback periods: [181, 184, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 8m 29sbest_combination: {'lookbacks': [181, 184, 187], 'score': np.float64(0.46782447496035706), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 19sRunning iteration 121/1500... Est. remaining: 8m 9sRunning iteration 131/1500... Est. remaining: 8m 0sRunning iteration 141/1500... Est. remaining: 7m 52sRunning iteration 151/1500... Est. remaining: 7m 45sRunning iteration 161/1500... Est. remaining: 7m 39sRunning iteration 171/1500... Est. remaining: 7m 32sRunning iteration 181/1500... Est. remaining: 7m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,913,602,098
Annual Return: 47.40%
Sharpe Ratio: 1.54370
Sortino Ratio: 1.498
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.590
Lookback periods: [156, 159, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 7m 26sRunning iteration 201/1500... Est. remaining: 7m 20sbest_combination: {'lookbacks': [156, 159, 194], 'score': np.float64(0.5902586732738417), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 15sRunning iteration 221/1500... Est. remaining: 7m 10sRunning iteration 231/1500... Est. remaining: 7m 5sRunning iteration 241/1500... Est. remaining: 7m 0sRunning iteration 251/1500... Est. remaining: 6m 55sRunning iteration 261/1500... Est. remaining: 6m 51sRunning iteration 271/1500... Est. remaining: 6m 46sRunning iteration 281/1500... Est. remaining: 6m 42sRunning iteration 291/1500... Est. remaining: 6m 37sRunning iteration 301/1500... Est. remaining: 6m 33sbest_combination: {'lookbacks': [156, 159, 194], 'score': np.float64(0.5902586732738417), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 29sRunning iteration 321/1500... Est. remaining: 6m 25sRunning iteration 331/1500... Est. remaining: 6m 21sRunning iteration 341/1500... Est. remaining: 6m 17sRunning iteration 351/1500... Est. remaining: 6m 13sRunning iteration 361/1500... Est. remaining: 6m 9sRunning iteration 371/1500... Est. remaining: 6m 5sRunning iteration 381/1500... Est. remaining: 6m 2sRunning iteration 391/1500... Est. remaining: 5m 58sRunning iteration 401/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [156, 159, 194], 'score': np.float64(0.5902586732738417), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 51sRunning iteration 421/1500... Est. remaining: 5m 47sRunning iteration 431/1500... Est. remaining: 5m 43sRunning iteration 441/1500... Est. remaining: 5m 40sRunning iteration 451/1500... Est. remaining: 5m 36sRunning iteration 461/1500... Est. remaining: 5m 33sRunning iteration 471/1500... Est. remaining: 5m 29sRunning iteration 481/1500... Est. remaining: 5m 26sRunning iteration 491/1500... Est. remaining: 5m 22sRunning iteration 501/1500... Est. remaining: 5m 19sbest_combination: {'lookbacks': [156, 159, 194], 'score': np.float64(0.5902586732738417), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 15sRunning iteration 521/1500... Est. remaining: 5m 12sRunning iteration 531/1500... Est. remaining: 5m 9sRunning iteration 541/1500... Est. remaining: 5m 5sRunning iteration 551/1500... Est. remaining: 5m 2sRunning iteration 561/1500... Est. remaining: 4m 58sRunning iteration 571/1500... Est. remaining: 4m 55sRunning iteration 581/1500... Est. remaining: 4m 52sRunning iteration 591/1500... Est. remaining: 4m 48sRunning iteration 601/1500... Est. remaining: 4m 45sbest_combination: {'lookbacks': [156, 159, 194], 'score': np.float64(0.5902586732738417), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 42sRunning iteration 621/1500... Est. remaining: 4m 38sRunning iteration 631/1500... Est. remaining: 4m 35sRunning iteration 641/1500... Est. remaining: 4m 32sRunning iteration 651/1500... Est. remaining: 4m 28sRunning iteration 661/1500... Est. remaining: 4m 25sRunning iteration 671/1500... Est. remaining: 4m 22sRunning iteration 681/1500... Est. remaining: 4m 18sRunning iteration 691/1500... Est. remaining: 4m 15sRunning iteration 701/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [156, 159, 194], 'score': np.float64(0.5902586732738417), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 9sRunning iteration 721/1500... Est. remaining: 4m 5sRunning iteration 731/1500... Est. remaining: 4m 2sRunning iteration 741/1500... Est. remaining: 3m 59sRunning iteration 751/1500... Est. remaining: 3m 56sRunning iteration 761/1500... Est. remaining: 3m 53sRunning iteration 771/1500... Est. remaining: 3m 49sRunning iteration 781/1500... Est. remaining: 3m 46sRunning iteration 791/1500... Est. remaining: 3m 43sRunning iteration 801/1500... Est. remaining: 3m 40sbest_combination: {'lookbacks': [156, 159, 194], 'score': np.float64(0.5902586732738417), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 36sRunning iteration 821/1500... Est. remaining: 3m 33sRunning iteration 831/1500... Est. remaining: 3m 30sRunning iteration 841/1500... Est. remaining: 3m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,799,675,098
Annual Return: 41.78%
Sharpe Ratio: 1.47797
Sortino Ratio: 1.391
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.138
Lookback periods: [50, 96, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 3m 24sRunning iteration 861/1500... Est. remaining: 3m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,951,545,292
Annual Return: 42.12%
Sharpe Ratio: 1.50065
Sortino Ratio: 1.406
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.246
Lookback periods: [50, 95, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 871/1500... Est. remaining: 3m 18sRunning iteration 881/1500... Est. remaining: 3m 15sRunning iteration 891/1500... Est. remaining: 3m 12sRunning iteration 901/1500... Est. remaining: 3m 9sbest_combination: {'lookbacks': [50, 95, 96], 'score': np.float64(1.246366684052569), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 5sRunning iteration 921/1500... Est. remaining: 3m 2sRunning iteration 931/1500... Est. remaining: 2m 59sRunning iteration 941/1500... Est. remaining: 2m 56sRunning iteration 951/1500... Est. remaining: 2m 52sRunning iteration 961/1500... Est. remaining: 2m 49sRunning iteration 971/1500... Est. remaining: 2m 46sRunning iteration 981/1500... Est. remaining: 2m 43sRunning iteration 991/1500... Est. remaining: 2m 40sRunning iteration 1001/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [50, 95, 96], 'score': np.float64(1.246366684052569), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,050,212,044
Annual Return: 42.32%
Sharpe Ratio: 1.50072
Sortino Ratio: 1.413
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.299
Lookback periods: [50, 97, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 2m 34sRunning iteration 1021/1500... Est. remaining: 2m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,180,697,390
Annual Return: 42.57%
Sharpe Ratio: 1.50063
Sortino Ratio: 1.415
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.312
Lookback periods: [50, 96, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1031/1500... Est. remaining: 2m 28sRunning iteration 1041/1500... Est. remaining: 2m 24sRunning iteration 1051/1500... Est. remaining: 2m 21sRunning iteration 1061/1500... Est. remaining: 2m 18sRunning iteration 1071/1500... Est. remaining: 2m 15sRunning iteration 1081/1500... Est. remaining: 2m 12sRunning iteration 1091/1500... Est. remaining: 2m 9sRunning iteration 1101/1500... Est. remaining: 2m 5sbest_combination: {'lookbacks': [50, 96, 98], 'score': np.float64(1.312011943114761), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,684,482,987
Annual Return: 43.43%
Sharpe Ratio: 1.53307
Sortino Ratio: 1.444
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.443
Lookback periods: [50, 97, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1121/1500... Est. remaining: 1m 59sRunning iteration 1131/1500... Est. remaining: 1m 56sRunning iteration 1141/1500... Est. remaining: 1m 53sRunning iteration 1151/1500... Est. remaining: 1m 50sRunning iteration 1161/1500... Est. remaining: 1m 46sRunning iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 40sRunning iteration 1191/1500... Est. remaining: 1m 37sRunning iteration 1201/1500... Est. remaining: 1m 34sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.4431858818879157), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 31sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 18sRunning iteration 1261/1500... Est. remaining: 1m 15sRunning iteration 1271/1500... Est. remaining: 1m 12sRunning iteration 1281/1500... Est. remaining: 1m 9sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.4431858818879157), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 53sRunning iteration 1341/1500... Est. remaining: 0m 50sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.4431858818879157), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 25sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 1.44
best_combination: {'lookbacks': [50, 97, 98], 'score': np.float64(1.4431858818879157), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 97, 98] (score: 1.4432)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 97, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 122 selections (29.3%)
2. naz100_hma: 96 selections (23.1%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 67 selections (16.1%)
5. cash: 52 selections (12.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $2,684,482,987.25
Average Annualized Gain: 43.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Mon Aug 25 16:14:14 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $537,381,641
Annual Return: 36.92%
Sharpe Ratio: 1.25373
Sortino Ratio: 1.179
Max Drawdown: -68.2%
Avg Drawdown: -14.1%
Normalized Score: -1.680
Lookback periods: [89, 141, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,291,772,382
Annual Return: 40.43%
Sharpe Ratio: 1.34819
Sortino Ratio: 1.296
Max Drawdown: -70.4%
Avg Drawdown: -14.1%
Normalized Score: -1.358
Lookback periods: [110, 142, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $469,216,152
Annual Return: 36.39%
Sharpe Ratio: 1.25881
Sortino Ratio: 1.178
Max Drawdown: -52.3%
Avg Drawdown: -12.3%
Normalized Score: -0.879
Lookback periods: [81, 117, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $628,125,922
Annual Return: 37.54%
Sharpe Ratio: 1.29354
Sortino Ratio: 1.211
Max Drawdown: -52.3%
Avg Drawdown: -11.4%
Normalized Score: -0.649
Lookback periods: [79, 112, 127] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 20m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,768,685,238
Annual Return: 43.56%
Sharpe Ratio: 1.44787
Sortino Ratio: 1.397
Max Drawdown: -58.5%
Avg Drawdown: -12.3%
Normalized Score: -0.305
Lookback periods: [137, 147, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 14m 29sRunning iteration 31/1500... Est. remaining: 11m 45sRunning iteration 41/1500... Est. remaining: 10m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,088,162,412
Annual Return: 39.74%
Sharpe Ratio: 1.38967
Sortino Ratio: 1.302
Max Drawdown: -52.1%
Avg Drawdown: -10.8%
Normalized Score: -0.245
Lookback periods: [53, 58, 86] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 9m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,182,665,003
Annual Return: 45.28%
Sharpe Ratio: 1.48265
Sortino Ratio: 1.446
Max Drawdown: -59.7%
Avg Drawdown: -11.4%
Normalized Score: -0.092
Lookback periods: [150, 162, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,490,061,340
Annual Return: 46.42%
Sharpe Ratio: 1.50233
Sortino Ratio: 1.481
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.053
Lookback periods: [154, 175, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 10m 3sRunning iteration 71/1500... Est. remaining: 9m 36sRunning iteration 81/1500... Est. remaining: 9m 14sRunning iteration 91/1500... Est. remaining: 8m 56sRunning iteration 101/1500... Est. remaining: 8m 42sbest_combination: {'lookbacks': [154, 175, 199], 'score': np.float64(0.052732546563581006), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 29sRunning iteration 121/1500... Est. remaining: 8m 18sRunning iteration 131/1500... Est. remaining: 8m 9sRunning iteration 141/1500... Est. remaining: 8m 1sRunning iteration 151/1500... Est. remaining: 7m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,745,836,069
Annual Return: 45.81%
Sharpe Ratio: 1.49352
Sortino Ratio: 1.464
Max Drawdown: -59.0%
Avg Drawdown: -10.7%
Normalized Score: 0.074
Lookback periods: [161, 170, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 7m 52sRunning iteration 171/1500... Est. remaining: 7m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,897,496,898
Annual Return: 45.94%
Sharpe Ratio: 1.54404
Sortino Ratio: 1.498
Max Drawdown: -56.6%
Avg Drawdown: -11.7%
Normalized Score: 0.178
Lookback periods: [116, 132, 135] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/1500... Est. remaining: 7m 44sRunning iteration 191/1500... Est. remaining: 7m 37sRunning iteration 201/1500... Est. remaining: 7m 31sbest_combination: {'lookbacks': [116, 132, 135], 'score': np.float64(0.1782763359881599), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 25sRunning iteration 221/1500... Est. remaining: 7m 19sRunning iteration 231/1500... Est. remaining: 7m 14sRunning iteration 241/1500... Est. remaining: 7m 8sRunning iteration 251/1500... Est. remaining: 7m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,197,182,886
Annual Return: 46.93%
Sharpe Ratio: 1.53152
Sortino Ratio: 1.500
Max Drawdown: -56.9%
Avg Drawdown: -11.1%
Normalized Score: 0.253
Lookback periods: [157, 160, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 7m 2sRunning iteration 271/1500... Est. remaining: 6m 57sRunning iteration 281/1500... Est. remaining: 6m 52sRunning iteration 291/1500... Est. remaining: 6m 47sRunning iteration 301/1500... Est. remaining: 6m 42sbest_combination: {'lookbacks': [157, 160, 164], 'score': np.float64(0.2526989279225117), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 38sRunning iteration 321/1500... Est. remaining: 6m 33sRunning iteration 331/1500... Est. remaining: 6m 29sRunning iteration 341/1500... Est. remaining: 6m 25sRunning iteration 351/1500... Est. remaining: 6m 21sRunning iteration 361/1500... Est. remaining: 6m 17sRunning iteration 371/1500... Est. remaining: 6m 13sRunning iteration 381/1500... Est. remaining: 6m 9sRunning iteration 391/1500... Est. remaining: 6m 5sRunning iteration 401/1500... Est. remaining: 6m 1sbest_combination: {'lookbacks': [157, 160, 164], 'score': np.float64(0.2526989279225117), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 57sRunning iteration 421/1500... Est. remaining: 5m 53sRunning iteration 431/1500... Est. remaining: 5m 50sRunning iteration 441/1500... Est. remaining: 5m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,915,215,592
Annual Return: 42.04%
Sharpe Ratio: 1.48617
Sortino Ratio: 1.394
Max Drawdown: -36.3%
Avg Drawdown: -9.8%
Normalized Score: 0.822
Lookback periods: [52, 53, 79] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 5m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,606,599,028
Annual Return: 43.31%
Sharpe Ratio: 1.54845
Sortino Ratio: 1.453
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.163
Lookback periods: [50, 54, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 5m 42sRunning iteration 471/1500... Est. remaining: 5m 38sRunning iteration 481/1500... Est. remaining: 5m 34sRunning iteration 491/1500... Est. remaining: 5m 30sRunning iteration 501/1500... Est. remaining: 5m 27sbest_combination: {'lookbacks': [50, 54, 85], 'score': np.float64(1.162615155288871), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 23sRunning iteration 521/1500... Est. remaining: 5m 19sRunning iteration 531/1500... Est. remaining: 5m 15sRunning iteration 541/1500... Est. remaining: 5m 12sRunning iteration 551/1500... Est. remaining: 5m 8sRunning iteration 561/1500... Est. remaining: 5m 4sRunning iteration 571/1500... Est. remaining: 5m 1sRunning iteration 581/1500... Est. remaining: 4m 57sRunning iteration 591/1500... Est. remaining: 4m 53sRunning iteration 601/1500... Est. remaining: 4m 50sbest_combination: {'lookbacks': [50, 54, 85], 'score': np.float64(1.162615155288871), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 46sRunning iteration 621/1500... Est. remaining: 4m 43sRunning iteration 631/1500... Est. remaining: 4m 39sRunning iteration 641/1500... Est. remaining: 4m 36sRunning iteration 651/1500... Est. remaining: 4m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,044,945,767
Annual Return: 43.95%
Sharpe Ratio: 1.57562
Sortino Ratio: 1.473
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.202
Lookback periods: [50, 52, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 4m 30sRunning iteration 671/1500... Est. remaining: 4m 27sRunning iteration 681/1500... Est. remaining: 4m 23sRunning iteration 691/1500... Est. remaining: 4m 20sRunning iteration 701/1500... Est. remaining: 4m 16sbest_combination: {'lookbacks': [50, 52, 83], 'score': np.float64(1.2021592019393428), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 13sRunning iteration 721/1500... Est. remaining: 4m 9sRunning iteration 731/1500... Est. remaining: 4m 6sRunning iteration 741/1500... Est. remaining: 4m 3sRunning iteration 751/1500... Est. remaining: 3m 59sRunning iteration 761/1500... Est. remaining: 3m 56sRunning iteration 771/1500... Est. remaining: 3m 52sRunning iteration 781/1500... Est. remaining: 3m 49sRunning iteration 791/1500... Est. remaining: 3m 46sRunning iteration 801/1500... Est. remaining: 3m 42sbest_combination: {'lookbacks': [50, 52, 83], 'score': np.float64(1.2021592019393428), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 39sRunning iteration 821/1500... Est. remaining: 3m 36sRunning iteration 831/1500... Est. remaining: 3m 32sRunning iteration 841/1500... Est. remaining: 3m 29sRunning iteration 851/1500... Est. remaining: 3m 26sRunning iteration 861/1500... Est. remaining: 3m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,109,906,920
Annual Return: 44.04%
Sharpe Ratio: 1.57266
Sortino Ratio: 1.479
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.207
Lookback periods: [50, 53, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 871/1500... Est. remaining: 3m 23sRunning iteration 881/1500... Est. remaining: 3m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,656,329,777
Annual Return: 43.39%
Sharpe Ratio: 1.58157
Sortino Ratio: 1.482
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.311
Lookback periods: [50, 52, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 3m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,734,383,559
Annual Return: 44.80%
Sharpe Ratio: 1.61116
Sortino Ratio: 1.516
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.433
Lookback periods: [50, 54, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 901/1500... Est. remaining: 3m 18sbest_combination: {'lookbacks': [50, 54, 98], 'score': np.float64(1.4327320298350892), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 16sRunning iteration 921/1500... Est. remaining: 3m 14sRunning iteration 931/1500... Est. remaining: 3m 12sRunning iteration 941/1500... Est. remaining: 3m 9sRunning iteration 951/1500... Est. remaining: 3m 7sRunning iteration 961/1500... Est. remaining: 3m 4sRunning iteration 971/1500... Est. remaining: 3m 2sRunning iteration 981/1500... Est. remaining: 2m 59sRunning iteration 991/1500... Est. remaining: 2m 56sRunning iteration 1001/1500... Est. remaining: 2m 54sbest_combination: {'lookbacks': [50, 54, 98], 'score': np.float64(1.4327320298350892), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 51sRunning iteration 1021/1500... Est. remaining: 2m 48sRunning iteration 1031/1500... Est. remaining: 2m 45sRunning iteration 1041/1500... Est. remaining: 2m 43sRunning iteration 1051/1500... Est. remaining: 2m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.483
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.682
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1061/1500... Est. remaining: 2m 38sRunning iteration 1071/1500... Est. remaining: 2m 35sRunning iteration 1081/1500... Est. remaining: 2m 32sRunning iteration 1091/1500... Est. remaining: 2m 29sRunning iteration 1101/1500... Est. remaining: 2m 25sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.682071820550394), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 22sRunning iteration 1121/1500... Est. remaining: 2m 19sRunning iteration 1131/1500... Est. remaining: 2m 16sRunning iteration 1141/1500... Est. remaining: 2m 13sRunning iteration 1151/1500... Est. remaining: 2m 9sRunning iteration 1161/1500... Est. remaining: 2m 6sRunning iteration 1171/1500... Est. remaining: 2m 3sRunning iteration 1181/1500... Est. remaining: 1m 59sRunning iteration 1191/1500... Est. remaining: 1m 56sRunning iteration 1201/1500... Est. remaining: 1m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.682071820550394), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 49sRunning iteration 1221/1500... Est. remaining: 1m 45sRunning iteration 1231/1500... Est. remaining: 1m 42sRunning iteration 1241/1500... Est. remaining: 1m 38sRunning iteration 1251/1500... Est. remaining: 1m 35sRunning iteration 1261/1500... Est. remaining: 1m 31sRunning iteration 1271/1500... Est. remaining: 1m 28sRunning iteration 1281/1500... Est. remaining: 1m 24sRunning iteration 1291/1500... Est. remaining: 1m 20sRunning iteration 1301/1500... Est. remaining: 1m 17sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.682071820550394), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 13sRunning iteration 1321/1500... Est. remaining: 1m 9sRunning iteration 1331/1500... Est. remaining: 1m 6sRunning iteration 1341/1500... Est. remaining: 1m 2sRunning iteration 1351/1500... Est. remaining: 0m 58sRunning iteration 1361/1500... Est. remaining: 0m 54sRunning iteration 1371/1500... Est. remaining: 0m 50sRunning iteration 1381/1500... Est. remaining: 0m 47sRunning iteration 1391/1500... Est. remaining: 0m 43sRunning iteration 1401/1500... Est. remaining: 0m 39sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.682071820550394), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 35sRunning iteration 1421/1500... Est. remaining: 0m 31sRunning iteration 1431/1500... Est. remaining: 0m 27sRunning iteration 1441/1500... Est. remaining: 0m 23sRunning iteration 1451/1500... Est. remaining: 0m 19sRunning iteration 1461/1500... Est. remaining: 0m 15sRunning iteration 1471/1500... Est. remaining: 0m 11sRunning iteration 1481/1500... Est. remaining: 0m 7sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 10.0 minutes
Best normalized score: 1.68
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.682071820550394), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.6821)

Monte Carlo simulation completed in 10.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Mon Aug 25 16:24:22 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-25T16:24:22.532588
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 2.3972
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $685,322,970
Annual Return: 37.89%
Sharpe Ratio: 1.31344
Sortino Ratio: 1.220
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: -0.642
Lookback periods: [82, 88, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,297,214,978
Annual Return: 44.28%
Sharpe Ratio: 1.49072
Sortino Ratio: 1.424
Max Drawdown: -55.7%
Avg Drawdown: -11.9%
Normalized Score: 0.349
Lookback periods: [107, 108, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,245,146,546
Annual Return: 46.23%
Sharpe Ratio: 1.50344
Sortino Ratio: 1.473
Max Drawdown: -59.7%
Avg Drawdown: -11.6%
Normalized Score: 0.531
Lookback periods: [150, 161, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 49sRunning iteration 21/1500... Est. remaining: 20m 9sRunning iteration 31/1500... Est. remaining: 17m 20sRunning iteration 41/1500... Est. remaining: 15m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,101,104,778
Annual Return: 46.87%
Sharpe Ratio: 1.54324
Sortino Ratio: 1.497
Max Drawdown: -57.2%
Avg Drawdown: -12.3%
Normalized Score: 0.673
Lookback periods: [128, 156, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 15m 37sRunning iteration 61/1500... Est. remaining: 14m 59sRunning iteration 71/1500... Est. remaining: 14m 28sRunning iteration 81/1500... Est. remaining: 14m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,816,426,587
Annual Return: 48.44%
Sharpe Ratio: 1.59671
Sortino Ratio: 1.546
Max Drawdown: -56.8%
Avg Drawdown: -11.9%
Normalized Score: 1.011
Lookback periods: [135, 157, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 4sRunning iteration 101/1500... Est. remaining: 13m 45sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 30sRunning iteration 121/1500... Est. remaining: 13m 16sRunning iteration 131/1500... Est. remaining: 13m 3sRunning iteration 141/1500... Est. remaining: 12m 51sRunning iteration 151/1500... Est. remaining: 12m 40sRunning iteration 161/1500... Est. remaining: 12m 29sRunning iteration 171/1500... Est. remaining: 12m 20sRunning iteration 181/1500... Est. remaining: 12m 10sRunning iteration 191/1500... Est. remaining: 12m 2sRunning iteration 201/1500... Est. remaining: 11m 53sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 45sRunning iteration 221/1500... Est. remaining: 11m 38sRunning iteration 231/1500... Est. remaining: 11m 31sRunning iteration 241/1500... Est. remaining: 11m 23sRunning iteration 251/1500... Est. remaining: 11m 16sRunning iteration 261/1500... Est. remaining: 11m 9sRunning iteration 271/1500... Est. remaining: 11m 2sRunning iteration 281/1500... Est. remaining: 10m 55sRunning iteration 291/1500... Est. remaining: 10m 49sRunning iteration 301/1500... Est. remaining: 10m 42sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 36sRunning iteration 321/1500... Est. remaining: 10m 30sRunning iteration 331/1500... Est. remaining: 10m 23sRunning iteration 341/1500... Est. remaining: 10m 17sRunning iteration 351/1500... Est. remaining: 10m 11sRunning iteration 361/1500... Est. remaining: 10m 5sRunning iteration 371/1500... Est. remaining: 9m 59sRunning iteration 381/1500... Est. remaining: 9m 53sRunning iteration 391/1500... Est. remaining: 9m 47sRunning iteration 401/1500... Est. remaining: 9m 41sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 36sRunning iteration 421/1500... Est. remaining: 9m 30sRunning iteration 431/1500... Est. remaining: 9m 24sRunning iteration 441/1500... Est. remaining: 9m 18sRunning iteration 451/1500... Est. remaining: 9m 13sRunning iteration 461/1500... Est. remaining: 9m 7sRunning iteration 471/1500... Est. remaining: 9m 1sRunning iteration 481/1500... Est. remaining: 8m 56sRunning iteration 491/1500... Est. remaining: 8m 50sRunning iteration 501/1500... Est. remaining: 8m 44sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 39sRunning iteration 521/1500... Est. remaining: 8m 33sRunning iteration 531/1500... Est. remaining: 8m 28sRunning iteration 541/1500... Est. remaining: 8m 22sRunning iteration 551/1500... Est. remaining: 8m 17sRunning iteration 561/1500... Est. remaining: 8m 11sRunning iteration 571/1500... Est. remaining: 8m 6sRunning iteration 581/1500... Est. remaining: 8m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,176,079,609
Annual Return: 42.56%
Sharpe Ratio: 1.51090
Sortino Ratio: 1.420
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.187
Lookback periods: [52, 53, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 7m 57sRunning iteration 601/1500... Est. remaining: 7m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 46sRunning iteration 621/1500... Est. remaining: 7m 40sRunning iteration 631/1500... Est. remaining: 7m 35sRunning iteration 641/1500... Est. remaining: 7m 30sRunning iteration 651/1500... Est. remaining: 7m 24sRunning iteration 661/1500... Est. remaining: 7m 19sRunning iteration 671/1500... Est. remaining: 7m 13sRunning iteration 681/1500... Est. remaining: 7m 8sRunning iteration 691/1500... Est. remaining: 7m 3sRunning iteration 701/1500... Est. remaining: 6m 57sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 52sRunning iteration 721/1500... Est. remaining: 6m 46sRunning iteration 731/1500... Est. remaining: 6m 41sRunning iteration 741/1500... Est. remaining: 6m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,395,494,535
Annual Return: 42.96%
Sharpe Ratio: 1.54322
Sortino Ratio: 1.444
Max Drawdown: -37.2%
Avg Drawdown: -9.2%
Normalized Score: 1.255
Lookback periods: [51, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 6m 32sRunning iteration 761/1500... Est. remaining: 6m 26sRunning iteration 771/1500... Est. remaining: 6m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,576,078,638
Annual Return: 45.65%
Sharpe Ratio: 1.62275
Sortino Ratio: 1.552
Max Drawdown: -37.4%
Avg Drawdown: -9.2%
Normalized Score: 1.756
Lookback periods: [52, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 781/1500... Est. remaining: 6m 17sRunning iteration 791/1500... Est. remaining: 6m 11sRunning iteration 801/1500... Est. remaining: 6m 6sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 0sRunning iteration 821/1500... Est. remaining: 5m 55sRunning iteration 831/1500... Est. remaining: 5m 50sRunning iteration 841/1500... Est. remaining: 5m 44sRunning iteration 851/1500... Est. remaining: 5m 39sRunning iteration 861/1500... Est. remaining: 5m 34sRunning iteration 871/1500... Est. remaining: 5m 28sRunning iteration 881/1500... Est. remaining: 5m 23sRunning iteration 891/1500... Est. remaining: 5m 18sRunning iteration 901/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 7sRunning iteration 921/1500... Est. remaining: 5m 2sRunning iteration 931/1500... Est. remaining: 4m 56sRunning iteration 941/1500... Est. remaining: 4m 51sRunning iteration 951/1500... Est. remaining: 4m 46sRunning iteration 961/1500... Est. remaining: 4m 41sRunning iteration 971/1500... Est. remaining: 4m 35sRunning iteration 981/1500... Est. remaining: 4m 30sRunning iteration 991/1500... Est. remaining: 4m 25sRunning iteration 1001/1500... Est. remaining: 4m 19sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 14sRunning iteration 1021/1500... Est. remaining: 4m 9sRunning iteration 1031/1500... Est. remaining: 4m 4sRunning iteration 1041/1500... Est. remaining: 3m 58sRunning iteration 1051/1500... Est. remaining: 3m 53sRunning iteration 1061/1500... Est. remaining: 3m 48sRunning iteration 1071/1500... Est. remaining: 3m 43sRunning iteration 1081/1500... Est. remaining: 3m 37sRunning iteration 1091/1500... Est. remaining: 3m 32sRunning iteration 1101/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 22sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 11sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,215,830,150
Annual Return: 45.31%
Sharpe Ratio: 1.62720
Sortino Ratio: 1.544
Max Drawdown: -36.6%
Avg Drawdown: -8.6%
Normalized Score: 1.814
Lookback periods: [52, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 1.81
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.3972291757531417), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [50, 52, 95] (score: 2.3972)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 96] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 105 selections (25.2%)
2. naz100_hma: 96 selections (23.1%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,215,830,150.33
Average Annualized Gain: 45.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Mon Aug 25 16:37:24 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,344,993,974
Annual Return: 40.60%
Sharpe Ratio: 1.35982
Sortino Ratio: 1.306
Max Drawdown: -68.1%
Avg Drawdown: -13.5%
Normalized Score: -1.074
Lookback periods: [125, 126, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,093,484,419
Annual Return: 42.40%
Sharpe Ratio: 1.39387
Sortino Ratio: 1.347
Max Drawdown: -66.3%
Avg Drawdown: -12.9%
Normalized Score: -0.648
Lookback periods: [98, 192, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,216,698,150
Annual Return: 44.18%
Sharpe Ratio: 1.44276
Sortino Ratio: 1.421
Max Drawdown: -59.6%
Avg Drawdown: -11.9%
Normalized Score: 0.062
Lookback periods: [162, 165, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,868,679,515
Annual Return: 46.70%
Sharpe Ratio: 1.53117
Sortino Ratio: 1.493
Max Drawdown: -58.5%
Avg Drawdown: -12.5%
Normalized Score: 0.450
Lookback periods: [145, 155, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 7sRunning iteration 31/1500... Est. remaining: 18m 53sRunning iteration 41/1500... Est. remaining: 17m 11sRunning iteration 51/1500... Est. remaining: 16m 3sRunning iteration 61/1500... Est. remaining: 15m 13sRunning iteration 71/1500... Est. remaining: 14m 41sRunning iteration 81/1500... Est. remaining: 14m 15sRunning iteration 91/1500... Est. remaining: 13m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,712,648,490
Annual Return: 47.27%
Sharpe Ratio: 1.56020
Sortino Ratio: 1.518
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: 0.723
Lookback periods: [128, 132, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 13m 53sbest_combination: {'lookbacks': [128, 132, 134], 'score': np.float64(0.7225153063149967), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 37sRunning iteration 121/1500... Est. remaining: 13m 23sRunning iteration 131/1500... Est. remaining: 13m 9sRunning iteration 141/1500... Est. remaining: 12m 57sRunning iteration 151/1500... Est. remaining: 12m 46sRunning iteration 161/1500... Est. remaining: 12m 36sRunning iteration 171/1500... Est. remaining: 12m 25sRunning iteration 181/1500... Est. remaining: 12m 16sRunning iteration 191/1500... Est. remaining: 12m 7sRunning iteration 201/1500... Est. remaining: 11m 58sbest_combination: {'lookbacks': [128, 132, 134], 'score': np.float64(0.7225153063149967), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 50sRunning iteration 221/1500... Est. remaining: 11m 42sRunning iteration 231/1500... Est. remaining: 11m 35sRunning iteration 241/1500... Est. remaining: 11m 27sRunning iteration 251/1500... Est. remaining: 11m 20sRunning iteration 261/1500... Est. remaining: 11m 12sRunning iteration 271/1500... Est. remaining: 11m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,006,654,986
Annual Return: 48.02%
Sharpe Ratio: 1.57834
Sortino Ratio: 1.540
Max Drawdown: -55.0%
Avg Drawdown: -11.3%
Normalized Score: 0.992
Lookback periods: [146, 156, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/1500... Est. remaining: 11m 4sRunning iteration 291/1500... Est. remaining: 10m 56sRunning iteration 301/1500... Est. remaining: 10m 49sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.9922800718980873), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 42sRunning iteration 321/1500... Est. remaining: 10m 36sRunning iteration 331/1500... Est. remaining: 10m 29sRunning iteration 341/1500... Est. remaining: 10m 22sRunning iteration 351/1500... Est. remaining: 10m 16sRunning iteration 361/1500... Est. remaining: 10m 9sRunning iteration 371/1500... Est. remaining: 10m 3sRunning iteration 381/1500... Est. remaining: 9m 57sRunning iteration 391/1500... Est. remaining: 9m 51sRunning iteration 401/1500... Est. remaining: 9m 44sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.9922800718980873), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 38sRunning iteration 421/1500... Est. remaining: 9m 32sRunning iteration 431/1500... Est. remaining: 9m 26sRunning iteration 441/1500... Est. remaining: 9m 20sRunning iteration 451/1500... Est. remaining: 9m 14sRunning iteration 461/1500... Est. remaining: 9m 9sRunning iteration 471/1500... Est. remaining: 9m 3sRunning iteration 481/1500... Est. remaining: 8m 57sRunning iteration 491/1500... Est. remaining: 8m 51sRunning iteration 501/1500... Est. remaining: 8m 46sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.9922800718980873), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 40sRunning iteration 521/1500... Est. remaining: 8m 34sRunning iteration 531/1500... Est. remaining: 8m 29sRunning iteration 541/1500... Est. remaining: 8m 23sRunning iteration 551/1500... Est. remaining: 8m 18sRunning iteration 561/1500... Est. remaining: 8m 12sRunning iteration 571/1500... Est. remaining: 8m 6sRunning iteration 581/1500... Est. remaining: 8m 1sRunning iteration 591/1500... Est. remaining: 7m 55sRunning iteration 601/1500... Est. remaining: 7m 50sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.9922800718980873), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 44sRunning iteration 621/1500... Est. remaining: 7m 39sRunning iteration 631/1500... Est. remaining: 7m 34sRunning iteration 641/1500... Est. remaining: 7m 28sRunning iteration 651/1500... Est. remaining: 7m 23sRunning iteration 661/1500... Est. remaining: 7m 17sRunning iteration 671/1500... Est. remaining: 7m 12sRunning iteration 681/1500... Est. remaining: 7m 7sRunning iteration 691/1500... Est. remaining: 7m 1sRunning iteration 701/1500... Est. remaining: 6m 56sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.9922800718980873), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 50sRunning iteration 721/1500... Est. remaining: 6m 45sRunning iteration 731/1500... Est. remaining: 6m 40sRunning iteration 741/1500... Est. remaining: 6m 34sRunning iteration 751/1500... Est. remaining: 6m 29sRunning iteration 761/1500... Est. remaining: 6m 24sRunning iteration 771/1500... Est. remaining: 6m 18sRunning iteration 781/1500... Est. remaining: 6m 13sRunning iteration 791/1500... Est. remaining: 6m 8sRunning iteration 801/1500... Est. remaining: 6m 3sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.9922800718980873), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 57sRunning iteration 821/1500... Est. remaining: 5m 52sRunning iteration 831/1500... Est. remaining: 5m 47sRunning iteration 841/1500... Est. remaining: 5m 41sRunning iteration 851/1500... Est. remaining: 5m 36sRunning iteration 861/1500... Est. remaining: 5m 31sRunning iteration 871/1500... Est. remaining: 5m 26sRunning iteration 881/1500... Est. remaining: 5m 20sRunning iteration 891/1500... Est. remaining: 5m 15sRunning iteration 901/1500... Est. remaining: 5m 10sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.9922800718980873), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 5sRunning iteration 921/1500... Est. remaining: 4m 59sRunning iteration 931/1500... Est. remaining: 4m 54sRunning iteration 941/1500... Est. remaining: 4m 49sRunning iteration 951/1500... Est. remaining: 4m 44sRunning iteration 961/1500... Est. remaining: 4m 38sRunning iteration 971/1500... Est. remaining: 4m 33sRunning iteration 981/1500... Est. remaining: 4m 28sRunning iteration 991/1500... Est. remaining: 4m 23sRunning iteration 1001/1500... Est. remaining: 4m 18sbest_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(0.9922800718980873), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 12sRunning iteration 1021/1500... Est. remaining: 4m 7sRunning iteration 1031/1500... Est. remaining: 4m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,620,448,365
Annual Return: 43.33%
Sharpe Ratio: 1.54593
Sortino Ratio: 1.459
Max Drawdown: -36.6%
Avg Drawdown: -9.4%
Normalized Score: 1.285
Lookback periods: [52, 53, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1041/1500... Est. remaining: 3m 57sRunning iteration 1051/1500... Est. remaining: 3m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,293,289,579
Annual Return: 44.28%
Sharpe Ratio: 1.58522
Sortino Ratio: 1.495
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.623
Lookback periods: [50, 53, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1061/1500... Est. remaining: 3m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,796,731,139
Annual Return: 43.60%
Sharpe Ratio: 1.56916
Sortino Ratio: 1.470
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.626
Lookback periods: [50, 50, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1071/1500... Est. remaining: 3m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.901
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 32sRunning iteration 1101/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.9013033138493), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 22sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 11sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.9013033138493), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.085
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0851034959881067), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0851034959881067), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 2.09
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0851034959881067), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.0851)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Mon Aug 25 16:50:22 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,596,089,003
Annual Return: 41.29%
Sharpe Ratio: 1.40376
Sortino Ratio: 1.318
Max Drawdown: -57.2%
Avg Drawdown: -12.0%
Normalized Score: -0.299
Lookback periods: [56, 150, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,014,399,526
Annual Return: 42.25%
Sharpe Ratio: 1.43203
Sortino Ratio: 1.360
Max Drawdown: -56.1%
Avg Drawdown: -12.0%
Normalized Score: -0.104
Lookback periods: [106, 110, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,721,239,251
Annual Return: 45.78%
Sharpe Ratio: 1.48357
Sortino Ratio: 1.446
Max Drawdown: -61.4%
Avg Drawdown: -11.5%
Normalized Score: 0.156
Lookback periods: [154, 158, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 29sRunning iteration 21/1500... Est. remaining: 20m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,939,482,225
Annual Return: 45.97%
Sharpe Ratio: 1.49979
Sortino Ratio: 1.454
Max Drawdown: -59.2%
Avg Drawdown: -11.5%
Normalized Score: 0.285
Lookback periods: [149, 158, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 51sRunning iteration 41/1500... Est. remaining: 17m 11sRunning iteration 51/1500... Est. remaining: 16m 5sRunning iteration 61/1500... Est. remaining: 15m 18sRunning iteration 71/1500... Est. remaining: 14m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,533,436,361
Annual Return: 45.61%
Sharpe Ratio: 1.49401
Sortino Ratio: 1.459
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.356
Lookback periods: [158, 167, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 14m 42sRunning iteration 91/1500... Est. remaining: 14m 20sRunning iteration 101/1500... Est. remaining: 14m 0sbest_combination: {'lookbacks': [158, 167, 177], 'score': np.float64(0.3558347913360069), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 43sRunning iteration 121/1500... Est. remaining: 13m 27sRunning iteration 131/1500... Est. remaining: 13m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,174,731,195
Annual Return: 47.56%
Sharpe Ratio: 1.53134
Sortino Ratio: 1.492
Max Drawdown: -60.6%
Avg Drawdown: -11.8%
Normalized Score: 0.376
Lookback periods: [148, 188, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,832,343,985
Annual Return: 46.68%
Sharpe Ratio: 1.52280
Sortino Ratio: 1.478
Max Drawdown: -60.0%
Avg Drawdown: -11.2%
Normalized Score: 0.409
Lookback periods: [136, 190, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 13m 25sRunning iteration 151/1500... Est. remaining: 13m 12sRunning iteration 161/1500... Est. remaining: 13m 1sRunning iteration 171/1500... Est. remaining: 12m 50sRunning iteration 181/1500... Est. remaining: 12m 39sRunning iteration 191/1500... Est. remaining: 12m 29sRunning iteration 201/1500... Est. remaining: 12m 19sbest_combination: {'lookbacks': [136, 190, 191], 'score': np.float64(0.4085110376822586), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 10sRunning iteration 221/1500... Est. remaining: 12m 1sRunning iteration 231/1500... Est. remaining: 11m 53sRunning iteration 241/1500... Est. remaining: 11m 45sRunning iteration 251/1500... Est. remaining: 11m 37sRunning iteration 261/1500... Est. remaining: 11m 29sRunning iteration 271/1500... Est. remaining: 11m 22sRunning iteration 281/1500... Est. remaining: 11m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,855,819,544
Annual Return: 47.36%
Sharpe Ratio: 1.54262
Sortino Ratio: 1.502
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.589
Lookback periods: [157, 161, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 291/1500... Est. remaining: 11m 12sRunning iteration 301/1500... Est. remaining: 11m 5sbest_combination: {'lookbacks': [157, 161, 183], 'score': np.float64(0.5894132776940171), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 58sRunning iteration 321/1500... Est. remaining: 10m 51sRunning iteration 331/1500... Est. remaining: 10m 44sRunning iteration 341/1500... Est. remaining: 10m 37sRunning iteration 351/1500... Est. remaining: 10m 30sRunning iteration 361/1500... Est. remaining: 10m 23sRunning iteration 371/1500... Est. remaining: 10m 17sRunning iteration 381/1500... Est. remaining: 10m 10sRunning iteration 391/1500... Est. remaining: 10m 4sRunning iteration 401/1500... Est. remaining: 9m 57sbest_combination: {'lookbacks': [157, 161, 183], 'score': np.float64(0.5894132776940171), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 51sRunning iteration 421/1500... Est. remaining: 9m 44sRunning iteration 431/1500... Est. remaining: 9m 38sRunning iteration 441/1500... Est. remaining: 9m 32sRunning iteration 451/1500... Est. remaining: 9m 26sRunning iteration 461/1500... Est. remaining: 9m 20sRunning iteration 471/1500... Est. remaining: 9m 14sRunning iteration 481/1500... Est. remaining: 9m 8sRunning iteration 491/1500... Est. remaining: 9m 2sRunning iteration 501/1500... Est. remaining: 8m 56sbest_combination: {'lookbacks': [157, 161, 183], 'score': np.float64(0.5894132776940171), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 50sRunning iteration 521/1500... Est. remaining: 8m 44sRunning iteration 531/1500... Est. remaining: 8m 39sRunning iteration 541/1500... Est. remaining: 8m 33sRunning iteration 551/1500... Est. remaining: 8m 27sRunning iteration 561/1500... Est. remaining: 8m 21sRunning iteration 571/1500... Est. remaining: 8m 16sRunning iteration 581/1500... Est. remaining: 8m 10sRunning iteration 591/1500... Est. remaining: 8m 4sRunning iteration 601/1500... Est. remaining: 7m 59sbest_combination: {'lookbacks': [157, 161, 183], 'score': np.float64(0.5894132776940171), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 53sRunning iteration 621/1500... Est. remaining: 7m 48sRunning iteration 631/1500... Est. remaining: 7m 42sRunning iteration 641/1500... Est. remaining: 7m 37sRunning iteration 651/1500... Est. remaining: 7m 31sRunning iteration 661/1500... Est. remaining: 7m 25sRunning iteration 671/1500... Est. remaining: 7m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,626,531,954
Annual Return: 41.37%
Sharpe Ratio: 1.47868
Sortino Ratio: 1.381
Max Drawdown: -36.7%
Avg Drawdown: -9.8%
Normalized Score: 1.032
Lookback periods: [50, 55, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 7m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,686,695,618
Annual Return: 43.43%
Sharpe Ratio: 1.55041
Sortino Ratio: 1.458
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.513
Lookback periods: [50, 54, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 7m 11sRunning iteration 701/1500... Est. remaining: 7m 6sbest_combination: {'lookbacks': [50, 54, 88], 'score': np.float64(1.5133206140628777), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 0sRunning iteration 721/1500... Est. remaining: 6m 55sRunning iteration 731/1500... Est. remaining: 6m 49sRunning iteration 741/1500... Est. remaining: 6m 44sRunning iteration 751/1500... Est. remaining: 6m 38sRunning iteration 761/1500... Est. remaining: 6m 32sRunning iteration 771/1500... Est. remaining: 6m 27sRunning iteration 781/1500... Est. remaining: 6m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,315,947,560
Annual Return: 44.31%
Sharpe Ratio: 1.57346
Sortino Ratio: 1.481
Max Drawdown: -35.6%
Avg Drawdown: -9.2%
Normalized Score: 1.591
Lookback periods: [50, 53, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 6m 17sRunning iteration 801/1500... Est. remaining: 6m 11sbest_combination: {'lookbacks': [50, 53, 83], 'score': np.float64(1.5907786813863716), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 6sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 55sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 44sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 33sRunning iteration 881/1500... Est. remaining: 5m 27sRunning iteration 891/1500... Est. remaining: 5m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,229,417,452
Annual Return: 44.20%
Sharpe Ratio: 1.57610
Sortino Ratio: 1.489
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.636
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.975
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 901/1500... Est. remaining: 5m 18sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.9750552952462184), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 13sRunning iteration 921/1500... Est. remaining: 5m 7sRunning iteration 931/1500... Est. remaining: 5m 2sRunning iteration 941/1500... Est. remaining: 4m 56sRunning iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 40sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.118
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1183884923808805), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 14sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 3sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 47sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1183884923808805), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1183884923808805), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1183884923808805), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1183884923808805), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 2.12
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1183884923808805), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.1184)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Mon Aug 25 17:03:32 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,563,834,844
Annual Return: 41.21%
Sharpe Ratio: 1.36767
Sortino Ratio: 1.328
Max Drawdown: -68.2%
Avg Drawdown: -13.3%
Normalized Score: -1.033
Lookback periods: [120, 170, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $640,029,644
Annual Return: 37.62%
Sharpe Ratio: 1.30354
Sortino Ratio: 1.222
Max Drawdown: -52.3%
Avg Drawdown: -12.4%
Normalized Score: -0.745
Lookback periods: [85, 88, 103] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $987,142,759
Annual Return: 39.35%
Sharpe Ratio: 1.34825
Sortino Ratio: 1.265
Max Drawdown: -55.0%
Avg Drawdown: -12.8%
Normalized Score: -0.725
Lookback periods: [66, 157, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,462,709,099
Annual Return: 43.07%
Sharpe Ratio: 1.47568
Sortino Ratio: 1.383
Max Drawdown: -56.4%
Avg Drawdown: -11.4%
Normalized Score: -0.035
Lookback periods: [56, 158, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 51sRunning iteration 31/1500... Est. remaining: 18m 37sRunning iteration 41/1500... Est. remaining: 16m 49sRunning iteration 51/1500... Est. remaining: 15m 48sRunning iteration 61/1500... Est. remaining: 15m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,245,078,916
Annual Return: 46.23%
Sharpe Ratio: 1.49765
Sortino Ratio: 1.465
Max Drawdown: -61.0%
Avg Drawdown: -11.9%
Normalized Score: -0.026
Lookback periods: [154, 181, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 0sRunning iteration 81/1500... Est. remaining: 14m 33sRunning iteration 91/1500... Est. remaining: 14m 11sRunning iteration 101/1500... Est. remaining: 13m 51sbest_combination: {'lookbacks': [154, 181, 193], 'score': np.float64(-0.026060204850223822), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 35sRunning iteration 121/1500... Est. remaining: 13m 20sRunning iteration 131/1500... Est. remaining: 13m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,046,779,934
Annual Return: 42.31%
Sharpe Ratio: 1.46621
Sortino Ratio: 1.370
Max Drawdown: -52.3%
Avg Drawdown: -9.1%
Normalized Score: 0.501
Lookback periods: [50, 102, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 13m 6sRunning iteration 151/1500... Est. remaining: 12m 54sRunning iteration 161/1500... Est. remaining: 12m 44sRunning iteration 171/1500... Est. remaining: 12m 33sRunning iteration 181/1500... Est. remaining: 12m 23sRunning iteration 191/1500... Est. remaining: 12m 14sRunning iteration 201/1500... Est. remaining: 12m 5sbest_combination: {'lookbacks': [50, 102, 143], 'score': np.float64(0.5012595828111481), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 56sRunning iteration 221/1500... Est. remaining: 11m 48sRunning iteration 231/1500... Est. remaining: 11m 40sRunning iteration 241/1500... Est. remaining: 11m 32sRunning iteration 251/1500... Est. remaining: 11m 25sRunning iteration 261/1500... Est. remaining: 11m 18sRunning iteration 271/1500... Est. remaining: 11m 11sRunning iteration 281/1500... Est. remaining: 11m 4sRunning iteration 291/1500... Est. remaining: 10m 58sRunning iteration 301/1500... Est. remaining: 10m 51sbest_combination: {'lookbacks': [50, 102, 143], 'score': np.float64(0.5012595828111481), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 45sRunning iteration 321/1500... Est. remaining: 10m 38sRunning iteration 331/1500... Est. remaining: 19m 15sRunning iteration 341/1500... Est. remaining: 25m 27sRunning iteration 351/1500... Est. remaining: 24m 48sRunning iteration 361/1500... Est. remaining: 24m 10sRunning iteration 371/1500... Est. remaining: 23m 34sRunning iteration 381/1500... Est. remaining: 22m 59sRunning iteration 391/1500... Est. remaining: 22m 27sRunning iteration 401/1500... Est. remaining: 21m 55sbest_combination: {'lookbacks': [50, 102, 143], 'score': np.float64(0.5012595828111481), 'visits': 1}
Running iteration 411/1500... Est. remaining: 21m 25sRunning iteration 421/1500... Est. remaining: 20m 55sRunning iteration 431/1500... Est. remaining: 20m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $895,760,126
Annual Return: 38.96%
Sharpe Ratio: 1.39163
Sortino Ratio: 1.297
Max Drawdown: -34.7%
Avg Drawdown: -9.9%
Normalized Score: 0.517
Lookback periods: [50, 64, 78] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 20m 3sRunning iteration 451/1500... Est. remaining: 19m 37sRunning iteration 461/1500... Est. remaining: 19m 12sRunning iteration 471/1500... Est. remaining: 18m 48sRunning iteration 481/1500... Est. remaining: 18m 24sRunning iteration 491/1500... Est. remaining: 18m 1sRunning iteration 501/1500... Est. remaining: 17m 39sbest_combination: {'lookbacks': [50, 64, 78], 'score': np.float64(0.5168275829144735), 'visits': 1}
Running iteration 511/1500... Est. remaining: 17m 18sRunning iteration 521/1500... Est. remaining: 16m 57sRunning iteration 531/1500... Est. remaining: 16m 37sRunning iteration 541/1500... Est. remaining: 16m 17sRunning iteration 551/1500... Est. remaining: 15m 59sRunning iteration 561/1500... Est. remaining: 15m 40sRunning iteration 571/1500... Est. remaining: 15m 22sRunning iteration 581/1500... Est. remaining: 15m 5sRunning iteration 591/1500... Est. remaining: 14m 47sRunning iteration 601/1500... Est. remaining: 14m 31sbest_combination: {'lookbacks': [50, 64, 78], 'score': np.float64(0.5168275829144735), 'visits': 1}
Running iteration 611/1500... Est. remaining: 14m 14sRunning iteration 621/1500... Est. remaining: 13m 58sRunning iteration 631/1500... Est. remaining: 13m 43sRunning iteration 641/1500... Est. remaining: 13m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,113,986,684
Annual Return: 39.84%
Sharpe Ratio: 1.43812
Sortino Ratio: 1.334
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.731
Lookback periods: [50, 60, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 13m 14sRunning iteration 661/1500... Est. remaining: 12m 59sRunning iteration 671/1500... Est. remaining: 12m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,295,009,665
Annual Return: 40.44%
Sharpe Ratio: 1.46595
Sortino Ratio: 1.361
Max Drawdown: -35.6%
Avg Drawdown: -9.8%
Normalized Score: 0.761
Lookback periods: [50, 56, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 12m 32sRunning iteration 691/1500... Est. remaining: 12m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,119,764,259
Annual Return: 42.46%
Sharpe Ratio: 1.50904
Sortino Ratio: 1.414
Max Drawdown: -35.6%
Avg Drawdown: -9.2%
Normalized Score: 1.073
Lookback periods: [50, 53, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/1500... Est. remaining: 12m 5sbest_combination: {'lookbacks': [50, 53, 84], 'score': np.float64(1.0731951235152926), 'visits': 1}
Running iteration 711/1500... Est. remaining: 11m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,650,069,972
Annual Return: 43.38%
Sharpe Ratio: 1.54673
Sortino Ratio: 1.453
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.262
Lookback periods: [50, 54, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 11m 40sRunning iteration 731/1500... Est. remaining: 11m 27sRunning iteration 741/1500... Est. remaining: 11m 14sRunning iteration 751/1500... Est. remaining: 11m 1sRunning iteration 761/1500... Est. remaining: 10m 49sRunning iteration 771/1500... Est. remaining: 10m 36sRunning iteration 781/1500... Est. remaining: 10m 24sRunning iteration 791/1500... Est. remaining: 10m 12sRunning iteration 801/1500... Est. remaining: 10m 0sbest_combination: {'lookbacks': [50, 54, 84], 'score': np.float64(1.2615873753576312), 'visits': 1}
Running iteration 811/1500... Est. remaining: 9m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,315,947,560
Annual Return: 44.31%
Sharpe Ratio: 1.57346
Sortino Ratio: 1.481
Max Drawdown: -35.6%
Avg Drawdown: -9.2%
Normalized Score: 1.315
Lookback periods: [50, 53, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 821/1500... Est. remaining: 9m 38sRunning iteration 831/1500... Est. remaining: 9m 27sRunning iteration 841/1500... Est. remaining: 9m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,037,914,546
Annual Return: 43.94%
Sharpe Ratio: 1.57274
Sortino Ratio: 1.474
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.326
Lookback periods: [50, 54, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 9m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,194,625,661
Annual Return: 42.60%
Sharpe Ratio: 1.54908
Sortino Ratio: 1.443
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.340
Lookback periods: [50, 51, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.591
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 8m 56sRunning iteration 871/1500... Est. remaining: 8m 46sRunning iteration 881/1500... Est. remaining: 8m 35sRunning iteration 891/1500... Est. remaining: 8m 24sRunning iteration 901/1500... Est. remaining: 8m 14sbest_combination: {'lookbacks': [50, 50, 96], 'score': np.float64(1.5910671535017957), 'visits': 1}
Running iteration 911/1500... Est. remaining: 8m 4sRunning iteration 921/1500... Est. remaining: 7m 53sRunning iteration 931/1500... Est. remaining: 7m 43sRunning iteration 941/1500... Est. remaining: 7m 33sRunning iteration 951/1500... Est. remaining: 7m 24sRunning iteration 961/1500... Est. remaining: 7m 14sRunning iteration 971/1500... Est. remaining: 7m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.689
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 981/1500... Est. remaining: 6m 56sRunning iteration 991/1500... Est. remaining: 6m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.755
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1001/1500... Est. remaining: 6m 37sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7554290827601222), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 6m 28sRunning iteration 1021/1500... Est. remaining: 6m 19sRunning iteration 1031/1500... Est. remaining: 6m 9sRunning iteration 1041/1500... Est. remaining: 6m 0sRunning iteration 1051/1500... Est. remaining: 5m 51sRunning iteration 1061/1500... Est. remaining: 5m 42sRunning iteration 1071/1500... Est. remaining: 5m 33sRunning iteration 1081/1500... Est. remaining: 5m 25sRunning iteration 1091/1500... Est. remaining: 5m 16sRunning iteration 1101/1500... Est. remaining: 5m 7sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7554290827601222), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 58sRunning iteration 1121/1500... Est. remaining: 4m 50sRunning iteration 1131/1500... Est. remaining: 4m 41sRunning iteration 1141/1500... Est. remaining: 4m 33sRunning iteration 1151/1500... Est. remaining: 4m 25sRunning iteration 1161/1500... Est. remaining: 4m 16sRunning iteration 1171/1500... Est. remaining: 4m 8sRunning iteration 1181/1500... Est. remaining: 4m 0sRunning iteration 1191/1500... Est. remaining: 3m 52sRunning iteration 1201/1500... Est. remaining: 3m 44sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7554290827601222), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 35sRunning iteration 1221/1500... Est. remaining: 3m 27sRunning iteration 1231/1500... Est. remaining: 3m 19sRunning iteration 1241/1500... Est. remaining: 3m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.865
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1251/1500... Est. remaining: 3m 4sRunning iteration 1261/1500... Est. remaining: 2m 56sRunning iteration 1271/1500... Est. remaining: 2m 48sRunning iteration 1281/1500... Est. remaining: 2m 41sRunning iteration 1291/1500... Est. remaining: 2m 33sRunning iteration 1301/1500... Est. remaining: 2m 25sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8653785318822322), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 18sRunning iteration 1321/1500... Est. remaining: 2m 10sRunning iteration 1331/1500... Est. remaining: 2m 3sRunning iteration 1341/1500... Est. remaining: 1m 55sRunning iteration 1351/1500... Est. remaining: 1m 48sRunning iteration 1361/1500... Est. remaining: 1m 40sRunning iteration 1371/1500... Est. remaining: 1m 33sRunning iteration 1381/1500... Est. remaining: 1m 25sRunning iteration 1391/1500... Est. remaining: 1m 18sRunning iteration 1401/1500... Est. remaining: 1m 11sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8653785318822322), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 4sRunning iteration 1421/1500... Est. remaining: 0m 56sRunning iteration 1431/1500... Est. remaining: 0m 49sRunning iteration 1441/1500... Est. remaining: 0m 42sRunning iteration 1451/1500... Est. remaining: 0m 35sRunning iteration 1461/1500... Est. remaining: 0m 28sRunning iteration 1471/1500... Est. remaining: 0m 21sRunning iteration 1481/1500... Est. remaining: 0m 14sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 17.5 minutes
Best normalized score: 1.87
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8653785318822322), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.8654)

Monte Carlo simulation completed in 17.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Mon Aug 25 17:21:07 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $378,521,754
Annual Return: 35.55%
Sharpe Ratio: 1.25176
Sortino Ratio: 1.156
Max Drawdown: -52.3%
Avg Drawdown: -12.5%
Normalized Score: -1.720
Lookback periods: [65, 73, 91] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,505,119,659
Annual Return: 43.14%
Sharpe Ratio: 1.43391
Sortino Ratio: 1.385
Max Drawdown: -65.1%
Avg Drawdown: -12.9%
Normalized Score: -0.963
Lookback periods: [118, 148, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,060,735,348
Annual Return: 42.34%
Sharpe Ratio: 1.44079
Sortino Ratio: 1.364
Max Drawdown: -62.2%
Avg Drawdown: -11.5%
Normalized Score: -0.798
Lookback periods: [60, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,135,287,408
Annual Return: 45.23%
Sharpe Ratio: 1.47230
Sortino Ratio: 1.446
Max Drawdown: -61.3%
Avg Drawdown: -12.0%
Normalized Score: -0.380
Lookback periods: [153, 175, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,948,995,845
Annual Return: 42.11%
Sharpe Ratio: 1.45802
Sortino Ratio: 1.369
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: -0.343
Lookback periods: [89, 97, 126] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,496,633,077
Annual Return: 46.43%
Sharpe Ratio: 1.50886
Sortino Ratio: 1.471
Max Drawdown: -61.3%
Avg Drawdown: -11.7%
Normalized Score: -0.146
Lookback periods: [155, 156, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 45sRunning iteration 51/1500... Est. remaining: 17m 22sRunning iteration 61/1500... Est. remaining: 16m 23sRunning iteration 71/1500... Est. remaining: 15m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $701,595,612
Annual Return: 37.98%
Sharpe Ratio: 1.37367
Sortino Ratio: 1.274
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: -0.140
Lookback periods: [50, 69, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 15m 28sRunning iteration 91/1500... Est. remaining: 15m 0sRunning iteration 101/1500... Est. remaining: 14m 36sbest_combination: {'lookbacks': [50, 69, 94], 'score': np.float64(-0.1400382019690046), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 15sRunning iteration 121/1500... Est. remaining: 13m 57sRunning iteration 131/1500... Est. remaining: 13m 41sRunning iteration 141/1500... Est. remaining: 13m 25sRunning iteration 151/1500... Est. remaining: 13m 12sRunning iteration 161/1500... Est. remaining: 12m 59sRunning iteration 171/1500... Est. remaining: 12m 47sRunning iteration 181/1500... Est. remaining: 12m 36sRunning iteration 191/1500... Est. remaining: 12m 26sRunning iteration 201/1500... Est. remaining: 12m 16sbest_combination: {'lookbacks': [50, 69, 94], 'score': np.float64(-0.1400382019690046), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 7sRunning iteration 221/1500... Est. remaining: 11m 58sRunning iteration 231/1500... Est. remaining: 11m 49sRunning iteration 241/1500... Est. remaining: 11m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,407,455,873
Annual Return: 46.36%
Sharpe Ratio: 1.51221
Sortino Ratio: 1.473
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: -0.031
Lookback periods: [170, 178, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 11m 39sRunning iteration 261/1500... Est. remaining: 11m 31sRunning iteration 271/1500... Est. remaining: 11m 23sRunning iteration 281/1500... Est. remaining: 11m 16sRunning iteration 291/1500... Est. remaining: 11m 8sRunning iteration 301/1500... Est. remaining: 11m 1sbest_combination: {'lookbacks': [170, 178, 199], 'score': np.float64(-0.0306953710489803), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 54sRunning iteration 321/1500... Est. remaining: 10m 46sRunning iteration 331/1500... Est. remaining: 10m 39sRunning iteration 341/1500... Est. remaining: 10m 33sRunning iteration 351/1500... Est. remaining: 10m 26sRunning iteration 361/1500... Est. remaining: 10m 19sRunning iteration 371/1500... Est. remaining: 10m 13sRunning iteration 381/1500... Est. remaining: 10m 6sRunning iteration 391/1500... Est. remaining: 10m 0sRunning iteration 401/1500... Est. remaining: 9m 53sbest_combination: {'lookbacks': [170, 178, 199], 'score': np.float64(-0.0306953710489803), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 47sRunning iteration 421/1500... Est. remaining: 9m 41sRunning iteration 431/1500... Est. remaining: 9m 35sRunning iteration 441/1500... Est. remaining: 9m 29sRunning iteration 451/1500... Est. remaining: 9m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,318,617,337
Annual Return: 47.64%
Sharpe Ratio: 1.53921
Sortino Ratio: 1.506
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.191
Lookback periods: [177, 187, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 9m 19sRunning iteration 471/1500... Est. remaining: 9m 14sRunning iteration 481/1500... Est. remaining: 9m 8sRunning iteration 491/1500... Est. remaining: 9m 2sRunning iteration 501/1500... Est. remaining: 8m 56sbest_combination: {'lookbacks': [177, 187, 193], 'score': np.float64(0.19073969306195002), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 50sRunning iteration 521/1500... Est. remaining: 8m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,198,498,431
Annual Return: 48.12%
Sharpe Ratio: 1.55610
Sortino Ratio: 1.519
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.297
Lookback periods: [176, 189, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 8m 41sRunning iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 29sRunning iteration 561/1500... Est. remaining: 8m 23sRunning iteration 571/1500... Est. remaining: 8m 17sRunning iteration 581/1500... Est. remaining: 8m 11sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 0sbest_combination: {'lookbacks': [176, 189, 200], 'score': np.float64(0.29707906412293417), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 54sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 43sRunning iteration 641/1500... Est. remaining: 7m 37sRunning iteration 651/1500... Est. remaining: 7m 32sRunning iteration 661/1500... Est. remaining: 7m 26sRunning iteration 671/1500... Est. remaining: 7m 21sRunning iteration 681/1500... Est. remaining: 7m 15sRunning iteration 691/1500... Est. remaining: 7m 9sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [176, 189, 200], 'score': np.float64(0.29707906412293417), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 58sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 47sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 36sRunning iteration 761/1500... Est. remaining: 6m 31sRunning iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 20sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [176, 189, 200], 'score': np.float64(0.29707906412293417), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 4sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 53sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 37sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [176, 189, 200], 'score': np.float64(0.29707906412293417), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,573,370,440
Annual Return: 47.79%
Sharpe Ratio: 1.57001
Sortino Ratio: 1.530
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.337
Lookback periods: [136, 156, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 44sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [136, 156, 164], 'score': np.float64(0.3365145471623453), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [136, 156, 164], 'score': np.float64(0.3365145471623453), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,724,062,964
Annual Return: 47.87%
Sharpe Ratio: 1.57292
Sortino Ratio: 1.533
Max Drawdown: -57.2%
Avg Drawdown: -11.6%
Normalized Score: 0.338
Lookback periods: [128, 157, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,266,212,514
Annual Return: 49.09%
Sharpe Ratio: 1.60582
Sortino Ratio: 1.568
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.576
Lookback periods: [136, 157, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [136, 157, 176], 'score': np.float64(0.5758812082701299), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [136, 157, 176], 'score': np.float64(0.5758812082701299), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,832,680,092
Annual Return: 49.70%
Sharpe Ratio: 1.62875
Sortino Ratio: 1.593
Max Drawdown: -57.2%
Avg Drawdown: -10.6%
Normalized Score: 0.781
Lookback periods: [139, 154, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(0.7805853084295797), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 0.78
best_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(0.7805853084295797), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 154, 171] (score: 0.7806)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 154, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,832,680,091.79
Average Annualized Gain: 49.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Mon Aug 25 17:34:19 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-25T17:34:19.512213
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 0.8944
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,480,724,845
Annual Return: 40.99%
Sharpe Ratio: 1.38587
Sortino Ratio: 1.325
Max Drawdown: -63.4%
Avg Drawdown: -13.3%
Normalized Score: -0.953
Lookback periods: [112, 123, 139] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,094,167,777
Annual Return: 39.76%
Sharpe Ratio: 1.36574
Sortino Ratio: 1.274
Max Drawdown: -62.8%
Avg Drawdown: -11.6%
Normalized Score: -0.785
Lookback periods: [53, 157, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,209,754,362
Annual Return: 44.17%
Sharpe Ratio: 1.44178
Sortino Ratio: 1.400
Max Drawdown: -62.7%
Avg Drawdown: -12.5%
Normalized Score: -0.360
Lookback periods: [151, 156, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,553,327,837
Annual Return: 43.22%
Sharpe Ratio: 1.47492
Sortino Ratio: 1.397
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: 0.336
Lookback periods: [87, 97, 127] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 18sRunning iteration 21/1500... Est. remaining: 22m 1sRunning iteration 31/1500... Est. remaining: 18m 44sRunning iteration 41/1500... Est. remaining: 17m 4sRunning iteration 51/1500... Est. remaining: 16m 1sRunning iteration 61/1500... Est. remaining: 15m 17sRunning iteration 71/1500... Est. remaining: 14m 47sRunning iteration 81/1500... Est. remaining: 14m 22sRunning iteration 91/1500... Est. remaining: 14m 1sRunning iteration 101/1500... Est. remaining: 13m 44sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 29sRunning iteration 121/1500... Est. remaining: 13m 15sRunning iteration 131/1500... Est. remaining: 13m 3sRunning iteration 141/1500... Est. remaining: 12m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,338,018,126
Annual Return: 47.03%
Sharpe Ratio: 1.54349
Sortino Ratio: 1.505
Max Drawdown: -58.1%
Avg Drawdown: -12.0%
Normalized Score: 0.414
Lookback periods: [144, 153, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 12m 52sRunning iteration 161/1500... Est. remaining: 12m 42sRunning iteration 171/1500... Est. remaining: 12m 33sRunning iteration 181/1500... Est. remaining: 12m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,871,295,364
Annual Return: 45.92%
Sharpe Ratio: 1.50247
Sortino Ratio: 1.465
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.557
Lookback periods: [156, 165, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 12m 23sRunning iteration 201/1500... Est. remaining: 12m 15sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 6sRunning iteration 221/1500... Est. remaining: 11m 58sRunning iteration 231/1500... Est. remaining: 11m 50sRunning iteration 241/1500... Est. remaining: 11m 42sRunning iteration 251/1500... Est. remaining: 11m 34sRunning iteration 261/1500... Est. remaining: 11m 26sRunning iteration 271/1500... Est. remaining: 11m 19sRunning iteration 281/1500... Est. remaining: 11m 11sRunning iteration 291/1500... Est. remaining: 11m 4sRunning iteration 301/1500... Est. remaining: 10m 57sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 51sRunning iteration 321/1500... Est. remaining: 10m 44sRunning iteration 331/1500... Est. remaining: 10m 37sRunning iteration 341/1500... Est. remaining: 10m 31sRunning iteration 351/1500... Est. remaining: 10m 24sRunning iteration 361/1500... Est. remaining: 10m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,504,043,667
Annual Return: 46.43%
Sharpe Ratio: 1.51918
Sortino Ratio: 1.475
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: 0.569
Lookback periods: [157, 160, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 371/1500... Est. remaining: 10m 16sRunning iteration 381/1500... Est. remaining: 10m 9sRunning iteration 391/1500... Est. remaining: 10m 3sRunning iteration 401/1500... Est. remaining: 9m 57sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 51sRunning iteration 421/1500... Est. remaining: 9m 44sRunning iteration 431/1500... Est. remaining: 9m 38sRunning iteration 441/1500... Est. remaining: 9m 32sRunning iteration 451/1500... Est. remaining: 9m 26sRunning iteration 461/1500... Est. remaining: 9m 20sRunning iteration 471/1500... Est. remaining: 9m 14sRunning iteration 481/1500... Est. remaining: 9m 8sRunning iteration 491/1500... Est. remaining: 9m 2sRunning iteration 501/1500... Est. remaining: 8m 56sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 51sRunning iteration 521/1500... Est. remaining: 8m 45sRunning iteration 531/1500... Est. remaining: 8m 39sRunning iteration 541/1500... Est. remaining: 8m 33sRunning iteration 551/1500... Est. remaining: 8m 27sRunning iteration 561/1500... Est. remaining: 8m 21sRunning iteration 571/1500... Est. remaining: 8m 16sRunning iteration 581/1500... Est. remaining: 8m 10sRunning iteration 591/1500... Est. remaining: 8m 4sRunning iteration 601/1500... Est. remaining: 7m 59sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 53sRunning iteration 621/1500... Est. remaining: 7m 47sRunning iteration 631/1500... Est. remaining: 7m 42sRunning iteration 641/1500... Est. remaining: 7m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,828,041,935
Annual Return: 47.35%
Sharpe Ratio: 1.54793
Sortino Ratio: 1.514
Max Drawdown: -59.0%
Avg Drawdown: -10.5%
Normalized Score: 0.712
Lookback periods: [157, 167, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 7m 32sRunning iteration 661/1500... Est. remaining: 7m 27sRunning iteration 671/1500... Est. remaining: 7m 21sRunning iteration 681/1500... Est. remaining: 7m 16sRunning iteration 691/1500... Est. remaining: 7m 10sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 59sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 48sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 37sRunning iteration 761/1500... Est. remaining: 6m 31sRunning iteration 771/1500... Est. remaining: 6m 26sRunning iteration 781/1500... Est. remaining: 6m 21sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 4sRunning iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,060,915,077
Annual Return: 48.05%
Sharpe Ratio: 1.57752
Sortino Ratio: 1.534
Max Drawdown: -55.0%
Avg Drawdown: -10.7%
Normalized Score: 0.954
Lookback periods: [146, 156, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 44sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 33sRunning iteration 881/1500... Est. remaining: 5m 27sRunning iteration 891/1500... Est. remaining: 5m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,484,978,638
Annual Return: 41.00%
Sharpe Ratio: 1.47793
Sortino Ratio: 1.373
Max Drawdown: -34.7%
Avg Drawdown: -9.7%
Normalized Score: 1.108
Lookback periods: [50, 60, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,375,937,386
Annual Return: 40.69%
Sharpe Ratio: 1.45964
Sortino Ratio: 1.364
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 1.143
Lookback periods: [50, 59, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 901/1500... Est. remaining: 5m 18sbest_combination: {'lookbacks': [50, 59, 87], 'score': np.float64(1.142961217533566), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,714,326,819
Annual Return: 41.59%
Sharpe Ratio: 1.47287
Sortino Ratio: 1.382
Max Drawdown: -35.6%
Avg Drawdown: -9.5%
Normalized Score: 1.158
Lookback periods: [51, 53, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 5m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,889,218,068
Annual Return: 41.98%
Sharpe Ratio: 1.49632
Sortino Ratio: 1.390
Max Drawdown: -35.7%
Avg Drawdown: -9.8%
Normalized Score: 1.183
Lookback periods: [51, 52, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 921/1500... Est. remaining: 5m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,987,623,688
Annual Return: 42.19%
Sharpe Ratio: 1.52293
Sortino Ratio: 1.427
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.531
Lookback periods: [50, 50, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 5m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,613,270,791
Annual Return: 43.32%
Sharpe Ratio: 1.54766
Sortino Ratio: 1.454
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.601
Lookback periods: [50, 54, 86] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 4m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,747,595,443
Annual Return: 44.82%
Sharpe Ratio: 1.59530
Sortino Ratio: 1.503
Max Drawdown: -35.6%
Avg Drawdown: -9.1%
Normalized Score: 1.808
Lookback periods: [50, 54, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 4m 54sRunning iteration 961/1500... Est. remaining: 4m 49sRunning iteration 971/1500... Est. remaining: 4m 43sRunning iteration 981/1500... Est. remaining: 4m 38sRunning iteration 991/1500... Est. remaining: 4m 32sRunning iteration 1001/1500... Est. remaining: 4m 27sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.8077517869543456), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 21sRunning iteration 1021/1500... Est. remaining: 4m 16sRunning iteration 1031/1500... Est. remaining: 4m 11sRunning iteration 1041/1500... Est. remaining: 4m 5sRunning iteration 1051/1500... Est. remaining: 4m 0sRunning iteration 1061/1500... Est. remaining: 3m 54sRunning iteration 1071/1500... Est. remaining: 3m 49sRunning iteration 1081/1500... Est. remaining: 3m 43sRunning iteration 1091/1500... Est. remaining: 3m 38sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.8077517869543456), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 27sRunning iteration 1121/1500... Est. remaining: 3m 22sRunning iteration 1131/1500... Est. remaining: 3m 16sRunning iteration 1141/1500... Est. remaining: 3m 11sRunning iteration 1151/1500... Est. remaining: 3m 5sRunning iteration 1161/1500... Est. remaining: 3m 0sRunning iteration 1171/1500... Est. remaining: 2m 55sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 44sRunning iteration 1201/1500... Est. remaining: 2m 39sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.8077517869543456), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 33sRunning iteration 1221/1500... Est. remaining: 2m 28sRunning iteration 1231/1500... Est. remaining: 2m 23sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 7sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 51sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.8077517869543456), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.8077517869543456), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,007,517,603
Annual Return: 45.10%
Sharpe Ratio: 1.59306
Sortino Ratio: 1.502
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.872
Lookback periods: [51, 54, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.2 minutes
Best normalized score: 1.87
best_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.8721770290960098), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [51, 54, 83] (score: 1.8722)

Monte Carlo simulation completed in 13.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [51, 54, 83] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 53 selections (12.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,007,517,603.28
Average Annualized Gain: 45.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 17:47:36 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $678,911,764
Annual Return: 37.85%
Sharpe Ratio: 1.30643
Sortino Ratio: 1.217
Max Drawdown: -59.1%
Avg Drawdown: -12.0%
Normalized Score: -1.021
Lookback periods: [54, 196, 226] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,430,908,600
Annual Return: 40.85%
Sharpe Ratio: 1.35258
Sortino Ratio: 1.301
Max Drawdown: -59.0%
Avg Drawdown: -13.2%
Normalized Score: -0.658
Lookback periods: [110, 192, 255] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,560,229,823
Annual Return: 41.20%
Sharpe Ratio: 1.37464
Sortino Ratio: 1.319
Max Drawdown: -64.4%
Avg Drawdown: -12.6%
Normalized Score: -0.648
Lookback periods: [237, 246, 288] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,677,518,519
Annual Return: 41.50%
Sharpe Ratio: 1.36835
Sortino Ratio: 1.322
Max Drawdown: -64.6%
Avg Drawdown: -12.5%
Normalized Score: -0.616
Lookback periods: [205, 251, 295] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,029,976,961
Annual Return: 39.52%
Sharpe Ratio: 1.41538
Sortino Ratio: 1.315
Max Drawdown: -51.1%
Avg Drawdown: -12.1%
Normalized Score: -0.320
Lookback periods: [38, 53, 125] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,749,071,693
Annual Return: 43.53%
Sharpe Ratio: 1.42141
Sortino Ratio: 1.378
Max Drawdown: -61.8%
Avg Drawdown: -12.8%
Normalized Score: -0.196
Lookback periods: [143, 194, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,090,245,814
Annual Return: 45.18%
Sharpe Ratio: 1.49392
Sortino Ratio: 1.456
Max Drawdown: -62.2%
Avg Drawdown: -12.0%
Normalized Score: 0.296
Lookback periods: [168, 252, 267] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 22m 21sRunning iteration 41/1500... Est. remaining: 19m 47sRunning iteration 51/1500... Est. remaining: 18m 11sRunning iteration 61/1500... Est. remaining: 17m 6sRunning iteration 71/1500... Est. remaining: 16m 18sRunning iteration 81/1500... Est. remaining: 15m 39sRunning iteration 91/1500... Est. remaining: 15m 11sRunning iteration 101/1500... Est. remaining: 14m 46sbest_combination: {'lookbacks': [168, 252, 267], 'score': np.float64(0.2958434370210623), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 23sRunning iteration 121/1500... Est. remaining: 14m 4sRunning iteration 131/1500... Est. remaining: 13m 47sRunning iteration 141/1500... Est. remaining: 13m 32sRunning iteration 151/1500... Est. remaining: 13m 18sRunning iteration 161/1500... Est. remaining: 13m 5sRunning iteration 171/1500... Est. remaining: 12m 53sRunning iteration 181/1500... Est. remaining: 12m 42sRunning iteration 191/1500... Est. remaining: 12m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,801,703,863
Annual Return: 44.88%
Sharpe Ratio: 1.47638
Sortino Ratio: 1.436
Max Drawdown: -55.0%
Avg Drawdown: -12.4%
Normalized Score: 0.365
Lookback periods: [125, 147, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 12m 29sbest_combination: {'lookbacks': [125, 147, 174], 'score': np.float64(0.3645667308422369), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 20sRunning iteration 221/1500... Est. remaining: 12m 10sRunning iteration 231/1500... Est. remaining: 12m 1sRunning iteration 241/1500... Est. remaining: 11m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,550,639,586
Annual Return: 46.47%
Sharpe Ratio: 1.52018
Sortino Ratio: 1.477
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: 0.805
Lookback periods: [156, 160, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 11m 50sRunning iteration 261/1500... Est. remaining: 11m 41sRunning iteration 271/1500... Est. remaining: 11m 33sRunning iteration 281/1500... Est. remaining: 11m 25sRunning iteration 291/1500... Est. remaining: 11m 17sRunning iteration 301/1500... Est. remaining: 11m 9sbest_combination: {'lookbacks': [156, 160, 176], 'score': np.float64(0.8047884868235478), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 2sRunning iteration 321/1500... Est. remaining: 10m 54sRunning iteration 331/1500... Est. remaining: 10m 47sRunning iteration 341/1500... Est. remaining: 10m 40sRunning iteration 351/1500... Est. remaining: 10m 33sRunning iteration 361/1500... Est. remaining: 10m 26sRunning iteration 371/1500... Est. remaining: 10m 19sRunning iteration 381/1500... Est. remaining: 10m 13sRunning iteration 391/1500... Est. remaining: 10m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,764,911,741
Annual Return: 48.87%
Sharpe Ratio: 1.59538
Sortino Ratio: 1.567
Max Drawdown: -58.5%
Avg Drawdown: -11.4%
Normalized Score: 1.187
Lookback periods: [142, 155, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 10m 3sbest_combination: {'lookbacks': [142, 155, 179], 'score': np.float64(1.187315915655879), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 57sRunning iteration 421/1500... Est. remaining: 9m 50sRunning iteration 431/1500... Est. remaining: 9m 44sRunning iteration 441/1500... Est. remaining: 9m 38sRunning iteration 451/1500... Est. remaining: 9m 31sRunning iteration 461/1500... Est. remaining: 9m 25sRunning iteration 471/1500... Est. remaining: 9m 19sRunning iteration 481/1500... Est. remaining: 9m 12sRunning iteration 491/1500... Est. remaining: 9m 6sRunning iteration 501/1500... Est. remaining: 9m 0sbest_combination: {'lookbacks': [142, 155, 179], 'score': np.float64(1.187315915655879), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 54sRunning iteration 521/1500... Est. remaining: 8m 48sRunning iteration 531/1500... Est. remaining: 8m 43sRunning iteration 541/1500... Est. remaining: 8m 37sRunning iteration 551/1500... Est. remaining: 8m 31sRunning iteration 561/1500... Est. remaining: 8m 25sRunning iteration 571/1500... Est. remaining: 8m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,617,288,669
Annual Return: 49.23%
Sharpe Ratio: 1.61511
Sortino Ratio: 1.580
Max Drawdown: -58.1%
Avg Drawdown: -11.2%
Normalized Score: 1.305
Lookback periods: [139, 153, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 8m 15sRunning iteration 591/1500... Est. remaining: 8m 9sRunning iteration 601/1500... Est. remaining: 8m 4sbest_combination: {'lookbacks': [139, 153, 179], 'score': np.float64(1.3049022432944153), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 58sRunning iteration 621/1500... Est. remaining: 7m 52sRunning iteration 631/1500... Est. remaining: 7m 46sRunning iteration 641/1500... Est. remaining: 7m 40sRunning iteration 651/1500... Est. remaining: 7m 35sRunning iteration 661/1500... Est. remaining: 7m 29sRunning iteration 671/1500... Est. remaining: 7m 23sRunning iteration 681/1500... Est. remaining: 7m 18sRunning iteration 691/1500... Est. remaining: 7m 12sRunning iteration 701/1500... Est. remaining: 7m 6sbest_combination: {'lookbacks': [139, 153, 179], 'score': np.float64(1.3049022432944153), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 1sRunning iteration 721/1500... Est. remaining: 6m 55sRunning iteration 731/1500... Est. remaining: 6m 50sRunning iteration 741/1500... Est. remaining: 6m 44sRunning iteration 751/1500... Est. remaining: 6m 38sRunning iteration 761/1500... Est. remaining: 6m 33sRunning iteration 771/1500... Est. remaining: 6m 27sRunning iteration 781/1500... Est. remaining: 6m 22sRunning iteration 791/1500... Est. remaining: 6m 16sRunning iteration 801/1500... Est. remaining: 6m 11sbest_combination: {'lookbacks': [139, 153, 179], 'score': np.float64(1.3049022432944153), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 5sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 54sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 27sRunning iteration 891/1500... Est. remaining: 5m 22sRunning iteration 901/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [139, 153, 179], 'score': np.float64(1.3049022432944153), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 11sRunning iteration 921/1500... Est. remaining: 5m 6sRunning iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 55sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 44sRunning iteration 971/1500... Est. remaining: 4m 39sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [139, 153, 179], 'score': np.float64(1.3049022432944153), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [139, 153, 179], 'score': np.float64(1.3049022432944153), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [139, 153, 179], 'score': np.float64(1.3049022432944153), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [139, 153, 179], 'score': np.float64(1.3049022432944153), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [139, 153, 179], 'score': np.float64(1.3049022432944153), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.30
best_combination: {'lookbacks': [139, 153, 179], 'score': np.float64(1.3049022432944153), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 153, 179] (score: 1.3049)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 153, 179] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 111 selections (26.7%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pine: 82 selections (19.7%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,617,288,669.37
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 18:00:48 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $131,061,324
Annual Return: 31.46%
Sharpe Ratio: 1.15293
Sortino Ratio: 1.037
Max Drawdown: -65.9%
Avg Drawdown: -15.1%
Normalized Score: -2.593
Lookback periods: [27, 89, 206] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $121,093,399
Annual Return: 31.16%
Sharpe Ratio: 1.10011
Sortino Ratio: 0.997
Max Drawdown: -62.2%
Avg Drawdown: -14.6%
Normalized Score: -2.554
Lookback periods: [52, 69, 232] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,026,938,489
Annual Return: 39.51%
Sharpe Ratio: 1.33165
Sortino Ratio: 1.257
Max Drawdown: -64.9%
Avg Drawdown: -12.8%
Normalized Score: -1.022
Lookback periods: [110, 118, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $967,106,268
Annual Return: 39.27%
Sharpe Ratio: 1.41136
Sortino Ratio: 1.304
Max Drawdown: -57.8%
Avg Drawdown: -10.7%
Normalized Score: -0.427
Lookback periods: [47, 55, 108] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 34m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $905,139,774
Annual Return: 39.00%
Sharpe Ratio: 1.43475
Sortino Ratio: 1.321
Max Drawdown: -52.9%
Avg Drawdown: -10.7%
Normalized Score: -0.241
Lookback periods: [33, 54, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 25m 8sRunning iteration 31/1500... Est. remaining: 20m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,104,734,541
Annual Return: 42.43%
Sharpe Ratio: 1.44386
Sortino Ratio: 1.372
Max Drawdown: -55.9%
Avg Drawdown: -11.1%
Normalized Score: 0.032
Lookback periods: [47, 133, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,602,631,324
Annual Return: 41.31%
Sharpe Ratio: 1.48774
Sortino Ratio: 1.396
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 0.907
Lookback periods: [40, 49, 52] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 20m 12sRunning iteration 51/1500... Est. remaining: 18m 32sRunning iteration 61/1500... Est. remaining: 17m 23sRunning iteration 71/1500... Est. remaining: 16m 32sRunning iteration 81/1500... Est. remaining: 15m 53sRunning iteration 91/1500... Est. remaining: 15m 21sRunning iteration 101/1500... Est. remaining: 14m 54sbest_combination: {'lookbacks': [40, 49, 52], 'score': np.float64(0.9074552091760781), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 31sRunning iteration 121/1500... Est. remaining: 14m 12sRunning iteration 131/1500... Est. remaining: 13m 54sRunning iteration 141/1500... Est. remaining: 13m 38sRunning iteration 151/1500... Est. remaining: 13m 24sRunning iteration 161/1500... Est. remaining: 13m 11sRunning iteration 171/1500... Est. remaining: 12m 59sRunning iteration 181/1500... Est. remaining: 12m 47sRunning iteration 191/1500... Est. remaining: 12m 37sRunning iteration 201/1500... Est. remaining: 12m 26sbest_combination: {'lookbacks': [40, 49, 52], 'score': np.float64(0.9074552091760781), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 16sRunning iteration 221/1500... Est. remaining: 12m 7sRunning iteration 231/1500... Est. remaining: 11m 59sRunning iteration 241/1500... Est. remaining: 11m 50sRunning iteration 251/1500... Est. remaining: 11m 42sRunning iteration 261/1500... Est. remaining: 11m 34sRunning iteration 271/1500... Est. remaining: 11m 26sRunning iteration 281/1500... Est. remaining: 11m 19sRunning iteration 291/1500... Est. remaining: 11m 12sRunning iteration 301/1500... Est. remaining: 11m 4sbest_combination: {'lookbacks': [40, 49, 52], 'score': np.float64(0.9074552091760781), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 57sRunning iteration 321/1500... Est. remaining: 10m 50sRunning iteration 331/1500... Est. remaining: 10m 43sRunning iteration 341/1500... Est. remaining: 10m 36sRunning iteration 351/1500... Est. remaining: 10m 30sRunning iteration 361/1500... Est. remaining: 10m 23sRunning iteration 371/1500... Est. remaining: 10m 16sRunning iteration 381/1500... Est. remaining: 10m 10sRunning iteration 391/1500... Est. remaining: 10m 4sRunning iteration 401/1500... Est. remaining: 9m 57sbest_combination: {'lookbacks': [40, 49, 52], 'score': np.float64(0.9074552091760781), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 51sRunning iteration 421/1500... Est. remaining: 9m 45sRunning iteration 431/1500... Est. remaining: 9m 39sRunning iteration 441/1500... Est. remaining: 9m 33sRunning iteration 451/1500... Est. remaining: 9m 27sRunning iteration 461/1500... Est. remaining: 9m 21sRunning iteration 471/1500... Est. remaining: 9m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,171,924,280
Annual Return: 42.56%
Sharpe Ratio: 1.54012
Sortino Ratio: 1.450
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.217
Lookback periods: [41, 51, 52] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 9m 11sRunning iteration 491/1500... Est. remaining: 9m 5sRunning iteration 501/1500... Est. remaining: 8m 59sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(1.2173576092253002), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 53sRunning iteration 521/1500... Est. remaining: 8m 47sRunning iteration 531/1500... Est. remaining: 8m 41sRunning iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 29sRunning iteration 561/1500... Est. remaining: 8m 23sRunning iteration 571/1500... Est. remaining: 8m 17sRunning iteration 581/1500... Est. remaining: 8m 12sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 0sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(1.2173576092253002), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 55sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 43sRunning iteration 641/1500... Est. remaining: 7m 38sRunning iteration 651/1500... Est. remaining: 7m 32sRunning iteration 661/1500... Est. remaining: 7m 26sRunning iteration 671/1500... Est. remaining: 7m 21sRunning iteration 681/1500... Est. remaining: 7m 15sRunning iteration 691/1500... Est. remaining: 7m 10sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(1.2173576092253002), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 58sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 47sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 36sRunning iteration 761/1500... Est. remaining: 6m 31sRunning iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 20sRunning iteration 791/1500... Est. remaining: 6m 14sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(1.2173576092253002), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(1.2173576092253002), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(1.2173576092253002), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(1.2173576092253002), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(1.2173576092253002), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(1.2173576092253002), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(1.2173576092253002), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 1.22
best_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(1.2173576092253002), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 51, 52] (score: 1.2174)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 51, 52] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 105 selections (25.2%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pine: 87 selections (20.9%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $2,171,924,279.55
Average Annualized Gain: 42.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 18:13:49 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $677,323,361
Annual Return: 37.84%
Sharpe Ratio: 1.28377
Sortino Ratio: 1.205
Max Drawdown: -69.2%
Avg Drawdown: -13.2%
Normalized Score: -1.219
Lookback periods: [90, 191, 259] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,075,720,676
Annual Return: 39.69%
Sharpe Ratio: 1.34553
Sortino Ratio: 1.280
Max Drawdown: -62.3%
Avg Drawdown: -13.7%
Normalized Score: -0.860
Lookback periods: [109, 112, 139] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,977,270,240
Annual Return: 42.17%
Sharpe Ratio: 1.41781
Sortino Ratio: 1.362
Max Drawdown: -57.7%
Avg Drawdown: -13.0%
Normalized Score: -0.355
Lookback periods: [101, 133, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,412,621,039
Annual Return: 46.36%
Sharpe Ratio: 1.49576
Sortino Ratio: 1.454
Max Drawdown: -63.0%
Avg Drawdown: -11.9%
Normalized Score: 0.032
Lookback periods: [178, 194, 213] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 23sRunning iteration 31/1500... Est. remaining: 19m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,304,986,842
Annual Return: 46.28%
Sharpe Ratio: 1.50318
Sortino Ratio: 1.458
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.257
Lookback periods: [184, 205, 231] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 3sRunning iteration 51/1500... Est. remaining: 16m 48sRunning iteration 61/1500... Est. remaining: 15m 58sRunning iteration 71/1500... Est. remaining: 15m 20sRunning iteration 81/1500... Est. remaining: 14m 50sRunning iteration 91/1500... Est. remaining: 14m 26sRunning iteration 101/1500... Est. remaining: 14m 5sbest_combination: {'lookbacks': [184, 205, 231], 'score': np.float64(0.2574384259718106), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 46sRunning iteration 121/1500... Est. remaining: 13m 31sRunning iteration 131/1500... Est. remaining: 13m 18sRunning iteration 141/1500... Est. remaining: 13m 5sRunning iteration 151/1500... Est. remaining: 12m 54sRunning iteration 161/1500... Est. remaining: 12m 43sRunning iteration 171/1500... Est. remaining: 12m 33sRunning iteration 181/1500... Est. remaining: 12m 23sRunning iteration 191/1500... Est. remaining: 12m 14sRunning iteration 201/1500... Est. remaining: 12m 6sbest_combination: {'lookbacks': [184, 205, 231], 'score': np.float64(0.2574384259718106), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 57sRunning iteration 221/1500... Est. remaining: 11m 49sRunning iteration 231/1500... Est. remaining: 11m 41sRunning iteration 241/1500... Est. remaining: 11m 33sRunning iteration 251/1500... Est. remaining: 11m 26sRunning iteration 261/1500... Est. remaining: 11m 18sRunning iteration 271/1500... Est. remaining: 11m 11sRunning iteration 281/1500... Est. remaining: 11m 4sRunning iteration 291/1500... Est. remaining: 10m 57sRunning iteration 301/1500... Est. remaining: 10m 52sbest_combination: {'lookbacks': [184, 205, 231], 'score': np.float64(0.2574384259718106), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 45sRunning iteration 321/1500... Est. remaining: 10m 38sRunning iteration 331/1500... Est. remaining: 10m 32sRunning iteration 341/1500... Est. remaining: 10m 25sRunning iteration 351/1500... Est. remaining: 10m 19sRunning iteration 361/1500... Est. remaining: 10m 13sRunning iteration 371/1500... Est. remaining: 10m 6sRunning iteration 381/1500... Est. remaining: 10m 0sRunning iteration 391/1500... Est. remaining: 9m 54sRunning iteration 401/1500... Est. remaining: 9m 48sbest_combination: {'lookbacks': [184, 205, 231], 'score': np.float64(0.2574384259718106), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 42sRunning iteration 421/1500... Est. remaining: 9m 36sRunning iteration 431/1500... Est. remaining: 9m 30sRunning iteration 441/1500... Est. remaining: 9m 24sRunning iteration 451/1500... Est. remaining: 9m 18sRunning iteration 461/1500... Est. remaining: 9m 13sRunning iteration 471/1500... Est. remaining: 9m 7sRunning iteration 481/1500... Est. remaining: 9m 1sRunning iteration 491/1500... Est. remaining: 8m 55sRunning iteration 501/1500... Est. remaining: 8m 50sbest_combination: {'lookbacks': [184, 205, 231], 'score': np.float64(0.2574384259718106), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 44sRunning iteration 521/1500... Est. remaining: 8m 38sRunning iteration 531/1500... Est. remaining: 8m 33sRunning iteration 541/1500... Est. remaining: 8m 27sRunning iteration 551/1500... Est. remaining: 8m 21sRunning iteration 561/1500... Est. remaining: 8m 16sRunning iteration 571/1500... Est. remaining: 8m 10sRunning iteration 581/1500... Est. remaining: 8m 5sRunning iteration 591/1500... Est. remaining: 7m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,802,295,336
Annual Return: 43.61%
Sharpe Ratio: 1.48761
Sortino Ratio: 1.418
Max Drawdown: -52.3%
Avg Drawdown: -10.5%
Normalized Score: 0.332
Lookback periods: [87, 99, 138] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/1500... Est. remaining: 7m 55sbest_combination: {'lookbacks': [87, 99, 138], 'score': np.float64(0.3316044410063818), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 50sRunning iteration 621/1500... Est. remaining: 7m 44sRunning iteration 631/1500... Est. remaining: 7m 39sRunning iteration 641/1500... Est. remaining: 7m 33sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 22sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 11sRunning iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 0sbest_combination: {'lookbacks': [87, 99, 138], 'score': np.float64(0.3316044410063818), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,498,556,960
Annual Return: 44.53%
Sharpe Ratio: 1.51703
Sortino Ratio: 1.450
Max Drawdown: -52.3%
Avg Drawdown: -10.8%
Normalized Score: 0.398
Lookback periods: [90, 108, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 6m 51sRunning iteration 731/1500... Est. remaining: 6m 45sRunning iteration 741/1500... Est. remaining: 6m 40sRunning iteration 751/1500... Est. remaining: 6m 34sRunning iteration 761/1500... Est. remaining: 6m 29sRunning iteration 771/1500... Est. remaining: 6m 23sRunning iteration 781/1500... Est. remaining: 6m 18sRunning iteration 791/1500... Est. remaining: 6m 12sRunning iteration 801/1500... Est. remaining: 6m 7sbest_combination: {'lookbacks': [90, 108, 144], 'score': np.float64(0.39833708789575584), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 2sRunning iteration 821/1500... Est. remaining: 5m 56sRunning iteration 831/1500... Est. remaining: 5m 51sRunning iteration 841/1500... Est. remaining: 5m 46sRunning iteration 851/1500... Est. remaining: 5m 40sRunning iteration 861/1500... Est. remaining: 5m 35sRunning iteration 871/1500... Est. remaining: 5m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,434,922,098
Annual Return: 44.45%
Sharpe Ratio: 1.50331
Sortino Ratio: 1.440
Max Drawdown: -52.3%
Avg Drawdown: -10.5%
Normalized Score: 0.405
Lookback periods: [94, 111, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [94, 111, 134], 'score': np.float64(0.4050820442130291), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [94, 111, 134], 'score': np.float64(0.4050820442130291), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,498,200,797
Annual Return: 41.04%
Sharpe Ratio: 1.49737
Sortino Ratio: 1.399
Max Drawdown: -36.1%
Avg Drawdown: -10.0%
Normalized Score: 0.714
Lookback periods: [48, 56, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,718,204,370
Annual Return: 43.48%
Sharpe Ratio: 1.54753
Sortino Ratio: 1.441
Max Drawdown: -38.0%
Avg Drawdown: -9.6%
Normalized Score: 0.922
Lookback periods: [49, 53, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,020,760,971
Annual Return: 42.26%
Sharpe Ratio: 1.54768
Sortino Ratio: 1.446
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.065
Lookback periods: [44, 48, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,045,189,455
Annual Return: 43.95%
Sharpe Ratio: 1.60085
Sortino Ratio: 1.504
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.343
Lookback periods: [47, 49, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,558,671,600
Annual Return: 45.64%
Sharpe Ratio: 1.64939
Sortino Ratio: 1.554
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.536
Lookback periods: [42, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [42, 50, 96], 'score': np.float64(1.5358529814621362), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [42, 50, 96], 'score': np.float64(1.5358529814621362), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [42, 50, 96], 'score': np.float64(1.5358529814621362), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [42, 50, 96], 'score': np.float64(1.5358529814621362), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,900,997,505
Annual Return: 44.98%
Sharpe Ratio: 1.64710
Sortino Ratio: 1.543
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.563
Lookback periods: [41, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,008,937,375
Annual Return: 46.03%
Sharpe Ratio: 1.67914
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.614
Lookback periods: [41, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.61
best_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.6135555625372437), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 52, 98] (score: 1.6136)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,008,937,374.54
Average Annualized Gain: 46.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 18:26:57 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $341,747,758
Annual Return: 35.15%
Sharpe Ratio: 1.26478
Sortino Ratio: 1.163
Max Drawdown: -62.1%
Avg Drawdown: -11.3%
Normalized Score: -1.049
Lookback periods: [29, 206, 244] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $640,925,484
Annual Return: 37.62%
Sharpe Ratio: 1.29110
Sortino Ratio: 1.213
Max Drawdown: -59.5%
Avg Drawdown: -13.3%
Normalized Score: -0.894
Lookback periods: [89, 134, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,579,763,305
Annual Return: 41.25%
Sharpe Ratio: 1.49951
Sortino Ratio: 1.389
Max Drawdown: -51.1%
Avg Drawdown: -11.3%
Normalized Score: 0.216
Lookback periods: [40, 52, 103] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 44sRunning iteration 21/1500... Est. remaining: 20m 8sRunning iteration 31/1500... Est. remaining: 17m 28sRunning iteration 41/1500... Est. remaining: 16m 5sRunning iteration 51/1500... Est. remaining: 15m 13sRunning iteration 61/1500... Est. remaining: 14m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,619,260,879
Annual Return: 46.52%
Sharpe Ratio: 1.50414
Sortino Ratio: 1.468
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.437
Lookback periods: [173, 183, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 14m 37sRunning iteration 81/1500... Est. remaining: 14m 11sRunning iteration 91/1500... Est. remaining: 13m 50sRunning iteration 101/1500... Est. remaining: 13m 32sbest_combination: {'lookbacks': [173, 183, 188], 'score': np.float64(0.43737196560385305), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 17sRunning iteration 121/1500... Est. remaining: 13m 3sRunning iteration 131/1500... Est. remaining: 12m 52sRunning iteration 141/1500... Est. remaining: 12m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,658,987,135
Annual Return: 41.45%
Sharpe Ratio: 1.50304
Sortino Ratio: 1.403
Max Drawdown: -41.0%
Avg Drawdown: -9.3%
Normalized Score: 0.685
Lookback periods: [36, 79, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 12m 41sRunning iteration 161/1500... Est. remaining: 12m 32sRunning iteration 171/1500... Est. remaining: 12m 22sRunning iteration 181/1500... Est. remaining: 12m 13sRunning iteration 191/1500... Est. remaining: 12m 4sRunning iteration 201/1500... Est. remaining: 11m 55sbest_combination: {'lookbacks': [36, 79, 97], 'score': np.float64(0.6854370706629337), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 47sRunning iteration 221/1500... Est. remaining: 11m 39sRunning iteration 231/1500... Est. remaining: 11m 31sRunning iteration 241/1500... Est. remaining: 11m 24sRunning iteration 251/1500... Est. remaining: 11m 17sRunning iteration 261/1500... Est. remaining: 11m 10sRunning iteration 271/1500... Est. remaining: 11m 3sRunning iteration 281/1500... Est. remaining: 10m 56sRunning iteration 291/1500... Est. remaining: 10m 49sRunning iteration 301/1500... Est. remaining: 10m 43sbest_combination: {'lookbacks': [36, 79, 97], 'score': np.float64(0.6854370706629337), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 36sRunning iteration 321/1500... Est. remaining: 10m 30sRunning iteration 331/1500... Est. remaining: 10m 23sRunning iteration 341/1500... Est. remaining: 10m 17sRunning iteration 351/1500... Est. remaining: 10m 11sRunning iteration 361/1500... Est. remaining: 10m 5sRunning iteration 371/1500... Est. remaining: 9m 59sRunning iteration 381/1500... Est. remaining: 9m 53sRunning iteration 391/1500... Est. remaining: 9m 47sRunning iteration 401/1500... Est. remaining: 9m 41sbest_combination: {'lookbacks': [36, 79, 97], 'score': np.float64(0.6854370706629337), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 35sRunning iteration 421/1500... Est. remaining: 9m 29sRunning iteration 431/1500... Est. remaining: 9m 23sRunning iteration 441/1500... Est. remaining: 9m 17sRunning iteration 451/1500... Est. remaining: 9m 12sRunning iteration 461/1500... Est. remaining: 9m 6sRunning iteration 471/1500... Est. remaining: 9m 0sRunning iteration 481/1500... Est. remaining: 8m 54sRunning iteration 491/1500... Est. remaining: 8m 49sRunning iteration 501/1500... Est. remaining: 8m 43sbest_combination: {'lookbacks': [36, 79, 97], 'score': np.float64(0.6854370706629337), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 37sRunning iteration 521/1500... Est. remaining: 8m 32sRunning iteration 531/1500... Est. remaining: 8m 26sRunning iteration 541/1500... Est. remaining: 8m 20sRunning iteration 551/1500... Est. remaining: 8m 15sRunning iteration 561/1500... Est. remaining: 8m 9sRunning iteration 571/1500... Est. remaining: 8m 4sRunning iteration 581/1500... Est. remaining: 7m 58sRunning iteration 591/1500... Est. remaining: 7m 53sRunning iteration 601/1500... Est. remaining: 7m 47sbest_combination: {'lookbacks': [36, 79, 97], 'score': np.float64(0.6854370706629337), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 42sRunning iteration 621/1500... Est. remaining: 7m 36sRunning iteration 631/1500... Est. remaining: 7m 31sRunning iteration 641/1500... Est. remaining: 7m 26sRunning iteration 651/1500... Est. remaining: 7m 20sRunning iteration 661/1500... Est. remaining: 7m 15sRunning iteration 671/1500... Est. remaining: 7m 9sRunning iteration 681/1500... Est. remaining: 7m 4sRunning iteration 691/1500... Est. remaining: 6m 59sRunning iteration 701/1500... Est. remaining: 6m 53sbest_combination: {'lookbacks': [36, 79, 97], 'score': np.float64(0.6854370706629337), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 48sRunning iteration 721/1500... Est. remaining: 6m 43sRunning iteration 731/1500... Est. remaining: 6m 37sRunning iteration 741/1500... Est. remaining: 6m 32sRunning iteration 751/1500... Est. remaining: 6m 27sRunning iteration 761/1500... Est. remaining: 6m 21sRunning iteration 771/1500... Est. remaining: 6m 16sRunning iteration 781/1500... Est. remaining: 6m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,628,367,406
Annual Return: 43.34%
Sharpe Ratio: 1.57592
Sortino Ratio: 1.471
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.193
Lookback periods: [41, 45, 111] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 6m 7sRunning iteration 801/1500... Est. remaining: 6m 1sbest_combination: {'lookbacks': [41, 45, 111], 'score': np.float64(1.1928219725194995), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 56sRunning iteration 821/1500... Est. remaining: 5m 51sRunning iteration 831/1500... Est. remaining: 5m 45sRunning iteration 841/1500... Est. remaining: 5m 40sRunning iteration 851/1500... Est. remaining: 5m 35sRunning iteration 861/1500... Est. remaining: 5m 30sRunning iteration 871/1500... Est. remaining: 5m 24sRunning iteration 881/1500... Est. remaining: 5m 19sRunning iteration 891/1500... Est. remaining: 5m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,064,140,836
Annual Return: 43.98%
Sharpe Ratio: 1.60674
Sortino Ratio: 1.500
Max Drawdown: -35.2%
Avg Drawdown: -8.9%
Normalized Score: 1.288
Lookback periods: [41, 42, 112] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 901/1500... Est. remaining: 5m 9sbest_combination: {'lookbacks': [41, 42, 112], 'score': np.float64(1.2883697065783593), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 4sRunning iteration 921/1500... Est. remaining: 4m 59sRunning iteration 931/1500... Est. remaining: 4m 54sRunning iteration 941/1500... Est. remaining: 4m 48sRunning iteration 951/1500... Est. remaining: 4m 43sRunning iteration 961/1500... Est. remaining: 4m 38sRunning iteration 971/1500... Est. remaining: 4m 33sRunning iteration 981/1500... Est. remaining: 4m 27sRunning iteration 991/1500... Est. remaining: 4m 22sRunning iteration 1001/1500... Est. remaining: 4m 17sbest_combination: {'lookbacks': [41, 42, 112], 'score': np.float64(1.2883697065783593), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,512,602,142
Annual Return: 44.55%
Sharpe Ratio: 1.59205
Sortino Ratio: 1.502
Max Drawdown: -35.2%
Avg Drawdown: -8.8%
Normalized Score: 1.319
Lookback periods: [42, 44, 111] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1021/1500... Est. remaining: 4m 7sRunning iteration 1031/1500... Est. remaining: 4m 2sRunning iteration 1041/1500... Est. remaining: 3m 56sRunning iteration 1051/1500... Est. remaining: 3m 51sRunning iteration 1061/1500... Est. remaining: 3m 46sRunning iteration 1071/1500... Est. remaining: 3m 41sRunning iteration 1081/1500... Est. remaining: 3m 36sRunning iteration 1091/1500... Est. remaining: 3m 31sRunning iteration 1101/1500... Est. remaining: 3m 25sbest_combination: {'lookbacks': [42, 44, 111], 'score': np.float64(1.3189365116863236), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 20sRunning iteration 1121/1500... Est. remaining: 3m 15sRunning iteration 1131/1500... Est. remaining: 3m 10sRunning iteration 1141/1500... Est. remaining: 3m 5sRunning iteration 1151/1500... Est. remaining: 2m 59sRunning iteration 1161/1500... Est. remaining: 2m 54sRunning iteration 1171/1500... Est. remaining: 2m 49sRunning iteration 1181/1500... Est. remaining: 2m 44sRunning iteration 1191/1500... Est. remaining: 2m 39sRunning iteration 1201/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [42, 44, 111], 'score': np.float64(1.3189365116863236), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 28sRunning iteration 1221/1500... Est. remaining: 2m 23sRunning iteration 1231/1500... Est. remaining: 2m 18sRunning iteration 1241/1500... Est. remaining: 2m 13sRunning iteration 1251/1500... Est. remaining: 2m 8sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 57sRunning iteration 1281/1500... Est. remaining: 1m 52sRunning iteration 1291/1500... Est. remaining: 1m 47sRunning iteration 1301/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [42, 44, 111], 'score': np.float64(1.3189365116863236), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 21sRunning iteration 1351/1500... Est. remaining: 1m 16sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [42, 44, 111], 'score': np.float64(1.3189365116863236), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.7 minutes
Best normalized score: 1.32
best_combination: {'lookbacks': [42, 44, 111], 'score': np.float64(1.3189365116863236), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 44, 111] (score: 1.3189)

Monte Carlo simulation completed in 12.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 44, 111] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 52 selections (12.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,512,602,142.19
Average Annualized Gain: 44.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 176m 50s
End time: Mon Aug 25 18:39:44 EDT 2025
Average time per successful run: 11m 47s
==============================================================
✓ All runs completed successfully!
