Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Tue Aug 26 22:57:30 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Tue Aug 26 22:57:30 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $586,190,016
Annual Return: 37.27%
Sharpe Ratio: 1.28284
Sortino Ratio: 1.195
Max Drawdown: -61.8%
Avg Drawdown: -12.2%
Normalized Score: -0.725
Lookback periods: [48, 155, 229] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $868,182,434
Annual Return: 38.83%
Sharpe Ratio: 1.33799
Sortino Ratio: 1.250
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: -0.447
Lookback periods: [75, 108, 141] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,308,973,775
Annual Return: 42.81%
Sharpe Ratio: 1.38545
Sortino Ratio: 1.337
Max Drawdown: -67.7%
Avg Drawdown: -12.2%
Normalized Score: -0.184
Lookback periods: [190, 197, 226] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,038,030,490
Annual Return: 43.94%
Sharpe Ratio: 1.43896
Sortino Ratio: 1.407
Max Drawdown: -63.8%
Avg Drawdown: -13.5%
Normalized Score: 0.038
Lookback periods: [130, 145, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 15m 34sRunning iteration 21/1500... Est. remaining: 10m 46sRunning iteration 31/1500... Est. remaining: 9m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,216,807,053
Annual Return: 46.21%
Sharpe Ratio: 1.51284
Sortino Ratio: 1.475
Max Drawdown: -58.5%
Avg Drawdown: -11.5%
Normalized Score: 0.422
Lookback periods: [144, 158, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 8m 40sRunning iteration 51/1500... Est. remaining: 8m 4sRunning iteration 61/1500... Est. remaining: 8m 17sRunning iteration 71/1500... Est. remaining: 8m 44sRunning iteration 81/1500... Est. remaining: 9m 3sRunning iteration 91/1500... Est. remaining: 9m 15sRunning iteration 101/1500... Est. remaining: 9m 24sbest_combination: {'lookbacks': [144, 158, 170], 'score': np.float64(0.42159466664804396), 'visits': 1}
Running iteration 111/1500... Est. remaining: 9m 31sRunning iteration 121/1500... Est. remaining: 9m 36sRunning iteration 131/1500... Est. remaining: 9m 38sRunning iteration 141/1500... Est. remaining: 9m 40sRunning iteration 151/1500... Est. remaining: 9m 41sRunning iteration 161/1500... Est. remaining: 9m 41sRunning iteration 171/1500... Est. remaining: 9m 41sRunning iteration 181/1500... Est. remaining: 9m 40sRunning iteration 191/1500... Est. remaining: 9m 39sRunning iteration 201/1500... Est. remaining: 9m 38sbest_combination: {'lookbacks': [144, 158, 170], 'score': np.float64(0.42159466664804396), 'visits': 1}
Running iteration 211/1500... Est. remaining: 9m 36sRunning iteration 221/1500... Est. remaining: 9m 33sRunning iteration 231/1500... Est. remaining: 9m 31sRunning iteration 241/1500... Est. remaining: 9m 28sRunning iteration 251/1500... Est. remaining: 9m 25sRunning iteration 261/1500... Est. remaining: 9m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,852,846,628
Annual Return: 46.69%
Sharpe Ratio: 1.52637
Sortino Ratio: 1.487
Max Drawdown: -56.0%
Avg Drawdown: -11.8%
Normalized Score: 0.496
Lookback periods: [135, 160, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/1500... Est. remaining: 9m 24sRunning iteration 281/1500... Est. remaining: 9m 21sRunning iteration 291/1500... Est. remaining: 9m 18sRunning iteration 301/1500... Est. remaining: 9m 14sbest_combination: {'lookbacks': [135, 160, 203], 'score': np.float64(0.4955903684978399), 'visits': 1}
Running iteration 311/1500... Est. remaining: 9m 10sRunning iteration 321/1500... Est. remaining: 9m 6sRunning iteration 331/1500... Est. remaining: 9m 2sRunning iteration 341/1500... Est. remaining: 8m 58sRunning iteration 351/1500... Est. remaining: 8m 54sRunning iteration 361/1500... Est. remaining: 8m 50sRunning iteration 371/1500... Est. remaining: 8m 46sRunning iteration 381/1500... Est. remaining: 8m 41sRunning iteration 391/1500... Est. remaining: 8m 37sRunning iteration 401/1500... Est. remaining: 8m 33sbest_combination: {'lookbacks': [135, 160, 203], 'score': np.float64(0.4955903684978399), 'visits': 1}
Running iteration 411/1500... Est. remaining: 8m 28sRunning iteration 421/1500... Est. remaining: 8m 24sRunning iteration 431/1500... Est. remaining: 8m 20sRunning iteration 441/1500... Est. remaining: 8m 16sRunning iteration 451/1500... Est. remaining: 8m 11sRunning iteration 461/1500... Est. remaining: 8m 7sRunning iteration 471/1500... Est. remaining: 8m 2sRunning iteration 481/1500... Est. remaining: 7m 58sRunning iteration 491/1500... Est. remaining: 7m 53sRunning iteration 501/1500... Est. remaining: 7m 49sbest_combination: {'lookbacks': [135, 160, 203], 'score': np.float64(0.4955903684978399), 'visits': 1}
Running iteration 511/1500... Est. remaining: 7m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,586,999,932
Annual Return: 47.19%
Sharpe Ratio: 1.55099
Sortino Ratio: 1.515
Max Drawdown: -64.4%
Avg Drawdown: -12.1%
Normalized Score: 0.507
Lookback periods: [141, 153, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 7m 42sRunning iteration 531/1500... Est. remaining: 7m 37sRunning iteration 541/1500... Est. remaining: 7m 33sRunning iteration 551/1500... Est. remaining: 7m 28sRunning iteration 561/1500... Est. remaining: 7m 24sRunning iteration 571/1500... Est. remaining: 7m 19sRunning iteration 581/1500... Est. remaining: 7m 15sRunning iteration 591/1500... Est. remaining: 7m 10sRunning iteration 601/1500... Est. remaining: 7m 5sbest_combination: {'lookbacks': [141, 153, 190], 'score': np.float64(0.5069261289842999), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 1sRunning iteration 621/1500... Est. remaining: 6m 56sRunning iteration 631/1500... Est. remaining: 6m 52sRunning iteration 641/1500... Est. remaining: 6m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,187,588,146
Annual Return: 47.56%
Sharpe Ratio: 1.54259
Sortino Ratio: 1.507
Max Drawdown: -58.5%
Avg Drawdown: -12.2%
Normalized Score: 0.553
Lookback periods: [150, 156, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 6m 44sRunning iteration 661/1500... Est. remaining: 6m 39sRunning iteration 671/1500... Est. remaining: 6m 35sRunning iteration 681/1500... Est. remaining: 6m 30sRunning iteration 691/1500... Est. remaining: 6m 25sRunning iteration 701/1500... Est. remaining: 6m 21sbest_combination: {'lookbacks': [150, 156, 197], 'score': np.float64(0.552980614740918), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 16sRunning iteration 721/1500... Est. remaining: 6m 11sRunning iteration 731/1500... Est. remaining: 6m 6sRunning iteration 741/1500... Est. remaining: 6m 2sRunning iteration 751/1500... Est. remaining: 5m 57sRunning iteration 761/1500... Est. remaining: 5m 52sRunning iteration 771/1500... Est. remaining: 5m 48sRunning iteration 781/1500... Est. remaining: 5m 43sRunning iteration 791/1500... Est. remaining: 5m 38sRunning iteration 801/1500... Est. remaining: 5m 34sbest_combination: {'lookbacks': [150, 156, 197], 'score': np.float64(0.552980614740918), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,275,226,855
Annual Return: 48.16%
Sharpe Ratio: 1.58361
Sortino Ratio: 1.548
Max Drawdown: -57.3%
Avg Drawdown: -11.3%
Normalized Score: 0.720
Lookback periods: [135, 153, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 811/1500... Est. remaining: 5m 30sRunning iteration 821/1500... Est. remaining: 5m 25sRunning iteration 831/1500... Est. remaining: 5m 20sRunning iteration 841/1500... Est. remaining: 5m 16sRunning iteration 851/1500... Est. remaining: 5m 11sRunning iteration 861/1500... Est. remaining: 5m 6sRunning iteration 871/1500... Est. remaining: 5m 1sRunning iteration 881/1500... Est. remaining: 4m 56sRunning iteration 891/1500... Est. remaining: 4m 52sRunning iteration 901/1500... Est. remaining: 4m 47sbest_combination: {'lookbacks': [135, 153, 205], 'score': np.float64(0.7204909765548698), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 42sRunning iteration 921/1500... Est. remaining: 4m 37sRunning iteration 931/1500... Est. remaining: 4m 32sRunning iteration 941/1500... Est. remaining: 4m 28sRunning iteration 951/1500... Est. remaining: 4m 23sRunning iteration 961/1500... Est. remaining: 4m 18sRunning iteration 971/1500... Est. remaining: 4m 13sRunning iteration 981/1500... Est. remaining: 4m 9sRunning iteration 991/1500... Est. remaining: 4m 4sRunning iteration 1001/1500... Est. remaining: 3m 59sbest_combination: {'lookbacks': [135, 153, 205], 'score': np.float64(0.7204909765548698), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 3m 54sRunning iteration 1021/1500... Est. remaining: 3m 49sRunning iteration 1031/1500... Est. remaining: 3m 45sRunning iteration 1041/1500... Est. remaining: 3m 40sRunning iteration 1051/1500... Est. remaining: 3m 35sRunning iteration 1061/1500... Est. remaining: 3m 30sRunning iteration 1071/1500... Est. remaining: 3m 25sRunning iteration 1081/1500... Est. remaining: 3m 21sRunning iteration 1091/1500... Est. remaining: 3m 16sRunning iteration 1101/1500... Est. remaining: 3m 11sbest_combination: {'lookbacks': [135, 153, 205], 'score': np.float64(0.7204909765548698), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 6sRunning iteration 1121/1500... Est. remaining: 3m 2sRunning iteration 1131/1500... Est. remaining: 2m 57sRunning iteration 1141/1500... Est. remaining: 2m 52sRunning iteration 1151/1500... Est. remaining: 2m 47sRunning iteration 1161/1500... Est. remaining: 2m 42sRunning iteration 1171/1500... Est. remaining: 2m 38sRunning iteration 1181/1500... Est. remaining: 2m 33sRunning iteration 1191/1500... Est. remaining: 2m 28sRunning iteration 1201/1500... Est. remaining: 2m 23sbest_combination: {'lookbacks': [135, 153, 205], 'score': np.float64(0.7204909765548698), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 19sRunning iteration 1221/1500... Est. remaining: 2m 14sRunning iteration 1231/1500... Est. remaining: 2m 9sRunning iteration 1241/1500... Est. remaining: 2m 4sRunning iteration 1251/1500... Est. remaining: 2m 0sRunning iteration 1261/1500... Est. remaining: 1m 55sRunning iteration 1271/1500... Est. remaining: 1m 50sRunning iteration 1281/1500... Est. remaining: 1m 45sRunning iteration 1291/1500... Est. remaining: 1m 40sRunning iteration 1301/1500... Est. remaining: 1m 36sbest_combination: {'lookbacks': [135, 153, 205], 'score': np.float64(0.7204909765548698), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 31sRunning iteration 1321/1500... Est. remaining: 1m 26sRunning iteration 1331/1500... Est. remaining: 1m 21sRunning iteration 1341/1500... Est. remaining: 1m 16sRunning iteration 1351/1500... Est. remaining: 1m 12sRunning iteration 1361/1500... Est. remaining: 1m 7sRunning iteration 1371/1500... Est. remaining: 1m 2sRunning iteration 1381/1500... Est. remaining: 0m 57sRunning iteration 1391/1500... Est. remaining: 0m 52sRunning iteration 1401/1500... Est. remaining: 0m 48sbest_combination: {'lookbacks': [135, 153, 205], 'score': np.float64(0.7204909765548698), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 43sRunning iteration 1421/1500... Est. remaining: 0m 38sRunning iteration 1431/1500... Est. remaining: 0m 33sRunning iteration 1441/1500... Est. remaining: 0m 28sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.1 minutes
Best normalized score: 0.72
best_combination: {'lookbacks': [135, 153, 205], 'score': np.float64(0.7204909765548698), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 153, 205] (score: 0.7205)

Monte Carlo simulation completed in 12.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 153, 205] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 118 selections (28.4%)
2. sp500_hma: 114 selections (27.4%)
3. naz100_pi: 74 selections (17.8%)
4. naz100_pine: 74 selections (17.8%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,275,226,854.67
Average Annualized Gain: 48.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Tue Aug 26 23:09:41 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,038,829,624
Annual Return: 43.94%
Sharpe Ratio: 1.43685
Sortino Ratio: 1.394
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: -0.417
Lookback periods: [163, 188, 207] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 22m 24sRunning iteration 21/1500... Est. remaining: 17m 21sRunning iteration 31/1500... Est. remaining: 15m 33sRunning iteration 41/1500... Est. remaining: 14m 38sRunning iteration 51/1500... Est. remaining: 14m 2sRunning iteration 61/1500... Est. remaining: 13m 36sRunning iteration 71/1500... Est. remaining: 13m 16sRunning iteration 81/1500... Est. remaining: 13m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,857,813,656
Annual Return: 43.69%
Sharpe Ratio: 1.47230
Sortino Ratio: 1.403
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: -0.188
Lookback periods: [80, 115, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 13m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,086,308,563
Annual Return: 42.39%
Sharpe Ratio: 1.51451
Sortino Ratio: 1.417
Max Drawdown: -51.1%
Avg Drawdown: -10.3%
Normalized Score: -0.091
Lookback periods: [48, 53, 106] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 13m 10sbest_combination: {'lookbacks': [48, 53, 106], 'score': np.float64(-0.0908225771470449), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 57sRunning iteration 121/1500... Est. remaining: 12m 45sRunning iteration 131/1500... Est. remaining: 12m 34sRunning iteration 141/1500... Est. remaining: 12m 25sRunning iteration 151/1500... Est. remaining: 12m 15sRunning iteration 161/1500... Est. remaining: 12m 6sRunning iteration 171/1500... Est. remaining: 11m 57sRunning iteration 181/1500... Est. remaining: 11m 49sRunning iteration 191/1500... Est. remaining: 11m 41sRunning iteration 201/1500... Est. remaining: 11m 33sbest_combination: {'lookbacks': [48, 53, 106], 'score': np.float64(-0.0908225771470449), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 25sRunning iteration 221/1500... Est. remaining: 11m 18sRunning iteration 231/1500... Est. remaining: 11m 11sRunning iteration 241/1500... Est. remaining: 11m 4sRunning iteration 251/1500... Est. remaining: 10m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,467,675,036
Annual Return: 45.55%
Sharpe Ratio: 1.51937
Sortino Ratio: 1.476
Max Drawdown: -60.8%
Avg Drawdown: -11.9%
Normalized Score: 0.176
Lookback periods: [169, 251, 270] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 10m 57sRunning iteration 271/1500... Est. remaining: 10m 50sRunning iteration 281/1500... Est. remaining: 10m 44sRunning iteration 291/1500... Est. remaining: 10m 37sRunning iteration 301/1500... Est. remaining: 10m 31sbest_combination: {'lookbacks': [169, 251, 270], 'score': np.float64(0.17605649400206477), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 25sRunning iteration 321/1500... Est. remaining: 10m 18sRunning iteration 331/1500... Est. remaining: 10m 12sRunning iteration 341/1500... Est. remaining: 10m 6sRunning iteration 351/1500... Est. remaining: 10m 0sRunning iteration 361/1500... Est. remaining: 9m 54sRunning iteration 371/1500... Est. remaining: 9m 48sRunning iteration 381/1500... Est. remaining: 9m 42sRunning iteration 391/1500... Est. remaining: 9m 36sRunning iteration 401/1500... Est. remaining: 9m 30sbest_combination: {'lookbacks': [169, 251, 270], 'score': np.float64(0.17605649400206477), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 24sRunning iteration 421/1500... Est. remaining: 9m 19sRunning iteration 431/1500... Est. remaining: 9m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,027,551,475
Annual Return: 48.54%
Sharpe Ratio: 1.58576
Sortino Ratio: 1.558
Max Drawdown: -57.3%
Avg Drawdown: -11.9%
Normalized Score: 0.897
Lookback periods: [136, 153, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 10sRunning iteration 451/1500... Est. remaining: 9m 5sRunning iteration 461/1500... Est. remaining: 8m 59sRunning iteration 471/1500... Est. remaining: 8m 53sRunning iteration 481/1500... Est. remaining: 8m 48sRunning iteration 491/1500... Est. remaining: 8m 42sRunning iteration 501/1500... Est. remaining: 8m 36sbest_combination: {'lookbacks': [136, 153, 188], 'score': np.float64(0.8974123243232288), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 31sRunning iteration 521/1500... Est. remaining: 8m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,234,768,547
Annual Return: 48.63%
Sharpe Ratio: 1.58929
Sortino Ratio: 1.557
Max Drawdown: -57.3%
Avg Drawdown: -11.8%
Normalized Score: 0.930
Lookback periods: [136, 155, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 8m 22sRunning iteration 541/1500... Est. remaining: 8m 16sRunning iteration 551/1500... Est. remaining: 8m 11sRunning iteration 561/1500... Est. remaining: 8m 5sRunning iteration 571/1500... Est. remaining: 8m 0sRunning iteration 581/1500... Est. remaining: 7m 54sRunning iteration 591/1500... Est. remaining: 7m 49sRunning iteration 601/1500... Est. remaining: 7m 43sbest_combination: {'lookbacks': [136, 155, 188], 'score': np.float64(0.9302618428694401), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 38sRunning iteration 621/1500... Est. remaining: 7m 32sRunning iteration 631/1500... Est. remaining: 7m 27sRunning iteration 641/1500... Est. remaining: 7m 21sRunning iteration 651/1500... Est. remaining: 7m 15sRunning iteration 661/1500... Est. remaining: 7m 10sRunning iteration 671/1500... Est. remaining: 7m 4sRunning iteration 681/1500... Est. remaining: 6m 59sRunning iteration 691/1500... Est. remaining: 6m 53sRunning iteration 701/1500... Est. remaining: 6m 48sbest_combination: {'lookbacks': [136, 155, 188], 'score': np.float64(0.9302618428694401), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 42sRunning iteration 721/1500... Est. remaining: 6m 37sRunning iteration 731/1500... Est. remaining: 6m 32sRunning iteration 741/1500... Est. remaining: 6m 26sRunning iteration 751/1500... Est. remaining: 6m 21sRunning iteration 761/1500... Est. remaining: 6m 15sRunning iteration 771/1500... Est. remaining: 6m 10sRunning iteration 781/1500... Est. remaining: 6m 5sRunning iteration 791/1500... Est. remaining: 5m 59sRunning iteration 801/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [136, 155, 188], 'score': np.float64(0.9302618428694401), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 49sRunning iteration 821/1500... Est. remaining: 5m 44sRunning iteration 831/1500... Est. remaining: 5m 38sRunning iteration 841/1500... Est. remaining: 5m 33sRunning iteration 851/1500... Est. remaining: 5m 28sRunning iteration 861/1500... Est. remaining: 5m 23sRunning iteration 871/1500... Est. remaining: 5m 17sRunning iteration 881/1500... Est. remaining: 5m 12sRunning iteration 891/1500... Est. remaining: 5m 7sRunning iteration 901/1500... Est. remaining: 5m 2sbest_combination: {'lookbacks': [136, 155, 188], 'score': np.float64(0.9302618428694401), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 57sRunning iteration 921/1500... Est. remaining: 4m 51sRunning iteration 931/1500... Est. remaining: 4m 46sRunning iteration 941/1500... Est. remaining: 4m 41sRunning iteration 951/1500... Est. remaining: 4m 36sRunning iteration 961/1500... Est. remaining: 4m 31sRunning iteration 971/1500... Est. remaining: 7m 39sRunning iteration 981/1500... Est. remaining: 7m 28sRunning iteration 991/1500... Est. remaining: 7m 18sRunning iteration 1001/1500... Est. remaining: 7m 7sbest_combination: {'lookbacks': [136, 155, 188], 'score': np.float64(0.9302618428694401), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 6m 57sRunning iteration 1021/1500... Est. remaining: 6m 47sRunning iteration 1031/1500... Est. remaining: 6m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,281,676,807
Annual Return: 48.66%
Sharpe Ratio: 1.60329
Sortino Ratio: 1.566
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 1.024
Lookback periods: [135, 155, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1041/1500... Est. remaining: 6m 27sRunning iteration 1051/1500... Est. remaining: 6m 17sRunning iteration 1061/1500... Est. remaining: 6m 7sRunning iteration 1071/1500... Est. remaining: 5m 57sRunning iteration 1081/1500... Est. remaining: 5m 48sRunning iteration 1091/1500... Est. remaining: 5m 38sRunning iteration 1101/1500... Est. remaining: 5m 29sbest_combination: {'lookbacks': [135, 155, 179], 'score': np.float64(1.0243315761625917), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 5m 19sRunning iteration 1121/1500... Est. remaining: 5m 10sRunning iteration 1131/1500... Est. remaining: 5m 1sRunning iteration 1141/1500... Est. remaining: 4m 52sRunning iteration 1151/1500... Est. remaining: 4m 43sRunning iteration 1161/1500... Est. remaining: 4m 34sRunning iteration 1171/1500... Est. remaining: 4m 25sRunning iteration 1181/1500... Est. remaining: 4m 16sRunning iteration 1191/1500... Est. remaining: 4m 7sRunning iteration 1201/1500... Est. remaining: 3m 58sbest_combination: {'lookbacks': [135, 155, 179], 'score': np.float64(1.0243315761625917), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 50sRunning iteration 1221/1500... Est. remaining: 3m 41sRunning iteration 1231/1500... Est. remaining: 3m 32sRunning iteration 1241/1500... Est. remaining: 3m 24sRunning iteration 1251/1500... Est. remaining: 3m 15sRunning iteration 1261/1500... Est. remaining: 3m 7sRunning iteration 1271/1500... Est. remaining: 2m 59sRunning iteration 1281/1500... Est. remaining: 2m 50sRunning iteration 1291/1500... Est. remaining: 2m 42sRunning iteration 1301/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [135, 155, 179], 'score': np.float64(1.0243315761625917), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 26sRunning iteration 1321/1500... Est. remaining: 2m 18sRunning iteration 1331/1500... Est. remaining: 2m 10sRunning iteration 1341/1500... Est. remaining: 2m 2sRunning iteration 1351/1500... Est. remaining: 1m 54sRunning iteration 1361/1500... Est. remaining: 1m 46sRunning iteration 1371/1500... Est. remaining: 1m 38sRunning iteration 1381/1500... Est. remaining: 1m 30sRunning iteration 1391/1500... Est. remaining: 1m 22sRunning iteration 1401/1500... Est. remaining: 1m 15sbest_combination: {'lookbacks': [135, 155, 179], 'score': np.float64(1.0243315761625917), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 7sRunning iteration 1421/1500... Est. remaining: 0m 59sRunning iteration 1431/1500... Est. remaining: 0m 52sRunning iteration 1441/1500... Est. remaining: 0m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,041,881,516
Annual Return: 45.13%
Sharpe Ratio: 1.62867
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.052
Lookback periods: [41, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1451/1500... Est. remaining: 0m 37sRunning iteration 1461/1500... Est. remaining: 0m 29sRunning iteration 1471/1500... Est. remaining: 0m 22sRunning iteration 1481/1500... Est. remaining: 0m 14sRunning iteration 1491/1500... Est. remaining: 0m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,578,955,643
Annual Return: 45.66%
Sharpe Ratio: 1.64886
Sortino Ratio: 1.552
Max Drawdown: -34.7%
Avg Drawdown: -8.1%
Normalized Score: 1.219
Lookback periods: [42, 50, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv

Monte Carlo simulation completed in 18.4 minutes
Best normalized score: 1.22
best_combination: {'lookbacks': [42, 50, 97], 'score': np.float64(1.2187545239584157), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 50, 97] (score: 1.2188)

Monte Carlo simulation completed in 18.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 50, 97] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 107 selections (25.7%)
2. naz100_hma: 101 selections (24.3%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 72 selections (17.3%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,578,955,642.59
Average Annualized Gain: 45.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Tue Aug 26 23:28:14 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $590,161,786
Annual Return: 37.30%
Sharpe Ratio: 1.25787
Sortino Ratio: 1.182
Max Drawdown: -57.3%
Avg Drawdown: -13.5%
Normalized Score: -3.268
Lookback periods: [79, 156, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $664,404,778
Annual Return: 37.77%
Sharpe Ratio: 1.26498
Sortino Ratio: 1.202
Max Drawdown: -72.0%
Avg Drawdown: -13.5%
Normalized Score: -3.217
Lookback periods: [114, 199, 252] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $982,367,327
Annual Return: 39.33%
Sharpe Ratio: 1.29053
Sortino Ratio: 1.237
Max Drawdown: -62.3%
Avg Drawdown: -13.3%
Normalized Score: -2.567
Lookback periods: [157, 206, 294] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,719,592,356
Annual Return: 41.60%
Sharpe Ratio: 1.36710
Sortino Ratio: 1.317
Max Drawdown: -69.5%
Avg Drawdown: -12.9%
Normalized Score: -1.720
Lookback periods: [188, 218, 277] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,081,930,903
Annual Return: 44.00%
Sharpe Ratio: 1.43375
Sortino Ratio: 1.387
Max Drawdown: -62.3%
Avg Drawdown: -12.7%
Normalized Score: -0.736
Lookback periods: [175, 188, 250] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 34m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,224,178,083
Annual Return: 44.19%
Sharpe Ratio: 1.43762
Sortino Ratio: 1.398
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: -0.581
Lookback periods: [173, 187, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 41sRunning iteration 31/1500... Est. remaining: 20m 28sRunning iteration 41/1500... Est. remaining: 18m 15sRunning iteration 51/1500... Est. remaining: 16m 53sRunning iteration 61/1500... Est. remaining: 15m 57sRunning iteration 71/1500... Est. remaining: 15m 17sRunning iteration 81/1500... Est. remaining: 14m 45sRunning iteration 91/1500... Est. remaining: 14m 18sRunning iteration 101/1500... Est. remaining: 13m 57sbest_combination: {'lookbacks': [173, 187, 205], 'score': np.float64(-0.5811980940231704), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 38sRunning iteration 121/1500... Est. remaining: 13m 21sRunning iteration 131/1500... Est. remaining: 13m 6sRunning iteration 141/1500... Est. remaining: 12m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,516,205,833
Annual Return: 44.55%
Sharpe Ratio: 1.44478
Sortino Ratio: 1.419
Max Drawdown: -62.6%
Avg Drawdown: -11.8%
Normalized Score: -0.479
Lookback periods: [146, 172, 216] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 12m 52sRunning iteration 161/1500... Est. remaining: 12m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,541,221,902
Annual Return: 46.46%
Sharpe Ratio: 1.51228
Sortino Ratio: 1.470
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.301
Lookback periods: [179, 193, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 12m 38sRunning iteration 181/1500... Est. remaining: 12m 28sRunning iteration 191/1500... Est. remaining: 12m 17sRunning iteration 201/1500... Est. remaining: 12m 8sbest_combination: {'lookbacks': [179, 193, 194], 'score': np.float64(0.3013666600724796), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 58sRunning iteration 221/1500... Est. remaining: 11m 49sRunning iteration 231/1500... Est. remaining: 11m 40sRunning iteration 241/1500... Est. remaining: 11m 32sRunning iteration 251/1500... Est. remaining: 11m 23sRunning iteration 261/1500... Est. remaining: 11m 16sRunning iteration 271/1500... Est. remaining: 11m 8sRunning iteration 281/1500... Est. remaining: 11m 1sRunning iteration 291/1500... Est. remaining: 10m 53sRunning iteration 301/1500... Est. remaining: 10m 46sbest_combination: {'lookbacks': [179, 193, 194], 'score': np.float64(0.3013666600724796), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 39sRunning iteration 321/1500... Est. remaining: 10m 32sRunning iteration 331/1500... Est. remaining: 10m 26sRunning iteration 341/1500... Est. remaining: 10m 19sRunning iteration 351/1500... Est. remaining: 10m 12sRunning iteration 361/1500... Est. remaining: 10m 6sRunning iteration 371/1500... Est. remaining: 9m 59sRunning iteration 381/1500... Est. remaining: 9m 53sRunning iteration 391/1500... Est. remaining: 9m 47sRunning iteration 401/1500... Est. remaining: 9m 41sbest_combination: {'lookbacks': [179, 193, 194], 'score': np.float64(0.3013666600724796), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 34sRunning iteration 421/1500... Est. remaining: 9m 28sRunning iteration 431/1500... Est. remaining: 9m 22sRunning iteration 441/1500... Est. remaining: 9m 15sRunning iteration 451/1500... Est. remaining: 9m 9sRunning iteration 461/1500... Est. remaining: 9m 3sRunning iteration 471/1500... Est. remaining: 8m 57sRunning iteration 481/1500... Est. remaining: 8m 51sRunning iteration 491/1500... Est. remaining: 8m 45sRunning iteration 501/1500... Est. remaining: 8m 39sbest_combination: {'lookbacks': [179, 193, 194], 'score': np.float64(0.3013666600724796), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,134,772,485
Annual Return: 46.89%
Sharpe Ratio: 1.51626
Sortino Ratio: 1.482
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.464
Lookback periods: [174, 185, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 8m 36sRunning iteration 521/1500... Est. remaining: 8m 30sRunning iteration 531/1500... Est. remaining: 8m 24sRunning iteration 541/1500... Est. remaining: 8m 19sRunning iteration 551/1500... Est. remaining: 8m 13sRunning iteration 561/1500... Est. remaining: 8m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,838,497,990
Annual Return: 47.35%
Sharpe Ratio: 1.52789
Sortino Ratio: 1.489
Max Drawdown: -59.9%
Avg Drawdown: -11.5%
Normalized Score: 0.607
Lookback periods: [176, 197, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 8m 4sRunning iteration 581/1500... Est. remaining: 7m 59sRunning iteration 591/1500... Est. remaining: 7m 53sRunning iteration 601/1500... Est. remaining: 7m 48sbest_combination: {'lookbacks': [176, 197, 200], 'score': np.float64(0.6065133901403823), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 42sRunning iteration 621/1500... Est. remaining: 7m 37sRunning iteration 631/1500... Est. remaining: 7m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,041,517,076
Annual Return: 48.04%
Sharpe Ratio: 1.55001
Sortino Ratio: 1.521
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.908
Lookback periods: [175, 189, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 7m 27sRunning iteration 651/1500... Est. remaining: 7m 22sRunning iteration 661/1500... Est. remaining: 7m 16sRunning iteration 671/1500... Est. remaining: 7m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,337,046,352
Annual Return: 49.12%
Sharpe Ratio: 1.57918
Sortino Ratio: 1.538
Max Drawdown: -59.6%
Avg Drawdown: -11.4%
Normalized Score: 1.282
Lookback periods: [183, 187, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 7m 7sRunning iteration 691/1500... Est. remaining: 7m 1sRunning iteration 701/1500... Est. remaining: 6m 56sbest_combination: {'lookbacks': [183, 187, 188], 'score': np.float64(1.2822023514611596), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 51sRunning iteration 721/1500... Est. remaining: 6m 45sRunning iteration 731/1500... Est. remaining: 6m 40sRunning iteration 741/1500... Est. remaining: 6m 34sRunning iteration 751/1500... Est. remaining: 6m 29sRunning iteration 761/1500... Est. remaining: 6m 24sRunning iteration 771/1500... Est. remaining: 6m 18sRunning iteration 781/1500... Est. remaining: 6m 13sRunning iteration 791/1500... Est. remaining: 6m 7sRunning iteration 801/1500... Est. remaining: 6m 2sbest_combination: {'lookbacks': [183, 187, 188], 'score': np.float64(1.2822023514611596), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 57sRunning iteration 821/1500... Est. remaining: 5m 51sRunning iteration 831/1500... Est. remaining: 5m 46sRunning iteration 841/1500... Est. remaining: 5m 41sRunning iteration 851/1500... Est. remaining: 5m 35sRunning iteration 861/1500... Est. remaining: 5m 30sRunning iteration 871/1500... Est. remaining: 5m 25sRunning iteration 881/1500... Est. remaining: 5m 19sRunning iteration 891/1500... Est. remaining: 5m 14sRunning iteration 901/1500... Est. remaining: 5m 9sbest_combination: {'lookbacks': [183, 187, 188], 'score': np.float64(1.2822023514611596), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 4sRunning iteration 921/1500... Est. remaining: 4m 58sRunning iteration 931/1500... Est. remaining: 4m 53sRunning iteration 941/1500... Est. remaining: 4m 48sRunning iteration 951/1500... Est. remaining: 4m 43sRunning iteration 961/1500... Est. remaining: 4m 37sRunning iteration 971/1500... Est. remaining: 4m 32sRunning iteration 981/1500... Est. remaining: 4m 27sRunning iteration 991/1500... Est. remaining: 4m 22sRunning iteration 1001/1500... Est. remaining: 4m 17sbest_combination: {'lookbacks': [183, 187, 188], 'score': np.float64(1.2822023514611596), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 11sRunning iteration 1021/1500... Est. remaining: 4m 6sRunning iteration 1031/1500... Est. remaining: 4m 1sRunning iteration 1041/1500... Est. remaining: 3m 56sRunning iteration 1051/1500... Est. remaining: 3m 50sRunning iteration 1061/1500... Est. remaining: 3m 45sRunning iteration 1071/1500... Est. remaining: 3m 40sRunning iteration 1081/1500... Est. remaining: 3m 35sRunning iteration 1091/1500... Est. remaining: 3m 30sRunning iteration 1101/1500... Est. remaining: 3m 24sbest_combination: {'lookbacks': [183, 187, 188], 'score': np.float64(1.2822023514611596), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 19sRunning iteration 1121/1500... Est. remaining: 3m 14sRunning iteration 1131/1500... Est. remaining: 3m 9sRunning iteration 1141/1500... Est. remaining: 3m 3sRunning iteration 1151/1500... Est. remaining: 2m 58sRunning iteration 1161/1500... Est. remaining: 2m 53sRunning iteration 1171/1500... Est. remaining: 2m 48sRunning iteration 1181/1500... Est. remaining: 2m 43sRunning iteration 1191/1500... Est. remaining: 2m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,871,980,276
Annual Return: 49.34%
Sharpe Ratio: 1.59427
Sortino Ratio: 1.551
Max Drawdown: -59.6%
Avg Drawdown: -11.0%
Normalized Score: 1.396
Lookback periods: [183, 188, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [183, 188, 194], 'score': np.float64(1.3962172270666007), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 28sRunning iteration 1221/1500... Est. remaining: 2m 22sRunning iteration 1231/1500... Est. remaining: 2m 17sRunning iteration 1241/1500... Est. remaining: 2m 12sRunning iteration 1251/1500... Est. remaining: 2m 7sRunning iteration 1261/1500... Est. remaining: 2m 2sRunning iteration 1271/1500... Est. remaining: 1m 57sRunning iteration 1281/1500... Est. remaining: 1m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,822,829,486
Annual Return: 50.05%
Sharpe Ratio: 1.61118
Sortino Ratio: 1.581
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 1.674
Lookback periods: [177, 189, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1291/1500... Est. remaining: 1m 47sRunning iteration 1301/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [177, 189, 197], 'score': np.float64(1.6743928384231883), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 36sRunning iteration 1321/1500... Est. remaining: 1m 31sRunning iteration 1331/1500... Est. remaining: 1m 26sRunning iteration 1341/1500... Est. remaining: 1m 21sRunning iteration 1351/1500... Est. remaining: 1m 16sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [177, 189, 197], 'score': np.float64(1.6743928384231883), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.7 minutes
Best normalized score: 1.67
best_combination: {'lookbacks': [177, 189, 197], 'score': np.float64(1.6743928384231883), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [177, 189, 197] (score: 1.6744)

Monte Carlo simulation completed in 12.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [177, 189, 197] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 120 selections (28.8%)
2. sp500_hma: 105 selections (25.2%)
3. naz100_pine: 85 selections (20.4%)
4. naz100_pi: 67 selections (16.1%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,822,829,486.29
Average Annualized Gain: 50.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Tue Aug 26 23:41:02 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $432,524,029
Annual Return: 36.07%
Sharpe Ratio: 1.26278
Sortino Ratio: 1.172
Max Drawdown: -64.7%
Avg Drawdown: -12.9%
Normalized Score: -1.437
Lookback periods: [90, 162, 298] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,221,696,207
Annual Return: 40.21%
Sharpe Ratio: 1.34229
Sortino Ratio: 1.287
Max Drawdown: -61.7%
Avg Drawdown: -12.3%
Normalized Score: -0.640
Lookback periods: [186, 252, 263] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,089,431,349
Annual Return: 39.75%
Sharpe Ratio: 1.35759
Sortino Ratio: 1.269
Max Drawdown: -52.3%
Avg Drawdown: -12.4%
Normalized Score: -0.369
Lookback periods: [96, 97, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 26m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,716,665,854
Annual Return: 44.78%
Sharpe Ratio: 1.50123
Sortino Ratio: 1.449
Max Drawdown: -56.9%
Avg Drawdown: -12.1%
Normalized Score: 0.632
Lookback periods: [117, 128, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 20m 43sRunning iteration 31/1500... Est. remaining: 17m 41sRunning iteration 41/1500... Est. remaining: 16m 8sRunning iteration 51/1500... Est. remaining: 15m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,579,797,377
Annual Return: 46.49%
Sharpe Ratio: 1.52443
Sortino Ratio: 1.486
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.825
Lookback periods: [152, 167, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 14m 59sRunning iteration 71/1500... Est. remaining: 14m 27sRunning iteration 81/1500... Est. remaining: 13m 58sRunning iteration 91/1500... Est. remaining: 13m 36sRunning iteration 101/1500... Est. remaining: 13m 17sbest_combination: {'lookbacks': [152, 167, 181], 'score': np.float64(0.8248031539302121), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 0sRunning iteration 121/1500... Est. remaining: 12m 45sRunning iteration 131/1500... Est. remaining: 12m 32sRunning iteration 141/1500... Est. remaining: 12m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,830,416,746
Annual Return: 41.85%
Sharpe Ratio: 1.54153
Sortino Ratio: 1.430
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.315
Lookback periods: [43, 52, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 12m 20sRunning iteration 161/1500... Est. remaining: 12m 10sRunning iteration 171/1500... Est. remaining: 12m 0sRunning iteration 181/1500... Est. remaining: 11m 51sRunning iteration 191/1500... Est. remaining: 11m 41sRunning iteration 201/1500... Est. remaining: 11m 33sbest_combination: {'lookbacks': [43, 52, 83], 'score': np.float64(1.3154679892637864), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 25sRunning iteration 221/1500... Est. remaining: 11m 16sRunning iteration 231/1500... Est. remaining: 11m 9sRunning iteration 241/1500... Est. remaining: 11m 2sRunning iteration 251/1500... Est. remaining: 10m 55sRunning iteration 261/1500... Est. remaining: 10m 48sRunning iteration 271/1500... Est. remaining: 10m 41sRunning iteration 281/1500... Est. remaining: 10m 34sRunning iteration 291/1500... Est. remaining: 10m 27sRunning iteration 301/1500... Est. remaining: 10m 21sbest_combination: {'lookbacks': [43, 52, 83], 'score': np.float64(1.3154679892637864), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 14sRunning iteration 321/1500... Est. remaining: 10m 8sRunning iteration 331/1500... Est. remaining: 10m 1sRunning iteration 341/1500... Est. remaining: 9m 55sRunning iteration 351/1500... Est. remaining: 9m 49sRunning iteration 361/1500... Est. remaining: 9m 43sRunning iteration 371/1500... Est. remaining: 9m 37sRunning iteration 381/1500... Est. remaining: 9m 32sRunning iteration 391/1500... Est. remaining: 9m 26sRunning iteration 401/1500... Est. remaining: 9m 20sbest_combination: {'lookbacks': [43, 52, 83], 'score': np.float64(1.3154679892637864), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,297,194,635
Annual Return: 42.79%
Sharpe Ratio: 1.55078
Sortino Ratio: 1.448
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.421
Lookback periods: [47, 49, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,175,345,337
Annual Return: 44.13%
Sharpe Ratio: 1.60027
Sortino Ratio: 1.503
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.779
Lookback periods: [47, 52, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 9m 10sRunning iteration 441/1500... Est. remaining: 9m 4sRunning iteration 451/1500... Est. remaining: 8m 58sRunning iteration 461/1500... Est. remaining: 8m 53sRunning iteration 471/1500... Est. remaining: 8m 47sRunning iteration 481/1500... Est. remaining: 8m 42sRunning iteration 491/1500... Est. remaining: 8m 36sRunning iteration 501/1500... Est. remaining: 8m 30sbest_combination: {'lookbacks': [47, 52, 88], 'score': np.float64(1.7786410524357859), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 25sRunning iteration 521/1500... Est. remaining: 8m 19sRunning iteration 531/1500... Est. remaining: 8m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,991,609,847
Annual Return: 45.08%
Sharpe Ratio: 1.64802
Sortino Ratio: 1.543
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 2.092
Lookback periods: [42, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 8m 10sRunning iteration 551/1500... Est. remaining: 8m 5sRunning iteration 561/1500... Est. remaining: 7m 59sRunning iteration 571/1500... Est. remaining: 7m 53sRunning iteration 581/1500... Est. remaining: 7m 48sRunning iteration 591/1500... Est. remaining: 7m 43sRunning iteration 601/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [42, 52, 96], 'score': np.float64(2.0917879001565685), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 32sRunning iteration 621/1500... Est. remaining: 7m 26sRunning iteration 631/1500... Est. remaining: 7m 21sRunning iteration 641/1500... Est. remaining: 7m 15sRunning iteration 651/1500... Est. remaining: 7m 10sRunning iteration 661/1500... Est. remaining: 7m 4sRunning iteration 671/1500... Est. remaining: 6m 59sRunning iteration 681/1500... Est. remaining: 6m 54sRunning iteration 691/1500... Est. remaining: 6m 48sRunning iteration 701/1500... Est. remaining: 6m 43sbest_combination: {'lookbacks': [42, 52, 96], 'score': np.float64(2.0917879001565685), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 38sRunning iteration 721/1500... Est. remaining: 6m 32sRunning iteration 731/1500... Est. remaining: 6m 27sRunning iteration 741/1500... Est. remaining: 6m 22sRunning iteration 751/1500... Est. remaining: 6m 16sRunning iteration 761/1500... Est. remaining: 6m 11sRunning iteration 771/1500... Est. remaining: 6m 6sRunning iteration 781/1500... Est. remaining: 6m 0sRunning iteration 791/1500... Est. remaining: 5m 55sRunning iteration 801/1500... Est. remaining: 5m 50sbest_combination: {'lookbacks': [42, 52, 96], 'score': np.float64(2.0917879001565685), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 45sRunning iteration 821/1500... Est. remaining: 5m 39sRunning iteration 831/1500... Est. remaining: 5m 34sRunning iteration 841/1500... Est. remaining: 5m 29sRunning iteration 851/1500... Est. remaining: 5m 24sRunning iteration 861/1500... Est. remaining: 5m 19sRunning iteration 871/1500... Est. remaining: 5m 14sRunning iteration 881/1500... Est. remaining: 5m 9sRunning iteration 891/1500... Est. remaining: 5m 3sRunning iteration 901/1500... Est. remaining: 4m 58sbest_combination: {'lookbacks': [42, 52, 96], 'score': np.float64(2.0917879001565685), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 53sRunning iteration 921/1500... Est. remaining: 4m 48sRunning iteration 931/1500... Est. remaining: 4m 43sRunning iteration 941/1500... Est. remaining: 4m 38sRunning iteration 951/1500... Est. remaining: 4m 33sRunning iteration 961/1500... Est. remaining: 4m 28sRunning iteration 971/1500... Est. remaining: 4m 23sRunning iteration 981/1500... Est. remaining: 4m 18sRunning iteration 991/1500... Est. remaining: 4m 13sRunning iteration 1001/1500... Est. remaining: 4m 7sbest_combination: {'lookbacks': [42, 52, 96], 'score': np.float64(2.0917879001565685), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,900,997,505
Annual Return: 44.98%
Sharpe Ratio: 1.64710
Sortino Ratio: 1.543
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 2.100
Lookback periods: [41, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1021/1500... Est. remaining: 3m 58sRunning iteration 1031/1500... Est. remaining: 3m 53sRunning iteration 1041/1500... Est. remaining: 3m 48sRunning iteration 1051/1500... Est. remaining: 3m 43sRunning iteration 1061/1500... Est. remaining: 3m 38sRunning iteration 1071/1500... Est. remaining: 3m 33sRunning iteration 1081/1500... Est. remaining: 3m 28sRunning iteration 1091/1500... Est. remaining: 3m 23sRunning iteration 1101/1500... Est. remaining: 3m 18sbest_combination: {'lookbacks': [41, 51, 98], 'score': np.float64(2.0997818352949267), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 13sRunning iteration 1121/1500... Est. remaining: 3m 8sRunning iteration 1131/1500... Est. remaining: 3m 3sRunning iteration 1141/1500... Est. remaining: 2m 58sRunning iteration 1151/1500... Est. remaining: 2m 53sRunning iteration 1161/1500... Est. remaining: 2m 47sRunning iteration 1171/1500... Est. remaining: 2m 42sRunning iteration 1181/1500... Est. remaining: 2m 38sRunning iteration 1191/1500... Est. remaining: 2m 33sRunning iteration 1201/1500... Est. remaining: 2m 28sbest_combination: {'lookbacks': [41, 51, 98], 'score': np.float64(2.0997818352949267), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 23sRunning iteration 1221/1500... Est. remaining: 2m 18sRunning iteration 1231/1500... Est. remaining: 2m 13sRunning iteration 1241/1500... Est. remaining: 2m 8sRunning iteration 1251/1500... Est. remaining: 2m 3sRunning iteration 1261/1500... Est. remaining: 1m 58sRunning iteration 1271/1500... Est. remaining: 1m 53sRunning iteration 1281/1500... Est. remaining: 1m 48sRunning iteration 1291/1500... Est. remaining: 1m 43sRunning iteration 1301/1500... Est. remaining: 1m 38sbest_combination: {'lookbacks': [41, 51, 98], 'score': np.float64(2.0997818352949267), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 33sRunning iteration 1321/1500... Est. remaining: 1m 28sRunning iteration 1331/1500... Est. remaining: 1m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,008,937,375
Annual Return: 46.03%
Sharpe Ratio: 1.67914
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 2.327
Lookback periods: [41, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1341/1500... Est. remaining: 1m 18sRunning iteration 1351/1500... Est. remaining: 1m 13sRunning iteration 1361/1500... Est. remaining: 1m 8sRunning iteration 1371/1500... Est. remaining: 1m 3sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(2.3271440695554944), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.3 minutes
Best normalized score: 2.33
best_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(2.3271440695554944), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 52, 98] (score: 2.3271)

Monte Carlo simulation completed in 12.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,008,937,374.54
Average Annualized Gain: 46.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Tue Aug 26 23:53:26 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $154,377,886
Annual Return: 32.08%
Sharpe Ratio: 1.15631
Sortino Ratio: 1.048
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: -1.710
Lookback periods: [44, 83, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $380,021,791
Annual Return: 35.56%
Sharpe Ratio: 1.19075
Sortino Ratio: 1.122
Max Drawdown: -62.6%
Avg Drawdown: -13.5%
Normalized Score: -1.485
Lookback periods: [118, 198, 291] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $324,303,467
Annual Return: 34.94%
Sharpe Ratio: 1.20943
Sortino Ratio: 1.126
Max Drawdown: -69.3%
Avg Drawdown: -13.1%
Normalized Score: -1.469
Lookback periods: [59, 178, 208] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $815,470,177
Annual Return: 38.58%
Sharpe Ratio: 1.32564
Sortino Ratio: 1.238
Max Drawdown: -55.0%
Avg Drawdown: -12.8%
Normalized Score: -0.511
Lookback periods: [51, 109, 121] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,516,955,363
Annual Return: 41.09%
Sharpe Ratio: 1.37150
Sortino Ratio: 1.325
Max Drawdown: -69.0%
Avg Drawdown: -13.2%
Normalized Score: -0.216
Lookback periods: [152, 158, 264] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 19sRunning iteration 31/1500... Est. remaining: 18m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,079,369,620
Annual Return: 39.71%
Sharpe Ratio: 1.37415
Sortino Ratio: 1.291
Max Drawdown: -52.3%
Avg Drawdown: -11.8%
Normalized Score: -0.122
Lookback periods: [87, 95, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,931,742,253
Annual Return: 43.79%
Sharpe Ratio: 1.43295
Sortino Ratio: 1.401
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.410
Lookback periods: [165, 169, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 16m 59sRunning iteration 61/1500... Est. remaining: 16m 2sRunning iteration 71/1500... Est. remaining: 15m 18sRunning iteration 81/1500... Est. remaining: 14m 45sRunning iteration 91/1500... Est. remaining: 14m 18sRunning iteration 101/1500... Est. remaining: 13m 55sbest_combination: {'lookbacks': [165, 169, 170], 'score': np.float64(0.4101495984929219), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 35sRunning iteration 121/1500... Est. remaining: 13m 18sRunning iteration 131/1500... Est. remaining: 13m 4sRunning iteration 141/1500... Est. remaining: 12m 50sRunning iteration 151/1500... Est. remaining: 12m 36sRunning iteration 161/1500... Est. remaining: 12m 25sRunning iteration 171/1500... Est. remaining: 12m 14sRunning iteration 181/1500... Est. remaining: 12m 4sRunning iteration 191/1500... Est. remaining: 11m 55sRunning iteration 201/1500... Est. remaining: 11m 46sbest_combination: {'lookbacks': [165, 169, 170], 'score': np.float64(0.4101495984929219), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,910,435,023
Annual Return: 44.99%
Sharpe Ratio: 1.45298
Sortino Ratio: 1.420
Max Drawdown: -62.5%
Avg Drawdown: -11.7%
Normalized Score: 0.536
Lookback periods: [176, 200, 215] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 11m 36sRunning iteration 231/1500... Est. remaining: 11m 28sRunning iteration 241/1500... Est. remaining: 11m 21sRunning iteration 251/1500... Est. remaining: 11m 13sRunning iteration 261/1500... Est. remaining: 11m 5sRunning iteration 271/1500... Est. remaining: 10m 58sRunning iteration 281/1500... Est. remaining: 10m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,794,134,058
Annual Return: 41.77%
Sharpe Ratio: 1.48439
Sortino Ratio: 1.382
Max Drawdown: -57.8%
Avg Drawdown: -11.0%
Normalized Score: 0.552
Lookback periods: [47, 55, 117] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 291/1500... Est. remaining: 10m 48sRunning iteration 301/1500... Est. remaining: 10m 41sbest_combination: {'lookbacks': [47, 55, 117], 'score': np.float64(0.5518803182122735), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 34sRunning iteration 321/1500... Est. remaining: 10m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,909,763,280
Annual Return: 44.99%
Sharpe Ratio: 1.47294
Sortino Ratio: 1.437
Max Drawdown: -60.3%
Avg Drawdown: -12.1%
Normalized Score: 0.657
Lookback periods: [144, 203, 207] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 331/1500... Est. remaining: 10m 26sRunning iteration 341/1500... Est. remaining: 10m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,253,398,061
Annual Return: 40.31%
Sharpe Ratio: 1.48315
Sortino Ratio: 1.363
Max Drawdown: -37.0%
Avg Drawdown: -9.8%
Normalized Score: 0.680
Lookback periods: [36, 42, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 351/1500... Est. remaining: 10m 17sRunning iteration 361/1500... Est. remaining: 10m 10sRunning iteration 371/1500... Est. remaining: 10m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,187,656,238
Annual Return: 45.28%
Sharpe Ratio: 1.47747
Sortino Ratio: 1.440
Max Drawdown: -60.7%
Avg Drawdown: -11.7%
Normalized Score: 0.700
Lookback periods: [144, 190, 206] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 10m 1sRunning iteration 391/1500... Est. remaining: 9m 55sRunning iteration 401/1500... Est. remaining: 9m 48sbest_combination: {'lookbacks': [144, 190, 206], 'score': np.float64(0.7003451901929625), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,428,748,393
Annual Return: 45.52%
Sharpe Ratio: 1.50611
Sortino Ratio: 1.470
Max Drawdown: -62.2%
Avg Drawdown: -12.1%
Normalized Score: 0.856
Lookback periods: [178, 249, 270] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 9m 45sRunning iteration 421/1500... Est. remaining: 9m 38sRunning iteration 431/1500... Est. remaining: 9m 32sRunning iteration 441/1500... Est. remaining: 9m 25sRunning iteration 451/1500... Est. remaining: 9m 19sRunning iteration 461/1500... Est. remaining: 9m 12sRunning iteration 471/1500... Est. remaining: 9m 6sRunning iteration 481/1500... Est. remaining: 9m 0sRunning iteration 491/1500... Est. remaining: 8m 54sRunning iteration 501/1500... Est. remaining: 8m 48sbest_combination: {'lookbacks': [178, 249, 270], 'score': np.float64(0.8564208926161262), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 43sRunning iteration 521/1500... Est. remaining: 8m 37sRunning iteration 531/1500... Est. remaining: 8m 31sRunning iteration 541/1500... Est. remaining: 8m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,943,193,808
Annual Return: 42.10%
Sharpe Ratio: 1.50139
Sortino Ratio: 1.403
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 0.939
Lookback periods: [42, 47, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,100,516,844
Annual Return: 46.11%
Sharpe Ratio: 1.53304
Sortino Ratio: 1.484
Max Drawdown: -58.5%
Avg Drawdown: -11.8%
Normalized Score: 1.061
Lookback periods: [136, 150, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 23sRunning iteration 561/1500... Est. remaining: 8m 17sRunning iteration 571/1500... Est. remaining: 8m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,515,844,154
Annual Return: 46.44%
Sharpe Ratio: 1.53488
Sortino Ratio: 1.494
Max Drawdown: -57.9%
Avg Drawdown: -11.5%
Normalized Score: 1.111
Lookback periods: [147, 158, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 8m 7sRunning iteration 591/1500... Est. remaining: 8m 1sRunning iteration 601/1500... Est. remaining: 7m 56sbest_combination: {'lookbacks': [147, 158, 168], 'score': np.float64(1.1105359572708453), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,774,018,264
Annual Return: 47.90%
Sharpe Ratio: 1.56337
Sortino Ratio: 1.527
Max Drawdown: -58.5%
Avg Drawdown: -11.4%
Normalized Score: 1.340
Lookback periods: [152, 159, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/1500... Est. remaining: 7m 51sRunning iteration 621/1500... Est. remaining: 7m 46sRunning iteration 631/1500... Est. remaining: 7m 40sRunning iteration 641/1500... Est. remaining: 7m 34sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,720,900,724
Annual Return: 47.87%
Sharpe Ratio: 1.57091
Sortino Ratio: 1.526
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 1.416
Lookback periods: [157, 159, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 7m 18sRunning iteration 681/1500... Est. remaining: 7m 12sRunning iteration 691/1500... Est. remaining: 7m 7sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(1.415644845136623), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 56sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 44sRunning iteration 741/1500... Est. remaining: 6m 39sRunning iteration 751/1500... Est. remaining: 6m 33sRunning iteration 761/1500... Est. remaining: 6m 28sRunning iteration 771/1500... Est. remaining: 6m 22sRunning iteration 781/1500... Est. remaining: 6m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,544,697,484
Annual Return: 48.30%
Sharpe Ratio: 1.57356
Sortino Ratio: 1.537
Max Drawdown: -59.0%
Avg Drawdown: -10.5%
Normalized Score: 1.437
Lookback periods: [156, 158, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 6m 12sRunning iteration 801/1500... Est. remaining: 6m 7sbest_combination: {'lookbacks': [156, 158, 169], 'score': np.float64(1.4365551533102598), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 1sRunning iteration 821/1500... Est. remaining: 5m 56sRunning iteration 831/1500... Est. remaining: 5m 50sRunning iteration 841/1500... Est. remaining: 5m 45sRunning iteration 851/1500... Est. remaining: 5m 40sRunning iteration 861/1500... Est. remaining: 5m 34sRunning iteration 871/1500... Est. remaining: 5m 29sRunning iteration 881/1500... Est. remaining: 6m 5sRunning iteration 891/1500... Est. remaining: 10m 52sRunning iteration 901/1500... Est. remaining: 10m 37sbest_combination: {'lookbacks': [156, 158, 169], 'score': np.float64(1.4365551533102598), 'visits': 1}
Running iteration 911/1500... Est. remaining: 13m 31sRunning iteration 921/1500... Est. remaining: 13m 12sRunning iteration 931/1500... Est. remaining: 15m 33sRunning iteration 941/1500... Est. remaining: 67m 21sRunning iteration 951/1500... Est. remaining: 65m 29sRunning iteration 961/1500... Est. remaining: 72m 7sRunning iteration 971/1500... Est. remaining: 118m 4sRunning iteration 981/1500... Est. remaining: 114m 42sRunning iteration 991/1500... Est. remaining: 156m 32sRunning iteration 1001/1500... Est. remaining: 183m 46sbest_combination: {'lookbacks': [156, 158, 169], 'score': np.float64(1.4365551533102598), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 178m 21sRunning iteration 1021/1500... Est. remaining: 195m 48sRunning iteration 1031/1500... Est. remaining: 189m 54sRunning iteration 1041/1500... Est. remaining: 216m 6sRunning iteration 1051/1500... Est. remaining: 209m 26sRunning iteration 1061/1500... Est. remaining: 226m 53sRunning iteration 1071/1500... Est. remaining: 219m 42sRunning iteration 1081/1500... Est. remaining: 213m 44sRunning iteration 1091/1500... Est. remaining: 225m 2sRunning iteration 1101/1500... Est. remaining: 217m 35sbest_combination: {'lookbacks': [156, 158, 169], 'score': np.float64(1.4365551533102598), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 214m 32sRunning iteration 1121/1500... Est. remaining: 207m 11sRunning iteration 1131/1500... Est. remaining: 210m 49sRunning iteration 1141/1500... Est. remaining: 203m 30sRunning iteration 1151/1500... Est. remaining: 196m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,047,116,505
Annual Return: 49.00%
Sharpe Ratio: 1.58448
Sortino Ratio: 1.550
Max Drawdown: -62.5%
Avg Drawdown: -11.8%
Normalized Score: 1.464
Lookback periods: [155, 155, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1161/1500... Est. remaining: 188m 56sRunning iteration 1171/1500... Est. remaining: 181m 54sRunning iteration 1181/1500... Est. remaining: 176m 16sRunning iteration 1191/1500... Est. remaining: 169m 21sRunning iteration 1201/1500... Est. remaining: 163m 42sbest_combination: {'lookbacks': [155, 155, 157], 'score': np.float64(1.4639319929494723), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 158m 48sRunning iteration 1221/1500... Est. remaining: 152m 5sRunning iteration 1231/1500... Est. remaining: 146m 42sRunning iteration 1241/1500... Est. remaining: 140m 48sRunning iteration 1251/1500... Est. remaining: 134m 19sRunning iteration 1261/1500... Est. remaining: 128m 7sRunning iteration 1271/1500... Est. remaining: 121m 49sRunning iteration 1281/1500... Est. remaining: 117m 26sRunning iteration 1291/1500... Est. remaining: 112m 24sRunning iteration 1301/1500... Est. remaining: 106m 14sbest_combination: {'lookbacks': [155, 155, 157], 'score': np.float64(1.4639319929494723), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 100m 33sRunning iteration 1321/1500... Est. remaining: 94m 33sRunning iteration 1331/1500... Est. remaining: 88m 49sRunning iteration 1341/1500... Est. remaining: 82m 59sRunning iteration 1351/1500... Est. remaining: 77m 14sRunning iteration 1361/1500... Est. remaining: 71m 51sRunning iteration 1371/1500... Est. remaining: 67m 6sRunning iteration 1381/1500... Est. remaining: 61m 30sRunning iteration 1391/1500... Est. remaining: 57m 58sRunning iteration 1401/1500... Est. remaining: 52m 37sbest_combination: {'lookbacks': [155, 155, 157], 'score': np.float64(1.4639319929494723), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 47m 2sRunning iteration 1421/1500... Est. remaining: 41m 31sRunning iteration 1431/1500... Est. remaining: 36m 21sRunning iteration 1441/1500... Est. remaining: 30m 56sRunning iteration 1451/1500... Est. remaining: 25m 38sRunning iteration 1461/1500... Est. remaining: 20m 22sRunning iteration 1471/1500... Est. remaining: 15m 10sRunning iteration 1481/1500... Est. remaining: 10m 3sRunning iteration 1491/1500... Est. remaining: 4m 59s
Monte Carlo simulation completed in 744.7 minutes
Best normalized score: 1.46
best_combination: {'lookbacks': [155, 155, 157], 'score': np.float64(1.4639319929494723), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [155, 155, 157] (score: 1.4639)

Monte Carlo simulation completed in 744.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [155, 155, 157] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 114 selections (27.4%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 34 selections (8.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,047,116,504.58
Average Annualized Gain: 49.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Wed Aug 27 12:18:46 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $264,348,980
Annual Return: 34.15%
Sharpe Ratio: 1.26955
Sortino Ratio: 1.141
Max Drawdown: -56.2%
Avg Drawdown: -12.0%
Normalized Score: -4.609
Lookback periods: [26, 46, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $637,167,821
Annual Return: 37.60%
Sharpe Ratio: 1.30944
Sortino Ratio: 1.208
Max Drawdown: -55.0%
Avg Drawdown: -12.3%
Normalized Score: -3.201
Lookback periods: [55, 117, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,180,638,588
Annual Return: 40.07%
Sharpe Ratio: 1.33180
Sortino Ratio: 1.269
Max Drawdown: -59.0%
Avg Drawdown: -12.9%
Normalized Score: -2.180
Lookback periods: [132, 191, 292] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 499m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,277,072,194
Annual Return: 40.39%
Sharpe Ratio: 1.32605
Sortino Ratio: 1.277
Max Drawdown: -59.0%
Avg Drawdown: -12.9%
Normalized Score: -2.052
Lookback periods: [199, 220, 249] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,429,271,421
Annual Return: 40.84%
Sharpe Ratio: 1.35289
Sortino Ratio: 1.294
Max Drawdown: -62.5%
Avg Drawdown: -12.8%
Normalized Score: -1.822
Lookback periods: [169, 187, 257] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,831,420,498
Annual Return: 41.86%
Sharpe Ratio: 1.38727
Sortino Ratio: 1.340
Max Drawdown: -67.8%
Avg Drawdown: -12.8%
Normalized Score: -1.294
Lookback periods: [217, 249, 257] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,711,963,723
Annual Return: 43.47%
Sharpe Ratio: 1.45088
Sortino Ratio: 1.389
Max Drawdown: -56.9%
Avg Drawdown: -12.7%
Normalized Score: -0.417
Lookback periods: [97, 128, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 1839m 51sRunning iteration 31/1500... Est. remaining: 1222m 12sRunning iteration 41/1500... Est. remaining: 1034m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,382,929,861
Annual Return: 44.39%
Sharpe Ratio: 1.48469
Sortino Ratio: 1.425
Max Drawdown: -55.0%
Avg Drawdown: -11.7%
Normalized Score: 0.112
Lookback periods: [105, 110, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,492,878,675
Annual Return: 45.58%
Sharpe Ratio: 1.47125
Sortino Ratio: 1.439
Max Drawdown: -59.8%
Avg Drawdown: -12.3%
Normalized Score: 0.474
Lookback periods: [154, 187, 209] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 858m 1sRunning iteration 61/1500... Est. remaining: 1158m 7sRunning iteration 71/1500... Est. remaining: 987m 27sRunning iteration 81/1500... Est. remaining: 864m 48sRunning iteration 91/1500... Est. remaining: 967m 43sRunning iteration 101/1500... Est. remaining: 865m 55sbest_combination: {'lookbacks': [154, 187, 209], 'score': np.float64(0.47382164253272974), 'visits': 1}
Running iteration 111/1500... Est. remaining: 1062m 43sRunning iteration 121/1500... Est. remaining: 981m 28sRunning iteration 131/1500... Est. remaining: 900m 15sRunning iteration 141/1500... Est. remaining: 861m 0sRunning iteration 151/1500... Est. remaining: 798m 27sRunning iteration 161/1500... Est. remaining: 743m 42sRunning iteration 171/1500... Est. remaining: 695m 23sRunning iteration 181/1500... Est. remaining: 652m 26sRunning iteration 191/1500... Est. remaining: 613m 59sRunning iteration 201/1500... Est. remaining: 579m 22sbest_combination: {'lookbacks': [154, 187, 209], 'score': np.float64(0.47382164253272974), 'visits': 1}
Running iteration 211/1500... Est. remaining: 548m 3sRunning iteration 221/1500... Est. remaining: 519m 34sRunning iteration 231/1500... Est. remaining: 493m 33sRunning iteration 241/1500... Est. remaining: 469m 42sRunning iteration 251/1500... Est. remaining: 447m 44sRunning iteration 261/1500... Est. remaining: 427m 28sRunning iteration 271/1500... Est. remaining: 408m 41sRunning iteration 281/1500... Est. remaining: 391m 15sRunning iteration 291/1500... Est. remaining: 375m 0sRunning iteration 301/1500... Est. remaining: 359m 50sbest_combination: {'lookbacks': [154, 187, 209], 'score': np.float64(0.47382164253272974), 'visits': 1}
Running iteration 311/1500... Est. remaining: 345m 38sRunning iteration 321/1500... Est. remaining: 332m 19sRunning iteration 331/1500... Est. remaining: 319m 49sRunning iteration 341/1500... Est. remaining: 308m 2sRunning iteration 351/1500... Est. remaining: 296m 56sRunning iteration 361/1500... Est. remaining: 286m 26sRunning iteration 371/1500... Est. remaining: 276m 30sRunning iteration 381/1500... Est. remaining: 267m 4sRunning iteration 391/1500... Est. remaining: 258m 8sRunning iteration 401/1500... Est. remaining: 249m 39sbest_combination: {'lookbacks': [154, 187, 209], 'score': np.float64(0.47382164253272974), 'visits': 1}
Running iteration 411/1500... Est. remaining: 241m 34sRunning iteration 421/1500... Est. remaining: 233m 52sRunning iteration 431/1500... Est. remaining: 226m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,710,094,360
Annual Return: 46.59%
Sharpe Ratio: 1.51190
Sortino Ratio: 1.478
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 1.038
Lookback periods: [147, 188, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 219m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,844,727,545
Annual Return: 47.36%
Sharpe Ratio: 1.54926
Sortino Ratio: 1.507
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 1.445
Lookback periods: [157, 178, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 212m 53sRunning iteration 461/1500... Est. remaining: 206m 28sRunning iteration 471/1500... Est. remaining: 200m 18sRunning iteration 481/1500... Est. remaining: 194m 24sRunning iteration 491/1500... Est. remaining: 188m 44sRunning iteration 501/1500... Est. remaining: 183m 18sbest_combination: {'lookbacks': [157, 178, 205], 'score': np.float64(1.44480769223056), 'visits': 1}
Running iteration 511/1500... Est. remaining: 178m 4sRunning iteration 521/1500... Est. remaining: 173m 2sRunning iteration 531/1500... Est. remaining: 168m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,440,870,238
Annual Return: 47.71%
Sharpe Ratio: 1.55480
Sortino Ratio: 1.513
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 1.601
Lookback periods: [159, 188, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 163m 33sRunning iteration 551/1500... Est. remaining: 159m 3sRunning iteration 561/1500... Est. remaining: 154m 42sRunning iteration 571/1500... Est. remaining: 150m 30sRunning iteration 581/1500... Est. remaining: 146m 27sRunning iteration 591/1500... Est. remaining: 142m 32sRunning iteration 601/1500... Est. remaining: 138m 44sbest_combination: {'lookbacks': [159, 188, 205], 'score': np.float64(1.6014407923766076), 'visits': 1}
Running iteration 611/1500... Est. remaining: 135m 4sRunning iteration 621/1500... Est. remaining: 131m 31sRunning iteration 631/1500... Est. remaining: 128m 4sRunning iteration 641/1500... Est. remaining: 124m 44sRunning iteration 651/1500... Est. remaining: 121m 29sRunning iteration 661/1500... Est. remaining: 118m 21sRunning iteration 671/1500... Est. remaining: 115m 18sRunning iteration 681/1500... Est. remaining: 112m 20sRunning iteration 691/1500... Est. remaining: 109m 27sRunning iteration 701/1500... Est. remaining: 106m 39sbest_combination: {'lookbacks': [159, 188, 205], 'score': np.float64(1.6014407923766076), 'visits': 1}
Running iteration 711/1500... Est. remaining: 103m 55sRunning iteration 721/1500... Est. remaining: 101m 16sRunning iteration 731/1500... Est. remaining: 98m 41sRunning iteration 741/1500... Est. remaining: 96m 10sRunning iteration 751/1500... Est. remaining: 93m 43sRunning iteration 761/1500... Est. remaining: 91m 20sRunning iteration 771/1500... Est. remaining: 89m 0sRunning iteration 781/1500... Est. remaining: 86m 44sRunning iteration 791/1500... Est. remaining: 84m 32sRunning iteration 801/1500... Est. remaining: 82m 22sbest_combination: {'lookbacks': [159, 188, 205], 'score': np.float64(1.6014407923766076), 'visits': 1}
Running iteration 811/1500... Est. remaining: 80m 15sRunning iteration 821/1500... Est. remaining: 78m 12sRunning iteration 831/1500... Est. remaining: 76m 11sRunning iteration 841/1500... Est. remaining: 74m 13sRunning iteration 851/1500... Est. remaining: 72m 18sRunning iteration 861/1500... Est. remaining: 70m 25sRunning iteration 871/1500... Est. remaining: 68m 35sRunning iteration 881/1500... Est. remaining: 66m 47sRunning iteration 891/1500... Est. remaining: 65m 1sRunning iteration 901/1500... Est. remaining: 63m 18sbest_combination: {'lookbacks': [159, 188, 205], 'score': np.float64(1.6014407923766076), 'visits': 1}
Running iteration 911/1500... Est. remaining: 61m 37sRunning iteration 921/1500... Est. remaining: 59m 58sRunning iteration 931/1500... Est. remaining: 58m 21sRunning iteration 941/1500... Est. remaining: 56m 46sRunning iteration 951/1500... Est. remaining: 55m 13sRunning iteration 961/1500... Est. remaining: 53m 41sRunning iteration 971/1500... Est. remaining: 52m 12sRunning iteration 981/1500... Est. remaining: 50m 44sRunning iteration 991/1500... Est. remaining: 49m 18sRunning iteration 1001/1500... Est. remaining: 47m 53sbest_combination: {'lookbacks': [159, 188, 205], 'score': np.float64(1.6014407923766076), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 46m 30sRunning iteration 1021/1500... Est. remaining: 45m 9sRunning iteration 1031/1500... Est. remaining: 43m 49sRunning iteration 1041/1500... Est. remaining: 42m 30sRunning iteration 1051/1500... Est. remaining: 41m 13sRunning iteration 1061/1500... Est. remaining: 39m 58sRunning iteration 1071/1500... Est. remaining: 38m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,670,406,758
Annual Return: 47.84%
Sharpe Ratio: 1.56227
Sortino Ratio: 1.522
Max Drawdown: -60.3%
Avg Drawdown: -11.5%
Normalized Score: 1.675
Lookback periods: [149, 193, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1081/1500... Est. remaining: 37m 30sRunning iteration 1091/1500... Est. remaining: 36m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,376,224,658
Annual Return: 48.22%
Sharpe Ratio: 1.57833
Sortino Ratio: 1.545
Max Drawdown: -58.5%
Avg Drawdown: -11.7%
Normalized Score: 1.928
Lookback periods: [136, 155, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1101/1500... Est. remaining: 35m 8sbest_combination: {'lookbacks': [136, 155, 176], 'score': np.float64(1.928392060623267), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 33m 59sRunning iteration 1121/1500... Est. remaining: 32m 50sRunning iteration 1131/1500... Est. remaining: 31m 43sRunning iteration 1141/1500... Est. remaining: 30m 37sRunning iteration 1151/1500... Est. remaining: 29m 32sRunning iteration 1161/1500... Est. remaining: 28m 28sRunning iteration 1171/1500... Est. remaining: 27m 25sRunning iteration 1181/1500... Est. remaining: 26m 23sRunning iteration 1191/1500... Est. remaining: 25m 22sRunning iteration 1201/1500... Est. remaining: 24m 22sbest_combination: {'lookbacks': [136, 155, 176], 'score': np.float64(1.928392060623267), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 23m 22sRunning iteration 1221/1500... Est. remaining: 22m 24sRunning iteration 1231/1500... Est. remaining: 21m 27sRunning iteration 1241/1500... Est. remaining: 20m 30sRunning iteration 1251/1500... Est. remaining: 19m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,527,649,583
Annual Return: 48.77%
Sharpe Ratio: 1.59188
Sortino Ratio: 1.554
Max Drawdown: -59.8%
Avg Drawdown: -11.6%
Normalized Score: 2.146
Lookback periods: [140, 158, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1261/1500... Est. remaining: 18m 39sRunning iteration 1271/1500... Est. remaining: 17m 45sRunning iteration 1281/1500... Est. remaining: 16m 52sRunning iteration 1291/1500... Est. remaining: 15m 59sRunning iteration 1301/1500... Est. remaining: 15m 7sbest_combination: {'lookbacks': [140, 158, 189], 'score': np.float64(2.1461876368992794), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 14m 16sRunning iteration 1321/1500... Est. remaining: 13m 25sRunning iteration 1331/1500... Est. remaining: 12m 36sRunning iteration 1341/1500... Est. remaining: 11m 46sRunning iteration 1351/1500... Est. remaining: 10m 58sRunning iteration 1361/1500... Est. remaining: 10m 10sRunning iteration 1371/1500... Est. remaining: 9m 23sRunning iteration 1381/1500... Est. remaining: 8m 36sRunning iteration 1391/1500... Est. remaining: 7m 50sRunning iteration 1401/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [140, 158, 189], 'score': np.float64(2.1461876368992794), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 6m 20sRunning iteration 1421/1500... Est. remaining: 5m 35sRunning iteration 1431/1500... Est. remaining: 4m 51sRunning iteration 1441/1500... Est. remaining: 4m 8sRunning iteration 1451/1500... Est. remaining: 3m 25sRunning iteration 1461/1500... Est. remaining: 2m 43sRunning iteration 1471/1500... Est. remaining: 2m 2sRunning iteration 1481/1500... Est. remaining: 1m 20sRunning iteration 1491/1500... Est. remaining: 0m 40s
Monte Carlo simulation completed in 100.0 minutes
Best normalized score: 2.15
best_combination: {'lookbacks': [140, 158, 189], 'score': np.float64(2.1461876368992794), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [140, 158, 189] (score: 2.1462)

Monte Carlo simulation completed in 100.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [140, 158, 189] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 113 selections (27.2%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,527,649,583.37
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Wed Aug 27 13:58:52 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $588,736,164
Annual Return: 37.29%
Sharpe Ratio: 1.28633
Sortino Ratio: 1.192
Max Drawdown: -70.3%
Avg Drawdown: -13.0%
Normalized Score: -0.936
Lookback periods: [56, 185, 216] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,539,670,910
Annual Return: 43.20%
Sharpe Ratio: 1.40422
Sortino Ratio: 1.362
Max Drawdown: -59.0%
Avg Drawdown: -12.6%
Normalized Score: -0.182
Lookback periods: [169, 193, 226] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,926,766,046
Annual Return: 43.79%
Sharpe Ratio: 1.43226
Sortino Ratio: 1.400
Max Drawdown: -61.4%
Avg Drawdown: -11.7%
Normalized Score: -0.065
Lookback periods: [150, 173, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 44sRunning iteration 31/1500... Est. remaining: 17m 6sRunning iteration 41/1500... Est. remaining: 15m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,596,726,794
Annual Return: 46.50%
Sharpe Ratio: 1.49993
Sortino Ratio: 1.464
Max Drawdown: -66.0%
Avg Drawdown: -11.8%
Normalized Score: 0.183
Lookback periods: [184, 191, 214] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 15m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,093,314,961
Annual Return: 48.07%
Sharpe Ratio: 1.55127
Sortino Ratio: 1.519
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.457
Lookback periods: [155, 158, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,390,525,844
Annual Return: 47.68%
Sharpe Ratio: 1.57019
Sortino Ratio: 1.530
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.476
Lookback periods: [133, 156, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 15m 43sRunning iteration 71/1500... Est. remaining: 15m 4sRunning iteration 81/1500... Est. remaining: 14m 34sRunning iteration 91/1500... Est. remaining: 14m 10sRunning iteration 101/1500... Est. remaining: 13m 48sbest_combination: {'lookbacks': [133, 156, 205], 'score': np.float64(0.4759226472778451), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 29sRunning iteration 121/1500... Est. remaining: 13m 13sRunning iteration 131/1500... Est. remaining: 12m 58sRunning iteration 141/1500... Est. remaining: 12m 45sRunning iteration 151/1500... Est. remaining: 12m 32sRunning iteration 161/1500... Est. remaining: 12m 20sRunning iteration 171/1500... Est. remaining: 12m 9sRunning iteration 181/1500... Est. remaining: 11m 59sRunning iteration 191/1500... Est. remaining: 11m 50sRunning iteration 201/1500... Est. remaining: 11m 41sbest_combination: {'lookbacks': [133, 156, 205], 'score': np.float64(0.4759226472778451), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 33sRunning iteration 221/1500... Est. remaining: 11m 25sRunning iteration 231/1500... Est. remaining: 11m 17sRunning iteration 241/1500... Est. remaining: 11m 9sRunning iteration 251/1500... Est. remaining: 11m 2sRunning iteration 261/1500... Est. remaining: 10m 55sRunning iteration 271/1500... Est. remaining: 10m 48sRunning iteration 281/1500... Est. remaining: 10m 41sRunning iteration 291/1500... Est. remaining: 10m 34sRunning iteration 301/1500... Est. remaining: 10m 27sbest_combination: {'lookbacks': [133, 156, 205], 'score': np.float64(0.4759226472778451), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 21sRunning iteration 321/1500... Est. remaining: 10m 14sRunning iteration 331/1500... Est. remaining: 10m 7sRunning iteration 341/1500... Est. remaining: 10m 1sRunning iteration 351/1500... Est. remaining: 9m 55sRunning iteration 361/1500... Est. remaining: 9m 49sRunning iteration 371/1500... Est. remaining: 9m 43sRunning iteration 381/1500... Est. remaining: 9m 37sRunning iteration 391/1500... Est. remaining: 9m 31sRunning iteration 401/1500... Est. remaining: 9m 25sbest_combination: {'lookbacks': [133, 156, 205], 'score': np.float64(0.4759226472778451), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,488,709,085
Annual Return: 48.75%
Sharpe Ratio: 1.60116
Sortino Ratio: 1.564
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.642
Lookback periods: [136, 154, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 9m 22sRunning iteration 421/1500... Est. remaining: 9m 18sRunning iteration 431/1500... Est. remaining: 9m 12sRunning iteration 441/1500... Est. remaining: 9m 6sRunning iteration 451/1500... Est. remaining: 9m 0sRunning iteration 461/1500... Est. remaining: 8m 54sRunning iteration 471/1500... Est. remaining: 8m 48sRunning iteration 481/1500... Est. remaining: 8m 43sRunning iteration 491/1500... Est. remaining: 8m 37sRunning iteration 501/1500... Est. remaining: 8m 31sbest_combination: {'lookbacks': [136, 154, 171], 'score': np.float64(0.6415309640511426), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 26sRunning iteration 521/1500... Est. remaining: 8m 20sRunning iteration 531/1500... Est. remaining: 8m 15sRunning iteration 541/1500... Est. remaining: 8m 9sRunning iteration 551/1500... Est. remaining: 8m 4sRunning iteration 561/1500... Est. remaining: 7m 58sRunning iteration 571/1500... Est. remaining: 7m 53sRunning iteration 581/1500... Est. remaining: 7m 47sRunning iteration 591/1500... Est. remaining: 7m 42sRunning iteration 601/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [136, 154, 171], 'score': np.float64(0.6415309640511426), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 31sRunning iteration 621/1500... Est. remaining: 7m 26sRunning iteration 631/1500... Est. remaining: 7m 21sRunning iteration 641/1500... Est. remaining: 7m 16sRunning iteration 651/1500... Est. remaining: 7m 10sRunning iteration 661/1500... Est. remaining: 7m 5sRunning iteration 671/1500... Est. remaining: 7m 0sRunning iteration 681/1500... Est. remaining: 6m 54sRunning iteration 691/1500... Est. remaining: 6m 49sRunning iteration 701/1500... Est. remaining: 6m 44sbest_combination: {'lookbacks': [136, 154, 171], 'score': np.float64(0.6415309640511426), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 39sRunning iteration 721/1500... Est. remaining: 6m 33sRunning iteration 731/1500... Est. remaining: 6m 28sRunning iteration 741/1500... Est. remaining: 6m 23sRunning iteration 751/1500... Est. remaining: 6m 18sRunning iteration 761/1500... Est. remaining: 6m 13sRunning iteration 771/1500... Est. remaining: 6m 7sRunning iteration 781/1500... Est. remaining: 6m 2sRunning iteration 791/1500... Est. remaining: 5m 57sRunning iteration 801/1500... Est. remaining: 5m 52sbest_combination: {'lookbacks': [136, 154, 171], 'score': np.float64(0.6415309640511426), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 47sRunning iteration 821/1500... Est. remaining: 5m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,011,712,760
Annual Return: 49.39%
Sharpe Ratio: 1.62961
Sortino Ratio: 1.584
Max Drawdown: -56.8%
Avg Drawdown: -10.8%
Normalized Score: 0.737
Lookback periods: [135, 158, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 831/1500... Est. remaining: 5m 37sRunning iteration 841/1500... Est. remaining: 5m 32sRunning iteration 851/1500... Est. remaining: 5m 27sRunning iteration 861/1500... Est. remaining: 5m 22sRunning iteration 871/1500... Est. remaining: 5m 17sRunning iteration 881/1500... Est. remaining: 5m 11sRunning iteration 891/1500... Est. remaining: 5m 6sRunning iteration 901/1500... Est. remaining: 5m 1sbest_combination: {'lookbacks': [135, 158, 178], 'score': np.float64(0.7369832818177335), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,485,103,462
Annual Return: 49.57%
Sharpe Ratio: 1.63300
Sortino Ratio: 1.601
Max Drawdown: -58.5%
Avg Drawdown: -11.0%
Normalized Score: 0.750
Lookback periods: [135, 155, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 4m 57sRunning iteration 921/1500... Est. remaining: 4m 52sRunning iteration 931/1500... Est. remaining: 4m 47sRunning iteration 941/1500... Est. remaining: 4m 42sRunning iteration 951/1500... Est. remaining: 4m 36sRunning iteration 961/1500... Est. remaining: 4m 31sRunning iteration 971/1500... Est. remaining: 4m 26sRunning iteration 981/1500... Est. remaining: 4m 21sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.7498462099111342), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 45sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.7498462099111342), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.7498462099111342), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.7498462099111342), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.7498462099111342), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 0.75
best_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.7498462099111342), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 155, 173] (score: 0.7498)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 155, 173] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 113 selections (27.2%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,485,103,462.08
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Wed Aug 27 14:11:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $840,584,821
Annual Return: 38.70%
Sharpe Ratio: 1.32414
Sortino Ratio: 1.236
Max Drawdown: -55.4%
Avg Drawdown: -12.2%
Normalized Score: -1.859
Lookback periods: [50, 125, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $948,800,532
Annual Return: 39.19%
Sharpe Ratio: 1.29889
Sortino Ratio: 1.254
Max Drawdown: -68.2%
Avg Drawdown: -13.2%
Normalized Score: -1.825
Lookback periods: [155, 213, 269] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,411,242,070
Annual Return: 40.79%
Sharpe Ratio: 1.35515
Sortino Ratio: 1.301
Max Drawdown: -71.9%
Avg Drawdown: -14.1%
Normalized Score: -1.227
Lookback periods: [140, 185, 243] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,498,090,912
Annual Return: 41.04%
Sharpe Ratio: 1.39105
Sortino Ratio: 1.341
Max Drawdown: -64.8%
Avg Drawdown: -12.5%
Normalized Score: -0.953
Lookback periods: [132, 260, 272] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,750,619,234
Annual Return: 41.67%
Sharpe Ratio: 1.37728
Sortino Ratio: 1.321
Max Drawdown: -67.8%
Avg Drawdown: -12.9%
Normalized Score: -0.845
Lookback periods: [203, 211, 299] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,919,789,953
Annual Return: 42.05%
Sharpe Ratio: 1.38984
Sortino Ratio: 1.342
Max Drawdown: -68.7%
Avg Drawdown: -13.0%
Normalized Score: -0.685
Lookback periods: [136, 205, 278] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,563,282,100
Annual Return: 43.24%
Sharpe Ratio: 1.43931
Sortino Ratio: 1.396
Max Drawdown: -67.1%
Avg Drawdown: -13.2%
Normalized Score: -0.159
Lookback periods: [135, 135, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 46sRunning iteration 51/1500... Est. remaining: 17m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,203,784,345
Annual Return: 44.16%
Sharpe Ratio: 1.46132
Sortino Ratio: 1.427
Max Drawdown: -63.5%
Avg Drawdown: -12.4%
Normalized Score: 0.242
Lookback periods: [176, 246, 272] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,508,403,811
Annual Return: 46.43%
Sharpe Ratio: 1.51646
Sortino Ratio: 1.471
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 1.144
Lookback periods: [157, 160, 204] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 16m 24sRunning iteration 81/1500... Est. remaining: 15m 44sRunning iteration 91/1500... Est. remaining: 15m 9sRunning iteration 101/1500... Est. remaining: 14m 40sbest_combination: {'lookbacks': [157, 160, 204], 'score': np.float64(1.1440579585503259), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 17sRunning iteration 121/1500... Est. remaining: 13m 56sRunning iteration 131/1500... Est. remaining: 13m 39sRunning iteration 141/1500... Est. remaining: 13m 22sRunning iteration 151/1500... Est. remaining: 13m 7sRunning iteration 161/1500... Est. remaining: 12m 54sRunning iteration 171/1500... Est. remaining: 12m 42sRunning iteration 181/1500... Est. remaining: 12m 30sRunning iteration 191/1500... Est. remaining: 12m 19sRunning iteration 201/1500... Est. remaining: 12m 9sbest_combination: {'lookbacks': [157, 160, 204], 'score': np.float64(1.1440579585503259), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 59sRunning iteration 221/1500... Est. remaining: 11m 49sRunning iteration 231/1500... Est. remaining: 11m 40sRunning iteration 241/1500... Est. remaining: 11m 32sRunning iteration 251/1500... Est. remaining: 11m 23sRunning iteration 261/1500... Est. remaining: 11m 15sRunning iteration 271/1500... Est. remaining: 11m 7sRunning iteration 281/1500... Est. remaining: 11m 0sRunning iteration 291/1500... Est. remaining: 10m 52sRunning iteration 301/1500... Est. remaining: 10m 45sbest_combination: {'lookbacks': [157, 160, 204], 'score': np.float64(1.1440579585503259), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 38sRunning iteration 321/1500... Est. remaining: 10m 30sRunning iteration 331/1500... Est. remaining: 10m 23sRunning iteration 341/1500... Est. remaining: 10m 17sRunning iteration 351/1500... Est. remaining: 10m 10sRunning iteration 361/1500... Est. remaining: 10m 3sRunning iteration 371/1500... Est. remaining: 9m 57sRunning iteration 381/1500... Est. remaining: 9m 50sRunning iteration 391/1500... Est. remaining: 9m 44sRunning iteration 401/1500... Est. remaining: 9m 38sbest_combination: {'lookbacks': [157, 160, 204], 'score': np.float64(1.1440579585503259), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 31sRunning iteration 421/1500... Est. remaining: 9m 25sRunning iteration 431/1500... Est. remaining: 9m 19sRunning iteration 441/1500... Est. remaining: 9m 13sRunning iteration 451/1500... Est. remaining: 9m 7sRunning iteration 461/1500... Est. remaining: 9m 1sRunning iteration 471/1500... Est. remaining: 8m 55sRunning iteration 481/1500... Est. remaining: 8m 50sRunning iteration 491/1500... Est. remaining: 8m 44sRunning iteration 501/1500... Est. remaining: 8m 38sbest_combination: {'lookbacks': [157, 160, 204], 'score': np.float64(1.1440579585503259), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 32sRunning iteration 521/1500... Est. remaining: 8m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,007,605,512
Annual Return: 47.46%
Sharpe Ratio: 1.54177
Sortino Ratio: 1.510
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 1.550
Lookback periods: [155, 170, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 8m 23sRunning iteration 541/1500... Est. remaining: 8m 17sRunning iteration 551/1500... Est. remaining: 8m 12sRunning iteration 561/1500... Est. remaining: 8m 6sRunning iteration 571/1500... Est. remaining: 8m 1sRunning iteration 581/1500... Est. remaining: 7m 55sRunning iteration 591/1500... Est. remaining: 7m 49sRunning iteration 601/1500... Est. remaining: 7m 44sbest_combination: {'lookbacks': [155, 170, 200], 'score': np.float64(1.5501923962298605), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 38sRunning iteration 621/1500... Est. remaining: 7m 33sRunning iteration 631/1500... Est. remaining: 7m 27sRunning iteration 641/1500... Est. remaining: 7m 22sRunning iteration 651/1500... Est. remaining: 7m 17sRunning iteration 661/1500... Est. remaining: 7m 11sRunning iteration 671/1500... Est. remaining: 7m 6sRunning iteration 681/1500... Est. remaining: 7m 0sRunning iteration 691/1500... Est. remaining: 6m 55sRunning iteration 701/1500... Est. remaining: 6m 49sbest_combination: {'lookbacks': [155, 170, 200], 'score': np.float64(1.5501923962298605), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,954,696,002
Annual Return: 48.00%
Sharpe Ratio: 1.54707
Sortino Ratio: 1.517
Max Drawdown: -60.2%
Avg Drawdown: -11.8%
Normalized Score: 1.706
Lookback periods: [150, 158, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 711/1500... Est. remaining: 6m 45sRunning iteration 721/1500... Est. remaining: 6m 40sRunning iteration 731/1500... Est. remaining: 6m 35sRunning iteration 741/1500... Est. remaining: 6m 29sRunning iteration 751/1500... Est. remaining: 6m 24sRunning iteration 761/1500... Est. remaining: 6m 19sRunning iteration 771/1500... Est. remaining: 6m 13sRunning iteration 781/1500... Est. remaining: 6m 8sRunning iteration 791/1500... Est. remaining: 6m 3sRunning iteration 801/1500... Est. remaining: 5m 57sbest_combination: {'lookbacks': [150, 158, 198], 'score': np.float64(1.7056217766594486), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 52sRunning iteration 821/1500... Est. remaining: 5m 47sRunning iteration 831/1500... Est. remaining: 5m 42sRunning iteration 841/1500... Est. remaining: 5m 36sRunning iteration 851/1500... Est. remaining: 5m 31sRunning iteration 861/1500... Est. remaining: 5m 26sRunning iteration 871/1500... Est. remaining: 5m 21sRunning iteration 881/1500... Est. remaining: 5m 15sRunning iteration 891/1500... Est. remaining: 5m 10sRunning iteration 901/1500... Est. remaining: 5m 5sbest_combination: {'lookbacks': [150, 158, 198], 'score': np.float64(1.7056217766594486), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 0sRunning iteration 921/1500... Est. remaining: 4m 55sRunning iteration 931/1500... Est. remaining: 4m 49sRunning iteration 941/1500... Est. remaining: 4m 44sRunning iteration 951/1500... Est. remaining: 4m 39sRunning iteration 961/1500... Est. remaining: 4m 34sRunning iteration 971/1500... Est. remaining: 4m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,396,400,086
Annual Return: 48.71%
Sharpe Ratio: 1.57001
Sortino Ratio: 1.544
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 2.015
Lookback periods: [153, 158, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 981/1500... Est. remaining: 4m 24sRunning iteration 991/1500... Est. remaining: 4m 19sRunning iteration 1001/1500... Est. remaining: 4m 14sbest_combination: {'lookbacks': [153, 158, 201], 'score': np.float64(2.015427965305581), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 9sRunning iteration 1021/1500... Est. remaining: 4m 4sRunning iteration 1031/1500... Est. remaining: 3m 58sRunning iteration 1041/1500... Est. remaining: 5m 33sRunning iteration 1051/1500... Est. remaining: 5m 24sRunning iteration 1061/1500... Est. remaining: 5m 16sRunning iteration 1071/1500... Est. remaining: 5m 8sRunning iteration 1081/1500... Est. remaining: 5m 0sRunning iteration 1091/1500... Est. remaining: 4m 52sRunning iteration 1101/1500... Est. remaining: 4m 44sbest_combination: {'lookbacks': [153, 158, 201], 'score': np.float64(2.015427965305581), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 36sRunning iteration 1121/1500... Est. remaining: 4m 28sRunning iteration 1131/1500... Est. remaining: 4m 21sRunning iteration 1141/1500... Est. remaining: 4m 13sRunning iteration 1151/1500... Est. remaining: 4m 5sRunning iteration 1161/1500... Est. remaining: 3m 58sRunning iteration 1171/1500... Est. remaining: 3m 50sRunning iteration 1181/1500... Est. remaining: 3m 43sRunning iteration 1191/1500... Est. remaining: 3m 35sRunning iteration 1201/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [153, 158, 201], 'score': np.float64(2.015427965305581), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 20sRunning iteration 1221/1500... Est. remaining: 3m 13sRunning iteration 1231/1500... Est. remaining: 3m 5sRunning iteration 1241/1500... Est. remaining: 2m 58sRunning iteration 1251/1500... Est. remaining: 2m 51sRunning iteration 1261/1500... Est. remaining: 2m 44sRunning iteration 1271/1500... Est. remaining: 2m 36sRunning iteration 1281/1500... Est. remaining: 2m 29sRunning iteration 1291/1500... Est. remaining: 2m 22sRunning iteration 1301/1500... Est. remaining: 2m 15sbest_combination: {'lookbacks': [153, 158, 201], 'score': np.float64(2.015427965305581), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 8sRunning iteration 1321/1500... Est. remaining: 2m 1sRunning iteration 1331/1500... Est. remaining: 1m 54sRunning iteration 1341/1500... Est. remaining: 1m 47sRunning iteration 1351/1500... Est. remaining: 1m 40sRunning iteration 1361/1500... Est. remaining: 1m 33sRunning iteration 1371/1500... Est. remaining: 1m 26sRunning iteration 1381/1500... Est. remaining: 1m 20sRunning iteration 1391/1500... Est. remaining: 1m 13sRunning iteration 1401/1500... Est. remaining: 1m 6sbest_combination: {'lookbacks': [153, 158, 201], 'score': np.float64(2.015427965305581), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 59sRunning iteration 1421/1500... Est. remaining: 0m 53sRunning iteration 1431/1500... Est. remaining: 0m 46sRunning iteration 1441/1500... Est. remaining: 0m 39sRunning iteration 1451/1500... Est. remaining: 0m 32sRunning iteration 1461/1500... Est. remaining: 0m 26sRunning iteration 1471/1500... Est. remaining: 0m 19sRunning iteration 1481/1500... Est. remaining: 0m 13sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 16.3 minutes
Best normalized score: 2.02
best_combination: {'lookbacks': [153, 158, 201], 'score': np.float64(2.015427965305581), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [153, 158, 201] (score: 2.0154)

Monte Carlo simulation completed in 16.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [153, 158, 201] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 117 selections (28.1%)
2. sp500_hma: 108 selections (26.0%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,396,400,085.83
Average Annualized Gain: 48.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Wed Aug 27 14:27:54 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,172,880,246
Annual Return: 40.04%
Sharpe Ratio: 1.32005
Sortino Ratio: 1.275
Max Drawdown: -66.9%
Avg Drawdown: -12.5%
Normalized Score: -0.902
Lookback periods: [177, 186, 273] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,139,038,478
Annual Return: 39.92%
Sharpe Ratio: 1.38100
Sortino Ratio: 1.294
Max Drawdown: -57.4%
Avg Drawdown: -11.4%
Normalized Score: -0.692
Lookback periods: [47, 100, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,332,257,078
Annual Return: 40.56%
Sharpe Ratio: 1.40426
Sortino Ratio: 1.309
Max Drawdown: -56.3%
Avg Drawdown: -11.9%
Normalized Score: -0.592
Lookback periods: [38, 108, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,969,932,782
Annual Return: 46.00%
Sharpe Ratio: 1.50300
Sortino Ratio: 1.460
Max Drawdown: -60.4%
Avg Drawdown: -11.5%
Normalized Score: 0.285
Lookback periods: [156, 160, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 17m 57sRunning iteration 41/1500... Est. remaining: 16m 21sRunning iteration 51/1500... Est. remaining: 15m 22sRunning iteration 61/1500... Est. remaining: 14m 42sRunning iteration 71/1500... Est. remaining: 14m 13sRunning iteration 81/1500... Est. remaining: 13m 52sRunning iteration 91/1500... Est. remaining: 13m 33sRunning iteration 101/1500... Est. remaining: 13m 16sbest_combination: {'lookbacks': [156, 160, 189], 'score': np.float64(0.2854720701349272), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 1sRunning iteration 121/1500... Est. remaining: 12m 46sRunning iteration 131/1500... Est. remaining: 12m 33sRunning iteration 141/1500... Est. remaining: 12m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,882,439,594
Annual Return: 49.34%
Sharpe Ratio: 1.59250
Sortino Ratio: 1.559
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.912
Lookback periods: [176, 188, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 12m 22sRunning iteration 161/1500... Est. remaining: 12m 12sRunning iteration 171/1500... Est. remaining: 12m 3sRunning iteration 181/1500... Est. remaining: 11m 53sRunning iteration 191/1500... Est. remaining: 11m 44sRunning iteration 201/1500... Est. remaining: 11m 36sbest_combination: {'lookbacks': [176, 188, 205], 'score': np.float64(0.9117906325370253), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 28sRunning iteration 221/1500... Est. remaining: 11m 20sRunning iteration 231/1500... Est. remaining: 11m 13sRunning iteration 241/1500... Est. remaining: 11m 6sRunning iteration 251/1500... Est. remaining: 10m 59sRunning iteration 261/1500... Est. remaining: 10m 52sRunning iteration 271/1500... Est. remaining: 10m 45sRunning iteration 281/1500... Est. remaining: 10m 39sRunning iteration 291/1500... Est. remaining: 10m 33sRunning iteration 301/1500... Est. remaining: 10m 26sbest_combination: {'lookbacks': [176, 188, 205], 'score': np.float64(0.9117906325370253), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 20sRunning iteration 321/1500... Est. remaining: 10m 13sRunning iteration 331/1500... Est. remaining: 10m 7sRunning iteration 341/1500... Est. remaining: 10m 1sRunning iteration 351/1500... Est. remaining: 9m 55sRunning iteration 361/1500... Est. remaining: 9m 49sRunning iteration 371/1500... Est. remaining: 9m 44sRunning iteration 381/1500... Est. remaining: 9m 38sRunning iteration 391/1500... Est. remaining: 9m 32sRunning iteration 401/1500... Est. remaining: 9m 27sbest_combination: {'lookbacks': [176, 188, 205], 'score': np.float64(0.9117906325370253), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 21sRunning iteration 421/1500... Est. remaining: 9m 15sRunning iteration 431/1500... Est. remaining: 9m 9sRunning iteration 441/1500... Est. remaining: 9m 4sRunning iteration 451/1500... Est. remaining: 8m 58sRunning iteration 461/1500... Est. remaining: 8m 53sRunning iteration 471/1500... Est. remaining: 8m 47sRunning iteration 481/1500... Est. remaining: 8m 42sRunning iteration 491/1500... Est. remaining: 8m 36sRunning iteration 501/1500... Est. remaining: 8m 31sbest_combination: {'lookbacks': [176, 188, 205], 'score': np.float64(0.9117906325370253), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 26sRunning iteration 521/1500... Est. remaining: 8m 20sRunning iteration 531/1500... Est. remaining: 8m 15sRunning iteration 541/1500... Est. remaining: 8m 10sRunning iteration 551/1500... Est. remaining: 8m 4sRunning iteration 561/1500... Est. remaining: 7m 59sRunning iteration 571/1500... Est. remaining: 7m 53sRunning iteration 581/1500... Est. remaining: 7m 48sRunning iteration 591/1500... Est. remaining: 7m 43sRunning iteration 601/1500... Est. remaining: 7m 38sbest_combination: {'lookbacks': [176, 188, 205], 'score': np.float64(0.9117906325370253), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 32sRunning iteration 621/1500... Est. remaining: 7m 27sRunning iteration 631/1500... Est. remaining: 7m 22sRunning iteration 641/1500... Est. remaining: 7m 17sRunning iteration 651/1500... Est. remaining: 7m 12sRunning iteration 661/1500... Est. remaining: 7m 6sRunning iteration 671/1500... Est. remaining: 7m 1sRunning iteration 681/1500... Est. remaining: 6m 56sRunning iteration 691/1500... Est. remaining: 6m 51sRunning iteration 701/1500... Est. remaining: 6m 46sbest_combination: {'lookbacks': [176, 188, 205], 'score': np.float64(0.9117906325370253), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 40sRunning iteration 721/1500... Est. remaining: 6m 35sRunning iteration 731/1500... Est. remaining: 6m 30sRunning iteration 741/1500... Est. remaining: 6m 25sRunning iteration 751/1500... Est. remaining: 6m 20sRunning iteration 761/1500... Est. remaining: 6m 15sRunning iteration 771/1500... Est. remaining: 6m 10sRunning iteration 781/1500... Est. remaining: 6m 4sRunning iteration 791/1500... Est. remaining: 5m 59sRunning iteration 801/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [176, 188, 205], 'score': np.float64(0.9117906325370253), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,216,129,178
Annual Return: 49.84%
Sharpe Ratio: 1.61596
Sortino Ratio: 1.567
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.981
Lookback periods: [181, 189, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 811/1500... Est. remaining: 5m 50sRunning iteration 821/1500... Est. remaining: 5m 45sRunning iteration 831/1500... Est. remaining: 5m 40sRunning iteration 841/1500... Est. remaining: 5m 35sRunning iteration 851/1500... Est. remaining: 5m 30sRunning iteration 861/1500... Est. remaining: 5m 24sRunning iteration 871/1500... Est. remaining: 5m 19sRunning iteration 881/1500... Est. remaining: 5m 14sRunning iteration 891/1500... Est. remaining: 5m 9sRunning iteration 901/1500... Est. remaining: 5m 4sbest_combination: {'lookbacks': [181, 189, 198], 'score': np.float64(0.9811782173092203), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 59sRunning iteration 921/1500... Est. remaining: 4m 54sRunning iteration 931/1500... Est. remaining: 4m 49sRunning iteration 941/1500... Est. remaining: 4m 44sRunning iteration 951/1500... Est. remaining: 4m 39sRunning iteration 961/1500... Est. remaining: 4m 33sRunning iteration 971/1500... Est. remaining: 4m 28sRunning iteration 981/1500... Est. remaining: 4m 23sRunning iteration 991/1500... Est. remaining: 4m 18sRunning iteration 1001/1500... Est. remaining: 4m 13sbest_combination: {'lookbacks': [181, 189, 198], 'score': np.float64(0.9811782173092203), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 8sRunning iteration 1021/1500... Est. remaining: 4m 3sRunning iteration 1031/1500... Est. remaining: 3m 58sRunning iteration 1041/1500... Est. remaining: 3m 53sRunning iteration 1051/1500... Est. remaining: 3m 48sRunning iteration 1061/1500... Est. remaining: 3m 43sRunning iteration 1071/1500... Est. remaining: 3m 38sRunning iteration 1081/1500... Est. remaining: 3m 32sRunning iteration 1091/1500... Est. remaining: 3m 27sRunning iteration 1101/1500... Est. remaining: 3m 22sbest_combination: {'lookbacks': [181, 189, 198], 'score': np.float64(0.9811782173092203), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 17sRunning iteration 1121/1500... Est. remaining: 3m 12sRunning iteration 1131/1500... Est. remaining: 3m 7sRunning iteration 1141/1500... Est. remaining: 3m 2sRunning iteration 1151/1500... Est. remaining: 2m 57sRunning iteration 1161/1500... Est. remaining: 2m 52sRunning iteration 1171/1500... Est. remaining: 2m 47sRunning iteration 1181/1500... Est. remaining: 2m 42sRunning iteration 1191/1500... Est. remaining: 2m 37sRunning iteration 1201/1500... Est. remaining: 2m 31sbest_combination: {'lookbacks': [181, 189, 198], 'score': np.float64(0.9811782173092203), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 26sRunning iteration 1221/1500... Est. remaining: 2m 21sRunning iteration 1231/1500... Est. remaining: 2m 16sRunning iteration 1241/1500... Est. remaining: 2m 11sRunning iteration 1251/1500... Est. remaining: 2m 6sRunning iteration 1261/1500... Est. remaining: 2m 1sRunning iteration 1271/1500... Est. remaining: 1m 56sRunning iteration 1281/1500... Est. remaining: 1m 51sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [181, 189, 198], 'score': np.float64(0.9811782173092203), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 36sRunning iteration 1321/1500... Est. remaining: 1m 31sRunning iteration 1331/1500... Est. remaining: 1m 26sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [181, 189, 198], 'score': np.float64(0.9811782173092203), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.6 minutes
Best normalized score: 0.98
best_combination: {'lookbacks': [181, 189, 198], 'score': np.float64(0.9811782173092203), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [181, 189, 198] (score: 0.9812)

Monte Carlo simulation completed in 12.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [181, 189, 198] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 122 selections (29.3%)
2. sp500_hma: 98 selections (23.6%)
3. naz100_pine: 82 selections (19.7%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 44 selections (10.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,216,129,177.82
Average Annualized Gain: 49.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Wed Aug 27 14:40:40 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $396,680,046
Annual Return: 35.73%
Sharpe Ratio: 1.21907
Sortino Ratio: 1.150
Max Drawdown: -64.1%
Avg Drawdown: -13.9%
Normalized Score: -3.222
Lookback periods: [116, 126, 270] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,562,312,395
Annual Return: 41.21%
Sharpe Ratio: 1.35059
Sortino Ratio: 1.303
Max Drawdown: -71.3%
Avg Drawdown: -13.7%
Normalized Score: -1.315
Lookback periods: [165, 184, 261] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,772,453,262
Annual Return: 41.72%
Sharpe Ratio: 1.40283
Sortino Ratio: 1.345
Max Drawdown: -63.9%
Avg Drawdown: -13.4%
Normalized Score: -0.981
Lookback periods: [109, 136, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,421,525,203
Annual Return: 43.00%
Sharpe Ratio: 1.42857
Sortino Ratio: 1.375
Max Drawdown: -61.7%
Avg Drawdown: -12.4%
Normalized Score: -0.487
Lookback periods: [187, 256, 263] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 17sRunning iteration 31/1500... Est. remaining: 18m 6sRunning iteration 41/1500... Est. remaining: 16m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,777,517,275
Annual Return: 44.85%
Sharpe Ratio: 1.47237
Sortino Ratio: 1.448
Max Drawdown: -68.5%
Avg Drawdown: -13.3%
Normalized Score: 0.118
Lookback periods: [121, 153, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 16m 2sRunning iteration 61/1500... Est. remaining: 15m 13sRunning iteration 71/1500... Est. remaining: 14m 36sRunning iteration 81/1500... Est. remaining: 14m 8sRunning iteration 91/1500... Est. remaining: 13m 44sRunning iteration 101/1500... Est. remaining: 13m 25sbest_combination: {'lookbacks': [121, 153, 163], 'score': np.float64(0.11786008326559753), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 8sRunning iteration 121/1500... Est. remaining: 12m 55sRunning iteration 131/1500... Est. remaining: 12m 42sRunning iteration 141/1500... Est. remaining: 12m 30sRunning iteration 151/1500... Est. remaining: 12m 18sRunning iteration 161/1500... Est. remaining: 12m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,103,139,931
Annual Return: 45.20%
Sharpe Ratio: 1.49634
Sortino Ratio: 1.455
Max Drawdown: -57.2%
Avg Drawdown: -12.6%
Normalized Score: 0.371
Lookback periods: [143, 147, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 12m 7sRunning iteration 181/1500... Est. remaining: 11m 57sRunning iteration 191/1500... Est. remaining: 11m 48sRunning iteration 201/1500... Est. remaining: 11m 39sbest_combination: {'lookbacks': [143, 147, 156], 'score': np.float64(0.3709225019565425), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,240,568,031
Annual Return: 46.22%
Sharpe Ratio: 1.50159
Sortino Ratio: 1.463
Max Drawdown: -59.2%
Avg Drawdown: -12.2%
Normalized Score: 0.691
Lookback periods: [148, 155, 216] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 11m 29sRunning iteration 231/1500... Est. remaining: 11m 22sRunning iteration 241/1500... Est. remaining: 11m 15sRunning iteration 251/1500... Est. remaining: 11m 7sRunning iteration 261/1500... Est. remaining: 11m 0sRunning iteration 271/1500... Est. remaining: 10m 52sRunning iteration 281/1500... Est. remaining: 10m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,161,217,440
Annual Return: 46.91%
Sharpe Ratio: 1.52598
Sortino Ratio: 1.490
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.971
Lookback periods: [147, 188, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 291/1500... Est. remaining: 10m 43sRunning iteration 301/1500... Est. remaining: 10m 37sbest_combination: {'lookbacks': [147, 188, 194], 'score': np.float64(0.9710099412926839), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 30sRunning iteration 321/1500... Est. remaining: 10m 23sRunning iteration 331/1500... Est. remaining: 10m 16sRunning iteration 341/1500... Est. remaining: 10m 9sRunning iteration 351/1500... Est. remaining: 10m 3sRunning iteration 361/1500... Est. remaining: 9m 56sRunning iteration 371/1500... Est. remaining: 9m 50sRunning iteration 381/1500... Est. remaining: 9m 44sRunning iteration 391/1500... Est. remaining: 9m 38sRunning iteration 401/1500... Est. remaining: 9m 32sbest_combination: {'lookbacks': [147, 188, 194], 'score': np.float64(0.9710099412926839), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 26sRunning iteration 421/1500... Est. remaining: 9m 20sRunning iteration 431/1500... Est. remaining: 9m 14sRunning iteration 441/1500... Est. remaining: 9m 9sRunning iteration 451/1500... Est. remaining: 9m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,767,842,482
Annual Return: 47.31%
Sharpe Ratio: 1.55166
Sortino Ratio: 1.516
Max Drawdown: -60.1%
Avg Drawdown: -11.5%
Normalized Score: 1.141
Lookback periods: [145, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 9m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,463,045,078
Annual Return: 48.26%
Sharpe Ratio: 1.57724
Sortino Ratio: 1.548
Max Drawdown: -59.0%
Avg Drawdown: -10.7%
Normalized Score: 1.527
Lookback periods: [158, 162, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 8m 57sRunning iteration 481/1500... Est. remaining: 8m 51sRunning iteration 491/1500... Est. remaining: 8m 46sRunning iteration 501/1500... Est. remaining: 8m 40sbest_combination: {'lookbacks': [158, 162, 168], 'score': np.float64(1.527070905674235), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,401,499,529
Annual Return: 48.71%
Sharpe Ratio: 1.58190
Sortino Ratio: 1.544
Max Drawdown: -59.0%
Avg Drawdown: -10.3%
Normalized Score: 1.672
Lookback periods: [156, 158, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 8m 36sRunning iteration 521/1500... Est. remaining: 8m 30sRunning iteration 531/1500... Est. remaining: 8m 25sRunning iteration 541/1500... Est. remaining: 8m 19sRunning iteration 551/1500... Est. remaining: 8m 13sRunning iteration 561/1500... Est. remaining: 8m 7sRunning iteration 571/1500... Est. remaining: 8m 2sRunning iteration 581/1500... Est. remaining: 7m 56sRunning iteration 591/1500... Est. remaining: 7m 50sRunning iteration 601/1500... Est. remaining: 7m 45sbest_combination: {'lookbacks': [156, 158, 173], 'score': np.float64(1.6719300403310906), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 39sRunning iteration 621/1500... Est. remaining: 7m 34sRunning iteration 631/1500... Est. remaining: 7m 28sRunning iteration 641/1500... Est. remaining: 7m 23sRunning iteration 651/1500... Est. remaining: 7m 17sRunning iteration 661/1500... Est. remaining: 7m 12sRunning iteration 671/1500... Est. remaining: 7m 6sRunning iteration 681/1500... Est. remaining: 7m 1sRunning iteration 691/1500... Est. remaining: 6m 55sRunning iteration 701/1500... Est. remaining: 6m 50sbest_combination: {'lookbacks': [156, 158, 173], 'score': np.float64(1.6719300403310906), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 44sRunning iteration 721/1500... Est. remaining: 6m 39sRunning iteration 731/1500... Est. remaining: 6m 34sRunning iteration 741/1500... Est. remaining: 6m 28sRunning iteration 751/1500... Est. remaining: 6m 23sRunning iteration 761/1500... Est. remaining: 6m 18sRunning iteration 771/1500... Est. remaining: 6m 12sRunning iteration 781/1500... Est. remaining: 6m 7sRunning iteration 791/1500... Est. remaining: 6m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,839,958,464
Annual Return: 48.91%
Sharpe Ratio: 1.58996
Sortino Ratio: 1.551
Max Drawdown: -59.0%
Avg Drawdown: -10.2%
Normalized Score: 1.750
Lookback periods: [156, 158, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 801/1500... Est. remaining: 5m 57sbest_combination: {'lookbacks': [156, 158, 172], 'score': np.float64(1.7497247281428656), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 52sRunning iteration 821/1500... Est. remaining: 5m 47sRunning iteration 831/1500... Est. remaining: 5m 42sRunning iteration 841/1500... Est. remaining: 5m 36sRunning iteration 851/1500... Est. remaining: 5m 31sRunning iteration 861/1500... Est. remaining: 5m 26sRunning iteration 871/1500... Est. remaining: 5m 21sRunning iteration 881/1500... Est. remaining: 5m 15sRunning iteration 891/1500... Est. remaining: 5m 10sRunning iteration 901/1500... Est. remaining: 5m 5sbest_combination: {'lookbacks': [156, 158, 172], 'score': np.float64(1.7497247281428656), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 0sRunning iteration 921/1500... Est. remaining: 4m 55sRunning iteration 931/1500... Est. remaining: 4m 50sRunning iteration 941/1500... Est. remaining: 4m 44sRunning iteration 951/1500... Est. remaining: 4m 39sRunning iteration 961/1500... Est. remaining: 4m 34sRunning iteration 971/1500... Est. remaining: 4m 29sRunning iteration 981/1500... Est. remaining: 4m 24sRunning iteration 991/1500... Est. remaining: 4m 19sRunning iteration 1001/1500... Est. remaining: 4m 13sbest_combination: {'lookbacks': [156, 158, 172], 'score': np.float64(1.7497247281428656), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 8sRunning iteration 1021/1500... Est. remaining: 4m 3sRunning iteration 1031/1500... Est. remaining: 3m 58sRunning iteration 1041/1500... Est. remaining: 3m 53sRunning iteration 1051/1500... Est. remaining: 3m 48sRunning iteration 1061/1500... Est. remaining: 3m 42sRunning iteration 1071/1500... Est. remaining: 3m 37sRunning iteration 1081/1500... Est. remaining: 3m 32sRunning iteration 1091/1500... Est. remaining: 3m 27sRunning iteration 1101/1500... Est. remaining: 3m 22sbest_combination: {'lookbacks': [156, 158, 172], 'score': np.float64(1.7497247281428656), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 17sRunning iteration 1121/1500... Est. remaining: 3m 12sRunning iteration 1131/1500... Est. remaining: 3m 7sRunning iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 56sRunning iteration 1161/1500... Est. remaining: 2m 51sRunning iteration 1171/1500... Est. remaining: 2m 46sRunning iteration 1181/1500... Est. remaining: 2m 41sRunning iteration 1191/1500... Est. remaining: 2m 36sRunning iteration 1201/1500... Est. remaining: 2m 31sbest_combination: {'lookbacks': [156, 158, 172], 'score': np.float64(1.7497247281428656), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 26sRunning iteration 1221/1500... Est. remaining: 2m 21sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [156, 158, 172], 'score': np.float64(1.7497247281428656), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,196,825,110
Annual Return: 49.06%
Sharpe Ratio: 1.58821
Sortino Ratio: 1.552
Max Drawdown: -59.7%
Avg Drawdown: -11.5%
Normalized Score: 1.754
Lookback periods: [153, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [153, 155, 172], 'score': np.float64(1.7541472457434275), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.6 minutes
Best normalized score: 1.75
best_combination: {'lookbacks': [153, 155, 172], 'score': np.float64(1.7541472457434275), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [153, 155, 172] (score: 1.7541)

Monte Carlo simulation completed in 12.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [153, 155, 172] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 117 selections (28.1%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,196,825,109.92
Average Annualized Gain: 49.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Wed Aug 27 14:53:21 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,126,091,596
Annual Return: 39.88%
Sharpe Ratio: 1.33958
Sortino Ratio: 1.271
Max Drawdown: -63.4%
Avg Drawdown: -12.3%
Normalized Score: -0.533
Lookback periods: [92, 188, 212] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,454,977,959
Annual Return: 40.92%
Sharpe Ratio: 1.36526
Sortino Ratio: 1.309
Max Drawdown: -65.6%
Avg Drawdown: -13.3%
Normalized Score: -0.314
Lookback periods: [100, 156, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,099,956,626
Annual Return: 42.42%
Sharpe Ratio: 1.41565
Sortino Ratio: 1.356
Max Drawdown: -59.0%
Avg Drawdown: -12.0%
Normalized Score: 0.127
Lookback periods: [195, 261, 294] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 11sRunning iteration 21/1500... Est. remaining: 19m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,166,013,518
Annual Return: 44.11%
Sharpe Ratio: 1.42449
Sortino Ratio: 1.400
Max Drawdown: -66.2%
Avg Drawdown: -12.5%
Normalized Score: 0.367
Lookback periods: [172, 195, 244] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 17m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,267,848,357
Annual Return: 46.98%
Sharpe Ratio: 1.51633
Sortino Ratio: 1.486
Max Drawdown: -62.5%
Avg Drawdown: -11.6%
Normalized Score: 1.079
Lookback periods: [175, 192, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 16m 59sRunning iteration 51/1500... Est. remaining: 15m 47sRunning iteration 61/1500... Est. remaining: 15m 0sRunning iteration 71/1500... Est. remaining: 14m 26sRunning iteration 81/1500... Est. remaining: 13m 59sRunning iteration 91/1500... Est. remaining: 13m 38sRunning iteration 101/1500... Est. remaining: 13m 20sbest_combination: {'lookbacks': [175, 192, 194], 'score': np.float64(1.0794765803633617), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 4sRunning iteration 121/1500... Est. remaining: 12m 51sRunning iteration 131/1500... Est. remaining: 12m 38sRunning iteration 141/1500... Est. remaining: 12m 27sRunning iteration 151/1500... Est. remaining: 12m 16sRunning iteration 161/1500... Est. remaining: 12m 6sRunning iteration 171/1500... Est. remaining: 11m 57sRunning iteration 181/1500... Est. remaining: 11m 48sRunning iteration 191/1500... Est. remaining: 11m 39sRunning iteration 201/1500... Est. remaining: 11m 31sbest_combination: {'lookbacks': [175, 192, 194], 'score': np.float64(1.0794765803633617), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 23sRunning iteration 221/1500... Est. remaining: 11m 16sRunning iteration 231/1500... Est. remaining: 11m 9sRunning iteration 241/1500... Est. remaining: 11m 2sRunning iteration 251/1500... Est. remaining: 10m 55sRunning iteration 261/1500... Est. remaining: 10m 48sRunning iteration 271/1500... Est. remaining: 10m 41sRunning iteration 281/1500... Est. remaining: 10m 34sRunning iteration 291/1500... Est. remaining: 10m 28sRunning iteration 301/1500... Est. remaining: 10m 22sbest_combination: {'lookbacks': [175, 192, 194], 'score': np.float64(1.0794765803633617), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 15sRunning iteration 321/1500... Est. remaining: 10m 9sRunning iteration 331/1500... Est. remaining: 10m 3sRunning iteration 341/1500... Est. remaining: 9m 57sRunning iteration 351/1500... Est. remaining: 9m 51sRunning iteration 361/1500... Est. remaining: 9m 45sRunning iteration 371/1500... Est. remaining: 9m 39sRunning iteration 381/1500... Est. remaining: 9m 33sRunning iteration 391/1500... Est. remaining: 9m 27sRunning iteration 401/1500... Est. remaining: 9m 21sbest_combination: {'lookbacks': [175, 192, 194], 'score': np.float64(1.0794765803633617), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,582,569,200
Annual Return: 47.79%
Sharpe Ratio: 1.54005
Sortino Ratio: 1.497
Max Drawdown: -59.9%
Avg Drawdown: -11.7%
Normalized Score: 1.213
Lookback periods: [178, 197, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 13sRunning iteration 431/1500... Est. remaining: 9m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,957,520,691
Annual Return: 48.50%
Sharpe Ratio: 1.56894
Sortino Ratio: 1.526
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 1.442
Lookback periods: [179, 188, 216] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 5sRunning iteration 451/1500... Est. remaining: 8m 59sRunning iteration 461/1500... Est. remaining: 8m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,286,680,250
Annual Return: 49.10%
Sharpe Ratio: 1.57574
Sortino Ratio: 1.541
Max Drawdown: -59.6%
Avg Drawdown: -11.3%
Normalized Score: 1.546
Lookback periods: [183, 188, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 8m 51sRunning iteration 481/1500... Est. remaining: 8m 45sRunning iteration 491/1500... Est. remaining: 8m 40sRunning iteration 501/1500... Est. remaining: 8m 34sbest_combination: {'lookbacks': [183, 188, 196], 'score': np.float64(1.5460575077953629), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 29sRunning iteration 521/1500... Est. remaining: 8m 23sRunning iteration 531/1500... Est. remaining: 8m 18sRunning iteration 541/1500... Est. remaining: 8m 12sRunning iteration 551/1500... Est. remaining: 8m 7sRunning iteration 561/1500... Est. remaining: 8m 1sRunning iteration 571/1500... Est. remaining: 7m 55sRunning iteration 581/1500... Est. remaining: 7m 50sRunning iteration 591/1500... Est. remaining: 7m 45sRunning iteration 601/1500... Est. remaining: 7m 39sbest_combination: {'lookbacks': [183, 188, 196], 'score': np.float64(1.5460575077953629), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 34sRunning iteration 621/1500... Est. remaining: 7m 28sRunning iteration 631/1500... Est. remaining: 7m 23sRunning iteration 641/1500... Est. remaining: 7m 18sRunning iteration 651/1500... Est. remaining: 7m 12sRunning iteration 661/1500... Est. remaining: 7m 7sRunning iteration 671/1500... Est. remaining: 7m 2sRunning iteration 681/1500... Est. remaining: 6m 57sRunning iteration 691/1500... Est. remaining: 6m 51sRunning iteration 701/1500... Est. remaining: 6m 46sbest_combination: {'lookbacks': [183, 188, 196], 'score': np.float64(1.5460575077953629), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 41sRunning iteration 721/1500... Est. remaining: 6m 36sRunning iteration 731/1500... Est. remaining: 6m 30sRunning iteration 741/1500... Est. remaining: 6m 25sRunning iteration 751/1500... Est. remaining: 6m 20sRunning iteration 761/1500... Est. remaining: 6m 15sRunning iteration 771/1500... Est. remaining: 6m 9sRunning iteration 781/1500... Est. remaining: 6m 4sRunning iteration 791/1500... Est. remaining: 5m 59sRunning iteration 801/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [183, 188, 196], 'score': np.float64(1.5460575077953629), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 49sRunning iteration 821/1500... Est. remaining: 5m 43sRunning iteration 831/1500... Est. remaining: 5m 38sRunning iteration 841/1500... Est. remaining: 5m 33sRunning iteration 851/1500... Est. remaining: 5m 28sRunning iteration 861/1500... Est. remaining: 5m 23sRunning iteration 871/1500... Est. remaining: 5m 18sRunning iteration 881/1500... Est. remaining: 5m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,533,314,219
Annual Return: 49.59%
Sharpe Ratio: 1.59690
Sortino Ratio: 1.569
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 1.737
Lookback periods: [175, 184, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 5m 8sRunning iteration 901/1500... Est. remaining: 5m 3sbest_combination: {'lookbacks': [175, 184, 188], 'score': np.float64(1.7367140785391257), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 58sRunning iteration 921/1500... Est. remaining: 4m 53sRunning iteration 931/1500... Est. remaining: 4m 48sRunning iteration 941/1500... Est. remaining: 4m 43sRunning iteration 951/1500... Est. remaining: 4m 37sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 17sRunning iteration 1001/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [175, 184, 188], 'score': np.float64(1.7367140785391257), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 7sRunning iteration 1021/1500... Est. remaining: 4m 2sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 21sbest_combination: {'lookbacks': [175, 184, 188], 'score': np.float64(1.7367140785391257), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 16sRunning iteration 1121/1500... Est. remaining: 3m 11sRunning iteration 1131/1500... Est. remaining: 3m 6sRunning iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [175, 184, 188], 'score': np.float64(1.7367140785391257), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [175, 184, 188], 'score': np.float64(1.7367140785391257), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [175, 184, 188], 'score': np.float64(1.7367140785391257), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 1.74
best_combination: {'lookbacks': [175, 184, 188], 'score': np.float64(1.7367140785391257), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [175, 184, 188] (score: 1.7367)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [175, 184, 188] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 120 selections (28.8%)
2. sp500_hma: 100 selections (24.0%)
3. naz100_pine: 86 selections (20.7%)
4. naz100_pi: 72 selections (17.3%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,533,314,218.89
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Wed Aug 27 15:05:58 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $96,255,940
Annual Return: 30.30%
Sharpe Ratio: 1.05658
Sortino Ratio: 0.960
Max Drawdown: -71.9%
Avg Drawdown: -15.2%
Normalized Score: -3.731
Lookback periods: [73, 204, 235] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $94,453,473
Annual Return: 30.23%
Sharpe Ratio: 1.05660
Sortino Ratio: 0.959
Max Drawdown: -68.7%
Avg Drawdown: -14.3%
Normalized Score: -3.692
Lookback periods: [43, 269, 283] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $139,943,694
Annual Return: 31.71%
Sharpe Ratio: 1.08986
Sortino Ratio: 1.008
Max Drawdown: -55.2%
Avg Drawdown: -14.1%
Normalized Score: -3.223
Lookback periods: [71, 174, 279] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $526,190,474
Annual Return: 36.84%
Sharpe Ratio: 1.28466
Sortino Ratio: 1.186
Max Drawdown: -55.0%
Avg Drawdown: -13.0%
Normalized Score: -1.788
Lookback periods: [55, 139, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,702,853,730
Annual Return: 41.56%
Sharpe Ratio: 1.37860
Sortino Ratio: 1.336
Max Drawdown: -59.8%
Avg Drawdown: -12.0%
Normalized Score: -0.679
Lookback periods: [194, 269, 274] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,298,938,592
Annual Return: 42.79%
Sharpe Ratio: 1.41114
Sortino Ratio: 1.358
Max Drawdown: -67.8%
Avg Drawdown: -13.7%
Normalized Score: -0.574
Lookback periods: [121, 141, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 36m 1sRunning iteration 21/1500... Est. remaining: 24m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,692,249,071
Annual Return: 43.44%
Sharpe Ratio: 1.44622
Sortino Ratio: 1.394
Max Drawdown: -65.8%
Avg Drawdown: -12.0%
Normalized Score: -0.255
Lookback periods: [249, 250, 269] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 58sRunning iteration 41/1500... Est. remaining: 18m 38sRunning iteration 51/1500... Est. remaining: 17m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,133,048,348
Annual Return: 44.07%
Sharpe Ratio: 1.44214
Sortino Ratio: 1.408
Max Drawdown: -61.4%
Avg Drawdown: -12.4%
Normalized Score: -0.133
Lookback periods: [150, 167, 208] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 39sRunning iteration 71/1500... Est. remaining: 15m 53sRunning iteration 81/1500... Est. remaining: 15m 15sRunning iteration 91/1500... Est. remaining: 14m 43sRunning iteration 101/1500... Est. remaining: 14m 18sbest_combination: {'lookbacks': [150, 167, 208], 'score': np.float64(-0.1330482763944291), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,303,719,441
Annual Return: 45.40%
Sharpe Ratio: 1.49349
Sortino Ratio: 1.447
Max Drawdown: -68.5%
Avg Drawdown: -11.8%
Normalized Score: 0.158
Lookback periods: [124, 158, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 50sRunning iteration 131/1500... Est. remaining: 13m 32sRunning iteration 141/1500... Est. remaining: 13m 16sRunning iteration 151/1500... Est. remaining: 13m 2sRunning iteration 161/1500... Est. remaining: 12m 49sRunning iteration 171/1500... Est. remaining: 12m 36sRunning iteration 181/1500... Est. remaining: 12m 25sRunning iteration 191/1500... Est. remaining: 12m 14sRunning iteration 201/1500... Est. remaining: 12m 4sbest_combination: {'lookbacks': [124, 158, 171], 'score': np.float64(0.15834378341225033), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 54sRunning iteration 221/1500... Est. remaining: 11m 45sRunning iteration 231/1500... Est. remaining: 11m 37sRunning iteration 241/1500... Est. remaining: 11m 28sRunning iteration 251/1500... Est. remaining: 11m 20sRunning iteration 261/1500... Est. remaining: 11m 12sRunning iteration 271/1500... Est. remaining: 11m 4sRunning iteration 281/1500... Est. remaining: 10m 56sRunning iteration 291/1500... Est. remaining: 10m 49sRunning iteration 301/1500... Est. remaining: 10m 42sbest_combination: {'lookbacks': [124, 158, 171], 'score': np.float64(0.15834378341225033), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 35sRunning iteration 321/1500... Est. remaining: 10m 28sRunning iteration 331/1500... Est. remaining: 10m 21sRunning iteration 341/1500... Est. remaining: 10m 14sRunning iteration 351/1500... Est. remaining: 10m 8sRunning iteration 361/1500... Est. remaining: 10m 1sRunning iteration 371/1500... Est. remaining: 9m 55sRunning iteration 381/1500... Est. remaining: 9m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,559,033,947
Annual Return: 47.17%
Sharpe Ratio: 1.54071
Sortino Ratio: 1.511
Max Drawdown: -65.1%
Avg Drawdown: -11.7%
Normalized Score: 0.656
Lookback periods: [127, 156, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 9m 46sRunning iteration 401/1500... Est. remaining: 9m 40sbest_combination: {'lookbacks': [127, 156, 172], 'score': np.float64(0.6556409193511262), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 33sRunning iteration 421/1500... Est. remaining: 9m 27sRunning iteration 431/1500... Est. remaining: 9m 21sRunning iteration 441/1500... Est. remaining: 9m 15sRunning iteration 451/1500... Est. remaining: 10m 9sRunning iteration 461/1500... Est. remaining: 13m 22sRunning iteration 471/1500... Est. remaining: 13m 8sRunning iteration 481/1500... Est. remaining: 16m 36sRunning iteration 491/1500... Est. remaining: 16m 16sRunning iteration 501/1500... Est. remaining: 15m 57sbest_combination: {'lookbacks': [127, 156, 172], 'score': np.float64(0.6556409193511262), 'visits': 1}
Running iteration 511/1500... Est. remaining: 15m 38sRunning iteration 521/1500... Est. remaining: 15m 20sRunning iteration 531/1500... Est. remaining: 15m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,170,062,381
Annual Return: 46.91%
Sharpe Ratio: 1.54590
Sortino Ratio: 1.511
Max Drawdown: -64.1%
Avg Drawdown: -11.1%
Normalized Score: 0.678
Lookback periods: [135, 154, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 14m 48sRunning iteration 551/1500... Est. remaining: 14m 31sRunning iteration 561/1500... Est. remaining: 14m 15sRunning iteration 571/1500... Est. remaining: 13m 59sRunning iteration 581/1500... Est. remaining: 13m 44sRunning iteration 591/1500... Est. remaining: 13m 29sRunning iteration 601/1500... Est. remaining: 13m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,219,071,658
Annual Return: 46.95%
Sharpe Ratio: 1.55663
Sortino Ratio: 1.515
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.745
Lookback periods: [140, 149, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [140, 149, 156], 'score': np.float64(0.7452428605387554), 'visits': 1}
Running iteration 611/1500... Est. remaining: 13m 1sRunning iteration 621/1500... Est. remaining: 12m 47sRunning iteration 631/1500... Est. remaining: 12m 33sRunning iteration 641/1500... Est. remaining: 12m 19sRunning iteration 651/1500... Est. remaining: 12m 5sRunning iteration 661/1500... Est. remaining: 11m 52sRunning iteration 671/1500... Est. remaining: 11m 39sRunning iteration 681/1500... Est. remaining: 11m 26sRunning iteration 691/1500... Est. remaining: 11m 14sRunning iteration 701/1500... Est. remaining: 11m 2sbest_combination: {'lookbacks': [140, 149, 156], 'score': np.float64(0.7452428605387554), 'visits': 1}
Running iteration 711/1500... Est. remaining: 10m 50sRunning iteration 721/1500... Est. remaining: 10m 38sRunning iteration 731/1500... Est. remaining: 10m 26sRunning iteration 741/1500... Est. remaining: 10m 15sRunning iteration 751/1500... Est. remaining: 10m 4sRunning iteration 761/1500... Est. remaining: 9m 52sRunning iteration 771/1500... Est. remaining: 9m 41sRunning iteration 781/1500... Est. remaining: 9m 31sRunning iteration 791/1500... Est. remaining: 9m 20sRunning iteration 801/1500... Est. remaining: 9m 9sbest_combination: {'lookbacks': [140, 149, 156], 'score': np.float64(0.7452428605387554), 'visits': 1}
Running iteration 811/1500... Est. remaining: 8m 59sRunning iteration 821/1500... Est. remaining: 8m 49sRunning iteration 831/1500... Est. remaining: 8m 39sRunning iteration 841/1500... Est. remaining: 8m 29sRunning iteration 851/1500... Est. remaining: 8m 19sRunning iteration 861/1500... Est. remaining: 8m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,209,100,510
Annual Return: 46.94%
Sharpe Ratio: 1.56023
Sortino Ratio: 1.516
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.751
Lookback periods: [138, 149, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 871/1500... Est. remaining: 8m 0sRunning iteration 881/1500... Est. remaining: 7m 51sRunning iteration 891/1500... Est. remaining: 7m 41sRunning iteration 901/1500... Est. remaining: 7m 32sbest_combination: {'lookbacks': [138, 149, 156], 'score': np.float64(0.7510823597679634), 'visits': 1}
Running iteration 911/1500... Est. remaining: 7m 23sRunning iteration 921/1500... Est. remaining: 7m 14sRunning iteration 931/1500... Est. remaining: 7m 5sRunning iteration 941/1500... Est. remaining: 6m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,749,755,846
Annual Return: 47.88%
Sharpe Ratio: 1.56561
Sortino Ratio: 1.527
Max Drawdown: -60.1%
Avg Drawdown: -11.9%
Normalized Score: 0.837
Lookback periods: [127, 157, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 6m 48sRunning iteration 961/1500... Est. remaining: 6m 39sRunning iteration 971/1500... Est. remaining: 6m 30sRunning iteration 981/1500... Est. remaining: 6m 21sRunning iteration 991/1500... Est. remaining: 6m 13sRunning iteration 1001/1500... Est. remaining: 6m 4sbest_combination: {'lookbacks': [127, 157, 159], 'score': np.float64(0.8374914435383722), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 5m 56sRunning iteration 1021/1500... Est. remaining: 5m 48sRunning iteration 1031/1500... Est. remaining: 5m 39sRunning iteration 1041/1500... Est. remaining: 5m 31sRunning iteration 1051/1500... Est. remaining: 5m 23sRunning iteration 1061/1500... Est. remaining: 5m 15sRunning iteration 1071/1500... Est. remaining: 5m 7sRunning iteration 1081/1500... Est. remaining: 4m 59sRunning iteration 1091/1500... Est. remaining: 4m 51sRunning iteration 1101/1500... Est. remaining: 4m 43sbest_combination: {'lookbacks': [127, 157, 159], 'score': np.float64(0.8374914435383722), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 35sRunning iteration 1121/1500... Est. remaining: 4m 27sRunning iteration 1131/1500... Est. remaining: 4m 19sRunning iteration 1141/1500... Est. remaining: 4m 12sRunning iteration 1151/1500... Est. remaining: 4m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,368,835,155
Annual Return: 48.70%
Sharpe Ratio: 1.58994
Sortino Ratio: 1.552
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 1.062
Lookback periods: [128, 156, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1161/1500... Est. remaining: 3m 57sRunning iteration 1171/1500... Est. remaining: 3m 49sRunning iteration 1181/1500... Est. remaining: 3m 42sRunning iteration 1191/1500... Est. remaining: 3m 34sRunning iteration 1201/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [128, 156, 159], 'score': np.float64(1.0623666968787668), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 19sRunning iteration 1221/1500... Est. remaining: 3m 12sRunning iteration 1231/1500... Est. remaining: 3m 5sRunning iteration 1241/1500... Est. remaining: 2m 57sRunning iteration 1251/1500... Est. remaining: 2m 50sRunning iteration 1261/1500... Est. remaining: 2m 43sRunning iteration 1271/1500... Est. remaining: 2m 36sRunning iteration 1281/1500... Est. remaining: 2m 29sRunning iteration 1291/1500... Est. remaining: 2m 22sRunning iteration 1301/1500... Est. remaining: 2m 14sbest_combination: {'lookbacks': [128, 156, 159], 'score': np.float64(1.0623666968787668), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 7sRunning iteration 1321/1500... Est. remaining: 2m 0sRunning iteration 1331/1500... Est. remaining: 1m 54sRunning iteration 1341/1500... Est. remaining: 1m 47sRunning iteration 1351/1500... Est. remaining: 1m 40sRunning iteration 1361/1500... Est. remaining: 1m 33sRunning iteration 1371/1500... Est. remaining: 1m 26sRunning iteration 1381/1500... Est. remaining: 1m 19sRunning iteration 1391/1500... Est. remaining: 1m 12sRunning iteration 1401/1500... Est. remaining: 1m 6sbest_combination: {'lookbacks': [128, 156, 159], 'score': np.float64(1.0623666968787668), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 59sRunning iteration 1421/1500... Est. remaining: 0m 52sRunning iteration 1431/1500... Est. remaining: 0m 46sRunning iteration 1441/1500... Est. remaining: 0m 39sRunning iteration 1451/1500... Est. remaining: 0m 32sRunning iteration 1461/1500... Est. remaining: 0m 26sRunning iteration 1471/1500... Est. remaining: 0m 19sRunning iteration 1481/1500... Est. remaining: 0m 13sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 16.3 minutes
Best normalized score: 1.06
best_combination: {'lookbacks': [128, 156, 159], 'score': np.float64(1.0623666968787668), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [128, 156, 159] (score: 1.0624)

Monte Carlo simulation completed in 16.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [128, 156, 159] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 112 selections (26.9%)
2. sp500_hma: 112 selections (26.9%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,368,835,155.48
Average Annualized Gain: 48.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Wed Aug 27 15:22:21 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $42,812,255
Annual Return: 27.29%
Sharpe Ratio: 0.97072
Sortino Ratio: 0.881
Max Drawdown: -52.3%
Avg Drawdown: -13.8%
Normalized Score: -1.764
Lookback periods: [76, 86, 214] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,565,816,186
Annual Return: 41.22%
Sharpe Ratio: 1.35814
Sortino Ratio: 1.297
Max Drawdown: -59.0%
Avg Drawdown: -12.6%
Normalized Score: -0.212
Lookback periods: [161, 187, 241] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,445,911,409
Annual Return: 43.04%
Sharpe Ratio: 1.42689
Sortino Ratio: 1.371
Max Drawdown: -66.4%
Avg Drawdown: -12.5%
Normalized Score: -0.013
Lookback periods: [105, 187, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 26m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,870,225,045
Annual Return: 41.94%
Sharpe Ratio: 1.42360
Sortino Ratio: 1.369
Max Drawdown: -57.3%
Avg Drawdown: -12.5%
Normalized Score: 0.011
Lookback periods: [110, 139, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 20m 43sRunning iteration 31/1500... Est. remaining: 17m 42sRunning iteration 41/1500... Est. remaining: 16m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,949,455,025
Annual Return: 42.11%
Sharpe Ratio: 1.44099
Sortino Ratio: 1.357
Max Drawdown: -56.4%
Avg Drawdown: -11.8%
Normalized Score: 0.053
Lookback periods: [57, 126, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 15m 46sRunning iteration 61/1500... Est. remaining: 14m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,268,723,564
Annual Return: 44.25%
Sharpe Ratio: 1.46067
Sortino Ratio: 1.418
Max Drawdown: -64.1%
Avg Drawdown: -11.9%
Normalized Score: 0.183
Lookback periods: [160, 235, 256] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 14m 49sRunning iteration 81/1500... Est. remaining: 14m 19sRunning iteration 91/1500... Est. remaining: 13m 54sRunning iteration 101/1500... Est. remaining: 13m 33sbest_combination: {'lookbacks': [160, 235, 256], 'score': np.float64(0.1830317550982961), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,158,663,924
Annual Return: 46.16%
Sharpe Ratio: 1.51349
Sortino Ratio: 1.474
Max Drawdown: -62.5%
Avg Drawdown: -12.9%
Normalized Score: 0.364
Lookback periods: [150, 152, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 13m 31sRunning iteration 121/1500... Est. remaining: 13m 14sRunning iteration 131/1500... Est. remaining: 12m 59sRunning iteration 141/1500... Est. remaining: 12m 45sRunning iteration 151/1500... Est. remaining: 12m 32sRunning iteration 161/1500... Est. remaining: 12m 21sRunning iteration 171/1500... Est. remaining: 12m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,586,862,366
Annual Return: 46.49%
Sharpe Ratio: 1.51081
Sortino Ratio: 1.488
Max Drawdown: -60.1%
Avg Drawdown: -11.6%
Normalized Score: 0.471
Lookback periods: [153, 174, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/1500... Est. remaining: 12m 9sRunning iteration 191/1500... Est. remaining: 12m 0sRunning iteration 201/1500... Est. remaining: 11m 50sbest_combination: {'lookbacks': [153, 174, 184], 'score': np.float64(0.4714487383767067), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 41sRunning iteration 221/1500... Est. remaining: 11m 32sRunning iteration 231/1500... Est. remaining: 11m 23sRunning iteration 241/1500... Est. remaining: 11m 15sRunning iteration 251/1500... Est. remaining: 11m 8sRunning iteration 261/1500... Est. remaining: 11m 0sRunning iteration 271/1500... Est. remaining: 10m 53sRunning iteration 281/1500... Est. remaining: 10m 46sRunning iteration 291/1500... Est. remaining: 10m 38sRunning iteration 301/1500... Est. remaining: 10m 31sbest_combination: {'lookbacks': [153, 174, 184], 'score': np.float64(0.4714487383767067), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 25sRunning iteration 321/1500... Est. remaining: 10m 18sRunning iteration 331/1500... Est. remaining: 10m 11sRunning iteration 341/1500... Est. remaining: 10m 5sRunning iteration 351/1500... Est. remaining: 9m 58sRunning iteration 361/1500... Est. remaining: 9m 52sRunning iteration 371/1500... Est. remaining: 9m 46sRunning iteration 381/1500... Est. remaining: 9m 40sRunning iteration 391/1500... Est. remaining: 9m 34sRunning iteration 401/1500... Est. remaining: 9m 27sbest_combination: {'lookbacks': [153, 174, 184], 'score': np.float64(0.4714487383767067), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 22sRunning iteration 421/1500... Est. remaining: 9m 16sRunning iteration 431/1500... Est. remaining: 9m 10sRunning iteration 441/1500... Est. remaining: 9m 4sRunning iteration 451/1500... Est. remaining: 8m 58sRunning iteration 461/1500... Est. remaining: 8m 52sRunning iteration 471/1500... Est. remaining: 8m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,625,078,469
Annual Return: 46.52%
Sharpe Ratio: 1.51855
Sortino Ratio: 1.486
Max Drawdown: -58.5%
Avg Drawdown: -11.8%
Normalized Score: 0.479
Lookback periods: [152, 154, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 8m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,188,237,333
Annual Return: 46.93%
Sharpe Ratio: 1.53764
Sortino Ratio: 1.503
Max Drawdown: -64.1%
Avg Drawdown: -11.4%
Normalized Score: 0.512
Lookback periods: [144, 154, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,908,895,528
Annual Return: 47.40%
Sharpe Ratio: 1.54604
Sortino Ratio: 1.513
Max Drawdown: -62.5%
Avg Drawdown: -12.4%
Normalized Score: 0.525
Lookback periods: [152, 153, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 8m 42sRunning iteration 501/1500... Est. remaining: 8m 36sbest_combination: {'lookbacks': [152, 153, 167], 'score': np.float64(0.5254519131062738), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,676,221,781
Annual Return: 48.37%
Sharpe Ratio: 1.58529
Sortino Ratio: 1.547
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.759
Lookback periods: [154, 159, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 8m 33sRunning iteration 521/1500... Est. remaining: 8m 27sRunning iteration 531/1500... Est. remaining: 8m 21sRunning iteration 541/1500... Est. remaining: 8m 16sRunning iteration 551/1500... Est. remaining: 8m 10sRunning iteration 561/1500... Est. remaining: 8m 4sRunning iteration 571/1500... Est. remaining: 7m 59sRunning iteration 581/1500... Est. remaining: 7m 53sRunning iteration 591/1500... Est. remaining: 7m 48sRunning iteration 601/1500... Est. remaining: 7m 42sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(0.7592933095102217), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 37sRunning iteration 621/1500... Est. remaining: 7m 31sRunning iteration 631/1500... Est. remaining: 7m 26sRunning iteration 641/1500... Est. remaining: 7m 20sRunning iteration 651/1500... Est. remaining: 7m 15sRunning iteration 661/1500... Est. remaining: 7m 10sRunning iteration 671/1500... Est. remaining: 7m 4sRunning iteration 681/1500... Est. remaining: 6m 59sRunning iteration 691/1500... Est. remaining: 6m 53sRunning iteration 701/1500... Est. remaining: 6m 48sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(0.7592933095102217), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 43sRunning iteration 721/1500... Est. remaining: 6m 37sRunning iteration 731/1500... Est. remaining: 6m 32sRunning iteration 741/1500... Est. remaining: 6m 27sRunning iteration 751/1500... Est. remaining: 6m 21sRunning iteration 761/1500... Est. remaining: 6m 16sRunning iteration 771/1500... Est. remaining: 6m 11sRunning iteration 781/1500... Est. remaining: 6m 5sRunning iteration 791/1500... Est. remaining: 6m 0sRunning iteration 801/1500... Est. remaining: 5m 55sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(0.7592933095102217), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 50sRunning iteration 821/1500... Est. remaining: 5m 44sRunning iteration 831/1500... Est. remaining: 5m 39sRunning iteration 841/1500... Est. remaining: 5m 34sRunning iteration 851/1500... Est. remaining: 5m 29sRunning iteration 861/1500... Est. remaining: 5m 24sRunning iteration 871/1500... Est. remaining: 5m 18sRunning iteration 881/1500... Est. remaining: 5m 13sRunning iteration 891/1500... Est. remaining: 5m 8sRunning iteration 901/1500... Est. remaining: 5m 3sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(0.7592933095102217), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 58sRunning iteration 921/1500... Est. remaining: 4m 53sRunning iteration 931/1500... Est. remaining: 4m 47sRunning iteration 941/1500... Est. remaining: 4m 42sRunning iteration 951/1500... Est. remaining: 4m 37sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 17sRunning iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(0.7592933095102217), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(0.7592933095102217), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(0.7592933095102217), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(0.7592933095102217), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(0.7592933095102217), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 40sRunning iteration 1421/1500... Est. remaining: 1m 36sRunning iteration 1431/1500... Est. remaining: 1m 23sRunning iteration 1441/1500... Est. remaining: 1m 42sRunning iteration 1451/1500... Est. remaining: 1m 25sRunning iteration 1461/1500... Est. remaining: 1m 12sRunning iteration 1471/1500... Est. remaining: 1m 1sRunning iteration 1481/1500... Est. remaining: 0m 40sRunning iteration 1491/1500... Est. remaining: 0m 23s
Monte Carlo simulation completed in 65.2 minutes
Best normalized score: 0.76
best_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(0.7592933095102217), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [154, 159, 166] (score: 0.7593)

Monte Carlo simulation completed in 65.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 159, 166] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,676,221,780.54
Average Annualized Gain: 48.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Wed Aug 27 16:27:39 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $331,986,831
Annual Return: 35.04%
Sharpe Ratio: 1.22066
Sortino Ratio: 1.106
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: -1.878
Lookback periods: [50, 117, 264] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $787,914,708
Annual Return: 38.44%
Sharpe Ratio: 1.32289
Sortino Ratio: 1.250
Max Drawdown: -52.3%
Avg Drawdown: -11.7%
Normalized Score: -0.882
Lookback periods: [82, 133, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,321,245,839
Annual Return: 42.83%
Sharpe Ratio: 1.39574
Sortino Ratio: 1.358
Max Drawdown: -59.0%
Avg Drawdown: -12.6%
Normalized Score: -0.291
Lookback periods: [171, 192, 223] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,780,174,802
Annual Return: 43.57%
Sharpe Ratio: 1.45968
Sortino Ratio: 1.418
Max Drawdown: -66.3%
Avg Drawdown: -13.1%
Normalized Score: -0.074
Lookback periods: [114, 133, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,850,837,954
Annual Return: 46.69%
Sharpe Ratio: 1.52261
Sortino Ratio: 1.480
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.761
Lookback periods: [169, 178, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 3188m 7sRunning iteration 21/1500... Est. remaining: 1590m 28sRunning iteration 31/1500... Est. remaining: 1170m 51sRunning iteration 41/1500... Est. remaining: 875m 12sRunning iteration 51/1500... Est. remaining: 940m 9sRunning iteration 61/1500... Est. remaining: 1090m 5sRunning iteration 71/1500... Est. remaining: 929m 29sRunning iteration 81/1500... Est. remaining: 809m 5sRunning iteration 91/1500... Est. remaining: 1038m 35sRunning iteration 101/1500... Est. remaining: 1781m 28sbest_combination: {'lookbacks': [169, 178, 198], 'score': np.float64(0.7608897650875435), 'visits': 1}
Running iteration 111/1500... Est. remaining: 1609m 0sRunning iteration 121/1500... Est. remaining: 1534m 27sRunning iteration 131/1500... Est. remaining: 1409m 35sRunning iteration 141/1500... Est. remaining: 1300m 8sRunning iteration 151/1500... Est. remaining: 1223m 37sRunning iteration 161/1500... Est. remaining: 1139m 48sRunning iteration 171/1500... Est. remaining: 1065m 23sRunning iteration 181/1500... Est. remaining: 1012m 19sRunning iteration 191/1500... Est. remaining: 957m 31sRunning iteration 201/1500... Est. remaining: 903m 14sbest_combination: {'lookbacks': [169, 178, 198], 'score': np.float64(0.7608897650875435), 'visits': 1}
Running iteration 211/1500... Est. remaining: 854m 51sRunning iteration 221/1500... Est. remaining: 810m 8sRunning iteration 231/1500... Est. remaining: 774m 30sRunning iteration 241/1500... Est. remaining: 736m 48sRunning iteration 251/1500... Est. remaining: 716m 16sRunning iteration 261/1500... Est. remaining: 726m 37sRunning iteration 271/1500... Est. remaining: 694m 26sRunning iteration 281/1500... Est. remaining: 668m 14sRunning iteration 291/1500... Est. remaining: 684m 40sRunning iteration 301/1500... Est. remaining: 656m 42sbest_combination: {'lookbacks': [169, 178, 198], 'score': np.float64(0.7608897650875435), 'visits': 1}
Running iteration 311/1500... Est. remaining: 648m 28sRunning iteration 321/1500... Est. remaining: 633m 5sRunning iteration 331/1500... Est. remaining: 609m 0sRunning iteration 341/1500... Est. remaining: 594m 59sRunning iteration 351/1500... Est. remaining: 573m 16sRunning iteration 361/1500... Est. remaining: 554m 27sRunning iteration 371/1500... Est. remaining: 541m 59sRunning iteration 381/1500... Est. remaining: 523m 17sRunning iteration 391/1500... Est. remaining: 516m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,041,517,076
Annual Return: 48.04%
Sharpe Ratio: 1.55001
Sortino Ratio: 1.521
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 1.058
Lookback periods: [175, 189, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 500m 47sbest_combination: {'lookbacks': [175, 189, 196], 'score': np.float64(1.0582046646828172), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,768,739,453
Annual Return: 48.88%
Sharpe Ratio: 1.57772
Sortino Ratio: 1.534
Max Drawdown: -59.6%
Avg Drawdown: -11.1%
Normalized Score: 1.245
Lookback periods: [183, 188, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 500m 28sRunning iteration 421/1500... Est. remaining: 484m 17sRunning iteration 431/1500... Est. remaining: 482m 16sRunning iteration 441/1500... Est. remaining: 488m 4sRunning iteration 451/1500... Est. remaining: 472m 54sRunning iteration 461/1500... Est. remaining: 471m 55sRunning iteration 471/1500... Est. remaining: 468m 24sRunning iteration 481/1500... Est. remaining: 454m 22sRunning iteration 491/1500... Est. remaining: 447m 49sRunning iteration 501/1500... Est. remaining: 434m 40sbest_combination: {'lookbacks': [183, 188, 190], 'score': np.float64(1.2450262673836392), 'visits': 1}
Running iteration 511/1500... Est. remaining: 437m 45sRunning iteration 521/1500... Est. remaining: 441m 41sRunning iteration 531/1500... Est. remaining: 429m 4sRunning iteration 541/1500... Est. remaining: 418m 57sRunning iteration 551/1500... Est. remaining: 409m 2sRunning iteration 561/1500... Est. remaining: 397m 38sRunning iteration 571/1500... Est. remaining: 390m 15sRunning iteration 581/1500... Est. remaining: 379m 31sRunning iteration 591/1500... Est. remaining: 381m 14sRunning iteration 601/1500... Est. remaining: 373m 53sbest_combination: {'lookbacks': [183, 188, 190], 'score': np.float64(1.2450262673836392), 'visits': 1}
Running iteration 611/1500... Est. remaining: 363m 47sRunning iteration 621/1500... Est. remaining: 355m 17sRunning iteration 631/1500... Est. remaining: 354m 13sRunning iteration 641/1500... Est. remaining: 344m 47sRunning iteration 651/1500... Est. remaining: 337m 43sRunning iteration 661/1500... Est. remaining: 330m 50sRunning iteration 671/1500... Est. remaining: 322m 7sRunning iteration 681/1500... Est. remaining: 316m 56sRunning iteration 691/1500... Est. remaining: 308m 37sRunning iteration 701/1500... Est. remaining: 300m 55sbest_combination: {'lookbacks': [183, 188, 190], 'score': np.float64(1.2450262673836392), 'visits': 1}
Running iteration 711/1500... Est. remaining: 295m 21sRunning iteration 721/1500... Est. remaining: 287m 39sRunning iteration 731/1500... Est. remaining: 280m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,084,469,208
Annual Return: 49.01%
Sharpe Ratio: 1.58510
Sortino Ratio: 1.550
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 1.343
Lookback periods: [176, 189, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 280m 51sRunning iteration 751/1500... Est. remaining: 274m 55sRunning iteration 761/1500... Est. remaining: 267m 46sRunning iteration 771/1500... Est. remaining: 263m 6sRunning iteration 781/1500... Est. remaining: 256m 15sRunning iteration 791/1500... Est. remaining: 249m 56sRunning iteration 801/1500... Est. remaining: 245m 1sbest_combination: {'lookbacks': [176, 189, 194], 'score': np.float64(1.3434384423206966), 'visits': 1}
Running iteration 811/1500... Est. remaining: 238m 36sRunning iteration 821/1500... Est. remaining: 233m 9sRunning iteration 831/1500... Est. remaining: 228m 32sRunning iteration 841/1500... Est. remaining: 222m 30sRunning iteration 851/1500... Est. remaining: 216m 37sRunning iteration 861/1500... Est. remaining: 211m 42sRunning iteration 871/1500... Est. remaining: 209m 24sRunning iteration 881/1500... Est. remaining: 203m 47sRunning iteration 891/1500... Est. remaining: 200m 56sRunning iteration 901/1500... Est. remaining: 197m 44sbest_combination: {'lookbacks': [176, 189, 194], 'score': np.float64(1.3434384423206966), 'visits': 1}
Running iteration 911/1500... Est. remaining: 192m 21sRunning iteration 921/1500... Est. remaining: 190m 59sRunning iteration 931/1500... Est. remaining: 186m 38sRunning iteration 941/1500... Est. remaining: 181m 28sRunning iteration 951/1500... Est. remaining: 179m 37sRunning iteration 961/1500... Est. remaining: 174m 48sRunning iteration 971/1500... Est. remaining: 169m 50sRunning iteration 981/1500... Est. remaining: 168m 54sRunning iteration 991/1500... Est. remaining: 164m 2sRunning iteration 1001/1500... Est. remaining: 160m 18sbest_combination: {'lookbacks': [176, 189, 194], 'score': np.float64(1.3434384423206966), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 155m 35sRunning iteration 1021/1500... Est. remaining: 150m 57sRunning iteration 1031/1500... Est. remaining: 146m 24sRunning iteration 1041/1500... Est. remaining: 141m 57sRunning iteration 1051/1500... Est. remaining: 137m 34sRunning iteration 1061/1500... Est. remaining: 133m 17sRunning iteration 1071/1500... Est. remaining: 129m 4sRunning iteration 1081/1500... Est. remaining: 124m 56sRunning iteration 1091/1500... Est. remaining: 120m 52sRunning iteration 1101/1500... Est. remaining: 116m 53sbest_combination: {'lookbacks': [176, 189, 194], 'score': np.float64(1.3434384423206966), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 112m 57sRunning iteration 1121/1500... Est. remaining: 109m 6sRunning iteration 1131/1500... Est. remaining: 105m 19sRunning iteration 1141/1500... Est. remaining: 101m 36sRunning iteration 1151/1500... Est. remaining: 97m 57sRunning iteration 1161/1500... Est. remaining: 94m 21sRunning iteration 1171/1500... Est. remaining: 90m 49sRunning iteration 1181/1500... Est. remaining: 87m 20sRunning iteration 1191/1500... Est. remaining: 83m 55sRunning iteration 1201/1500... Est. remaining: 80m 33sbest_combination: {'lookbacks': [176, 189, 194], 'score': np.float64(1.3434384423206966), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 77m 15sRunning iteration 1221/1500... Est. remaining: 73m 59sRunning iteration 1231/1500... Est. remaining: 70m 47sRunning iteration 1241/1500... Est. remaining: 67m 38sRunning iteration 1251/1500... Est. remaining: 64m 31sRunning iteration 1261/1500... Est. remaining: 61m 28sRunning iteration 1271/1500... Est. remaining: 58m 27sRunning iteration 1281/1500... Est. remaining: 55m 29sRunning iteration 1291/1500... Est. remaining: 52m 34sRunning iteration 1301/1500... Est. remaining: 49m 42sbest_combination: {'lookbacks': [176, 189, 194], 'score': np.float64(1.3434384423206966), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 46m 52sRunning iteration 1321/1500... Est. remaining: 44m 4sRunning iteration 1331/1500... Est. remaining: 41m 19sRunning iteration 1341/1500... Est. remaining: 38m 36sRunning iteration 1351/1500... Est. remaining: 35m 56sRunning iteration 1361/1500... Est. remaining: 33m 18sRunning iteration 1371/1500... Est. remaining: 30m 42sRunning iteration 1381/1500... Est. remaining: 28m 9sRunning iteration 1391/1500... Est. remaining: 25m 37sRunning iteration 1401/1500... Est. remaining: 23m 8sbest_combination: {'lookbacks': [176, 189, 194], 'score': np.float64(1.3434384423206966), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 20m 40sRunning iteration 1421/1500... Est. remaining: 18m 15sRunning iteration 1431/1500... Est. remaining: 15m 52sRunning iteration 1441/1500... Est. remaining: 13m 30sRunning iteration 1451/1500... Est. remaining: 11m 10sRunning iteration 1461/1500... Est. remaining: 8m 53sRunning iteration 1471/1500... Est. remaining: 6m 37sRunning iteration 1481/1500... Est. remaining: 4m 23sRunning iteration 1491/1500... Est. remaining: 2m 10s
Monte Carlo simulation completed in 324.7 minutes
Best normalized score: 1.34
best_combination: {'lookbacks': [176, 189, 194], 'score': np.float64(1.3434384423206966), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [176, 189, 194] (score: 1.3434)

Monte Carlo simulation completed in 324.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 189, 194] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 122 selections (29.3%)
2. sp500_hma: 101 selections (24.3%)
3. naz100_pine: 86 selections (20.7%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,084,469,208.10
Average Annualized Gain: 49.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Wed Aug 27 21:52:29 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $399,275,214
Annual Return: 35.76%
Sharpe Ratio: 1.25770
Sortino Ratio: 1.157
Max Drawdown: -62.2%
Avg Drawdown: -12.5%
Normalized Score: -1.146
Lookback periods: [65, 89, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,028,792,853
Annual Return: 39.51%
Sharpe Ratio: 1.31670
Sortino Ratio: 1.264
Max Drawdown: -60.9%
Avg Drawdown: -13.1%
Normalized Score: -0.778
Lookback periods: [199, 222, 268] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,433,268,210
Annual Return: 40.86%
Sharpe Ratio: 1.33205
Sortino Ratio: 1.285
Max Drawdown: -67.8%
Avg Drawdown: -13.0%
Normalized Score: -0.721
Lookback periods: [173, 210, 227] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,693,725,232
Annual Return: 41.54%
Sharpe Ratio: 1.38622
Sortino Ratio: 1.333
Max Drawdown: -69.5%
Avg Drawdown: -13.2%
Normalized Score: -0.570
Lookback periods: [158, 223, 263] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 22sRunning iteration 21/1500... Est. remaining: 21m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,785,852,066
Annual Return: 41.75%
Sharpe Ratio: 1.38579
Sortino Ratio: 1.339
Max Drawdown: -69.0%
Avg Drawdown: -12.4%
Normalized Score: -0.527
Lookback periods: [135, 174, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 3sRunning iteration 41/1500... Est. remaining: 17m 8sRunning iteration 51/1500... Est. remaining: 16m 0sRunning iteration 61/1500... Est. remaining: 15m 12sRunning iteration 71/1500... Est. remaining: 14m 37sRunning iteration 81/1500... Est. remaining: 14m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,525,598,001
Annual Return: 41.11%
Sharpe Ratio: 1.40752
Sortino Ratio: 1.316
Max Drawdown: -62.0%
Avg Drawdown: -12.0%
Normalized Score: -0.504
Lookback periods: [45, 158, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,617,437,984
Annual Return: 41.35%
Sharpe Ratio: 1.38110
Sortino Ratio: 1.330
Max Drawdown: -59.8%
Avg Drawdown: -12.1%
Normalized Score: -0.496
Lookback periods: [198, 270, 282] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,421,682,245
Annual Return: 43.00%
Sharpe Ratio: 1.41368
Sortino Ratio: 1.368
Max Drawdown: -61.0%
Avg Drawdown: -13.0%
Normalized Score: -0.368
Lookback periods: [143, 180, 204] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 14m 18sbest_combination: {'lookbacks': [143, 180, 204], 'score': np.float64(-0.36752408198967507), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 58sRunning iteration 121/1500... Est. remaining: 13m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,339,980,076
Annual Return: 44.34%
Sharpe Ratio: 1.46056
Sortino Ratio: 1.421
Max Drawdown: -63.7%
Avg Drawdown: -12.7%
Normalized Score: -0.187
Lookback periods: [176, 245, 246] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 36sRunning iteration 141/1500... Est. remaining: 13m 21sRunning iteration 151/1500... Est. remaining: 13m 6sRunning iteration 161/1500... Est. remaining: 12m 52sRunning iteration 171/1500... Est. remaining: 12m 40sRunning iteration 181/1500... Est. remaining: 12m 29sRunning iteration 191/1500... Est. remaining: 12m 17sRunning iteration 201/1500... Est. remaining: 12m 6sbest_combination: {'lookbacks': [176, 245, 246], 'score': np.float64(-0.18716019417171909), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 56sRunning iteration 221/1500... Est. remaining: 11m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,825,415,203
Annual Return: 43.64%
Sharpe Ratio: 1.46356
Sortino Ratio: 1.417
Max Drawdown: -59.7%
Avg Drawdown: -12.3%
Normalized Score: -0.179
Lookback periods: [157, 250, 273] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 11m 45sRunning iteration 241/1500... Est. remaining: 11m 36sRunning iteration 251/1500... Est. remaining: 11m 27sRunning iteration 261/1500... Est. remaining: 11m 19sRunning iteration 271/1500... Est. remaining: 11m 11sRunning iteration 281/1500... Est. remaining: 11m 3sRunning iteration 291/1500... Est. remaining: 10m 55sRunning iteration 301/1500... Est. remaining: 10m 48sbest_combination: {'lookbacks': [157, 250, 273], 'score': np.float64(-0.17882902963490493), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 40sRunning iteration 321/1500... Est. remaining: 10m 33sRunning iteration 331/1500... Est. remaining: 10m 26sRunning iteration 341/1500... Est. remaining: 10m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,266,231,634
Annual Return: 42.73%
Sharpe Ratio: 1.50118
Sortino Ratio: 1.410
Max Drawdown: -52.3%
Avg Drawdown: -9.3%
Normalized Score: -0.044
Lookback periods: [50, 97, 117] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 351/1500... Est. remaining: 10m 16sRunning iteration 361/1500... Est. remaining: 10m 9sRunning iteration 371/1500... Est. remaining: 10m 2sRunning iteration 381/1500... Est. remaining: 9m 56sRunning iteration 391/1500... Est. remaining: 9m 49sRunning iteration 401/1500... Est. remaining: 9m 43sbest_combination: {'lookbacks': [50, 97, 117], 'score': np.float64(-0.04426152844454488), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 36sRunning iteration 421/1500... Est. remaining: 9m 30sRunning iteration 431/1500... Est. remaining: 9m 24sRunning iteration 441/1500... Est. remaining: 9m 18sRunning iteration 451/1500... Est. remaining: 9m 12sRunning iteration 461/1500... Est. remaining: 9m 6sRunning iteration 471/1500... Est. remaining: 8m 59sRunning iteration 481/1500... Est. remaining: 8m 53sRunning iteration 491/1500... Est. remaining: 8m 47sRunning iteration 501/1500... Est. remaining: 8m 41sbest_combination: {'lookbacks': [50, 97, 117], 'score': np.float64(-0.04426152844454488), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,466,960,510
Annual Return: 46.40%
Sharpe Ratio: 1.54419
Sortino Ratio: 1.498
Max Drawdown: -62.1%
Avg Drawdown: -12.3%
Normalized Score: 0.131
Lookback periods: [126, 135, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 8m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,205,554,763
Annual Return: 47.57%
Sharpe Ratio: 1.57228
Sortino Ratio: 1.535
Max Drawdown: -56.6%
Avg Drawdown: -12.2%
Normalized Score: 0.305
Lookback periods: [130, 133, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 34sRunning iteration 531/1500... Est. remaining: 8m 29sRunning iteration 541/1500... Est. remaining: 8m 23sRunning iteration 551/1500... Est. remaining: 8m 17sRunning iteration 561/1500... Est. remaining: 8m 11sRunning iteration 571/1500... Est. remaining: 8m 5sRunning iteration 581/1500... Est. remaining: 8m 0sRunning iteration 591/1500... Est. remaining: 7m 54sRunning iteration 601/1500... Est. remaining: 7m 48sbest_combination: {'lookbacks': [130, 133, 136], 'score': np.float64(0.3047011499219458), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 43sRunning iteration 621/1500... Est. remaining: 7m 37sRunning iteration 631/1500... Est. remaining: 7m 32sRunning iteration 641/1500... Est. remaining: 7m 26sRunning iteration 651/1500... Est. remaining: 7m 20sRunning iteration 661/1500... Est. remaining: 7m 15sRunning iteration 671/1500... Est. remaining: 7m 9sRunning iteration 681/1500... Est. remaining: 7m 4sRunning iteration 691/1500... Est. remaining: 6m 58sRunning iteration 701/1500... Est. remaining: 6m 53sbest_combination: {'lookbacks': [130, 133, 136], 'score': np.float64(0.3047011499219458), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 47sRunning iteration 721/1500... Est. remaining: 6m 42sRunning iteration 731/1500... Est. remaining: 6m 37sRunning iteration 741/1500... Est. remaining: 6m 31sRunning iteration 751/1500... Est. remaining: 6m 26sRunning iteration 761/1500... Est. remaining: 6m 20sRunning iteration 771/1500... Est. remaining: 6m 15sRunning iteration 781/1500... Est. remaining: 6m 10sRunning iteration 791/1500... Est. remaining: 6m 4sRunning iteration 801/1500... Est. remaining: 5m 59sbest_combination: {'lookbacks': [130, 133, 136], 'score': np.float64(0.3047011499219458), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 54sRunning iteration 821/1500... Est. remaining: 5m 48sRunning iteration 831/1500... Est. remaining: 5m 43sRunning iteration 841/1500... Est. remaining: 5m 38sRunning iteration 851/1500... Est. remaining: 5m 32sRunning iteration 861/1500... Est. remaining: 5m 27sRunning iteration 871/1500... Est. remaining: 5m 22sRunning iteration 881/1500... Est. remaining: 5m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,517,980,535
Annual Return: 47.75%
Sharpe Ratio: 1.58525
Sortino Ratio: 1.544
Max Drawdown: -55.0%
Avg Drawdown: -12.1%
Normalized Score: 0.352
Lookback periods: [131, 135, 135] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 5m 12sRunning iteration 901/1500... Est. remaining: 5m 7sbest_combination: {'lookbacks': [131, 135, 135], 'score': np.float64(0.3516288361294614), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 2sRunning iteration 921/1500... Est. remaining: 4m 57sRunning iteration 931/1500... Est. remaining: 4m 51sRunning iteration 941/1500... Est. remaining: 4m 46sRunning iteration 951/1500... Est. remaining: 4m 41sRunning iteration 961/1500... Est. remaining: 4m 36sRunning iteration 971/1500... Est. remaining: 4m 30sRunning iteration 981/1500... Est. remaining: 4m 25sRunning iteration 991/1500... Est. remaining: 4m 20sRunning iteration 1001/1500... Est. remaining: 4m 15sbest_combination: {'lookbacks': [131, 135, 135], 'score': np.float64(0.3516288361294614), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 9sRunning iteration 1021/1500... Est. remaining: 4m 4sRunning iteration 1031/1500... Est. remaining: 3m 59sRunning iteration 1041/1500... Est. remaining: 3m 54sRunning iteration 1051/1500... Est. remaining: 3m 49sRunning iteration 1061/1500... Est. remaining: 3m 43sRunning iteration 1071/1500... Est. remaining: 3m 38sRunning iteration 1081/1500... Est. remaining: 3m 33sRunning iteration 1091/1500... Est. remaining: 3m 28sRunning iteration 1101/1500... Est. remaining: 3m 23sbest_combination: {'lookbacks': [131, 135, 135], 'score': np.float64(0.3516288361294614), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,797,743,439
Annual Return: 47.91%
Sharpe Ratio: 1.58555
Sortino Ratio: 1.546
Max Drawdown: -55.0%
Avg Drawdown: -11.9%
Normalized Score: 0.366
Lookback periods: [131, 134, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1111/1500... Est. remaining: 3m 18sRunning iteration 1121/1500... Est. remaining: 3m 13sRunning iteration 1131/1500... Est. remaining: 3m 8sRunning iteration 1141/1500... Est. remaining: 3m 3sRunning iteration 1151/1500... Est. remaining: 2m 57sRunning iteration 1161/1500... Est. remaining: 2m 52sRunning iteration 1171/1500... Est. remaining: 2m 47sRunning iteration 1181/1500... Est. remaining: 2m 42sRunning iteration 1191/1500... Est. remaining: 2m 37sRunning iteration 1201/1500... Est. remaining: 2m 32sbest_combination: {'lookbacks': [131, 134, 136], 'score': np.float64(0.3661554128582126), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 27sRunning iteration 1221/1500... Est. remaining: 2m 22sRunning iteration 1231/1500... Est. remaining: 2m 16sRunning iteration 1241/1500... Est. remaining: 2m 11sRunning iteration 1251/1500... Est. remaining: 2m 6sRunning iteration 1261/1500... Est. remaining: 2m 1sRunning iteration 1271/1500... Est. remaining: 1m 56sRunning iteration 1281/1500... Est. remaining: 1m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,700,957,331
Annual Return: 48.38%
Sharpe Ratio: 1.59965
Sortino Ratio: 1.558
Max Drawdown: -55.0%
Avg Drawdown: -12.0%
Normalized Score: 0.418
Lookback periods: [132, 134, 135] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [132, 134, 135], 'score': np.float64(0.41784726603122513), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 36sRunning iteration 1321/1500... Est. remaining: 1m 31sRunning iteration 1331/1500... Est. remaining: 1m 26sRunning iteration 1341/1500... Est. remaining: 1m 21sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [132, 134, 135], 'score': np.float64(0.41784726603122513), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.6 minutes
Best normalized score: 0.42
best_combination: {'lookbacks': [132, 134, 135], 'score': np.float64(0.41784726603122513), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [132, 134, 135] (score: 0.4178)

Monte Carlo simulation completed in 12.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [132, 134, 135] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 102 selections (24.5%)
3. naz100_pi: 87 selections (20.9%)
4. naz100_pine: 79 selections (19.0%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,700,957,330.99
Average Annualized Gain: 48.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 1387m 39s
End time: Wed Aug 27 22:05:09 EDT 2025
Average time per successful run: 92m 30s
==============================================================
✓ All runs completed successfully!
