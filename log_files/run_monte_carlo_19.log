Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Mon Aug 25 12:52:10 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Mon Aug 25 12:52:10 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-25T12:34:50.600826
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.0504
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $329,644,217
Annual Return: 35.01%
Sharpe Ratio: 1.21879
Sortino Ratio: 1.118
Max Drawdown: -60.6%
Avg Drawdown: -12.9%
Normalized Score: -1.076
Lookback periods: [55, 111, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,665,981,481
Annual Return: 41.47%
Sharpe Ratio: 1.41373
Sortino Ratio: 1.335
Max Drawdown: -55.0%
Avg Drawdown: -11.1%
Normalized Score: 0.119
Lookback periods: [54, 154, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 51sRunning iteration 21/1500... Est. remaining: 18m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,326,535,344
Annual Return: 45.42%
Sharpe Ratio: 1.49920
Sortino Ratio: 1.458
Max Drawdown: -63.5%
Avg Drawdown: -11.9%
Normalized Score: 0.198
Lookback periods: [132, 146, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,133,625,193
Annual Return: 44.07%
Sharpe Ratio: 1.45028
Sortino Ratio: 1.410
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.220
Lookback periods: [168, 169, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 39sRunning iteration 41/1500... Est. remaining: 17m 1sRunning iteration 51/1500... Est. remaining: 16m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,825,038,748
Annual Return: 44.90%
Sharpe Ratio: 1.48353
Sortino Ratio: 1.442
Max Drawdown: -57.6%
Avg Drawdown: -12.6%
Normalized Score: 0.258
Lookback periods: [128, 133, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 15m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,556,746,312
Annual Return: 45.64%
Sharpe Ratio: 1.51416
Sortino Ratio: 1.467
Max Drawdown: -62.8%
Avg Drawdown: -11.8%
Normalized Score: 0.272
Lookback periods: [125, 148, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,551,615,804
Annual Return: 45.63%
Sharpe Ratio: 1.50882
Sortino Ratio: 1.462
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.483
Lookback periods: [132, 156, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 15m 23sRunning iteration 91/1500... Est. remaining: 14m 54sRunning iteration 101/1500... Est. remaining: 14m 29sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 9sRunning iteration 121/1500... Est. remaining: 13m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,420,698,148
Annual Return: 47.70%
Sharpe Ratio: 1.55174
Sortino Ratio: 1.520
Max Drawdown: -61.3%
Avg Drawdown: -12.0%
Normalized Score: 0.508
Lookback periods: [152, 160, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 48sRunning iteration 141/1500... Est. remaining: 13m 32sRunning iteration 151/1500... Est. remaining: 13m 18sRunning iteration 161/1500... Est. remaining: 13m 5sRunning iteration 171/1500... Est. remaining: 12m 53sRunning iteration 181/1500... Est. remaining: 12m 41sRunning iteration 191/1500... Est. remaining: 12m 31sRunning iteration 201/1500... Est. remaining: 12m 20sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 11sRunning iteration 221/1500... Est. remaining: 12m 2sRunning iteration 231/1500... Est. remaining: 11m 53sRunning iteration 241/1500... Est. remaining: 11m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,803,860,474
Annual Return: 47.91%
Sharpe Ratio: 1.55357
Sortino Ratio: 1.515
Max Drawdown: -59.7%
Avg Drawdown: -12.2%
Normalized Score: 0.540
Lookback periods: [150, 155, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 11m 42sRunning iteration 261/1500... Est. remaining: 11m 34sRunning iteration 271/1500... Est. remaining: 11m 26sRunning iteration 281/1500... Est. remaining: 11m 18sRunning iteration 291/1500... Est. remaining: 11m 10sRunning iteration 301/1500... Est. remaining: 11m 3sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 56sRunning iteration 321/1500... Est. remaining: 10m 49sRunning iteration 331/1500... Est. remaining: 10m 42sRunning iteration 341/1500... Est. remaining: 10m 35sRunning iteration 351/1500... Est. remaining: 10m 28sRunning iteration 361/1500... Est. remaining: 10m 22sRunning iteration 371/1500... Est. remaining: 10m 15sRunning iteration 381/1500... Est. remaining: 10m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,130,361,099
Annual Return: 47.53%
Sharpe Ratio: 1.56347
Sortino Ratio: 1.524
Max Drawdown: -56.8%
Avg Drawdown: -11.7%
Normalized Score: 0.710
Lookback periods: [139, 154, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 10m 6sRunning iteration 401/1500... Est. remaining: 9m 59sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 53sRunning iteration 421/1500... Est. remaining: 9m 46sRunning iteration 431/1500... Est. remaining: 9m 40sRunning iteration 441/1500... Est. remaining: 9m 34sRunning iteration 451/1500... Est. remaining: 9m 27sRunning iteration 461/1500... Est. remaining: 9m 21sRunning iteration 471/1500... Est. remaining: 9m 15sRunning iteration 481/1500... Est. remaining: 9m 9sRunning iteration 491/1500... Est. remaining: 9m 3sRunning iteration 501/1500... Est. remaining: 8m 57sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 51sRunning iteration 521/1500... Est. remaining: 8m 45sRunning iteration 531/1500... Est. remaining: 8m 39sRunning iteration 541/1500... Est. remaining: 8m 33sRunning iteration 551/1500... Est. remaining: 8m 27sRunning iteration 561/1500... Est. remaining: 8m 21sRunning iteration 571/1500... Est. remaining: 8m 15sRunning iteration 581/1500... Est. remaining: 8m 10sRunning iteration 591/1500... Est. remaining: 8m 4sRunning iteration 601/1500... Est. remaining: 7m 58sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 52sRunning iteration 621/1500... Est. remaining: 7m 47sRunning iteration 631/1500... Est. remaining: 7m 42sRunning iteration 641/1500... Est. remaining: 7m 36sRunning iteration 651/1500... Est. remaining: 7m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,689,576,470
Annual Return: 47.26%
Sharpe Ratio: 1.54043
Sortino Ratio: 1.511
Max Drawdown: -56.9%
Avg Drawdown: -11.0%
Normalized Score: 0.722
Lookback periods: [157, 161, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 27sRunning iteration 671/1500... Est. remaining: 7m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,410,161,113
Annual Return: 47.69%
Sharpe Ratio: 1.56009
Sortino Ratio: 1.533
Max Drawdown: -56.9%
Avg Drawdown: -10.8%
Normalized Score: 0.809
Lookback periods: [157, 161, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 7m 18sRunning iteration 691/1500... Est. remaining: 7m 12sRunning iteration 701/1500... Est. remaining: 7m 7sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 1sRunning iteration 721/1500... Est. remaining: 6m 56sRunning iteration 731/1500... Est. remaining: 6m 50sRunning iteration 741/1500... Est. remaining: 6m 44sRunning iteration 751/1500... Est. remaining: 6m 39sRunning iteration 761/1500... Est. remaining: 6m 33sRunning iteration 771/1500... Est. remaining: 6m 28sRunning iteration 781/1500... Est. remaining: 6m 22sRunning iteration 791/1500... Est. remaining: 6m 17sRunning iteration 801/1500... Est. remaining: 6m 11sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 6sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 55sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 44sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,478,386,091
Annual Return: 47.73%
Sharpe Ratio: 1.57196
Sortino Ratio: 1.533
Max Drawdown: -56.9%
Avg Drawdown: -10.6%
Normalized Score: 0.847
Lookback periods: [146, 156, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 881/1500... Est. remaining: 5m 28sRunning iteration 891/1500... Est. remaining: 5m 23sRunning iteration 901/1500... Est. remaining: 5m 18sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,988,236,117
Annual Return: 48.01%
Sharpe Ratio: 1.56399
Sortino Ratio: 1.527
Max Drawdown: -55.0%
Avg Drawdown: -11.1%
Normalized Score: 0.852
Lookback periods: [156, 157, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 5m 13sRunning iteration 921/1500... Est. remaining: 5m 7sRunning iteration 931/1500... Est. remaining: 5m 2sRunning iteration 941/1500... Est. remaining: 4m 57sRunning iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 40sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 30sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 3sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,860,492,530
Annual Return: 47.94%
Sharpe Ratio: 1.57578
Sortino Ratio: 1.539
Max Drawdown: -55.0%
Avg Drawdown: -11.1%
Normalized Score: 0.883
Lookback periods: [159, 160, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.934
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9343612177667353), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.93
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9343612177667353), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [50, 52, 95] (score: 1.9344)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Mon Aug 25 13:05:22 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $881,219,375
Annual Return: 38.89%
Sharpe Ratio: 1.32612
Sortino Ratio: 1.243
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: -0.532
Lookback periods: [62, 131, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $766,106,970
Annual Return: 38.33%
Sharpe Ratio: 1.32580
Sortino Ratio: 1.249
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: -0.371
Lookback periods: [81, 128, 142] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,683,213,715
Annual Return: 46.57%
Sharpe Ratio: 1.51063
Sortino Ratio: 1.479
Max Drawdown: -63.5%
Avg Drawdown: -12.5%
Normalized Score: 0.576
Lookback periods: [152, 154, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 49sRunning iteration 21/1500... Est. remaining: 20m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,815,340,919
Annual Return: 46.66%
Sharpe Ratio: 1.52445
Sortino Ratio: 1.478
Max Drawdown: -62.7%
Avg Drawdown: -12.0%
Normalized Score: 0.678
Lookback periods: [139, 159, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 43sRunning iteration 41/1500... Est. remaining: 17m 1sRunning iteration 51/1500... Est. remaining: 15m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,839,279,083
Annual Return: 47.93%
Sharpe Ratio: 1.54497
Sortino Ratio: 1.516
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 1.042
Lookback periods: [171, 183, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 15m 49sRunning iteration 71/1500... Est. remaining: 15m 16sRunning iteration 81/1500... Est. remaining: 14m 45sRunning iteration 91/1500... Est. remaining: 14m 21sRunning iteration 101/1500... Est. remaining: 14m 1sbest_combination: {'lookbacks': [171, 183, 184], 'score': np.float64(1.0418561984725412), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 44sRunning iteration 121/1500... Est. remaining: 13m 29sRunning iteration 131/1500... Est. remaining: 13m 15sRunning iteration 141/1500... Est. remaining: 13m 2sRunning iteration 151/1500... Est. remaining: 12m 50sRunning iteration 161/1500... Est. remaining: 12m 39sRunning iteration 171/1500... Est. remaining: 12m 28sRunning iteration 181/1500... Est. remaining: 12m 19sRunning iteration 191/1500... Est. remaining: 12m 10sRunning iteration 201/1500... Est. remaining: 12m 2sbest_combination: {'lookbacks': [171, 183, 184], 'score': np.float64(1.0418561984725412), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 53sRunning iteration 221/1500... Est. remaining: 11m 46sRunning iteration 231/1500... Est. remaining: 11m 38sRunning iteration 241/1500... Est. remaining: 11m 33sRunning iteration 251/1500... Est. remaining: 11m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,799,489,389
Annual Return: 47.91%
Sharpe Ratio: 1.55769
Sortino Ratio: 1.517
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 1.134
Lookback periods: [156, 159, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 11m 25sRunning iteration 271/1500... Est. remaining: 11m 18sRunning iteration 281/1500... Est. remaining: 11m 10sRunning iteration 291/1500... Est. remaining: 11m 3sRunning iteration 301/1500... Est. remaining: 10m 56sbest_combination: {'lookbacks': [156, 159, 197], 'score': np.float64(1.1344029941193947), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 49sRunning iteration 321/1500... Est. remaining: 10m 42sRunning iteration 331/1500... Est. remaining: 10m 36sRunning iteration 341/1500... Est. remaining: 10m 29sRunning iteration 351/1500... Est. remaining: 10m 22sRunning iteration 361/1500... Est. remaining: 10m 16sRunning iteration 371/1500... Est. remaining: 10m 9sRunning iteration 381/1500... Est. remaining: 10m 3sRunning iteration 391/1500... Est. remaining: 9m 57sRunning iteration 401/1500... Est. remaining: 9m 50sbest_combination: {'lookbacks': [156, 159, 197], 'score': np.float64(1.1344029941193947), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 44sRunning iteration 421/1500... Est. remaining: 9m 38sRunning iteration 431/1500... Est. remaining: 9m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,393,602,941
Annual Return: 48.71%
Sharpe Ratio: 1.57608
Sortino Ratio: 1.540
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 1.237
Lookback periods: [155, 159, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 29sRunning iteration 451/1500... Est. remaining: 9m 23sRunning iteration 461/1500... Est. remaining: 9m 17sRunning iteration 471/1500... Est. remaining: 9m 11sRunning iteration 481/1500... Est. remaining: 9m 5sRunning iteration 491/1500... Est. remaining: 8m 59sRunning iteration 501/1500... Est. remaining: 8m 53sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(1.236938846333776), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 48sRunning iteration 521/1500... Est. remaining: 8m 42sRunning iteration 531/1500... Est. remaining: 8m 36sRunning iteration 541/1500... Est. remaining: 8m 30sRunning iteration 551/1500... Est. remaining: 8m 25sRunning iteration 561/1500... Est. remaining: 8m 19sRunning iteration 571/1500... Est. remaining: 8m 13sRunning iteration 581/1500... Est. remaining: 8m 8sRunning iteration 591/1500... Est. remaining: 8m 2sRunning iteration 601/1500... Est. remaining: 7m 57sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(1.236938846333776), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 51sRunning iteration 621/1500... Est. remaining: 7m 46sRunning iteration 631/1500... Est. remaining: 7m 40sRunning iteration 641/1500... Est. remaining: 7m 35sRunning iteration 651/1500... Est. remaining: 7m 29sRunning iteration 661/1500... Est. remaining: 7m 24sRunning iteration 671/1500... Est. remaining: 7m 18sRunning iteration 681/1500... Est. remaining: 7m 12sRunning iteration 691/1500... Est. remaining: 7m 7sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(1.236938846333776), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 56sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 45sRunning iteration 741/1500... Est. remaining: 6m 39sRunning iteration 751/1500... Est. remaining: 6m 34sRunning iteration 761/1500... Est. remaining: 6m 29sRunning iteration 771/1500... Est. remaining: 6m 23sRunning iteration 781/1500... Est. remaining: 6m 18sRunning iteration 791/1500... Est. remaining: 6m 12sRunning iteration 801/1500... Est. remaining: 6m 7sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(1.236938846333776), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 2sRunning iteration 821/1500... Est. remaining: 5m 56sRunning iteration 831/1500... Est. remaining: 5m 51sRunning iteration 841/1500... Est. remaining: 5m 46sRunning iteration 851/1500... Est. remaining: 5m 40sRunning iteration 861/1500... Est. remaining: 5m 35sRunning iteration 871/1500... Est. remaining: 5m 29sRunning iteration 881/1500... Est. remaining: 5m 24sRunning iteration 891/1500... Est. remaining: 5m 19sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(1.236938846333776), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 8sRunning iteration 921/1500... Est. remaining: 5m 3sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 52sRunning iteration 951/1500... Est. remaining: 4m 47sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 36sRunning iteration 981/1500... Est. remaining: 4m 31sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(1.236938846333776), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 3m 59sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [155, 159, 197], 'score': np.float64(1.236938846333776), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,461,222,328
Annual Return: 49.92%
Sharpe Ratio: 1.62098
Sortino Ratio: 1.605
Max Drawdown: -57.8%
Avg Drawdown: -11.9%
Normalized Score: 1.480
Lookback periods: [130, 130, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [130, 130, 130], 'score': np.float64(1.4798920635842772), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [130, 130, 130], 'score': np.float64(1.4798920635842772), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [130, 130, 130], 'score': np.float64(1.4798920635842772), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $15,521,785,798
Annual Return: 50.88%
Sharpe Ratio: 1.65924
Sortino Ratio: 1.634
Max Drawdown: -55.0%
Avg Drawdown: -11.6%
Normalized Score: 1.784
Lookback periods: [128, 130, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.78
best_combination: {'lookbacks': [128, 130, 130], 'score': np.float64(1.7842332943921195), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [128, 130, 130] (score: 1.7842)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [128, 130, 130] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 107 selections (25.7%)
3. naz100_pi: 88 selections (21.2%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $15,521,785,798.11
Average Annualized Gain: 50.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Mon Aug 25 13:18:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $522,712,638
Annual Return: 36.82%
Sharpe Ratio: 1.26723
Sortino Ratio: 1.193
Max Drawdown: -58.5%
Avg Drawdown: -14.1%
Normalized Score: -1.073
Lookback periods: [89, 105, 113] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,649,033,199
Annual Return: 41.43%
Sharpe Ratio: 1.41113
Sortino Ratio: 1.336
Max Drawdown: -59.4%
Avg Drawdown: -12.6%
Normalized Score: -0.296
Lookback periods: [94, 110, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,304,027,638
Annual Return: 45.40%
Sharpe Ratio: 1.49562
Sortino Ratio: 1.451
Max Drawdown: -58.1%
Avg Drawdown: -12.9%
Normalized Score: 0.146
Lookback periods: [145, 148, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 56sRunning iteration 21/1500... Est. remaining: 20m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,612,804,683
Annual Return: 41.34%
Sharpe Ratio: 1.42109
Sortino Ratio: 1.350
Max Drawdown: -52.3%
Avg Drawdown: -11.1%
Normalized Score: 0.178
Lookback periods: [80, 132, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,367,556,866
Annual Return: 45.46%
Sharpe Ratio: 1.49751
Sortino Ratio: 1.456
Max Drawdown: -62.4%
Avg Drawdown: -11.6%
Normalized Score: 0.238
Lookback periods: [130, 158, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 53sRunning iteration 51/1500... Est. remaining: 16m 41sRunning iteration 61/1500... Est. remaining: 15m 52sRunning iteration 71/1500... Est. remaining: 15m 12sRunning iteration 81/1500... Est. remaining: 14m 42sRunning iteration 91/1500... Est. remaining: 14m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,386,257,262
Annual Return: 46.34%
Sharpe Ratio: 1.51431
Sortino Ratio: 1.472
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.521
Lookback periods: [159, 161, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 14m 14sbest_combination: {'lookbacks': [159, 161, 200], 'score': np.float64(0.5212840559880365), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 55sRunning iteration 121/1500... Est. remaining: 13m 38sRunning iteration 131/1500... Est. remaining: 13m 23sRunning iteration 141/1500... Est. remaining: 13m 9sRunning iteration 151/1500... Est. remaining: 12m 56sRunning iteration 161/1500... Est. remaining: 12m 44sRunning iteration 171/1500... Est. remaining: 12m 33sRunning iteration 181/1500... Est. remaining: 12m 22sRunning iteration 191/1500... Est. remaining: 12m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,784,256,705
Annual Return: 46.64%
Sharpe Ratio: 1.53829
Sortino Ratio: 1.500
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 0.631
Lookback periods: [141, 154, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 12m 12sbest_combination: {'lookbacks': [141, 154, 157], 'score': np.float64(0.6312969749960565), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 2sRunning iteration 221/1500... Est. remaining: 11m 53sRunning iteration 231/1500... Est. remaining: 11m 45sRunning iteration 241/1500... Est. remaining: 11m 36sRunning iteration 251/1500... Est. remaining: 11m 29sRunning iteration 261/1500... Est. remaining: 11m 21sRunning iteration 271/1500... Est. remaining: 11m 13sRunning iteration 281/1500... Est. remaining: 11m 6sRunning iteration 291/1500... Est. remaining: 10m 59sRunning iteration 301/1500... Est. remaining: 10m 52sbest_combination: {'lookbacks': [141, 154, 157], 'score': np.float64(0.6312969749960565), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 46sRunning iteration 321/1500... Est. remaining: 10m 39sRunning iteration 331/1500... Est. remaining: 10m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,535,138,695
Annual Return: 43.19%
Sharpe Ratio: 1.54160
Sortino Ratio: 1.459
Max Drawdown: -40.6%
Avg Drawdown: -10.2%
Normalized Score: 1.022
Lookback periods: [52, 53, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 341/1500... Est. remaining: 10m 30sRunning iteration 351/1500... Est. remaining: 10m 23sRunning iteration 361/1500... Est. remaining: 10m 17sRunning iteration 371/1500... Est. remaining: 10m 10sRunning iteration 381/1500... Est. remaining: 10m 4sRunning iteration 391/1500... Est. remaining: 9m 57sRunning iteration 401/1500... Est. remaining: 9m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,514,534,940
Annual Return: 41.08%
Sharpe Ratio: 1.49739
Sortino Ratio: 1.391
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 1.090
Lookback periods: [50, 56, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [50, 56, 97], 'score': np.float64(1.0900899376603461), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,136,977,908
Annual Return: 42.49%
Sharpe Ratio: 1.50198
Sortino Ratio: 1.421
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.333
Lookback periods: [50, 50, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 45sRunning iteration 431/1500... Est. remaining: 9m 38sRunning iteration 441/1500... Est. remaining: 9m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,833,624,762
Annual Return: 43.65%
Sharpe Ratio: 1.57405
Sortino Ratio: 1.478
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.649
Lookback periods: [50, 50, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.762
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 9m 25sRunning iteration 471/1500... Est. remaining: 9m 18sRunning iteration 481/1500... Est. remaining: 9m 12sRunning iteration 491/1500... Est. remaining: 9m 6sRunning iteration 501/1500... Est. remaining: 8m 59sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.7616736312294017), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 53sRunning iteration 521/1500... Est. remaining: 8m 47sRunning iteration 531/1500... Est. remaining: 8m 41sRunning iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 29sRunning iteration 561/1500... Est. remaining: 8m 23sRunning iteration 571/1500... Est. remaining: 8m 17sRunning iteration 581/1500... Est. remaining: 8m 11sRunning iteration 591/1500... Est. remaining: 8m 5sRunning iteration 601/1500... Est. remaining: 7m 59sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.7616736312294017), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 53sRunning iteration 621/1500... Est. remaining: 7m 47sRunning iteration 631/1500... Est. remaining: 7m 42sRunning iteration 641/1500... Est. remaining: 7m 36sRunning iteration 651/1500... Est. remaining: 7m 30sRunning iteration 661/1500... Est. remaining: 7m 24sRunning iteration 671/1500... Est. remaining: 7m 19sRunning iteration 681/1500... Est. remaining: 7m 13sRunning iteration 691/1500... Est. remaining: 7m 7sRunning iteration 701/1500... Est. remaining: 7m 2sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.7616736312294017), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 56sRunning iteration 721/1500... Est. remaining: 6m 51sRunning iteration 731/1500... Est. remaining: 6m 45sRunning iteration 741/1500... Est. remaining: 6m 40sRunning iteration 751/1500... Est. remaining: 6m 34sRunning iteration 761/1500... Est. remaining: 6m 29sRunning iteration 771/1500... Est. remaining: 6m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.952
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 13sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.952440203545337), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 2sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 51sRunning iteration 841/1500... Est. remaining: 5m 46sRunning iteration 851/1500... Est. remaining: 5m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.005
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 30sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0045729384913686), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 3sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 52sRunning iteration 951/1500... Est. remaining: 4m 47sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 36sRunning iteration 981/1500... Est. remaining: 4m 31sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 20sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0045729384913686), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 4sRunning iteration 1041/1500... Est. remaining: 3m 59sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 43sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0045729384913686), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 22sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0045729384913686), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0045729384913686), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0045729384913686), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 2.00
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0045729384913686), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 2.0046)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Mon Aug 25 13:31:25 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,143,731,008
Annual Return: 39.94%
Sharpe Ratio: 1.33036
Sortino Ratio: 1.270
Max Drawdown: -64.8%
Avg Drawdown: -14.4%
Normalized Score: -1.164
Lookback periods: [123, 143, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,991,455,424
Annual Return: 42.20%
Sharpe Ratio: 1.39202
Sortino Ratio: 1.350
Max Drawdown: -64.8%
Avg Drawdown: -13.0%
Normalized Score: -0.670
Lookback periods: [113, 130, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,555,168,550
Annual Return: 41.19%
Sharpe Ratio: 1.39647
Sortino Ratio: 1.332
Max Drawdown: -60.1%
Avg Drawdown: -13.4%
Normalized Score: -0.666
Lookback periods: [96, 120, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,534,527,646
Annual Return: 41.13%
Sharpe Ratio: 1.39555
Sortino Ratio: 1.336
Max Drawdown: -56.9%
Avg Drawdown: -13.2%
Normalized Score: -0.537
Lookback periods: [93, 111, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 32m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,045,412,734
Annual Return: 43.95%
Sharpe Ratio: 1.44228
Sortino Ratio: 1.400
Max Drawdown: -63.0%
Avg Drawdown: -12.5%
Normalized Score: -0.320
Lookback periods: [114, 157, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,348,077,802
Annual Return: 47.04%
Sharpe Ratio: 1.53627
Sortino Ratio: 1.505
Max Drawdown: -63.5%
Avg Drawdown: -12.3%
Normalized Score: 0.088
Lookback periods: [139, 152, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,955,947,508
Annual Return: 42.12%
Sharpe Ratio: 1.44782
Sortino Ratio: 1.371
Max Drawdown: -52.3%
Avg Drawdown: -10.8%
Normalized Score: 0.110
Lookback periods: [81, 133, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 19m 21sRunning iteration 51/1500... Est. remaining: 17m 53sRunning iteration 61/1500... Est. remaining: 16m 49sRunning iteration 71/1500... Est. remaining: 16m 2sRunning iteration 81/1500... Est. remaining: 15m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,019,600,981
Annual Return: 46.04%
Sharpe Ratio: 1.51501
Sortino Ratio: 1.474
Max Drawdown: -58.5%
Avg Drawdown: -12.2%
Normalized Score: 0.137
Lookback periods: [128, 155, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,925,757,791
Annual Return: 42.06%
Sharpe Ratio: 1.42830
Sortino Ratio: 1.354
Max Drawdown: -52.3%
Avg Drawdown: -10.2%
Normalized Score: 0.167
Lookback periods: [80, 108, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 15m 34sRunning iteration 101/1500... Est. remaining: 15m 5sbest_combination: {'lookbacks': [80, 108, 130], 'score': np.float64(0.16705885496462963), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 40sRunning iteration 121/1500... Est. remaining: 14m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,298,440,389
Annual Return: 48.18%
Sharpe Ratio: 1.58075
Sortino Ratio: 1.546
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.624
Lookback periods: [140, 154, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 14m 14sRunning iteration 141/1500... Est. remaining: 13m 57sRunning iteration 151/1500... Est. remaining: 13m 41sRunning iteration 161/1500... Est. remaining: 13m 26sRunning iteration 171/1500... Est. remaining: 13m 12sRunning iteration 181/1500... Est. remaining: 12m 59sRunning iteration 191/1500... Est. remaining: 12m 47sRunning iteration 201/1500... Est. remaining: 12m 36sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.6238509011099531), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 25sRunning iteration 221/1500... Est. remaining: 12m 15sRunning iteration 231/1500... Est. remaining: 12m 6sRunning iteration 241/1500... Est. remaining: 11m 57sRunning iteration 251/1500... Est. remaining: 11m 48sRunning iteration 261/1500... Est. remaining: 11m 39sRunning iteration 271/1500... Est. remaining: 11m 31sRunning iteration 281/1500... Est. remaining: 11m 23sRunning iteration 291/1500... Est. remaining: 11m 15sRunning iteration 301/1500... Est. remaining: 11m 7sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.6238509011099531), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 0sRunning iteration 321/1500... Est. remaining: 10m 52sRunning iteration 331/1500... Est. remaining: 10m 45sRunning iteration 341/1500... Est. remaining: 10m 38sRunning iteration 351/1500... Est. remaining: 10m 31sRunning iteration 361/1500... Est. remaining: 10m 24sRunning iteration 371/1500... Est. remaining: 10m 17sRunning iteration 381/1500... Est. remaining: 10m 11sRunning iteration 391/1500... Est. remaining: 10m 4sRunning iteration 401/1500... Est. remaining: 9m 58sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.6238509011099531), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 51sRunning iteration 421/1500... Est. remaining: 9m 45sRunning iteration 431/1500... Est. remaining: 9m 39sRunning iteration 441/1500... Est. remaining: 9m 32sRunning iteration 451/1500... Est. remaining: 9m 26sRunning iteration 461/1500... Est. remaining: 9m 20sRunning iteration 471/1500... Est. remaining: 9m 14sRunning iteration 481/1500... Est. remaining: 9m 8sRunning iteration 491/1500... Est. remaining: 9m 2sRunning iteration 501/1500... Est. remaining: 8m 56sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.6238509011099531), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 50sRunning iteration 521/1500... Est. remaining: 8m 44sRunning iteration 531/1500... Est. remaining: 8m 39sRunning iteration 541/1500... Est. remaining: 8m 33sRunning iteration 551/1500... Est. remaining: 8m 27sRunning iteration 561/1500... Est. remaining: 8m 21sRunning iteration 571/1500... Est. remaining: 8m 15sRunning iteration 581/1500... Est. remaining: 8m 10sRunning iteration 591/1500... Est. remaining: 8m 4sRunning iteration 601/1500... Est. remaining: 7m 58sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.6238509011099531), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 52sRunning iteration 621/1500... Est. remaining: 7m 47sRunning iteration 631/1500... Est. remaining: 7m 41sRunning iteration 641/1500... Est. remaining: 7m 36sRunning iteration 651/1500... Est. remaining: 7m 30sRunning iteration 661/1500... Est. remaining: 7m 24sRunning iteration 671/1500... Est. remaining: 7m 19sRunning iteration 681/1500... Est. remaining: 7m 13sRunning iteration 691/1500... Est. remaining: 7m 8sRunning iteration 701/1500... Est. remaining: 7m 2sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.6238509011099531), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 57sRunning iteration 721/1500... Est. remaining: 6m 51sRunning iteration 731/1500... Est. remaining: 6m 46sRunning iteration 741/1500... Est. remaining: 6m 40sRunning iteration 751/1500... Est. remaining: 6m 35sRunning iteration 761/1500... Est. remaining: 6m 29sRunning iteration 771/1500... Est. remaining: 6m 24sRunning iteration 781/1500... Est. remaining: 6m 18sRunning iteration 791/1500... Est. remaining: 6m 13sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.6238509011099531), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 2sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 51sRunning iteration 841/1500... Est. remaining: 5m 46sRunning iteration 851/1500... Est. remaining: 5m 41sRunning iteration 861/1500... Est. remaining: 5m 35sRunning iteration 871/1500... Est. remaining: 5m 30sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 19sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.6238509011099531), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 8sRunning iteration 921/1500... Est. remaining: 5m 3sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 47sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 31sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.6238509011099531), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 3m 59sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.6238509011099531), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.6238509011099531), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.6238509011099531), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,435,090,292
Annual Return: 48.25%
Sharpe Ratio: 1.58799
Sortino Ratio: 1.544
Max Drawdown: -58.5%
Avg Drawdown: -10.8%
Normalized Score: 0.630
Lookback periods: [136, 155, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [136, 155, 158], 'score': np.float64(0.6297222475654922), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 0.63
best_combination: {'lookbacks': [136, 155, 158], 'score': np.float64(0.6297222475654922), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 155, 158] (score: 0.6297)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 155, 158] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 115 selections (27.6%)
2. naz100_hma: 111 selections (26.7%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,435,090,292.11
Average Annualized Gain: 48.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Mon Aug 25 13:44:32 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,962,000,051
Annual Return: 45.05%
Sharpe Ratio: 1.46504
Sortino Ratio: 1.431
Max Drawdown: -59.9%
Avg Drawdown: -11.8%
Normalized Score: 0.003
Lookback periods: [148, 190, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,705,086,795
Annual Return: 46.58%
Sharpe Ratio: 1.51167
Sortino Ratio: 1.473
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.247
Lookback periods: [169, 183, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 34sRunning iteration 21/1500... Est. remaining: 19m 43sRunning iteration 31/1500... Est. remaining: 17m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,417,503,251
Annual Return: 47.70%
Sharpe Ratio: 1.55080
Sortino Ratio: 1.514
Max Drawdown: -61.6%
Avg Drawdown: -11.8%
Normalized Score: 0.332
Lookback periods: [159, 189, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 16m 26sRunning iteration 51/1500... Est. remaining: 15m 33sRunning iteration 61/1500... Est. remaining: 14m 56sRunning iteration 71/1500... Est. remaining: 14m 27sRunning iteration 81/1500... Est. remaining: 14m 4sRunning iteration 91/1500... Est. remaining: 13m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,147,741,119
Annual Return: 47.54%
Sharpe Ratio: 1.56024
Sortino Ratio: 1.525
Max Drawdown: -62.4%
Avg Drawdown: -11.5%
Normalized Score: 0.380
Lookback periods: [128, 156, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 13m 46sbest_combination: {'lookbacks': [128, 156, 173], 'score': np.float64(0.37979565340007876), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 31sRunning iteration 121/1500... Est. remaining: 13m 17sRunning iteration 131/1500... Est. remaining: 13m 3sRunning iteration 141/1500... Est. remaining: 12m 52sRunning iteration 151/1500... Est. remaining: 12m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,842,639,679
Annual Return: 47.94%
Sharpe Ratio: 1.58351
Sortino Ratio: 1.541
Max Drawdown: -57.2%
Avg Drawdown: -11.9%
Normalized Score: 0.561
Lookback periods: [138, 159, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 12m 41sRunning iteration 171/1500... Est. remaining: 12m 31sRunning iteration 181/1500... Est. remaining: 12m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,559,081,256
Annual Return: 48.31%
Sharpe Ratio: 1.58421
Sortino Ratio: 1.551
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: 0.690
Lookback periods: [129, 130, 139] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 12m 21sRunning iteration 201/1500... Est. remaining: 12m 12sbest_combination: {'lookbacks': [129, 130, 139], 'score': np.float64(0.6896226000255415), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 4sRunning iteration 221/1500... Est. remaining: 11m 55sRunning iteration 231/1500... Est. remaining: 11m 47sRunning iteration 241/1500... Est. remaining: 11m 39sRunning iteration 251/1500... Est. remaining: 11m 31sRunning iteration 261/1500... Est. remaining: 11m 24sRunning iteration 271/1500... Est. remaining: 11m 16sRunning iteration 281/1500... Est. remaining: 11m 9sRunning iteration 291/1500... Est. remaining: 11m 1sRunning iteration 301/1500... Est. remaining: 10m 54sbest_combination: {'lookbacks': [129, 130, 139], 'score': np.float64(0.6896226000255415), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 47sRunning iteration 321/1500... Est. remaining: 10m 41sRunning iteration 331/1500... Est. remaining: 10m 34sRunning iteration 341/1500... Est. remaining: 10m 28sRunning iteration 351/1500... Est. remaining: 10m 21sRunning iteration 361/1500... Est. remaining: 10m 15sRunning iteration 371/1500... Est. remaining: 10m 8sRunning iteration 381/1500... Est. remaining: 10m 2sRunning iteration 391/1500... Est. remaining: 9m 55sRunning iteration 401/1500... Est. remaining: 9m 49sbest_combination: {'lookbacks': [129, 130, 139], 'score': np.float64(0.6896226000255415), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,719,557,280
Annual Return: 48.85%
Sharpe Ratio: 1.58903
Sortino Ratio: 1.562
Max Drawdown: -55.0%
Avg Drawdown: -11.9%
Normalized Score: 0.718
Lookback periods: [127, 129, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 40sRunning iteration 431/1500... Est. remaining: 9m 34sRunning iteration 441/1500... Est. remaining: 9m 28sRunning iteration 451/1500... Est. remaining: 9m 22sRunning iteration 461/1500... Est. remaining: 9m 16sRunning iteration 471/1500... Est. remaining: 9m 10sRunning iteration 481/1500... Est. remaining: 9m 4sRunning iteration 491/1500... Est. remaining: 8m 58sRunning iteration 501/1500... Est. remaining: 8m 52sbest_combination: {'lookbacks': [127, 129, 131], 'score': np.float64(0.7176267704577336), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 47sRunning iteration 521/1500... Est. remaining: 8m 41sRunning iteration 531/1500... Est. remaining: 8m 35sRunning iteration 541/1500... Est. remaining: 8m 29sRunning iteration 551/1500... Est. remaining: 8m 24sRunning iteration 561/1500... Est. remaining: 8m 18sRunning iteration 571/1500... Est. remaining: 8m 12sRunning iteration 581/1500... Est. remaining: 8m 7sRunning iteration 591/1500... Est. remaining: 8m 1sRunning iteration 601/1500... Est. remaining: 7m 55sbest_combination: {'lookbacks': [127, 129, 131], 'score': np.float64(0.7176267704577336), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 50sRunning iteration 621/1500... Est. remaining: 7m 44sRunning iteration 631/1500... Est. remaining: 7m 39sRunning iteration 641/1500... Est. remaining: 7m 33sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 22sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 11sRunning iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 0sbest_combination: {'lookbacks': [127, 129, 131], 'score': np.float64(0.7176267704577336), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 55sRunning iteration 721/1500... Est. remaining: 6m 49sRunning iteration 731/1500... Est. remaining: 6m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $13,914,882,020
Annual Return: 50.40%
Sharpe Ratio: 1.64017
Sortino Ratio: 1.615
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: 0.961
Lookback periods: [128, 129, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 6m 40sRunning iteration 751/1500... Est. remaining: 6m 35sRunning iteration 761/1500... Est. remaining: 6m 29sRunning iteration 771/1500... Est. remaining: 6m 24sRunning iteration 781/1500... Est. remaining: 6m 18sRunning iteration 791/1500... Est. remaining: 6m 13sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [128, 129, 130], 'score': np.float64(0.9613866139847065), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 2sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 51sRunning iteration 841/1500... Est. remaining: 5m 46sRunning iteration 851/1500... Est. remaining: 5m 40sRunning iteration 861/1500... Est. remaining: 5m 33sRunning iteration 871/1500... Est. remaining: 5m 27sRunning iteration 881/1500... Est. remaining: 5m 20sRunning iteration 891/1500... Est. remaining: 5m 13sRunning iteration 901/1500... Est. remaining: 5m 6sbest_combination: {'lookbacks': [128, 129, 130], 'score': np.float64(0.9613866139847065), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 0sRunning iteration 921/1500... Est. remaining: 4m 53sRunning iteration 931/1500... Est. remaining: 4m 47sRunning iteration 941/1500... Est. remaining: 4m 41sRunning iteration 951/1500... Est. remaining: 4m 35sRunning iteration 961/1500... Est. remaining: 4m 29sRunning iteration 971/1500... Est. remaining: 4m 22sRunning iteration 981/1500... Est. remaining: 4m 16sRunning iteration 991/1500... Est. remaining: 4m 11sRunning iteration 1001/1500... Est. remaining: 4m 5sbest_combination: {'lookbacks': [128, 129, 130], 'score': np.float64(0.9613866139847065), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 3m 59sRunning iteration 1021/1500... Est. remaining: 3m 53sRunning iteration 1031/1500... Est. remaining: 3m 48sRunning iteration 1041/1500... Est. remaining: 3m 42sRunning iteration 1051/1500... Est. remaining: 3m 36sRunning iteration 1061/1500... Est. remaining: 3m 31sRunning iteration 1071/1500... Est. remaining: 3m 25sRunning iteration 1081/1500... Est. remaining: 3m 20sRunning iteration 1091/1500... Est. remaining: 3m 14sRunning iteration 1101/1500... Est. remaining: 3m 9sbest_combination: {'lookbacks': [128, 129, 130], 'score': np.float64(0.9613866139847065), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 4sRunning iteration 1121/1500... Est. remaining: 2m 58sRunning iteration 1131/1500... Est. remaining: 2m 53sRunning iteration 1141/1500... Est. remaining: 2m 48sRunning iteration 1151/1500... Est. remaining: 2m 43sRunning iteration 1161/1500... Est. remaining: 2m 37sRunning iteration 1171/1500... Est. remaining: 2m 32sRunning iteration 1181/1500... Est. remaining: 2m 27sRunning iteration 1191/1500... Est. remaining: 2m 22sRunning iteration 1201/1500... Est. remaining: 2m 17sbest_combination: {'lookbacks': [128, 129, 130], 'score': np.float64(0.9613866139847065), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 12sRunning iteration 1221/1500... Est. remaining: 2m 7sRunning iteration 1231/1500... Est. remaining: 2m 2sRunning iteration 1241/1500... Est. remaining: 1m 58sRunning iteration 1251/1500... Est. remaining: 1m 53sRunning iteration 1261/1500... Est. remaining: 1m 48sRunning iteration 1271/1500... Est. remaining: 1m 43sRunning iteration 1281/1500... Est. remaining: 1m 38sRunning iteration 1291/1500... Est. remaining: 1m 33sRunning iteration 1301/1500... Est. remaining: 1m 29sbest_combination: {'lookbacks': [128, 129, 130], 'score': np.float64(0.9613866139847065), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 24sRunning iteration 1321/1500... Est. remaining: 1m 19sRunning iteration 1331/1500... Est. remaining: 1m 15sRunning iteration 1341/1500... Est. remaining: 1m 10sRunning iteration 1351/1500... Est. remaining: 1m 6sRunning iteration 1361/1500... Est. remaining: 1m 1sRunning iteration 1371/1500... Est. remaining: 0m 57sRunning iteration 1381/1500... Est. remaining: 0m 52sRunning iteration 1391/1500... Est. remaining: 0m 48sRunning iteration 1401/1500... Est. remaining: 0m 43sbest_combination: {'lookbacks': [128, 129, 130], 'score': np.float64(0.9613866139847065), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 39sRunning iteration 1421/1500... Est. remaining: 0m 34sRunning iteration 1431/1500... Est. remaining: 0m 30sRunning iteration 1441/1500... Est. remaining: 0m 25sRunning iteration 1451/1500... Est. remaining: 0m 21sRunning iteration 1461/1500... Est. remaining: 0m 17sRunning iteration 1471/1500... Est. remaining: 0m 12sRunning iteration 1481/1500... Est. remaining: 0m 8sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 10.7 minutes
Best normalized score: 0.96
best_combination: {'lookbacks': [128, 129, 130], 'score': np.float64(0.9613866139847065), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [128, 129, 130] (score: 0.9614)

Monte Carlo simulation completed in 10.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [128, 129, 130] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 105 selections (25.2%)
3. naz100_pi: 88 selections (21.2%)
4. naz100_pine: 79 selections (19.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $13,914,882,020.20
Average Annualized Gain: 50.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Mon Aug 25 13:55:19 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $179,238,470
Annual Return: 32.65%
Sharpe Ratio: 1.12788
Sortino Ratio: 1.041
Max Drawdown: -52.3%
Avg Drawdown: -12.3%
Normalized Score: -1.172
Lookback periods: [79, 82, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,914,051,860
Annual Return: 42.04%
Sharpe Ratio: 1.42114
Sortino Ratio: 1.354
Max Drawdown: -60.7%
Avg Drawdown: -12.9%
Normalized Score: -0.189
Lookback periods: [106, 108, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,973,142,900
Annual Return: 43.85%
Sharpe Ratio: 1.45601
Sortino Ratio: 1.413
Max Drawdown: -61.1%
Avg Drawdown: -12.4%
Normalized Score: 0.130
Lookback periods: [125, 130, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 17m 23sRunning iteration 21/1500... Est. remaining: 12m 3sRunning iteration 31/1500... Est. remaining: 10m 20sRunning iteration 41/1500... Est. remaining: 9m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,899,170,592
Annual Return: 43.75%
Sharpe Ratio: 1.45017
Sortino Ratio: 1.401
Max Drawdown: -55.7%
Avg Drawdown: -13.0%
Normalized Score: 0.146
Lookback periods: [129, 131, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 9m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,222,738,940
Annual Return: 44.19%
Sharpe Ratio: 1.47246
Sortino Ratio: 1.426
Max Drawdown: -55.0%
Avg Drawdown: -12.3%
Normalized Score: 0.381
Lookback periods: [123, 133, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,230,477,456
Annual Return: 46.22%
Sharpe Ratio: 1.50617
Sortino Ratio: 1.477
Max Drawdown: -58.5%
Avg Drawdown: -12.5%
Normalized Score: 0.464
Lookback periods: [142, 152, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 9m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,341,567,124
Annual Return: 42.86%
Sharpe Ratio: 1.47277
Sortino Ratio: 1.390
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: 0.626
Lookback periods: [90, 96, 141] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 9m 31sRunning iteration 81/1500... Est. remaining: 9m 11sRunning iteration 91/1500... Est. remaining: 8m 54sRunning iteration 101/1500... Est. remaining: 8m 40sbest_combination: {'lookbacks': [90, 96, 141], 'score': np.float64(0.6261690908917428), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,434,546,321
Annual Return: 47.09%
Sharpe Ratio: 1.55107
Sortino Ratio: 1.512
Max Drawdown: -56.8%
Avg Drawdown: -11.5%
Normalized Score: 0.873
Lookback periods: [139, 141, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 8m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,573,622,089
Annual Return: 48.32%
Sharpe Ratio: 1.57891
Sortino Ratio: 1.539
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 1.019
Lookback periods: [138, 157, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 8m 35sRunning iteration 131/1500... Est. remaining: 8m 25sRunning iteration 141/1500... Est. remaining: 8m 14sRunning iteration 151/1500... Est. remaining: 8m 6sRunning iteration 161/1500... Est. remaining: 7m 58sRunning iteration 171/1500... Est. remaining: 7m 50sRunning iteration 181/1500... Est. remaining: 7m 43sRunning iteration 191/1500... Est. remaining: 7m 36sRunning iteration 201/1500... Est. remaining: 7m 30sbest_combination: {'lookbacks': [138, 157, 170], 'score': np.float64(1.019255751408694), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 24sRunning iteration 221/1500... Est. remaining: 7m 19sRunning iteration 231/1500... Est. remaining: 7m 13sRunning iteration 241/1500... Est. remaining: 7m 8sRunning iteration 251/1500... Est. remaining: 7m 3sRunning iteration 261/1500... Est. remaining: 6m 58sRunning iteration 271/1500... Est. remaining: 6m 53sRunning iteration 281/1500... Est. remaining: 6m 48sRunning iteration 291/1500... Est. remaining: 6m 43sRunning iteration 301/1500... Est. remaining: 6m 39sbest_combination: {'lookbacks': [138, 157, 170], 'score': np.float64(1.019255751408694), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 34sRunning iteration 321/1500... Est. remaining: 6m 30sRunning iteration 331/1500... Est. remaining: 6m 26sRunning iteration 341/1500... Est. remaining: 6m 21sRunning iteration 351/1500... Est. remaining: 6m 17sRunning iteration 361/1500... Est. remaining: 6m 13sRunning iteration 371/1500... Est. remaining: 6m 9sRunning iteration 381/1500... Est. remaining: 6m 5sRunning iteration 391/1500... Est. remaining: 6m 1sRunning iteration 401/1500... Est. remaining: 5m 57sbest_combination: {'lookbacks': [138, 157, 170], 'score': np.float64(1.019255751408694), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 53sRunning iteration 421/1500... Est. remaining: 5m 50sRunning iteration 431/1500... Est. remaining: 5m 46sRunning iteration 441/1500... Est. remaining: 5m 42sRunning iteration 451/1500... Est. remaining: 5m 38sRunning iteration 461/1500... Est. remaining: 5m 35sRunning iteration 471/1500... Est. remaining: 5m 31sRunning iteration 481/1500... Est. remaining: 5m 28sRunning iteration 491/1500... Est. remaining: 5m 24sRunning iteration 501/1500... Est. remaining: 5m 21sbest_combination: {'lookbacks': [138, 157, 170], 'score': np.float64(1.019255751408694), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 17sRunning iteration 521/1500... Est. remaining: 5m 14sRunning iteration 531/1500... Est. remaining: 5m 10sRunning iteration 541/1500... Est. remaining: 5m 7sRunning iteration 551/1500... Est. remaining: 5m 3sRunning iteration 561/1500... Est. remaining: 5m 0sRunning iteration 571/1500... Est. remaining: 4m 56sRunning iteration 581/1500... Est. remaining: 4m 53sRunning iteration 591/1500... Est. remaining: 4m 50sRunning iteration 601/1500... Est. remaining: 4m 46sbest_combination: {'lookbacks': [138, 157, 170], 'score': np.float64(1.019255751408694), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 43sRunning iteration 621/1500... Est. remaining: 4m 39sRunning iteration 631/1500... Est. remaining: 4m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,184,827,089
Annual Return: 48.12%
Sharpe Ratio: 1.58917
Sortino Ratio: 1.550
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 1.107
Lookback periods: [135, 154, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 4m 34sRunning iteration 651/1500... Est. remaining: 4m 30sRunning iteration 661/1500... Est. remaining: 4m 27sRunning iteration 671/1500... Est. remaining: 4m 24sRunning iteration 681/1500... Est. remaining: 4m 21sRunning iteration 691/1500... Est. remaining: 4m 17sRunning iteration 701/1500... Est. remaining: 4m 14sbest_combination: {'lookbacks': [135, 154, 171], 'score': np.float64(1.1074245801736653), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 11sRunning iteration 721/1500... Est. remaining: 4m 7sRunning iteration 731/1500... Est. remaining: 4m 4sRunning iteration 741/1500... Est. remaining: 4m 1sRunning iteration 751/1500... Est. remaining: 3m 57sRunning iteration 761/1500... Est. remaining: 3m 54sRunning iteration 771/1500... Est. remaining: 3m 51sRunning iteration 781/1500... Est. remaining: 3m 47sRunning iteration 791/1500... Est. remaining: 3m 44sRunning iteration 801/1500... Est. remaining: 3m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,233,477,888
Annual Return: 49.08%
Sharpe Ratio: 1.60982
Sortino Ratio: 1.566
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 1.259
Lookback periods: [138, 158, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [138, 158, 171], 'score': np.float64(1.259406855051734), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 38sRunning iteration 821/1500... Est. remaining: 3m 35sRunning iteration 831/1500... Est. remaining: 3m 32sRunning iteration 841/1500... Est. remaining: 3m 28sRunning iteration 851/1500... Est. remaining: 3m 25sRunning iteration 861/1500... Est. remaining: 3m 22sRunning iteration 871/1500... Est. remaining: 3m 19sRunning iteration 881/1500... Est. remaining: 3m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,214,613,641
Annual Return: 49.47%
Sharpe Ratio: 1.62224
Sortino Ratio: 1.581
Max Drawdown: -57.2%
Avg Drawdown: -10.7%
Normalized Score: 1.350
Lookback periods: [136, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 3m 13sRunning iteration 901/1500... Est. remaining: 3m 10sbest_combination: {'lookbacks': [136, 157, 172], 'score': np.float64(1.3504036353432376), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 6sRunning iteration 921/1500... Est. remaining: 3m 3sRunning iteration 931/1500... Est. remaining: 3m 0sRunning iteration 941/1500... Est. remaining: 2m 57sRunning iteration 951/1500... Est. remaining: 2m 53sRunning iteration 961/1500... Est. remaining: 2m 50sRunning iteration 971/1500... Est. remaining: 2m 47sRunning iteration 981/1500... Est. remaining: 2m 44sRunning iteration 991/1500... Est. remaining: 2m 40sRunning iteration 1001/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [136, 157, 172], 'score': np.float64(1.3504036353432376), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 34sRunning iteration 1021/1500... Est. remaining: 2m 31sRunning iteration 1031/1500... Est. remaining: 2m 28sRunning iteration 1041/1500... Est. remaining: 2m 24sRunning iteration 1051/1500... Est. remaining: 2m 21sRunning iteration 1061/1500... Est. remaining: 2m 18sRunning iteration 1071/1500... Est. remaining: 2m 15sRunning iteration 1081/1500... Est. remaining: 2m 12sRunning iteration 1091/1500... Est. remaining: 2m 8sRunning iteration 1101/1500... Est. remaining: 2m 5sbest_combination: {'lookbacks': [136, 157, 172], 'score': np.float64(1.3504036353432376), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 2sRunning iteration 1121/1500... Est. remaining: 1m 59sRunning iteration 1131/1500... Est. remaining: 1m 56sRunning iteration 1141/1500... Est. remaining: 1m 52sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 46sRunning iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 40sRunning iteration 1191/1500... Est. remaining: 1m 37sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [136, 157, 172], 'score': np.float64(1.3504036353432376), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [136, 157, 172], 'score': np.float64(1.3504036353432376), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [136, 157, 172], 'score': np.float64(1.3504036353432376), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.35
best_combination: {'lookbacks': [136, 157, 172], 'score': np.float64(1.3504036353432376), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 157, 172] (score: 1.3504)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 157, 172] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 118 selections (28.4%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,214,613,641.30
Average Annualized Gain: 49.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Mon Aug 25 14:03:09 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $163,152,982
Annual Return: 32.30%
Sharpe Ratio: 1.12398
Sortino Ratio: 1.039
Max Drawdown: -62.2%
Avg Drawdown: -14.9%
Normalized Score: -2.708
Lookback periods: [70, 87, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,570,683,078
Annual Return: 41.23%
Sharpe Ratio: 1.35711
Sortino Ratio: 1.322
Max Drawdown: -59.0%
Avg Drawdown: -12.0%
Normalized Score: -0.584
Lookback periods: [164, 175, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,936,364,747
Annual Return: 42.08%
Sharpe Ratio: 1.41971
Sortino Ratio: 1.358
Max Drawdown: -57.9%
Avg Drawdown: -13.0%
Normalized Score: -0.417
Lookback periods: [108, 112, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,305,860,139
Annual Return: 46.28%
Sharpe Ratio: 1.52887
Sortino Ratio: 1.489
Max Drawdown: -61.3%
Avg Drawdown: -12.3%
Normalized Score: 0.344
Lookback periods: [134, 148, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 16m 29sRunning iteration 21/1500... Est. remaining: 11m 51sRunning iteration 31/1500... Est. remaining: 10m 19sRunning iteration 41/1500... Est. remaining: 9m 30sRunning iteration 51/1500... Est. remaining: 9m 0sRunning iteration 61/1500... Est. remaining: 8m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,800,301,983
Annual Return: 45.85%
Sharpe Ratio: 1.49811
Sortino Ratio: 1.456
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.422
Lookback periods: [159, 161, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 8m 39sRunning iteration 81/1500... Est. remaining: 8m 25sRunning iteration 91/1500... Est. remaining: 8m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,749,389,343
Annual Return: 47.30%
Sharpe Ratio: 1.55228
Sortino Ratio: 1.509
Max Drawdown: -56.9%
Avg Drawdown: -11.1%
Normalized Score: 0.788
Lookback periods: [157, 159, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 8m 13sbest_combination: {'lookbacks': [157, 159, 167], 'score': np.float64(0.7879699046164927), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 4sRunning iteration 121/1500... Est. remaining: 7m 55sRunning iteration 131/1500... Est. remaining: 7m 47sRunning iteration 141/1500... Est. remaining: 7m 40sRunning iteration 151/1500... Est. remaining: 7m 33sRunning iteration 161/1500... Est. remaining: 7m 27sRunning iteration 171/1500... Est. remaining: 7m 22sRunning iteration 181/1500... Est. remaining: 7m 16sRunning iteration 191/1500... Est. remaining: 7m 11sRunning iteration 201/1500... Est. remaining: 7m 6sbest_combination: {'lookbacks': [157, 159, 167], 'score': np.float64(0.7879699046164927), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 1sRunning iteration 221/1500... Est. remaining: 6m 57sRunning iteration 231/1500... Est. remaining: 6m 52sRunning iteration 241/1500... Est. remaining: 6m 48sRunning iteration 251/1500... Est. remaining: 6m 44sRunning iteration 261/1500... Est. remaining: 6m 40sRunning iteration 271/1500... Est. remaining: 6m 36sRunning iteration 281/1500... Est. remaining: 6m 32sRunning iteration 291/1500... Est. remaining: 6m 28sRunning iteration 301/1500... Est. remaining: 6m 24sbest_combination: {'lookbacks': [157, 159, 167], 'score': np.float64(0.7879699046164927), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 21sRunning iteration 321/1500... Est. remaining: 6m 17sRunning iteration 331/1500... Est. remaining: 6m 13sRunning iteration 341/1500... Est. remaining: 6m 9sRunning iteration 351/1500... Est. remaining: 6m 5sRunning iteration 361/1500... Est. remaining: 6m 2sRunning iteration 371/1500... Est. remaining: 5m 58sRunning iteration 381/1500... Est. remaining: 5m 55sRunning iteration 391/1500... Est. remaining: 5m 51sRunning iteration 401/1500... Est. remaining: 5m 47sbest_combination: {'lookbacks': [157, 159, 167], 'score': np.float64(0.7879699046164927), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,726,654,302
Annual Return: 44.79%
Sharpe Ratio: 1.53927
Sortino Ratio: 1.457
Max Drawdown: -52.3%
Avg Drawdown: -8.9%
Normalized Score: 0.818
Lookback periods: [50, 96, 109] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 5m 43sRunning iteration 431/1500... Est. remaining: 5m 39sRunning iteration 441/1500... Est. remaining: 5m 36sRunning iteration 451/1500... Est. remaining: 5m 32sRunning iteration 461/1500... Est. remaining: 5m 29sRunning iteration 471/1500... Est. remaining: 5m 25sRunning iteration 481/1500... Est. remaining: 5m 22sRunning iteration 491/1500... Est. remaining: 5m 18sRunning iteration 501/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [50, 96, 109], 'score': np.float64(0.8178183363150213), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 12sRunning iteration 521/1500... Est. remaining: 5m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,550,707,885
Annual Return: 47.77%
Sharpe Ratio: 1.56904
Sortino Ratio: 1.526
Max Drawdown: -58.1%
Avg Drawdown: -11.3%
Normalized Score: 0.825
Lookback periods: [144, 157, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 5m 6sRunning iteration 541/1500... Est. remaining: 5m 3sRunning iteration 551/1500... Est. remaining: 5m 0sRunning iteration 561/1500... Est. remaining: 4m 57sRunning iteration 571/1500... Est. remaining: 4m 53sRunning iteration 581/1500... Est. remaining: 4m 50sRunning iteration 591/1500... Est. remaining: 4m 47sRunning iteration 601/1500... Est. remaining: 4m 43sbest_combination: {'lookbacks': [144, 157, 178], 'score': np.float64(0.8245671872615938), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,281,676,807
Annual Return: 48.66%
Sharpe Ratio: 1.60329
Sortino Ratio: 1.566
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 1.035
Lookback periods: [135, 155, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/1500... Est. remaining: 4m 41sRunning iteration 621/1500... Est. remaining: 4m 38sRunning iteration 631/1500... Est. remaining: 4m 34sRunning iteration 641/1500... Est. remaining: 4m 31sRunning iteration 651/1500... Est. remaining: 4m 28sRunning iteration 661/1500... Est. remaining: 4m 24sRunning iteration 671/1500... Est. remaining: 4m 21sRunning iteration 681/1500... Est. remaining: 4m 18sRunning iteration 691/1500... Est. remaining: 4m 14sRunning iteration 701/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [135, 155, 179], 'score': np.float64(1.0346807922823966), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 8sRunning iteration 721/1500... Est. remaining: 4m 4sRunning iteration 731/1500... Est. remaining: 4m 1sRunning iteration 741/1500... Est. remaining: 3m 58sRunning iteration 751/1500... Est. remaining: 3m 55sRunning iteration 761/1500... Est. remaining: 3m 51sRunning iteration 771/1500... Est. remaining: 3m 48sRunning iteration 781/1500... Est. remaining: 3m 45sRunning iteration 791/1500... Est. remaining: 3m 42sRunning iteration 801/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [135, 155, 179], 'score': np.float64(1.0346807922823966), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 32sRunning iteration 831/1500... Est. remaining: 3m 29sRunning iteration 841/1500... Est. remaining: 3m 26sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 13sRunning iteration 891/1500... Est. remaining: 3m 10sRunning iteration 901/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [135, 155, 179], 'score': np.float64(1.0346807922823966), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 3sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 57sRunning iteration 941/1500... Est. remaining: 2m 54sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [135, 155, 179], 'score': np.float64(1.0346807922823966), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 31sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [135, 155, 179], 'score': np.float64(1.0346807922823966), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [135, 155, 179], 'score': np.float64(1.0346807922823966), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [135, 155, 179], 'score': np.float64(1.0346807922823966), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [135, 155, 179], 'score': np.float64(1.0346807922823966), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.03
best_combination: {'lookbacks': [135, 155, 179], 'score': np.float64(1.0346807922823966), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 155, 179] (score: 1.0347)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 155, 179] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 40 selections (9.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,281,676,806.79
Average Annualized Gain: 48.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Mon Aug 25 14:10:55 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $291,021,277
Annual Return: 34.52%
Sharpe Ratio: 1.20319
Sortino Ratio: 1.106
Max Drawdown: -52.3%
Avg Drawdown: -12.8%
Normalized Score: -1.390
Lookback periods: [70, 82, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,989,198,664
Annual Return: 46.02%
Sharpe Ratio: 1.50219
Sortino Ratio: 1.465
Max Drawdown: -65.6%
Avg Drawdown: -11.2%
Normalized Score: -0.101
Lookback periods: [144, 158, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 14m 40sRunning iteration 21/1500... Est. remaining: 10m 53sRunning iteration 31/1500... Est. remaining: 9m 45sRunning iteration 41/1500... Est. remaining: 9m 11sRunning iteration 51/1500... Est. remaining: 8m 51sRunning iteration 61/1500... Est. remaining: 8m 35sRunning iteration 71/1500... Est. remaining: 8m 21sRunning iteration 81/1500... Est. remaining: 8m 9sRunning iteration 91/1500... Est. remaining: 8m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,728,779,963
Annual Return: 46.60%
Sharpe Ratio: 1.51602
Sortino Ratio: 1.478
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.131
Lookback periods: [169, 192, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 8m 2sbest_combination: {'lookbacks': [169, 192, 196], 'score': np.float64(0.13130081776591193), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $961,877,734
Annual Return: 39.24%
Sharpe Ratio: 1.39833
Sortino Ratio: 1.300
Max Drawdown: -37.0%
Avg Drawdown: -10.2%
Normalized Score: 0.269
Lookback periods: [51, 60, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 8m 3sRunning iteration 121/1500... Est. remaining: 7m 56sRunning iteration 131/1500... Est. remaining: 7m 48sRunning iteration 141/1500... Est. remaining: 7m 42sRunning iteration 151/1500... Est. remaining: 7m 35sRunning iteration 161/1500... Est. remaining: 7m 29sRunning iteration 171/1500... Est. remaining: 7m 25sRunning iteration 181/1500... Est. remaining: 7m 19sRunning iteration 191/1500... Est. remaining: 7m 14sRunning iteration 201/1500... Est. remaining: 7m 9sbest_combination: {'lookbacks': [51, 60, 87], 'score': np.float64(0.26854682873579294), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 5sRunning iteration 221/1500... Est. remaining: 7m 0sRunning iteration 231/1500... Est. remaining: 6m 55sRunning iteration 241/1500... Est. remaining: 6m 50sRunning iteration 251/1500... Est. remaining: 6m 45sRunning iteration 261/1500... Est. remaining: 6m 41sRunning iteration 271/1500... Est. remaining: 6m 37sRunning iteration 281/1500... Est. remaining: 6m 33sRunning iteration 291/1500... Est. remaining: 6m 28sRunning iteration 301/1500... Est. remaining: 6m 24sbest_combination: {'lookbacks': [51, 60, 87], 'score': np.float64(0.26854682873579294), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 21sRunning iteration 321/1500... Est. remaining: 6m 17sRunning iteration 331/1500... Est. remaining: 6m 13sRunning iteration 341/1500... Est. remaining: 6m 9sRunning iteration 351/1500... Est. remaining: 6m 5sRunning iteration 361/1500... Est. remaining: 6m 1sRunning iteration 371/1500... Est. remaining: 5m 58sRunning iteration 381/1500... Est. remaining: 5m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,143,464,052
Annual Return: 39.94%
Sharpe Ratio: 1.43364
Sortino Ratio: 1.338
Max Drawdown: -34.7%
Avg Drawdown: -9.9%
Normalized Score: 0.523
Lookback periods: [50, 64, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 5m 53sRunning iteration 401/1500... Est. remaining: 5m 49sbest_combination: {'lookbacks': [50, 64, 87], 'score': np.float64(0.5227845876237109), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 46sRunning iteration 421/1500... Est. remaining: 5m 42sRunning iteration 431/1500... Est. remaining: 5m 39sRunning iteration 441/1500... Est. remaining: 5m 35sRunning iteration 451/1500... Est. remaining: 5m 31sRunning iteration 461/1500... Est. remaining: 5m 28sRunning iteration 471/1500... Est. remaining: 5m 24sRunning iteration 481/1500... Est. remaining: 5m 21sRunning iteration 491/1500... Est. remaining: 5m 17sRunning iteration 501/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [50, 64, 87], 'score': np.float64(0.5227845876237109), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 11sRunning iteration 521/1500... Est. remaining: 5m 7sRunning iteration 531/1500... Est. remaining: 5m 4sRunning iteration 541/1500... Est. remaining: 5m 0sRunning iteration 551/1500... Est. remaining: 4m 57sRunning iteration 561/1500... Est. remaining: 4m 54sRunning iteration 571/1500... Est. remaining: 4m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,917,492,805
Annual Return: 42.04%
Sharpe Ratio: 1.52190
Sortino Ratio: 1.419
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.895
Lookback periods: [50, 60, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 4m 48sRunning iteration 591/1500... Est. remaining: 4m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,695,996,655
Annual Return: 43.45%
Sharpe Ratio: 1.54559
Sortino Ratio: 1.450
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.051
Lookback periods: [52, 55, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/1500... Est. remaining: 4m 42sbest_combination: {'lookbacks': [52, 55, 83], 'score': np.float64(1.0506477285758073), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 39sRunning iteration 621/1500... Est. remaining: 4m 36sRunning iteration 631/1500... Est. remaining: 4m 32sRunning iteration 641/1500... Est. remaining: 4m 29sRunning iteration 651/1500... Est. remaining: 4m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,037,914,546
Annual Return: 43.94%
Sharpe Ratio: 1.57274
Sortino Ratio: 1.474
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.199
Lookback periods: [50, 54, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 4m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,613,029,033
Annual Return: 43.32%
Sharpe Ratio: 1.58577
Sortino Ratio: 1.485
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.355
Lookback periods: [50, 57, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 4m 21sRunning iteration 681/1500... Est. remaining: 4m 18sRunning iteration 691/1500... Est. remaining: 4m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,000,795,877
Annual Return: 43.89%
Sharpe Ratio: 1.59063
Sortino Ratio: 1.492
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.405
Lookback periods: [50, 52, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [50, 52, 102], 'score': np.float64(1.4048123003634476), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.561
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 4m 6sRunning iteration 731/1500... Est. remaining: 4m 3sRunning iteration 741/1500... Est. remaining: 3m 59sRunning iteration 751/1500... Est. remaining: 3m 56sRunning iteration 761/1500... Est. remaining: 3m 53sRunning iteration 771/1500... Est. remaining: 3m 49sRunning iteration 781/1500... Est. remaining: 3m 46sRunning iteration 791/1500... Est. remaining: 3m 43sRunning iteration 801/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.560736777335616), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 36sRunning iteration 821/1500... Est. remaining: 3m 33sRunning iteration 831/1500... Est. remaining: 3m 30sRunning iteration 841/1500... Est. remaining: 3m 26sRunning iteration 851/1500... Est. remaining: 3m 23sRunning iteration 861/1500... Est. remaining: 3m 20sRunning iteration 871/1500... Est. remaining: 3m 17sRunning iteration 881/1500... Est. remaining: 3m 13sRunning iteration 891/1500... Est. remaining: 3m 10sRunning iteration 901/1500... Est. remaining: 3m 7sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.560736777335616), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 4sRunning iteration 921/1500... Est. remaining: 3m 1sRunning iteration 931/1500... Est. remaining: 2m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.634
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 2m 55sRunning iteration 951/1500... Est. remaining: 2m 51sRunning iteration 961/1500... Est. remaining: 2m 48sRunning iteration 971/1500... Est. remaining: 2m 45sRunning iteration 981/1500... Est. remaining: 2m 42sRunning iteration 991/1500... Est. remaining: 2m 39sRunning iteration 1001/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6339590043547438), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 33sRunning iteration 1021/1500... Est. remaining: 2m 29sRunning iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 23sRunning iteration 1051/1500... Est. remaining: 2m 20sRunning iteration 1061/1500... Est. remaining: 2m 17sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6339590043547438), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.748
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1131/1500... Est. remaining: 1m 55sRunning iteration 1141/1500... Est. remaining: 1m 52sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7478024871947622), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7478024871947622), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7478024871947622), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.75
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7478024871947622), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.7478)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Mon Aug 25 14:18:44 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $964,832,972
Annual Return: 39.26%
Sharpe Ratio: 1.30098
Sortino Ratio: 1.251
Max Drawdown: -66.7%
Avg Drawdown: -14.1%
Normalized Score: -1.492
Lookback periods: [99, 145, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,692,885,575
Annual Return: 41.53%
Sharpe Ratio: 1.42285
Sortino Ratio: 1.352
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: -0.029
Lookback periods: [83, 132, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,753,376,000
Annual Return: 45.81%
Sharpe Ratio: 1.48430
Sortino Ratio: 1.443
Max Drawdown: -59.0%
Avg Drawdown: -12.1%
Normalized Score: 0.235
Lookback periods: [181, 187, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,460,928,532
Annual Return: 46.40%
Sharpe Ratio: 1.51325
Sortino Ratio: 1.475
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.515
Lookback periods: [154, 161, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 15m 19sRunning iteration 31/1500... Est. remaining: 12m 37sRunning iteration 41/1500... Est. remaining: 11m 15sRunning iteration 51/1500... Est. remaining: 10m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,814,609,461
Annual Return: 48.90%
Sharpe Ratio: 1.60492
Sortino Ratio: 1.569
Max Drawdown: -62.4%
Avg Drawdown: -11.3%
Normalized Score: 0.896
Lookback periods: [136, 158, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 10m 7sRunning iteration 71/1500... Est. remaining: 9m 39sRunning iteration 81/1500... Est. remaining: 9m 17sRunning iteration 91/1500... Est. remaining: 8m 59sRunning iteration 101/1500... Est. remaining: 8m 46sbest_combination: {'lookbacks': [136, 158, 173], 'score': np.float64(0.8959478715301594), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 34sRunning iteration 121/1500... Est. remaining: 8m 23sRunning iteration 131/1500... Est. remaining: 8m 12sRunning iteration 141/1500... Est. remaining: 8m 4sRunning iteration 151/1500... Est. remaining: 7m 56sRunning iteration 161/1500... Est. remaining: 7m 48sRunning iteration 171/1500... Est. remaining: 7m 41sRunning iteration 181/1500... Est. remaining: 7m 35sRunning iteration 191/1500... Est. remaining: 7m 29sRunning iteration 201/1500... Est. remaining: 7m 23sbest_combination: {'lookbacks': [136, 158, 173], 'score': np.float64(0.8959478715301594), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 17sRunning iteration 221/1500... Est. remaining: 7m 12sRunning iteration 231/1500... Est. remaining: 7m 7sRunning iteration 241/1500... Est. remaining: 7m 2sRunning iteration 251/1500... Est. remaining: 6m 57sRunning iteration 261/1500... Est. remaining: 6m 52sRunning iteration 271/1500... Est. remaining: 6m 48sRunning iteration 281/1500... Est. remaining: 6m 43sRunning iteration 291/1500... Est. remaining: 6m 39sRunning iteration 301/1500... Est. remaining: 6m 34sbest_combination: {'lookbacks': [136, 158, 173], 'score': np.float64(0.8959478715301594), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 30sRunning iteration 321/1500... Est. remaining: 6m 26sRunning iteration 331/1500... Est. remaining: 6m 22sRunning iteration 341/1500... Est. remaining: 6m 18sRunning iteration 351/1500... Est. remaining: 6m 14sRunning iteration 361/1500... Est. remaining: 6m 10sRunning iteration 371/1500... Est. remaining: 6m 6sRunning iteration 381/1500... Est. remaining: 6m 2sRunning iteration 391/1500... Est. remaining: 5m 58sRunning iteration 401/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [136, 158, 173], 'score': np.float64(0.8959478715301594), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 50sRunning iteration 421/1500... Est. remaining: 5m 47sRunning iteration 431/1500... Est. remaining: 5m 43sRunning iteration 441/1500... Est. remaining: 5m 40sRunning iteration 451/1500... Est. remaining: 5m 36sRunning iteration 461/1500... Est. remaining: 5m 33sRunning iteration 471/1500... Est. remaining: 5m 29sRunning iteration 481/1500... Est. remaining: 5m 26sRunning iteration 491/1500... Est. remaining: 5m 22sRunning iteration 501/1500... Est. remaining: 5m 19sbest_combination: {'lookbacks': [136, 158, 173], 'score': np.float64(0.8959478715301594), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 15sRunning iteration 521/1500... Est. remaining: 5m 12sRunning iteration 531/1500... Est. remaining: 5m 8sRunning iteration 541/1500... Est. remaining: 5m 5sRunning iteration 551/1500... Est. remaining: 5m 1sRunning iteration 561/1500... Est. remaining: 4m 58sRunning iteration 571/1500... Est. remaining: 4m 55sRunning iteration 581/1500... Est. remaining: 4m 51sRunning iteration 591/1500... Est. remaining: 4m 48sRunning iteration 601/1500... Est. remaining: 4m 44sbest_combination: {'lookbacks': [136, 158, 173], 'score': np.float64(0.8959478715301594), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 41sRunning iteration 621/1500... Est. remaining: 4m 38sRunning iteration 631/1500... Est. remaining: 4m 34sRunning iteration 641/1500... Est. remaining: 4m 31sRunning iteration 651/1500... Est. remaining: 4m 28sRunning iteration 661/1500... Est. remaining: 4m 24sRunning iteration 671/1500... Est. remaining: 4m 21sRunning iteration 681/1500... Est. remaining: 4m 18sRunning iteration 691/1500... Est. remaining: 4m 14sRunning iteration 701/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [136, 158, 173], 'score': np.float64(0.8959478715301594), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 8sRunning iteration 721/1500... Est. remaining: 4m 5sRunning iteration 731/1500... Est. remaining: 4m 1sRunning iteration 741/1500... Est. remaining: 3m 58sRunning iteration 751/1500... Est. remaining: 3m 55sRunning iteration 761/1500... Est. remaining: 3m 52sRunning iteration 771/1500... Est. remaining: 3m 48sRunning iteration 781/1500... Est. remaining: 3m 45sRunning iteration 791/1500... Est. remaining: 3m 42sRunning iteration 801/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [136, 158, 173], 'score': np.float64(0.8959478715301594), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 32sRunning iteration 831/1500... Est. remaining: 3m 29sRunning iteration 841/1500... Est. remaining: 3m 26sRunning iteration 851/1500... Est. remaining: 3m 23sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 13sRunning iteration 891/1500... Est. remaining: 3m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,108,012,908
Annual Return: 49.02%
Sharpe Ratio: 1.59365
Sortino Ratio: 1.553
Max Drawdown: -59.0%
Avg Drawdown: -10.3%
Normalized Score: 1.105
Lookback periods: [156, 158, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 901/1500... Est. remaining: 3m 7sbest_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(1.1047971444780473), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 4sRunning iteration 921/1500... Est. remaining: 3m 1sRunning iteration 931/1500... Est. remaining: 2m 58sRunning iteration 941/1500... Est. remaining: 2m 55sRunning iteration 951/1500... Est. remaining: 2m 51sRunning iteration 961/1500... Est. remaining: 2m 48sRunning iteration 971/1500... Est. remaining: 2m 45sRunning iteration 981/1500... Est. remaining: 2m 42sRunning iteration 991/1500... Est. remaining: 2m 39sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(1.1047971444780473), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 29sRunning iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 23sRunning iteration 1051/1500... Est. remaining: 2m 20sRunning iteration 1061/1500... Est. remaining: 2m 17sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(1.1047971444780473), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 58sRunning iteration 1131/1500... Est. remaining: 1m 55sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(1.1047971444780473), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(1.1047971444780473), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(1.1047971444780473), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.10
best_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(1.1047971444780473), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 158, 174] (score: 1.1048)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 158, 174] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 112 selections (26.9%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,108,012,907.79
Average Annualized Gain: 49.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Mon Aug 25 14:26:32 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $552,768,142
Annual Return: 37.04%
Sharpe Ratio: 1.25137
Sortino Ratio: 1.178
Max Drawdown: -68.3%
Avg Drawdown: -15.0%
Normalized Score: -1.488
Lookback periods: [103, 112, 118] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $188,746,708
Annual Return: 32.85%
Sharpe Ratio: 1.14567
Sortino Ratio: 1.051
Max Drawdown: -52.3%
Avg Drawdown: -13.2%
Normalized Score: -1.073
Lookback periods: [80, 85, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,244,528,758
Annual Return: 46.23%
Sharpe Ratio: 1.51587
Sortino Ratio: 1.479
Max Drawdown: -62.4%
Avg Drawdown: -12.1%
Normalized Score: 0.174
Lookback periods: [124, 159, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 19m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $912,996,203
Annual Return: 39.03%
Sharpe Ratio: 1.40327
Sortino Ratio: 1.309
Max Drawdown: -34.7%
Avg Drawdown: -9.8%
Normalized Score: 0.930
Lookback periods: [50, 74, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 14m 4sRunning iteration 31/1500... Est. remaining: 11m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,005,011
Annual Return: 43.90%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.784
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 11m 6sRunning iteration 51/1500... Est. remaining: 10m 14sRunning iteration 61/1500... Est. remaining: 9m 40sRunning iteration 71/1500... Est. remaining: 9m 16sRunning iteration 81/1500... Est. remaining: 8m 56sRunning iteration 91/1500... Est. remaining: 8m 40sRunning iteration 101/1500... Est. remaining: 8m 27sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.784400499533507), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 16sRunning iteration 121/1500... Est. remaining: 8m 6sRunning iteration 131/1500... Est. remaining: 7m 57sRunning iteration 141/1500... Est. remaining: 7m 49sRunning iteration 151/1500... Est. remaining: 7m 41sRunning iteration 161/1500... Est. remaining: 7m 34sRunning iteration 171/1500... Est. remaining: 7m 27sRunning iteration 181/1500... Est. remaining: 7m 22sRunning iteration 191/1500... Est. remaining: 7m 16sRunning iteration 201/1500... Est. remaining: 7m 11sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.784400499533507), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 6sRunning iteration 221/1500... Est. remaining: 7m 1sRunning iteration 231/1500... Est. remaining: 6m 56sRunning iteration 241/1500... Est. remaining: 6m 51sRunning iteration 251/1500... Est. remaining: 6m 46sRunning iteration 261/1500... Est. remaining: 6m 42sRunning iteration 271/1500... Est. remaining: 6m 37sRunning iteration 281/1500... Est. remaining: 6m 33sRunning iteration 291/1500... Est. remaining: 6m 29sRunning iteration 301/1500... Est. remaining: 6m 24sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.784400499533507), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 20sRunning iteration 321/1500... Est. remaining: 6m 16sRunning iteration 331/1500... Est. remaining: 6m 12sRunning iteration 341/1500... Est. remaining: 6m 8sRunning iteration 351/1500... Est. remaining: 6m 4sRunning iteration 361/1500... Est. remaining: 6m 1sRunning iteration 371/1500... Est. remaining: 5m 57sRunning iteration 381/1500... Est. remaining: 5m 53sRunning iteration 391/1500... Est. remaining: 5m 49sRunning iteration 401/1500... Est. remaining: 5m 46sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.784400499533507), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 42sRunning iteration 421/1500... Est. remaining: 5m 39sRunning iteration 431/1500... Est. remaining: 5m 35sRunning iteration 441/1500... Est. remaining: 5m 32sRunning iteration 451/1500... Est. remaining: 5m 28sRunning iteration 461/1500... Est. remaining: 5m 25sRunning iteration 471/1500... Est. remaining: 5m 22sRunning iteration 481/1500... Est. remaining: 5m 18sRunning iteration 491/1500... Est. remaining: 5m 15sRunning iteration 501/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.784400499533507), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.788
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 5m 10sRunning iteration 521/1500... Est. remaining: 5m 7sRunning iteration 531/1500... Est. remaining: 5m 4sRunning iteration 541/1500... Est. remaining: 5m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,916,377,953
Annual Return: 45.00%
Sharpe Ratio: 1.61386
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.824
Lookback periods: [50, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 4m 58sRunning iteration 561/1500... Est. remaining: 4m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.926
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 4m 53sRunning iteration 581/1500... Est. remaining: 4m 50sRunning iteration 591/1500... Est. remaining: 4m 47sRunning iteration 601/1500... Est. remaining: 4m 44sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.9263458527826554), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 40sRunning iteration 621/1500... Est. remaining: 4m 37sRunning iteration 631/1500... Est. remaining: 4m 34sRunning iteration 641/1500... Est. remaining: 4m 30sRunning iteration 651/1500... Est. remaining: 4m 27sRunning iteration 661/1500... Est. remaining: 4m 24sRunning iteration 671/1500... Est. remaining: 4m 20sRunning iteration 681/1500... Est. remaining: 4m 17sRunning iteration 691/1500... Est. remaining: 4m 14sRunning iteration 701/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.9263458527826554), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 8sRunning iteration 721/1500... Est. remaining: 4m 4sRunning iteration 731/1500... Est. remaining: 4m 1sRunning iteration 741/1500... Est. remaining: 3m 58sRunning iteration 751/1500... Est. remaining: 3m 55sRunning iteration 761/1500... Est. remaining: 3m 51sRunning iteration 771/1500... Est. remaining: 3m 48sRunning iteration 781/1500... Est. remaining: 3m 45sRunning iteration 791/1500... Est. remaining: 3m 42sRunning iteration 801/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.9263458527826554), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 32sRunning iteration 831/1500... Est. remaining: 3m 29sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.9263458527826554), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 3sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 57sRunning iteration 941/1500... Est. remaining: 2m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.053
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 2m 51sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0527024814640114), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0527024814640114), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0527024814640114), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0527024814640114), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.100
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1004265996808993), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 2.10
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1004265996808993), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 2.1004)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Mon Aug 25 14:34:16 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $900,532,275
Annual Return: 38.98%
Sharpe Ratio: 1.33415
Sortino Ratio: 1.255
Max Drawdown: -56.3%
Avg Drawdown: -13.1%
Normalized Score: -0.705
Lookback periods: [88, 108, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,242,640,723
Annual Return: 40.28%
Sharpe Ratio: 1.38633
Sortino Ratio: 1.306
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: -0.149
Lookback periods: [78, 131, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 19m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $709,626,811
Annual Return: 38.03%
Sharpe Ratio: 1.34340
Sortino Ratio: 1.252
Max Drawdown: -44.8%
Avg Drawdown: -10.3%
Normalized Score: -0.063
Lookback periods: [50, 79, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 14m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,975,755,045
Annual Return: 46.01%
Sharpe Ratio: 1.50168
Sortino Ratio: 1.470
Max Drawdown: -62.1%
Avg Drawdown: -11.1%
Normalized Score: 0.187
Lookback periods: [157, 169, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,536,560,329
Annual Return: 41.14%
Sharpe Ratio: 1.43636
Sortino Ratio: 1.338
Max Drawdown: -41.9%
Avg Drawdown: -10.2%
Normalized Score: 0.443
Lookback periods: [50, 52, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 13m 0sRunning iteration 41/1500... Est. remaining: 11m 33sRunning iteration 51/1500... Est. remaining: 10m 37sRunning iteration 61/1500... Est. remaining: 10m 0sRunning iteration 71/1500... Est. remaining: 9m 33sRunning iteration 81/1500... Est. remaining: 9m 11sRunning iteration 91/1500... Est. remaining: 8m 54sRunning iteration 101/1500... Est. remaining: 8m 39sbest_combination: {'lookbacks': [50, 52, 150], 'score': np.float64(0.44291055127062207), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 28sRunning iteration 121/1500... Est. remaining: 8m 16sRunning iteration 131/1500... Est. remaining: 8m 7sRunning iteration 141/1500... Est. remaining: 7m 59sRunning iteration 151/1500... Est. remaining: 7m 50sRunning iteration 161/1500... Est. remaining: 7m 43sRunning iteration 171/1500... Est. remaining: 7m 36sRunning iteration 181/1500... Est. remaining: 7m 30sRunning iteration 191/1500... Est. remaining: 7m 24sRunning iteration 201/1500... Est. remaining: 7m 18sbest_combination: {'lookbacks': [50, 52, 150], 'score': np.float64(0.44291055127062207), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 12sRunning iteration 221/1500... Est. remaining: 7m 7sRunning iteration 231/1500... Est. remaining: 7m 2sRunning iteration 241/1500... Est. remaining: 6m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,200,881,235
Annual Return: 40.14%
Sharpe Ratio: 1.43725
Sortino Ratio: 1.338
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.694
Lookback periods: [51, 56, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 6m 56sRunning iteration 261/1500... Est. remaining: 6m 51sRunning iteration 271/1500... Est. remaining: 6m 46sRunning iteration 281/1500... Est. remaining: 6m 42sRunning iteration 291/1500... Est. remaining: 6m 37sRunning iteration 301/1500... Est. remaining: 6m 33sbest_combination: {'lookbacks': [51, 56, 84], 'score': np.float64(0.693725146076692), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 28sRunning iteration 321/1500... Est. remaining: 6m 24sRunning iteration 331/1500... Est. remaining: 6m 20sRunning iteration 341/1500... Est. remaining: 6m 16sRunning iteration 351/1500... Est. remaining: 6m 12sRunning iteration 361/1500... Est. remaining: 6m 8sRunning iteration 371/1500... Est. remaining: 6m 4sRunning iteration 381/1500... Est. remaining: 6m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,003,461,468
Annual Return: 42.22%
Sharpe Ratio: 1.50059
Sortino Ratio: 1.416
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 0.997
Lookback periods: [53, 53, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 5m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,062,580,776
Annual Return: 42.34%
Sharpe Ratio: 1.52241
Sortino Ratio: 1.417
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 1.068
Lookback periods: [50, 51, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 5m 57sbest_combination: {'lookbacks': [50, 51, 83], 'score': np.float64(1.0676611378990855), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 53sRunning iteration 421/1500... Est. remaining: 5m 50sRunning iteration 431/1500... Est. remaining: 5m 46sRunning iteration 441/1500... Est. remaining: 5m 42sRunning iteration 451/1500... Est. remaining: 5m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,778,317,395
Annual Return: 41.74%
Sharpe Ratio: 1.51109
Sortino Ratio: 1.412
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.087
Lookback periods: [50, 50, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 5m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,421,397,372
Annual Return: 43.00%
Sharpe Ratio: 1.52981
Sortino Ratio: 1.443
Max Drawdown: -35.6%
Avg Drawdown: -9.4%
Normalized Score: 1.097
Lookback periods: [50, 53, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 5m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.612
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 5m 32sRunning iteration 491/1500... Est. remaining: 5m 28sRunning iteration 501/1500... Est. remaining: 5m 24sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6116254791319526), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 21sRunning iteration 521/1500... Est. remaining: 5m 17sRunning iteration 531/1500... Est. remaining: 5m 14sRunning iteration 541/1500... Est. remaining: 5m 10sRunning iteration 551/1500... Est. remaining: 5m 6sRunning iteration 561/1500... Est. remaining: 5m 3sRunning iteration 571/1500... Est. remaining: 4m 59sRunning iteration 581/1500... Est. remaining: 4m 55sRunning iteration 591/1500... Est. remaining: 4m 52sRunning iteration 601/1500... Est. remaining: 4m 48sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6116254791319526), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 45sRunning iteration 621/1500... Est. remaining: 4m 41sRunning iteration 631/1500... Est. remaining: 4m 38sRunning iteration 641/1500... Est. remaining: 4m 35sRunning iteration 651/1500... Est. remaining: 4m 31sRunning iteration 661/1500... Est. remaining: 4m 28sRunning iteration 671/1500... Est. remaining: 4m 24sRunning iteration 681/1500... Est. remaining: 4m 21sRunning iteration 691/1500... Est. remaining: 4m 17sRunning iteration 701/1500... Est. remaining: 4m 14sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6116254791319526), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 11sRunning iteration 721/1500... Est. remaining: 4m 7sRunning iteration 731/1500... Est. remaining: 4m 4sRunning iteration 741/1500... Est. remaining: 4m 0sRunning iteration 751/1500... Est. remaining: 3m 57sRunning iteration 761/1500... Est. remaining: 3m 54sRunning iteration 771/1500... Est. remaining: 3m 50sRunning iteration 781/1500... Est. remaining: 3m 47sRunning iteration 791/1500... Est. remaining: 3m 44sRunning iteration 801/1500... Est. remaining: 3m 41sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6116254791319526), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 37sRunning iteration 821/1500... Est. remaining: 3m 34sRunning iteration 831/1500... Est. remaining: 3m 31sRunning iteration 841/1500... Est. remaining: 3m 27sRunning iteration 851/1500... Est. remaining: 3m 24sRunning iteration 861/1500... Est. remaining: 3m 21sRunning iteration 871/1500... Est. remaining: 3m 18sRunning iteration 881/1500... Est. remaining: 3m 14sRunning iteration 891/1500... Est. remaining: 3m 11sRunning iteration 901/1500... Est. remaining: 3m 8sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6116254791319526), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 5sRunning iteration 921/1500... Est. remaining: 3m 2sRunning iteration 931/1500... Est. remaining: 2m 58sRunning iteration 941/1500... Est. remaining: 2m 55sRunning iteration 951/1500... Est. remaining: 2m 52sRunning iteration 961/1500... Est. remaining: 2m 49sRunning iteration 971/1500... Est. remaining: 2m 46sRunning iteration 981/1500... Est. remaining: 2m 42sRunning iteration 991/1500... Est. remaining: 2m 39sRunning iteration 1001/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6116254791319526), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 33sRunning iteration 1021/1500... Est. remaining: 2m 30sRunning iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 23sRunning iteration 1051/1500... Est. remaining: 2m 20sRunning iteration 1061/1500... Est. remaining: 2m 17sRunning iteration 1071/1500... Est. remaining: 2m 14sRunning iteration 1081/1500... Est. remaining: 2m 11sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6116254791319526), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 58sRunning iteration 1131/1500... Est. remaining: 1m 55sRunning iteration 1141/1500... Est. remaining: 1m 52sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6116254791319526), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.771
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.771060158649253), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.771060158649253), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.77
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.771060158649253), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.7711)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 14:42:03 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $422,884,594
Annual Return: 35.98%
Sharpe Ratio: 1.22796
Sortino Ratio: 1.154
Max Drawdown: -56.3%
Avg Drawdown: -14.0%
Normalized Score: -0.977
Lookback periods: [83, 111, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,737,294,318
Annual Return: 43.51%
Sharpe Ratio: 1.45675
Sortino Ratio: 1.401
Max Drawdown: -58.0%
Avg Drawdown: -11.9%
Normalized Score: 0.133
Lookback periods: [110, 127, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 19m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,106,037,613
Annual Return: 42.43%
Sharpe Ratio: 1.43333
Sortino Ratio: 1.364
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: 0.336
Lookback periods: [96, 106, 109] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,301,353,549
Annual Return: 47.00%
Sharpe Ratio: 1.53599
Sortino Ratio: 1.497
Max Drawdown: -62.3%
Avg Drawdown: -11.7%
Normalized Score: 0.381
Lookback periods: [140, 154, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 14m 54sRunning iteration 31/1500... Est. remaining: 12m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,815,550,469
Annual Return: 44.89%
Sharpe Ratio: 1.52915
Sortino Ratio: 1.453
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: 0.717
Lookback periods: [94, 126, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 11m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,113,467,388
Annual Return: 49.02%
Sharpe Ratio: 1.57648
Sortino Ratio: 1.545
Max Drawdown: -59.6%
Avg Drawdown: -11.2%
Normalized Score: 0.745
Lookback periods: [183, 185, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 10m 58sRunning iteration 61/1500... Est. remaining: 10m 17sRunning iteration 71/1500... Est. remaining: 9m 48sRunning iteration 81/1500... Est. remaining: 9m 25sRunning iteration 91/1500... Est. remaining: 9m 6sRunning iteration 101/1500... Est. remaining: 8m 50sbest_combination: {'lookbacks': [183, 185, 188], 'score': np.float64(0.7446784848339482), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 37sRunning iteration 121/1500... Est. remaining: 8m 25sRunning iteration 131/1500... Est. remaining: 8m 14sRunning iteration 141/1500... Est. remaining: 8m 5sRunning iteration 151/1500... Est. remaining: 7m 56sRunning iteration 161/1500... Est. remaining: 7m 49sRunning iteration 171/1500... Est. remaining: 7m 41sRunning iteration 181/1500... Est. remaining: 7m 34sRunning iteration 191/1500... Est. remaining: 7m 28sRunning iteration 201/1500... Est. remaining: 7m 22sbest_combination: {'lookbacks': [183, 185, 188], 'score': np.float64(0.7446784848339482), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 17sRunning iteration 221/1500... Est. remaining: 7m 11sRunning iteration 231/1500... Est. remaining: 7m 6sRunning iteration 241/1500... Est. remaining: 7m 1sRunning iteration 251/1500... Est. remaining: 6m 56sRunning iteration 261/1500... Est. remaining: 6m 51sRunning iteration 271/1500... Est. remaining: 6m 46sRunning iteration 281/1500... Est. remaining: 6m 42sRunning iteration 291/1500... Est. remaining: 6m 37sRunning iteration 301/1500... Est. remaining: 6m 33sbest_combination: {'lookbacks': [183, 185, 188], 'score': np.float64(0.7446784848339482), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 28sRunning iteration 321/1500... Est. remaining: 6m 24sRunning iteration 331/1500... Est. remaining: 6m 20sRunning iteration 341/1500... Est. remaining: 6m 16sRunning iteration 351/1500... Est. remaining: 6m 12sRunning iteration 361/1500... Est. remaining: 6m 8sRunning iteration 371/1500... Est. remaining: 6m 4sRunning iteration 381/1500... Est. remaining: 6m 0sRunning iteration 391/1500... Est. remaining: 5m 56sRunning iteration 401/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [183, 185, 188], 'score': np.float64(0.7446784848339482), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 49sRunning iteration 421/1500... Est. remaining: 5m 46sRunning iteration 431/1500... Est. remaining: 5m 42sRunning iteration 441/1500... Est. remaining: 5m 38sRunning iteration 451/1500... Est. remaining: 5m 35sRunning iteration 461/1500... Est. remaining: 5m 31sRunning iteration 471/1500... Est. remaining: 5m 27sRunning iteration 481/1500... Est. remaining: 5m 24sRunning iteration 491/1500... Est. remaining: 5m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,935,739,260
Annual Return: 48.95%
Sharpe Ratio: 1.60647
Sortino Ratio: 1.561
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.925
Lookback periods: [138, 156, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 5m 18sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.925332288583651), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 15sRunning iteration 521/1500... Est. remaining: 5m 12sRunning iteration 531/1500... Est. remaining: 5m 8sRunning iteration 541/1500... Est. remaining: 5m 5sRunning iteration 551/1500... Est. remaining: 5m 1sRunning iteration 561/1500... Est. remaining: 4m 58sRunning iteration 571/1500... Est. remaining: 4m 54sRunning iteration 581/1500... Est. remaining: 4m 51sRunning iteration 591/1500... Est. remaining: 4m 48sRunning iteration 601/1500... Est. remaining: 4m 44sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.925332288583651), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 41sRunning iteration 621/1500... Est. remaining: 4m 37sRunning iteration 631/1500... Est. remaining: 4m 34sRunning iteration 641/1500... Est. remaining: 4m 31sRunning iteration 651/1500... Est. remaining: 4m 27sRunning iteration 661/1500... Est. remaining: 4m 24sRunning iteration 671/1500... Est. remaining: 4m 21sRunning iteration 681/1500... Est. remaining: 4m 17sRunning iteration 691/1500... Est. remaining: 4m 14sRunning iteration 701/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.925332288583651), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 8sRunning iteration 721/1500... Est. remaining: 4m 4sRunning iteration 731/1500... Est. remaining: 4m 1sRunning iteration 741/1500... Est. remaining: 3m 58sRunning iteration 751/1500... Est. remaining: 3m 55sRunning iteration 761/1500... Est. remaining: 3m 51sRunning iteration 771/1500... Est. remaining: 3m 48sRunning iteration 781/1500... Est. remaining: 3m 45sRunning iteration 791/1500... Est. remaining: 3m 42sRunning iteration 801/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.925332288583651), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 32sRunning iteration 831/1500... Est. remaining: 3m 29sRunning iteration 841/1500... Est. remaining: 3m 26sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 13sRunning iteration 891/1500... Est. remaining: 3m 10sRunning iteration 901/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.925332288583651), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 3sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 57sRunning iteration 941/1500... Est. remaining: 2m 54sRunning iteration 951/1500... Est. remaining: 2m 51sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.925332288583651), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 29sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.925332288583651), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.925332288583651), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.925332288583651), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.925332288583651), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 0.93
best_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.925332288583651), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [138, 156, 171] (score: 0.9253)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [138, 156, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 113 selections (27.2%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,935,739,259.54
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 14:49:49 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $405,093,144
Annual Return: 35.81%
Sharpe Ratio: 1.21787
Sortino Ratio: 1.148
Max Drawdown: -67.7%
Avg Drawdown: -14.2%
Normalized Score: -1.580
Lookback periods: [61, 173, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,007,212,194
Annual Return: 39.43%
Sharpe Ratio: 1.34865
Sortino Ratio: 1.270
Max Drawdown: -55.0%
Avg Drawdown: -13.1%
Normalized Score: -0.495
Lookback periods: [88, 123, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $853,981,913
Annual Return: 38.77%
Sharpe Ratio: 1.33463
Sortino Ratio: 1.256
Max Drawdown: -52.3%
Avg Drawdown: -10.7%
Normalized Score: -0.105
Lookback periods: [83, 129, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,193,801,640
Annual Return: 40.11%
Sharpe Ratio: 1.36935
Sortino Ratio: 1.292
Max Drawdown: -52.3%
Avg Drawdown: -11.5%
Normalized Score: -0.069
Lookback periods: [80, 117, 133] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 22m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,869,650,649
Annual Return: 44.95%
Sharpe Ratio: 1.47933
Sortino Ratio: 1.439
Max Drawdown: -58.5%
Avg Drawdown: -13.1%
Normalized Score: 0.034
Lookback periods: [136, 144, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 16m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $533,802,870
Annual Return: 36.90%
Sharpe Ratio: 1.29936
Sortino Ratio: 1.200
Max Drawdown: -44.8%
Avg Drawdown: -9.9%
Normalized Score: 0.073
Lookback periods: [50, 83, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 13m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,064,061,916
Annual Return: 39.65%
Sharpe Ratio: 1.40067
Sortino Ratio: 1.293
Max Drawdown: -52.3%
Avg Drawdown: -9.4%
Normalized Score: 0.272
Lookback periods: [51, 98, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 12m 28sRunning iteration 51/1500... Est. remaining: 11m 22sRunning iteration 61/1500... Est. remaining: 10m 36sRunning iteration 71/1500... Est. remaining: 10m 3sRunning iteration 81/1500... Est. remaining: 9m 37sRunning iteration 91/1500... Est. remaining: 9m 16sRunning iteration 101/1500... Est. remaining: 8m 59sbest_combination: {'lookbacks': [51, 98, 146], 'score': np.float64(0.27159031105540843), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 44sRunning iteration 121/1500... Est. remaining: 8m 32sRunning iteration 131/1500... Est. remaining: 8m 21sRunning iteration 141/1500... Est. remaining: 8m 11sRunning iteration 151/1500... Est. remaining: 8m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,029,585,554
Annual Return: 46.05%
Sharpe Ratio: 1.49443
Sortino Ratio: 1.454
Max Drawdown: -59.6%
Avg Drawdown: -11.8%
Normalized Score: 0.294
Lookback periods: [159, 187, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 8m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $810,978,421
Annual Return: 38.56%
Sharpe Ratio: 1.37674
Sortino Ratio: 1.296
Max Drawdown: -38.7%
Avg Drawdown: -10.1%
Normalized Score: 0.550
Lookback periods: [53, 63, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 7m 58sRunning iteration 181/1500... Est. remaining: 7m 50sRunning iteration 191/1500... Est. remaining: 7m 42sRunning iteration 201/1500... Est. remaining: 7m 36sbest_combination: {'lookbacks': [53, 63, 99], 'score': np.float64(0.5495778002846756), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 30sRunning iteration 221/1500... Est. remaining: 7m 24sRunning iteration 231/1500... Est. remaining: 7m 18sRunning iteration 241/1500... Est. remaining: 7m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,167,972,891
Annual Return: 40.03%
Sharpe Ratio: 1.44549
Sortino Ratio: 1.339
Max Drawdown: -34.7%
Avg Drawdown: -9.7%
Normalized Score: 0.954
Lookback periods: [50, 60, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 7m 10sRunning iteration 261/1500... Est. remaining: 7m 4sRunning iteration 271/1500... Est. remaining: 6m 59sRunning iteration 281/1500... Est. remaining: 6m 53sRunning iteration 291/1500... Est. remaining: 6m 48sRunning iteration 301/1500... Est. remaining: 6m 44sbest_combination: {'lookbacks': [50, 60, 87], 'score': np.float64(0.9541281535453748), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 39sRunning iteration 321/1500... Est. remaining: 6m 34sRunning iteration 331/1500... Est. remaining: 6m 30sRunning iteration 341/1500... Est. remaining: 6m 25sRunning iteration 351/1500... Est. remaining: 6m 21sRunning iteration 361/1500... Est. remaining: 6m 17sRunning iteration 371/1500... Est. remaining: 6m 12sRunning iteration 381/1500... Est. remaining: 6m 8sRunning iteration 391/1500... Est. remaining: 6m 4sRunning iteration 401/1500... Est. remaining: 6m 0sbest_combination: {'lookbacks': [50, 60, 87], 'score': np.float64(0.9541281535453748), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,342,351,698
Annual Return: 40.59%
Sharpe Ratio: 1.46896
Sortino Ratio: 1.371
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 1.105
Lookback periods: [50, 58, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 5m 58sRunning iteration 421/1500... Est. remaining: 5m 54sRunning iteration 431/1500... Est. remaining: 5m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,889,655,589
Annual Return: 41.98%
Sharpe Ratio: 1.51789
Sortino Ratio: 1.414
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.278
Lookback periods: [50, 55, 86] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 5m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,194,696,065
Annual Return: 42.60%
Sharpe Ratio: 1.52901
Sortino Ratio: 1.429
Max Drawdown: -35.6%
Avg Drawdown: -9.2%
Normalized Score: 1.350
Lookback periods: [50, 52, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 5m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,301,207,364
Annual Return: 42.79%
Sharpe Ratio: 1.52347
Sortino Ratio: 1.433
Max Drawdown: -35.6%
Avg Drawdown: -9.1%
Normalized Score: 1.370
Lookback periods: [50, 53, 86] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 5m 43sRunning iteration 471/1500... Est. remaining: 5m 39sRunning iteration 481/1500... Est. remaining: 5m 35sRunning iteration 491/1500... Est. remaining: 5m 31sRunning iteration 501/1500... Est. remaining: 5m 27sbest_combination: {'lookbacks': [50, 53, 86], 'score': np.float64(1.3699144805944345), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 23sRunning iteration 521/1500... Est. remaining: 5m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,606,599,028
Annual Return: 43.31%
Sharpe Ratio: 1.54845
Sortino Ratio: 1.453
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.471
Lookback periods: [50, 54, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 5m 17sRunning iteration 541/1500... Est. remaining: 5m 13sRunning iteration 551/1500... Est. remaining: 5m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,109,906,920
Annual Return: 44.04%
Sharpe Ratio: 1.57266
Sortino Ratio: 1.479
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.519
Lookback periods: [50, 53, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 5m 7sRunning iteration 571/1500... Est. remaining: 5m 3sRunning iteration 581/1500... Est. remaining: 5m 0sRunning iteration 591/1500... Est. remaining: 4m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.776
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/1500... Est. remaining: 4m 53sbest_combination: {'lookbacks': [50, 50, 96], 'score': np.float64(1.7758351231906686), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.906
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 4m 47sRunning iteration 631/1500... Est. remaining: 4m 43sRunning iteration 641/1500... Est. remaining: 4m 40sRunning iteration 651/1500... Est. remaining: 4m 36sRunning iteration 661/1500... Est. remaining: 4m 32sRunning iteration 671/1500... Est. remaining: 4m 29sRunning iteration 681/1500... Est. remaining: 4m 25sRunning iteration 691/1500... Est. remaining: 4m 22sRunning iteration 701/1500... Est. remaining: 4m 18sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.9062330814258837), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 15sRunning iteration 721/1500... Est. remaining: 4m 11sRunning iteration 731/1500... Est. remaining: 4m 8sRunning iteration 741/1500... Est. remaining: 4m 4sRunning iteration 751/1500... Est. remaining: 4m 1sRunning iteration 761/1500... Est. remaining: 3m 57sRunning iteration 771/1500... Est. remaining: 3m 54sRunning iteration 781/1500... Est. remaining: 3m 50sRunning iteration 791/1500... Est. remaining: 3m 47sRunning iteration 801/1500... Est. remaining: 3m 44sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.9062330814258837), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 40sRunning iteration 821/1500... Est. remaining: 3m 37sRunning iteration 831/1500... Est. remaining: 3m 33sRunning iteration 841/1500... Est. remaining: 3m 30sRunning iteration 851/1500... Est. remaining: 3m 27sRunning iteration 861/1500... Est. remaining: 3m 23sRunning iteration 871/1500... Est. remaining: 3m 20sRunning iteration 881/1500... Est. remaining: 3m 17sRunning iteration 891/1500... Est. remaining: 3m 13sRunning iteration 901/1500... Est. remaining: 3m 10sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.9062330814258837), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 7sRunning iteration 921/1500... Est. remaining: 3m 3sRunning iteration 931/1500... Est. remaining: 3m 0sRunning iteration 941/1500... Est. remaining: 2m 57sRunning iteration 951/1500... Est. remaining: 2m 53sRunning iteration 961/1500... Est. remaining: 2m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.933
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 971/1500... Est. remaining: 2m 47sRunning iteration 981/1500... Est. remaining: 2m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.068
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 991/1500... Est. remaining: 2m 41sRunning iteration 1001/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.067612207094773), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.120
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 2m 35sRunning iteration 1021/1500... Est. remaining: 2m 32sRunning iteration 1031/1500... Est. remaining: 2m 29sRunning iteration 1041/1500... Est. remaining: 2m 25sRunning iteration 1051/1500... Est. remaining: 2m 22sRunning iteration 1061/1500... Est. remaining: 2m 19sRunning iteration 1071/1500... Est. remaining: 2m 16sRunning iteration 1081/1500... Est. remaining: 2m 12sRunning iteration 1091/1500... Est. remaining: 2m 9sRunning iteration 1101/1500... Est. remaining: 2m 6sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 3sRunning iteration 1121/1500... Est. remaining: 1m 59sRunning iteration 1131/1500... Est. remaining: 1m 56sRunning iteration 1141/1500... Est. remaining: 1m 53sRunning iteration 1151/1500... Est. remaining: 1m 50sRunning iteration 1161/1500... Est. remaining: 1m 47sRunning iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 40sRunning iteration 1191/1500... Est. remaining: 1m 37sRunning iteration 1201/1500... Est. remaining: 1m 34sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 31sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 18sRunning iteration 1261/1500... Est. remaining: 1m 15sRunning iteration 1271/1500... Est. remaining: 1m 12sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 53sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 2.12
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1197599476738938), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 2.1198)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 14:57:39 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $266,117,282
Annual Return: 34.18%
Sharpe Ratio: 1.21882
Sortino Ratio: 1.119
Max Drawdown: -56.2%
Avg Drawdown: -13.3%
Normalized Score: -1.693
Lookback periods: [52, 63, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $443,484,020
Annual Return: 36.17%
Sharpe Ratio: 1.26337
Sortino Ratio: 1.178
Max Drawdown: -52.3%
Avg Drawdown: -11.6%
Normalized Score: -1.043
Lookback periods: [79, 98, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $628,517,237
Annual Return: 37.54%
Sharpe Ratio: 1.32881
Sortino Ratio: 1.234
Max Drawdown: -34.7%
Avg Drawdown: -10.1%
Normalized Score: -0.049
Lookback periods: [50, 80, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,746,609,914
Annual Return: 46.61%
Sharpe Ratio: 1.51605
Sortino Ratio: 1.478
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.255
Lookback periods: [169, 193, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 15m 5sRunning iteration 31/1500... Est. remaining: 12m 25sRunning iteration 41/1500... Est. remaining: 11m 5sRunning iteration 51/1500... Est. remaining: 10m 15sRunning iteration 61/1500... Est. remaining: 9m 41sRunning iteration 71/1500... Est. remaining: 9m 16sRunning iteration 81/1500... Est. remaining: 8m 56sRunning iteration 91/1500... Est. remaining: 8m 41sRunning iteration 101/1500... Est. remaining: 8m 28sbest_combination: {'lookbacks': [169, 193, 196], 'score': np.float64(0.25456486955638397), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 16sRunning iteration 121/1500... Est. remaining: 8m 6sRunning iteration 131/1500... Est. remaining: 7m 58sRunning iteration 141/1500... Est. remaining: 7m 49sRunning iteration 151/1500... Est. remaining: 7m 42sRunning iteration 161/1500... Est. remaining: 7m 35sRunning iteration 171/1500... Est. remaining: 7m 28sRunning iteration 181/1500... Est. remaining: 7m 23sRunning iteration 191/1500... Est. remaining: 7m 17sRunning iteration 201/1500... Est. remaining: 7m 11sbest_combination: {'lookbacks': [169, 193, 196], 'score': np.float64(0.25456486955638397), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 6sRunning iteration 221/1500... Est. remaining: 7m 1sRunning iteration 231/1500... Est. remaining: 6m 56sRunning iteration 241/1500... Est. remaining: 6m 52sRunning iteration 251/1500... Est. remaining: 6m 47sRunning iteration 261/1500... Est. remaining: 6m 42sRunning iteration 271/1500... Est. remaining: 6m 38sRunning iteration 281/1500... Est. remaining: 6m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,761,884,346
Annual Return: 46.63%
Sharpe Ratio: 1.52420
Sortino Ratio: 1.475
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.319
Lookback periods: [159, 159, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 291/1500... Est. remaining: 6m 32sRunning iteration 301/1500... Est. remaining: 6m 28sbest_combination: {'lookbacks': [159, 159, 184], 'score': np.float64(0.31919369680380055), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,371,934,361
Annual Return: 48.21%
Sharpe Ratio: 1.56110
Sortino Ratio: 1.523
Max Drawdown: -60.7%
Avg Drawdown: -11.7%
Normalized Score: 0.391
Lookback periods: [159, 184, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 6m 27sRunning iteration 321/1500... Est. remaining: 6m 23sRunning iteration 331/1500... Est. remaining: 6m 18sRunning iteration 341/1500... Est. remaining: 6m 14sRunning iteration 351/1500... Est. remaining: 6m 10sRunning iteration 361/1500... Est. remaining: 6m 6sRunning iteration 371/1500... Est. remaining: 6m 2sRunning iteration 381/1500... Est. remaining: 5m 58sRunning iteration 391/1500... Est. remaining: 5m 54sRunning iteration 401/1500... Est. remaining: 5m 51sbest_combination: {'lookbacks': [159, 184, 188], 'score': np.float64(0.3909680944019117), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,591,466,000
Annual Return: 47.80%
Sharpe Ratio: 1.55894
Sortino Ratio: 1.526
Max Drawdown: -58.5%
Avg Drawdown: -11.5%
Normalized Score: 0.466
Lookback periods: [139, 155, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 5m 45sRunning iteration 431/1500... Est. remaining: 5m 42sRunning iteration 441/1500... Est. remaining: 5m 38sRunning iteration 451/1500... Est. remaining: 5m 34sRunning iteration 461/1500... Est. remaining: 5m 31sRunning iteration 471/1500... Est. remaining: 5m 27sRunning iteration 481/1500... Est. remaining: 5m 23sRunning iteration 491/1500... Est. remaining: 5m 20sRunning iteration 501/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [139, 155, 170], 'score': np.float64(0.46552854573904956), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 13sRunning iteration 521/1500... Est. remaining: 5m 9sRunning iteration 531/1500... Est. remaining: 5m 6sRunning iteration 541/1500... Est. remaining: 5m 2sRunning iteration 551/1500... Est. remaining: 4m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,488,709,085
Annual Return: 48.75%
Sharpe Ratio: 1.60116
Sortino Ratio: 1.564
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.773
Lookback periods: [136, 154, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 4m 57sRunning iteration 571/1500... Est. remaining: 4m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,093,171,924
Annual Return: 48.57%
Sharpe Ratio: 1.60004
Sortino Ratio: 1.559
Max Drawdown: -57.2%
Avg Drawdown: -10.7%
Normalized Score: 0.784
Lookback periods: [136, 156, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 4m 51sRunning iteration 591/1500... Est. remaining: 4m 48sRunning iteration 601/1500... Est. remaining: 4m 44sbest_combination: {'lookbacks': [136, 156, 158], 'score': np.float64(0.7835807580435088), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 41sRunning iteration 621/1500... Est. remaining: 4m 37sRunning iteration 631/1500... Est. remaining: 4m 34sRunning iteration 641/1500... Est. remaining: 4m 31sRunning iteration 651/1500... Est. remaining: 4m 27sRunning iteration 661/1500... Est. remaining: 4m 24sRunning iteration 671/1500... Est. remaining: 4m 21sRunning iteration 681/1500... Est. remaining: 4m 17sRunning iteration 691/1500... Est. remaining: 4m 14sRunning iteration 701/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [136, 156, 158], 'score': np.float64(0.7835807580435088), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 7sRunning iteration 721/1500... Est. remaining: 4m 4sRunning iteration 731/1500... Est. remaining: 4m 1sRunning iteration 741/1500... Est. remaining: 3m 58sRunning iteration 751/1500... Est. remaining: 3m 54sRunning iteration 761/1500... Est. remaining: 3m 51sRunning iteration 771/1500... Est. remaining: 3m 48sRunning iteration 781/1500... Est. remaining: 3m 45sRunning iteration 791/1500... Est. remaining: 3m 41sRunning iteration 801/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [136, 156, 158], 'score': np.float64(0.7835807580435088), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 32sRunning iteration 831/1500... Est. remaining: 3m 29sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 13sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [136, 156, 158], 'score': np.float64(0.7835807580435088), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 3sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 57sRunning iteration 941/1500... Est. remaining: 2m 54sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [136, 156, 158], 'score': np.float64(0.7835807580435088), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 31sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [136, 156, 158], 'score': np.float64(0.7835807580435088), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [136, 156, 158], 'score': np.float64(0.7835807580435088), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [136, 156, 158], 'score': np.float64(0.7835807580435088), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [136, 156, 158], 'score': np.float64(0.7835807580435088), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 0.78
best_combination: {'lookbacks': [136, 156, 158], 'score': np.float64(0.7835807580435088), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 156, 158] (score: 0.7836)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 156, 158] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 118 selections (28.4%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pi: 77 selections (18.5%)
4. naz100_pine: 72 selections (17.3%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,093,171,924.14
Average Annualized Gain: 48.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 15:05:24 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $688,597,300
Annual Return: 37.91%
Sharpe Ratio: 1.30161
Sortino Ratio: 1.225
Max Drawdown: -55.8%
Avg Drawdown: -13.6%
Normalized Score: -1.171
Lookback periods: [89, 115, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $937,081,610
Annual Return: 39.14%
Sharpe Ratio: 1.32697
Sortino Ratio: 1.254
Max Drawdown: -57.9%
Avg Drawdown: -12.6%
Normalized Score: -0.917
Lookback periods: [103, 113, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,699,684,716
Annual Return: 43.45%
Sharpe Ratio: 1.41708
Sortino Ratio: 1.379
Max Drawdown: -64.9%
Avg Drawdown: -13.4%
Normalized Score: -0.832
Lookback periods: [138, 181, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,697,316,591
Annual Return: 44.76%
Sharpe Ratio: 1.50875
Sortino Ratio: 1.464
Max Drawdown: -63.4%
Avg Drawdown: -12.3%
Normalized Score: -0.294
Lookback periods: [107, 129, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 15m 11sRunning iteration 31/1500... Est. remaining: 12m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,410,651,232
Annual Return: 40.79%
Sharpe Ratio: 1.39021
Sortino Ratio: 1.316
Max Drawdown: -52.3%
Avg Drawdown: -10.7%
Normalized Score: -0.115
Lookback periods: [85, 96, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 11m 36sRunning iteration 51/1500... Est. remaining: 10m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,219,555,263
Annual Return: 49.07%
Sharpe Ratio: 1.59964
Sortino Ratio: 1.562
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.534
Lookback periods: [140, 158, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 10m 18sRunning iteration 71/1500... Est. remaining: 9m 48sRunning iteration 81/1500... Est. remaining: 9m 23sRunning iteration 91/1500... Est. remaining: 9m 4sRunning iteration 101/1500... Est. remaining: 8m 51sbest_combination: {'lookbacks': [140, 158, 188], 'score': np.float64(0.5335026762460752), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 38sRunning iteration 121/1500... Est. remaining: 8m 26sRunning iteration 131/1500... Est. remaining: 8m 15sRunning iteration 141/1500... Est. remaining: 8m 6sRunning iteration 151/1500... Est. remaining: 7m 57sRunning iteration 161/1500... Est. remaining: 7m 50sRunning iteration 171/1500... Est. remaining: 7m 43sRunning iteration 181/1500... Est. remaining: 7m 35sRunning iteration 191/1500... Est. remaining: 7m 29sRunning iteration 201/1500... Est. remaining: 7m 23sbest_combination: {'lookbacks': [140, 158, 188], 'score': np.float64(0.5335026762460752), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 17sRunning iteration 221/1500... Est. remaining: 7m 11sRunning iteration 231/1500... Est. remaining: 7m 6sRunning iteration 241/1500... Est. remaining: 7m 1sRunning iteration 251/1500... Est. remaining: 6m 56sRunning iteration 261/1500... Est. remaining: 6m 52sRunning iteration 271/1500... Est. remaining: 6m 47sRunning iteration 281/1500... Est. remaining: 6m 42sRunning iteration 291/1500... Est. remaining: 6m 38sRunning iteration 301/1500... Est. remaining: 6m 34sbest_combination: {'lookbacks': [140, 158, 188], 'score': np.float64(0.5335026762460752), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 29sRunning iteration 321/1500... Est. remaining: 6m 25sRunning iteration 331/1500... Est. remaining: 6m 21sRunning iteration 341/1500... Est. remaining: 6m 17sRunning iteration 351/1500... Est. remaining: 6m 12sRunning iteration 361/1500... Est. remaining: 6m 9sRunning iteration 371/1500... Est. remaining: 6m 5sRunning iteration 381/1500... Est. remaining: 6m 1sRunning iteration 391/1500... Est. remaining: 5m 57sRunning iteration 401/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [140, 158, 188], 'score': np.float64(0.5335026762460752), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 49sRunning iteration 421/1500... Est. remaining: 5m 46sRunning iteration 431/1500... Est. remaining: 5m 42sRunning iteration 441/1500... Est. remaining: 5m 38sRunning iteration 451/1500... Est. remaining: 5m 35sRunning iteration 461/1500... Est. remaining: 5m 31sRunning iteration 471/1500... Est. remaining: 5m 27sRunning iteration 481/1500... Est. remaining: 5m 24sRunning iteration 491/1500... Est. remaining: 5m 21sRunning iteration 501/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [140, 158, 188], 'score': np.float64(0.5335026762460752), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 14sRunning iteration 521/1500... Est. remaining: 5m 10sRunning iteration 531/1500... Est. remaining: 5m 7sRunning iteration 541/1500... Est. remaining: 5m 3sRunning iteration 551/1500... Est. remaining: 5m 0sRunning iteration 561/1500... Est. remaining: 4m 56sRunning iteration 571/1500... Est. remaining: 4m 53sRunning iteration 581/1500... Est. remaining: 4m 50sRunning iteration 591/1500... Est. remaining: 4m 46sRunning iteration 601/1500... Est. remaining: 4m 43sbest_combination: {'lookbacks': [140, 158, 188], 'score': np.float64(0.5335026762460752), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 40sRunning iteration 621/1500... Est. remaining: 4m 36sRunning iteration 631/1500... Est. remaining: 4m 33sRunning iteration 641/1500... Est. remaining: 4m 30sRunning iteration 651/1500... Est. remaining: 4m 26sRunning iteration 661/1500... Est. remaining: 4m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,163,892,410
Annual Return: 49.82%
Sharpe Ratio: 1.63695
Sortino Ratio: 1.595
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 0.766
Lookback periods: [138, 157, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 4m 21sRunning iteration 681/1500... Est. remaining: 4m 17sRunning iteration 691/1500... Est. remaining: 4m 14sRunning iteration 701/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [138, 157, 173], 'score': np.float64(0.7661804528282989), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 7sRunning iteration 721/1500... Est. remaining: 4m 4sRunning iteration 731/1500... Est. remaining: 4m 1sRunning iteration 741/1500... Est. remaining: 3m 58sRunning iteration 751/1500... Est. remaining: 3m 54sRunning iteration 761/1500... Est. remaining: 3m 51sRunning iteration 771/1500... Est. remaining: 3m 48sRunning iteration 781/1500... Est. remaining: 3m 45sRunning iteration 791/1500... Est. remaining: 3m 41sRunning iteration 801/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [138, 157, 173], 'score': np.float64(0.7661804528282989), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 32sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [138, 157, 173], 'score': np.float64(0.7661804528282989), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 3sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 57sRunning iteration 941/1500... Est. remaining: 2m 53sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [138, 157, 173], 'score': np.float64(0.7661804528282989), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 31sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [138, 157, 173], 'score': np.float64(0.7661804528282989), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [138, 157, 173], 'score': np.float64(0.7661804528282989), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [138, 157, 173], 'score': np.float64(0.7661804528282989), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [138, 157, 173], 'score': np.float64(0.7661804528282989), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 0.77
best_combination: {'lookbacks': [138, 157, 173], 'score': np.float64(0.7661804528282989), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [138, 157, 173] (score: 0.7662)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [138, 157, 173] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,163,892,409.80
Average Annualized Gain: 49.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 140m 51s
End time: Mon Aug 25 15:13:01 EDT 2025
Average time per successful run: 9m 23s
==============================================================
✓ All runs completed successfully!
