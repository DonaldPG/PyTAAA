Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Mon Aug 25 15:43:12 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Mon Aug 25 15:43:12 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,110,377,365
Annual Return: 42.44%
Sharpe Ratio: 1.42977
Sortino Ratio: 1.364
Max Drawdown: -56.9%
Avg Drawdown: -12.8%
Normalized Score: -0.161
Lookback periods: [98, 123, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 17m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,544,139,541
Annual Return: 41.16%
Sharpe Ratio: 1.46312
Sortino Ratio: 1.364
Max Drawdown: -51.1%
Avg Drawdown: -11.2%
Normalized Score: 0.149
Lookback periods: [51, 53, 109] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,098,260,743
Annual Return: 44.02%
Sharpe Ratio: 1.49012
Sortino Ratio: 1.432
Max Drawdown: -56.9%
Avg Drawdown: -11.7%
Normalized Score: 0.194
Lookback periods: [116, 128, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 14m 20sRunning iteration 31/1500... Est. remaining: 11m 53sRunning iteration 41/1500... Est. remaining: 10m 39sRunning iteration 51/1500... Est. remaining: 9m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,372,700,042
Annual Return: 48.21%
Sharpe Ratio: 1.56691
Sortino Ratio: 1.524
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.648
Lookback periods: [156, 159, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 9m 37sRunning iteration 71/1500... Est. remaining: 9m 11sRunning iteration 81/1500... Est. remaining: 8m 50sRunning iteration 91/1500... Est. remaining: 8m 34sRunning iteration 101/1500... Est. remaining: 8m 19sbest_combination: {'lookbacks': [156, 159, 188], 'score': np.float64(0.6480614034099423), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 8sRunning iteration 121/1500... Est. remaining: 7m 58sRunning iteration 131/1500... Est. remaining: 7m 49sRunning iteration 141/1500... Est. remaining: 7m 40sRunning iteration 151/1500... Est. remaining: 7m 32sRunning iteration 161/1500... Est. remaining: 7m 25sRunning iteration 171/1500... Est. remaining: 7m 18sRunning iteration 181/1500... Est. remaining: 7m 12sRunning iteration 191/1500... Est. remaining: 7m 6sRunning iteration 201/1500... Est. remaining: 7m 0sbest_combination: {'lookbacks': [156, 159, 188], 'score': np.float64(0.6480614034099423), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 55sRunning iteration 221/1500... Est. remaining: 6m 50sRunning iteration 231/1500... Est. remaining: 6m 45sRunning iteration 241/1500... Est. remaining: 6m 40sRunning iteration 251/1500... Est. remaining: 6m 36sRunning iteration 261/1500... Est. remaining: 6m 31sRunning iteration 271/1500... Est. remaining: 6m 27sRunning iteration 281/1500... Est. remaining: 6m 23sRunning iteration 291/1500... Est. remaining: 6m 19sRunning iteration 301/1500... Est. remaining: 6m 15sbest_combination: {'lookbacks': [156, 159, 188], 'score': np.float64(0.6480614034099423), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 11sRunning iteration 321/1500... Est. remaining: 6m 7sRunning iteration 331/1500... Est. remaining: 6m 3sRunning iteration 341/1500... Est. remaining: 5m 59sRunning iteration 351/1500... Est. remaining: 5m 55sRunning iteration 361/1500... Est. remaining: 5m 52sRunning iteration 371/1500... Est. remaining: 5m 48sRunning iteration 381/1500... Est. remaining: 5m 44sRunning iteration 391/1500... Est. remaining: 5m 41sRunning iteration 401/1500... Est. remaining: 5m 37sbest_combination: {'lookbacks': [156, 159, 188], 'score': np.float64(0.6480614034099423), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 34sRunning iteration 421/1500... Est. remaining: 5m 30sRunning iteration 431/1500... Est. remaining: 5m 27sRunning iteration 441/1500... Est. remaining: 5m 23sRunning iteration 451/1500... Est. remaining: 5m 20sRunning iteration 461/1500... Est. remaining: 5m 16sRunning iteration 471/1500... Est. remaining: 5m 13sRunning iteration 481/1500... Est. remaining: 5m 10sRunning iteration 491/1500... Est. remaining: 5m 6sRunning iteration 501/1500... Est. remaining: 5m 3sbest_combination: {'lookbacks': [156, 159, 188], 'score': np.float64(0.6480614034099423), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 0sRunning iteration 521/1500... Est. remaining: 4m 56sRunning iteration 531/1500... Est. remaining: 4m 53sRunning iteration 541/1500... Est. remaining: 4m 50sRunning iteration 551/1500... Est. remaining: 4m 46sRunning iteration 561/1500... Est. remaining: 4m 43sRunning iteration 571/1500... Est. remaining: 4m 40sRunning iteration 581/1500... Est. remaining: 4m 37sRunning iteration 591/1500... Est. remaining: 4m 34sRunning iteration 601/1500... Est. remaining: 4m 31sbest_combination: {'lookbacks': [156, 159, 188], 'score': np.float64(0.6480614034099423), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 27sRunning iteration 621/1500... Est. remaining: 4m 24sRunning iteration 631/1500... Est. remaining: 4m 21sRunning iteration 641/1500... Est. remaining: 4m 18sRunning iteration 651/1500... Est. remaining: 4m 15sRunning iteration 661/1500... Est. remaining: 4m 12sRunning iteration 671/1500... Est. remaining: 4m 8sRunning iteration 681/1500... Est. remaining: 4m 5sRunning iteration 691/1500... Est. remaining: 4m 2sRunning iteration 701/1500... Est. remaining: 3m 59sbest_combination: {'lookbacks': [156, 159, 188], 'score': np.float64(0.6480614034099423), 'visits': 1}
Running iteration 711/1500... Est. remaining: 3m 56sRunning iteration 721/1500... Est. remaining: 3m 53sRunning iteration 731/1500... Est. remaining: 3m 50sRunning iteration 741/1500... Est. remaining: 3m 47sRunning iteration 751/1500... Est. remaining: 3m 44sRunning iteration 761/1500... Est. remaining: 3m 41sRunning iteration 771/1500... Est. remaining: 3m 38sRunning iteration 781/1500... Est. remaining: 3m 35sRunning iteration 791/1500... Est. remaining: 3m 32sRunning iteration 801/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [156, 159, 188], 'score': np.float64(0.6480614034099423), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 26sRunning iteration 821/1500... Est. remaining: 3m 23sRunning iteration 831/1500... Est. remaining: 3m 20sRunning iteration 841/1500... Est. remaining: 3m 17sRunning iteration 851/1500... Est. remaining: 3m 14sRunning iteration 861/1500... Est. remaining: 3m 11sRunning iteration 871/1500... Est. remaining: 3m 8sRunning iteration 881/1500... Est. remaining: 3m 5sRunning iteration 891/1500... Est. remaining: 3m 2sRunning iteration 901/1500... Est. remaining: 2m 59sbest_combination: {'lookbacks': [156, 159, 188], 'score': np.float64(0.6480614034099423), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,825,068,139
Annual Return: 47.34%
Sharpe Ratio: 1.55780
Sortino Ratio: 1.520
Max Drawdown: -55.0%
Avg Drawdown: -11.3%
Normalized Score: 0.658
Lookback periods: [146, 156, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 2m 56sRunning iteration 921/1500... Est. remaining: 2m 53sRunning iteration 931/1500... Est. remaining: 2m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,759,019,060
Annual Return: 48.41%
Sharpe Ratio: 1.59901
Sortino Ratio: 1.567
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.748
Lookback periods: [140, 147, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 2m 48sRunning iteration 951/1500... Est. remaining: 2m 45sRunning iteration 961/1500... Est. remaining: 2m 42sRunning iteration 971/1500... Est. remaining: 2m 39sRunning iteration 981/1500... Est. remaining: 2m 36sRunning iteration 991/1500... Est. remaining: 2m 33sRunning iteration 1001/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [140, 147, 158], 'score': np.float64(0.7481896617222453), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 27sRunning iteration 1021/1500... Est. remaining: 2m 24sRunning iteration 1031/1500... Est. remaining: 2m 21sRunning iteration 1041/1500... Est. remaining: 2m 18sRunning iteration 1051/1500... Est. remaining: 2m 15sRunning iteration 1061/1500... Est. remaining: 2m 12sRunning iteration 1071/1500... Est. remaining: 2m 9sRunning iteration 1081/1500... Est. remaining: 2m 6sRunning iteration 1091/1500... Est. remaining: 2m 3sRunning iteration 1101/1500... Est. remaining: 2m 0sbest_combination: {'lookbacks': [140, 147, 158], 'score': np.float64(0.7481896617222453), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 57sRunning iteration 1121/1500... Est. remaining: 1m 54sRunning iteration 1131/1500... Est. remaining: 1m 51sRunning iteration 1141/1500... Est. remaining: 1m 48sRunning iteration 1151/1500... Est. remaining: 1m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,935,739,260
Annual Return: 48.95%
Sharpe Ratio: 1.60647
Sortino Ratio: 1.561
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.835
Lookback periods: [138, 156, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1161/1500... Est. remaining: 1m 42sRunning iteration 1171/1500... Est. remaining: 1m 39sRunning iteration 1181/1500... Est. remaining: 1m 36sRunning iteration 1191/1500... Est. remaining: 1m 33sRunning iteration 1201/1500... Est. remaining: 1m 30sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.8350184360435625), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 27sRunning iteration 1221/1500... Est. remaining: 1m 24sRunning iteration 1231/1500... Est. remaining: 1m 21sRunning iteration 1241/1500... Est. remaining: 1m 18sRunning iteration 1251/1500... Est. remaining: 1m 15sRunning iteration 1261/1500... Est. remaining: 1m 12sRunning iteration 1271/1500... Est. remaining: 1m 9sRunning iteration 1281/1500... Est. remaining: 1m 6sRunning iteration 1291/1500... Est. remaining: 1m 3sRunning iteration 1301/1500... Est. remaining: 1m 0sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.8350184360435625), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 57sRunning iteration 1321/1500... Est. remaining: 0m 54sRunning iteration 1331/1500... Est. remaining: 0m 51sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.8350184360435625), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 26sRunning iteration 1421/1500... Est. remaining: 0m 23sRunning iteration 1431/1500... Est. remaining: 0m 20sRunning iteration 1441/1500... Est. remaining: 0m 17sRunning iteration 1451/1500... Est. remaining: 0m 14sRunning iteration 1461/1500... Est. remaining: 0m 11sRunning iteration 1471/1500... Est. remaining: 0m 8sRunning iteration 1481/1500... Est. remaining: 0m 5sRunning iteration 1491/1500... Est. remaining: 0m 2s
Monte Carlo simulation completed in 7.5 minutes
Best normalized score: 0.84
best_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.8350184360435625), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [138, 156, 171] (score: 0.8350)

Monte Carlo simulation completed in 7.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [138, 156, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 113 selections (27.2%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,935,739,259.54
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Mon Aug 25 15:50:47 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $275,731,930
Annual Return: 34.31%
Sharpe Ratio: 1.21623
Sortino Ratio: 1.118
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: -0.876
Lookback periods: [62, 79, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,048,487,031
Annual Return: 39.59%
Sharpe Ratio: 1.34717
Sortino Ratio: 1.273
Max Drawdown: -56.8%
Avg Drawdown: -13.3%
Normalized Score: -0.582
Lookback periods: [79, 154, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $557,190,946
Annual Return: 37.07%
Sharpe Ratio: 1.29906
Sortino Ratio: 1.222
Max Drawdown: -52.3%
Avg Drawdown: -12.3%
Normalized Score: -0.562
Lookback periods: [67, 92, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $528,270,148
Annual Return: 36.86%
Sharpe Ratio: 1.28972
Sortino Ratio: 1.198
Max Drawdown: -52.3%
Avg Drawdown: -11.3%
Normalized Score: -0.506
Lookback periods: [83, 112, 137] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,024,916,420
Annual Return: 46.05%
Sharpe Ratio: 1.50006
Sortino Ratio: 1.466
Max Drawdown: -60.4%
Avg Drawdown: -12.3%
Normalized Score: 0.112
Lookback periods: [149, 181, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 22m 20sRunning iteration 21/1500... Est. remaining: 14m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $891,771,848
Annual Return: 38.94%
Sharpe Ratio: 1.39919
Sortino Ratio: 1.298
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.601
Lookback periods: [50, 68, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 12m 58sRunning iteration 41/1500... Est. remaining: 11m 32sRunning iteration 51/1500... Est. remaining: 10m 38sRunning iteration 61/1500... Est. remaining: 10m 0sRunning iteration 71/1500... Est. remaining: 9m 34sRunning iteration 81/1500... Est. remaining: 9m 13sRunning iteration 91/1500... Est. remaining: 8m 56sRunning iteration 101/1500... Est. remaining: 8m 40sbest_combination: {'lookbacks': [50, 68, 99], 'score': np.float64(0.6006417526256094), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 28sRunning iteration 121/1500... Est. remaining: 8m 17sRunning iteration 131/1500... Est. remaining: 8m 8sRunning iteration 141/1500... Est. remaining: 7m 59sRunning iteration 151/1500... Est. remaining: 7m 51sRunning iteration 161/1500... Est. remaining: 7m 44sRunning iteration 171/1500... Est. remaining: 7m 38sRunning iteration 181/1500... Est. remaining: 7m 31sRunning iteration 191/1500... Est. remaining: 7m 25sRunning iteration 201/1500... Est. remaining: 7m 19sbest_combination: {'lookbacks': [50, 68, 99], 'score': np.float64(0.6006417526256094), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 14sRunning iteration 221/1500... Est. remaining: 7m 8sRunning iteration 231/1500... Est. remaining: 7m 3sRunning iteration 241/1500... Est. remaining: 6m 59sRunning iteration 251/1500... Est. remaining: 6m 54sRunning iteration 261/1500... Est. remaining: 6m 50sRunning iteration 271/1500... Est. remaining: 6m 45sRunning iteration 281/1500... Est. remaining: 6m 40sRunning iteration 291/1500... Est. remaining: 6m 36sRunning iteration 301/1500... Est. remaining: 6m 32sbest_combination: {'lookbacks': [50, 68, 99], 'score': np.float64(0.6006417526256094), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 27sRunning iteration 321/1500... Est. remaining: 6m 23sRunning iteration 331/1500... Est. remaining: 6m 19sRunning iteration 341/1500... Est. remaining: 6m 15sRunning iteration 351/1500... Est. remaining: 6m 11sRunning iteration 361/1500... Est. remaining: 6m 7sRunning iteration 371/1500... Est. remaining: 6m 3sRunning iteration 381/1500... Est. remaining: 5m 59sRunning iteration 391/1500... Est. remaining: 5m 56sRunning iteration 401/1500... Est. remaining: 5m 52sbest_combination: {'lookbacks': [50, 68, 99], 'score': np.float64(0.6006417526256094), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 48sRunning iteration 421/1500... Est. remaining: 5m 45sRunning iteration 431/1500... Est. remaining: 5m 42sRunning iteration 441/1500... Est. remaining: 5m 38sRunning iteration 451/1500... Est. remaining: 5m 34sRunning iteration 461/1500... Est. remaining: 5m 31sRunning iteration 471/1500... Est. remaining: 5m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,075,572,529
Annual Return: 39.69%
Sharpe Ratio: 1.40794
Sortino Ratio: 1.332
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.697
Lookback periods: [50, 63, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 5m 25sRunning iteration 491/1500... Est. remaining: 5m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,663,560,526
Annual Return: 41.46%
Sharpe Ratio: 1.51130
Sortino Ratio: 1.422
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.119
Lookback periods: [50, 62, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 5m 20sbest_combination: {'lookbacks': [50, 62, 95], 'score': np.float64(1.1188390939451476), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 16sRunning iteration 521/1500... Est. remaining: 5m 12sRunning iteration 531/1500... Est. remaining: 5m 9sRunning iteration 541/1500... Est. remaining: 5m 5sRunning iteration 551/1500... Est. remaining: 5m 2sRunning iteration 561/1500... Est. remaining: 4m 59sRunning iteration 571/1500... Est. remaining: 4m 55sRunning iteration 581/1500... Est. remaining: 4m 52sRunning iteration 591/1500... Est. remaining: 4m 48sRunning iteration 601/1500... Est. remaining: 4m 45sbest_combination: {'lookbacks': [50, 62, 95], 'score': np.float64(1.1188390939451476), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,834,746,587
Annual Return: 41.86%
Sharpe Ratio: 1.52897
Sortino Ratio: 1.431
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.177
Lookback periods: [50, 56, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,687,226,028
Annual Return: 43.43%
Sharpe Ratio: 1.56570
Sortino Ratio: 1.467
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.323
Lookback periods: [51, 52, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/1500... Est. remaining: 4m 44sRunning iteration 621/1500... Est. remaining: 4m 40sRunning iteration 631/1500... Est. remaining: 4m 37sRunning iteration 641/1500... Est. remaining: 4m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,687,966,149
Annual Return: 43.43%
Sharpe Ratio: 1.57296
Sortino Ratio: 1.472
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.354
Lookback periods: [50, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 4m 31sRunning iteration 661/1500... Est. remaining: 4m 28sRunning iteration 671/1500... Est. remaining: 4m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.735
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 4m 22sRunning iteration 691/1500... Est. remaining: 4m 18sRunning iteration 701/1500... Est. remaining: 4m 15sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7353171038366468), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 11sRunning iteration 721/1500... Est. remaining: 4m 8sRunning iteration 731/1500... Est. remaining: 4m 5sRunning iteration 741/1500... Est. remaining: 4m 1sRunning iteration 751/1500... Est. remaining: 3m 58sRunning iteration 761/1500... Est. remaining: 3m 55sRunning iteration 771/1500... Est. remaining: 3m 51sRunning iteration 781/1500... Est. remaining: 3m 48sRunning iteration 791/1500... Est. remaining: 3m 45sRunning iteration 801/1500... Est. remaining: 3m 41sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7353171038366468), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 38sRunning iteration 821/1500... Est. remaining: 3m 35sRunning iteration 831/1500... Est. remaining: 3m 31sRunning iteration 841/1500... Est. remaining: 3m 28sRunning iteration 851/1500... Est. remaining: 3m 25sRunning iteration 861/1500... Est. remaining: 3m 22sRunning iteration 871/1500... Est. remaining: 3m 18sRunning iteration 881/1500... Est. remaining: 3m 15sRunning iteration 891/1500... Est. remaining: 3m 12sRunning iteration 901/1500... Est. remaining: 3m 9sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7353171038366468), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 5sRunning iteration 921/1500... Est. remaining: 3m 2sRunning iteration 931/1500... Est. remaining: 2m 59sRunning iteration 941/1500... Est. remaining: 2m 56sRunning iteration 951/1500... Est. remaining: 2m 52sRunning iteration 961/1500... Est. remaining: 2m 49sRunning iteration 971/1500... Est. remaining: 2m 46sRunning iteration 981/1500... Est. remaining: 2m 43sRunning iteration 991/1500... Est. remaining: 2m 40sRunning iteration 1001/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7353171038366468), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 33sRunning iteration 1021/1500... Est. remaining: 2m 30sRunning iteration 1031/1500... Est. remaining: 2m 27sRunning iteration 1041/1500... Est. remaining: 2m 24sRunning iteration 1051/1500... Est. remaining: 2m 20sRunning iteration 1061/1500... Est. remaining: 2m 17sRunning iteration 1071/1500... Est. remaining: 2m 14sRunning iteration 1081/1500... Est. remaining: 2m 11sRunning iteration 1091/1500... Est. remaining: 2m 8sRunning iteration 1101/1500... Est. remaining: 2m 5sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7353171038366468), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 58sRunning iteration 1131/1500... Est. remaining: 1m 55sRunning iteration 1141/1500... Est. remaining: 1m 52sRunning iteration 1151/1500... Est. remaining: 1m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.784
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1161/1500... Est. remaining: 1m 46sRunning iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.783896089590371), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 18sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.783896089590371), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 53sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.783896089590371), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.78
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.783896089590371), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 1.7839)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Mon Aug 25 15:58:38 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $376,843,685
Annual Return: 35.53%
Sharpe Ratio: 1.22682
Sortino Ratio: 1.146
Max Drawdown: -71.5%
Avg Drawdown: -14.9%
Normalized Score: -2.393
Lookback periods: [63, 119, 122] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $260,299,941
Annual Return: 34.09%
Sharpe Ratio: 1.18169
Sortino Ratio: 1.098
Max Drawdown: -72.6%
Avg Drawdown: -13.2%
Normalized Score: -2.301
Lookback periods: [57, 165, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,209,112,662
Annual Return: 42.62%
Sharpe Ratio: 1.39542
Sortino Ratio: 1.351
Max Drawdown: -68.2%
Avg Drawdown: -12.8%
Normalized Score: -0.998
Lookback periods: [111, 186, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $764,053,336
Annual Return: 38.32%
Sharpe Ratio: 1.31560
Sortino Ratio: 1.232
Max Drawdown: -55.0%
Avg Drawdown: -12.1%
Normalized Score: -0.903
Lookback periods: [50, 135, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 19m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,997,993,813
Annual Return: 43.89%
Sharpe Ratio: 1.43989
Sortino Ratio: 1.396
Max Drawdown: -62.2%
Avg Drawdown: -12.5%
Normalized Score: -0.559
Lookback periods: [151, 169, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,524,911,299
Annual Return: 45.61%
Sharpe Ratio: 1.48184
Sortino Ratio: 1.448
Max Drawdown: -62.5%
Avg Drawdown: -12.8%
Normalized Score: -0.413
Lookback periods: [150, 153, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 15m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $494,884,723
Annual Return: 36.60%
Sharpe Ratio: 1.30194
Sortino Ratio: 1.208
Max Drawdown: -36.5%
Avg Drawdown: -10.9%
Normalized Score: -0.179
Lookback periods: [52, 61, 78] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 13m 30sRunning iteration 41/1500... Est. remaining: 11m 58sRunning iteration 51/1500... Est. remaining: 10m 58sRunning iteration 61/1500... Est. remaining: 10m 18sRunning iteration 71/1500... Est. remaining: 9m 50sRunning iteration 81/1500... Est. remaining: 9m 26sRunning iteration 91/1500... Est. remaining: 9m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,950,519,425
Annual Return: 45.98%
Sharpe Ratio: 1.49396
Sortino Ratio: 1.464
Max Drawdown: -60.8%
Avg Drawdown: -12.0%
Normalized Score: -0.147
Lookback periods: [148, 171, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 9m 2sbest_combination: {'lookbacks': [148, 171, 199], 'score': np.float64(-0.14651544245346906), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,585,196,128
Annual Return: 43.27%
Sharpe Ratio: 1.53926
Sortino Ratio: 1.441
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.180
Lookback periods: [50, 54, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 8m 44sRunning iteration 131/1500... Est. remaining: 8m 32sRunning iteration 141/1500... Est. remaining: 8m 23sRunning iteration 151/1500... Est. remaining: 8m 13sRunning iteration 161/1500... Est. remaining: 8m 4sRunning iteration 171/1500... Est. remaining: 7m 56sRunning iteration 181/1500... Est. remaining: 7m 49sRunning iteration 191/1500... Est. remaining: 7m 43sRunning iteration 201/1500... Est. remaining: 7m 36sbest_combination: {'lookbacks': [50, 54, 87], 'score': np.float64(1.180285059854876), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 30sRunning iteration 221/1500... Est. remaining: 7m 24sRunning iteration 231/1500... Est. remaining: 7m 19sRunning iteration 241/1500... Est. remaining: 7m 13sRunning iteration 251/1500... Est. remaining: 7m 8sRunning iteration 261/1500... Est. remaining: 7m 3sRunning iteration 271/1500... Est. remaining: 6m 58sRunning iteration 281/1500... Est. remaining: 6m 53sRunning iteration 291/1500... Est. remaining: 6m 48sRunning iteration 301/1500... Est. remaining: 6m 43sbest_combination: {'lookbacks': [50, 54, 87], 'score': np.float64(1.180285059854876), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 38sRunning iteration 321/1500... Est. remaining: 6m 34sRunning iteration 331/1500... Est. remaining: 6m 30sRunning iteration 341/1500... Est. remaining: 6m 26sRunning iteration 351/1500... Est. remaining: 6m 22sRunning iteration 361/1500... Est. remaining: 6m 18sRunning iteration 371/1500... Est. remaining: 6m 14sRunning iteration 381/1500... Est. remaining: 6m 10sRunning iteration 391/1500... Est. remaining: 6m 6sRunning iteration 401/1500... Est. remaining: 6m 2sbest_combination: {'lookbacks': [50, 54, 87], 'score': np.float64(1.180285059854876), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 58sRunning iteration 421/1500... Est. remaining: 5m 54sRunning iteration 431/1500... Est. remaining: 5m 50sRunning iteration 441/1500... Est. remaining: 5m 46sRunning iteration 451/1500... Est. remaining: 5m 42sRunning iteration 461/1500... Est. remaining: 5m 38sRunning iteration 471/1500... Est. remaining: 5m 34sRunning iteration 481/1500... Est. remaining: 5m 31sRunning iteration 491/1500... Est. remaining: 5m 27sRunning iteration 501/1500... Est. remaining: 5m 23sbest_combination: {'lookbacks': [50, 54, 87], 'score': np.float64(1.180285059854876), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,360,051,660
Annual Return: 44.36%
Sharpe Ratio: 1.59348
Sortino Ratio: 1.498
Max Drawdown: -37.8%
Avg Drawdown: -9.4%
Normalized Score: 1.250
Lookback periods: [51, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 5m 21sRunning iteration 521/1500... Est. remaining: 5m 17sRunning iteration 531/1500... Est. remaining: 5m 14sRunning iteration 541/1500... Est. remaining: 5m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,179,851,876
Annual Return: 42.57%
Sharpe Ratio: 1.50350
Sortino Ratio: 1.422
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.316
Lookback periods: [50, 50, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 5m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,656,329,777
Annual Return: 43.39%
Sharpe Ratio: 1.58157
Sortino Ratio: 1.482
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.437
Lookback periods: [50, 52, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,622,827,200
Annual Return: 44.68%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.652
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 5m 7sRunning iteration 571/1500... Est. remaining: 5m 3sRunning iteration 581/1500... Est. remaining: 5m 0sRunning iteration 591/1500... Est. remaining: 4m 56sRunning iteration 601/1500... Est. remaining: 4m 53sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.6518327546524039), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 49sRunning iteration 621/1500... Est. remaining: 4m 46sRunning iteration 631/1500... Est. remaining: 4m 42sRunning iteration 641/1500... Est. remaining: 4m 38sRunning iteration 651/1500... Est. remaining: 4m 35sRunning iteration 661/1500... Est. remaining: 4m 31sRunning iteration 671/1500... Est. remaining: 4m 28sRunning iteration 681/1500... Est. remaining: 4m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.765
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 4m 22sRunning iteration 701/1500... Est. remaining: 4m 18sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.764791948910466), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 15sRunning iteration 721/1500... Est. remaining: 4m 11sRunning iteration 731/1500... Est. remaining: 4m 8sRunning iteration 741/1500... Est. remaining: 4m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.894
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 4m 2sRunning iteration 761/1500... Est. remaining: 3m 58sRunning iteration 771/1500... Est. remaining: 3m 55sRunning iteration 781/1500... Est. remaining: 3m 52sRunning iteration 791/1500... Est. remaining: 3m 48sRunning iteration 801/1500... Est. remaining: 3m 45sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8943661435312769), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 42sRunning iteration 821/1500... Est. remaining: 3m 38sRunning iteration 831/1500... Est. remaining: 3m 35sRunning iteration 841/1500... Est. remaining: 3m 31sRunning iteration 851/1500... Est. remaining: 3m 28sRunning iteration 861/1500... Est. remaining: 3m 25sRunning iteration 871/1500... Est. remaining: 3m 21sRunning iteration 881/1500... Est. remaining: 3m 18sRunning iteration 891/1500... Est. remaining: 3m 15sRunning iteration 901/1500... Est. remaining: 3m 11sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8943661435312769), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 8sRunning iteration 921/1500... Est. remaining: 3m 5sRunning iteration 931/1500... Est. remaining: 3m 2sRunning iteration 941/1500... Est. remaining: 2m 58sRunning iteration 951/1500... Est. remaining: 2m 55sRunning iteration 961/1500... Est. remaining: 2m 52sRunning iteration 971/1500... Est. remaining: 2m 48sRunning iteration 981/1500... Est. remaining: 2m 45sRunning iteration 991/1500... Est. remaining: 2m 42sRunning iteration 1001/1500... Est. remaining: 2m 39sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8943661435312769), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 35sRunning iteration 1021/1500... Est. remaining: 2m 32sRunning iteration 1031/1500... Est. remaining: 2m 29sRunning iteration 1041/1500... Est. remaining: 2m 26sRunning iteration 1051/1500... Est. remaining: 2m 22sRunning iteration 1061/1500... Est. remaining: 2m 19sRunning iteration 1071/1500... Est. remaining: 2m 16sRunning iteration 1081/1500... Est. remaining: 2m 13sRunning iteration 1091/1500... Est. remaining: 2m 9sRunning iteration 1101/1500... Est. remaining: 2m 6sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8943661435312769), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 3sRunning iteration 1121/1500... Est. remaining: 2m 0sRunning iteration 1131/1500... Est. remaining: 1m 57sRunning iteration 1141/1500... Est. remaining: 1m 53sRunning iteration 1151/1500... Est. remaining: 1m 50sRunning iteration 1161/1500... Est. remaining: 1m 47sRunning iteration 1171/1500... Est. remaining: 1m 44sRunning iteration 1181/1500... Est. remaining: 1m 41sRunning iteration 1191/1500... Est. remaining: 1m 37sRunning iteration 1201/1500... Est. remaining: 1m 34sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8943661435312769), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 31sRunning iteration 1221/1500... Est. remaining: 1m 28sRunning iteration 1231/1500... Est. remaining: 1m 25sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 18sRunning iteration 1261/1500... Est. remaining: 1m 15sRunning iteration 1271/1500... Est. remaining: 1m 12sRunning iteration 1281/1500... Est. remaining: 1m 9sRunning iteration 1291/1500... Est. remaining: 1m 6sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8943661435312769), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 53sRunning iteration 1341/1500... Est. remaining: 0m 50sRunning iteration 1351/1500... Est. remaining: 0m 47sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8943661435312769), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 25sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 1.89
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8943661435312769), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.8944)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Mon Aug 25 16:06:32 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $462,378,473
Annual Return: 36.33%
Sharpe Ratio: 1.27732
Sortino Ratio: 1.174
Max Drawdown: -68.4%
Avg Drawdown: -14.2%
Normalized Score: -1.562
Lookback periods: [56, 122, 125] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $720,402,491
Annual Return: 38.09%
Sharpe Ratio: 1.31385
Sortino Ratio: 1.232
Max Drawdown: -55.0%
Avg Drawdown: -12.9%
Normalized Score: -0.655
Lookback periods: [79, 135, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 16m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,834,655,174
Annual Return: 45.88%
Sharpe Ratio: 1.51218
Sortino Ratio: 1.472
Max Drawdown: -64.7%
Avg Drawdown: -12.3%
Normalized Score: 0.113
Lookback periods: [127, 127, 129] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 12m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,186,532,536
Annual Return: 47.56%
Sharpe Ratio: 1.54931
Sortino Ratio: 1.502
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.629
Lookback periods: [179, 186, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 11m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,180,411,378
Annual Return: 47.56%
Sharpe Ratio: 1.55726
Sortino Ratio: 1.515
Max Drawdown: -58.2%
Avg Drawdown: -11.2%
Normalized Score: 0.707
Lookback periods: [146, 156, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 11m 14sRunning iteration 51/1500... Est. remaining: 10m 26sRunning iteration 61/1500... Est. remaining: 9m 53sRunning iteration 71/1500... Est. remaining: 9m 26sRunning iteration 81/1500... Est. remaining: 9m 5sRunning iteration 91/1500... Est. remaining: 8m 48sRunning iteration 101/1500... Est. remaining: 8m 35sbest_combination: {'lookbacks': [146, 156, 157], 'score': np.float64(0.7066651913828494), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 23sRunning iteration 121/1500... Est. remaining: 8m 13sRunning iteration 131/1500... Est. remaining: 8m 4sRunning iteration 141/1500... Est. remaining: 7m 55sRunning iteration 151/1500... Est. remaining: 7m 48sRunning iteration 161/1500... Est. remaining: 7m 41sRunning iteration 171/1500... Est. remaining: 7m 35sRunning iteration 181/1500... Est. remaining: 7m 28sRunning iteration 191/1500... Est. remaining: 7m 23sRunning iteration 201/1500... Est. remaining: 7m 17sbest_combination: {'lookbacks': [146, 156, 157], 'score': np.float64(0.7066651913828494), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 12sRunning iteration 221/1500... Est. remaining: 7m 7sRunning iteration 231/1500... Est. remaining: 7m 2sRunning iteration 241/1500... Est. remaining: 6m 58sRunning iteration 251/1500... Est. remaining: 6m 53sRunning iteration 261/1500... Est. remaining: 6m 49sRunning iteration 271/1500... Est. remaining: 6m 44sRunning iteration 281/1500... Est. remaining: 6m 40sRunning iteration 291/1500... Est. remaining: 6m 36sRunning iteration 301/1500... Est. remaining: 6m 31sbest_combination: {'lookbacks': [146, 156, 157], 'score': np.float64(0.7066651913828494), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 27sRunning iteration 321/1500... Est. remaining: 6m 23sRunning iteration 331/1500... Est. remaining: 6m 19sRunning iteration 341/1500... Est. remaining: 6m 15sRunning iteration 351/1500... Est. remaining: 6m 11sRunning iteration 361/1500... Est. remaining: 6m 8sRunning iteration 371/1500... Est. remaining: 6m 4sRunning iteration 381/1500... Est. remaining: 6m 0sRunning iteration 391/1500... Est. remaining: 5m 56sRunning iteration 401/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [146, 156, 157], 'score': np.float64(0.7066651913828494), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 49sRunning iteration 421/1500... Est. remaining: 5m 45sRunning iteration 431/1500... Est. remaining: 5m 42sRunning iteration 441/1500... Est. remaining: 5m 38sRunning iteration 451/1500... Est. remaining: 5m 35sRunning iteration 461/1500... Est. remaining: 5m 31sRunning iteration 471/1500... Est. remaining: 5m 28sRunning iteration 481/1500... Est. remaining: 5m 24sRunning iteration 491/1500... Est. remaining: 5m 21sRunning iteration 501/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [146, 156, 157], 'score': np.float64(0.7066651913828494), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 14sRunning iteration 521/1500... Est. remaining: 5m 11sRunning iteration 531/1500... Est. remaining: 5m 7sRunning iteration 541/1500... Est. remaining: 5m 4sRunning iteration 551/1500... Est. remaining: 5m 0sRunning iteration 561/1500... Est. remaining: 4m 57sRunning iteration 571/1500... Est. remaining: 4m 54sRunning iteration 581/1500... Est. remaining: 4m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,805,107,095
Annual Return: 47.91%
Sharpe Ratio: 1.58158
Sortino Ratio: 1.538
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.767
Lookback periods: [136, 159, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 4m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,032,509,542
Annual Return: 48.54%
Sharpe Ratio: 1.57845
Sortino Ratio: 1.546
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.815
Lookback periods: [152, 154, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/1500... Est. remaining: 4m 46sbest_combination: {'lookbacks': [152, 154, 159], 'score': np.float64(0.8153813871129193), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 43sRunning iteration 621/1500... Est. remaining: 4m 39sRunning iteration 631/1500... Est. remaining: 4m 36sRunning iteration 641/1500... Est. remaining: 4m 33sRunning iteration 651/1500... Est. remaining: 4m 29sRunning iteration 661/1500... Est. remaining: 4m 26sRunning iteration 671/1500... Est. remaining: 4m 23sRunning iteration 681/1500... Est. remaining: 4m 20sRunning iteration 691/1500... Est. remaining: 4m 16sRunning iteration 701/1500... Est. remaining: 4m 13sbest_combination: {'lookbacks': [152, 154, 159], 'score': np.float64(0.8153813871129193), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 10sRunning iteration 721/1500... Est. remaining: 4m 6sRunning iteration 731/1500... Est. remaining: 4m 3sRunning iteration 741/1500... Est. remaining: 4m 0sRunning iteration 751/1500... Est. remaining: 3m 56sRunning iteration 761/1500... Est. remaining: 3m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,260,489,790
Annual Return: 48.65%
Sharpe Ratio: 1.60145
Sortino Ratio: 1.558
Max Drawdown: -57.2%
Avg Drawdown: -10.7%
Normalized Score: 0.985
Lookback periods: [138, 156, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 771/1500... Est. remaining: 3m 51sRunning iteration 781/1500... Est. remaining: 3m 47sRunning iteration 791/1500... Est. remaining: 3m 44sRunning iteration 801/1500... Est. remaining: 3m 41sbest_combination: {'lookbacks': [138, 156, 158], 'score': np.float64(0.9853611029340315), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 38sRunning iteration 821/1500... Est. remaining: 3m 34sRunning iteration 831/1500... Est. remaining: 3m 31sRunning iteration 841/1500... Est. remaining: 3m 28sRunning iteration 851/1500... Est. remaining: 3m 25sRunning iteration 861/1500... Est. remaining: 3m 21sRunning iteration 871/1500... Est. remaining: 3m 18sRunning iteration 881/1500... Est. remaining: 3m 15sRunning iteration 891/1500... Est. remaining: 3m 12sRunning iteration 901/1500... Est. remaining: 3m 9sbest_combination: {'lookbacks': [138, 156, 158], 'score': np.float64(0.9853611029340315), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 5sRunning iteration 921/1500... Est. remaining: 3m 2sRunning iteration 931/1500... Est. remaining: 2m 59sRunning iteration 941/1500... Est. remaining: 2m 56sRunning iteration 951/1500... Est. remaining: 2m 53sRunning iteration 961/1500... Est. remaining: 2m 49sRunning iteration 971/1500... Est. remaining: 2m 46sRunning iteration 981/1500... Est. remaining: 2m 43sRunning iteration 991/1500... Est. remaining: 2m 40sRunning iteration 1001/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [138, 156, 158], 'score': np.float64(0.9853611029340315), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 34sRunning iteration 1021/1500... Est. remaining: 2m 30sRunning iteration 1031/1500... Est. remaining: 2m 27sRunning iteration 1041/1500... Est. remaining: 2m 24sRunning iteration 1051/1500... Est. remaining: 2m 21sRunning iteration 1061/1500... Est. remaining: 2m 18sRunning iteration 1071/1500... Est. remaining: 2m 14sRunning iteration 1081/1500... Est. remaining: 2m 11sRunning iteration 1091/1500... Est. remaining: 2m 8sRunning iteration 1101/1500... Est. remaining: 2m 5sbest_combination: {'lookbacks': [138, 156, 158], 'score': np.float64(0.9853611029340315), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 2sRunning iteration 1121/1500... Est. remaining: 1m 59sRunning iteration 1131/1500... Est. remaining: 1m 55sRunning iteration 1141/1500... Est. remaining: 1m 52sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 46sRunning iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 40sRunning iteration 1191/1500... Est. remaining: 1m 37sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [138, 156, 158], 'score': np.float64(0.9853611029340315), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 18sRunning iteration 1261/1500... Est. remaining: 1m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,275,652,430
Annual Return: 42.75%
Sharpe Ratio: 1.51314
Sortino Ratio: 1.406
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 1.287
Lookback periods: [51, 52, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,779,940,917
Annual Return: 43.57%
Sharpe Ratio: 1.56839
Sortino Ratio: 1.467
Max Drawdown: -37.2%
Avg Drawdown: -9.3%
Normalized Score: 1.428
Lookback periods: [50, 52, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1271/1500... Est. remaining: 1m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.736
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1281/1500... Est. remaining: 1m 9sRunning iteration 1291/1500... Est. remaining: 1m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.894
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8939590729007825), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 53sRunning iteration 1341/1500... Est. remaining: 0m 50sRunning iteration 1351/1500... Est. remaining: 0m 47sRunning iteration 1361/1500... Est. remaining: 0m 44sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8939590729007825), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 25sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 1.89
best_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8939590729007825), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 50, 98] (score: 1.8940)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 50, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 104 selections (25.0%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 53 selections (12.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,748,142,591.11
Average Annualized Gain: 44.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Mon Aug 25 16:14:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $524,948,119
Annual Return: 36.83%
Sharpe Ratio: 1.27522
Sortino Ratio: 1.191
Max Drawdown: -65.7%
Avg Drawdown: -13.6%
Normalized Score: -1.487
Lookback periods: [67, 68, 118] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,744,802,208
Annual Return: 45.81%
Sharpe Ratio: 1.51369
Sortino Ratio: 1.477
Max Drawdown: -68.2%
Avg Drawdown: -12.8%
Normalized Score: -0.279
Lookback periods: [106, 176, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,413,399,101
Annual Return: 46.36%
Sharpe Ratio: 1.50497
Sortino Ratio: 1.460
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: 0.154
Lookback periods: [179, 184, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 22m 6sRunning iteration 21/1500... Est. remaining: 14m 45sRunning iteration 31/1500... Est. remaining: 12m 14sRunning iteration 41/1500... Est. remaining: 10m 59sRunning iteration 51/1500... Est. remaining: 10m 12sRunning iteration 61/1500... Est. remaining: 9m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,288,076,216
Annual Return: 45.38%
Sharpe Ratio: 1.52622
Sortino Ratio: 1.479
Max Drawdown: -57.8%
Avg Drawdown: -11.9%
Normalized Score: 0.204
Lookback periods: [117, 131, 139] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 9m 31sRunning iteration 81/1500... Est. remaining: 9m 11sRunning iteration 91/1500... Est. remaining: 8m 55sRunning iteration 101/1500... Est. remaining: 8m 41sbest_combination: {'lookbacks': [117, 131, 139], 'score': np.float64(0.20353741950448043), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,976,029,405
Annual Return: 47.44%
Sharpe Ratio: 1.54403
Sortino Ratio: 1.509
Max Drawdown: -61.4%
Avg Drawdown: -11.7%
Normalized Score: 0.289
Lookback periods: [155, 172, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 8m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,738,354,846
Annual Return: 43.51%
Sharpe Ratio: 1.48936
Sortino Ratio: 1.428
Max Drawdown: -52.3%
Avg Drawdown: -10.7%
Normalized Score: 0.345
Lookback periods: [89, 127, 132] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 8m 35sRunning iteration 131/1500... Est. remaining: 8m 25sRunning iteration 141/1500... Est. remaining: 8m 14sRunning iteration 151/1500... Est. remaining: 8m 5sRunning iteration 161/1500... Est. remaining: 7m 57sRunning iteration 171/1500... Est. remaining: 7m 50sRunning iteration 181/1500... Est. remaining: 7m 42sRunning iteration 191/1500... Est. remaining: 7m 35sRunning iteration 201/1500... Est. remaining: 7m 29sbest_combination: {'lookbacks': [89, 127, 132], 'score': np.float64(0.34497322923736007), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,447,915,787
Annual Return: 47.71%
Sharpe Ratio: 1.54241
Sortino Ratio: 1.506
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.436
Lookback periods: [174, 178, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/1500... Est. remaining: 7m 28sRunning iteration 221/1500... Est. remaining: 7m 22sRunning iteration 231/1500... Est. remaining: 7m 16sRunning iteration 241/1500... Est. remaining: 7m 10sRunning iteration 251/1500... Est. remaining: 7m 5sRunning iteration 261/1500... Est. remaining: 7m 0sRunning iteration 271/1500... Est. remaining: 6m 55sRunning iteration 281/1500... Est. remaining: 6m 50sRunning iteration 291/1500... Est. remaining: 6m 46sRunning iteration 301/1500... Est. remaining: 6m 41sbest_combination: {'lookbacks': [174, 178, 198], 'score': np.float64(0.43581369651880025), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 37sRunning iteration 321/1500... Est. remaining: 6m 33sRunning iteration 331/1500... Est. remaining: 6m 29sRunning iteration 341/1500... Est. remaining: 6m 24sRunning iteration 351/1500... Est. remaining: 6m 20sRunning iteration 361/1500... Est. remaining: 6m 16sRunning iteration 371/1500... Est. remaining: 6m 12sRunning iteration 381/1500... Est. remaining: 6m 8sRunning iteration 391/1500... Est. remaining: 6m 4sRunning iteration 401/1500... Est. remaining: 6m 0sbest_combination: {'lookbacks': [174, 178, 198], 'score': np.float64(0.43581369651880025), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 56sRunning iteration 421/1500... Est. remaining: 5m 52sRunning iteration 431/1500... Est. remaining: 5m 48sRunning iteration 441/1500... Est. remaining: 5m 44sRunning iteration 451/1500... Est. remaining: 5m 40sRunning iteration 461/1500... Est. remaining: 5m 36sRunning iteration 471/1500... Est. remaining: 5m 33sRunning iteration 481/1500... Est. remaining: 5m 29sRunning iteration 491/1500... Est. remaining: 5m 26sRunning iteration 501/1500... Est. remaining: 5m 22sbest_combination: {'lookbacks': [174, 178, 198], 'score': np.float64(0.43581369651880025), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 18sRunning iteration 521/1500... Est. remaining: 5m 15sRunning iteration 531/1500... Est. remaining: 5m 11sRunning iteration 541/1500... Est. remaining: 5m 8sRunning iteration 551/1500... Est. remaining: 5m 4sRunning iteration 561/1500... Est. remaining: 5m 1sRunning iteration 571/1500... Est. remaining: 4m 57sRunning iteration 581/1500... Est. remaining: 4m 54sRunning iteration 591/1500... Est. remaining: 4m 50sRunning iteration 601/1500... Est. remaining: 4m 47sbest_combination: {'lookbacks': [174, 178, 198], 'score': np.float64(0.43581369651880025), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 43sRunning iteration 621/1500... Est. remaining: 4m 40sRunning iteration 631/1500... Est. remaining: 4m 37sRunning iteration 641/1500... Est. remaining: 4m 33sRunning iteration 651/1500... Est. remaining: 4m 30sRunning iteration 661/1500... Est. remaining: 4m 27sRunning iteration 671/1500... Est. remaining: 4m 23sRunning iteration 681/1500... Est. remaining: 4m 20sRunning iteration 691/1500... Est. remaining: 4m 17sRunning iteration 701/1500... Est. remaining: 4m 13sbest_combination: {'lookbacks': [174, 178, 198], 'score': np.float64(0.43581369651880025), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 10sRunning iteration 721/1500... Est. remaining: 4m 7sRunning iteration 731/1500... Est. remaining: 4m 3sRunning iteration 741/1500... Est. remaining: 4m 0sRunning iteration 751/1500... Est. remaining: 3m 57sRunning iteration 761/1500... Est. remaining: 3m 53sRunning iteration 771/1500... Est. remaining: 3m 50sRunning iteration 781/1500... Est. remaining: 3m 47sRunning iteration 791/1500... Est. remaining: 3m 44sRunning iteration 801/1500... Est. remaining: 3m 40sbest_combination: {'lookbacks': [174, 178, 198], 'score': np.float64(0.43581369651880025), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 37sRunning iteration 821/1500... Est. remaining: 3m 35sRunning iteration 831/1500... Est. remaining: 3m 34sRunning iteration 841/1500... Est. remaining: 3m 32sRunning iteration 851/1500... Est. remaining: 3m 30sRunning iteration 861/1500... Est. remaining: 3m 28sRunning iteration 871/1500... Est. remaining: 3m 26sRunning iteration 881/1500... Est. remaining: 3m 24sRunning iteration 891/1500... Est. remaining: 3m 22sRunning iteration 901/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [174, 178, 198], 'score': np.float64(0.43581369651880025), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 18sRunning iteration 921/1500... Est. remaining: 3m 16sRunning iteration 931/1500... Est. remaining: 3m 13sRunning iteration 941/1500... Est. remaining: 3m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,605,351,410
Annual Return: 48.33%
Sharpe Ratio: 1.56199
Sortino Ratio: 1.529
Max Drawdown: -59.5%
Avg Drawdown: -11.7%
Normalized Score: 0.448
Lookback periods: [176, 178, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 3m 9sRunning iteration 961/1500... Est. remaining: 3m 7sRunning iteration 971/1500... Est. remaining: 3m 4sRunning iteration 981/1500... Est. remaining: 3m 1sRunning iteration 991/1500... Est. remaining: 2m 59sRunning iteration 1001/1500... Est. remaining: 2m 56sbest_combination: {'lookbacks': [176, 178, 188], 'score': np.float64(0.44750461617653253), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 53sRunning iteration 1021/1500... Est. remaining: 2m 50sRunning iteration 1031/1500... Est. remaining: 2m 48sRunning iteration 1041/1500... Est. remaining: 2m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,381,067,660
Annual Return: 48.22%
Sharpe Ratio: 1.55549
Sortino Ratio: 1.519
Max Drawdown: -59.6%
Avg Drawdown: -11.4%
Normalized Score: 0.450
Lookback periods: [183, 185, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1051/1500... Est. remaining: 2m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,287,140,337
Annual Return: 48.66%
Sharpe Ratio: 1.57087
Sortino Ratio: 1.533
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.496
Lookback periods: [179, 184, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1061/1500... Est. remaining: 2m 40sRunning iteration 1071/1500... Est. remaining: 2m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,550,707,885
Annual Return: 47.77%
Sharpe Ratio: 1.56904
Sortino Ratio: 1.526
Max Drawdown: -58.1%
Avg Drawdown: -11.3%
Normalized Score: 0.521
Lookback periods: [144, 157, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1081/1500... Est. remaining: 2m 34sRunning iteration 1091/1500... Est. remaining: 2m 31sRunning iteration 1101/1500... Est. remaining: 2m 28sbest_combination: {'lookbacks': [144, 157, 178], 'score': np.float64(0.5210474473114812), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 25sRunning iteration 1121/1500... Est. remaining: 2m 21sRunning iteration 1131/1500... Est. remaining: 2m 18sRunning iteration 1141/1500... Est. remaining: 2m 15sRunning iteration 1151/1500... Est. remaining: 2m 12sRunning iteration 1161/1500... Est. remaining: 2m 8sRunning iteration 1171/1500... Est. remaining: 2m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,776,118,390
Annual Return: 48.88%
Sharpe Ratio: 1.60169
Sortino Ratio: 1.567
Max Drawdown: -59.0%
Avg Drawdown: -10.7%
Normalized Score: 0.736
Lookback periods: [139, 171, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1181/1500... Est. remaining: 2m 2sRunning iteration 1191/1500... Est. remaining: 1m 58sRunning iteration 1201/1500... Est. remaining: 1m 55sbest_combination: {'lookbacks': [139, 171, 178], 'score': np.float64(0.7355571021582511), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 51sRunning iteration 1221/1500... Est. remaining: 1m 47sRunning iteration 1231/1500... Est. remaining: 1m 44sRunning iteration 1241/1500... Est. remaining: 1m 40sRunning iteration 1251/1500... Est. remaining: 1m 37sRunning iteration 1261/1500... Est. remaining: 1m 33sRunning iteration 1271/1500... Est. remaining: 1m 29sRunning iteration 1281/1500... Est. remaining: 1m 26sRunning iteration 1291/1500... Est. remaining: 1m 22sRunning iteration 1301/1500... Est. remaining: 1m 18sbest_combination: {'lookbacks': [139, 171, 178], 'score': np.float64(0.7355571021582511), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 14sRunning iteration 1321/1500... Est. remaining: 1m 11sRunning iteration 1331/1500... Est. remaining: 1m 7sRunning iteration 1341/1500... Est. remaining: 1m 3sRunning iteration 1351/1500... Est. remaining: 0m 59sRunning iteration 1361/1500... Est. remaining: 0m 55sRunning iteration 1371/1500... Est. remaining: 0m 51sRunning iteration 1381/1500... Est. remaining: 0m 47sRunning iteration 1391/1500... Est. remaining: 0m 44sRunning iteration 1401/1500... Est. remaining: 0m 40sbest_combination: {'lookbacks': [139, 171, 178], 'score': np.float64(0.7355571021582511), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 36sRunning iteration 1421/1500... Est. remaining: 0m 32sRunning iteration 1431/1500... Est. remaining: 0m 28sRunning iteration 1441/1500... Est. remaining: 0m 24sRunning iteration 1451/1500... Est. remaining: 0m 20sRunning iteration 1461/1500... Est. remaining: 0m 16sRunning iteration 1471/1500... Est. remaining: 0m 12sRunning iteration 1481/1500... Est. remaining: 0m 8sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 10.2 minutes
Best normalized score: 0.74
best_combination: {'lookbacks': [139, 171, 178], 'score': np.float64(0.7355571021582511), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 171, 178] (score: 0.7356)

Monte Carlo simulation completed in 10.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 171, 178] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 104 selections (25.0%)
3. naz100_pine: 81 selections (19.5%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 43 selections (10.3%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,776,118,389.56
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Mon Aug 25 16:24:46 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $203,997,492
Annual Return: 33.15%
Sharpe Ratio: 1.12745
Sortino Ratio: 1.057
Max Drawdown: -60.0%
Avg Drawdown: -14.7%
Normalized Score: -2.131
Lookback periods: [69, 143, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,412,466,418
Annual Return: 42.99%
Sharpe Ratio: 1.45170
Sortino Ratio: 1.399
Max Drawdown: -60.4%
Avg Drawdown: -11.8%
Normalized Score: -0.400
Lookback periods: [113, 130, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,562,469,511
Annual Return: 41.21%
Sharpe Ratio: 1.40547
Sortino Ratio: 1.334
Max Drawdown: -52.3%
Avg Drawdown: -11.3%
Normalized Score: -0.217
Lookback periods: [81, 129, 132] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,882,352,579
Annual Return: 41.97%
Sharpe Ratio: 1.42706
Sortino Ratio: 1.350
Max Drawdown: -52.3%
Avg Drawdown: -11.6%
Normalized Score: -0.180
Lookback periods: [84, 127, 127] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,821,842,530
Annual Return: 46.67%
Sharpe Ratio: 1.52760
Sortino Ratio: 1.490
Max Drawdown: -57.2%
Avg Drawdown: -11.9%
Normalized Score: 0.082
Lookback periods: [135, 160, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 21sRunning iteration 41/1500... Est. remaining: 18m 20sRunning iteration 51/1500... Est. remaining: 17m 2sRunning iteration 61/1500... Est. remaining: 16m 9sRunning iteration 71/1500... Est. remaining: 15m 29sRunning iteration 81/1500... Est. remaining: 14m 59sRunning iteration 91/1500... Est. remaining: 14m 34sRunning iteration 101/1500... Est. remaining: 14m 12sbest_combination: {'lookbacks': [135, 160, 199], 'score': np.float64(0.08218796876621354), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 54sRunning iteration 121/1500... Est. remaining: 13m 38sRunning iteration 131/1500... Est. remaining: 13m 23sRunning iteration 141/1500... Est. remaining: 13m 10sRunning iteration 151/1500... Est. remaining: 12m 58sRunning iteration 161/1500... Est. remaining: 12m 46sRunning iteration 171/1500... Est. remaining: 12m 36sRunning iteration 181/1500... Est. remaining: 12m 27sRunning iteration 191/1500... Est. remaining: 12m 17sRunning iteration 201/1500... Est. remaining: 12m 8sbest_combination: {'lookbacks': [135, 160, 199], 'score': np.float64(0.08218796876621354), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 59sRunning iteration 221/1500... Est. remaining: 11m 51sRunning iteration 231/1500... Est. remaining: 11m 43sRunning iteration 241/1500... Est. remaining: 11m 35sRunning iteration 251/1500... Est. remaining: 11m 28sRunning iteration 261/1500... Est. remaining: 11m 21sRunning iteration 271/1500... Est. remaining: 11m 13sRunning iteration 281/1500... Est. remaining: 11m 6sRunning iteration 291/1500... Est. remaining: 11m 0sRunning iteration 301/1500... Est. remaining: 10m 53sbest_combination: {'lookbacks': [135, 160, 199], 'score': np.float64(0.08218796876621354), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,862,405,332
Annual Return: 47.95%
Sharpe Ratio: 1.57693
Sortino Ratio: 1.535
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 0.259
Lookback periods: [139, 148, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 10m 51sRunning iteration 321/1500... Est. remaining: 10m 44sRunning iteration 331/1500... Est. remaining: 10m 37sRunning iteration 341/1500... Est. remaining: 10m 31sRunning iteration 351/1500... Est. remaining: 10m 24sRunning iteration 361/1500... Est. remaining: 10m 17sRunning iteration 371/1500... Est. remaining: 10m 11sRunning iteration 381/1500... Est. remaining: 10m 4sRunning iteration 391/1500... Est. remaining: 9m 58sRunning iteration 401/1500... Est. remaining: 9m 52sbest_combination: {'lookbacks': [139, 148, 157], 'score': np.float64(0.2585512631258772), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 46sRunning iteration 421/1500... Est. remaining: 9m 40sRunning iteration 431/1500... Est. remaining: 9m 34sRunning iteration 441/1500... Est. remaining: 9m 28sRunning iteration 451/1500... Est. remaining: 9m 22sRunning iteration 461/1500... Est. remaining: 9m 16sRunning iteration 471/1500... Est. remaining: 9m 10sRunning iteration 481/1500... Est. remaining: 9m 4sRunning iteration 491/1500... Est. remaining: 8m 58sRunning iteration 501/1500... Est. remaining: 8m 52sbest_combination: {'lookbacks': [139, 148, 157], 'score': np.float64(0.2585512631258772), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 47sRunning iteration 521/1500... Est. remaining: 8m 41sRunning iteration 531/1500... Est. remaining: 8m 35sRunning iteration 541/1500... Est. remaining: 8m 30sRunning iteration 551/1500... Est. remaining: 8m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,719,853,782
Annual Return: 47.87%
Sharpe Ratio: 1.57776
Sortino Ratio: 1.542
Max Drawdown: -57.2%
Avg Drawdown: -11.9%
Normalized Score: 0.274
Lookback periods: [140, 147, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 8m 20sRunning iteration 571/1500... Est. remaining: 8m 15sRunning iteration 581/1500... Est. remaining: 8m 9sRunning iteration 591/1500... Est. remaining: 8m 3sRunning iteration 601/1500... Est. remaining: 7m 58sbest_combination: {'lookbacks': [140, 147, 156], 'score': np.float64(0.2737586332267459), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 52sRunning iteration 621/1500... Est. remaining: 7m 46sRunning iteration 631/1500... Est. remaining: 7m 41sRunning iteration 641/1500... Est. remaining: 7m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,415,180,218
Annual Return: 47.70%
Sharpe Ratio: 1.57653
Sortino Ratio: 1.540
Max Drawdown: -57.2%
Avg Drawdown: -11.7%
Normalized Score: 0.298
Lookback periods: [142, 148, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 7m 31sRunning iteration 661/1500... Est. remaining: 7m 26sRunning iteration 671/1500... Est. remaining: 7m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,644,453,225
Annual Return: 49.24%
Sharpe Ratio: 1.59633
Sortino Ratio: 1.562
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 0.368
Lookback periods: [150, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 7m 16sRunning iteration 691/1500... Est. remaining: 7m 11sRunning iteration 701/1500... Est. remaining: 7m 5sbest_combination: {'lookbacks': [150, 154, 156], 'score': np.float64(0.3679545362968441), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 0sRunning iteration 721/1500... Est. remaining: 6m 54sRunning iteration 731/1500... Est. remaining: 6m 49sRunning iteration 741/1500... Est. remaining: 6m 43sRunning iteration 751/1500... Est. remaining: 6m 38sRunning iteration 761/1500... Est. remaining: 6m 32sRunning iteration 771/1500... Est. remaining: 6m 27sRunning iteration 781/1500... Est. remaining: 6m 21sRunning iteration 791/1500... Est. remaining: 6m 16sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [150, 154, 156], 'score': np.float64(0.3679545362968441), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 5sRunning iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 54sRunning iteration 841/1500... Est. remaining: 5m 48sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 27sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [150, 154, 156], 'score': np.float64(0.3679545362968441), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 11sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,088,451,049
Annual Return: 48.57%
Sharpe Ratio: 1.58982
Sortino Ratio: 1.552
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 0.448
Lookback periods: [142, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 4m 50sRunning iteration 961/1500... Est. remaining: 4m 44sRunning iteration 971/1500... Est. remaining: 4m 39sRunning iteration 981/1500... Est. remaining: 4m 34sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [142, 155, 156], 'score': np.float64(0.4478481890568594), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 18sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [142, 155, 156], 'score': np.float64(0.4478481890568594), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [142, 155, 156], 'score': np.float64(0.4478481890568594), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [142, 155, 156], 'score': np.float64(0.4478481890568594), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [142, 155, 156], 'score': np.float64(0.4478481890568594), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 0.45
best_combination: {'lookbacks': [142, 155, 156], 'score': np.float64(0.4478481890568594), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [142, 155, 156] (score: 0.4478)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [142, 155, 156] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 113 selections (27.2%)
2. naz100_hma: 111 selections (26.7%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,088,451,049.25
Average Annualized Gain: 48.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Mon Aug 25 16:37:57 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,039,643,546
Annual Return: 43.94%
Sharpe Ratio: 1.45338
Sortino Ratio: 1.406
Max Drawdown: -62.6%
Avg Drawdown: -13.0%
Normalized Score: -0.098
Lookback periods: [134, 136, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,182,862,019
Annual Return: 44.14%
Sharpe Ratio: 1.46114
Sortino Ratio: 1.408
Max Drawdown: -61.3%
Avg Drawdown: -12.7%
Normalized Score: 0.007
Lookback periods: [141, 146, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,205,886,399
Annual Return: 46.94%
Sharpe Ratio: 1.53245
Sortino Ratio: 1.483
Max Drawdown: -59.2%
Avg Drawdown: -11.8%
Normalized Score: 0.513
Lookback periods: [149, 159, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,701,031,425
Annual Return: 47.86%
Sharpe Ratio: 1.56920
Sortino Ratio: 1.530
Max Drawdown: -62.5%
Avg Drawdown: -11.5%
Normalized Score: 0.589
Lookback periods: [146, 155, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 55sRunning iteration 31/1500... Est. remaining: 19m 21sRunning iteration 41/1500... Est. remaining: 17m 27sRunning iteration 51/1500... Est. remaining: 16m 16sRunning iteration 61/1500... Est. remaining: 15m 28sRunning iteration 71/1500... Est. remaining: 14m 52sRunning iteration 81/1500... Est. remaining: 14m 25sRunning iteration 91/1500... Est. remaining: 14m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,067,170,128
Annual Return: 48.56%
Sharpe Ratio: 1.59763
Sortino Ratio: 1.543
Max Drawdown: -56.1%
Avg Drawdown: -11.8%
Normalized Score: 0.866
Lookback periods: [135, 158, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 13m 59sbest_combination: {'lookbacks': [135, 158, 181], 'score': np.float64(0.8657203819009585), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 42sRunning iteration 121/1500... Est. remaining: 13m 26sRunning iteration 131/1500... Est. remaining: 13m 11sRunning iteration 141/1500... Est. remaining: 12m 58sRunning iteration 151/1500... Est. remaining: 12m 46sRunning iteration 161/1500... Est. remaining: 12m 35sRunning iteration 171/1500... Est. remaining: 12m 25sRunning iteration 181/1500... Est. remaining: 12m 15sRunning iteration 191/1500... Est. remaining: 12m 6sRunning iteration 201/1500... Est. remaining: 11m 57sbest_combination: {'lookbacks': [135, 158, 181], 'score': np.float64(0.8657203819009585), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 49sRunning iteration 221/1500... Est. remaining: 11m 41sRunning iteration 231/1500... Est. remaining: 11m 33sRunning iteration 241/1500... Est. remaining: 11m 25sRunning iteration 251/1500... Est. remaining: 11m 17sRunning iteration 261/1500... Est. remaining: 11m 10sRunning iteration 271/1500... Est. remaining: 11m 3sRunning iteration 281/1500... Est. remaining: 10m 57sRunning iteration 291/1500... Est. remaining: 10m 50sRunning iteration 301/1500... Est. remaining: 10m 43sbest_combination: {'lookbacks': [135, 158, 181], 'score': np.float64(0.8657203819009585), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 37sRunning iteration 321/1500... Est. remaining: 10m 30sRunning iteration 331/1500... Est. remaining: 10m 24sRunning iteration 341/1500... Est. remaining: 10m 18sRunning iteration 351/1500... Est. remaining: 10m 11sRunning iteration 361/1500... Est. remaining: 10m 5sRunning iteration 371/1500... Est. remaining: 9m 59sRunning iteration 381/1500... Est. remaining: 9m 53sRunning iteration 391/1500... Est. remaining: 9m 47sRunning iteration 401/1500... Est. remaining: 9m 41sbest_combination: {'lookbacks': [135, 158, 181], 'score': np.float64(0.8657203819009585), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,316,938,322
Annual Return: 49.11%
Sharpe Ratio: 1.58555
Sortino Ratio: 1.555
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.897
Lookback periods: [176, 185, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 32sRunning iteration 431/1500... Est. remaining: 9m 27sRunning iteration 441/1500... Est. remaining: 9m 21sRunning iteration 451/1500... Est. remaining: 9m 15sRunning iteration 461/1500... Est. remaining: 9m 9sRunning iteration 471/1500... Est. remaining: 9m 3sRunning iteration 481/1500... Est. remaining: 8m 57sRunning iteration 491/1500... Est. remaining: 8m 52sRunning iteration 501/1500... Est. remaining: 8m 46sbest_combination: {'lookbacks': [176, 185, 188], 'score': np.float64(0.8970712422485565), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 40sRunning iteration 521/1500... Est. remaining: 8m 34sRunning iteration 531/1500... Est. remaining: 8m 29sRunning iteration 541/1500... Est. remaining: 8m 23sRunning iteration 551/1500... Est. remaining: 8m 18sRunning iteration 561/1500... Est. remaining: 8m 12sRunning iteration 571/1500... Est. remaining: 8m 6sRunning iteration 581/1500... Est. remaining: 8m 1sRunning iteration 591/1500... Est. remaining: 7m 55sRunning iteration 601/1500... Est. remaining: 7m 50sbest_combination: {'lookbacks': [176, 185, 188], 'score': np.float64(0.8970712422485565), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 44sRunning iteration 621/1500... Est. remaining: 7m 39sRunning iteration 631/1500... Est. remaining: 7m 33sRunning iteration 641/1500... Est. remaining: 7m 28sRunning iteration 651/1500... Est. remaining: 7m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,795,882,113
Annual Return: 41.78%
Sharpe Ratio: 1.48662
Sortino Ratio: 1.400
Max Drawdown: -37.8%
Avg Drawdown: -10.1%
Normalized Score: 0.967
Lookback periods: [52, 53, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,498,423,012
Annual Return: 41.04%
Sharpe Ratio: 1.49261
Sortino Ratio: 1.388
Max Drawdown: -34.7%
Avg Drawdown: -9.8%
Normalized Score: 1.049
Lookback periods: [50, 57, 93] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 7m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,760,746,011
Annual Return: 41.69%
Sharpe Ratio: 1.50070
Sortino Ratio: 1.405
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.179
Lookback periods: [50, 53, 93] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,206,322,414
Annual Return: 44.17%
Sharpe Ratio: 1.58573
Sortino Ratio: 1.493
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.569
Lookback periods: [50, 54, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 7m 12sRunning iteration 691/1500... Est. remaining: 7m 7sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [50, 54, 96], 'score': np.float64(1.56893417048631), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,833,624,762
Annual Return: 43.65%
Sharpe Ratio: 1.57405
Sortino Ratio: 1.478
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.626
Lookback periods: [50, 50, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 6m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.651
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 6m 47sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 36sRunning iteration 761/1500... Est. remaining: 6m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.963
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 771/1500... Est. remaining: 6m 26sRunning iteration 781/1500... Est. remaining: 6m 20sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.962863596713992), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 4sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 53sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.962863596713992), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.962863596713992), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.962863596713992), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.962863596713992), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.962863596713992), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.962863596713992), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.017
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 2.02
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0172294952389715), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 2.0172)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Mon Aug 25 16:50:58 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,637,876,161
Annual Return: 45.71%
Sharpe Ratio: 1.49833
Sortino Ratio: 1.451
Max Drawdown: -59.0%
Avg Drawdown: -12.1%
Normalized Score: 0.371
Lookback periods: [146, 158, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 33sRunning iteration 21/1500... Est. remaining: 18m 34sRunning iteration 31/1500... Est. remaining: 16m 26sRunning iteration 41/1500... Est. remaining: 15m 19sRunning iteration 51/1500... Est. remaining: 14m 37sRunning iteration 61/1500... Est. remaining: 14m 6sRunning iteration 71/1500... Est. remaining: 13m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,081,614,363
Annual Return: 46.09%
Sharpe Ratio: 1.50444
Sortino Ratio: 1.471
Max Drawdown: -59.0%
Avg Drawdown: -10.5%
Normalized Score: 0.743
Lookback periods: [156, 167, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 13m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,325,852,497
Annual Return: 49.11%
Sharpe Ratio: 1.60815
Sortino Ratio: 1.577
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 1.144
Lookback periods: [128, 156, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 13m 51sRunning iteration 101/1500... Est. remaining: 13m 34sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 19sRunning iteration 121/1500... Est. remaining: 13m 5sRunning iteration 131/1500... Est. remaining: 12m 53sRunning iteration 141/1500... Est. remaining: 12m 42sRunning iteration 151/1500... Est. remaining: 12m 32sRunning iteration 161/1500... Est. remaining: 12m 22sRunning iteration 171/1500... Est. remaining: 12m 13sRunning iteration 181/1500... Est. remaining: 12m 4sRunning iteration 191/1500... Est. remaining: 11m 56sRunning iteration 201/1500... Est. remaining: 11m 49sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 41sRunning iteration 221/1500... Est. remaining: 11m 34sRunning iteration 231/1500... Est. remaining: 11m 27sRunning iteration 241/1500... Est. remaining: 11m 20sRunning iteration 251/1500... Est. remaining: 11m 13sRunning iteration 261/1500... Est. remaining: 11m 6sRunning iteration 271/1500... Est. remaining: 11m 0sRunning iteration 281/1500... Est. remaining: 10m 53sRunning iteration 291/1500... Est. remaining: 10m 47sRunning iteration 301/1500... Est. remaining: 10m 40sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 34sRunning iteration 321/1500... Est. remaining: 10m 28sRunning iteration 331/1500... Est. remaining: 10m 21sRunning iteration 341/1500... Est. remaining: 10m 15sRunning iteration 351/1500... Est. remaining: 10m 9sRunning iteration 361/1500... Est. remaining: 10m 3sRunning iteration 371/1500... Est. remaining: 9m 57sRunning iteration 381/1500... Est. remaining: 9m 51sRunning iteration 391/1500... Est. remaining: 9m 45sRunning iteration 401/1500... Est. remaining: 9m 39sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 34sRunning iteration 421/1500... Est. remaining: 9m 28sRunning iteration 431/1500... Est. remaining: 9m 22sRunning iteration 441/1500... Est. remaining: 9m 16sRunning iteration 451/1500... Est. remaining: 9m 11sRunning iteration 461/1500... Est. remaining: 9m 5sRunning iteration 471/1500... Est. remaining: 8m 59sRunning iteration 481/1500... Est. remaining: 8m 54sRunning iteration 491/1500... Est. remaining: 8m 48sRunning iteration 501/1500... Est. remaining: 8m 43sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 37sRunning iteration 521/1500... Est. remaining: 8m 32sRunning iteration 531/1500... Est. remaining: 8m 26sRunning iteration 541/1500... Est. remaining: 8m 21sRunning iteration 551/1500... Est. remaining: 8m 15sRunning iteration 561/1500... Est. remaining: 8m 10sRunning iteration 571/1500... Est. remaining: 8m 4sRunning iteration 581/1500... Est. remaining: 7m 59sRunning iteration 591/1500... Est. remaining: 7m 54sRunning iteration 601/1500... Est. remaining: 7m 48sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 43sRunning iteration 621/1500... Est. remaining: 7m 37sRunning iteration 631/1500... Est. remaining: 7m 32sRunning iteration 641/1500... Est. remaining: 7m 27sRunning iteration 651/1500... Est. remaining: 7m 21sRunning iteration 661/1500... Est. remaining: 7m 16sRunning iteration 671/1500... Est. remaining: 7m 11sRunning iteration 681/1500... Est. remaining: 7m 6sRunning iteration 691/1500... Est. remaining: 7m 0sRunning iteration 701/1500... Est. remaining: 6m 55sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 50sRunning iteration 721/1500... Est. remaining: 6m 44sRunning iteration 731/1500... Est. remaining: 6m 39sRunning iteration 741/1500... Est. remaining: 6m 34sRunning iteration 751/1500... Est. remaining: 6m 28sRunning iteration 761/1500... Est. remaining: 6m 23sRunning iteration 771/1500... Est. remaining: 6m 18sRunning iteration 781/1500... Est. remaining: 6m 13sRunning iteration 791/1500... Est. remaining: 6m 7sRunning iteration 801/1500... Est. remaining: 6m 2sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 57sRunning iteration 821/1500... Est. remaining: 5m 52sRunning iteration 831/1500... Est. remaining: 5m 46sRunning iteration 841/1500... Est. remaining: 5m 41sRunning iteration 851/1500... Est. remaining: 5m 36sRunning iteration 861/1500... Est. remaining: 5m 31sRunning iteration 871/1500... Est. remaining: 5m 25sRunning iteration 881/1500... Est. remaining: 5m 20sRunning iteration 891/1500... Est. remaining: 5m 15sRunning iteration 901/1500... Est. remaining: 5m 10sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 5sRunning iteration 921/1500... Est. remaining: 4m 59sRunning iteration 931/1500... Est. remaining: 4m 54sRunning iteration 941/1500... Est. remaining: 4m 49sRunning iteration 951/1500... Est. remaining: 4m 44sRunning iteration 961/1500... Est. remaining: 4m 38sRunning iteration 971/1500... Est. remaining: 4m 33sRunning iteration 981/1500... Est. remaining: 4m 28sRunning iteration 991/1500... Est. remaining: 4m 23sRunning iteration 1001/1500... Est. remaining: 4m 18sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 12sRunning iteration 1021/1500... Est. remaining: 4m 7sRunning iteration 1031/1500... Est. remaining: 4m 2sRunning iteration 1041/1500... Est. remaining: 3m 57sRunning iteration 1051/1500... Est. remaining: 3m 52sRunning iteration 1061/1500... Est. remaining: 3m 47sRunning iteration 1071/1500... Est. remaining: 3m 41sRunning iteration 1081/1500... Est. remaining: 3m 36sRunning iteration 1091/1500... Est. remaining: 3m 31sRunning iteration 1101/1500... Est. remaining: 3m 26sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 21sRunning iteration 1121/1500... Est. remaining: 3m 15sRunning iteration 1131/1500... Est. remaining: 3m 10sRunning iteration 1141/1500... Est. remaining: 3m 5sRunning iteration 1151/1500... Est. remaining: 3m 0sRunning iteration 1161/1500... Est. remaining: 2m 55sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 44sRunning iteration 1191/1500... Est. remaining: 2m 39sRunning iteration 1201/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 13sRunning iteration 1251/1500... Est. remaining: 2m 8sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 1.14
best_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.143719574971204), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [128, 156, 171] (score: 1.1437)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [128, 156, 171] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 108 selections (26.0%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,325,852,497.05
Average Annualized Gain: 49.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Mon Aug 25 17:03:57 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,450,959,749
Annual Return: 45.54%
Sharpe Ratio: 1.50604
Sortino Ratio: 1.456
Max Drawdown: -59.2%
Avg Drawdown: -12.2%
Normalized Score: -0.024
Lookback periods: [137, 148, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,701,772,924
Annual Return: 46.58%
Sharpe Ratio: 1.51906
Sortino Ratio: 1.477
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.212
Lookback periods: [169, 193, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 27sRunning iteration 21/1500... Est. remaining: 19m 57sRunning iteration 31/1500... Est. remaining: 17m 23sRunning iteration 41/1500... Est. remaining: 16m 1sRunning iteration 51/1500... Est. remaining: 15m 9sRunning iteration 61/1500... Est. remaining: 14m 33sRunning iteration 71/1500... Est. remaining: 14m 7sRunning iteration 81/1500... Est. remaining: 13m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,856,062,040
Annual Return: 43.69%
Sharpe Ratio: 1.50312
Sortino Ratio: 1.432
Max Drawdown: -52.3%
Avg Drawdown: -10.8%
Normalized Score: 0.279
Lookback periods: [87, 121, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,675,375,176
Annual Return: 47.25%
Sharpe Ratio: 1.54389
Sortino Ratio: 1.509
Max Drawdown: -58.5%
Avg Drawdown: -11.3%
Normalized Score: 0.325
Lookback periods: [155, 160, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 5sRunning iteration 101/1500... Est. remaining: 13m 47sbest_combination: {'lookbacks': [155, 160, 168], 'score': np.float64(0.3252083625361667), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 31sRunning iteration 121/1500... Est. remaining: 13m 16sRunning iteration 131/1500... Est. remaining: 13m 3sRunning iteration 141/1500... Est. remaining: 12m 50sRunning iteration 151/1500... Est. remaining: 12m 39sRunning iteration 161/1500... Est. remaining: 12m 28sRunning iteration 171/1500... Est. remaining: 12m 19sRunning iteration 181/1500... Est. remaining: 12m 10sRunning iteration 191/1500... Est. remaining: 12m 1sRunning iteration 201/1500... Est. remaining: 11m 52sbest_combination: {'lookbacks': [155, 160, 168], 'score': np.float64(0.3252083625361667), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 45sRunning iteration 221/1500... Est. remaining: 11m 36sRunning iteration 231/1500... Est. remaining: 11m 30sRunning iteration 241/1500... Est. remaining: 11m 23sRunning iteration 251/1500... Est. remaining: 11m 17sRunning iteration 261/1500... Est. remaining: 11m 10sRunning iteration 271/1500... Est. remaining: 11m 3sRunning iteration 281/1500... Est. remaining: 21m 40sRunning iteration 291/1500... Est. remaining: 21m 6sRunning iteration 301/1500... Est. remaining: 28m 21sbest_combination: {'lookbacks': [155, 160, 168], 'score': np.float64(0.3252083625361667), 'visits': 1}
Running iteration 311/1500... Est. remaining: 27m 32sRunning iteration 321/1500... Est. remaining: 26m 46sRunning iteration 331/1500... Est. remaining: 26m 2sRunning iteration 341/1500... Est. remaining: 25m 20sRunning iteration 351/1500... Est. remaining: 24m 41sRunning iteration 361/1500... Est. remaining: 24m 3sRunning iteration 371/1500... Est. remaining: 23m 27sRunning iteration 381/1500... Est. remaining: 22m 53sRunning iteration 391/1500... Est. remaining: 22m 20sRunning iteration 401/1500... Est. remaining: 21m 49sbest_combination: {'lookbacks': [155, 160, 168], 'score': np.float64(0.3252083625361667), 'visits': 1}
Running iteration 411/1500... Est. remaining: 21m 19sRunning iteration 421/1500... Est. remaining: 20m 50sRunning iteration 431/1500... Est. remaining: 20m 22sRunning iteration 441/1500... Est. remaining: 19m 55sRunning iteration 451/1500... Est. remaining: 19m 29sRunning iteration 461/1500... Est. remaining: 19m 4sRunning iteration 471/1500... Est. remaining: 18m 40sRunning iteration 481/1500... Est. remaining: 18m 17sRunning iteration 491/1500... Est. remaining: 17m 54sRunning iteration 501/1500... Est. remaining: 17m 33sbest_combination: {'lookbacks': [155, 160, 168], 'score': np.float64(0.3252083625361667), 'visits': 1}
Running iteration 511/1500... Est. remaining: 17m 12sRunning iteration 521/1500... Est. remaining: 16m 51sRunning iteration 531/1500... Est. remaining: 16m 31sRunning iteration 541/1500... Est. remaining: 16m 12sRunning iteration 551/1500... Est. remaining: 15m 53sRunning iteration 561/1500... Est. remaining: 15m 35sRunning iteration 571/1500... Est. remaining: 15m 17sRunning iteration 581/1500... Est. remaining: 15m 0sRunning iteration 591/1500... Est. remaining: 14m 43sRunning iteration 601/1500... Est. remaining: 14m 26sbest_combination: {'lookbacks': [155, 160, 168], 'score': np.float64(0.3252083625361667), 'visits': 1}
Running iteration 611/1500... Est. remaining: 14m 10sRunning iteration 621/1500... Est. remaining: 13m 54sRunning iteration 631/1500... Est. remaining: 13m 38sRunning iteration 641/1500... Est. remaining: 13m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $977,970,032
Annual Return: 39.31%
Sharpe Ratio: 1.45434
Sortino Ratio: 1.349
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.602
Lookback periods: [50, 58, 92] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 13m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,360,051,660
Annual Return: 44.36%
Sharpe Ratio: 1.59348
Sortino Ratio: 1.498
Max Drawdown: -37.8%
Avg Drawdown: -9.4%
Normalized Score: 1.136
Lookback periods: [51, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 12m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.495
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 12m 44sRunning iteration 681/1500... Est. remaining: 12m 30sRunning iteration 691/1500... Est. remaining: 12m 16sRunning iteration 701/1500... Est. remaining: 12m 2sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.494795487175789), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.681
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 711/1500... Est. remaining: 11m 50sRunning iteration 721/1500... Est. remaining: 11m 37sRunning iteration 731/1500... Est. remaining: 11m 24sRunning iteration 741/1500... Est. remaining: 11m 11sRunning iteration 751/1500... Est. remaining: 10m 58sRunning iteration 761/1500... Est. remaining: 10m 46sRunning iteration 771/1500... Est. remaining: 10m 34sRunning iteration 781/1500... Est. remaining: 10m 22sRunning iteration 791/1500... Est. remaining: 10m 10sRunning iteration 801/1500... Est. remaining: 9m 58sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6814159463955807), 'visits': 1}
Running iteration 811/1500... Est. remaining: 9m 47sRunning iteration 821/1500... Est. remaining: 9m 35sRunning iteration 831/1500... Est. remaining: 9m 24sRunning iteration 841/1500... Est. remaining: 9m 13sRunning iteration 851/1500... Est. remaining: 9m 2sRunning iteration 861/1500... Est. remaining: 8m 51sRunning iteration 871/1500... Est. remaining: 8m 40sRunning iteration 881/1500... Est. remaining: 8m 30sRunning iteration 891/1500... Est. remaining: 8m 19sRunning iteration 901/1500... Est. remaining: 8m 9sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6814159463955807), 'visits': 1}
Running iteration 911/1500... Est. remaining: 7m 59sRunning iteration 921/1500... Est. remaining: 7m 49sRunning iteration 931/1500... Est. remaining: 7m 40sRunning iteration 941/1500... Est. remaining: 7m 30sRunning iteration 951/1500... Est. remaining: 7m 20sRunning iteration 961/1500... Est. remaining: 7m 10sRunning iteration 971/1500... Est. remaining: 7m 1sRunning iteration 981/1500... Est. remaining: 6m 51sRunning iteration 991/1500... Est. remaining: 6m 42sRunning iteration 1001/1500... Est. remaining: 6m 32sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6814159463955807), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 6m 23sRunning iteration 1021/1500... Est. remaining: 6m 14sRunning iteration 1031/1500... Est. remaining: 6m 5sRunning iteration 1041/1500... Est. remaining: 5m 56sRunning iteration 1051/1500... Est. remaining: 5m 47sRunning iteration 1061/1500... Est. remaining: 5m 38sRunning iteration 1071/1500... Est. remaining: 5m 30sRunning iteration 1081/1500... Est. remaining: 5m 21sRunning iteration 1091/1500... Est. remaining: 5m 12sRunning iteration 1101/1500... Est. remaining: 5m 4sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6814159463955807), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 55sRunning iteration 1121/1500... Est. remaining: 4m 47sRunning iteration 1131/1500... Est. remaining: 4m 38sRunning iteration 1141/1500... Est. remaining: 4m 30sRunning iteration 1151/1500... Est. remaining: 4m 22sRunning iteration 1161/1500... Est. remaining: 4m 13sRunning iteration 1171/1500... Est. remaining: 4m 5sRunning iteration 1181/1500... Est. remaining: 3m 57sRunning iteration 1191/1500... Est. remaining: 3m 49sRunning iteration 1201/1500... Est. remaining: 3m 41sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6814159463955807), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 33sRunning iteration 1221/1500... Est. remaining: 3m 25sRunning iteration 1231/1500... Est. remaining: 3m 17sRunning iteration 1241/1500... Est. remaining: 3m 10sRunning iteration 1251/1500... Est. remaining: 3m 2sRunning iteration 1261/1500... Est. remaining: 2m 54sRunning iteration 1271/1500... Est. remaining: 2m 46sRunning iteration 1281/1500... Est. remaining: 2m 39sRunning iteration 1291/1500... Est. remaining: 2m 31sRunning iteration 1301/1500... Est. remaining: 2m 24sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6814159463955807), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 16sRunning iteration 1321/1500... Est. remaining: 2m 9sRunning iteration 1331/1500... Est. remaining: 2m 1sRunning iteration 1341/1500... Est. remaining: 1m 54sRunning iteration 1351/1500... Est. remaining: 1m 46sRunning iteration 1361/1500... Est. remaining: 1m 39sRunning iteration 1371/1500... Est. remaining: 1m 32sRunning iteration 1381/1500... Est. remaining: 1m 24sRunning iteration 1391/1500... Est. remaining: 1m 17sRunning iteration 1401/1500... Est. remaining: 1m 10sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6814159463955807), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 3sRunning iteration 1421/1500... Est. remaining: 0m 56sRunning iteration 1431/1500... Est. remaining: 0m 49sRunning iteration 1441/1500... Est. remaining: 0m 41sRunning iteration 1451/1500... Est. remaining: 0m 34sRunning iteration 1461/1500... Est. remaining: 0m 27sRunning iteration 1471/1500... Est. remaining: 0m 20sRunning iteration 1481/1500... Est. remaining: 0m 13sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 17.3 minutes
Best normalized score: 1.68
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6814159463955807), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.6814)

Monte Carlo simulation completed in 17.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Mon Aug 25 17:21:22 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,045,491,136
Annual Return: 39.58%
Sharpe Ratio: 1.33549
Sortino Ratio: 1.276
Max Drawdown: -71.4%
Avg Drawdown: -12.9%
Normalized Score: -1.281
Lookback periods: [96, 172, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $517,507,579
Annual Return: 36.78%
Sharpe Ratio: 1.27408
Sortino Ratio: 1.174
Max Drawdown: -55.0%
Avg Drawdown: -12.0%
Normalized Score: -0.802
Lookback periods: [53, 144, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,482,635,273
Annual Return: 40.99%
Sharpe Ratio: 1.38567
Sortino Ratio: 1.312
Max Drawdown: -52.3%
Avg Drawdown: -12.1%
Normalized Score: -0.184
Lookback periods: [84, 115, 124] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,328,828,123
Annual Return: 45.42%
Sharpe Ratio: 1.50168
Sortino Ratio: 1.471
Max Drawdown: -56.1%
Avg Drawdown: -12.3%
Normalized Score: 0.224
Lookback periods: [133, 134, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 23sRunning iteration 21/1500... Est. remaining: 22m 53sRunning iteration 31/1500... Est. remaining: 19m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,385,900,622
Annual Return: 47.06%
Sharpe Ratio: 1.55300
Sortino Ratio: 1.519
Max Drawdown: -63.5%
Avg Drawdown: -11.8%
Normalized Score: 0.241
Lookback periods: [140, 152, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 14sRunning iteration 51/1500... Est. remaining: 16m 56sRunning iteration 61/1500... Est. remaining: 16m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,252,307,490
Annual Return: 46.97%
Sharpe Ratio: 1.54266
Sortino Ratio: 1.499
Max Drawdown: -56.8%
Avg Drawdown: -11.7%
Normalized Score: 0.484
Lookback periods: [140, 154, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 48sRunning iteration 81/1500... Est. remaining: 15m 15sRunning iteration 91/1500... Est. remaining: 14m 48sRunning iteration 101/1500... Est. remaining: 14m 24sbest_combination: {'lookbacks': [140, 154, 178], 'score': np.float64(0.48401224253187813), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 5sRunning iteration 121/1500... Est. remaining: 13m 47sRunning iteration 131/1500... Est. remaining: 13m 32sRunning iteration 141/1500... Est. remaining: 13m 17sRunning iteration 151/1500... Est. remaining: 13m 4sRunning iteration 161/1500... Est. remaining: 12m 52sRunning iteration 171/1500... Est. remaining: 12m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,256,202,153
Annual Return: 46.97%
Sharpe Ratio: 1.52864
Sortino Ratio: 1.490
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.496
Lookback periods: [158, 159, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/1500... Est. remaining: 12m 40sRunning iteration 191/1500... Est. remaining: 12m 29sRunning iteration 201/1500... Est. remaining: 12m 19sbest_combination: {'lookbacks': [158, 159, 179], 'score': np.float64(0.4960501276602701), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 10sRunning iteration 221/1500... Est. remaining: 12m 1sRunning iteration 231/1500... Est. remaining: 11m 52sRunning iteration 241/1500... Est. remaining: 11m 44sRunning iteration 251/1500... Est. remaining: 11m 36sRunning iteration 261/1500... Est. remaining: 11m 28sRunning iteration 271/1500... Est. remaining: 11m 20sRunning iteration 281/1500... Est. remaining: 11m 13sRunning iteration 291/1500... Est. remaining: 11m 5sRunning iteration 301/1500... Est. remaining: 10m 58sbest_combination: {'lookbacks': [158, 159, 179], 'score': np.float64(0.4960501276602701), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 51sRunning iteration 321/1500... Est. remaining: 10m 44sRunning iteration 331/1500... Est. remaining: 10m 37sRunning iteration 341/1500... Est. remaining: 10m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,685,275,015
Annual Return: 46.57%
Sharpe Ratio: 1.52163
Sortino Ratio: 1.486
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: 0.575
Lookback periods: [156, 164, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 351/1500... Est. remaining: 10m 27sRunning iteration 361/1500... Est. remaining: 10m 20sRunning iteration 371/1500... Est. remaining: 10m 14sRunning iteration 381/1500... Est. remaining: 10m 7sRunning iteration 391/1500... Est. remaining: 10m 0sRunning iteration 401/1500... Est. remaining: 9m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,413,099,797
Annual Return: 48.72%
Sharpe Ratio: 1.58053
Sortino Ratio: 1.540
Max Drawdown: -59.7%
Avg Drawdown: -11.6%
Normalized Score: 0.580
Lookback periods: [155, 158, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [155, 158, 178], 'score': np.float64(0.5801333018139327), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 51sRunning iteration 421/1500... Est. remaining: 9m 45sRunning iteration 431/1500... Est. remaining: 9m 38sRunning iteration 441/1500... Est. remaining: 9m 32sRunning iteration 451/1500... Est. remaining: 9m 26sRunning iteration 461/1500... Est. remaining: 9m 20sRunning iteration 471/1500... Est. remaining: 9m 13sRunning iteration 481/1500... Est. remaining: 9m 7sRunning iteration 491/1500... Est. remaining: 9m 1sRunning iteration 501/1500... Est. remaining: 8m 55sbest_combination: {'lookbacks': [155, 158, 178], 'score': np.float64(0.5801333018139327), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 50sRunning iteration 521/1500... Est. remaining: 8m 44sRunning iteration 531/1500... Est. remaining: 8m 38sRunning iteration 541/1500... Est. remaining: 8m 32sRunning iteration 551/1500... Est. remaining: 8m 26sRunning iteration 561/1500... Est. remaining: 8m 20sRunning iteration 571/1500... Est. remaining: 8m 14sRunning iteration 581/1500... Est. remaining: 8m 9sRunning iteration 591/1500... Est. remaining: 8m 3sRunning iteration 601/1500... Est. remaining: 7m 57sbest_combination: {'lookbacks': [155, 158, 178], 'score': np.float64(0.5801333018139327), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 52sRunning iteration 621/1500... Est. remaining: 7m 46sRunning iteration 631/1500... Est. remaining: 7m 40sRunning iteration 641/1500... Est. remaining: 7m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,508,654,728
Annual Return: 48.28%
Sharpe Ratio: 1.58720
Sortino Ratio: 1.549
Max Drawdown: -58.5%
Avg Drawdown: -11.3%
Normalized Score: 0.673
Lookback periods: [139, 148, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 7m 31sRunning iteration 661/1500... Est. remaining: 7m 25sRunning iteration 671/1500... Est. remaining: 7m 20sRunning iteration 681/1500... Est. remaining: 7m 14sRunning iteration 691/1500... Est. remaining: 7m 8sRunning iteration 701/1500... Est. remaining: 7m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,422,280,779
Annual Return: 49.15%
Sharpe Ratio: 1.62578
Sortino Ratio: 1.584
Max Drawdown: -58.5%
Avg Drawdown: -10.9%
Normalized Score: 0.894
Lookback periods: [139, 148, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 59sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 48sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 37sRunning iteration 761/1500... Est. remaining: 6m 31sRunning iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 20sRunning iteration 791/1500... Est. remaining: 6m 14sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 53sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 0.89
best_combination: {'lookbacks': [139, 148, 158], 'score': np.float64(0.8943838309042018), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 148, 158] (score: 0.8944)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 148, 158] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 113 selections (27.2%)
2. naz100_hma: 104 selections (25.0%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 79 selections (19.0%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,422,280,779.05
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Mon Aug 25 17:34:26 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,253,608,878
Annual Return: 45.35%
Sharpe Ratio: 1.49942
Sortino Ratio: 1.450
Max Drawdown: -61.6%
Avg Drawdown: -12.5%
Normalized Score: 0.041
Lookback periods: [137, 138, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,969,342,935
Annual Return: 47.43%
Sharpe Ratio: 1.53530
Sortino Ratio: 1.493
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: 0.467
Lookback periods: [179, 183, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 27sRunning iteration 21/1500... Est. remaining: 19m 53sRunning iteration 31/1500... Est. remaining: 17m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,904,051,340
Annual Return: 46.73%
Sharpe Ratio: 1.52217
Sortino Ratio: 1.482
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.537
Lookback periods: [157, 161, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 16m 44sRunning iteration 51/1500... Est. remaining: 15m 46sRunning iteration 61/1500... Est. remaining: 15m 7sRunning iteration 71/1500... Est. remaining: 14m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.851
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 14m 32sRunning iteration 91/1500... Est. remaining: 14m 10sRunning iteration 101/1500... Est. remaining: 13m 51sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8511714488064146), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 34sRunning iteration 121/1500... Est. remaining: 13m 20sRunning iteration 131/1500... Est. remaining: 13m 6sRunning iteration 141/1500... Est. remaining: 12m 55sRunning iteration 151/1500... Est. remaining: 12m 44sRunning iteration 161/1500... Est. remaining: 12m 34sRunning iteration 171/1500... Est. remaining: 12m 24sRunning iteration 181/1500... Est. remaining: 12m 16sRunning iteration 191/1500... Est. remaining: 12m 7sRunning iteration 201/1500... Est. remaining: 11m 59sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8511714488064146), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 52sRunning iteration 221/1500... Est. remaining: 11m 45sRunning iteration 231/1500... Est. remaining: 11m 37sRunning iteration 241/1500... Est. remaining: 11m 29sRunning iteration 251/1500... Est. remaining: 11m 22sRunning iteration 261/1500... Est. remaining: 11m 14sRunning iteration 271/1500... Est. remaining: 11m 8sRunning iteration 281/1500... Est. remaining: 11m 0sRunning iteration 291/1500... Est. remaining: 10m 54sRunning iteration 301/1500... Est. remaining: 10m 47sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8511714488064146), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 40sRunning iteration 321/1500... Est. remaining: 10m 34sRunning iteration 331/1500... Est. remaining: 10m 28sRunning iteration 341/1500... Est. remaining: 10m 21sRunning iteration 351/1500... Est. remaining: 10m 15sRunning iteration 361/1500... Est. remaining: 10m 9sRunning iteration 371/1500... Est. remaining: 10m 2sRunning iteration 381/1500... Est. remaining: 9m 56sRunning iteration 391/1500... Est. remaining: 9m 50sRunning iteration 401/1500... Est. remaining: 9m 44sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8511714488064146), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 38sRunning iteration 421/1500... Est. remaining: 9m 32sRunning iteration 431/1500... Est. remaining: 9m 26sRunning iteration 441/1500... Est. remaining: 9m 21sRunning iteration 451/1500... Est. remaining: 9m 15sRunning iteration 461/1500... Est. remaining: 9m 9sRunning iteration 471/1500... Est. remaining: 9m 3sRunning iteration 481/1500... Est. remaining: 8m 58sRunning iteration 491/1500... Est. remaining: 8m 52sRunning iteration 501/1500... Est. remaining: 8m 46sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8511714488064146), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 40sRunning iteration 521/1500... Est. remaining: 8m 35sRunning iteration 531/1500... Est. remaining: 8m 29sRunning iteration 541/1500... Est. remaining: 8m 24sRunning iteration 551/1500... Est. remaining: 8m 18sRunning iteration 561/1500... Est. remaining: 8m 12sRunning iteration 571/1500... Est. remaining: 8m 7sRunning iteration 581/1500... Est. remaining: 8m 1sRunning iteration 591/1500... Est. remaining: 7m 56sRunning iteration 601/1500... Est. remaining: 7m 50sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8511714488064146), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 45sRunning iteration 621/1500... Est. remaining: 7m 39sRunning iteration 631/1500... Est. remaining: 7m 34sRunning iteration 641/1500... Est. remaining: 7m 28sRunning iteration 651/1500... Est. remaining: 7m 23sRunning iteration 661/1500... Est. remaining: 7m 18sRunning iteration 671/1500... Est. remaining: 7m 12sRunning iteration 681/1500... Est. remaining: 7m 7sRunning iteration 691/1500... Est. remaining: 7m 1sRunning iteration 701/1500... Est. remaining: 6m 56sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8511714488064146), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 51sRunning iteration 721/1500... Est. remaining: 6m 45sRunning iteration 731/1500... Est. remaining: 6m 40sRunning iteration 741/1500... Est. remaining: 6m 35sRunning iteration 751/1500... Est. remaining: 6m 29sRunning iteration 761/1500... Est. remaining: 6m 24sRunning iteration 771/1500... Est. remaining: 6m 19sRunning iteration 781/1500... Est. remaining: 6m 13sRunning iteration 791/1500... Est. remaining: 6m 8sRunning iteration 801/1500... Est. remaining: 6m 3sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8511714488064146), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.998
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 821/1500... Est. remaining: 5m 53sRunning iteration 831/1500... Est. remaining: 5m 48sRunning iteration 841/1500... Est. remaining: 5m 42sRunning iteration 851/1500... Est. remaining: 5m 37sRunning iteration 861/1500... Est. remaining: 5m 32sRunning iteration 871/1500... Est. remaining: 5m 27sRunning iteration 881/1500... Est. remaining: 5m 21sRunning iteration 891/1500... Est. remaining: 5m 16sRunning iteration 901/1500... Est. remaining: 5m 11sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9978291493062987), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 5sRunning iteration 921/1500... Est. remaining: 5m 0sRunning iteration 931/1500... Est. remaining: 4m 55sRunning iteration 941/1500... Est. remaining: 4m 50sRunning iteration 951/1500... Est. remaining: 4m 44sRunning iteration 961/1500... Est. remaining: 4m 39sRunning iteration 971/1500... Est. remaining: 4m 34sRunning iteration 981/1500... Est. remaining: 4m 29sRunning iteration 991/1500... Est. remaining: 4m 23sRunning iteration 1001/1500... Est. remaining: 4m 18sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9978291493062987), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 13sRunning iteration 1021/1500... Est. remaining: 4m 8sRunning iteration 1031/1500... Est. remaining: 4m 3sRunning iteration 1041/1500... Est. remaining: 3m 57sRunning iteration 1051/1500... Est. remaining: 3m 52sRunning iteration 1061/1500... Est. remaining: 3m 47sRunning iteration 1071/1500... Est. remaining: 3m 42sRunning iteration 1081/1500... Est. remaining: 3m 37sRunning iteration 1091/1500... Est. remaining: 3m 31sRunning iteration 1101/1500... Est. remaining: 3m 26sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9978291493062987), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 21sRunning iteration 1121/1500... Est. remaining: 3m 16sRunning iteration 1131/1500... Est. remaining: 3m 10sRunning iteration 1141/1500... Est. remaining: 3m 5sRunning iteration 1151/1500... Est. remaining: 3m 0sRunning iteration 1161/1500... Est. remaining: 2m 55sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 39sRunning iteration 1201/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9978291493062987), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 13sRunning iteration 1251/1500... Est. remaining: 2m 8sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9978291493062987), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9978291493062987), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 2.00
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9978291493062987), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9978)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 17:47:23 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $212,044,265
Annual Return: 33.30%
Sharpe Ratio: 1.14443
Sortino Ratio: 1.068
Max Drawdown: -59.0%
Avg Drawdown: -13.1%
Normalized Score: -2.197
Lookback periods: [85, 289, 300] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,447,795,200
Annual Return: 46.39%
Sharpe Ratio: 1.51565
Sortino Ratio: 1.473
Max Drawdown: -58.1%
Avg Drawdown: -12.6%
Normalized Score: 0.259
Lookback periods: [144, 157, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 5sRunning iteration 21/1500... Est. remaining: 19m 29sRunning iteration 31/1500... Est. remaining: 16m 59sRunning iteration 41/1500... Est. remaining: 15m 45sRunning iteration 51/1500... Est. remaining: 14m 59sRunning iteration 61/1500... Est. remaining: 14m 26sRunning iteration 71/1500... Est. remaining: 14m 1sRunning iteration 81/1500... Est. remaining: 13m 43sRunning iteration 91/1500... Est. remaining: 13m 28sRunning iteration 101/1500... Est. remaining: 13m 13sbest_combination: {'lookbacks': [144, 157, 184], 'score': np.float64(0.2589671927019117), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 1sRunning iteration 121/1500... Est. remaining: 12m 50sRunning iteration 131/1500... Est. remaining: 12m 40sRunning iteration 141/1500... Est. remaining: 12m 30sRunning iteration 151/1500... Est. remaining: 12m 21sRunning iteration 161/1500... Est. remaining: 12m 11sRunning iteration 171/1500... Est. remaining: 12m 3sRunning iteration 181/1500... Est. remaining: 11m 55sRunning iteration 191/1500... Est. remaining: 11m 48sRunning iteration 201/1500... Est. remaining: 11m 40sbest_combination: {'lookbacks': [144, 157, 184], 'score': np.float64(0.2589671927019117), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,331,152,379
Annual Return: 46.30%
Sharpe Ratio: 1.52050
Sortino Ratio: 1.479
Max Drawdown: -58.5%
Avg Drawdown: -11.8%
Normalized Score: 0.367
Lookback periods: [137, 155, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 11m 33sRunning iteration 231/1500... Est. remaining: 11m 26sRunning iteration 241/1500... Est. remaining: 11m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,276,127
Annual Return: 46.34%
Sharpe Ratio: 1.51287
Sortino Ratio: 1.476
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.500
Lookback periods: [155, 168, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 11m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,004,819,380
Annual Return: 47.45%
Sharpe Ratio: 1.53564
Sortino Ratio: 1.502
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: 0.504
Lookback periods: [152, 158, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 11m 18sRunning iteration 271/1500... Est. remaining: 11m 11sRunning iteration 281/1500... Est. remaining: 11m 4sRunning iteration 291/1500... Est. remaining: 10m 57sRunning iteration 301/1500... Est. remaining: 10m 51sbest_combination: {'lookbacks': [152, 158, 197], 'score': np.float64(0.5044173627218635), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 44sRunning iteration 321/1500... Est. remaining: 10m 37sRunning iteration 331/1500... Est. remaining: 10m 31sRunning iteration 341/1500... Est. remaining: 10m 24sRunning iteration 351/1500... Est. remaining: 10m 18sRunning iteration 361/1500... Est. remaining: 10m 12sRunning iteration 371/1500... Est. remaining: 10m 6sRunning iteration 381/1500... Est. remaining: 10m 0sRunning iteration 391/1500... Est. remaining: 9m 54sRunning iteration 401/1500... Est. remaining: 9m 48sbest_combination: {'lookbacks': [152, 158, 197], 'score': np.float64(0.5044173627218635), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 42sRunning iteration 421/1500... Est. remaining: 9m 37sRunning iteration 431/1500... Est. remaining: 9m 31sRunning iteration 441/1500... Est. remaining: 9m 25sRunning iteration 451/1500... Est. remaining: 9m 19sRunning iteration 461/1500... Est. remaining: 9m 13sRunning iteration 471/1500... Est. remaining: 9m 8sRunning iteration 481/1500... Est. remaining: 9m 2sRunning iteration 491/1500... Est. remaining: 8m 56sRunning iteration 501/1500... Est. remaining: 8m 50sbest_combination: {'lookbacks': [152, 158, 197], 'score': np.float64(0.5044173627218635), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 45sRunning iteration 521/1500... Est. remaining: 8m 39sRunning iteration 531/1500... Est. remaining: 8m 33sRunning iteration 541/1500... Est. remaining: 8m 28sRunning iteration 551/1500... Est. remaining: 8m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,324,038,540
Annual Return: 47.02%
Sharpe Ratio: 1.54471
Sortino Ratio: 1.503
Max Drawdown: -58.2%
Avg Drawdown: -11.8%
Normalized Score: 0.506
Lookback periods: [146, 156, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,580,864,228
Annual Return: 48.32%
Sharpe Ratio: 1.58450
Sortino Ratio: 1.536
Max Drawdown: -57.2%
Avg Drawdown: -12.0%
Normalized Score: 0.747
Lookback periods: [139, 156, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 8m 21sRunning iteration 571/1500... Est. remaining: 8m 15sRunning iteration 581/1500... Est. remaining: 8m 9sRunning iteration 591/1500... Est. remaining: 8m 4sRunning iteration 601/1500... Est. remaining: 7m 58sbest_combination: {'lookbacks': [139, 156, 183], 'score': np.float64(0.7472414042768206), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 52sRunning iteration 621/1500... Est. remaining: 7m 47sRunning iteration 631/1500... Est. remaining: 7m 41sRunning iteration 641/1500... Est. remaining: 7m 36sRunning iteration 651/1500... Est. remaining: 7m 30sRunning iteration 661/1500... Est. remaining: 7m 25sRunning iteration 671/1500... Est. remaining: 7m 19sRunning iteration 681/1500... Est. remaining: 7m 14sRunning iteration 691/1500... Est. remaining: 7m 8sRunning iteration 701/1500... Est. remaining: 7m 2sbest_combination: {'lookbacks': [139, 156, 183], 'score': np.float64(0.7472414042768206), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 57sRunning iteration 721/1500... Est. remaining: 6m 52sRunning iteration 731/1500... Est. remaining: 6m 46sRunning iteration 741/1500... Est. remaining: 6m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,691,094,595
Annual Return: 41.53%
Sharpe Ratio: 1.51027
Sortino Ratio: 1.421
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.065
Lookback periods: [42, 51, 58] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,048,633,365
Annual Return: 42.31%
Sharpe Ratio: 1.52305
Sortino Ratio: 1.434
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.141
Lookback periods: [41, 50, 52] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 6m 37sRunning iteration 761/1500... Est. remaining: 6m 32sRunning iteration 771/1500... Est. remaining: 6m 26sRunning iteration 781/1500... Est. remaining: 6m 21sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [41, 50, 52], 'score': np.float64(1.1414716425029403), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 4sRunning iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 53sRunning iteration 841/1500... Est. remaining: 5m 48sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 37sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [41, 50, 52], 'score': np.float64(1.1414716425029403), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,269,462,199
Annual Return: 42.74%
Sharpe Ratio: 1.53581
Sortino Ratio: 1.442
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.191
Lookback periods: [41, 52, 54] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 55sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 44sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [41, 52, 54], 'score': np.float64(1.1911794643992584), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [41, 52, 54], 'score': np.float64(1.1911794643992584), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [41, 52, 54], 'score': np.float64(1.1911794643992584), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,166,272,760
Annual Return: 42.54%
Sharpe Ratio: 1.54849
Sortino Ratio: 1.453
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.204
Lookback periods: [41, 48, 54] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [41, 48, 54], 'score': np.float64(1.2038023353867353), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [41, 48, 54], 'score': np.float64(1.2038023353867353), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,017,134,260
Annual Return: 42.25%
Sharpe Ratio: 1.54140
Sortino Ratio: 1.442
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.224
Lookback periods: [41, 48, 55] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,171,924,280
Annual Return: 42.56%
Sharpe Ratio: 1.54012
Sortino Ratio: 1.450
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.245
Lookback periods: [41, 51, 52] days
==================================================
Best parameters logged to: abacus_best_performers.csv

Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.25
best_combination: {'lookbacks': [41, 51, 52], 'score': np.float64(1.2451060607197362), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 51, 52] (score: 1.2451)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 51, 52] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 105 selections (25.2%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pine: 87 selections (20.9%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $2,171,924,279.55
Average Annualized Gain: 42.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 18:00:34 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $351,140,649
Annual Return: 35.25%
Sharpe Ratio: 1.18963
Sortino Ratio: 1.128
Max Drawdown: -75.6%
Avg Drawdown: -15.3%
Normalized Score: -1.995
Lookback periods: [99, 164, 233] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $767,987,835
Annual Return: 38.34%
Sharpe Ratio: 1.32535
Sortino Ratio: 1.230
Max Drawdown: -62.2%
Avg Drawdown: -13.2%
Normalized Score: -0.872
Lookback periods: [56, 105, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,463,736,715
Annual Return: 40.94%
Sharpe Ratio: 1.37312
Sortino Ratio: 1.312
Max Drawdown: -59.0%
Avg Drawdown: -12.3%
Normalized Score: -0.416
Lookback periods: [182, 290, 298] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 22sRunning iteration 21/1500... Est. remaining: 21m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,618,839,983
Annual Return: 43.33%
Sharpe Ratio: 1.41848
Sortino Ratio: 1.388
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: -0.140
Lookback periods: [160, 175, 209] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 52sRunning iteration 41/1500... Est. remaining: 17m 57sRunning iteration 51/1500... Est. remaining: 16m 46sRunning iteration 61/1500... Est. remaining: 15m 56sRunning iteration 71/1500... Est. remaining: 15m 19sRunning iteration 81/1500... Est. remaining: 14m 50sRunning iteration 91/1500... Est. remaining: 14m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $351,961,850
Annual Return: 35.26%
Sharpe Ratio: 1.27987
Sortino Ratio: 1.174
Max Drawdown: -43.1%
Avg Drawdown: -10.7%
Normalized Score: -0.060
Lookback periods: [33, 35, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 14m 22sbest_combination: {'lookbacks': [33, 35, 184], 'score': np.float64(-0.060200026128977416), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 4sRunning iteration 121/1500... Est. remaining: 13m 47sRunning iteration 131/1500... Est. remaining: 13m 32sRunning iteration 141/1500... Est. remaining: 13m 19sRunning iteration 151/1500... Est. remaining: 13m 6sRunning iteration 161/1500... Est. remaining: 12m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,665,924,535
Annual Return: 44.72%
Sharpe Ratio: 1.46479
Sortino Ratio: 1.414
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: -0.007
Lookback periods: [179, 183, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 12m 53sRunning iteration 181/1500... Est. remaining: 12m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,399,829,940
Annual Return: 40.76%
Sharpe Ratio: 1.38623
Sortino Ratio: 1.321
Max Drawdown: -52.3%
Avg Drawdown: -10.8%
Normalized Score: 0.028
Lookback periods: [80, 127, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 12m 41sRunning iteration 201/1500... Est. remaining: 12m 31sbest_combination: {'lookbacks': [80, 127, 147], 'score': np.float64(0.02846276501597933), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,812,327,182
Annual Return: 41.81%
Sharpe Ratio: 1.44573
Sortino Ratio: 1.347
Max Drawdown: -52.3%
Avg Drawdown: -10.0%
Normalized Score: 0.239
Lookback periods: [50, 98, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 12m 20sRunning iteration 231/1500... Est. remaining: 12m 10sRunning iteration 241/1500... Est. remaining: 12m 1sRunning iteration 251/1500... Est. remaining: 11m 53sRunning iteration 261/1500... Est. remaining: 11m 44sRunning iteration 271/1500... Est. remaining: 11m 36sRunning iteration 281/1500... Est. remaining: 11m 28sRunning iteration 291/1500... Est. remaining: 11m 20sRunning iteration 301/1500... Est. remaining: 11m 13sbest_combination: {'lookbacks': [50, 98, 143], 'score': np.float64(0.23869164695860548), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 5sRunning iteration 321/1500... Est. remaining: 10m 58sRunning iteration 331/1500... Est. remaining: 10m 51sRunning iteration 341/1500... Est. remaining: 10m 44sRunning iteration 351/1500... Est. remaining: 10m 37sRunning iteration 361/1500... Est. remaining: 10m 30sRunning iteration 371/1500... Est. remaining: 10m 23sRunning iteration 381/1500... Est. remaining: 10m 17sRunning iteration 391/1500... Est. remaining: 10m 10sRunning iteration 401/1500... Est. remaining: 10m 4sbest_combination: {'lookbacks': [50, 98, 143], 'score': np.float64(0.23869164695860548), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,683,050,853
Annual Return: 41.51%
Sharpe Ratio: 1.44827
Sortino Ratio: 1.348
Max Drawdown: -52.3%
Avg Drawdown: -9.9%
Normalized Score: 0.245
Lookback periods: [49, 102, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 54sRunning iteration 431/1500... Est. remaining: 9m 48sRunning iteration 441/1500... Est. remaining: 9m 41sRunning iteration 451/1500... Est. remaining: 9m 35sRunning iteration 461/1500... Est. remaining: 9m 29sRunning iteration 471/1500... Est. remaining: 9m 23sRunning iteration 481/1500... Est. remaining: 9m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,582,366,173
Annual Return: 41.26%
Sharpe Ratio: 1.50350
Sortino Ratio: 1.391
Max Drawdown: -51.1%
Avg Drawdown: -10.7%
Normalized Score: 0.315
Lookback periods: [36, 56, 122] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 9m 13sRunning iteration 501/1500... Est. remaining: 9m 7sbest_combination: {'lookbacks': [36, 56, 122], 'score': np.float64(0.3151736662234121), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 1sRunning iteration 521/1500... Est. remaining: 8m 55sRunning iteration 531/1500... Est. remaining: 8m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,138,512,243
Annual Return: 42.49%
Sharpe Ratio: 1.54082
Sortino Ratio: 1.426
Max Drawdown: -51.1%
Avg Drawdown: -10.5%
Normalized Score: 0.460
Lookback periods: [36, 54, 119] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 8m 45sRunning iteration 551/1500... Est. remaining: 8m 39sRunning iteration 561/1500... Est. remaining: 8m 33sRunning iteration 571/1500... Est. remaining: 8m 27sRunning iteration 581/1500... Est. remaining: 8m 21sRunning iteration 591/1500... Est. remaining: 8m 15sRunning iteration 601/1500... Est. remaining: 8m 9sbest_combination: {'lookbacks': [36, 54, 119], 'score': np.float64(0.45977778554365567), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 3sRunning iteration 621/1500... Est. remaining: 7m 57sRunning iteration 631/1500... Est. remaining: 7m 51sRunning iteration 641/1500... Est. remaining: 7m 45sRunning iteration 651/1500... Est. remaining: 7m 39sRunning iteration 661/1500... Est. remaining: 7m 34sRunning iteration 671/1500... Est. remaining: 7m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $700,491,226
Annual Return: 37.98%
Sharpe Ratio: 1.38355
Sortino Ratio: 1.278
Max Drawdown: -35.5%
Avg Drawdown: -10.1%
Normalized Score: 0.627
Lookback periods: [37, 84, 93] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 7m 23sRunning iteration 691/1500... Est. remaining: 7m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $878,981,289
Annual Return: 38.88%
Sharpe Ratio: 1.44026
Sortino Ratio: 1.333
Max Drawdown: -37.5%
Avg Drawdown: -9.4%
Normalized Score: 0.781
Lookback periods: [36, 87, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/1500... Est. remaining: 7m 13sbest_combination: {'lookbacks': [36, 87, 94], 'score': np.float64(0.7811391395261372), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,156,840,288
Annual Return: 42.53%
Sharpe Ratio: 1.54069
Sortino Ratio: 1.437
Max Drawdown: -36.7%
Avg Drawdown: -8.6%
Normalized Score: 1.248
Lookback periods: [33, 94, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 711/1500... Est. remaining: 7m 9sRunning iteration 721/1500... Est. remaining: 7m 3sRunning iteration 731/1500... Est. remaining: 6m 57sRunning iteration 741/1500... Est. remaining: 6m 52sRunning iteration 751/1500... Est. remaining: 6m 46sRunning iteration 761/1500... Est. remaining: 6m 40sRunning iteration 771/1500... Est. remaining: 6m 34sRunning iteration 781/1500... Est. remaining: 6m 29sRunning iteration 791/1500... Est. remaining: 6m 23sRunning iteration 801/1500... Est. remaining: 6m 17sbest_combination: {'lookbacks': [33, 94, 96], 'score': np.float64(1.2484647504516722), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 12sRunning iteration 821/1500... Est. remaining: 6m 6sRunning iteration 831/1500... Est. remaining: 6m 0sRunning iteration 841/1500... Est. remaining: 5m 55sRunning iteration 851/1500... Est. remaining: 5m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,485,378,919
Annual Return: 43.11%
Sharpe Ratio: 1.56559
Sortino Ratio: 1.454
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.471
Lookback periods: [33, 95, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 5m 44sRunning iteration 871/1500... Est. remaining: 5m 39sRunning iteration 881/1500... Est. remaining: 5m 33sRunning iteration 891/1500... Est. remaining: 5m 28sRunning iteration 901/1500... Est. remaining: 5m 22sbest_combination: {'lookbacks': [33, 95, 96], 'score': np.float64(1.4712431302485782), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 16sRunning iteration 921/1500... Est. remaining: 5m 11sRunning iteration 931/1500... Est. remaining: 5m 5sRunning iteration 941/1500... Est. remaining: 5m 0sRunning iteration 951/1500... Est. remaining: 4m 54sRunning iteration 961/1500... Est. remaining: 4m 49sRunning iteration 971/1500... Est. remaining: 4m 43sRunning iteration 981/1500... Est. remaining: 4m 38sRunning iteration 991/1500... Est. remaining: 4m 32sRunning iteration 1001/1500... Est. remaining: 4m 27sbest_combination: {'lookbacks': [33, 95, 96], 'score': np.float64(1.4712431302485782), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 21sRunning iteration 1021/1500... Est. remaining: 4m 16sRunning iteration 1031/1500... Est. remaining: 4m 10sRunning iteration 1041/1500... Est. remaining: 4m 5sRunning iteration 1051/1500... Est. remaining: 3m 59sRunning iteration 1061/1500... Est. remaining: 3m 54sRunning iteration 1071/1500... Est. remaining: 3m 49sRunning iteration 1081/1500... Est. remaining: 3m 43sRunning iteration 1091/1500... Est. remaining: 3m 38sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [33, 95, 96], 'score': np.float64(1.4712431302485782), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 27sRunning iteration 1121/1500... Est. remaining: 3m 21sRunning iteration 1131/1500... Est. remaining: 3m 16sRunning iteration 1141/1500... Est. remaining: 3m 11sRunning iteration 1151/1500... Est. remaining: 3m 5sRunning iteration 1161/1500... Est. remaining: 3m 0sRunning iteration 1171/1500... Est. remaining: 2m 54sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 44sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [33, 95, 96], 'score': np.float64(1.4712431302485782), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 33sRunning iteration 1221/1500... Est. remaining: 2m 28sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [33, 95, 96], 'score': np.float64(1.4712431302485782), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [33, 95, 96], 'score': np.float64(1.4712431302485782), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.47
best_combination: {'lookbacks': [33, 95, 96], 'score': np.float64(1.4712431302485782), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [33, 95, 96] (score: 1.4712)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [33, 95, 96] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 117 selections (28.1%)
2. naz100_hma: 92 selections (22.1%)
3. naz100_pi: 83 selections (20.0%)
4. naz100_pine: 67 selections (16.1%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $2,485,378,919.02
Average Annualized Gain: 43.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 18:13:48 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $98,055,570
Annual Return: 30.37%
Sharpe Ratio: 1.04897
Sortino Ratio: 0.962
Max Drawdown: -67.1%
Avg Drawdown: -14.8%
Normalized Score: -2.189
Lookback periods: [64, 280, 297] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $298,856,946
Annual Return: 34.63%
Sharpe Ratio: 1.18765
Sortino Ratio: 1.113
Max Drawdown: -69.2%
Avg Drawdown: -13.6%
Normalized Score: -1.626
Lookback periods: [89, 204, 273] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,112,306,619
Annual Return: 39.83%
Sharpe Ratio: 1.31613
Sortino Ratio: 1.279
Max Drawdown: -70.2%
Avg Drawdown: -13.5%
Normalized Score: -1.096
Lookback periods: [153, 215, 258] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $745,832,612
Annual Return: 38.23%
Sharpe Ratio: 1.36172
Sortino Ratio: 1.265
Max Drawdown: -62.4%
Avg Drawdown: -12.1%
Normalized Score: -0.866
Lookback periods: [38, 47, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,617,290,530
Annual Return: 43.32%
Sharpe Ratio: 1.43334
Sortino Ratio: 1.373
Max Drawdown: -62.2%
Avg Drawdown: -12.1%
Normalized Score: -0.453
Lookback periods: [190, 263, 298] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 35m 10sRunning iteration 21/1500... Est. remaining: 23m 53sRunning iteration 31/1500... Est. remaining: 20m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,789,268,926
Annual Return: 43.59%
Sharpe Ratio: 1.45412
Sortino Ratio: 1.411
Max Drawdown: -57.5%
Avg Drawdown: -13.0%
Normalized Score: -0.358
Lookback periods: [108, 136, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 46sRunning iteration 51/1500... Est. remaining: 17m 25sRunning iteration 61/1500... Est. remaining: 16m 31sRunning iteration 71/1500... Est. remaining: 15m 47sRunning iteration 81/1500... Est. remaining: 15m 14sRunning iteration 91/1500... Est. remaining: 14m 47sRunning iteration 101/1500... Est. remaining: 14m 24sbest_combination: {'lookbacks': [108, 136, 147], 'score': np.float64(-0.3576153520834821), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,678,652,284
Annual Return: 44.74%
Sharpe Ratio: 1.46572
Sortino Ratio: 1.427
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: -0.148
Lookback periods: [157, 167, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 21sRunning iteration 121/1500... Est. remaining: 14m 4sRunning iteration 131/1500... Est. remaining: 13m 48sRunning iteration 141/1500... Est. remaining: 13m 33sRunning iteration 151/1500... Est. remaining: 13m 19sRunning iteration 161/1500... Est. remaining: 13m 7sRunning iteration 171/1500... Est. remaining: 12m 55sRunning iteration 181/1500... Est. remaining: 12m 44sRunning iteration 191/1500... Est. remaining: 12m 35sRunning iteration 201/1500... Est. remaining: 12m 25sbest_combination: {'lookbacks': [157, 167, 184], 'score': np.float64(-0.14796836123309975), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 16sRunning iteration 221/1500... Est. remaining: 12m 7sRunning iteration 231/1500... Est. remaining: 11m 58sRunning iteration 241/1500... Est. remaining: 11m 50sRunning iteration 251/1500... Est. remaining: 11m 42sRunning iteration 261/1500... Est. remaining: 11m 34sRunning iteration 271/1500... Est. remaining: 11m 26sRunning iteration 281/1500... Est. remaining: 11m 18sRunning iteration 291/1500... Est. remaining: 11m 11sRunning iteration 301/1500... Est. remaining: 11m 5sbest_combination: {'lookbacks': [157, 167, 184], 'score': np.float64(-0.14796836123309975), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 58sRunning iteration 321/1500... Est. remaining: 10m 51sRunning iteration 331/1500... Est. remaining: 10m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,631,698,644
Annual Return: 47.22%
Sharpe Ratio: 1.52765
Sortino Ratio: 1.488
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.058
Lookback periods: [181, 194, 208] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 341/1500... Est. remaining: 10m 42sRunning iteration 351/1500... Est. remaining: 10m 35sRunning iteration 361/1500... Est. remaining: 10m 28sRunning iteration 371/1500... Est. remaining: 10m 21sRunning iteration 381/1500... Est. remaining: 10m 15sRunning iteration 391/1500... Est. remaining: 10m 8sRunning iteration 401/1500... Est. remaining: 10m 2sbest_combination: {'lookbacks': [181, 194, 208], 'score': np.float64(0.05792650061252852), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 55sRunning iteration 421/1500... Est. remaining: 9m 49sRunning iteration 431/1500... Est. remaining: 9m 43sRunning iteration 441/1500... Est. remaining: 9m 36sRunning iteration 451/1500... Est. remaining: 9m 30sRunning iteration 461/1500... Est. remaining: 9m 24sRunning iteration 471/1500... Est. remaining: 9m 18sRunning iteration 481/1500... Est. remaining: 9m 12sRunning iteration 491/1500... Est. remaining: 9m 6sRunning iteration 501/1500... Est. remaining: 9m 0sbest_combination: {'lookbacks': [181, 194, 208], 'score': np.float64(0.05792650061252852), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 54sRunning iteration 521/1500... Est. remaining: 8m 48sRunning iteration 531/1500... Est. remaining: 8m 42sRunning iteration 541/1500... Est. remaining: 8m 36sRunning iteration 551/1500... Est. remaining: 8m 30sRunning iteration 561/1500... Est. remaining: 8m 24sRunning iteration 571/1500... Est. remaining: 8m 19sRunning iteration 581/1500... Est. remaining: 8m 13sRunning iteration 591/1500... Est. remaining: 8m 7sRunning iteration 601/1500... Est. remaining: 8m 2sbest_combination: {'lookbacks': [181, 194, 208], 'score': np.float64(0.05792650061252852), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 56sRunning iteration 621/1500... Est. remaining: 7m 50sRunning iteration 631/1500... Est. remaining: 7m 44sRunning iteration 641/1500... Est. remaining: 7m 39sRunning iteration 651/1500... Est. remaining: 7m 33sRunning iteration 661/1500... Est. remaining: 7m 27sRunning iteration 671/1500... Est. remaining: 7m 22sRunning iteration 681/1500... Est. remaining: 7m 16sRunning iteration 691/1500... Est. remaining: 7m 11sRunning iteration 701/1500... Est. remaining: 7m 5sbest_combination: {'lookbacks': [181, 194, 208], 'score': np.float64(0.05792650061252852), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,478,386,091
Annual Return: 47.73%
Sharpe Ratio: 1.57196
Sortino Ratio: 1.533
Max Drawdown: -56.9%
Avg Drawdown: -10.6%
Normalized Score: 0.288
Lookback periods: [146, 156, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 6m 55sRunning iteration 731/1500... Est. remaining: 6m 50sRunning iteration 741/1500... Est. remaining: 6m 44sRunning iteration 751/1500... Est. remaining: 6m 39sRunning iteration 761/1500... Est. remaining: 6m 33sRunning iteration 771/1500... Est. remaining: 6m 28sRunning iteration 781/1500... Est. remaining: 6m 22sRunning iteration 791/1500... Est. remaining: 6m 17sRunning iteration 801/1500... Est. remaining: 6m 11sbest_combination: {'lookbacks': [146, 156, 159], 'score': np.float64(0.28755195787231513), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 6sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 55sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 44sRunning iteration 861/1500... Est. remaining: 5m 39sRunning iteration 871/1500... Est. remaining: 5m 33sRunning iteration 881/1500... Est. remaining: 5m 28sRunning iteration 891/1500... Est. remaining: 5m 22sRunning iteration 901/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [146, 156, 159], 'score': np.float64(0.28755195787231513), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 11sRunning iteration 921/1500... Est. remaining: 5m 6sRunning iteration 931/1500... Est. remaining: 5m 1sRunning iteration 941/1500... Est. remaining: 4m 55sRunning iteration 951/1500... Est. remaining: 4m 50sRunning iteration 961/1500... Est. remaining: 4m 45sRunning iteration 971/1500... Est. remaining: 4m 39sRunning iteration 981/1500... Est. remaining: 4m 34sRunning iteration 991/1500... Est. remaining: 4m 29sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [146, 156, 159], 'score': np.float64(0.28755195787231513), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 18sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [146, 156, 159], 'score': np.float64(0.28755195787231513), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,923,289,983
Annual Return: 47.98%
Sharpe Ratio: 1.56305
Sortino Ratio: 1.530
Max Drawdown: -55.0%
Avg Drawdown: -10.8%
Normalized Score: 0.308
Lookback periods: [156, 161, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [156, 161, 169], 'score': np.float64(0.30807703083860993), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [156, 161, 169], 'score': np.float64(0.30807703083860993), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,500,750,747
Annual Return: 48.28%
Sharpe Ratio: 1.58360
Sortino Ratio: 1.548
Max Drawdown: -59.0%
Avg Drawdown: -10.5%
Normalized Score: 0.312
Lookback periods: [158, 160, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,101,733,499
Annual Return: 48.57%
Sharpe Ratio: 1.58790
Sortino Ratio: 1.554
Max Drawdown: -59.0%
Avg Drawdown: -10.4%
Normalized Score: 0.343
Lookback periods: [158, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [158, 161, 168], 'score': np.float64(0.34276809089304805), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 0.34
best_combination: {'lookbacks': [158, 161, 168], 'score': np.float64(0.34276809089304805), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [158, 161, 168] (score: 0.3428)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [158, 161, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 107 selections (25.7%)
3. naz100_pine: 81 selections (19.5%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,101,733,499.46
Average Annualized Gain: 48.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 18:27:01 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $137,681,731
Annual Return: 31.65%
Sharpe Ratio: 1.09845
Sortino Ratio: 1.007
Max Drawdown: -63.9%
Avg Drawdown: -15.0%
Normalized Score: -1.774
Lookback periods: [73, 88, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $305,319,583
Annual Return: 34.71%
Sharpe Ratio: 1.19465
Sortino Ratio: 1.111
Max Drawdown: -73.4%
Avg Drawdown: -13.7%
Normalized Score: -1.410
Lookback periods: [65, 167, 249] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $793,437,415
Annual Return: 38.47%
Sharpe Ratio: 1.29650
Sortino Ratio: 1.234
Max Drawdown: -66.8%
Avg Drawdown: -13.4%
Normalized Score: -0.768
Lookback periods: [126, 145, 297] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,175,854,539
Annual Return: 40.05%
Sharpe Ratio: 1.33034
Sortino Ratio: 1.283
Max Drawdown: -69.1%
Avg Drawdown: -13.0%
Normalized Score: -0.588
Lookback periods: [240, 243, 272] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 32m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,587,452,276
Annual Return: 43.28%
Sharpe Ratio: 1.44605
Sortino Ratio: 1.395
Max Drawdown: -64.7%
Avg Drawdown: -12.7%
Normalized Score: -0.018
Lookback periods: [148, 251, 254] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,505,661,219
Annual Return: 41.06%
Sharpe Ratio: 1.42940
Sortino Ratio: 1.332
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: 0.289
Lookback periods: [42, 121, 129] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 21m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,688,942,454
Annual Return: 46.57%
Sharpe Ratio: 1.51870
Sortino Ratio: 1.480
Max Drawdown: -60.0%
Avg Drawdown: -11.8%
Normalized Score: 0.561
Lookback periods: [158, 188, 207] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 19m 38sRunning iteration 51/1500... Est. remaining: 18m 4sRunning iteration 61/1500... Est. remaining: 17m 1sRunning iteration 71/1500... Est. remaining: 16m 14sRunning iteration 81/1500... Est. remaining: 15m 39sRunning iteration 91/1500... Est. remaining: 15m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,749,244,069
Annual Return: 46.62%
Sharpe Ratio: 1.51908
Sortino Ratio: 1.473
Max Drawdown: -59.6%
Avg Drawdown: -11.4%
Normalized Score: 0.615
Lookback periods: [182, 188, 214] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,605,513,198
Annual Return: 48.33%
Sharpe Ratio: 1.58377
Sortino Ratio: 1.545
Max Drawdown: -56.0%
Avg Drawdown: -12.1%
Normalized Score: 0.855
Lookback periods: [136, 158, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 15m 17sbest_combination: {'lookbacks': [136, 158, 187], 'score': np.float64(0.8547791702770393), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 53sRunning iteration 121/1500... Est. remaining: 14m 31sRunning iteration 131/1500... Est. remaining: 14m 12sRunning iteration 141/1500... Est. remaining: 13m 55sRunning iteration 151/1500... Est. remaining: 13m 39sRunning iteration 161/1500... Est. remaining: 13m 25sRunning iteration 171/1500... Est. remaining: 13m 12sRunning iteration 181/1500... Est. remaining: 13m 0sRunning iteration 191/1500... Est. remaining: 12m 49sRunning iteration 201/1500... Est. remaining: 12m 38sbest_combination: {'lookbacks': [136, 158, 187], 'score': np.float64(0.8547791702770393), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 28sRunning iteration 221/1500... Est. remaining: 12m 18sRunning iteration 231/1500... Est. remaining: 12m 8sRunning iteration 241/1500... Est. remaining: 11m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,670,357,069
Annual Return: 41.48%
Sharpe Ratio: 1.47928
Sortino Ratio: 1.390
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.152
Lookback periods: [46, 49, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 11m 57sRunning iteration 261/1500... Est. remaining: 11m 48sRunning iteration 271/1500... Est. remaining: 11m 39sRunning iteration 281/1500... Est. remaining: 11m 31sRunning iteration 291/1500... Est. remaining: 11m 23sRunning iteration 301/1500... Est. remaining: 11m 15sbest_combination: {'lookbacks': [46, 49, 100], 'score': np.float64(1.1518794024472228), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 8sRunning iteration 321/1500... Est. remaining: 11m 0sRunning iteration 331/1500... Est. remaining: 10m 53sRunning iteration 341/1500... Est. remaining: 10m 46sRunning iteration 351/1500... Est. remaining: 10m 39sRunning iteration 361/1500... Est. remaining: 10m 32sRunning iteration 371/1500... Est. remaining: 10m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,337,286,602
Annual Return: 44.33%
Sharpe Ratio: 1.60388
Sortino Ratio: 1.506
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.605
Lookback periods: [47, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 10m 21sRunning iteration 391/1500... Est. remaining: 10m 15sRunning iteration 401/1500... Est. remaining: 10m 8sbest_combination: {'lookbacks': [47, 52, 97], 'score': np.float64(1.6054477325438383), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 2sRunning iteration 421/1500... Est. remaining: 9m 55sRunning iteration 431/1500... Est. remaining: 9m 49sRunning iteration 441/1500... Est. remaining: 9m 42sRunning iteration 451/1500... Est. remaining: 9m 36sRunning iteration 461/1500... Est. remaining: 9m 29sRunning iteration 471/1500... Est. remaining: 9m 23sRunning iteration 481/1500... Est. remaining: 9m 16sRunning iteration 491/1500... Est. remaining: 9m 10sRunning iteration 501/1500... Est. remaining: 9m 4sbest_combination: {'lookbacks': [47, 52, 97], 'score': np.float64(1.6054477325438383), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 58sRunning iteration 521/1500... Est. remaining: 8m 52sRunning iteration 531/1500... Est. remaining: 8m 46sRunning iteration 541/1500... Est. remaining: 8m 40sRunning iteration 551/1500... Est. remaining: 8m 34sRunning iteration 561/1500... Est. remaining: 8m 28sRunning iteration 571/1500... Est. remaining: 8m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,990,604,798
Annual Return: 43.88%
Sharpe Ratio: 1.60202
Sortino Ratio: 1.503
Max Drawdown: -34.7%
Avg Drawdown: -7.6%
Normalized Score: 1.703
Lookback periods: [43, 51, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 8m 17sRunning iteration 591/1500... Est. remaining: 8m 12sRunning iteration 601/1500... Est. remaining: 8m 6sbest_combination: {'lookbacks': [43, 51, 97], 'score': np.float64(1.70257980829625), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 0sRunning iteration 621/1500... Est. remaining: 7m 54sRunning iteration 631/1500... Est. remaining: 7m 48sRunning iteration 641/1500... Est. remaining: 7m 42sRunning iteration 651/1500... Est. remaining: 7m 37sRunning iteration 661/1500... Est. remaining: 7m 31sRunning iteration 671/1500... Est. remaining: 7m 25sRunning iteration 681/1500... Est. remaining: 7m 19sRunning iteration 691/1500... Est. remaining: 7m 14sRunning iteration 701/1500... Est. remaining: 7m 8sbest_combination: {'lookbacks': [43, 51, 97], 'score': np.float64(1.70257980829625), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 2sRunning iteration 721/1500... Est. remaining: 6m 57sRunning iteration 731/1500... Est. remaining: 6m 51sRunning iteration 741/1500... Est. remaining: 6m 45sRunning iteration 751/1500... Est. remaining: 6m 39sRunning iteration 761/1500... Est. remaining: 6m 34sRunning iteration 771/1500... Est. remaining: 6m 28sRunning iteration 781/1500... Est. remaining: 6m 23sRunning iteration 791/1500... Est. remaining: 6m 17sRunning iteration 801/1500... Est. remaining: 6m 11sbest_combination: {'lookbacks': [43, 51, 97], 'score': np.float64(1.70257980829625), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 6sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 55sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 44sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 33sRunning iteration 881/1500... Est. remaining: 5m 27sRunning iteration 891/1500... Est. remaining: 5m 22sRunning iteration 901/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [43, 51, 97], 'score': np.float64(1.70257980829625), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 11sRunning iteration 921/1500... Est. remaining: 5m 6sRunning iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,900,997,505
Annual Return: 44.98%
Sharpe Ratio: 1.64710
Sortino Ratio: 1.543
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.841
Lookback periods: [41, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 4m 50sRunning iteration 961/1500... Est. remaining: 4m 45sRunning iteration 971/1500... Est. remaining: 4m 39sRunning iteration 981/1500... Est. remaining: 4m 34sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [41, 51, 98], 'score': np.float64(1.8412208465849271), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 18sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [41, 51, 98], 'score': np.float64(1.8412208465849271), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [41, 51, 98], 'score': np.float64(1.8412208465849271), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [41, 51, 98], 'score': np.float64(1.8412208465849271), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [41, 51, 98], 'score': np.float64(1.8412208465849271), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 1.84
best_combination: {'lookbacks': [41, 51, 98], 'score': np.float64(1.8412208465849271), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 51, 98] (score: 1.8412)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 51, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 93 selections (22.4%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 63 selections (15.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,900,997,504.91
Average Annualized Gain: 45.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 176m 47s
End time: Mon Aug 25 18:39:59 EDT 2025
Average time per successful run: 11m 47s
==============================================================
✓ All runs completed successfully!
