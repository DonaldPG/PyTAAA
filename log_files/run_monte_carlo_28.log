Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Mon Aug 25 23:06:45 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Mon Aug 25 23:06:45 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $599,001,337
Annual Return: 37.35%
Sharpe Ratio: 1.23826
Sortino Ratio: 1.186
Max Drawdown: -66.4%
Avg Drawdown: -13.2%
Normalized Score: -1.036
Lookback periods: [162, 219, 287] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $668,380,351
Annual Return: 37.79%
Sharpe Ratio: 1.27552
Sortino Ratio: 1.208
Max Drawdown: -67.8%
Avg Drawdown: -12.5%
Normalized Score: -0.911
Lookback periods: [96, 191, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,364,302,001
Annual Return: 40.66%
Sharpe Ratio: 1.36902
Sortino Ratio: 1.306
Max Drawdown: -66.4%
Avg Drawdown: -12.9%
Normalized Score: -0.485
Lookback periods: [135, 197, 265] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,806,483,153
Annual Return: 41.80%
Sharpe Ratio: 1.38123
Sortino Ratio: 1.337
Max Drawdown: -69.0%
Avg Drawdown: -13.0%
Normalized Score: -0.376
Lookback periods: [112, 181, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,799,010,545
Annual Return: 41.78%
Sharpe Ratio: 1.38855
Sortino Ratio: 1.351
Max Drawdown: -63.1%
Avg Drawdown: -12.0%
Normalized Score: -0.255
Lookback periods: [172, 228, 256] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,224,423,475
Annual Return: 44.19%
Sharpe Ratio: 1.46561
Sortino Ratio: 1.419
Max Drawdown: -60.1%
Avg Drawdown: -12.2%
Normalized Score: 0.102
Lookback periods: [122, 157, 206] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 51sRunning iteration 51/1500... Est. remaining: 16m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,282,300,876
Annual Return: 42.76%
Sharpe Ratio: 1.48842
Sortino Ratio: 1.397
Max Drawdown: -52.3%
Avg Drawdown: -9.9%
Normalized Score: 0.166
Lookback periods: [42, 110, 119] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 10sRunning iteration 71/1500... Est. remaining: 15m 27sRunning iteration 81/1500... Est. remaining: 14m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,400,069,572
Annual Return: 45.49%
Sharpe Ratio: 1.49850
Sortino Ratio: 1.460
Max Drawdown: -55.0%
Avg Drawdown: -12.0%
Normalized Score: 0.336
Lookback periods: [130, 139, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 41sRunning iteration 101/1500... Est. remaining: 14m 16sbest_combination: {'lookbacks': [130, 139, 174], 'score': np.float64(0.33562050308626495), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 54sRunning iteration 121/1500... Est. remaining: 13m 34sRunning iteration 131/1500... Est. remaining: 13m 16sRunning iteration 141/1500... Est. remaining: 13m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,776,546,473
Annual Return: 47.31%
Sharpe Ratio: 1.55300
Sortino Ratio: 1.514
Max Drawdown: -61.1%
Avg Drawdown: -11.1%
Normalized Score: 0.583
Lookback periods: [135, 154, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 12m 58sRunning iteration 161/1500... Est. remaining: 12m 45sRunning iteration 171/1500... Est. remaining: 12m 33sRunning iteration 181/1500... Est. remaining: 12m 21sRunning iteration 191/1500... Est. remaining: 12m 10sRunning iteration 201/1500... Est. remaining: 11m 59sbest_combination: {'lookbacks': [135, 154, 205], 'score': np.float64(0.5832806690881911), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 49sRunning iteration 221/1500... Est. remaining: 11m 41sRunning iteration 231/1500... Est. remaining: 11m 32sRunning iteration 241/1500... Est. remaining: 11m 23sRunning iteration 251/1500... Est. remaining: 11m 16sRunning iteration 261/1500... Est. remaining: 11m 8sRunning iteration 271/1500... Est. remaining: 11m 0sRunning iteration 281/1500... Est. remaining: 10m 52sRunning iteration 291/1500... Est. remaining: 10m 45sRunning iteration 301/1500... Est. remaining: 10m 38sbest_combination: {'lookbacks': [135, 154, 205], 'score': np.float64(0.5832806690881911), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 30sRunning iteration 321/1500... Est. remaining: 10m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,380,366,097
Annual Return: 44.39%
Sharpe Ratio: 1.60667
Sortino Ratio: 1.509
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 0.772
Lookback periods: [47, 52, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 331/1500... Est. remaining: 10m 21sRunning iteration 341/1500... Est. remaining: 10m 14sRunning iteration 351/1500... Est. remaining: 10m 7sRunning iteration 361/1500... Est. remaining: 10m 1sRunning iteration 371/1500... Est. remaining: 9m 54sRunning iteration 381/1500... Est. remaining: 9m 47sRunning iteration 391/1500... Est. remaining: 9m 41sRunning iteration 401/1500... Est. remaining: 9m 35sbest_combination: {'lookbacks': [47, 52, 89], 'score': np.float64(0.7723710660998603), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 29sRunning iteration 421/1500... Est. remaining: 9m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,183,237,143
Annual Return: 45.28%
Sharpe Ratio: 1.64397
Sortino Ratio: 1.550
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 0.944
Lookback periods: [45, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 9m 19sRunning iteration 441/1500... Est. remaining: 9m 13sRunning iteration 451/1500... Est. remaining: 9m 7sRunning iteration 461/1500... Est. remaining: 9m 1sRunning iteration 471/1500... Est. remaining: 8m 55sRunning iteration 481/1500... Est. remaining: 8m 49sRunning iteration 491/1500... Est. remaining: 8m 43sRunning iteration 501/1500... Est. remaining: 8m 37sbest_combination: {'lookbacks': [45, 52, 97], 'score': np.float64(0.9436145983922716), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 32sRunning iteration 521/1500... Est. remaining: 8m 26sRunning iteration 531/1500... Est. remaining: 8m 20sRunning iteration 541/1500... Est. remaining: 8m 14sRunning iteration 551/1500... Est. remaining: 8m 9sRunning iteration 561/1500... Est. remaining: 8m 3sRunning iteration 571/1500... Est. remaining: 7m 57sRunning iteration 581/1500... Est. remaining: 7m 52sRunning iteration 591/1500... Est. remaining: 7m 46sRunning iteration 601/1500... Est. remaining: 7m 41sbest_combination: {'lookbacks': [45, 52, 97], 'score': np.float64(0.9436145983922716), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 35sRunning iteration 621/1500... Est. remaining: 7m 30sRunning iteration 631/1500... Est. remaining: 7m 24sRunning iteration 641/1500... Est. remaining: 7m 19sRunning iteration 651/1500... Est. remaining: 7m 13sRunning iteration 661/1500... Est. remaining: 7m 8sRunning iteration 671/1500... Est. remaining: 7m 2sRunning iteration 681/1500... Est. remaining: 6m 57sRunning iteration 691/1500... Est. remaining: 6m 52sRunning iteration 701/1500... Est. remaining: 6m 46sbest_combination: {'lookbacks': [45, 52, 97], 'score': np.float64(0.9436145983922716), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 41sRunning iteration 721/1500... Est. remaining: 6m 36sRunning iteration 731/1500... Est. remaining: 6m 30sRunning iteration 741/1500... Est. remaining: 6m 25sRunning iteration 751/1500... Est. remaining: 6m 20sRunning iteration 761/1500... Est. remaining: 6m 14sRunning iteration 771/1500... Est. remaining: 6m 9sRunning iteration 781/1500... Est. remaining: 6m 4sRunning iteration 791/1500... Est. remaining: 5m 59sRunning iteration 801/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [45, 52, 97], 'score': np.float64(0.9436145983922716), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 48sRunning iteration 821/1500... Est. remaining: 5m 43sRunning iteration 831/1500... Est. remaining: 5m 38sRunning iteration 841/1500... Est. remaining: 5m 32sRunning iteration 851/1500... Est. remaining: 5m 27sRunning iteration 861/1500... Est. remaining: 5m 22sRunning iteration 871/1500... Est. remaining: 5m 17sRunning iteration 881/1500... Est. remaining: 5m 12sRunning iteration 891/1500... Est. remaining: 5m 6sRunning iteration 901/1500... Est. remaining: 5m 1sbest_combination: {'lookbacks': [45, 52, 97], 'score': np.float64(0.9436145983922716), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 56sRunning iteration 921/1500... Est. remaining: 4m 51sRunning iteration 931/1500... Est. remaining: 4m 46sRunning iteration 941/1500... Est. remaining: 4m 41sRunning iteration 951/1500... Est. remaining: 4m 36sRunning iteration 961/1500... Est. remaining: 4m 31sRunning iteration 971/1500... Est. remaining: 4m 25sRunning iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 15sRunning iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [45, 52, 97], 'score': np.float64(0.9436145983922716), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 5sRunning iteration 1021/1500... Est. remaining: 4m 0sRunning iteration 1031/1500... Est. remaining: 3m 55sRunning iteration 1041/1500... Est. remaining: 3m 50sRunning iteration 1051/1500... Est. remaining: 3m 45sRunning iteration 1061/1500... Est. remaining: 3m 39sRunning iteration 1071/1500... Est. remaining: 3m 34sRunning iteration 1081/1500... Est. remaining: 3m 29sRunning iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [45, 52, 97], 'score': np.float64(0.9436145983922716), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4sRunning iteration 1141/1500... Est. remaining: 2m 59sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,083,243,334
Annual Return: 46.10%
Sharpe Ratio: 1.66852
Sortino Ratio: 1.569
Max Drawdown: -34.7%
Avg Drawdown: -8.1%
Normalized Score: 1.059
Lookback periods: [42, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [42, 50, 98], 'score': np.float64(1.0587405268482448), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [42, 50, 98], 'score': np.float64(1.0587405268482448), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [42, 50, 98], 'score': np.float64(1.0587405268482448), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,008,937,375
Annual Return: 46.03%
Sharpe Ratio: 1.67914
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.072
Lookback periods: [41, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.07
best_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.0716665494993427), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 52, 98] (score: 1.0717)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,008,937,374.54
Average Annualized Gain: 46.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Mon Aug 25 23:19:15 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $403,520,515
Annual Return: 35.80%
Sharpe Ratio: 1.23663
Sortino Ratio: 1.157
Max Drawdown: -67.4%
Avg Drawdown: -14.1%
Normalized Score: -1.346
Lookback periods: [87, 153, 272] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,338,330,113
Annual Return: 40.58%
Sharpe Ratio: 1.35090
Sortino Ratio: 1.294
Max Drawdown: -68.6%
Avg Drawdown: -13.2%
Normalized Score: -0.488
Lookback periods: [110, 182, 206] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,952,391,195
Annual Return: 42.12%
Sharpe Ratio: 1.38455
Sortino Ratio: 1.334
Max Drawdown: -67.6%
Avg Drawdown: -13.5%
Normalized Score: -0.223
Lookback periods: [106, 194, 202] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,118,687,012
Annual Return: 42.45%
Sharpe Ratio: 1.39197
Sortino Ratio: 1.349
Max Drawdown: -67.8%
Avg Drawdown: -12.8%
Normalized Score: -0.137
Lookback periods: [176, 204, 273] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,000,211,951
Annual Return: 42.22%
Sharpe Ratio: 1.42454
Sortino Ratio: 1.360
Max Drawdown: -52.3%
Avg Drawdown: -11.5%
Normalized Score: 0.113
Lookback periods: [88, 103, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,718,963,083
Annual Return: 43.48%
Sharpe Ratio: 1.43547
Sortino Ratio: 1.390
Max Drawdown: -64.7%
Avg Drawdown: -12.8%
Normalized Score: 0.123
Lookback periods: [123, 169, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,505,994,250
Annual Return: 44.54%
Sharpe Ratio: 1.46841
Sortino Ratio: 1.429
Max Drawdown: -63.0%
Avg Drawdown: -12.4%
Normalized Score: 0.365
Lookback periods: [175, 241, 248] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 58sRunning iteration 41/1500... Est. remaining: 18m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,226,370,282
Annual Return: 45.32%
Sharpe Ratio: 1.46174
Sortino Ratio: 1.431
Max Drawdown: -63.8%
Avg Drawdown: -12.1%
Normalized Score: 0.439
Lookback periods: [173, 192, 229] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 17m 40sRunning iteration 61/1500... Est. remaining: 16m 34sRunning iteration 71/1500... Est. remaining: 15m 47sRunning iteration 81/1500... Est. remaining: 15m 9sRunning iteration 91/1500... Est. remaining: 14m 40sRunning iteration 101/1500... Est. remaining: 14m 14sbest_combination: {'lookbacks': [173, 192, 229], 'score': np.float64(0.4385235112726494), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 53sRunning iteration 121/1500... Est. remaining: 13m 35sRunning iteration 131/1500... Est. remaining: 13m 18sRunning iteration 141/1500... Est. remaining: 13m 4sRunning iteration 151/1500... Est. remaining: 12m 50sRunning iteration 161/1500... Est. remaining: 12m 37sRunning iteration 171/1500... Est. remaining: 12m 25sRunning iteration 181/1500... Est. remaining: 12m 14sRunning iteration 191/1500... Est. remaining: 12m 4sRunning iteration 201/1500... Est. remaining: 11m 55sbest_combination: {'lookbacks': [173, 192, 229], 'score': np.float64(0.4385235112726494), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 45sRunning iteration 221/1500... Est. remaining: 11m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,613,624,414
Annual Return: 47.21%
Sharpe Ratio: 1.53633
Sortino Ratio: 1.492
Max Drawdown: -60.8%
Avg Drawdown: -11.8%
Normalized Score: 0.860
Lookback periods: [149, 184, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 11m 35sRunning iteration 241/1500... Est. remaining: 11m 26sRunning iteration 251/1500... Est. remaining: 11m 18sRunning iteration 261/1500... Est. remaining: 11m 10sRunning iteration 271/1500... Est. remaining: 11m 2sRunning iteration 281/1500... Est. remaining: 10m 54sRunning iteration 291/1500... Est. remaining: 10m 47sRunning iteration 301/1500... Est. remaining: 10m 39sbest_combination: {'lookbacks': [149, 184, 198], 'score': np.float64(0.8597960620321571), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 32sRunning iteration 321/1500... Est. remaining: 10m 25sRunning iteration 331/1500... Est. remaining: 10m 18sRunning iteration 341/1500... Est. remaining: 10m 12sRunning iteration 351/1500... Est. remaining: 10m 5sRunning iteration 361/1500... Est. remaining: 9m 59sRunning iteration 371/1500... Est. remaining: 9m 52sRunning iteration 381/1500... Est. remaining: 9m 46sRunning iteration 391/1500... Est. remaining: 9m 40sRunning iteration 401/1500... Est. remaining: 9m 34sbest_combination: {'lookbacks': [149, 184, 198], 'score': np.float64(0.8597960620321571), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,816,610,951
Annual Return: 43.63%
Sharpe Ratio: 1.59957
Sortino Ratio: 1.504
Max Drawdown: -35.2%
Avg Drawdown: -9.2%
Normalized Score: 0.971
Lookback periods: [38, 49, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 24sRunning iteration 431/1500... Est. remaining: 9m 18sRunning iteration 441/1500... Est. remaining: 9m 12sRunning iteration 451/1500... Est. remaining: 9m 6sRunning iteration 461/1500... Est. remaining: 9m 0sRunning iteration 471/1500... Est. remaining: 8m 54sRunning iteration 481/1500... Est. remaining: 8m 48sRunning iteration 491/1500... Est. remaining: 8m 42sRunning iteration 501/1500... Est. remaining: 8m 36sbest_combination: {'lookbacks': [38, 49, 96], 'score': np.float64(0.9710919800485567), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 30sRunning iteration 521/1500... Est. remaining: 8m 25sRunning iteration 531/1500... Est. remaining: 8m 19sRunning iteration 541/1500... Est. remaining: 8m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,202,059,129
Annual Return: 44.16%
Sharpe Ratio: 1.58010
Sortino Ratio: 1.491
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.001
Lookback periods: [41, 50, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 10sRunning iteration 561/1500... Est. remaining: 8m 4sRunning iteration 571/1500... Est. remaining: 7m 59sRunning iteration 581/1500... Est. remaining: 7m 53sRunning iteration 591/1500... Est. remaining: 7m 47sRunning iteration 601/1500... Est. remaining: 7m 42sbest_combination: {'lookbacks': [41, 50, 101], 'score': np.float64(1.000901116908632), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 36sRunning iteration 621/1500... Est. remaining: 7m 31sRunning iteration 631/1500... Est. remaining: 7m 25sRunning iteration 641/1500... Est. remaining: 7m 20sRunning iteration 651/1500... Est. remaining: 7m 14sRunning iteration 661/1500... Est. remaining: 7m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,928,454,564
Annual Return: 43.79%
Sharpe Ratio: 1.61247
Sortino Ratio: 1.504
Max Drawdown: -35.2%
Avg Drawdown: -9.0%
Normalized Score: 1.010
Lookback periods: [38, 52, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 7m 5sRunning iteration 681/1500... Est. remaining: 6m 59sRunning iteration 691/1500... Est. remaining: 6m 54sRunning iteration 701/1500... Est. remaining: 6m 48sbest_combination: {'lookbacks': [38, 52, 102], 'score': np.float64(1.0101029228076934), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 43sRunning iteration 721/1500... Est. remaining: 6m 37sRunning iteration 731/1500... Est. remaining: 6m 32sRunning iteration 741/1500... Est. remaining: 6m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,178,136,238
Annual Return: 44.13%
Sharpe Ratio: 1.59916
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.030
Lookback periods: [36, 51, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 6m 22sRunning iteration 761/1500... Est. remaining: 6m 17sRunning iteration 771/1500... Est. remaining: 6m 12sRunning iteration 781/1500... Est. remaining: 6m 6sRunning iteration 791/1500... Est. remaining: 6m 1sRunning iteration 801/1500... Est. remaining: 5m 56sbest_combination: {'lookbacks': [36, 51, 97], 'score': np.float64(1.0295856078011012), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 50sRunning iteration 821/1500... Est. remaining: 5m 45sRunning iteration 831/1500... Est. remaining: 5m 40sRunning iteration 841/1500... Est. remaining: 5m 34sRunning iteration 851/1500... Est. remaining: 5m 29sRunning iteration 861/1500... Est. remaining: 5m 24sRunning iteration 871/1500... Est. remaining: 5m 19sRunning iteration 881/1500... Est. remaining: 5m 13sRunning iteration 891/1500... Est. remaining: 5m 8sRunning iteration 901/1500... Est. remaining: 5m 3sbest_combination: {'lookbacks': [36, 51, 97], 'score': np.float64(1.0295856078011012), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 58sRunning iteration 921/1500... Est. remaining: 4m 53sRunning iteration 931/1500... Est. remaining: 4m 47sRunning iteration 941/1500... Est. remaining: 4m 42sRunning iteration 951/1500... Est. remaining: 4m 37sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [36, 51, 97], 'score': np.float64(1.0295856078011012), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [36, 51, 97], 'score': np.float64(1.0295856078011012), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [36, 51, 97], 'score': np.float64(1.0295856078011012), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [36, 51, 97], 'score': np.float64(1.0295856078011012), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [36, 51, 97], 'score': np.float64(1.0295856078011012), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,120,294,014
Annual Return: 44.05%
Sharpe Ratio: 1.61575
Sortino Ratio: 1.505
Max Drawdown: -35.2%
Avg Drawdown: -9.1%
Normalized Score: 1.037
Lookback periods: [36, 49, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.04
best_combination: {'lookbacks': [36, 49, 97], 'score': np.float64(1.0369215937280591), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [36, 49, 97] (score: 1.0369)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [36, 49, 97] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 102 selections (24.5%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 64 selections (15.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,120,294,014.33
Average Annualized Gain: 44.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Mon Aug 25 23:31:47 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $54,948,406
Annual Return: 28.21%
Sharpe Ratio: 0.97920
Sortino Ratio: 0.894
Max Drawdown: -62.8%
Avg Drawdown: -16.0%
Normalized Score: -2.480
Lookback periods: [71, 142, 285] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,538,468,840
Annual Return: 43.20%
Sharpe Ratio: 1.41057
Sortino Ratio: 1.369
Max Drawdown: -60.3%
Avg Drawdown: -12.4%
Normalized Score: -0.279
Lookback periods: [128, 192, 212] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,195,526,481
Annual Return: 46.19%
Sharpe Ratio: 1.50048
Sortino Ratio: 1.452
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.164
Lookback periods: [157, 157, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 19sRunning iteration 21/1500... Est. remaining: 19m 41sRunning iteration 31/1500... Est. remaining: 17m 1sRunning iteration 41/1500... Est. remaining: 15m 40sRunning iteration 51/1500... Est. remaining: 14m 48sRunning iteration 61/1500... Est. remaining: 14m 14sRunning iteration 71/1500... Est. remaining: 13m 47sRunning iteration 81/1500... Est. remaining: 13m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,335,459,126
Annual Return: 47.03%
Sharpe Ratio: 1.52431
Sortino Ratio: 1.481
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.286
Lookback periods: [179, 194, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 13m 26sRunning iteration 101/1500... Est. remaining: 13m 9sbest_combination: {'lookbacks': [179, 194, 205], 'score': np.float64(0.2855472674213763), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 54sRunning iteration 121/1500... Est. remaining: 12m 41sRunning iteration 131/1500... Est. remaining: 12m 28sRunning iteration 141/1500... Est. remaining: 12m 17sRunning iteration 151/1500... Est. remaining: 12m 7sRunning iteration 161/1500... Est. remaining: 11m 58sRunning iteration 171/1500... Est. remaining: 11m 49sRunning iteration 181/1500... Est. remaining: 11m 40sRunning iteration 191/1500... Est. remaining: 11m 33sRunning iteration 201/1500... Est. remaining: 11m 25sbest_combination: {'lookbacks': [179, 194, 205], 'score': np.float64(0.2855472674213763), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 17sRunning iteration 221/1500... Est. remaining: 11m 10sRunning iteration 231/1500... Est. remaining: 11m 3sRunning iteration 241/1500... Est. remaining: 10m 56sRunning iteration 251/1500... Est. remaining: 10m 49sRunning iteration 261/1500... Est. remaining: 10m 43sRunning iteration 271/1500... Est. remaining: 10m 36sRunning iteration 281/1500... Est. remaining: 10m 30sRunning iteration 291/1500... Est. remaining: 10m 23sRunning iteration 301/1500... Est. remaining: 10m 17sbest_combination: {'lookbacks': [179, 194, 205], 'score': np.float64(0.2855472674213763), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 11sRunning iteration 321/1500... Est. remaining: 10m 5sRunning iteration 331/1500... Est. remaining: 9m 59sRunning iteration 341/1500... Est. remaining: 9m 52sRunning iteration 351/1500... Est. remaining: 9m 46sRunning iteration 361/1500... Est. remaining: 9m 41sRunning iteration 371/1500... Est. remaining: 9m 35sRunning iteration 381/1500... Est. remaining: 9m 29sRunning iteration 391/1500... Est. remaining: 9m 23sRunning iteration 401/1500... Est. remaining: 9m 18sbest_combination: {'lookbacks': [179, 194, 205], 'score': np.float64(0.2855472674213763), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 12sRunning iteration 421/1500... Est. remaining: 9m 7sRunning iteration 431/1500... Est. remaining: 9m 1sRunning iteration 441/1500... Est. remaining: 8m 56sRunning iteration 451/1500... Est. remaining: 8m 50sRunning iteration 461/1500... Est. remaining: 8m 45sRunning iteration 471/1500... Est. remaining: 8m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,946,204,494
Annual Return: 47.99%
Sharpe Ratio: 1.55877
Sortino Ratio: 1.513
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.419
Lookback periods: [180, 189, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 8m 36sRunning iteration 491/1500... Est. remaining: 8m 31sRunning iteration 501/1500... Est. remaining: 8m 25sbest_combination: {'lookbacks': [180, 189, 200], 'score': np.float64(0.4191212677933681), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 20sRunning iteration 521/1500... Est. remaining: 8m 15sRunning iteration 531/1500... Est. remaining: 8m 9sRunning iteration 541/1500... Est. remaining: 8m 4sRunning iteration 551/1500... Est. remaining: 7m 59sRunning iteration 561/1500... Est. remaining: 7m 54sRunning iteration 571/1500... Est. remaining: 7m 48sRunning iteration 581/1500... Est. remaining: 7m 43sRunning iteration 591/1500... Est. remaining: 7m 38sRunning iteration 601/1500... Est. remaining: 7m 33sbest_combination: {'lookbacks': [180, 189, 200], 'score': np.float64(0.4191212677933681), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 27sRunning iteration 621/1500... Est. remaining: 7m 22sRunning iteration 631/1500... Est. remaining: 7m 17sRunning iteration 641/1500... Est. remaining: 7m 12sRunning iteration 651/1500... Est. remaining: 7m 6sRunning iteration 661/1500... Est. remaining: 7m 1sRunning iteration 671/1500... Est. remaining: 6m 56sRunning iteration 681/1500... Est. remaining: 6m 51sRunning iteration 691/1500... Est. remaining: 6m 46sRunning iteration 701/1500... Est. remaining: 6m 41sbest_combination: {'lookbacks': [180, 189, 200], 'score': np.float64(0.4191212677933681), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 35sRunning iteration 721/1500... Est. remaining: 6m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,370,537,964
Annual Return: 49.13%
Sharpe Ratio: 1.58099
Sortino Ratio: 1.552
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.580
Lookback periods: [176, 184, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 6m 26sRunning iteration 741/1500... Est. remaining: 6m 21sRunning iteration 751/1500... Est. remaining: 6m 16sRunning iteration 761/1500... Est. remaining: 6m 11sRunning iteration 771/1500... Est. remaining: 6m 6sRunning iteration 781/1500... Est. remaining: 6m 1sRunning iteration 791/1500... Est. remaining: 5m 55sRunning iteration 801/1500... Est. remaining: 5m 50sbest_combination: {'lookbacks': [176, 184, 198], 'score': np.float64(0.579569578655102), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 45sRunning iteration 821/1500... Est. remaining: 5m 40sRunning iteration 831/1500... Est. remaining: 5m 35sRunning iteration 841/1500... Est. remaining: 5m 30sRunning iteration 851/1500... Est. remaining: 5m 25sRunning iteration 861/1500... Est. remaining: 5m 20sRunning iteration 871/1500... Est. remaining: 5m 15sRunning iteration 881/1500... Est. remaining: 5m 9sRunning iteration 891/1500... Est. remaining: 5m 4sRunning iteration 901/1500... Est. remaining: 4m 59sbest_combination: {'lookbacks': [176, 184, 198], 'score': np.float64(0.579569578655102), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 54sRunning iteration 921/1500... Est. remaining: 4m 49sRunning iteration 931/1500... Est. remaining: 4m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,735,597,279
Annual Return: 49.28%
Sharpe Ratio: 1.59328
Sortino Ratio: 1.556
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.596
Lookback periods: [178, 185, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 4m 40sRunning iteration 951/1500... Est. remaining: 4m 35sRunning iteration 961/1500... Est. remaining: 4m 30sRunning iteration 971/1500... Est. remaining: 4m 25sRunning iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 15sRunning iteration 1001/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [178, 185, 189], 'score': np.float64(0.5957445407164794), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 4sRunning iteration 1021/1500... Est. remaining: 3m 59sRunning iteration 1031/1500... Est. remaining: 3m 54sRunning iteration 1041/1500... Est. remaining: 3m 49sRunning iteration 1051/1500... Est. remaining: 3m 44sRunning iteration 1061/1500... Est. remaining: 3m 39sRunning iteration 1071/1500... Est. remaining: 3m 34sRunning iteration 1081/1500... Est. remaining: 3m 29sRunning iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [178, 185, 189], 'score': np.float64(0.5957445407164794), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4sRunning iteration 1141/1500... Est. remaining: 2m 59sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [178, 185, 189], 'score': np.float64(0.5957445407164794), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [178, 185, 189], 'score': np.float64(0.5957445407164794), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [178, 185, 189], 'score': np.float64(0.5957445407164794), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 0.60
best_combination: {'lookbacks': [178, 185, 189], 'score': np.float64(0.5957445407164794), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [178, 185, 189] (score: 0.5957)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [178, 185, 189] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 122 selections (29.3%)
2. sp500_hma: 102 selections (24.5%)
3. naz100_pine: 82 selections (19.7%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 40 selections (9.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,735,597,279.18
Average Annualized Gain: 49.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Mon Aug 25 23:44:19 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $799,330,420
Annual Return: 38.50%
Sharpe Ratio: 1.27954
Sortino Ratio: 1.229
Max Drawdown: -69.6%
Avg Drawdown: -13.8%
Normalized Score: -0.947
Lookback periods: [223, 235, 257] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,151,697,446
Annual Return: 39.97%
Sharpe Ratio: 1.39221
Sortino Ratio: 1.293
Max Drawdown: -52.3%
Avg Drawdown: -11.1%
Normalized Score: -0.341
Lookback periods: [48, 90, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,279,956,638
Annual Return: 42.75%
Sharpe Ratio: 1.42926
Sortino Ratio: 1.381
Max Drawdown: -63.1%
Avg Drawdown: -13.1%
Normalized Score: -0.169
Lookback periods: [108, 160, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,777,108,444
Annual Return: 41.73%
Sharpe Ratio: 1.50053
Sortino Ratio: 1.407
Max Drawdown: -34.9%
Avg Drawdown: -8.8%
Normalized Score: 0.338
Lookback periods: [41, 45, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 26sRunning iteration 21/1500... Est. remaining: 21m 11sRunning iteration 31/1500... Est. remaining: 18m 0sRunning iteration 41/1500... Est. remaining: 16m 22sRunning iteration 51/1500... Est. remaining: 15m 22sRunning iteration 61/1500... Est. remaining: 14m 42sRunning iteration 71/1500... Est. remaining: 14m 12sRunning iteration 81/1500... Est. remaining: 13m 48sRunning iteration 91/1500... Est. remaining: 13m 28sRunning iteration 101/1500... Est. remaining: 13m 11sbest_combination: {'lookbacks': [41, 45, 100], 'score': np.float64(0.3379690203441574), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 56sRunning iteration 121/1500... Est. remaining: 12m 43sRunning iteration 131/1500... Est. remaining: 12m 31sRunning iteration 141/1500... Est. remaining: 12m 19sRunning iteration 151/1500... Est. remaining: 12m 9sRunning iteration 161/1500... Est. remaining: 12m 0sRunning iteration 171/1500... Est. remaining: 11m 51sRunning iteration 181/1500... Est. remaining: 11m 43sRunning iteration 191/1500... Est. remaining: 11m 35sRunning iteration 201/1500... Est. remaining: 11m 27sbest_combination: {'lookbacks': [41, 45, 100], 'score': np.float64(0.3379690203441574), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 19sRunning iteration 221/1500... Est. remaining: 11m 12sRunning iteration 231/1500... Est. remaining: 11m 4sRunning iteration 241/1500... Est. remaining: 10m 58sRunning iteration 251/1500... Est. remaining: 10m 51sRunning iteration 261/1500... Est. remaining: 10m 44sRunning iteration 271/1500... Est. remaining: 10m 38sRunning iteration 281/1500... Est. remaining: 10m 31sRunning iteration 291/1500... Est. remaining: 10m 25sRunning iteration 301/1500... Est. remaining: 10m 19sbest_combination: {'lookbacks': [41, 45, 100], 'score': np.float64(0.3379690203441574), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 13sRunning iteration 321/1500... Est. remaining: 10m 6sRunning iteration 331/1500... Est. remaining: 10m 0sRunning iteration 341/1500... Est. remaining: 9m 54sRunning iteration 351/1500... Est. remaining: 9m 48sRunning iteration 361/1500... Est. remaining: 9m 42sRunning iteration 371/1500... Est. remaining: 9m 37sRunning iteration 381/1500... Est. remaining: 9m 31sRunning iteration 391/1500... Est. remaining: 9m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,131,872,887
Annual Return: 42.48%
Sharpe Ratio: 1.51283
Sortino Ratio: 1.431
Max Drawdown: -37.8%
Avg Drawdown: -9.7%
Normalized Score: 0.377
Lookback periods: [42, 46, 108] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 9m 22sbest_combination: {'lookbacks': [42, 46, 108], 'score': np.float64(0.3765672525461631), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,322,913,769
Annual Return: 46.29%
Sharpe Ratio: 1.52240
Sortino Ratio: 1.484
Max Drawdown: -58.1%
Avg Drawdown: -11.8%
Normalized Score: 0.425
Lookback periods: [139, 144, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 15sRunning iteration 431/1500... Est. remaining: 9m 9sRunning iteration 441/1500... Est. remaining: 9m 3sRunning iteration 451/1500... Est. remaining: 8m 58sRunning iteration 461/1500... Est. remaining: 8m 52sRunning iteration 471/1500... Est. remaining: 8m 46sRunning iteration 481/1500... Est. remaining: 8m 41sRunning iteration 491/1500... Est. remaining: 8m 35sRunning iteration 501/1500... Est. remaining: 8m 30sbest_combination: {'lookbacks': [139, 144, 170], 'score': np.float64(0.4246413525747915), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 24sRunning iteration 521/1500... Est. remaining: 8m 19sRunning iteration 531/1500... Est. remaining: 8m 13sRunning iteration 541/1500... Est. remaining: 8m 8sRunning iteration 551/1500... Est. remaining: 8m 2sRunning iteration 561/1500... Est. remaining: 7m 57sRunning iteration 571/1500... Est. remaining: 7m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,183,639,406
Annual Return: 46.18%
Sharpe Ratio: 1.52244
Sortino Ratio: 1.481
Max Drawdown: -55.0%
Avg Drawdown: -11.5%
Normalized Score: 0.456
Lookback periods: [127, 132, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 7m 48sRunning iteration 591/1500... Est. remaining: 7m 42sRunning iteration 601/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [127, 132, 171], 'score': np.float64(0.45610699581819364), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 32sRunning iteration 621/1500... Est. remaining: 7m 26sRunning iteration 631/1500... Est. remaining: 7m 21sRunning iteration 641/1500... Est. remaining: 7m 15sRunning iteration 651/1500... Est. remaining: 7m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,625,142,911
Annual Return: 46.52%
Sharpe Ratio: 1.53680
Sortino Ratio: 1.499
Max Drawdown: -56.0%
Avg Drawdown: -12.1%
Normalized Score: 0.491
Lookback periods: [136, 137, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 6sRunning iteration 671/1500... Est. remaining: 7m 1sRunning iteration 681/1500... Est. remaining: 6m 56sRunning iteration 691/1500... Est. remaining: 6m 50sRunning iteration 701/1500... Est. remaining: 6m 45sbest_combination: {'lookbacks': [136, 137, 156], 'score': np.float64(0.4908768613418678), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 40sRunning iteration 721/1500... Est. remaining: 6m 34sRunning iteration 731/1500... Est. remaining: 6m 29sRunning iteration 741/1500... Est. remaining: 6m 24sRunning iteration 751/1500... Est. remaining: 6m 18sRunning iteration 761/1500... Est. remaining: 6m 13sRunning iteration 771/1500... Est. remaining: 6m 8sRunning iteration 781/1500... Est. remaining: 6m 3sRunning iteration 791/1500... Est. remaining: 5m 58sRunning iteration 801/1500... Est. remaining: 5m 52sbest_combination: {'lookbacks': [136, 137, 156], 'score': np.float64(0.4908768613418678), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 47sRunning iteration 821/1500... Est. remaining: 5m 42sRunning iteration 831/1500... Est. remaining: 5m 37sRunning iteration 841/1500... Est. remaining: 5m 32sRunning iteration 851/1500... Est. remaining: 5m 27sRunning iteration 861/1500... Est. remaining: 5m 21sRunning iteration 871/1500... Est. remaining: 5m 16sRunning iteration 881/1500... Est. remaining: 5m 11sRunning iteration 891/1500... Est. remaining: 5m 6sRunning iteration 901/1500... Est. remaining: 5m 1sbest_combination: {'lookbacks': [136, 137, 156], 'score': np.float64(0.4908768613418678), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 56sRunning iteration 921/1500... Est. remaining: 4m 50sRunning iteration 931/1500... Est. remaining: 4m 45sRunning iteration 941/1500... Est. remaining: 4m 40sRunning iteration 951/1500... Est. remaining: 4m 35sRunning iteration 961/1500... Est. remaining: 4m 30sRunning iteration 971/1500... Est. remaining: 4m 25sRunning iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 15sRunning iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [136, 137, 156], 'score': np.float64(0.4908768613418678), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 5sRunning iteration 1021/1500... Est. remaining: 4m 0sRunning iteration 1031/1500... Est. remaining: 3m 55sRunning iteration 1041/1500... Est. remaining: 3m 50sRunning iteration 1051/1500... Est. remaining: 3m 44sRunning iteration 1061/1500... Est. remaining: 3m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,877,861,157
Annual Return: 47.38%
Sharpe Ratio: 1.56206
Sortino Ratio: 1.522
Max Drawdown: -58.1%
Avg Drawdown: -12.0%
Normalized Score: 0.593
Lookback periods: [139, 148, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [139, 148, 169], 'score': np.float64(0.5933289578504659), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [139, 148, 169], 'score': np.float64(0.5933289578504659), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,984,293,293
Annual Return: 47.44%
Sharpe Ratio: 1.56659
Sortino Ratio: 1.532
Max Drawdown: -58.5%
Avg Drawdown: -12.0%
Normalized Score: 0.610
Lookback periods: [136, 152, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,521,210,522
Annual Return: 49.19%
Sharpe Ratio: 1.61838
Sortino Ratio: 1.585
Max Drawdown: -58.5%
Avg Drawdown: -11.1%
Normalized Score: 0.894
Lookback periods: [136, 155, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [136, 155, 173], 'score': np.float64(0.8944788382180657), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [136, 155, 173], 'score': np.float64(0.8944788382180657), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 0.89
best_combination: {'lookbacks': [136, 155, 173], 'score': np.float64(0.8944788382180657), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 155, 173] (score: 0.8945)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 155, 173] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 115 selections (27.6%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,521,210,522.07
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Mon Aug 25 23:56:56 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $110,898,661
Annual Return: 30.83%
Sharpe Ratio: 1.09877
Sortino Ratio: 1.014
Max Drawdown: -63.8%
Avg Drawdown: -14.2%
Normalized Score: -1.600
Lookback periods: [37, 177, 212] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $104,554,766
Annual Return: 30.61%
Sharpe Ratio: 1.08363
Sortino Ratio: 0.991
Max Drawdown: -55.0%
Avg Drawdown: -13.8%
Normalized Score: -1.593
Lookback periods: [77, 111, 231] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $197,178,101
Annual Return: 33.02%
Sharpe Ratio: 1.13847
Sortino Ratio: 1.061
Max Drawdown: -69.6%
Avg Drawdown: -15.4%
Normalized Score: -1.419
Lookback periods: [82, 149, 236] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $325,380,759
Annual Return: 34.96%
Sharpe Ratio: 1.26600
Sortino Ratio: 1.168
Max Drawdown: -51.1%
Avg Drawdown: -13.0%
Normalized Score: -0.788
Lookback periods: [37, 69, 132] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $764,990,632
Annual Return: 38.33%
Sharpe Ratio: 1.31489
Sortino Ratio: 1.223
Max Drawdown: -67.3%
Avg Drawdown: -13.1%
Normalized Score: -0.535
Lookback periods: [56, 155, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 32m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,451,189,960
Annual Return: 43.05%
Sharpe Ratio: 1.41721
Sortino Ratio: 1.379
Max Drawdown: -71.3%
Avg Drawdown: -13.1%
Normalized Score: 0.088
Lookback periods: [123, 169, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,241,212,527
Annual Return: 42.68%
Sharpe Ratio: 1.39745
Sortino Ratio: 1.355
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.151
Lookback periods: [162, 206, 216] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,913,744,093
Annual Return: 43.77%
Sharpe Ratio: 1.42711
Sortino Ratio: 1.394
Max Drawdown: -59.0%
Avg Drawdown: -12.3%
Normalized Score: 0.272
Lookback periods: [170, 180, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 21m 46sRunning iteration 41/1500... Est. remaining: 19m 13sRunning iteration 51/1500... Est. remaining: 17m 42sRunning iteration 61/1500... Est. remaining: 16m 37sRunning iteration 71/1500... Est. remaining: 15m 48sRunning iteration 81/1500... Est. remaining: 15m 10sRunning iteration 91/1500... Est. remaining: 14m 40sRunning iteration 101/1500... Est. remaining: 14m 15sbest_combination: {'lookbacks': [170, 180, 181], 'score': np.float64(0.271989403837266), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 54sRunning iteration 121/1500... Est. remaining: 13m 36sRunning iteration 131/1500... Est. remaining: 13m 19sRunning iteration 141/1500... Est. remaining: 13m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,747,114,988
Annual Return: 44.82%
Sharpe Ratio: 1.49439
Sortino Ratio: 1.435
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.512
Lookback periods: [158, 255, 299] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 13m 1sRunning iteration 161/1500... Est. remaining: 12m 49sRunning iteration 171/1500... Est. remaining: 12m 37sRunning iteration 181/1500... Est. remaining: 12m 25sRunning iteration 191/1500... Est. remaining: 12m 14sRunning iteration 201/1500... Est. remaining: 12m 4sbest_combination: {'lookbacks': [158, 255, 299], 'score': np.float64(0.5121601468922605), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 55sRunning iteration 221/1500... Est. remaining: 11m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,042,666,993
Annual Return: 42.30%
Sharpe Ratio: 1.51533
Sortino Ratio: 1.414
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 0.592
Lookback periods: [41, 49, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 11m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,491,783,109
Annual Return: 47.13%
Sharpe Ratio: 1.55078
Sortino Ratio: 1.518
Max Drawdown: -56.9%
Avg Drawdown: -11.4%
Normalized Score: 0.861
Lookback periods: [159, 160, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/1500... Est. remaining: 11m 40sRunning iteration 251/1500... Est. remaining: 11m 32sRunning iteration 261/1500... Est. remaining: 11m 23sRunning iteration 271/1500... Est. remaining: 11m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,671,186,175
Annual Return: 47.84%
Sharpe Ratio: 1.56747
Sortino Ratio: 1.525
Max Drawdown: -57.2%
Avg Drawdown: -11.9%
Normalized Score: 0.921
Lookback periods: [138, 156, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/1500... Est. remaining: 11m 12sRunning iteration 291/1500... Est. remaining: 11m 4sRunning iteration 301/1500... Est. remaining: 10m 56sbest_combination: {'lookbacks': [138, 156, 176], 'score': np.float64(0.9206482154979773), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 48sRunning iteration 321/1500... Est. remaining: 10m 41sRunning iteration 331/1500... Est. remaining: 10m 33sRunning iteration 341/1500... Est. remaining: 10m 27sRunning iteration 351/1500... Est. remaining: 10m 19sRunning iteration 361/1500... Est. remaining: 10m 12sRunning iteration 371/1500... Est. remaining: 10m 5sRunning iteration 381/1500... Est. remaining: 9m 59sRunning iteration 391/1500... Est. remaining: 9m 52sRunning iteration 401/1500... Est. remaining: 9m 45sbest_combination: {'lookbacks': [138, 156, 176], 'score': np.float64(0.9206482154979773), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 39sRunning iteration 421/1500... Est. remaining: 9m 32sRunning iteration 431/1500... Est. remaining: 9m 26sRunning iteration 441/1500... Est. remaining: 9m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,333,872,351
Annual Return: 48.19%
Sharpe Ratio: 1.56987
Sortino Ratio: 1.528
Max Drawdown: -59.7%
Avg Drawdown: -11.3%
Normalized Score: 0.952
Lookback periods: [146, 155, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 16sRunning iteration 461/1500... Est. remaining: 9m 10sRunning iteration 471/1500... Est. remaining: 9m 4sRunning iteration 481/1500... Est. remaining: 8m 58sRunning iteration 491/1500... Est. remaining: 8m 52sRunning iteration 501/1500... Est. remaining: 8m 46sbest_combination: {'lookbacks': [146, 155, 171], 'score': np.float64(0.9522682949569246), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 40sRunning iteration 521/1500... Est. remaining: 8m 34sRunning iteration 531/1500... Est. remaining: 8m 28sRunning iteration 541/1500... Est. remaining: 8m 22sRunning iteration 551/1500... Est. remaining: 8m 16sRunning iteration 561/1500... Est. remaining: 8m 11sRunning iteration 571/1500... Est. remaining: 8m 5sRunning iteration 581/1500... Est. remaining: 7m 59sRunning iteration 591/1500... Est. remaining: 7m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,259,931,415
Annual Return: 48.16%
Sharpe Ratio: 1.57611
Sortino Ratio: 1.533
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 1.010
Lookback periods: [156, 159, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/1500... Est. remaining: 7m 49sbest_combination: {'lookbacks': [156, 159, 169], 'score': np.float64(1.0097073302478201), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 44sRunning iteration 621/1500... Est. remaining: 7m 38sRunning iteration 631/1500... Est. remaining: 7m 33sRunning iteration 641/1500... Est. remaining: 7m 27sRunning iteration 651/1500... Est. remaining: 7m 21sRunning iteration 661/1500... Est. remaining: 7m 16sRunning iteration 671/1500... Est. remaining: 7m 10sRunning iteration 681/1500... Est. remaining: 7m 5sRunning iteration 691/1500... Est. remaining: 6m 59sRunning iteration 701/1500... Est. remaining: 6m 54sbest_combination: {'lookbacks': [156, 159, 169], 'score': np.float64(1.0097073302478201), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,806,930,472
Annual Return: 48.89%
Sharpe Ratio: 1.58688
Sortino Ratio: 1.550
Max Drawdown: -57.2%
Avg Drawdown: -11.6%
Normalized Score: 1.057
Lookback periods: [154, 155, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 711/1500... Est. remaining: 6m 49sRunning iteration 721/1500... Est. remaining: 6m 44sRunning iteration 731/1500... Est. remaining: 6m 38sRunning iteration 741/1500... Est. remaining: 6m 33sRunning iteration 751/1500... Est. remaining: 6m 28sRunning iteration 761/1500... Est. remaining: 6m 22sRunning iteration 771/1500... Est. remaining: 6m 17sRunning iteration 781/1500... Est. remaining: 6m 11sRunning iteration 791/1500... Est. remaining: 6m 6sRunning iteration 801/1500... Est. remaining: 6m 0sbest_combination: {'lookbacks': [154, 155, 159], 'score': np.float64(1.0574246289223146), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 55sRunning iteration 821/1500... Est. remaining: 5m 50sRunning iteration 831/1500... Est. remaining: 5m 44sRunning iteration 841/1500... Est. remaining: 5m 39sRunning iteration 851/1500... Est. remaining: 5m 33sRunning iteration 861/1500... Est. remaining: 5m 28sRunning iteration 871/1500... Est. remaining: 5m 23sRunning iteration 881/1500... Est. remaining: 5m 18sRunning iteration 891/1500... Est. remaining: 5m 12sRunning iteration 901/1500... Est. remaining: 5m 7sbest_combination: {'lookbacks': [154, 155, 159], 'score': np.float64(1.0574246289223146), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 2sRunning iteration 921/1500... Est. remaining: 4m 56sRunning iteration 931/1500... Est. remaining: 4m 51sRunning iteration 941/1500... Est. remaining: 4m 46sRunning iteration 951/1500... Est. remaining: 4m 41sRunning iteration 961/1500... Est. remaining: 4m 35sRunning iteration 971/1500... Est. remaining: 4m 30sRunning iteration 981/1500... Est. remaining: 4m 25sRunning iteration 991/1500... Est. remaining: 4m 20sRunning iteration 1001/1500... Est. remaining: 4m 15sbest_combination: {'lookbacks': [154, 155, 159], 'score': np.float64(1.0574246289223146), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 9sRunning iteration 1021/1500... Est. remaining: 4m 4sRunning iteration 1031/1500... Est. remaining: 3m 59sRunning iteration 1041/1500... Est. remaining: 3m 54sRunning iteration 1051/1500... Est. remaining: 3m 49sRunning iteration 1061/1500... Est. remaining: 3m 44sRunning iteration 1071/1500... Est. remaining: 3m 38sRunning iteration 1081/1500... Est. remaining: 3m 33sRunning iteration 1091/1500... Est. remaining: 3m 28sRunning iteration 1101/1500... Est. remaining: 3m 23sbest_combination: {'lookbacks': [154, 155, 159], 'score': np.float64(1.0574246289223146), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 18sRunning iteration 1121/1500... Est. remaining: 3m 13sRunning iteration 1131/1500... Est. remaining: 3m 8sRunning iteration 1141/1500... Est. remaining: 3m 2sRunning iteration 1151/1500... Est. remaining: 2m 57sRunning iteration 1161/1500... Est. remaining: 2m 52sRunning iteration 1171/1500... Est. remaining: 2m 47sRunning iteration 1181/1500... Est. remaining: 2m 42sRunning iteration 1191/1500... Est. remaining: 2m 37sRunning iteration 1201/1500... Est. remaining: 2m 32sbest_combination: {'lookbacks': [154, 155, 159], 'score': np.float64(1.0574246289223146), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 26sRunning iteration 1221/1500... Est. remaining: 2m 21sRunning iteration 1231/1500... Est. remaining: 2m 16sRunning iteration 1241/1500... Est. remaining: 2m 11sRunning iteration 1251/1500... Est. remaining: 2m 6sRunning iteration 1261/1500... Est. remaining: 2m 1sRunning iteration 1271/1500... Est. remaining: 1m 56sRunning iteration 1281/1500... Est. remaining: 1m 51sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [154, 155, 159], 'score': np.float64(1.0574246289223146), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 36sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [154, 155, 159], 'score': np.float64(1.0574246289223146), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.6 minutes
Best normalized score: 1.06
best_combination: {'lookbacks': [154, 155, 159], 'score': np.float64(1.0574246289223146), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [154, 155, 159] (score: 1.0574)

Monte Carlo simulation completed in 12.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 155, 159] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 113 selections (27.2%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,806,930,472.30
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Tue Aug 26 00:09:38 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $916,912,190
Annual Return: 39.05%
Sharpe Ratio: 1.33242
Sortino Ratio: 1.271
Max Drawdown: -59.0%
Avg Drawdown: -12.6%
Normalized Score: -0.497
Lookback periods: [128, 243, 256] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,477,568,946
Annual Return: 44.50%
Sharpe Ratio: 1.45324
Sortino Ratio: 1.420
Max Drawdown: -61.4%
Avg Drawdown: -12.6%
Normalized Score: 0.040
Lookback periods: [144, 177, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 40sRunning iteration 21/1500... Est. remaining: 18m 9sRunning iteration 31/1500... Est. remaining: 15m 54sRunning iteration 41/1500... Est. remaining: 14m 45sRunning iteration 51/1500... Est. remaining: 14m 2sRunning iteration 61/1500... Est. remaining: 13m 32sRunning iteration 71/1500... Est. remaining: 13m 9sRunning iteration 81/1500... Est. remaining: 12m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,752,388,998
Annual Return: 47.89%
Sharpe Ratio: 1.56550
Sortino Ratio: 1.520
Max Drawdown: -57.2%
Avg Drawdown: -11.6%
Normalized Score: 0.487
Lookback periods: [135, 158, 202] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 12m 54sRunning iteration 101/1500... Est. remaining: 12m 40sbest_combination: {'lookbacks': [135, 158, 202], 'score': np.float64(0.48679496623989627), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 28sRunning iteration 121/1500... Est. remaining: 12m 18sRunning iteration 131/1500... Est. remaining: 12m 6sRunning iteration 141/1500... Est. remaining: 11m 56sRunning iteration 151/1500... Est. remaining: 11m 47sRunning iteration 161/1500... Est. remaining: 11m 38sRunning iteration 171/1500... Est. remaining: 11m 29sRunning iteration 181/1500... Est. remaining: 11m 21sRunning iteration 191/1500... Est. remaining: 11m 14sRunning iteration 201/1500... Est. remaining: 11m 7sbest_combination: {'lookbacks': [135, 158, 202], 'score': np.float64(0.48679496623989627), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 0sRunning iteration 221/1500... Est. remaining: 10m 53sRunning iteration 231/1500... Est. remaining: 10m 47sRunning iteration 241/1500... Est. remaining: 10m 40sRunning iteration 251/1500... Est. remaining: 10m 34sRunning iteration 261/1500... Est. remaining: 10m 28sRunning iteration 271/1500... Est. remaining: 10m 22sRunning iteration 281/1500... Est. remaining: 10m 16sRunning iteration 291/1500... Est. remaining: 10m 10sRunning iteration 301/1500... Est. remaining: 10m 4sbest_combination: {'lookbacks': [135, 158, 202], 'score': np.float64(0.48679496623989627), 'visits': 1}
Running iteration 311/1500... Est. remaining: 9m 58sRunning iteration 321/1500... Est. remaining: 9m 52sRunning iteration 331/1500... Est. remaining: 9m 47sRunning iteration 341/1500... Est. remaining: 9m 41sRunning iteration 351/1500... Est. remaining: 9m 35sRunning iteration 361/1500... Est. remaining: 9m 30sRunning iteration 371/1500... Est. remaining: 9m 24sRunning iteration 381/1500... Est. remaining: 9m 19sRunning iteration 391/1500... Est. remaining: 9m 13sRunning iteration 401/1500... Est. remaining: 9m 8sbest_combination: {'lookbacks': [135, 158, 202], 'score': np.float64(0.48679496623989627), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 3sRunning iteration 421/1500... Est. remaining: 8m 57sRunning iteration 431/1500... Est. remaining: 8m 52sRunning iteration 441/1500... Est. remaining: 8m 47sRunning iteration 451/1500... Est. remaining: 8m 41sRunning iteration 461/1500... Est. remaining: 8m 36sRunning iteration 471/1500... Est. remaining: 8m 31sRunning iteration 481/1500... Est. remaining: 8m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,448,587,985
Annual Return: 48.25%
Sharpe Ratio: 1.57526
Sortino Ratio: 1.529
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.528
Lookback periods: [139, 156, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 8m 23sRunning iteration 501/1500... Est. remaining: 8m 18sbest_combination: {'lookbacks': [139, 156, 199], 'score': np.float64(0.5284600719557216), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 12sRunning iteration 521/1500... Est. remaining: 8m 7sRunning iteration 531/1500... Est. remaining: 8m 2sRunning iteration 541/1500... Est. remaining: 7m 57sRunning iteration 551/1500... Est. remaining: 7m 52sRunning iteration 561/1500... Est. remaining: 7m 46sRunning iteration 571/1500... Est. remaining: 7m 41sRunning iteration 581/1500... Est. remaining: 7m 36sRunning iteration 591/1500... Est. remaining: 7m 31sRunning iteration 601/1500... Est. remaining: 7m 26sbest_combination: {'lookbacks': [139, 156, 199], 'score': np.float64(0.5284600719557216), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 21sRunning iteration 621/1500... Est. remaining: 7m 16sRunning iteration 631/1500... Est. remaining: 7m 11sRunning iteration 641/1500... Est. remaining: 7m 6sRunning iteration 651/1500... Est. remaining: 7m 1sRunning iteration 661/1500... Est. remaining: 6m 55sRunning iteration 671/1500... Est. remaining: 6m 50sRunning iteration 681/1500... Est. remaining: 6m 45sRunning iteration 691/1500... Est. remaining: 6m 40sRunning iteration 701/1500... Est. remaining: 6m 35sbest_combination: {'lookbacks': [139, 156, 199], 'score': np.float64(0.5284600719557216), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 30sRunning iteration 721/1500... Est. remaining: 6m 25sRunning iteration 731/1500... Est. remaining: 6m 20sRunning iteration 741/1500... Est. remaining: 6m 15sRunning iteration 751/1500... Est. remaining: 6m 10sRunning iteration 761/1500... Est. remaining: 6m 5sRunning iteration 771/1500... Est. remaining: 6m 0sRunning iteration 781/1500... Est. remaining: 5m 55sRunning iteration 791/1500... Est. remaining: 5m 50sRunning iteration 801/1500... Est. remaining: 5m 45sbest_combination: {'lookbacks': [139, 156, 199], 'score': np.float64(0.5284600719557216), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 40sRunning iteration 821/1500... Est. remaining: 5m 35sRunning iteration 831/1500... Est. remaining: 5m 30sRunning iteration 841/1500... Est. remaining: 5m 25sRunning iteration 851/1500... Est. remaining: 5m 20sRunning iteration 861/1500... Est. remaining: 5m 15sRunning iteration 871/1500... Est. remaining: 5m 10sRunning iteration 881/1500... Est. remaining: 5m 5sRunning iteration 891/1500... Est. remaining: 5m 0sRunning iteration 901/1500... Est. remaining: 4m 55sbest_combination: {'lookbacks': [139, 156, 199], 'score': np.float64(0.5284600719557216), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 50sRunning iteration 921/1500... Est. remaining: 4m 45sRunning iteration 931/1500... Est. remaining: 4m 40sRunning iteration 941/1500... Est. remaining: 4m 35sRunning iteration 951/1500... Est. remaining: 4m 30sRunning iteration 961/1500... Est. remaining: 4m 25sRunning iteration 971/1500... Est. remaining: 4m 20sRunning iteration 981/1500... Est. remaining: 4m 15sRunning iteration 991/1500... Est. remaining: 4m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,605,513,198
Annual Return: 48.33%
Sharpe Ratio: 1.58377
Sortino Ratio: 1.545
Max Drawdown: -56.0%
Avg Drawdown: -12.1%
Normalized Score: 0.548
Lookback periods: [136, 158, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1001/1500... Est. remaining: 4m 6sbest_combination: {'lookbacks': [136, 158, 187], 'score': np.float64(0.5484268785438129), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 1sRunning iteration 1021/1500... Est. remaining: 3m 56sRunning iteration 1031/1500... Est. remaining: 3m 51sRunning iteration 1041/1500... Est. remaining: 3m 46sRunning iteration 1051/1500... Est. remaining: 3m 41sRunning iteration 1061/1500... Est. remaining: 3m 36sRunning iteration 1071/1500... Est. remaining: 3m 31sRunning iteration 1081/1500... Est. remaining: 3m 26sRunning iteration 1091/1500... Est. remaining: 3m 21sRunning iteration 1101/1500... Est. remaining: 3m 16sbest_combination: {'lookbacks': [136, 158, 187], 'score': np.float64(0.5484268785438129), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 11sRunning iteration 1121/1500... Est. remaining: 3m 6sRunning iteration 1131/1500... Est. remaining: 3m 1sRunning iteration 1141/1500... Est. remaining: 2m 57sRunning iteration 1151/1500... Est. remaining: 2m 52sRunning iteration 1161/1500... Est. remaining: 2m 47sRunning iteration 1171/1500... Est. remaining: 2m 42sRunning iteration 1181/1500... Est. remaining: 2m 37sRunning iteration 1191/1500... Est. remaining: 2m 32sRunning iteration 1201/1500... Est. remaining: 2m 27sbest_combination: {'lookbacks': [136, 158, 187], 'score': np.float64(0.5484268785438129), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 22sRunning iteration 1221/1500... Est. remaining: 2m 17sRunning iteration 1231/1500... Est. remaining: 2m 12sRunning iteration 1241/1500... Est. remaining: 2m 7sRunning iteration 1251/1500... Est. remaining: 2m 2sRunning iteration 1261/1500... Est. remaining: 1m 57sRunning iteration 1271/1500... Est. remaining: 1m 52sRunning iteration 1281/1500... Est. remaining: 1m 48sRunning iteration 1291/1500... Est. remaining: 1m 43sRunning iteration 1301/1500... Est. remaining: 1m 38sbest_combination: {'lookbacks': [136, 158, 187], 'score': np.float64(0.5484268785438129), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 33sRunning iteration 1321/1500... Est. remaining: 1m 28sRunning iteration 1331/1500... Est. remaining: 1m 23sRunning iteration 1341/1500... Est. remaining: 1m 18sRunning iteration 1351/1500... Est. remaining: 1m 13sRunning iteration 1361/1500... Est. remaining: 1m 8sRunning iteration 1371/1500... Est. remaining: 1m 3sRunning iteration 1381/1500... Est. remaining: 0m 58sRunning iteration 1391/1500... Est. remaining: 0m 53sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [136, 158, 187], 'score': np.float64(0.5484268785438129), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,990,544,503
Annual Return: 48.52%
Sharpe Ratio: 1.59164
Sortino Ratio: 1.547
Max Drawdown: -57.3%
Avg Drawdown: -11.0%
Normalized Score: 0.596
Lookback periods: [137, 155, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.3 minutes
Best normalized score: 0.60
best_combination: {'lookbacks': [137, 155, 205], 'score': np.float64(0.5957366152737456), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [137, 155, 205] (score: 0.5957)

Monte Carlo simulation completed in 12.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [137, 155, 205] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 116 selections (27.9%)
2. sp500_hma: 114 selections (27.4%)
3. naz100_pi: 76 selections (18.3%)
4. naz100_pine: 71 selections (17.1%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,990,544,503.11
Average Annualized Gain: 48.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Tue Aug 26 00:22:02 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $89,134,824
Annual Return: 30.01%
Sharpe Ratio: 1.05362
Sortino Ratio: 0.967
Max Drawdown: -70.6%
Avg Drawdown: -14.6%
Normalized Score: -2.093
Lookback periods: [61, 213, 259] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,027,460,834
Annual Return: 39.51%
Sharpe Ratio: 1.31676
Sortino Ratio: 1.257
Max Drawdown: -68.6%
Avg Drawdown: -13.8%
Normalized Score: -0.751
Lookback periods: [124, 160, 259] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,307,378,203
Annual Return: 40.48%
Sharpe Ratio: 1.33721
Sortino Ratio: 1.287
Max Drawdown: -68.0%
Avg Drawdown: -12.9%
Normalized Score: -0.599
Lookback periods: [228, 235, 293] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,222,790,707
Annual Return: 40.21%
Sharpe Ratio: 1.37699
Sortino Ratio: 1.296
Max Drawdown: -61.8%
Avg Drawdown: -11.5%
Normalized Score: -0.466
Lookback periods: [47, 153, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,679,997,827
Annual Return: 44.74%
Sharpe Ratio: 1.46440
Sortino Ratio: 1.423
Max Drawdown: -59.8%
Avg Drawdown: -11.5%
Normalized Score: 0.103
Lookback periods: [149, 162, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 43sRunning iteration 31/1500... Est. remaining: 19m 5sRunning iteration 41/1500... Est. remaining: 17m 10sRunning iteration 51/1500... Est. remaining: 16m 2sRunning iteration 61/1500... Est. remaining: 15m 14sRunning iteration 71/1500... Est. remaining: 14m 40sRunning iteration 81/1500... Est. remaining: 14m 11sRunning iteration 91/1500... Est. remaining: 13m 49sRunning iteration 101/1500... Est. remaining: 13m 29sbest_combination: {'lookbacks': [149, 162, 167], 'score': np.float64(0.10305867340431005), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 13sRunning iteration 121/1500... Est. remaining: 12m 59sRunning iteration 131/1500... Est. remaining: 12m 47sRunning iteration 141/1500... Est. remaining: 12m 35sRunning iteration 151/1500... Est. remaining: 12m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,458,379,823
Annual Return: 47.11%
Sharpe Ratio: 1.53114
Sortino Ratio: 1.485
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.419
Lookback periods: [157, 159, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 12m 24sRunning iteration 171/1500... Est. remaining: 12m 12sRunning iteration 181/1500... Est. remaining: 12m 2sRunning iteration 191/1500... Est. remaining: 11m 52sRunning iteration 201/1500... Est. remaining: 11m 43sbest_combination: {'lookbacks': [157, 159, 203], 'score': np.float64(0.4192044802408733), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 34sRunning iteration 221/1500... Est. remaining: 11m 25sRunning iteration 231/1500... Est. remaining: 11m 17sRunning iteration 241/1500... Est. remaining: 11m 9sRunning iteration 251/1500... Est. remaining: 11m 1sRunning iteration 261/1500... Est. remaining: 10m 54sRunning iteration 271/1500... Est. remaining: 10m 47sRunning iteration 281/1500... Est. remaining: 10m 40sRunning iteration 291/1500... Est. remaining: 10m 33sRunning iteration 301/1500... Est. remaining: 10m 27sbest_combination: {'lookbacks': [157, 159, 203], 'score': np.float64(0.4192044802408733), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 20sRunning iteration 321/1500... Est. remaining: 10m 14sRunning iteration 331/1500... Est. remaining: 10m 7sRunning iteration 341/1500... Est. remaining: 10m 1sRunning iteration 351/1500... Est. remaining: 9m 55sRunning iteration 361/1500... Est. remaining: 9m 49sRunning iteration 371/1500... Est. remaining: 9m 43sRunning iteration 381/1500... Est. remaining: 9m 37sRunning iteration 391/1500... Est. remaining: 9m 31sRunning iteration 401/1500... Est. remaining: 9m 25sbest_combination: {'lookbacks': [157, 159, 203], 'score': np.float64(0.4192044802408733), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 19sRunning iteration 421/1500... Est. remaining: 9m 13sRunning iteration 431/1500... Est. remaining: 9m 7sRunning iteration 441/1500... Est. remaining: 9m 2sRunning iteration 451/1500... Est. remaining: 8m 56sRunning iteration 461/1500... Est. remaining: 8m 51sRunning iteration 471/1500... Est. remaining: 8m 45sRunning iteration 481/1500... Est. remaining: 8m 40sRunning iteration 491/1500... Est. remaining: 8m 34sRunning iteration 501/1500... Est. remaining: 8m 29sbest_combination: {'lookbacks': [157, 159, 203], 'score': np.float64(0.4192044802408733), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 23sRunning iteration 521/1500... Est. remaining: 8m 18sRunning iteration 531/1500... Est. remaining: 8m 13sRunning iteration 541/1500... Est. remaining: 8m 7sRunning iteration 551/1500... Est. remaining: 8m 2sRunning iteration 561/1500... Est. remaining: 7m 57sRunning iteration 571/1500... Est. remaining: 7m 51sRunning iteration 581/1500... Est. remaining: 7m 46sRunning iteration 591/1500... Est. remaining: 7m 41sRunning iteration 601/1500... Est. remaining: 7m 35sbest_combination: {'lookbacks': [157, 159, 203], 'score': np.float64(0.4192044802408733), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 30sRunning iteration 621/1500... Est. remaining: 7m 25sRunning iteration 631/1500... Est. remaining: 7m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,648,457,000
Annual Return: 47.23%
Sharpe Ratio: 1.52549
Sortino Ratio: 1.495
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.427
Lookback periods: [152, 158, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 7m 16sRunning iteration 651/1500... Est. remaining: 7m 10sRunning iteration 661/1500... Est. remaining: 7m 5sRunning iteration 671/1500... Est. remaining: 7m 0sRunning iteration 681/1500... Est. remaining: 6m 54sRunning iteration 691/1500... Est. remaining: 6m 49sRunning iteration 701/1500... Est. remaining: 6m 44sbest_combination: {'lookbacks': [152, 158, 198], 'score': np.float64(0.4266590923712325), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 39sRunning iteration 721/1500... Est. remaining: 6m 33sRunning iteration 731/1500... Est. remaining: 6m 28sRunning iteration 741/1500... Est. remaining: 6m 23sRunning iteration 751/1500... Est. remaining: 6m 18sRunning iteration 761/1500... Est. remaining: 6m 13sRunning iteration 771/1500... Est. remaining: 6m 8sRunning iteration 781/1500... Est. remaining: 6m 2sRunning iteration 791/1500... Est. remaining: 5m 57sRunning iteration 801/1500... Est. remaining: 5m 52sbest_combination: {'lookbacks': [152, 158, 198], 'score': np.float64(0.4266590923712325), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 47sRunning iteration 821/1500... Est. remaining: 5m 42sRunning iteration 831/1500... Est. remaining: 5m 37sRunning iteration 841/1500... Est. remaining: 5m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,954,709,201
Annual Return: 48.00%
Sharpe Ratio: 1.56274
Sortino Ratio: 1.522
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.585
Lookback periods: [157, 160, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 5m 27sRunning iteration 861/1500... Est. remaining: 5m 22sRunning iteration 871/1500... Est. remaining: 5m 17sRunning iteration 881/1500... Est. remaining: 5m 12sRunning iteration 891/1500... Est. remaining: 5m 7sRunning iteration 901/1500... Est. remaining: 5m 2sbest_combination: {'lookbacks': [157, 160, 197], 'score': np.float64(0.5847320623273207), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 56sRunning iteration 921/1500... Est. remaining: 4m 51sRunning iteration 931/1500... Est. remaining: 4m 46sRunning iteration 941/1500... Est. remaining: 4m 41sRunning iteration 951/1500... Est. remaining: 4m 36sRunning iteration 961/1500... Est. remaining: 4m 31sRunning iteration 971/1500... Est. remaining: 4m 26sRunning iteration 981/1500... Est. remaining: 4m 21sRunning iteration 991/1500... Est. remaining: 4m 15sRunning iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [157, 160, 197], 'score': np.float64(0.5847320623273207), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 5sRunning iteration 1021/1500... Est. remaining: 4m 0sRunning iteration 1031/1500... Est. remaining: 3m 55sRunning iteration 1041/1500... Est. remaining: 3m 50sRunning iteration 1051/1500... Est. remaining: 3m 45sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [157, 160, 197], 'score': np.float64(0.5847320623273207), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [157, 160, 197], 'score': np.float64(0.5847320623273207), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [157, 160, 197], 'score': np.float64(0.5847320623273207), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,679,102,626
Annual Return: 48.84%
Sharpe Ratio: 1.58671
Sortino Ratio: 1.552
Max Drawdown: -59.6%
Avg Drawdown: -11.7%
Normalized Score: 0.682
Lookback periods: [146, 158, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [146, 158, 189], 'score': np.float64(0.6819728038688797), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,690,793,110
Annual Return: 48.84%
Sharpe Ratio: 1.60532
Sortino Ratio: 1.568
Max Drawdown: -62.4%
Avg Drawdown: -11.0%
Normalized Score: 0.730
Lookback periods: [136, 158, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv

Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 0.73
best_combination: {'lookbacks': [136, 158, 172], 'score': np.float64(0.729981155009652), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 158, 172] (score: 0.7300)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 158, 172] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 120 selections (28.8%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,690,793,109.81
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Tue Aug 26 00:34:39 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $159,723,994
Annual Return: 32.21%
Sharpe Ratio: 1.11288
Sortino Ratio: 1.024
Max Drawdown: -62.2%
Avg Drawdown: -14.8%
Normalized Score: -4.426
Lookback periods: [58, 70, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,239,647,207
Annual Return: 40.27%
Sharpe Ratio: 1.33730
Sortino Ratio: 1.280
Max Drawdown: -67.8%
Avg Drawdown: -13.5%
Normalized Score: -1.251
Lookback periods: [222, 246, 250] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,304,095,274
Annual Return: 42.80%
Sharpe Ratio: 1.40698
Sortino Ratio: 1.370
Max Drawdown: -63.3%
Avg Drawdown: -12.5%
Normalized Score: -0.181
Lookback periods: [147, 172, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,522,531,125
Annual Return: 44.56%
Sharpe Ratio: 1.45075
Sortino Ratio: 1.409
Max Drawdown: -59.6%
Avg Drawdown: -11.9%
Normalized Score: 0.515
Lookback periods: [159, 187, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 51sRunning iteration 21/1500... Est. remaining: 21m 31sRunning iteration 31/1500... Est. remaining: 18m 17sRunning iteration 41/1500... Est. remaining: 16m 34sRunning iteration 51/1500... Est. remaining: 15m 33sRunning iteration 61/1500... Est. remaining: 14m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,393,101,193
Annual Return: 46.35%
Sharpe Ratio: 1.53244
Sortino Ratio: 1.489
Max Drawdown: -60.4%
Avg Drawdown: -11.9%
Normalized Score: 1.299
Lookback periods: [118, 157, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 14m 40sRunning iteration 81/1500... Est. remaining: 14m 13sRunning iteration 91/1500... Est. remaining: 13m 51sRunning iteration 101/1500... Est. remaining: 13m 30sbest_combination: {'lookbacks': [118, 157, 186], 'score': np.float64(1.2994898257293008), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 14sRunning iteration 121/1500... Est. remaining: 12m 58sRunning iteration 131/1500... Est. remaining: 12m 45sRunning iteration 141/1500... Est. remaining: 12m 33sRunning iteration 151/1500... Est. remaining: 12m 21sRunning iteration 161/1500... Est. remaining: 12m 10sRunning iteration 171/1500... Est. remaining: 12m 0sRunning iteration 181/1500... Est. remaining: 11m 51sRunning iteration 191/1500... Est. remaining: 11m 42sRunning iteration 201/1500... Est. remaining: 11m 34sbest_combination: {'lookbacks': [118, 157, 186], 'score': np.float64(1.2994898257293008), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 26sRunning iteration 221/1500... Est. remaining: 11m 18sRunning iteration 231/1500... Est. remaining: 11m 10sRunning iteration 241/1500... Est. remaining: 11m 3sRunning iteration 251/1500... Est. remaining: 10m 55sRunning iteration 261/1500... Est. remaining: 10m 48sRunning iteration 271/1500... Est. remaining: 10m 42sRunning iteration 281/1500... Est. remaining: 10m 35sRunning iteration 291/1500... Est. remaining: 10m 28sRunning iteration 301/1500... Est. remaining: 10m 22sbest_combination: {'lookbacks': [118, 157, 186], 'score': np.float64(1.2994898257293008), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 15sRunning iteration 321/1500... Est. remaining: 10m 9sRunning iteration 331/1500... Est. remaining: 10m 2sRunning iteration 341/1500... Est. remaining: 9m 56sRunning iteration 351/1500... Est. remaining: 9m 50sRunning iteration 361/1500... Est. remaining: 9m 44sRunning iteration 371/1500... Est. remaining: 9m 38sRunning iteration 381/1500... Est. remaining: 9m 32sRunning iteration 391/1500... Est. remaining: 9m 26sRunning iteration 401/1500... Est. remaining: 9m 20sbest_combination: {'lookbacks': [118, 157, 186], 'score': np.float64(1.2994898257293008), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 14sRunning iteration 421/1500... Est. remaining: 9m 9sRunning iteration 431/1500... Est. remaining: 9m 3sRunning iteration 441/1500... Est. remaining: 8m 57sRunning iteration 451/1500... Est. remaining: 8m 52sRunning iteration 461/1500... Est. remaining: 8m 46sRunning iteration 471/1500... Est. remaining: 8m 41sRunning iteration 481/1500... Est. remaining: 8m 35sRunning iteration 491/1500... Est. remaining: 8m 30sRunning iteration 501/1500... Est. remaining: 8m 25sbest_combination: {'lookbacks': [118, 157, 186], 'score': np.float64(1.2994898257293008), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 19sRunning iteration 521/1500... Est. remaining: 8m 14sRunning iteration 531/1500... Est. remaining: 8m 8sRunning iteration 541/1500... Est. remaining: 8m 3sRunning iteration 551/1500... Est. remaining: 7m 57sRunning iteration 561/1500... Est. remaining: 7m 52sRunning iteration 571/1500... Est. remaining: 7m 47sRunning iteration 581/1500... Est. remaining: 7m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,644,223,017
Annual Return: 46.54%
Sharpe Ratio: 1.52542
Sortino Ratio: 1.487
Max Drawdown: -55.0%
Avg Drawdown: -12.4%
Normalized Score: 1.364
Lookback periods: [129, 130, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 7m 38sRunning iteration 601/1500... Est. remaining: 7m 33sbest_combination: {'lookbacks': [129, 130, 159], 'score': np.float64(1.364243835941795), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 28sRunning iteration 621/1500... Est. remaining: 7m 23sRunning iteration 631/1500... Est. remaining: 7m 18sRunning iteration 641/1500... Est. remaining: 7m 12sRunning iteration 651/1500... Est. remaining: 7m 7sRunning iteration 661/1500... Est. remaining: 7m 2sRunning iteration 671/1500... Est. remaining: 6m 57sRunning iteration 681/1500... Est. remaining: 6m 52sRunning iteration 691/1500... Est. remaining: 6m 46sRunning iteration 701/1500... Est. remaining: 6m 41sbest_combination: {'lookbacks': [129, 130, 159], 'score': np.float64(1.364243835941795), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 36sRunning iteration 721/1500... Est. remaining: 6m 31sRunning iteration 731/1500... Est. remaining: 6m 26sRunning iteration 741/1500... Est. remaining: 6m 21sRunning iteration 751/1500... Est. remaining: 6m 15sRunning iteration 761/1500... Est. remaining: 6m 10sRunning iteration 771/1500... Est. remaining: 6m 5sRunning iteration 781/1500... Est. remaining: 6m 0sRunning iteration 791/1500... Est. remaining: 5m 55sRunning iteration 801/1500... Est. remaining: 5m 50sbest_combination: {'lookbacks': [129, 130, 159], 'score': np.float64(1.364243835941795), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 45sRunning iteration 821/1500... Est. remaining: 5m 40sRunning iteration 831/1500... Est. remaining: 5m 34sRunning iteration 841/1500... Est. remaining: 5m 29sRunning iteration 851/1500... Est. remaining: 5m 24sRunning iteration 861/1500... Est. remaining: 5m 19sRunning iteration 871/1500... Est. remaining: 5m 14sRunning iteration 881/1500... Est. remaining: 5m 9sRunning iteration 891/1500... Est. remaining: 5m 4sRunning iteration 901/1500... Est. remaining: 4m 59sbest_combination: {'lookbacks': [129, 130, 159], 'score': np.float64(1.364243835941795), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 54sRunning iteration 921/1500... Est. remaining: 4m 49sRunning iteration 931/1500... Est. remaining: 4m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,743,225,125
Annual Return: 46.61%
Sharpe Ratio: 1.54907
Sortino Ratio: 1.503
Max Drawdown: -56.4%
Avg Drawdown: -11.6%
Normalized Score: 1.462
Lookback periods: [134, 135, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 4m 39sRunning iteration 951/1500... Est. remaining: 4m 34sRunning iteration 961/1500... Est. remaining: 4m 29sRunning iteration 971/1500... Est. remaining: 4m 24sRunning iteration 981/1500... Est. remaining: 4m 19sRunning iteration 991/1500... Est. remaining: 4m 14sRunning iteration 1001/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [134, 135, 148], 'score': np.float64(1.4619695505875228), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 4sRunning iteration 1021/1500... Est. remaining: 3m 59sRunning iteration 1031/1500... Est. remaining: 3m 54sRunning iteration 1041/1500... Est. remaining: 3m 49sRunning iteration 1051/1500... Est. remaining: 3m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,130,598,968
Annual Return: 48.09%
Sharpe Ratio: 1.58584
Sortino Ratio: 1.547
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: 2.038
Lookback periods: [130, 132, 135] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1061/1500... Est. remaining: 3m 39sRunning iteration 1071/1500... Est. remaining: 3m 34sRunning iteration 1081/1500... Est. remaining: 3m 29sRunning iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [130, 132, 135], 'score': np.float64(2.0378584607940167), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4sRunning iteration 1141/1500... Est. remaining: 2m 59sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [130, 132, 135], 'score': np.float64(2.0378584607940167), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,867,339,802
Annual Return: 48.92%
Sharpe Ratio: 1.59885
Sortino Ratio: 1.563
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: 2.331
Lookback periods: [129, 130, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [129, 130, 136], 'score': np.float64(2.3306006115493725), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [129, 130, 136], 'score': np.float64(2.3306006115493725), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 2.33
best_combination: {'lookbacks': [129, 130, 136], 'score': np.float64(2.3306006115493725), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [129, 130, 136] (score: 2.3306)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [129, 130, 136] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 103 selections (24.8%)
3. naz100_pi: 84 selections (20.2%)
4. naz100_pine: 80 selections (19.2%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,867,339,801.83
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Tue Aug 26 00:47:10 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $71,149,644
Annual Return: 29.17%
Sharpe Ratio: 1.04969
Sortino Ratio: 0.935
Max Drawdown: -66.5%
Avg Drawdown: -15.4%
Normalized Score: -2.756
Lookback periods: [53, 89, 255] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $257,802,365
Annual Return: 34.05%
Sharpe Ratio: 1.24595
Sortino Ratio: 1.144
Max Drawdown: -51.1%
Avg Drawdown: -11.6%
Normalized Score: -1.400
Lookback periods: [34, 35, 119] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,228,533,326
Annual Return: 40.23%
Sharpe Ratio: 1.34497
Sortino Ratio: 1.280
Max Drawdown: -66.3%
Avg Drawdown: -13.5%
Normalized Score: -0.569
Lookback periods: [106, 118, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,401,302,524
Annual Return: 44.41%
Sharpe Ratio: 1.48414
Sortino Ratio: 1.435
Max Drawdown: -60.4%
Avg Drawdown: -12.8%
Normalized Score: 0.372
Lookback periods: [125, 134, 140] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 35sRunning iteration 21/1500... Est. remaining: 21m 21sRunning iteration 31/1500... Est. remaining: 18m 11sRunning iteration 41/1500... Est. remaining: 16m 32sRunning iteration 51/1500... Est. remaining: 15m 29sRunning iteration 61/1500... Est. remaining: 14m 47sRunning iteration 71/1500... Est. remaining: 14m 17sRunning iteration 81/1500... Est. remaining: 13m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,906,140,940
Annual Return: 47.39%
Sharpe Ratio: 1.54065
Sortino Ratio: 1.514
Max Drawdown: -60.8%
Avg Drawdown: -11.5%
Normalized Score: 0.928
Lookback periods: [155, 174, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 13m 54sRunning iteration 101/1500... Est. remaining: 13m 37sbest_combination: {'lookbacks': [155, 174, 188], 'score': np.float64(0.9284175419665287), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 19sRunning iteration 121/1500... Est. remaining: 13m 4sRunning iteration 131/1500... Est. remaining: 12m 50sRunning iteration 141/1500... Est. remaining: 12m 37sRunning iteration 151/1500... Est. remaining: 12m 26sRunning iteration 161/1500... Est. remaining: 12m 15sRunning iteration 171/1500... Est. remaining: 12m 5sRunning iteration 181/1500... Est. remaining: 11m 56sRunning iteration 191/1500... Est. remaining: 11m 48sRunning iteration 201/1500... Est. remaining: 11m 39sbest_combination: {'lookbacks': [155, 174, 188], 'score': np.float64(0.9284175419665287), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 32sRunning iteration 221/1500... Est. remaining: 11m 24sRunning iteration 231/1500... Est. remaining: 11m 16sRunning iteration 241/1500... Est. remaining: 11m 9sRunning iteration 251/1500... Est. remaining: 11m 2sRunning iteration 261/1500... Est. remaining: 10m 55sRunning iteration 271/1500... Est. remaining: 10m 48sRunning iteration 281/1500... Est. remaining: 10m 41sRunning iteration 291/1500... Est. remaining: 10m 34sRunning iteration 301/1500... Est. remaining: 10m 27sbest_combination: {'lookbacks': [155, 174, 188], 'score': np.float64(0.9284175419665287), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 21sRunning iteration 321/1500... Est. remaining: 10m 15sRunning iteration 331/1500... Est. remaining: 10m 8sRunning iteration 341/1500... Est. remaining: 10m 2sRunning iteration 351/1500... Est. remaining: 9m 55sRunning iteration 361/1500... Est. remaining: 9m 50sRunning iteration 371/1500... Est. remaining: 9m 44sRunning iteration 381/1500... Est. remaining: 9m 38sRunning iteration 391/1500... Est. remaining: 9m 32sRunning iteration 401/1500... Est. remaining: 9m 26sbest_combination: {'lookbacks': [155, 174, 188], 'score': np.float64(0.9284175419665287), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 21sRunning iteration 421/1500... Est. remaining: 9m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,278,449,197
Annual Return: 47.62%
Sharpe Ratio: 1.54222
Sortino Ratio: 1.510
Max Drawdown: -61.0%
Avg Drawdown: -11.6%
Normalized Score: 0.942
Lookback periods: [154, 182, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 9m 12sRunning iteration 441/1500... Est. remaining: 9m 6sRunning iteration 451/1500... Est. remaining: 9m 1sRunning iteration 461/1500... Est. remaining: 8m 55sRunning iteration 471/1500... Est. remaining: 8m 49sRunning iteration 481/1500... Est. remaining: 8m 44sRunning iteration 491/1500... Est. remaining: 8m 38sRunning iteration 501/1500... Est. remaining: 8m 33sbest_combination: {'lookbacks': [154, 182, 189], 'score': np.float64(0.9421587647580697), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 27sRunning iteration 521/1500... Est. remaining: 8m 22sRunning iteration 531/1500... Est. remaining: 8m 16sRunning iteration 541/1500... Est. remaining: 8m 11sRunning iteration 551/1500... Est. remaining: 8m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,526,794,213
Annual Return: 47.76%
Sharpe Ratio: 1.56666
Sortino Ratio: 1.529
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 1.047
Lookback periods: [146, 178, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 8m 3sRunning iteration 571/1500... Est. remaining: 7m 57sRunning iteration 581/1500... Est. remaining: 7m 52sRunning iteration 591/1500... Est. remaining: 7m 46sRunning iteration 601/1500... Est. remaining: 7m 41sbest_combination: {'lookbacks': [146, 178, 190], 'score': np.float64(1.0468177274917458), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 35sRunning iteration 621/1500... Est. remaining: 7m 30sRunning iteration 631/1500... Est. remaining: 7m 24sRunning iteration 641/1500... Est. remaining: 7m 19sRunning iteration 651/1500... Est. remaining: 7m 13sRunning iteration 661/1500... Est. remaining: 7m 8sRunning iteration 671/1500... Est. remaining: 7m 2sRunning iteration 681/1500... Est. remaining: 6m 57sRunning iteration 691/1500... Est. remaining: 6m 52sRunning iteration 701/1500... Est. remaining: 6m 46sbest_combination: {'lookbacks': [146, 178, 190], 'score': np.float64(1.0468177274917458), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 41sRunning iteration 721/1500... Est. remaining: 6m 36sRunning iteration 731/1500... Est. remaining: 6m 30sRunning iteration 741/1500... Est. remaining: 6m 25sRunning iteration 751/1500... Est. remaining: 6m 20sRunning iteration 761/1500... Est. remaining: 6m 15sRunning iteration 771/1500... Est. remaining: 6m 9sRunning iteration 781/1500... Est. remaining: 6m 4sRunning iteration 791/1500... Est. remaining: 5m 59sRunning iteration 801/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [146, 178, 190], 'score': np.float64(1.0468177274917458), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 48sRunning iteration 821/1500... Est. remaining: 5m 43sRunning iteration 831/1500... Est. remaining: 5m 38sRunning iteration 841/1500... Est. remaining: 5m 33sRunning iteration 851/1500... Est. remaining: 5m 27sRunning iteration 861/1500... Est. remaining: 5m 22sRunning iteration 871/1500... Est. remaining: 5m 17sRunning iteration 881/1500... Est. remaining: 5m 12sRunning iteration 891/1500... Est. remaining: 5m 7sRunning iteration 901/1500... Est. remaining: 5m 1sbest_combination: {'lookbacks': [146, 178, 190], 'score': np.float64(1.0468177274917458), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 56sRunning iteration 921/1500... Est. remaining: 4m 51sRunning iteration 931/1500... Est. remaining: 4m 46sRunning iteration 941/1500... Est. remaining: 4m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,648,283,228
Annual Return: 47.83%
Sharpe Ratio: 1.57126
Sortino Ratio: 1.537
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 1.090
Lookback periods: [142, 171, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 4m 37sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 21sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [142, 171, 178], 'score': np.float64(1.089870953737923), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,660,662,433
Annual Return: 48.36%
Sharpe Ratio: 1.56605
Sortino Ratio: 1.534
Max Drawdown: -60.2%
Avg Drawdown: -11.7%
Normalized Score: 1.091
Lookback periods: [153, 158, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 21sbest_combination: {'lookbacks': [153, 158, 184], 'score': np.float64(1.0910138239644558), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 16sRunning iteration 1121/1500... Est. remaining: 3m 11sRunning iteration 1131/1500... Est. remaining: 3m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,401,499,529
Annual Return: 48.71%
Sharpe Ratio: 1.58190
Sortino Ratio: 1.544
Max Drawdown: -59.0%
Avg Drawdown: -10.3%
Normalized Score: 1.224
Lookback periods: [156, 158, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 56sRunning iteration 1161/1500... Est. remaining: 2m 51sRunning iteration 1171/1500... Est. remaining: 2m 46sRunning iteration 1181/1500... Est. remaining: 2m 41sRunning iteration 1191/1500... Est. remaining: 2m 36sRunning iteration 1201/1500... Est. remaining: 2m 31sbest_combination: {'lookbacks': [156, 158, 173], 'score': np.float64(1.223628094198793), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [156, 158, 173], 'score': np.float64(1.223628094198793), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [156, 158, 173], 'score': np.float64(1.223628094198793), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,624,614,940
Annual Return: 49.24%
Sharpe Ratio: 1.58674
Sortino Ratio: 1.551
Max Drawdown: -60.2%
Avg Drawdown: -11.2%
Normalized Score: 1.257
Lookback periods: [155, 158, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1421/1500... Est. remaining: 0m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,691,354,073
Annual Return: 49.26%
Sharpe Ratio: 1.60064
Sortino Ratio: 1.568
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 1.306
Lookback periods: [142, 156, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 1.31
best_combination: {'lookbacks': [142, 156, 188], 'score': np.float64(1.3063123356248503), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [142, 156, 188] (score: 1.3063)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [142, 156, 188] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 113 selections (27.2%)
3. naz100_pi: 76 selections (18.3%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,691,354,073.13
Average Annualized Gain: 49.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Tue Aug 26 00:59:49 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,095,046,968
Annual Return: 42.41%
Sharpe Ratio: 1.39164
Sortino Ratio: 1.351
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.039
Lookback periods: [167, 170, 211] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 22m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,595,682,603
Annual Return: 45.67%
Sharpe Ratio: 1.47946
Sortino Ratio: 1.447
Max Drawdown: -63.5%
Avg Drawdown: -12.0%
Normalized Score: 0.374
Lookback periods: [175, 184, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 5sRunning iteration 31/1500... Est. remaining: 16m 41sRunning iteration 41/1500... Est. remaining: 15m 22sRunning iteration 51/1500... Est. remaining: 14m 36sRunning iteration 61/1500... Est. remaining: 14m 3sRunning iteration 71/1500... Est. remaining: 13m 36sRunning iteration 81/1500... Est. remaining: 13m 14sRunning iteration 91/1500... Est. remaining: 12m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,464,102,258
Annual Return: 45.55%
Sharpe Ratio: 1.50102
Sortino Ratio: 1.460
Max Drawdown: -58.9%
Avg Drawdown: -12.5%
Normalized Score: 0.418
Lookback periods: [130, 134, 138] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 12m 59sbest_combination: {'lookbacks': [130, 134, 138], 'score': np.float64(0.41775948015295966), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,446,492,858
Annual Return: 46.39%
Sharpe Ratio: 1.50072
Sortino Ratio: 1.463
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.492
Lookback periods: [178, 188, 220] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 13m 2sRunning iteration 121/1500... Est. remaining: 207m 56sRunning iteration 131/1500... Est. remaining: 1113m 28sRunning iteration 141/1500... Est. remaining: 1027m 12sRunning iteration 151/1500... Est. remaining: 952m 23sRunning iteration 161/1500... Est. remaining: 1022m 14sRunning iteration 171/1500... Est. remaining: 1640m 43sRunning iteration 181/1500... Est. remaining: 1538m 29sRunning iteration 191/1500... Est. remaining: 1447m 3sRunning iteration 201/1500... Est. remaining: 1933m 34sbest_combination: {'lookbacks': [178, 188, 220], 'score': np.float64(0.49218566323608604), 'visits': 1}
Running iteration 211/1500... Est. remaining: 1850m 1sRunning iteration 221/1500... Est. remaining: 1752m 43sRunning iteration 231/1500... Est. remaining: 2147m 19sRunning iteration 241/1500... Est. remaining: 2041m 59sRunning iteration 251/1500... Est. remaining: 2027m 46sRunning iteration 261/1500... Est. remaining: 2013m 38sRunning iteration 271/1500... Est. remaining: 2201m 5sRunning iteration 281/1500... Est. remaining: 2105m 33sRunning iteration 291/1500... Est. remaining: 2018m 21sRunning iteration 301/1500... Est. remaining: 1935m 20sbest_combination: {'lookbacks': [178, 188, 220], 'score': np.float64(0.49218566323608604), 'visits': 1}
Running iteration 311/1500... Est. remaining: 1874m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,482,565,014
Annual Return: 43.11%
Sharpe Ratio: 1.57377
Sortino Ratio: 1.486
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 0.684
Lookback periods: [44, 47, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/1500... Est. remaining: 2006m 44sRunning iteration 331/1500... Est. remaining: 2145m 33sRunning iteration 341/1500... Est. remaining: 2064m 56sRunning iteration 351/1500... Est. remaining: 2188m 52sRunning iteration 361/1500... Est. remaining: 2109m 45sRunning iteration 371/1500... Est. remaining: 2034m 59sRunning iteration 381/1500... Est. remaining: 2143m 20sRunning iteration 391/1500... Est. remaining: 2069m 58sRunning iteration 401/1500... Est. remaining: 2001m 24sbest_combination: {'lookbacks': [44, 47, 98], 'score': np.float64(0.6841417379504924), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,123,807,419
Annual Return: 45.22%
Sharpe Ratio: 1.62753
Sortino Ratio: 1.536
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 0.923
Lookback periods: [41, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 1935m 6sRunning iteration 421/1500... Est. remaining: 2027m 2sRunning iteration 431/1500... Est. remaining: 1961m 45sRunning iteration 441/1500... Est. remaining: 2002m 22sRunning iteration 451/1500... Est. remaining: 1939m 36sRunning iteration 461/1500... Est. remaining: 1879m 33sRunning iteration 471/1500... Est. remaining: 1822m 3sRunning iteration 481/1500... Est. remaining: 1766m 56sRunning iteration 491/1500... Est. remaining: 1714m 5sRunning iteration 501/1500... Est. remaining: 1663m 20sbest_combination: {'lookbacks': [41, 50, 96], 'score': np.float64(0.9225031443436716), 'visits': 1}
Running iteration 511/1500... Est. remaining: 1614m 34sRunning iteration 521/1500... Est. remaining: 1567m 41sRunning iteration 531/1500... Est. remaining: 1522m 34sRunning iteration 541/1500... Est. remaining: 1479m 6sRunning iteration 551/1500... Est. remaining: 1437m 14sRunning iteration 561/1500... Est. remaining: 1396m 51sRunning iteration 571/1500... Est. remaining: 1357m 52sRunning iteration 581/1500... Est. remaining: 1320m 14sRunning iteration 591/1500... Est. remaining: 1283m 53sRunning iteration 601/1500... Est. remaining: 1248m 44sbest_combination: {'lookbacks': [41, 50, 96], 'score': np.float64(0.9225031443436716), 'visits': 1}
Running iteration 611/1500... Est. remaining: 1214m 44sRunning iteration 621/1500... Est. remaining: 1181m 49sRunning iteration 631/1500... Est. remaining: 1149m 57sRunning iteration 641/1500... Est. remaining: 1119m 5sRunning iteration 651/1500... Est. remaining: 1089m 10sRunning iteration 661/1500... Est. remaining: 1060m 9sRunning iteration 671/1500... Est. remaining: 1031m 59sRunning iteration 681/1500... Est. remaining: 1004m 39sRunning iteration 691/1500... Est. remaining: 978m 7sRunning iteration 701/1500... Est. remaining: 952m 20sbest_combination: {'lookbacks': [41, 50, 96], 'score': np.float64(0.9225031443436716), 'visits': 1}
Running iteration 711/1500... Est. remaining: 927m 16sRunning iteration 721/1500... Est. remaining: 902m 54sRunning iteration 731/1500... Est. remaining: 879m 12sRunning iteration 741/1500... Est. remaining: 856m 8sRunning iteration 751/1500... Est. remaining: 833m 41sRunning iteration 761/1500... Est. remaining: 811m 50sRunning iteration 771/1500... Est. remaining: 790m 32sRunning iteration 781/1500... Est. remaining: 769m 47sRunning iteration 791/1500... Est. remaining: 749m 33sRunning iteration 801/1500... Est. remaining: 729m 50sbest_combination: {'lookbacks': [41, 50, 96], 'score': np.float64(0.9225031443436716), 'visits': 1}
Running iteration 811/1500... Est. remaining: 710m 35sRunning iteration 821/1500... Est. remaining: 691m 49sRunning iteration 831/1500... Est. remaining: 673m 30sRunning iteration 841/1500... Est. remaining: 655m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,991,609,847
Annual Return: 45.08%
Sharpe Ratio: 1.64802
Sortino Ratio: 1.543
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 0.936
Lookback periods: [42, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 638m 9sRunning iteration 861/1500... Est. remaining: 621m 5sRunning iteration 871/1500... Est. remaining: 604m 25sRunning iteration 881/1500... Est. remaining: 588m 7sRunning iteration 891/1500... Est. remaining: 572m 11sRunning iteration 901/1500... Est. remaining: 556m 37sbest_combination: {'lookbacks': [42, 52, 96], 'score': np.float64(0.9356925334431742), 'visits': 1}
Running iteration 911/1500... Est. remaining: 541m 22sRunning iteration 921/1500... Est. remaining: 526m 28sRunning iteration 931/1500... Est. remaining: 511m 52sRunning iteration 941/1500... Est. remaining: 497m 35sRunning iteration 951/1500... Est. remaining: 483m 36sRunning iteration 961/1500... Est. remaining: 469m 55sRunning iteration 971/1500... Est. remaining: 456m 30sRunning iteration 981/1500... Est. remaining: 443m 21sRunning iteration 991/1500... Est. remaining: 430m 29sRunning iteration 1001/1500... Est. remaining: 417m 51sbest_combination: {'lookbacks': [42, 52, 96], 'score': np.float64(0.9356925334431742), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 405m 29sRunning iteration 1021/1500... Est. remaining: 393m 21sRunning iteration 1031/1500... Est. remaining: 381m 27sRunning iteration 1041/1500... Est. remaining: 369m 47sRunning iteration 1051/1500... Est. remaining: 358m 20sRunning iteration 1061/1500... Est. remaining: 347m 6sRunning iteration 1071/1500... Est. remaining: 336m 4sRunning iteration 1081/1500... Est. remaining: 325m 15sRunning iteration 1091/1500... Est. remaining: 314m 37sRunning iteration 1101/1500... Est. remaining: 304m 11sbest_combination: {'lookbacks': [42, 52, 96], 'score': np.float64(0.9356925334431742), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 293m 56sRunning iteration 1121/1500... Est. remaining: 283m 52sRunning iteration 1131/1500... Est. remaining: 273m 59sRunning iteration 1141/1500... Est. remaining: 264m 16sRunning iteration 1151/1500... Est. remaining: 254m 43sRunning iteration 1161/1500... Est. remaining: 245m 19sRunning iteration 1171/1500... Est. remaining: 236m 6sRunning iteration 1181/1500... Est. remaining: 227m 1sRunning iteration 1191/1500... Est. remaining: 218m 6sRunning iteration 1201/1500... Est. remaining: 209m 19sbest_combination: {'lookbacks': [42, 52, 96], 'score': np.float64(0.9356925334431742), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 200m 42sRunning iteration 1221/1500... Est. remaining: 192m 12sRunning iteration 1231/1500... Est. remaining: 183m 51sRunning iteration 1241/1500... Est. remaining: 175m 38sRunning iteration 1251/1500... Est. remaining: 167m 32sRunning iteration 1261/1500... Est. remaining: 159m 34sRunning iteration 1271/1500... Est. remaining: 151m 44sRunning iteration 1281/1500... Est. remaining: 144m 1sRunning iteration 1291/1500... Est. remaining: 136m 25sRunning iteration 1301/1500... Est. remaining: 128m 56sbest_combination: {'lookbacks': [42, 52, 96], 'score': np.float64(0.9356925334431742), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 121m 34sRunning iteration 1321/1500... Est. remaining: 114m 18sRunning iteration 1331/1500... Est. remaining: 107m 9sRunning iteration 1341/1500... Est. remaining: 100m 6sRunning iteration 1351/1500... Est. remaining: 93m 10sRunning iteration 1361/1500... Est. remaining: 86m 19sRunning iteration 1371/1500... Est. remaining: 79m 35sRunning iteration 1381/1500... Est. remaining: 72m 56sRunning iteration 1391/1500... Est. remaining: 66m 23sRunning iteration 1401/1500... Est. remaining: 59m 55sbest_combination: {'lookbacks': [42, 52, 96], 'score': np.float64(0.9356925334431742), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 53m 33sRunning iteration 1421/1500... Est. remaining: 47m 16sRunning iteration 1431/1500... Est. remaining: 41m 4sRunning iteration 1441/1500... Est. remaining: 34m 58sRunning iteration 1451/1500... Est. remaining: 28m 56sRunning iteration 1461/1500... Est. remaining: 22m 59sRunning iteration 1471/1500... Est. remaining: 17m 7sRunning iteration 1481/1500... Est. remaining: 11m 20sRunning iteration 1491/1500... Est. remaining: 5m 38s
Monte Carlo simulation completed in 839.7 minutes
Best normalized score: 0.94
best_combination: {'lookbacks': [42, 52, 96], 'score': np.float64(0.9356925334431742), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 52, 96] (score: 0.9357)

Monte Carlo simulation completed in 839.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 52, 96] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 94 selections (22.6%)
3. naz100_pine: 82 selections (19.7%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 60 selections (14.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,991,609,847.02
Average Annualized Gain: 45.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Tue Aug 26 14:59:40 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $997,805,079
Annual Return: 39.39%
Sharpe Ratio: 1.30748
Sortino Ratio: 1.248
Max Drawdown: -73.8%
Avg Drawdown: -14.2%
Normalized Score: -1.331
Lookback periods: [129, 138, 221] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,890,841,428
Annual Return: 41.99%
Sharpe Ratio: 1.39867
Sortino Ratio: 1.337
Max Drawdown: -62.3%
Avg Drawdown: -13.3%
Normalized Score: -0.383
Lookback periods: [86, 188, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,221,930,215
Annual Return: 40.21%
Sharpe Ratio: 1.43070
Sortino Ratio: 1.335
Max Drawdown: -51.1%
Avg Drawdown: -10.9%
Normalized Score: 0.041
Lookback periods: [50, 57, 120] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 38sRunning iteration 31/1500... Est. remaining: 16m 59sRunning iteration 41/1500... Est. remaining: 15m 39sRunning iteration 51/1500... Est. remaining: 14m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,851,151,461
Annual Return: 44.93%
Sharpe Ratio: 1.48047
Sortino Ratio: 1.433
Max Drawdown: -62.4%
Avg Drawdown: -12.3%
Normalized Score: 0.240
Lookback periods: [129, 159, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 14m 41sRunning iteration 71/1500... Est. remaining: 14m 13sRunning iteration 81/1500... Est. remaining: 13m 49sRunning iteration 91/1500... Est. remaining: 13m 29sRunning iteration 101/1500... Est. remaining: 13m 12sbest_combination: {'lookbacks': [129, 159, 170], 'score': np.float64(0.24043282294024587), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,078,254,662
Annual Return: 42.37%
Sharpe Ratio: 1.55043
Sortino Ratio: 1.440
Max Drawdown: -41.5%
Avg Drawdown: -9.8%
Normalized Score: 1.072
Lookback periods: [38, 49, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 13m 12sRunning iteration 121/1500... Est. remaining: 12m 58sRunning iteration 131/1500... Est. remaining: 12m 45sRunning iteration 141/1500... Est. remaining: 12m 34sRunning iteration 151/1500... Est. remaining: 12m 23sRunning iteration 161/1500... Est. remaining: 12m 12sRunning iteration 171/1500... Est. remaining: 12m 3sRunning iteration 181/1500... Est. remaining: 11m 54sRunning iteration 191/1500... Est. remaining: 11m 45sRunning iteration 201/1500... Est. remaining: 11m 37sbest_combination: {'lookbacks': [38, 49, 89], 'score': np.float64(1.0724788555846851), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 29sRunning iteration 221/1500... Est. remaining: 11m 21sRunning iteration 231/1500... Est. remaining: 11m 14sRunning iteration 241/1500... Est. remaining: 11m 7sRunning iteration 251/1500... Est. remaining: 11m 0sRunning iteration 261/1500... Est. remaining: 10m 53sRunning iteration 271/1500... Est. remaining: 10m 46sRunning iteration 281/1500... Est. remaining: 10m 40sRunning iteration 291/1500... Est. remaining: 10m 33sRunning iteration 301/1500... Est. remaining: 10m 26sbest_combination: {'lookbacks': [38, 49, 89], 'score': np.float64(1.0724788555846851), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 20sRunning iteration 321/1500... Est. remaining: 10m 14sRunning iteration 331/1500... Est. remaining: 10m 7sRunning iteration 341/1500... Est. remaining: 10m 1sRunning iteration 351/1500... Est. remaining: 9m 55sRunning iteration 361/1500... Est. remaining: 9m 49sRunning iteration 371/1500... Est. remaining: 9m 43sRunning iteration 381/1500... Est. remaining: 9m 37sRunning iteration 391/1500... Est. remaining: 9m 31sRunning iteration 401/1500... Est. remaining: 9m 25sbest_combination: {'lookbacks': [38, 49, 89], 'score': np.float64(1.0724788555846851), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 19sRunning iteration 421/1500... Est. remaining: 9m 13sRunning iteration 431/1500... Est. remaining: 9m 7sRunning iteration 441/1500... Est. remaining: 9m 1sRunning iteration 451/1500... Est. remaining: 8m 55sRunning iteration 461/1500... Est. remaining: 8m 50sRunning iteration 471/1500... Est. remaining: 8m 44sRunning iteration 481/1500... Est. remaining: 8m 38sRunning iteration 491/1500... Est. remaining: 8m 33sRunning iteration 501/1500... Est. remaining: 8m 27sbest_combination: {'lookbacks': [38, 49, 89], 'score': np.float64(1.0724788555846851), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 21sRunning iteration 521/1500... Est. remaining: 8m 16sRunning iteration 531/1500... Est. remaining: 8m 10sRunning iteration 541/1500... Est. remaining: 8m 5sRunning iteration 551/1500... Est. remaining: 8m 0sRunning iteration 561/1500... Est. remaining: 7m 54sRunning iteration 571/1500... Est. remaining: 7m 49sRunning iteration 581/1500... Est. remaining: 7m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,698,415,236
Annual Return: 43.45%
Sharpe Ratio: 1.58823
Sortino Ratio: 1.491
Max Drawdown: -35.2%
Avg Drawdown: -9.2%
Normalized Score: 1.532
Lookback periods: [38, 49, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 7m 40sRunning iteration 601/1500... Est. remaining: 7m 35sbest_combination: {'lookbacks': [38, 49, 95], 'score': np.float64(1.5318184617836146), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 30sRunning iteration 621/1500... Est. remaining: 7m 24sRunning iteration 631/1500... Est. remaining: 7m 19sRunning iteration 641/1500... Est. remaining: 7m 14sRunning iteration 651/1500... Est. remaining: 7m 8sRunning iteration 661/1500... Est. remaining: 7m 3sRunning iteration 671/1500... Est. remaining: 6m 58sRunning iteration 681/1500... Est. remaining: 6m 53sRunning iteration 691/1500... Est. remaining: 6m 47sRunning iteration 701/1500... Est. remaining: 6m 42sbest_combination: {'lookbacks': [38, 49, 95], 'score': np.float64(1.5318184617836146), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,372,958,566
Annual Return: 45.46%
Sharpe Ratio: 1.63893
Sortino Ratio: 1.535
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.927
Lookback periods: [40, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 6m 33sRunning iteration 731/1500... Est. remaining: 6m 28sRunning iteration 741/1500... Est. remaining: 6m 23sRunning iteration 751/1500... Est. remaining: 6m 17sRunning iteration 761/1500... Est. remaining: 6m 12sRunning iteration 771/1500... Est. remaining: 6m 7sRunning iteration 781/1500... Est. remaining: 6m 2sRunning iteration 791/1500... Est. remaining: 5m 57sRunning iteration 801/1500... Est. remaining: 5m 52sbest_combination: {'lookbacks': [40, 50, 96], 'score': np.float64(1.926632118388892), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 46sRunning iteration 821/1500... Est. remaining: 5m 41sRunning iteration 831/1500... Est. remaining: 5m 36sRunning iteration 841/1500... Est. remaining: 5m 31sRunning iteration 851/1500... Est. remaining: 5m 26sRunning iteration 861/1500... Est. remaining: 5m 21sRunning iteration 871/1500... Est. remaining: 5m 16sRunning iteration 881/1500... Est. remaining: 5m 10sRunning iteration 891/1500... Est. remaining: 5m 5sRunning iteration 901/1500... Est. remaining: 5m 0sbest_combination: {'lookbacks': [40, 50, 96], 'score': np.float64(1.926632118388892), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 55sRunning iteration 921/1500... Est. remaining: 4m 50sRunning iteration 931/1500... Est. remaining: 4m 45sRunning iteration 941/1500... Est. remaining: 4m 40sRunning iteration 951/1500... Est. remaining: 4m 35sRunning iteration 961/1500... Est. remaining: 4m 30sRunning iteration 971/1500... Est. remaining: 4m 25sRunning iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 14sRunning iteration 1001/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [40, 50, 96], 'score': np.float64(1.926632118388892), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 4sRunning iteration 1021/1500... Est. remaining: 3m 59sRunning iteration 1031/1500... Est. remaining: 3m 54sRunning iteration 1041/1500... Est. remaining: 3m 49sRunning iteration 1051/1500... Est. remaining: 3m 44sRunning iteration 1061/1500... Est. remaining: 3m 39sRunning iteration 1071/1500... Est. remaining: 3m 34sRunning iteration 1081/1500... Est. remaining: 3m 29sRunning iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [40, 50, 96], 'score': np.float64(1.926632118388892), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4sRunning iteration 1141/1500... Est. remaining: 2m 59sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [40, 50, 96], 'score': np.float64(1.926632118388892), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,578,955,643
Annual Return: 45.66%
Sharpe Ratio: 1.64886
Sortino Ratio: 1.552
Max Drawdown: -34.7%
Avg Drawdown: -8.1%
Normalized Score: 2.001
Lookback periods: [42, 50, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [42, 50, 97], 'score': np.float64(2.000690220777592), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [42, 50, 97], 'score': np.float64(2.000690220777592), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,008,937,375
Annual Return: 46.03%
Sharpe Ratio: 1.67914
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 2.181
Lookback periods: [41, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 2.18
best_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(2.1814405664107266), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 52, 98] (score: 2.1814)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,008,937,374.54
Average Annualized Gain: 46.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Tue Aug 26 15:12:12 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $781,896,648
Annual Return: 38.41%
Sharpe Ratio: 1.26375
Sortino Ratio: 1.211
Max Drawdown: -71.8%
Avg Drawdown: -13.7%
Normalized Score: -1.165
Lookback periods: [138, 200, 300] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,291,277,859
Annual Return: 40.43%
Sharpe Ratio: 1.34110
Sortino Ratio: 1.288
Max Drawdown: -67.7%
Avg Drawdown: -12.8%
Normalized Score: -0.638
Lookback periods: [160, 243, 284] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,664,032,593
Annual Return: 41.46%
Sharpe Ratio: 1.35022
Sortino Ratio: 1.309
Max Drawdown: -64.3%
Avg Drawdown: -12.7%
Normalized Score: -0.399
Lookback periods: [173, 210, 245] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,789,029,972
Annual Return: 43.59%
Sharpe Ratio: 1.44730
Sortino Ratio: 1.411
Max Drawdown: -64.6%
Avg Drawdown: -12.2%
Normalized Score: 0.066
Lookback periods: [174, 258, 273] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,241,614,685
Annual Return: 45.33%
Sharpe Ratio: 1.47185
Sortino Ratio: 1.431
Max Drawdown: -63.5%
Avg Drawdown: -12.4%
Normalized Score: 0.317
Lookback periods: [181, 185, 231] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,114,017,518
Annual Return: 47.52%
Sharpe Ratio: 1.56739
Sortino Ratio: 1.528
Max Drawdown: -58.5%
Avg Drawdown: -11.5%
Normalized Score: 0.933
Lookback periods: [134, 155, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 11sRunning iteration 31/1500... Est. remaining: 20m 7sRunning iteration 41/1500... Est. remaining: 17m 58sRunning iteration 51/1500... Est. remaining: 16m 38sRunning iteration 61/1500... Est. remaining: 15m 42sRunning iteration 71/1500... Est. remaining: 15m 1sRunning iteration 81/1500... Est. remaining: 14m 30sRunning iteration 91/1500... Est. remaining: 14m 7sRunning iteration 101/1500... Est. remaining: 13m 46sbest_combination: {'lookbacks': [134, 155, 178], 'score': np.float64(0.9328121513550691), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 29sRunning iteration 121/1500... Est. remaining: 13m 13sRunning iteration 131/1500... Est. remaining: 13m 0sRunning iteration 141/1500... Est. remaining: 12m 47sRunning iteration 151/1500... Est. remaining: 12m 36sRunning iteration 161/1500... Est. remaining: 12m 25sRunning iteration 171/1500... Est. remaining: 12m 15sRunning iteration 181/1500... Est. remaining: 12m 5sRunning iteration 191/1500... Est. remaining: 11m 56sRunning iteration 201/1500... Est. remaining: 11m 47sbest_combination: {'lookbacks': [134, 155, 178], 'score': np.float64(0.9328121513550691), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 38sRunning iteration 221/1500... Est. remaining: 11m 30sRunning iteration 231/1500... Est. remaining: 11m 22sRunning iteration 241/1500... Est. remaining: 11m 14sRunning iteration 251/1500... Est. remaining: 11m 7sRunning iteration 261/1500... Est. remaining: 11m 0sRunning iteration 271/1500... Est. remaining: 10m 53sRunning iteration 281/1500... Est. remaining: 10m 46sRunning iteration 291/1500... Est. remaining: 10m 39sRunning iteration 301/1500... Est. remaining: 10m 32sbest_combination: {'lookbacks': [134, 155, 178], 'score': np.float64(0.9328121513550691), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 25sRunning iteration 321/1500... Est. remaining: 10m 19sRunning iteration 331/1500... Est. remaining: 10m 12sRunning iteration 341/1500... Est. remaining: 10m 6sRunning iteration 351/1500... Est. remaining: 9m 59sRunning iteration 361/1500... Est. remaining: 9m 54sRunning iteration 371/1500... Est. remaining: 9m 48sRunning iteration 381/1500... Est. remaining: 9m 42sRunning iteration 391/1500... Est. remaining: 9m 36sRunning iteration 401/1500... Est. remaining: 9m 30sbest_combination: {'lookbacks': [134, 155, 178], 'score': np.float64(0.9328121513550691), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,475,491,949
Annual Return: 48.27%
Sharpe Ratio: 1.58293
Sortino Ratio: 1.543
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 1.165
Lookback periods: [146, 156, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 9m 27sRunning iteration 421/1500... Est. remaining: 9m 22sRunning iteration 431/1500... Est. remaining: 9m 16sRunning iteration 441/1500... Est. remaining: 9m 10sRunning iteration 451/1500... Est. remaining: 9m 4sRunning iteration 461/1500... Est. remaining: 8m 58sRunning iteration 471/1500... Est. remaining: 8m 52sRunning iteration 481/1500... Est. remaining: 8m 46sRunning iteration 491/1500... Est. remaining: 8m 41sRunning iteration 501/1500... Est. remaining: 8m 35sbest_combination: {'lookbacks': [146, 156, 172], 'score': np.float64(1.1648032215166007), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 29sRunning iteration 521/1500... Est. remaining: 8m 23sRunning iteration 531/1500... Est. remaining: 8m 18sRunning iteration 541/1500... Est. remaining: 8m 12sRunning iteration 551/1500... Est. remaining: 8m 6sRunning iteration 561/1500... Est. remaining: 8m 1sRunning iteration 571/1500... Est. remaining: 7m 55sRunning iteration 581/1500... Est. remaining: 7m 50sRunning iteration 591/1500... Est. remaining: 7m 45sRunning iteration 601/1500... Est. remaining: 7m 39sbest_combination: {'lookbacks': [146, 156, 172], 'score': np.float64(1.1648032215166007), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 34sRunning iteration 621/1500... Est. remaining: 7m 29sRunning iteration 631/1500... Est. remaining: 7m 23sRunning iteration 641/1500... Est. remaining: 7m 18sRunning iteration 651/1500... Est. remaining: 7m 13sRunning iteration 661/1500... Est. remaining: 7m 7sRunning iteration 671/1500... Est. remaining: 7m 2sRunning iteration 681/1500... Est. remaining: 6m 56sRunning iteration 691/1500... Est. remaining: 6m 51sRunning iteration 701/1500... Est. remaining: 6m 46sbest_combination: {'lookbacks': [146, 156, 172], 'score': np.float64(1.1648032215166007), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 40sRunning iteration 721/1500... Est. remaining: 6m 35sRunning iteration 731/1500... Est. remaining: 6m 30sRunning iteration 741/1500... Est. remaining: 6m 25sRunning iteration 751/1500... Est. remaining: 6m 21sRunning iteration 761/1500... Est. remaining: 6m 15sRunning iteration 771/1500... Est. remaining: 6m 10sRunning iteration 781/1500... Est. remaining: 6m 5sRunning iteration 791/1500... Est. remaining: 5m 59sRunning iteration 801/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [146, 156, 172], 'score': np.float64(1.1648032215166007), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 49sRunning iteration 821/1500... Est. remaining: 5m 44sRunning iteration 831/1500... Est. remaining: 5m 39sRunning iteration 841/1500... Est. remaining: 5m 33sRunning iteration 851/1500... Est. remaining: 5m 28sRunning iteration 861/1500... Est. remaining: 5m 23sRunning iteration 871/1500... Est. remaining: 5m 18sRunning iteration 881/1500... Est. remaining: 5m 13sRunning iteration 891/1500... Est. remaining: 5m 8sRunning iteration 901/1500... Est. remaining: 5m 2sbest_combination: {'lookbacks': [146, 156, 172], 'score': np.float64(1.1648032215166007), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 57sRunning iteration 921/1500... Est. remaining: 4m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,106,068,908
Annual Return: 49.80%
Sharpe Ratio: 1.61256
Sortino Ratio: 1.577
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 1.321
Lookback periods: [154, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 4m 48sRunning iteration 941/1500... Est. remaining: 4m 43sRunning iteration 951/1500... Est. remaining: 4m 38sRunning iteration 961/1500... Est. remaining: 4m 33sRunning iteration 971/1500... Est. remaining: 4m 28sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 17sRunning iteration 1001/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.3213654183993113), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 7sRunning iteration 1021/1500... Est. remaining: 4m 2sRunning iteration 1031/1500... Est. remaining: 3m 57sRunning iteration 1041/1500... Est. remaining: 3m 52sRunning iteration 1051/1500... Est. remaining: 3m 47sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 21sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.3213654183993113), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 16sRunning iteration 1121/1500... Est. remaining: 3m 11sRunning iteration 1131/1500... Est. remaining: 3m 6sRunning iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 56sRunning iteration 1161/1500... Est. remaining: 2m 51sRunning iteration 1171/1500... Est. remaining: 2m 46sRunning iteration 1181/1500... Est. remaining: 2m 41sRunning iteration 1191/1500... Est. remaining: 2m 36sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.3213654183993113), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.3213654183993113), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.3213654183993113), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 1.32
best_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.3213654183993113), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [154, 155, 156] (score: 1.3214)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 155, 156] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,106,068,907.74
Average Annualized Gain: 49.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Tue Aug 26 15:24:51 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,903,801,235
Annual Return: 42.01%
Sharpe Ratio: 1.37863
Sortino Ratio: 1.335
Max Drawdown: -62.6%
Avg Drawdown: -12.1%
Normalized Score: -0.707
Lookback periods: [191, 238, 250] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,421,097,747
Annual Return: 44.44%
Sharpe Ratio: 1.44903
Sortino Ratio: 1.415
Max Drawdown: -63.5%
Avg Drawdown: -12.8%
Normalized Score: -0.362
Lookback periods: [127, 164, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,903,317,030
Annual Return: 44.99%
Sharpe Ratio: 1.46773
Sortino Ratio: 1.428
Max Drawdown: -61.0%
Avg Drawdown: -12.4%
Normalized Score: -0.200
Lookback periods: [143, 187, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 20m 3sRunning iteration 31/1500... Est. remaining: 17m 19sRunning iteration 41/1500... Est. remaining: 15m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,131,683,921
Annual Return: 45.22%
Sharpe Ratio: 1.49346
Sortino Ratio: 1.454
Max Drawdown: -62.4%
Avg Drawdown: -12.2%
Normalized Score: -0.085
Lookback periods: [133, 139, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 15m 35sRunning iteration 61/1500... Est. remaining: 14m 55sRunning iteration 71/1500... Est. remaining: 14m 24sRunning iteration 81/1500... Est. remaining: 14m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,542,232,080
Annual Return: 45.62%
Sharpe Ratio: 1.48668
Sortino Ratio: 1.441
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.036
Lookback periods: [181, 191, 212] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 13m 58sRunning iteration 101/1500... Est. remaining: 13m 38sbest_combination: {'lookbacks': [181, 191, 212], 'score': np.float64(0.035650006675953375), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 20sRunning iteration 121/1500... Est. remaining: 13m 5sRunning iteration 131/1500... Est. remaining: 12m 51sRunning iteration 141/1500... Est. remaining: 12m 39sRunning iteration 151/1500... Est. remaining: 12m 27sRunning iteration 161/1500... Est. remaining: 12m 16sRunning iteration 171/1500... Est. remaining: 12m 6sRunning iteration 181/1500... Est. remaining: 11m 57sRunning iteration 191/1500... Est. remaining: 11m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,240,108,119
Annual Return: 46.22%
Sharpe Ratio: 1.50898
Sortino Ratio: 1.471
Max Drawdown: -59.0%
Avg Drawdown: -12.0%
Normalized Score: 0.106
Lookback periods: [147, 185, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 11m 47sbest_combination: {'lookbacks': [147, 185, 188], 'score': np.float64(0.10568669809056448), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 39sRunning iteration 221/1500... Est. remaining: 11m 30sRunning iteration 231/1500... Est. remaining: 11m 22sRunning iteration 241/1500... Est. remaining: 11m 14sRunning iteration 251/1500... Est. remaining: 11m 7sRunning iteration 261/1500... Est. remaining: 11m 0sRunning iteration 271/1500... Est. remaining: 10m 52sRunning iteration 281/1500... Est. remaining: 10m 46sRunning iteration 291/1500... Est. remaining: 10m 38sRunning iteration 301/1500... Est. remaining: 10m 32sbest_combination: {'lookbacks': [147, 185, 188], 'score': np.float64(0.10568669809056448), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 25sRunning iteration 321/1500... Est. remaining: 10m 19sRunning iteration 331/1500... Est. remaining: 10m 12sRunning iteration 341/1500... Est. remaining: 10m 6sRunning iteration 351/1500... Est. remaining: 10m 0sRunning iteration 361/1500... Est. remaining: 9m 54sRunning iteration 371/1500... Est. remaining: 9m 48sRunning iteration 381/1500... Est. remaining: 9m 42sRunning iteration 391/1500... Est. remaining: 9m 36sRunning iteration 401/1500... Est. remaining: 9m 30sbest_combination: {'lookbacks': [147, 185, 188], 'score': np.float64(0.10568669809056448), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,054,797,021
Annual Return: 46.07%
Sharpe Ratio: 1.50453
Sortino Ratio: 1.475
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.187
Lookback periods: [158, 172, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 21sRunning iteration 431/1500... Est. remaining: 9m 16sRunning iteration 441/1500... Est. remaining: 9m 10sRunning iteration 451/1500... Est. remaining: 9m 4sRunning iteration 461/1500... Est. remaining: 8m 59sRunning iteration 471/1500... Est. remaining: 8m 53sRunning iteration 481/1500... Est. remaining: 8m 48sRunning iteration 491/1500... Est. remaining: 8m 42sRunning iteration 501/1500... Est. remaining: 8m 36sbest_combination: {'lookbacks': [158, 172, 181], 'score': np.float64(0.1868618182799971), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 31sRunning iteration 521/1500... Est. remaining: 8m 25sRunning iteration 531/1500... Est. remaining: 8m 20sRunning iteration 541/1500... Est. remaining: 8m 14sRunning iteration 551/1500... Est. remaining: 8m 8sRunning iteration 561/1500... Est. remaining: 8m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,509,203,198
Annual Return: 47.14%
Sharpe Ratio: 1.53971
Sortino Ratio: 1.497
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: 0.410
Lookback periods: [159, 160, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 7m 59sRunning iteration 581/1500... Est. remaining: 7m 54sRunning iteration 591/1500... Est. remaining: 7m 48sRunning iteration 601/1500... Est. remaining: 7m 43sbest_combination: {'lookbacks': [159, 160, 178], 'score': np.float64(0.4099431261620953), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 37sRunning iteration 621/1500... Est. remaining: 7m 32sRunning iteration 631/1500... Est. remaining: 7m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,019,374,635
Annual Return: 47.46%
Sharpe Ratio: 1.54180
Sortino Ratio: 1.512
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 0.451
Lookback periods: [155, 162, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 7m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,140,762,002
Annual Return: 48.09%
Sharpe Ratio: 1.55870
Sortino Ratio: 1.524
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 0.494
Lookback periods: [154, 155, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 7m 19sRunning iteration 661/1500... Est. remaining: 7m 14sRunning iteration 671/1500... Est. remaining: 7m 8sRunning iteration 681/1500... Est. remaining: 7m 3sRunning iteration 691/1500... Est. remaining: 6m 58sRunning iteration 701/1500... Est. remaining: 6m 52sbest_combination: {'lookbacks': [154, 155, 173], 'score': np.float64(0.4935429993028606), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,827,712,504
Annual Return: 47.93%
Sharpe Ratio: 1.55279
Sortino Ratio: 1.527
Max Drawdown: -60.1%
Avg Drawdown: -10.9%
Normalized Score: 0.552
Lookback periods: [158, 162, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 6m 43sRunning iteration 731/1500... Est. remaining: 6m 37sRunning iteration 741/1500... Est. remaining: 6m 32sRunning iteration 751/1500... Est. remaining: 6m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,184,945,507
Annual Return: 48.12%
Sharpe Ratio: 1.57119
Sortino Ratio: 1.531
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.639
Lookback periods: [156, 160, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 6m 23sRunning iteration 771/1500... Est. remaining: 6m 17sRunning iteration 781/1500... Est. remaining: 6m 12sRunning iteration 791/1500... Est. remaining: 6m 7sRunning iteration 801/1500... Est. remaining: 6m 1sbest_combination: {'lookbacks': [156, 160, 173], 'score': np.float64(0.6394829608469776), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 56sRunning iteration 821/1500... Est. remaining: 5m 51sRunning iteration 831/1500... Est. remaining: 5m 45sRunning iteration 841/1500... Est. remaining: 5m 40sRunning iteration 851/1500... Est. remaining: 5m 35sRunning iteration 861/1500... Est. remaining: 5m 30sRunning iteration 871/1500... Est. remaining: 5m 24sRunning iteration 881/1500... Est. remaining: 5m 19sRunning iteration 891/1500... Est. remaining: 5m 14sRunning iteration 901/1500... Est. remaining: 5m 8sbest_combination: {'lookbacks': [156, 160, 173], 'score': np.float64(0.6394829608469776), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 3sRunning iteration 921/1500... Est. remaining: 4m 58sRunning iteration 931/1500... Est. remaining: 4m 52sRunning iteration 941/1500... Est. remaining: 4m 47sRunning iteration 951/1500... Est. remaining: 4m 42sRunning iteration 961/1500... Est. remaining: 4m 36sRunning iteration 971/1500... Est. remaining: 4m 31sRunning iteration 981/1500... Est. remaining: 4m 26sRunning iteration 991/1500... Est. remaining: 4m 21sRunning iteration 1001/1500... Est. remaining: 4m 16sbest_combination: {'lookbacks': [156, 160, 173], 'score': np.float64(0.6394829608469776), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 10sRunning iteration 1021/1500... Est. remaining: 4m 5sRunning iteration 1031/1500... Est. remaining: 4m 0sRunning iteration 1041/1500... Est. remaining: 3m 55sRunning iteration 1051/1500... Est. remaining: 3m 50sRunning iteration 1061/1500... Est. remaining: 3m 45sRunning iteration 1071/1500... Est. remaining: 3m 39sRunning iteration 1081/1500... Est. remaining: 3m 34sRunning iteration 1091/1500... Est. remaining: 3m 29sRunning iteration 1101/1500... Est. remaining: 3m 24sbest_combination: {'lookbacks': [156, 160, 173], 'score': np.float64(0.6394829608469776), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 19sRunning iteration 1121/1500... Est. remaining: 3m 13sRunning iteration 1131/1500... Est. remaining: 3m 8sRunning iteration 1141/1500... Est. remaining: 3m 3sRunning iteration 1151/1500... Est. remaining: 2m 58sRunning iteration 1161/1500... Est. remaining: 2m 53sRunning iteration 1171/1500... Est. remaining: 2m 48sRunning iteration 1181/1500... Est. remaining: 2m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,235,085,185
Annual Return: 48.14%
Sharpe Ratio: 1.57577
Sortino Ratio: 1.542
Max Drawdown: -56.9%
Avg Drawdown: -10.8%
Normalized Score: 0.660
Lookback periods: [156, 159, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1191/1500... Est. remaining: 2m 38sRunning iteration 1201/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [156, 159, 162], 'score': np.float64(0.6602431950496619), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 27sRunning iteration 1221/1500... Est. remaining: 2m 22sRunning iteration 1231/1500... Est. remaining: 2m 17sRunning iteration 1241/1500... Est. remaining: 2m 12sRunning iteration 1251/1500... Est. remaining: 2m 7sRunning iteration 1261/1500... Est. remaining: 2m 2sRunning iteration 1271/1500... Est. remaining: 1m 57sRunning iteration 1281/1500... Est. remaining: 1m 52sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [156, 159, 162], 'score': np.float64(0.6602431950496619), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,280,734,995
Annual Return: 48.17%
Sharpe Ratio: 1.57832
Sortino Ratio: 1.544
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 0.716
Lookback periods: [157, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1311/1500... Est. remaining: 1m 36sRunning iteration 1321/1500... Est. remaining: 1m 31sRunning iteration 1331/1500... Est. remaining: 1m 26sRunning iteration 1341/1500... Est. remaining: 1m 21sRunning iteration 1351/1500... Est. remaining: 1m 16sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [157, 161, 168], 'score': np.float64(0.7161699942287505), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.7 minutes
Best normalized score: 0.72
best_combination: {'lookbacks': [157, 161, 168], 'score': np.float64(0.7161699942287505), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [157, 161, 168] (score: 0.7162)

Monte Carlo simulation completed in 12.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [157, 161, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 116 selections (27.9%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,280,734,995.07
Average Annualized Gain: 48.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Tue Aug 26 15:37:41 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,498,324,380
Annual Return: 41.04%
Sharpe Ratio: 1.36088
Sortino Ratio: 1.316
Max Drawdown: -59.0%
Avg Drawdown: -12.1%
Normalized Score: -0.208
Lookback periods: [154, 230, 265] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,291,995,400
Annual Return: 42.78%
Sharpe Ratio: 1.39415
Sortino Ratio: 1.347
Max Drawdown: -66.3%
Avg Drawdown: -13.2%
Normalized Score: -0.110
Lookback periods: [173, 193, 240] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,403,716,699
Annual Return: 44.41%
Sharpe Ratio: 1.44938
Sortino Ratio: 1.410
Max Drawdown: -61.6%
Avg Drawdown: -12.0%
Normalized Score: 0.180
Lookback periods: [158, 192, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,645,063,615
Annual Return: 44.70%
Sharpe Ratio: 1.45527
Sortino Ratio: 1.412
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.231
Lookback periods: [173, 194, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,238,581,126
Annual Return: 46.22%
Sharpe Ratio: 1.50046
Sortino Ratio: 1.468
Max Drawdown: -60.8%
Avg Drawdown: -11.9%
Normalized Score: 0.416
Lookback periods: [148, 172, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 9sRunning iteration 41/1500... Est. remaining: 17m 18sRunning iteration 51/1500... Est. remaining: 16m 8sRunning iteration 61/1500... Est. remaining: 15m 19sRunning iteration 71/1500... Est. remaining: 14m 42sRunning iteration 81/1500... Est. remaining: 14m 14sRunning iteration 91/1500... Est. remaining: 13m 51sRunning iteration 101/1500... Est. remaining: 13m 31sbest_combination: {'lookbacks': [148, 172, 203], 'score': np.float64(0.4161194103398135), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 14sRunning iteration 121/1500... Est. remaining: 12m 59sRunning iteration 131/1500... Est. remaining: 12m 47sRunning iteration 141/1500... Est. remaining: 12m 34sRunning iteration 151/1500... Est. remaining: 12m 23sRunning iteration 161/1500... Est. remaining: 12m 12sRunning iteration 171/1500... Est. remaining: 12m 2sRunning iteration 181/1500... Est. remaining: 11m 53sRunning iteration 191/1500... Est. remaining: 11m 44sRunning iteration 201/1500... Est. remaining: 11m 35sbest_combination: {'lookbacks': [148, 172, 203], 'score': np.float64(0.4161194103398135), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 27sRunning iteration 221/1500... Est. remaining: 11m 19sRunning iteration 231/1500... Est. remaining: 11m 12sRunning iteration 241/1500... Est. remaining: 11m 4sRunning iteration 251/1500... Est. remaining: 10m 57sRunning iteration 261/1500... Est. remaining: 10m 49sRunning iteration 271/1500... Est. remaining: 10m 43sRunning iteration 281/1500... Est. remaining: 10m 36sRunning iteration 291/1500... Est. remaining: 10m 29sRunning iteration 301/1500... Est. remaining: 10m 22sbest_combination: {'lookbacks': [148, 172, 203], 'score': np.float64(0.4161194103398135), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 16sRunning iteration 321/1500... Est. remaining: 10m 9sRunning iteration 331/1500... Est. remaining: 10m 3sRunning iteration 341/1500... Est. remaining: 9m 56sRunning iteration 351/1500... Est. remaining: 9m 50sRunning iteration 361/1500... Est. remaining: 9m 44sRunning iteration 371/1500... Est. remaining: 9m 38sRunning iteration 381/1500... Est. remaining: 9m 32sRunning iteration 391/1500... Est. remaining: 9m 26sRunning iteration 401/1500... Est. remaining: 9m 21sbest_combination: {'lookbacks': [148, 172, 203], 'score': np.float64(0.4161194103398135), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 15sRunning iteration 421/1500... Est. remaining: 9m 9sRunning iteration 431/1500... Est. remaining: 9m 3sRunning iteration 441/1500... Est. remaining: 8m 58sRunning iteration 451/1500... Est. remaining: 8m 52sRunning iteration 461/1500... Est. remaining: 8m 47sRunning iteration 471/1500... Est. remaining: 8m 41sRunning iteration 481/1500... Est. remaining: 8m 36sRunning iteration 491/1500... Est. remaining: 8m 30sRunning iteration 501/1500... Est. remaining: 8m 25sbest_combination: {'lookbacks': [148, 172, 203], 'score': np.float64(0.4161194103398135), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 20sRunning iteration 521/1500... Est. remaining: 8m 14sRunning iteration 531/1500... Est. remaining: 8m 9sRunning iteration 541/1500... Est. remaining: 8m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,847,520,883
Annual Return: 45.90%
Sharpe Ratio: 1.51353
Sortino Ratio: 1.480
Max Drawdown: -63.8%
Avg Drawdown: -11.6%
Normalized Score: 0.422
Lookback periods: [133, 172, 206] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 0sRunning iteration 561/1500... Est. remaining: 7m 55sRunning iteration 571/1500... Est. remaining: 7m 49sRunning iteration 581/1500... Est. remaining: 7m 44sRunning iteration 591/1500... Est. remaining: 7m 39sRunning iteration 601/1500... Est. remaining: 7m 34sbest_combination: {'lookbacks': [133, 172, 206], 'score': np.float64(0.4217453722800514), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 28sRunning iteration 621/1500... Est. remaining: 7m 23sRunning iteration 631/1500... Est. remaining: 7m 18sRunning iteration 641/1500... Est. remaining: 7m 13sRunning iteration 651/1500... Est. remaining: 7m 7sRunning iteration 661/1500... Est. remaining: 7m 2sRunning iteration 671/1500... Est. remaining: 6m 57sRunning iteration 681/1500... Est. remaining: 6m 52sRunning iteration 691/1500... Est. remaining: 6m 46sRunning iteration 701/1500... Est. remaining: 6m 41sbest_combination: {'lookbacks': [133, 172, 206], 'score': np.float64(0.4217453722800514), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 36sRunning iteration 721/1500... Est. remaining: 6m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,728,835,883
Annual Return: 46.60%
Sharpe Ratio: 1.54040
Sortino Ratio: 1.493
Max Drawdown: -59.7%
Avg Drawdown: -11.4%
Normalized Score: 0.535
Lookback periods: [132, 186, 207] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 6m 27sRunning iteration 741/1500... Est. remaining: 6m 22sRunning iteration 751/1500... Est. remaining: 6m 17sRunning iteration 761/1500... Est. remaining: 6m 11sRunning iteration 771/1500... Est. remaining: 6m 6sRunning iteration 781/1500... Est. remaining: 6m 1sRunning iteration 791/1500... Est. remaining: 5m 56sRunning iteration 801/1500... Est. remaining: 5m 51sbest_combination: {'lookbacks': [132, 186, 207], 'score': np.float64(0.5348145796633256), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 46sRunning iteration 821/1500... Est. remaining: 5m 41sRunning iteration 831/1500... Est. remaining: 5m 35sRunning iteration 841/1500... Est. remaining: 5m 30sRunning iteration 851/1500... Est. remaining: 5m 25sRunning iteration 861/1500... Est. remaining: 5m 20sRunning iteration 871/1500... Est. remaining: 5m 15sRunning iteration 881/1500... Est. remaining: 5m 10sRunning iteration 891/1500... Est. remaining: 5m 5sRunning iteration 901/1500... Est. remaining: 5m 0sbest_combination: {'lookbacks': [132, 186, 207], 'score': np.float64(0.5348145796633256), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 54sRunning iteration 921/1500... Est. remaining: 4m 49sRunning iteration 931/1500... Est. remaining: 4m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,767,869,681
Annual Return: 48.41%
Sharpe Ratio: 1.59819
Sortino Ratio: 1.558
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: 0.803
Lookback periods: [130, 132, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 4m 40sRunning iteration 951/1500... Est. remaining: 4m 35sRunning iteration 961/1500... Est. remaining: 4m 30sRunning iteration 971/1500... Est. remaining: 4m 25sRunning iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 15sRunning iteration 1001/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [130, 132, 134], 'score': np.float64(0.8031805453331653), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 4sRunning iteration 1021/1500... Est. remaining: 3m 59sRunning iteration 1031/1500... Est. remaining: 3m 54sRunning iteration 1041/1500... Est. remaining: 3m 49sRunning iteration 1051/1500... Est. remaining: 3m 44sRunning iteration 1061/1500... Est. remaining: 3m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,501,170,113
Annual Return: 49.58%
Sharpe Ratio: 1.62121
Sortino Ratio: 1.595
Max Drawdown: -55.0%
Avg Drawdown: -11.6%
Normalized Score: 0.943
Lookback periods: [127, 128, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1071/1500... Est. remaining: 3m 34sRunning iteration 1081/1500... Est. remaining: 3m 29sRunning iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [127, 128, 130], 'score': np.float64(0.9430768641782944), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4sRunning iteration 1141/1500... Est. remaining: 2m 59sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $13,791,822,540
Annual Return: 50.36%
Sharpe Ratio: 1.63803
Sortino Ratio: 1.613
Max Drawdown: -55.0%
Avg Drawdown: -11.6%
Normalized Score: 1.027
Lookback periods: [129, 130, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [129, 130, 130], 'score': np.float64(1.0268942211241798), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [129, 130, 130], 'score': np.float64(1.0268942211241798), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [129, 130, 130], 'score': np.float64(1.0268942211241798), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.03
best_combination: {'lookbacks': [129, 130, 130], 'score': np.float64(1.0268942211241798), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [129, 130, 130] (score: 1.0269)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [129, 130, 130] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 106 selections (25.5%)
3. naz100_pi: 90 selections (21.6%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $13,791,822,539.82
Average Annualized Gain: 50.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Tue Aug 26 15:50:13 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $556,411,682
Annual Return: 37.06%
Sharpe Ratio: 1.27218
Sortino Ratio: 1.188
Max Drawdown: -55.0%
Avg Drawdown: -12.6%
Normalized Score: -0.754
Lookback periods: [80, 110, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,665,062,353
Annual Return: 41.47%
Sharpe Ratio: 1.37538
Sortino Ratio: 1.333
Max Drawdown: -67.7%
Avg Drawdown: -13.0%
Normalized Score: -0.328
Lookback periods: [177, 219, 272] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,891,299,378
Annual Return: 41.99%
Sharpe Ratio: 1.38484
Sortino Ratio: 1.336
Max Drawdown: -67.9%
Avg Drawdown: -13.5%
Normalized Score: -0.303
Lookback periods: [136, 193, 250] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,773,055,270
Annual Return: 44.84%
Sharpe Ratio: 1.49892
Sortino Ratio: 1.450
Max Drawdown: -55.0%
Avg Drawdown: -11.9%
Normalized Score: 0.257
Lookback periods: [110, 135, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 12sRunning iteration 31/1500... Est. remaining: 18m 4sRunning iteration 41/1500... Est. remaining: 16m 27sRunning iteration 51/1500... Est. remaining: 15m 26sRunning iteration 61/1500... Est. remaining: 14m 43sRunning iteration 71/1500... Est. remaining: 14m 12sRunning iteration 81/1500... Est. remaining: 13m 48sRunning iteration 91/1500... Est. remaining: 13m 27sRunning iteration 101/1500... Est. remaining: 13m 10sbest_combination: {'lookbacks': [110, 135, 144], 'score': np.float64(0.2572608602348948), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 55sRunning iteration 121/1500... Est. remaining: 12m 43sRunning iteration 131/1500... Est. remaining: 12m 30sRunning iteration 141/1500... Est. remaining: 12m 20sRunning iteration 151/1500... Est. remaining: 12m 9sRunning iteration 161/1500... Est. remaining: 12m 0sRunning iteration 171/1500... Est. remaining: 11m 52sRunning iteration 181/1500... Est. remaining: 11m 44sRunning iteration 191/1500... Est. remaining: 11m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,863,990,064
Annual Return: 44.94%
Sharpe Ratio: 1.51397
Sortino Ratio: 1.463
Max Drawdown: -57.3%
Avg Drawdown: -12.1%
Normalized Score: 0.277
Lookback periods: [107, 139, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 11m 35sbest_combination: {'lookbacks': [107, 139, 154], 'score': np.float64(0.27655478401432065), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 28sRunning iteration 221/1500... Est. remaining: 11m 20sRunning iteration 231/1500... Est. remaining: 11m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,963,388,342
Annual Return: 46.77%
Sharpe Ratio: 1.53997
Sortino Ratio: 1.494
Max Drawdown: -56.0%
Avg Drawdown: -11.3%
Normalized Score: 0.462
Lookback periods: [128, 157, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/1500... Est. remaining: 11m 12sRunning iteration 251/1500... Est. remaining: 11m 4sRunning iteration 261/1500... Est. remaining: 10m 58sRunning iteration 271/1500... Est. remaining: 10m 50sRunning iteration 281/1500... Est. remaining: 10m 44sRunning iteration 291/1500... Est. remaining: 10m 37sRunning iteration 301/1500... Est. remaining: 10m 30sbest_combination: {'lookbacks': [128, 157, 205], 'score': np.float64(0.4620405386785575), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 23sRunning iteration 321/1500... Est. remaining: 10m 17sRunning iteration 331/1500... Est. remaining: 10m 11sRunning iteration 341/1500... Est. remaining: 10m 5sRunning iteration 351/1500... Est. remaining: 9m 58sRunning iteration 361/1500... Est. remaining: 9m 52sRunning iteration 371/1500... Est. remaining: 9m 46sRunning iteration 381/1500... Est. remaining: 9m 40sRunning iteration 391/1500... Est. remaining: 9m 34sRunning iteration 401/1500... Est. remaining: 9m 28sbest_combination: {'lookbacks': [128, 157, 205], 'score': np.float64(0.4620405386785575), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 22sRunning iteration 421/1500... Est. remaining: 9m 16sRunning iteration 431/1500... Est. remaining: 9m 11sRunning iteration 441/1500... Est. remaining: 9m 5sRunning iteration 451/1500... Est. remaining: 8m 59sRunning iteration 461/1500... Est. remaining: 8m 54sRunning iteration 471/1500... Est. remaining: 8m 48sRunning iteration 481/1500... Est. remaining: 8m 42sRunning iteration 491/1500... Est. remaining: 8m 37sRunning iteration 501/1500... Est. remaining: 8m 31sbest_combination: {'lookbacks': [128, 157, 205], 'score': np.float64(0.4620405386785575), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 26sRunning iteration 521/1500... Est. remaining: 8m 20sRunning iteration 531/1500... Est. remaining: 8m 15sRunning iteration 541/1500... Est. remaining: 8m 10sRunning iteration 551/1500... Est. remaining: 8m 4sRunning iteration 561/1500... Est. remaining: 7m 59sRunning iteration 571/1500... Est. remaining: 7m 54sRunning iteration 581/1500... Est. remaining: 7m 48sRunning iteration 591/1500... Est. remaining: 7m 43sRunning iteration 601/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [128, 157, 205], 'score': np.float64(0.4620405386785575), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 32sRunning iteration 621/1500... Est. remaining: 7m 27sRunning iteration 631/1500... Est. remaining: 7m 21sRunning iteration 641/1500... Est. remaining: 7m 16sRunning iteration 651/1500... Est. remaining: 7m 11sRunning iteration 661/1500... Est. remaining: 7m 5sRunning iteration 671/1500... Est. remaining: 7m 0sRunning iteration 681/1500... Est. remaining: 6m 55sRunning iteration 691/1500... Est. remaining: 6m 50sRunning iteration 701/1500... Est. remaining: 6m 45sbest_combination: {'lookbacks': [128, 157, 205], 'score': np.float64(0.4620405386785575), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 39sRunning iteration 721/1500... Est. remaining: 6m 34sRunning iteration 731/1500... Est. remaining: 6m 29sRunning iteration 741/1500... Est. remaining: 6m 24sRunning iteration 751/1500... Est. remaining: 6m 19sRunning iteration 761/1500... Est. remaining: 6m 14sRunning iteration 771/1500... Est. remaining: 6m 8sRunning iteration 781/1500... Est. remaining: 6m 3sRunning iteration 791/1500... Est. remaining: 5m 58sRunning iteration 801/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [128, 157, 205], 'score': np.float64(0.4620405386785575), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 48sRunning iteration 821/1500... Est. remaining: 5m 43sRunning iteration 831/1500... Est. remaining: 5m 38sRunning iteration 841/1500... Est. remaining: 5m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,425,775,572
Annual Return: 47.09%
Sharpe Ratio: 1.55782
Sortino Ratio: 1.509
Max Drawdown: -58.1%
Avg Drawdown: -11.4%
Normalized Score: 0.502
Lookback periods: [139, 149, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 5m 29sRunning iteration 861/1500... Est. remaining: 5m 24sRunning iteration 871/1500... Est. remaining: 5m 19sRunning iteration 881/1500... Est. remaining: 5m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,540,269,122
Annual Return: 47.77%
Sharpe Ratio: 1.57611
Sortino Ratio: 1.544
Max Drawdown: -63.5%
Avg Drawdown: -11.5%
Normalized Score: 0.562
Lookback periods: [135, 153, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 5m 10sRunning iteration 901/1500... Est. remaining: 5m 5sbest_combination: {'lookbacks': [135, 153, 173], 'score': np.float64(0.5620236933073816), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 0sRunning iteration 921/1500... Est. remaining: 4m 54sRunning iteration 931/1500... Est. remaining: 4m 49sRunning iteration 941/1500... Est. remaining: 4m 44sRunning iteration 951/1500... Est. remaining: 4m 39sRunning iteration 961/1500... Est. remaining: 4m 34sRunning iteration 971/1500... Est. remaining: 4m 29sRunning iteration 981/1500... Est. remaining: 4m 23sRunning iteration 991/1500... Est. remaining: 4m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,732,802,161
Annual Return: 47.88%
Sharpe Ratio: 1.57731
Sortino Ratio: 1.542
Max Drawdown: -62.5%
Avg Drawdown: -11.7%
Normalized Score: 0.568
Lookback periods: [146, 153, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,012,935,258
Annual Return: 48.03%
Sharpe Ratio: 1.58614
Sortino Ratio: 1.549
Max Drawdown: -58.5%
Avg Drawdown: -11.4%
Normalized Score: 0.632
Lookback periods: [138, 151, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1001/1500... Est. remaining: 4m 15sbest_combination: {'lookbacks': [138, 151, 158], 'score': np.float64(0.6323048953231073), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 9sRunning iteration 1021/1500... Est. remaining: 4m 4sRunning iteration 1031/1500... Est. remaining: 3m 59sRunning iteration 1041/1500... Est. remaining: 3m 54sRunning iteration 1051/1500... Est. remaining: 3m 49sRunning iteration 1061/1500... Est. remaining: 3m 44sRunning iteration 1071/1500... Est. remaining: 3m 39sRunning iteration 1081/1500... Est. remaining: 3m 33sRunning iteration 1091/1500... Est. remaining: 3m 28sRunning iteration 1101/1500... Est. remaining: 3m 23sbest_combination: {'lookbacks': [138, 151, 158], 'score': np.float64(0.6323048953231073), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 18sRunning iteration 1121/1500... Est. remaining: 3m 13sRunning iteration 1131/1500... Est. remaining: 3m 8sRunning iteration 1141/1500... Est. remaining: 3m 2sRunning iteration 1151/1500... Est. remaining: 2m 57sRunning iteration 1161/1500... Est. remaining: 2m 52sRunning iteration 1171/1500... Est. remaining: 2m 47sRunning iteration 1181/1500... Est. remaining: 2m 42sRunning iteration 1191/1500... Est. remaining: 2m 37sRunning iteration 1201/1500... Est. remaining: 2m 32sbest_combination: {'lookbacks': [138, 151, 158], 'score': np.float64(0.6323048953231073), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 27sRunning iteration 1221/1500... Est. remaining: 2m 21sRunning iteration 1231/1500... Est. remaining: 2m 16sRunning iteration 1241/1500... Est. remaining: 2m 11sRunning iteration 1251/1500... Est. remaining: 2m 6sRunning iteration 1261/1500... Est. remaining: 2m 1sRunning iteration 1271/1500... Est. remaining: 1m 56sRunning iteration 1281/1500... Est. remaining: 1m 51sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [138, 151, 158], 'score': np.float64(0.6323048953231073), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 36sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [138, 151, 158], 'score': np.float64(0.6323048953231073), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,171,212,009
Annual Return: 48.60%
Sharpe Ratio: 1.58733
Sortino Ratio: 1.552
Max Drawdown: -60.1%
Avg Drawdown: -11.5%
Normalized Score: 0.649
Lookback periods: [128, 156, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,595,241,964
Annual Return: 48.33%
Sharpe Ratio: 1.59139
Sortino Ratio: 1.548
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 0.683
Lookback periods: [139, 157, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

Monte Carlo simulation completed in 12.6 minutes
Best normalized score: 0.68
best_combination: {'lookbacks': [139, 157, 171], 'score': np.float64(0.6833447541841445), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 157, 171] (score: 0.6833)

Monte Carlo simulation completed in 12.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 157, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 111 selections (26.7%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,595,241,963.52
Average Annualized Gain: 48.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 1016m 8s
End time: Tue Aug 26 16:02:53 EDT 2025
Average time per successful run: 67m 44s
==============================================================
✓ All runs completed successfully!
