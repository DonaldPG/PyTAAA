Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Mon Aug 25 15:43:02 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Mon Aug 25 15:43:02 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,406,079,029
Annual Return: 46.36%
Sharpe Ratio: 1.50878
Sortino Ratio: 1.469
Max Drawdown: -59.8%
Avg Drawdown: -12.0%
Normalized Score: 0.062
Lookback periods: [149, 156, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,211,393,674
Annual Return: 42.63%
Sharpe Ratio: 1.49508
Sortino Ratio: 1.396
Max Drawdown: -52.3%
Avg Drawdown: -8.9%
Normalized Score: 0.624
Lookback periods: [50, 95, 119] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 13m 19sRunning iteration 21/1500... Est. remaining: 9m 49sRunning iteration 31/1500... Est. remaining: 8m 38sRunning iteration 41/1500... Est. remaining: 7m 58sRunning iteration 51/1500... Est. remaining: 7m 39sRunning iteration 61/1500... Est. remaining: 7m 30sRunning iteration 71/1500... Est. remaining: 7m 23sRunning iteration 81/1500... Est. remaining: 7m 17sRunning iteration 91/1500... Est. remaining: 7m 11sRunning iteration 101/1500... Est. remaining: 7m 7sbest_combination: {'lookbacks': [50, 95, 119], 'score': np.float64(0.6244961014276715), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 2sRunning iteration 121/1500... Est. remaining: 6m 58sRunning iteration 131/1500... Est. remaining: 6m 53sRunning iteration 141/1500... Est. remaining: 6m 49sRunning iteration 151/1500... Est. remaining: 6m 45sRunning iteration 161/1500... Est. remaining: 6m 42sRunning iteration 171/1500... Est. remaining: 6m 38sRunning iteration 181/1500... Est. remaining: 6m 35sRunning iteration 191/1500... Est. remaining: 6m 31sRunning iteration 201/1500... Est. remaining: 6m 28sbest_combination: {'lookbacks': [50, 95, 119], 'score': np.float64(0.6244961014276715), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 24sRunning iteration 221/1500... Est. remaining: 6m 20sRunning iteration 231/1500... Est. remaining: 6m 17sRunning iteration 241/1500... Est. remaining: 6m 14sRunning iteration 251/1500... Est. remaining: 6m 11sRunning iteration 261/1500... Est. remaining: 6m 7sRunning iteration 271/1500... Est. remaining: 6m 4sRunning iteration 281/1500... Est. remaining: 6m 1sRunning iteration 291/1500... Est. remaining: 5m 58sRunning iteration 301/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [50, 95, 119], 'score': np.float64(0.6244961014276715), 'visits': 1}
Running iteration 311/1500... Est. remaining: 5m 51sRunning iteration 321/1500... Est. remaining: 5m 48sRunning iteration 331/1500... Est. remaining: 5m 45sRunning iteration 341/1500... Est. remaining: 5m 42sRunning iteration 351/1500... Est. remaining: 5m 39sRunning iteration 361/1500... Est. remaining: 5m 36sRunning iteration 371/1500... Est. remaining: 5m 33sRunning iteration 381/1500... Est. remaining: 5m 30sRunning iteration 391/1500... Est. remaining: 5m 26sRunning iteration 401/1500... Est. remaining: 5m 23sbest_combination: {'lookbacks': [50, 95, 119], 'score': np.float64(0.6244961014276715), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 20sRunning iteration 421/1500... Est. remaining: 5m 17sRunning iteration 431/1500... Est. remaining: 5m 14sRunning iteration 441/1500... Est. remaining: 5m 11sRunning iteration 451/1500... Est. remaining: 5m 8sRunning iteration 461/1500... Est. remaining: 5m 5sRunning iteration 471/1500... Est. remaining: 5m 2sRunning iteration 481/1500... Est. remaining: 4m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,346,001,028
Annual Return: 42.87%
Sharpe Ratio: 1.50714
Sortino Ratio: 1.410
Max Drawdown: -52.3%
Avg Drawdown: -8.8%
Normalized Score: 0.683
Lookback periods: [50, 95, 117] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 4m 57sRunning iteration 501/1500... Est. remaining: 4m 54sbest_combination: {'lookbacks': [50, 95, 117], 'score': np.float64(0.6825360114697265), 'visits': 1}
Running iteration 511/1500... Est. remaining: 4m 51sRunning iteration 521/1500... Est. remaining: 4m 48sRunning iteration 531/1500... Est. remaining: 4m 45sRunning iteration 541/1500... Est. remaining: 4m 42sRunning iteration 551/1500... Est. remaining: 4m 39sRunning iteration 561/1500... Est. remaining: 4m 36sRunning iteration 571/1500... Est. remaining: 4m 33sRunning iteration 581/1500... Est. remaining: 4m 30sRunning iteration 591/1500... Est. remaining: 4m 27sRunning iteration 601/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [50, 95, 117], 'score': np.float64(0.6825360114697265), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,059,336,130
Annual Return: 39.63%
Sharpe Ratio: 1.44142
Sortino Ratio: 1.333
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 0.790
Lookback periods: [50, 51, 92] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,334,981,576
Annual Return: 42.85%
Sharpe Ratio: 1.52766
Sortino Ratio: 1.440
Max Drawdown: -35.6%
Avg Drawdown: -9.4%
Normalized Score: 1.200
Lookback periods: [50, 53, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/1500... Est. remaining: 4m 23sRunning iteration 621/1500... Est. remaining: 4m 20sRunning iteration 631/1500... Est. remaining: 4m 17sRunning iteration 641/1500... Est. remaining: 4m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,229,417,452
Annual Return: 44.20%
Sharpe Ratio: 1.57610
Sortino Ratio: 1.489
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.462
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,005,011
Annual Return: 43.90%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.674
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 4m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,916,377,953
Annual Return: 45.00%
Sharpe Ratio: 1.61386
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.689
Lookback periods: [50, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 4m 11sRunning iteration 671/1500... Est. remaining: 4m 8sRunning iteration 681/1500... Est. remaining: 4m 4sRunning iteration 691/1500... Est. remaining: 4m 1sRunning iteration 701/1500... Est. remaining: 3m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.721
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.7206404246909426), 'visits': 1}
Running iteration 711/1500... Est. remaining: 3m 56sRunning iteration 721/1500... Est. remaining: 3m 53sRunning iteration 731/1500... Est. remaining: 3m 50sRunning iteration 741/1500... Est. remaining: 3m 47sRunning iteration 751/1500... Est. remaining: 3m 44sRunning iteration 761/1500... Est. remaining: 3m 41sRunning iteration 771/1500... Est. remaining: 3m 38sRunning iteration 781/1500... Est. remaining: 3m 35sRunning iteration 791/1500... Est. remaining: 3m 32sRunning iteration 801/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.7206404246909426), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 26sRunning iteration 821/1500... Est. remaining: 3m 23sRunning iteration 831/1500... Est. remaining: 3m 20sRunning iteration 841/1500... Est. remaining: 3m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.787
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 3m 14sRunning iteration 861/1500... Est. remaining: 3m 11sRunning iteration 871/1500... Est. remaining: 3m 8sRunning iteration 881/1500... Est. remaining: 3m 5sRunning iteration 891/1500... Est. remaining: 3m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.862
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 901/1500... Est. remaining: 3m 0sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8620562942987877), 'visits': 1}
Running iteration 911/1500... Est. remaining: 2m 57sRunning iteration 921/1500... Est. remaining: 2m 54sRunning iteration 931/1500... Est. remaining: 2m 51sRunning iteration 941/1500... Est. remaining: 2m 48sRunning iteration 951/1500... Est. remaining: 2m 45sRunning iteration 961/1500... Est. remaining: 2m 42sRunning iteration 971/1500... Est. remaining: 2m 38sRunning iteration 981/1500... Est. remaining: 2m 35sRunning iteration 991/1500... Est. remaining: 2m 32sRunning iteration 1001/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8620562942987877), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 26sRunning iteration 1021/1500... Est. remaining: 2m 23sRunning iteration 1031/1500... Est. remaining: 2m 20sRunning iteration 1041/1500... Est. remaining: 2m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.036
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1051/1500... Est. remaining: 2m 15sRunning iteration 1061/1500... Est. remaining: 2m 12sRunning iteration 1071/1500... Est. remaining: 2m 9sRunning iteration 1081/1500... Est. remaining: 2m 6sRunning iteration 1091/1500... Est. remaining: 2m 3sRunning iteration 1101/1500... Est. remaining: 2m 0sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.036365814227018), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 57sRunning iteration 1121/1500... Est. remaining: 1m 54sRunning iteration 1131/1500... Est. remaining: 1m 51sRunning iteration 1141/1500... Est. remaining: 1m 48sRunning iteration 1151/1500... Est. remaining: 1m 45sRunning iteration 1161/1500... Est. remaining: 1m 41sRunning iteration 1171/1500... Est. remaining: 1m 38sRunning iteration 1181/1500... Est. remaining: 1m 35sRunning iteration 1191/1500... Est. remaining: 1m 32sRunning iteration 1201/1500... Est. remaining: 1m 29sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.036365814227018), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 26sRunning iteration 1221/1500... Est. remaining: 1m 23sRunning iteration 1231/1500... Est. remaining: 1m 20sRunning iteration 1241/1500... Est. remaining: 1m 17sRunning iteration 1251/1500... Est. remaining: 1m 14sRunning iteration 1261/1500... Est. remaining: 1m 11sRunning iteration 1271/1500... Est. remaining: 1m 8sRunning iteration 1281/1500... Est. remaining: 1m 5sRunning iteration 1291/1500... Est. remaining: 1m 2sRunning iteration 1301/1500... Est. remaining: 0m 59sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.036365814227018), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 56sRunning iteration 1321/1500... Est. remaining: 0m 53sRunning iteration 1331/1500... Est. remaining: 0m 50sRunning iteration 1341/1500... Est. remaining: 0m 47sRunning iteration 1351/1500... Est. remaining: 0m 44sRunning iteration 1361/1500... Est. remaining: 0m 41sRunning iteration 1371/1500... Est. remaining: 0m 38sRunning iteration 1381/1500... Est. remaining: 0m 35sRunning iteration 1391/1500... Est. remaining: 0m 32sRunning iteration 1401/1500... Est. remaining: 0m 29sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.036365814227018), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 26sRunning iteration 1421/1500... Est. remaining: 0m 23sRunning iteration 1431/1500... Est. remaining: 0m 20sRunning iteration 1441/1500... Est. remaining: 0m 17sRunning iteration 1451/1500... Est. remaining: 0m 14sRunning iteration 1461/1500... Est. remaining: 0m 11sRunning iteration 1471/1500... Est. remaining: 0m 8sRunning iteration 1481/1500... Est. remaining: 0m 5sRunning iteration 1491/1500... Est. remaining: 0m 2s
Monte Carlo simulation completed in 7.5 minutes
Best normalized score: 2.04
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.036365814227018), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 2.0364)

Monte Carlo simulation completed in 7.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Mon Aug 25 15:50:37 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,520,649,831
Annual Return: 44.56%
Sharpe Ratio: 1.44732
Sortino Ratio: 1.405
Max Drawdown: -66.0%
Avg Drawdown: -12.8%
Normalized Score: -0.383
Lookback periods: [140, 184, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,791,911,937
Annual Return: 45.85%
Sharpe Ratio: 1.51440
Sortino Ratio: 1.479
Max Drawdown: -61.1%
Avg Drawdown: -12.4%
Normalized Score: 0.059
Lookback periods: [129, 136, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 17m 54sRunning iteration 21/1500... Est. remaining: 12m 11sRunning iteration 31/1500... Est. remaining: 10m 13sRunning iteration 41/1500... Est. remaining: 9m 20sRunning iteration 51/1500... Est. remaining: 8m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,590,912,553
Annual Return: 44.64%
Sharpe Ratio: 1.50968
Sortino Ratio: 1.453
Max Drawdown: -58.7%
Avg Drawdown: -11.7%
Normalized Score: 0.125
Lookback periods: [107, 130, 137] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 8m 50sRunning iteration 71/1500... Est. remaining: 8m 36sRunning iteration 81/1500... Est. remaining: 8m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,030,105,481
Annual Return: 47.47%
Sharpe Ratio: 1.53527
Sortino Ratio: 1.490
Max Drawdown: -60.6%
Avg Drawdown: -11.8%
Normalized Score: 0.250
Lookback periods: [149, 188, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 8m 23sRunning iteration 101/1500... Est. remaining: 8m 12sbest_combination: {'lookbacks': [149, 188, 191], 'score': np.float64(0.24996585614758465), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 4sRunning iteration 121/1500... Est. remaining: 7m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,679,507,729
Annual Return: 47.25%
Sharpe Ratio: 1.54044
Sortino Ratio: 1.507
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.440
Lookback periods: [154, 161, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 7m 57sRunning iteration 141/1500... Est. remaining: 7m 49sRunning iteration 151/1500... Est. remaining: 7m 42sRunning iteration 161/1500... Est. remaining: 7m 35sRunning iteration 171/1500... Est. remaining: 7m 29sRunning iteration 181/1500... Est. remaining: 7m 23sRunning iteration 191/1500... Est. remaining: 7m 18sRunning iteration 201/1500... Est. remaining: 7m 13sbest_combination: {'lookbacks': [154, 161, 166], 'score': np.float64(0.4402988895608055), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 7sRunning iteration 221/1500... Est. remaining: 7m 3sRunning iteration 231/1500... Est. remaining: 6m 58sRunning iteration 241/1500... Est. remaining: 6m 53sRunning iteration 251/1500... Est. remaining: 6m 49sRunning iteration 261/1500... Est. remaining: 6m 45sRunning iteration 271/1500... Est. remaining: 6m 41sRunning iteration 281/1500... Est. remaining: 6m 36sRunning iteration 291/1500... Est. remaining: 6m 32sRunning iteration 301/1500... Est. remaining: 6m 28sbest_combination: {'lookbacks': [154, 161, 166], 'score': np.float64(0.4402988895608055), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,421,211,674
Annual Return: 40.82%
Sharpe Ratio: 1.45161
Sortino Ratio: 1.355
Max Drawdown: -38.3%
Avg Drawdown: -10.0%
Normalized Score: 0.549
Lookback periods: [50, 51, 75] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 6m 27sRunning iteration 321/1500... Est. remaining: 6m 23sRunning iteration 331/1500... Est. remaining: 6m 19sRunning iteration 341/1500... Est. remaining: 6m 15sRunning iteration 351/1500... Est. remaining: 6m 11sRunning iteration 361/1500... Est. remaining: 6m 8sRunning iteration 371/1500... Est. remaining: 6m 4sRunning iteration 381/1500... Est. remaining: 6m 0sRunning iteration 391/1500... Est. remaining: 5m 56sRunning iteration 401/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [50, 51, 75], 'score': np.float64(0.5494852374887736), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,433,428,150
Annual Return: 40.86%
Sharpe Ratio: 1.43879
Sortino Ratio: 1.350
Max Drawdown: -34.7%
Avg Drawdown: -9.9%
Normalized Score: 0.634
Lookback periods: [53, 53, 78] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 5m 51sRunning iteration 421/1500... Est. remaining: 5m 48sRunning iteration 431/1500... Est. remaining: 5m 44sRunning iteration 441/1500... Est. remaining: 5m 41sRunning iteration 451/1500... Est. remaining: 5m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,335,118,314
Annual Return: 42.85%
Sharpe Ratio: 1.52582
Sortino Ratio: 1.432
Max Drawdown: -36.8%
Avg Drawdown: -9.6%
Normalized Score: 0.928
Lookback periods: [50, 54, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 5m 35sRunning iteration 471/1500... Est. remaining: 5m 32sRunning iteration 481/1500... Est. remaining: 5m 28sRunning iteration 491/1500... Est. remaining: 5m 25sRunning iteration 501/1500... Est. remaining: 5m 21sbest_combination: {'lookbacks': [50, 54, 80], 'score': np.float64(0.9282287840703768), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,778,317,395
Annual Return: 41.74%
Sharpe Ratio: 1.51109
Sortino Ratio: 1.412
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.025
Lookback periods: [50, 50, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 5m 16sRunning iteration 531/1500... Est. remaining: 5m 12sRunning iteration 541/1500... Est. remaining: 5m 9sRunning iteration 551/1500... Est. remaining: 5m 5sRunning iteration 561/1500... Est. remaining: 5m 2sRunning iteration 571/1500... Est. remaining: 4m 58sRunning iteration 581/1500... Est. remaining: 4m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,037,914,546
Annual Return: 43.94%
Sharpe Ratio: 1.57274
Sortino Ratio: 1.474
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.211
Lookback periods: [50, 54, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 4m 53sRunning iteration 601/1500... Est. remaining: 4m 49sbest_combination: {'lookbacks': [50, 54, 89], 'score': np.float64(1.2107171575685358), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 46sRunning iteration 621/1500... Est. remaining: 4m 43sRunning iteration 631/1500... Est. remaining: 4m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,687,966,149
Annual Return: 43.43%
Sharpe Ratio: 1.57296
Sortino Ratio: 1.472
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.277
Lookback periods: [50, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,622,827,200
Annual Return: 44.68%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.471
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 4m 38sRunning iteration 651/1500... Est. remaining: 4m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.540
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 4m 32sRunning iteration 671/1500... Est. remaining: 4m 28sRunning iteration 681/1500... Est. remaining: 4m 25sRunning iteration 691/1500... Est. remaining: 4m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.683
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/1500... Est. remaining: 4m 19sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6831283035995075), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 15sRunning iteration 721/1500... Est. remaining: 4m 12sRunning iteration 731/1500... Est. remaining: 4m 8sRunning iteration 741/1500... Est. remaining: 4m 5sRunning iteration 751/1500... Est. remaining: 4m 1sRunning iteration 761/1500... Est. remaining: 3m 58sRunning iteration 771/1500... Est. remaining: 3m 55sRunning iteration 781/1500... Est. remaining: 3m 51sRunning iteration 791/1500... Est. remaining: 3m 48sRunning iteration 801/1500... Est. remaining: 3m 44sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6831283035995075), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 41sRunning iteration 821/1500... Est. remaining: 3m 38sRunning iteration 831/1500... Est. remaining: 3m 34sRunning iteration 841/1500... Est. remaining: 3m 31sRunning iteration 851/1500... Est. remaining: 3m 28sRunning iteration 861/1500... Est. remaining: 3m 24sRunning iteration 871/1500... Est. remaining: 3m 21sRunning iteration 881/1500... Est. remaining: 3m 18sRunning iteration 891/1500... Est. remaining: 3m 14sRunning iteration 901/1500... Est. remaining: 3m 11sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6831283035995075), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 8sRunning iteration 921/1500... Est. remaining: 3m 5sRunning iteration 931/1500... Est. remaining: 3m 1sRunning iteration 941/1500... Est. remaining: 2m 58sRunning iteration 951/1500... Est. remaining: 2m 55sRunning iteration 961/1500... Est. remaining: 2m 51sRunning iteration 971/1500... Est. remaining: 2m 48sRunning iteration 981/1500... Est. remaining: 2m 45sRunning iteration 991/1500... Est. remaining: 2m 42sRunning iteration 1001/1500... Est. remaining: 2m 39sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6831283035995075), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 35sRunning iteration 1021/1500... Est. remaining: 2m 32sRunning iteration 1031/1500... Est. remaining: 2m 29sRunning iteration 1041/1500... Est. remaining: 2m 26sRunning iteration 1051/1500... Est. remaining: 2m 22sRunning iteration 1061/1500... Est. remaining: 2m 19sRunning iteration 1071/1500... Est. remaining: 2m 16sRunning iteration 1081/1500... Est. remaining: 2m 13sRunning iteration 1091/1500... Est. remaining: 2m 10sRunning iteration 1101/1500... Est. remaining: 2m 6sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6831283035995075), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 3sRunning iteration 1121/1500... Est. remaining: 2m 0sRunning iteration 1131/1500... Est. remaining: 1m 57sRunning iteration 1141/1500... Est. remaining: 1m 53sRunning iteration 1151/1500... Est. remaining: 1m 50sRunning iteration 1161/1500... Est. remaining: 1m 47sRunning iteration 1171/1500... Est. remaining: 1m 44sRunning iteration 1181/1500... Est. remaining: 1m 41sRunning iteration 1191/1500... Est. remaining: 1m 37sRunning iteration 1201/1500... Est. remaining: 1m 34sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6831283035995075), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 31sRunning iteration 1221/1500... Est. remaining: 1m 28sRunning iteration 1231/1500... Est. remaining: 1m 25sRunning iteration 1241/1500... Est. remaining: 1m 22sRunning iteration 1251/1500... Est. remaining: 1m 18sRunning iteration 1261/1500... Est. remaining: 1m 15sRunning iteration 1271/1500... Est. remaining: 1m 12sRunning iteration 1281/1500... Est. remaining: 1m 9sRunning iteration 1291/1500... Est. remaining: 1m 6sRunning iteration 1301/1500... Est. remaining: 1m 3sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6831283035995075), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 53sRunning iteration 1341/1500... Est. remaining: 0m 50sRunning iteration 1351/1500... Est. remaining: 0m 47sRunning iteration 1361/1500... Est. remaining: 0m 44sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6831283035995075), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 25sRunning iteration 1431/1500... Est. remaining: 0m 22sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.733
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.9 minutes
Best normalized score: 1.73
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.7329364026673737), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 1.7329)

Monte Carlo simulation completed in 7.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Mon Aug 25 15:58:35 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $378,170,128
Annual Return: 35.54%
Sharpe Ratio: 1.24206
Sortino Ratio: 1.156
Max Drawdown: -52.3%
Avg Drawdown: -12.4%
Normalized Score: -1.749
Lookback periods: [60, 81, 105] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,371,328,972
Annual Return: 40.68%
Sharpe Ratio: 1.36675
Sortino Ratio: 1.309
Max Drawdown: -65.3%
Avg Drawdown: -13.7%
Normalized Score: -1.440
Lookback periods: [100, 141, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,225,762,099
Annual Return: 40.22%
Sharpe Ratio: 1.39043
Sortino Ratio: 1.313
Max Drawdown: -52.3%
Avg Drawdown: -11.8%
Normalized Score: -0.715
Lookback periods: [90, 92, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,408,243,809
Annual Return: 44.42%
Sharpe Ratio: 1.46234
Sortino Ratio: 1.425
Max Drawdown: -68.5%
Avg Drawdown: -12.4%
Normalized Score: -0.634
Lookback periods: [120, 153, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 16m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,374,515,460
Annual Return: 44.38%
Sharpe Ratio: 1.48098
Sortino Ratio: 1.431
Max Drawdown: -59.7%
Avg Drawdown: -12.4%
Normalized Score: -0.307
Lookback periods: [144, 149, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 12m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,431,816,309
Annual Return: 43.02%
Sharpe Ratio: 1.47284
Sortino Ratio: 1.397
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: -0.039
Lookback periods: [94, 108, 111] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 11m 23sRunning iteration 41/1500... Est. remaining: 10m 29sRunning iteration 51/1500... Est. remaining: 9m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,746,336,488
Annual Return: 47.29%
Sharpe Ratio: 1.54997
Sortino Ratio: 1.511
Max Drawdown: -59.7%
Avg Drawdown: -12.1%
Normalized Score: 0.262
Lookback periods: [150, 152, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 9m 42sRunning iteration 71/1500... Est. remaining: 9m 19sRunning iteration 81/1500... Est. remaining: 9m 0sRunning iteration 91/1500... Est. remaining: 8m 45sRunning iteration 101/1500... Est. remaining: 8m 31sbest_combination: {'lookbacks': [150, 152, 167], 'score': np.float64(0.26243278377966367), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 21sRunning iteration 121/1500... Est. remaining: 8m 11sRunning iteration 131/1500... Est. remaining: 8m 2sRunning iteration 141/1500... Est. remaining: 7m 55sRunning iteration 151/1500... Est. remaining: 7m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,605,168,415
Annual Return: 47.80%
Sharpe Ratio: 1.56426
Sortino Ratio: 1.538
Max Drawdown: -56.9%
Avg Drawdown: -11.2%
Normalized Score: 0.624
Lookback periods: [159, 161, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 7m 47sRunning iteration 171/1500... Est. remaining: 7m 40sRunning iteration 181/1500... Est. remaining: 7m 34sRunning iteration 191/1500... Est. remaining: 7m 27sRunning iteration 201/1500... Est. remaining: 7m 21sbest_combination: {'lookbacks': [159, 161, 166], 'score': np.float64(0.6239573748643521), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 16sRunning iteration 221/1500... Est. remaining: 7m 11sRunning iteration 231/1500... Est. remaining: 7m 6sRunning iteration 241/1500... Est. remaining: 7m 1sRunning iteration 251/1500... Est. remaining: 6m 56sRunning iteration 261/1500... Est. remaining: 6m 52sRunning iteration 271/1500... Est. remaining: 6m 47sRunning iteration 281/1500... Est. remaining: 6m 43sRunning iteration 291/1500... Est. remaining: 6m 38sRunning iteration 301/1500... Est. remaining: 6m 34sbest_combination: {'lookbacks': [159, 161, 166], 'score': np.float64(0.6239573748643521), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 30sRunning iteration 321/1500... Est. remaining: 6m 26sRunning iteration 331/1500... Est. remaining: 6m 22sRunning iteration 341/1500... Est. remaining: 6m 18sRunning iteration 351/1500... Est. remaining: 6m 14sRunning iteration 361/1500... Est. remaining: 6m 10sRunning iteration 371/1500... Est. remaining: 6m 6sRunning iteration 381/1500... Est. remaining: 6m 3sRunning iteration 391/1500... Est. remaining: 5m 59sRunning iteration 401/1500... Est. remaining: 5m 55sbest_combination: {'lookbacks': [159, 161, 166], 'score': np.float64(0.6239573748643521), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 52sRunning iteration 421/1500... Est. remaining: 5m 48sRunning iteration 431/1500... Est. remaining: 5m 44sRunning iteration 441/1500... Est. remaining: 5m 40sRunning iteration 451/1500... Est. remaining: 5m 37sRunning iteration 461/1500... Est. remaining: 5m 33sRunning iteration 471/1500... Est. remaining: 5m 29sRunning iteration 481/1500... Est. remaining: 5m 26sRunning iteration 491/1500... Est. remaining: 5m 22sRunning iteration 501/1500... Est. remaining: 5m 19sbest_combination: {'lookbacks': [159, 161, 166], 'score': np.float64(0.6239573748643521), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 15sRunning iteration 521/1500... Est. remaining: 5m 12sRunning iteration 531/1500... Est. remaining: 5m 8sRunning iteration 541/1500... Est. remaining: 5m 5sRunning iteration 551/1500... Est. remaining: 5m 1sRunning iteration 561/1500... Est. remaining: 4m 58sRunning iteration 571/1500... Est. remaining: 4m 54sRunning iteration 581/1500... Est. remaining: 4m 51sRunning iteration 591/1500... Est. remaining: 4m 48sRunning iteration 601/1500... Est. remaining: 4m 44sbest_combination: {'lookbacks': [159, 161, 166], 'score': np.float64(0.6239573748643521), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 41sRunning iteration 621/1500... Est. remaining: 4m 38sRunning iteration 631/1500... Est. remaining: 4m 34sRunning iteration 641/1500... Est. remaining: 4m 31sRunning iteration 651/1500... Est. remaining: 4m 28sRunning iteration 661/1500... Est. remaining: 4m 24sRunning iteration 671/1500... Est. remaining: 4m 21sRunning iteration 681/1500... Est. remaining: 4m 18sRunning iteration 691/1500... Est. remaining: 4m 14sRunning iteration 701/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [159, 161, 166], 'score': np.float64(0.6239573748643521), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 8sRunning iteration 721/1500... Est. remaining: 4m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,101,733,499
Annual Return: 48.57%
Sharpe Ratio: 1.58790
Sortino Ratio: 1.554
Max Drawdown: -59.0%
Avg Drawdown: -10.4%
Normalized Score: 0.812
Lookback periods: [158, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 4m 2sRunning iteration 741/1500... Est. remaining: 3m 59sRunning iteration 751/1500... Est. remaining: 3m 56sRunning iteration 761/1500... Est. remaining: 3m 52sRunning iteration 771/1500... Est. remaining: 3m 49sRunning iteration 781/1500... Est. remaining: 3m 46sRunning iteration 791/1500... Est. remaining: 3m 43sRunning iteration 801/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [158, 161, 168], 'score': np.float64(0.8115782065874318), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 36sRunning iteration 821/1500... Est. remaining: 3m 33sRunning iteration 831/1500... Est. remaining: 3m 30sRunning iteration 841/1500... Est. remaining: 3m 26sRunning iteration 851/1500... Est. remaining: 3m 23sRunning iteration 861/1500... Est. remaining: 3m 20sRunning iteration 871/1500... Est. remaining: 3m 17sRunning iteration 881/1500... Est. remaining: 3m 14sRunning iteration 891/1500... Est. remaining: 3m 10sRunning iteration 901/1500... Est. remaining: 3m 7sbest_combination: {'lookbacks': [158, 161, 168], 'score': np.float64(0.8115782065874318), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 4sRunning iteration 921/1500... Est. remaining: 3m 1sRunning iteration 931/1500... Est. remaining: 2m 58sRunning iteration 941/1500... Est. remaining: 2m 55sRunning iteration 951/1500... Est. remaining: 2m 51sRunning iteration 961/1500... Est. remaining: 2m 48sRunning iteration 971/1500... Est. remaining: 2m 45sRunning iteration 981/1500... Est. remaining: 2m 42sRunning iteration 991/1500... Est. remaining: 2m 39sRunning iteration 1001/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [158, 161, 168], 'score': np.float64(0.8115782065874318), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,989,941,669
Annual Return: 48.97%
Sharpe Ratio: 1.59907
Sortino Ratio: 1.568
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 0.985
Lookback periods: [156, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 23sRunning iteration 1051/1500... Est. remaining: 2m 20sRunning iteration 1061/1500... Est. remaining: 2m 17sRunning iteration 1071/1500... Est. remaining: 2m 14sRunning iteration 1081/1500... Est. remaining: 2m 11sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.9847438052246009), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 58sRunning iteration 1131/1500... Est. remaining: 1m 55sRunning iteration 1141/1500... Est. remaining: 1m 52sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.9847438052246009), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.9847438052246009), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.9847438052246009), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 0.98
best_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.9847438052246009), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 161, 168] (score: 0.9847)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 161, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 108 selections (26.0%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,989,941,669.30
Average Annualized Gain: 49.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Mon Aug 25 16:06:26 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-25T16:06:26.653315
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.8944
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $792,066,195
Annual Return: 38.47%
Sharpe Ratio: 1.33995
Sortino Ratio: 1.241
Max Drawdown: -62.2%
Avg Drawdown: -13.2%
Normalized Score: -0.821
Lookback periods: [56, 103, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,405,803,270
Annual Return: 40.78%
Sharpe Ratio: 1.41943
Sortino Ratio: 1.322
Max Drawdown: -62.2%
Avg Drawdown: -11.7%
Normalized Score: -0.150
Lookback periods: [57, 97, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $993,596,879
Annual Return: 39.37%
Sharpe Ratio: 1.37926
Sortino Ratio: 1.286
Max Drawdown: -51.1%
Avg Drawdown: -10.7%
Normalized Score: 0.134
Lookback periods: [50, 55, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 15m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,433,138,352
Annual Return: 46.38%
Sharpe Ratio: 1.51035
Sortino Ratio: 1.474
Max Drawdown: -61.6%
Avg Drawdown: -11.8%
Normalized Score: 0.745
Lookback periods: [160, 188, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 11m 49sRunning iteration 31/1500... Est. remaining: 10m 10sRunning iteration 41/1500... Est. remaining: 9m 27sRunning iteration 51/1500... Est. remaining: 9m 1sRunning iteration 61/1500... Est. remaining: 8m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,297,453,650
Annual Return: 46.27%
Sharpe Ratio: 1.51405
Sortino Ratio: 1.478
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: 1.055
Lookback periods: [156, 162, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 8m 43sRunning iteration 81/1500... Est. remaining: 8m 30sRunning iteration 91/1500... Est. remaining: 8m 17sRunning iteration 101/1500... Est. remaining: 8m 6sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8943661435312769), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 57sRunning iteration 121/1500... Est. remaining: 7m 49sRunning iteration 131/1500... Est. remaining: 7m 41sRunning iteration 141/1500... Est. remaining: 7m 34sRunning iteration 151/1500... Est. remaining: 7m 27sRunning iteration 161/1500... Est. remaining: 7m 22sRunning iteration 171/1500... Est. remaining: 7m 16sRunning iteration 181/1500... Est. remaining: 7m 11sRunning iteration 191/1500... Est. remaining: 7m 6sRunning iteration 201/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8943661435312769), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 56sRunning iteration 221/1500... Est. remaining: 6m 52sRunning iteration 231/1500... Est. remaining: 6m 47sRunning iteration 241/1500... Est. remaining: 6m 43sRunning iteration 251/1500... Est. remaining: 6m 39sRunning iteration 261/1500... Est. remaining: 6m 35sRunning iteration 271/1500... Est. remaining: 6m 31sRunning iteration 281/1500... Est. remaining: 6m 27sRunning iteration 291/1500... Est. remaining: 6m 23sRunning iteration 301/1500... Est. remaining: 6m 19sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8943661435312769), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 15sRunning iteration 321/1500... Est. remaining: 6m 12sRunning iteration 331/1500... Est. remaining: 6m 8sRunning iteration 341/1500... Est. remaining: 6m 4sRunning iteration 351/1500... Est. remaining: 6m 1sRunning iteration 361/1500... Est. remaining: 5m 57sRunning iteration 371/1500... Est. remaining: 5m 54sRunning iteration 381/1500... Est. remaining: 5m 50sRunning iteration 391/1500... Est. remaining: 5m 47sRunning iteration 401/1500... Est. remaining: 5m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8943661435312769), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,634,177,103
Annual Return: 43.35%
Sharpe Ratio: 1.56308
Sortino Ratio: 1.464
Max Drawdown: -38.7%
Avg Drawdown: -9.6%
Normalized Score: 1.592
Lookback periods: [51, 54, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 5m 38sRunning iteration 431/1500... Est. remaining: 5m 35sRunning iteration 441/1500... Est. remaining: 5m 32sRunning iteration 451/1500... Est. remaining: 5m 28sRunning iteration 461/1500... Est. remaining: 5m 25sRunning iteration 471/1500... Est. remaining: 5m 22sRunning iteration 481/1500... Est. remaining: 5m 18sRunning iteration 491/1500... Est. remaining: 5m 15sRunning iteration 501/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8943661435312769), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 8sRunning iteration 521/1500... Est. remaining: 5m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,677,941,807
Annual Return: 44.74%
Sharpe Ratio: 1.60567
Sortino Ratio: 1.525
Max Drawdown: -36.6%
Avg Drawdown: -8.6%
Normalized Score: 2.090
Lookback periods: [52, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 5m 3sRunning iteration 541/1500... Est. remaining: 5m 0sRunning iteration 551/1500... Est. remaining: 4m 56sRunning iteration 561/1500... Est. remaining: 4m 53sRunning iteration 571/1500... Est. remaining: 4m 50sRunning iteration 581/1500... Est. remaining: 4m 46sRunning iteration 591/1500... Est. remaining: 4m 43sRunning iteration 601/1500... Est. remaining: 4m 40sbest_combination: {'lookbacks': [52, 52, 97], 'score': np.float64(2.0897093683859866), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 37sRunning iteration 621/1500... Est. remaining: 4m 33sRunning iteration 631/1500... Est. remaining: 4m 30sRunning iteration 641/1500... Est. remaining: 4m 27sRunning iteration 651/1500... Est. remaining: 4m 24sRunning iteration 661/1500... Est. remaining: 4m 21sRunning iteration 671/1500... Est. remaining: 4m 17sRunning iteration 681/1500... Est. remaining: 4m 14sRunning iteration 691/1500... Est. remaining: 4m 11sRunning iteration 701/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [52, 52, 97], 'score': np.float64(2.0897093683859866), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 5sRunning iteration 721/1500... Est. remaining: 4m 1sRunning iteration 731/1500... Est. remaining: 3m 58sRunning iteration 741/1500... Est. remaining: 3m 55sRunning iteration 751/1500... Est. remaining: 3m 52sRunning iteration 761/1500... Est. remaining: 3m 49sRunning iteration 771/1500... Est. remaining: 3m 46sRunning iteration 781/1500... Est. remaining: 3m 42sRunning iteration 791/1500... Est. remaining: 3m 39sRunning iteration 801/1500... Est. remaining: 3m 36sbest_combination: {'lookbacks': [52, 52, 97], 'score': np.float64(2.0897093683859866), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 33sRunning iteration 821/1500... Est. remaining: 3m 30sRunning iteration 831/1500... Est. remaining: 3m 27sRunning iteration 841/1500... Est. remaining: 3m 23sRunning iteration 851/1500... Est. remaining: 3m 20sRunning iteration 861/1500... Est. remaining: 3m 17sRunning iteration 871/1500... Est. remaining: 3m 14sRunning iteration 881/1500... Est. remaining: 3m 11sRunning iteration 891/1500... Est. remaining: 3m 8sRunning iteration 901/1500... Est. remaining: 3m 5sbest_combination: {'lookbacks': [52, 52, 97], 'score': np.float64(2.0897093683859866), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 1sRunning iteration 921/1500... Est. remaining: 2m 58sRunning iteration 931/1500... Est. remaining: 2m 55sRunning iteration 941/1500... Est. remaining: 2m 52sRunning iteration 951/1500... Est. remaining: 2m 49sRunning iteration 961/1500... Est. remaining: 2m 46sRunning iteration 971/1500... Est. remaining: 2m 43sRunning iteration 981/1500... Est. remaining: 2m 40sRunning iteration 991/1500... Est. remaining: 2m 37sRunning iteration 1001/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [52, 52, 97], 'score': np.float64(2.0897093683859866), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 30sRunning iteration 1021/1500... Est. remaining: 2m 27sRunning iteration 1031/1500... Est. remaining: 2m 24sRunning iteration 1041/1500... Est. remaining: 2m 21sRunning iteration 1051/1500... Est. remaining: 2m 18sRunning iteration 1061/1500... Est. remaining: 2m 15sRunning iteration 1071/1500... Est. remaining: 2m 12sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [52, 52, 97], 'score': np.float64(2.0897093683859866), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 59sRunning iteration 1121/1500... Est. remaining: 1m 56sRunning iteration 1131/1500... Est. remaining: 1m 53sRunning iteration 1141/1500... Est. remaining: 1m 50sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [52, 52, 97], 'score': np.float64(2.0897093683859866), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [52, 52, 97], 'score': np.float64(2.0897093683859866), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [52, 52, 97], 'score': np.float64(2.0897093683859866), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 2.09
best_combination: {'lookbacks': [52, 52, 97], 'score': np.float64(2.0897093683859866), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [52, 52, 97] (score: 2.0897)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 97] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 107 selections (25.7%)
2. naz100_hma: 95 selections (22.8%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,677,941,806.53
Average Annualized Gain: 44.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Mon Aug 25 16:14:13 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,282,211,806
Annual Return: 44.26%
Sharpe Ratio: 1.46082
Sortino Ratio: 1.414
Max Drawdown: -67.5%
Avg Drawdown: -12.8%
Normalized Score: -0.387
Lookback periods: [112, 156, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,365,272,613
Annual Return: 42.91%
Sharpe Ratio: 1.47370
Sortino Ratio: 1.378
Max Drawdown: -55.0%
Avg Drawdown: -12.1%
Normalized Score: -0.040
Lookback periods: [54, 109, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 15m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,042,686,097
Annual Return: 46.06%
Sharpe Ratio: 1.50000
Sortino Ratio: 1.459
Max Drawdown: -60.2%
Avg Drawdown: -11.8%
Normalized Score: 0.099
Lookback periods: [157, 187, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 11m 54sRunning iteration 31/1500... Est. remaining: 10m 1sRunning iteration 41/1500... Est. remaining: 9m 0sRunning iteration 51/1500... Est. remaining: 8m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,201,304,330
Annual Return: 44.16%
Sharpe Ratio: 1.50877
Sortino Ratio: 1.440
Max Drawdown: -52.3%
Avg Drawdown: -10.7%
Normalized Score: 0.361
Lookback periods: [89, 125, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 8m 23sRunning iteration 71/1500... Est. remaining: 8m 12sRunning iteration 81/1500... Est. remaining: 8m 2sRunning iteration 91/1500... Est. remaining: 7m 53sRunning iteration 101/1500... Est. remaining: 7m 45sbest_combination: {'lookbacks': [89, 125, 131], 'score': np.float64(0.36105550638386225), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 39sRunning iteration 121/1500... Est. remaining: 7m 32sRunning iteration 131/1500... Est. remaining: 7m 26sRunning iteration 141/1500... Est. remaining: 7m 20sRunning iteration 151/1500... Est. remaining: 7m 15sRunning iteration 161/1500... Est. remaining: 7m 11sRunning iteration 171/1500... Est. remaining: 7m 6sRunning iteration 181/1500... Est. remaining: 7m 2sRunning iteration 191/1500... Est. remaining: 6m 57sRunning iteration 201/1500... Est. remaining: 6m 53sbest_combination: {'lookbacks': [89, 125, 131], 'score': np.float64(0.36105550638386225), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,951,255,800
Annual Return: 42.12%
Sharpe Ratio: 1.51997
Sortino Ratio: 1.410
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 0.895
Lookback periods: [51, 52, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 6m 50sRunning iteration 231/1500... Est. remaining: 6m 46sRunning iteration 241/1500... Est. remaining: 6m 42sRunning iteration 251/1500... Est. remaining: 6m 38sRunning iteration 261/1500... Est. remaining: 6m 34sRunning iteration 271/1500... Est. remaining: 6m 30sRunning iteration 281/1500... Est. remaining: 6m 26sRunning iteration 291/1500... Est. remaining: 6m 23sRunning iteration 301/1500... Est. remaining: 6m 19sbest_combination: {'lookbacks': [51, 52, 85], 'score': np.float64(0.8954462888704416), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 15sRunning iteration 321/1500... Est. remaining: 6m 12sRunning iteration 331/1500... Est. remaining: 6m 8sRunning iteration 341/1500... Est. remaining: 6m 4sRunning iteration 351/1500... Est. remaining: 6m 1sRunning iteration 361/1500... Est. remaining: 5m 58sRunning iteration 371/1500... Est. remaining: 5m 55sRunning iteration 381/1500... Est. remaining: 5m 51sRunning iteration 391/1500... Est. remaining: 5m 48sRunning iteration 401/1500... Est. remaining: 5m 45sbest_combination: {'lookbacks': [51, 52, 85], 'score': np.float64(0.8954462888704416), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,988,750,556
Annual Return: 43.87%
Sharpe Ratio: 1.55360
Sortino Ratio: 1.462
Max Drawdown: -36.7%
Avg Drawdown: -9.4%
Normalized Score: 1.024
Lookback periods: [50, 53, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 5m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,044,945,767
Annual Return: 43.95%
Sharpe Ratio: 1.57562
Sortino Ratio: 1.473
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.105
Lookback periods: [50, 52, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 5m 42sRunning iteration 431/1500... Est. remaining: 5m 38sRunning iteration 441/1500... Est. remaining: 5m 35sRunning iteration 451/1500... Est. remaining: 5m 31sRunning iteration 461/1500... Est. remaining: 5m 28sRunning iteration 471/1500... Est. remaining: 5m 24sRunning iteration 481/1500... Est. remaining: 5m 21sRunning iteration 491/1500... Est. remaining: 5m 17sRunning iteration 501/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [50, 52, 83], 'score': np.float64(1.105148097386809), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 11sRunning iteration 521/1500... Est. remaining: 5m 7sRunning iteration 531/1500... Est. remaining: 5m 4sRunning iteration 541/1500... Est. remaining: 5m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,229,417,452
Annual Return: 44.20%
Sharpe Ratio: 1.57610
Sortino Ratio: 1.489
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.176
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 4m 58sRunning iteration 561/1500... Est. remaining: 4m 55sRunning iteration 571/1500... Est. remaining: 4m 52sRunning iteration 581/1500... Est. remaining: 4m 48sRunning iteration 591/1500... Est. remaining: 4m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,613,029,033
Annual Return: 43.32%
Sharpe Ratio: 1.58577
Sortino Ratio: 1.485
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.232
Lookback periods: [50, 57, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/1500... Est. remaining: 4m 43sbest_combination: {'lookbacks': [50, 57, 96], 'score': np.float64(1.231951580237412), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 39sRunning iteration 621/1500... Est. remaining: 4m 36sRunning iteration 631/1500... Est. remaining: 4m 33sRunning iteration 641/1500... Est. remaining: 4m 29sRunning iteration 651/1500... Est. remaining: 4m 26sRunning iteration 661/1500... Est. remaining: 4m 23sRunning iteration 671/1500... Est. remaining: 4m 19sRunning iteration 681/1500... Est. remaining: 4m 16sRunning iteration 691/1500... Est. remaining: 4m 13sRunning iteration 701/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [50, 57, 96], 'score': np.float64(1.231951580237412), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 6sRunning iteration 721/1500... Est. remaining: 4m 3sRunning iteration 731/1500... Est. remaining: 4m 0sRunning iteration 741/1500... Est. remaining: 3m 56sRunning iteration 751/1500... Est. remaining: 3m 53sRunning iteration 761/1500... Est. remaining: 3m 50sRunning iteration 771/1500... Est. remaining: 3m 47sRunning iteration 781/1500... Est. remaining: 3m 43sRunning iteration 791/1500... Est. remaining: 3m 40sRunning iteration 801/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [50, 57, 96], 'score': np.float64(1.231951580237412), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 34sRunning iteration 821/1500... Est. remaining: 3m 31sRunning iteration 831/1500... Est. remaining: 3m 27sRunning iteration 841/1500... Est. remaining: 3m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,622,827,200
Annual Return: 44.68%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.376
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.569
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 14sRunning iteration 891/1500... Est. remaining: 3m 12sRunning iteration 901/1500... Est. remaining: 3m 10sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5688882950997678), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 8sRunning iteration 921/1500... Est. remaining: 3m 6sRunning iteration 931/1500... Est. remaining: 3m 4sRunning iteration 941/1500... Est. remaining: 3m 2sRunning iteration 951/1500... Est. remaining: 3m 0sRunning iteration 961/1500... Est. remaining: 2m 57sRunning iteration 971/1500... Est. remaining: 2m 55sRunning iteration 981/1500... Est. remaining: 2m 53sRunning iteration 991/1500... Est. remaining: 2m 50sRunning iteration 1001/1500... Est. remaining: 2m 48sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5688882950997678), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 45sRunning iteration 1021/1500... Est. remaining: 2m 42sRunning iteration 1031/1500... Est. remaining: 2m 40sRunning iteration 1041/1500... Est. remaining: 2m 37sRunning iteration 1051/1500... Est. remaining: 2m 34sRunning iteration 1061/1500... Est. remaining: 2m 31sRunning iteration 1071/1500... Est. remaining: 2m 29sRunning iteration 1081/1500... Est. remaining: 2m 26sRunning iteration 1091/1500... Est. remaining: 2m 23sRunning iteration 1101/1500... Est. remaining: 2m 20sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5688882950997678), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 17sRunning iteration 1121/1500... Est. remaining: 2m 14sRunning iteration 1131/1500... Est. remaining: 2m 11sRunning iteration 1141/1500... Est. remaining: 2m 8sRunning iteration 1151/1500... Est. remaining: 2m 5sRunning iteration 1161/1500... Est. remaining: 2m 1sRunning iteration 1171/1500... Est. remaining: 1m 58sRunning iteration 1181/1500... Est. remaining: 1m 55sRunning iteration 1191/1500... Est. remaining: 1m 52sRunning iteration 1201/1500... Est. remaining: 1m 49sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5688882950997678), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 45sRunning iteration 1221/1500... Est. remaining: 1m 42sRunning iteration 1231/1500... Est. remaining: 1m 39sRunning iteration 1241/1500... Est. remaining: 1m 35sRunning iteration 1251/1500... Est. remaining: 1m 32sRunning iteration 1261/1500... Est. remaining: 1m 28sRunning iteration 1271/1500... Est. remaining: 1m 25sRunning iteration 1281/1500... Est. remaining: 1m 21sRunning iteration 1291/1500... Est. remaining: 1m 18sRunning iteration 1301/1500... Est. remaining: 1m 14sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5688882950997678), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 11sRunning iteration 1321/1500... Est. remaining: 1m 7sRunning iteration 1331/1500... Est. remaining: 1m 4sRunning iteration 1341/1500... Est. remaining: 1m 0sRunning iteration 1351/1500... Est. remaining: 0m 56sRunning iteration 1361/1500... Est. remaining: 0m 53sRunning iteration 1371/1500... Est. remaining: 0m 49sRunning iteration 1381/1500... Est. remaining: 0m 45sRunning iteration 1391/1500... Est. remaining: 0m 42sRunning iteration 1401/1500... Est. remaining: 0m 38sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5688882950997678), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 34sRunning iteration 1421/1500... Est. remaining: 0m 30sRunning iteration 1431/1500... Est. remaining: 0m 26sRunning iteration 1441/1500... Est. remaining: 0m 23sRunning iteration 1451/1500... Est. remaining: 0m 19sRunning iteration 1461/1500... Est. remaining: 0m 15sRunning iteration 1471/1500... Est. remaining: 0m 11sRunning iteration 1481/1500... Est. remaining: 0m 7sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 9.8 minutes
Best normalized score: 1.57
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5688882950997678), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.5689)

Monte Carlo simulation completed in 9.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Mon Aug 25 16:24:06 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,453,988,022
Annual Return: 45.54%
Sharpe Ratio: 1.48671
Sortino Ratio: 1.449
Max Drawdown: -61.0%
Avg Drawdown: -12.5%
Normalized Score: 0.196
Lookback periods: [144, 178, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 59sRunning iteration 21/1500... Est. remaining: 17m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,803,579,492
Annual Return: 45.86%
Sharpe Ratio: 1.48924
Sortino Ratio: 1.451
Max Drawdown: -58.5%
Avg Drawdown: -12.4%
Normalized Score: 0.337
Lookback periods: [147, 154, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 16m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,081,146,919
Annual Return: 42.38%
Sharpe Ratio: 1.45105
Sortino Ratio: 1.372
Max Drawdown: -52.3%
Avg Drawdown: -10.7%
Normalized Score: 0.362
Lookback periods: [89, 99, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 15m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,248,796,153
Annual Return: 46.23%
Sharpe Ratio: 1.53962
Sortino Ratio: 1.502
Max Drawdown: -65.0%
Avg Drawdown: -11.3%
Normalized Score: 0.535
Lookback periods: [116, 158, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 15m 38sRunning iteration 61/1500... Est. remaining: 14m 57sRunning iteration 71/1500... Est. remaining: 14m 25sRunning iteration 81/1500... Est. remaining: 14m 2sRunning iteration 91/1500... Est. remaining: 13m 42sRunning iteration 101/1500... Est. remaining: 13m 26sbest_combination: {'lookbacks': [116, 158, 162], 'score': np.float64(0.5350363466063616), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 13sRunning iteration 121/1500... Est. remaining: 13m 0sRunning iteration 131/1500... Est. remaining: 12m 47sRunning iteration 141/1500... Est. remaining: 12m 37sRunning iteration 151/1500... Est. remaining: 12m 26sRunning iteration 161/1500... Est. remaining: 12m 17sRunning iteration 171/1500... Est. remaining: 12m 8sRunning iteration 181/1500... Est. remaining: 12m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,509,203,198
Annual Return: 47.14%
Sharpe Ratio: 1.53971
Sortino Ratio: 1.497
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: 0.961
Lookback periods: [159, 160, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 12m 0sRunning iteration 201/1500... Est. remaining: 11m 52sbest_combination: {'lookbacks': [159, 160, 178], 'score': np.float64(0.960678759337257), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 44sRunning iteration 221/1500... Est. remaining: 11m 36sRunning iteration 231/1500... Est. remaining: 11m 28sRunning iteration 241/1500... Est. remaining: 11m 21sRunning iteration 251/1500... Est. remaining: 11m 14sRunning iteration 261/1500... Est. remaining: 11m 7sRunning iteration 271/1500... Est. remaining: 11m 1sRunning iteration 281/1500... Est. remaining: 10m 54sRunning iteration 291/1500... Est. remaining: 10m 47sRunning iteration 301/1500... Est. remaining: 10m 41sbest_combination: {'lookbacks': [159, 160, 178], 'score': np.float64(0.960678759337257), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 34sRunning iteration 321/1500... Est. remaining: 10m 28sRunning iteration 331/1500... Est. remaining: 10m 22sRunning iteration 341/1500... Est. remaining: 10m 16sRunning iteration 351/1500... Est. remaining: 10m 9sRunning iteration 361/1500... Est. remaining: 10m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,464,038,489
Annual Return: 48.74%
Sharpe Ratio: 1.57294
Sortino Ratio: 1.532
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.970
Lookback periods: [178, 184, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 371/1500... Est. remaining: 10m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,215,830,150
Annual Return: 45.31%
Sharpe Ratio: 1.62720
Sortino Ratio: 1.544
Max Drawdown: -36.6%
Avg Drawdown: -8.6%
Normalized Score: 2.104
Lookback periods: [52, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 9m 59sRunning iteration 391/1500... Est. remaining: 9m 53sRunning iteration 401/1500... Est. remaining: 9m 47sbest_combination: {'lookbacks': [52, 52, 96], 'score': np.float64(2.103769468358593), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 41sRunning iteration 421/1500... Est. remaining: 9m 35sRunning iteration 431/1500... Est. remaining: 9m 29sRunning iteration 441/1500... Est. remaining: 9m 23sRunning iteration 451/1500... Est. remaining: 9m 17sRunning iteration 461/1500... Est. remaining: 9m 11sRunning iteration 471/1500... Est. remaining: 9m 5sRunning iteration 481/1500... Est. remaining: 8m 59sRunning iteration 491/1500... Est. remaining: 8m 53sRunning iteration 501/1500... Est. remaining: 8m 47sbest_combination: {'lookbacks': [52, 52, 96], 'score': np.float64(2.103769468358593), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 42sRunning iteration 521/1500... Est. remaining: 8m 36sRunning iteration 531/1500... Est. remaining: 8m 31sRunning iteration 541/1500... Est. remaining: 8m 25sRunning iteration 551/1500... Est. remaining: 8m 19sRunning iteration 561/1500... Est. remaining: 8m 14sRunning iteration 571/1500... Est. remaining: 8m 8sRunning iteration 581/1500... Est. remaining: 8m 3sRunning iteration 591/1500... Est. remaining: 7m 57sRunning iteration 601/1500... Est. remaining: 7m 51sbest_combination: {'lookbacks': [52, 52, 96], 'score': np.float64(2.103769468358593), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,673,528,425
Annual Return: 46.56%
Sharpe Ratio: 1.66674
Sortino Ratio: 1.588
Max Drawdown: -36.6%
Avg Drawdown: -8.1%
Normalized Score: 2.445
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/1500... Est. remaining: 7m 48sRunning iteration 621/1500... Est. remaining: 7m 42sRunning iteration 631/1500... Est. remaining: 7m 37sRunning iteration 641/1500... Est. remaining: 7m 31sRunning iteration 651/1500... Est. remaining: 7m 26sRunning iteration 661/1500... Est. remaining: 7m 20sRunning iteration 671/1500... Est. remaining: 7m 15sRunning iteration 681/1500... Est. remaining: 7m 9sRunning iteration 691/1500... Est. remaining: 7m 4sRunning iteration 701/1500... Est. remaining: 6m 58sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.44494806569953), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 53sRunning iteration 721/1500... Est. remaining: 6m 47sRunning iteration 731/1500... Est. remaining: 6m 42sRunning iteration 741/1500... Est. remaining: 6m 37sRunning iteration 751/1500... Est. remaining: 6m 31sRunning iteration 761/1500... Est. remaining: 6m 26sRunning iteration 771/1500... Est. remaining: 6m 20sRunning iteration 781/1500... Est. remaining: 6m 15sRunning iteration 791/1500... Est. remaining: 6m 9sRunning iteration 801/1500... Est. remaining: 6m 4sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.44494806569953), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 59sRunning iteration 821/1500... Est. remaining: 5m 53sRunning iteration 831/1500... Est. remaining: 5m 48sRunning iteration 841/1500... Est. remaining: 5m 43sRunning iteration 851/1500... Est. remaining: 5m 37sRunning iteration 861/1500... Est. remaining: 5m 32sRunning iteration 871/1500... Est. remaining: 5m 27sRunning iteration 881/1500... Est. remaining: 5m 21sRunning iteration 891/1500... Est. remaining: 5m 16sRunning iteration 901/1500... Est. remaining: 5m 11sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.44494806569953), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 5sRunning iteration 921/1500... Est. remaining: 5m 0sRunning iteration 931/1500... Est. remaining: 4m 55sRunning iteration 941/1500... Est. remaining: 4m 50sRunning iteration 951/1500... Est. remaining: 4m 44sRunning iteration 961/1500... Est. remaining: 4m 39sRunning iteration 971/1500... Est. remaining: 4m 34sRunning iteration 981/1500... Est. remaining: 4m 29sRunning iteration 991/1500... Est. remaining: 4m 23sRunning iteration 1001/1500... Est. remaining: 4m 18sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.44494806569953), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 13sRunning iteration 1021/1500... Est. remaining: 4m 8sRunning iteration 1031/1500... Est. remaining: 4m 2sRunning iteration 1041/1500... Est. remaining: 3m 57sRunning iteration 1051/1500... Est. remaining: 3m 52sRunning iteration 1061/1500... Est. remaining: 3m 47sRunning iteration 1071/1500... Est. remaining: 3m 41sRunning iteration 1081/1500... Est. remaining: 3m 36sRunning iteration 1091/1500... Est. remaining: 3m 31sRunning iteration 1101/1500... Est. remaining: 3m 26sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.44494806569953), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 21sRunning iteration 1121/1500... Est. remaining: 3m 15sRunning iteration 1131/1500... Est. remaining: 3m 10sRunning iteration 1141/1500... Est. remaining: 3m 5sRunning iteration 1151/1500... Est. remaining: 3m 0sRunning iteration 1161/1500... Est. remaining: 2m 55sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 44sRunning iteration 1191/1500... Est. remaining: 2m 39sRunning iteration 1201/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.44494806569953), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 18sRunning iteration 1241/1500... Est. remaining: 2m 13sRunning iteration 1251/1500... Est. remaining: 2m 8sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 47sRunning iteration 1301/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.44494806569953), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.44494806569953), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 2.44
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.44494806569953), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 95] (score: 2.4449)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 103 selections (24.8%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,673,528,425.50
Average Annualized Gain: 46.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Mon Aug 25 16:37:03 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $630,377,104
Annual Return: 37.56%
Sharpe Ratio: 1.27172
Sortino Ratio: 1.195
Max Drawdown: -63.5%
Avg Drawdown: -13.8%
Normalized Score: -1.367
Lookback periods: [93, 98, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,466,228,003
Annual Return: 40.95%
Sharpe Ratio: 1.37145
Sortino Ratio: 1.317
Max Drawdown: -61.8%
Avg Drawdown: -13.1%
Normalized Score: -0.823
Lookback periods: [102, 138, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,938,285,607
Annual Return: 43.80%
Sharpe Ratio: 1.43869
Sortino Ratio: 1.398
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: -0.103
Lookback periods: [168, 170, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,473,212,663
Annual Return: 40.97%
Sharpe Ratio: 1.42514
Sortino Ratio: 1.352
Max Drawdown: -52.3%
Avg Drawdown: -10.0%
Normalized Score: 0.224
Lookback periods: [84, 114, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,640,268,124
Annual Return: 41.40%
Sharpe Ratio: 1.49242
Sortino Ratio: 1.384
Max Drawdown: -34.7%
Avg Drawdown: -9.7%
Normalized Score: 0.982
Lookback periods: [51, 51, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 6sRunning iteration 31/1500... Est. remaining: 19m 24sRunning iteration 41/1500... Est. remaining: 17m 32sRunning iteration 51/1500... Est. remaining: 16m 25sRunning iteration 61/1500... Est. remaining: 15m 37sRunning iteration 71/1500... Est. remaining: 15m 3sRunning iteration 81/1500... Est. remaining: 14m 35sRunning iteration 91/1500... Est. remaining: 14m 9sRunning iteration 101/1500... Est. remaining: 13m 47sbest_combination: {'lookbacks': [51, 51, 83], 'score': np.float64(0.9815781451920609), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 32sRunning iteration 121/1500... Est. remaining: 13m 17sRunning iteration 131/1500... Est. remaining: 13m 4sRunning iteration 141/1500... Est. remaining: 12m 53sRunning iteration 151/1500... Est. remaining: 12m 42sRunning iteration 161/1500... Est. remaining: 12m 32sRunning iteration 171/1500... Est. remaining: 12m 23sRunning iteration 181/1500... Est. remaining: 12m 14sRunning iteration 191/1500... Est. remaining: 12m 5sRunning iteration 201/1500... Est. remaining: 11m 57sbest_combination: {'lookbacks': [51, 51, 83], 'score': np.float64(0.9815781451920609), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 50sRunning iteration 221/1500... Est. remaining: 11m 42sRunning iteration 231/1500... Est. remaining: 11m 35sRunning iteration 241/1500... Est. remaining: 11m 27sRunning iteration 251/1500... Est. remaining: 11m 20sRunning iteration 261/1500... Est. remaining: 11m 13sRunning iteration 271/1500... Est. remaining: 11m 6sRunning iteration 281/1500... Est. remaining: 10m 59sRunning iteration 291/1500... Est. remaining: 10m 52sRunning iteration 301/1500... Est. remaining: 10m 46sbest_combination: {'lookbacks': [51, 51, 83], 'score': np.float64(0.9815781451920609), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 40sRunning iteration 321/1500... Est. remaining: 10m 33sRunning iteration 331/1500... Est. remaining: 10m 27sRunning iteration 341/1500... Est. remaining: 10m 20sRunning iteration 351/1500... Est. remaining: 10m 14sRunning iteration 361/1500... Est. remaining: 10m 8sRunning iteration 371/1500... Est. remaining: 10m 1sRunning iteration 381/1500... Est. remaining: 9m 55sRunning iteration 391/1500... Est. remaining: 9m 49sRunning iteration 401/1500... Est. remaining: 9m 43sbest_combination: {'lookbacks': [51, 51, 83], 'score': np.float64(0.9815781451920609), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,814,606,975
Annual Return: 41.82%
Sharpe Ratio: 1.50097
Sortino Ratio: 1.401
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.080
Lookback periods: [50, 55, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 35sRunning iteration 431/1500... Est. remaining: 9m 29sRunning iteration 441/1500... Est. remaining: 9m 23sRunning iteration 451/1500... Est. remaining: 9m 17sRunning iteration 461/1500... Est. remaining: 9m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,709,137,704
Annual Return: 41.57%
Sharpe Ratio: 1.49371
Sortino Ratio: 1.397
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.194
Lookback periods: [50, 50, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 9m 8sRunning iteration 481/1500... Est. remaining: 9m 3sRunning iteration 491/1500... Est. remaining: 8m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,706,662,664
Annual Return: 43.46%
Sharpe Ratio: 1.54505
Sortino Ratio: 1.456
Max Drawdown: -35.6%
Avg Drawdown: -9.1%
Normalized Score: 1.283
Lookback periods: [50, 53, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 8m 53sbest_combination: {'lookbacks': [50, 53, 87], 'score': np.float64(1.2829938050313487), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 48sRunning iteration 521/1500... Est. remaining: 8m 42sRunning iteration 531/1500... Est. remaining: 8m 36sRunning iteration 541/1500... Est. remaining: 8m 30sRunning iteration 551/1500... Est. remaining: 8m 24sRunning iteration 561/1500... Est. remaining: 8m 18sRunning iteration 571/1500... Est. remaining: 8m 13sRunning iteration 581/1500... Est. remaining: 8m 7sRunning iteration 591/1500... Est. remaining: 8m 1sRunning iteration 601/1500... Est. remaining: 7m 56sbest_combination: {'lookbacks': [50, 53, 87], 'score': np.float64(1.2829938050313487), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 50sRunning iteration 621/1500... Est. remaining: 7m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,576,078,638
Annual Return: 45.65%
Sharpe Ratio: 1.62275
Sortino Ratio: 1.552
Max Drawdown: -37.4%
Avg Drawdown: -9.2%
Normalized Score: 1.489
Lookback periods: [52, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 7m 40sRunning iteration 641/1500... Est. remaining: 7m 35sRunning iteration 651/1500... Est. remaining: 7m 29sRunning iteration 661/1500... Est. remaining: 7m 24sRunning iteration 671/1500... Est. remaining: 7m 18sRunning iteration 681/1500... Est. remaining: 7m 13sRunning iteration 691/1500... Est. remaining: 7m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.634
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/1500... Est. remaining: 7m 3sbest_combination: {'lookbacks': [50, 50, 96], 'score': np.float64(1.6335589515084081), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 57sRunning iteration 721/1500... Est. remaining: 6m 52sRunning iteration 731/1500... Est. remaining: 6m 46sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 35sRunning iteration 761/1500... Est. remaining: 6m 30sRunning iteration 771/1500... Est. remaining: 6m 24sRunning iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 13sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [50, 50, 96], 'score': np.float64(1.6335589515084081), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 46sRunning iteration 851/1500... Est. remaining: 5m 41sRunning iteration 861/1500... Est. remaining: 5m 35sRunning iteration 871/1500... Est. remaining: 5m 30sRunning iteration 881/1500... Est. remaining: 5m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.870
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8699224228932778), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8699224228932778), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8699224228932778), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8699224228932778), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8699224228932778), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8699224228932778), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 1.87
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8699224228932778), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.8699)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Mon Aug 25 16:50:05 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,157,203,544
Annual Return: 46.16%
Sharpe Ratio: 1.52197
Sortino Ratio: 1.478
Max Drawdown: -64.0%
Avg Drawdown: -12.8%
Normalized Score: -0.162
Lookback periods: [135, 148, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,270,015,545
Annual Return: 45.36%
Sharpe Ratio: 1.48370
Sortino Ratio: 1.448
Max Drawdown: -58.5%
Avg Drawdown: -12.0%
Normalized Score: -0.039
Lookback periods: [136, 170, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 56sRunning iteration 21/1500... Est. remaining: 18m 24sRunning iteration 31/1500... Est. remaining: 16m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,794,502,960
Annual Return: 47.91%
Sharpe Ratio: 1.56675
Sortino Ratio: 1.533
Max Drawdown: -61.3%
Avg Drawdown: -11.1%
Normalized Score: 0.336
Lookback periods: [155, 159, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 15m 49sRunning iteration 51/1500... Est. remaining: 15m 0sRunning iteration 61/1500... Est. remaining: 14m 25sRunning iteration 71/1500... Est. remaining: 14m 1sRunning iteration 81/1500... Est. remaining: 13m 41sRunning iteration 91/1500... Est. remaining: 13m 23sRunning iteration 101/1500... Est. remaining: 13m 7sbest_combination: {'lookbacks': [155, 159, 162], 'score': np.float64(0.3355348136074635), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 54sRunning iteration 121/1500... Est. remaining: 12m 44sRunning iteration 131/1500... Est. remaining: 12m 33sRunning iteration 141/1500... Est. remaining: 12m 24sRunning iteration 151/1500... Est. remaining: 12m 15sRunning iteration 161/1500... Est. remaining: 12m 7sRunning iteration 171/1500... Est. remaining: 11m 58sRunning iteration 181/1500... Est. remaining: 11m 51sRunning iteration 191/1500... Est. remaining: 11m 43sRunning iteration 201/1500... Est. remaining: 11m 36sbest_combination: {'lookbacks': [155, 159, 162], 'score': np.float64(0.3355348136074635), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 29sRunning iteration 221/1500... Est. remaining: 11m 22sRunning iteration 231/1500... Est. remaining: 11m 16sRunning iteration 241/1500... Est. remaining: 11m 9sRunning iteration 251/1500... Est. remaining: 11m 3sRunning iteration 261/1500... Est. remaining: 10m 56sRunning iteration 271/1500... Est. remaining: 10m 50sRunning iteration 281/1500... Est. remaining: 10m 44sRunning iteration 291/1500... Est. remaining: 10m 37sRunning iteration 301/1500... Est. remaining: 10m 31sbest_combination: {'lookbacks': [155, 159, 162], 'score': np.float64(0.3355348136074635), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 25sRunning iteration 321/1500... Est. remaining: 10m 19sRunning iteration 331/1500... Est. remaining: 10m 13sRunning iteration 341/1500... Est. remaining: 10m 7sRunning iteration 351/1500... Est. remaining: 10m 1sRunning iteration 361/1500... Est. remaining: 9m 56sRunning iteration 371/1500... Est. remaining: 9m 50sRunning iteration 381/1500... Est. remaining: 9m 44sRunning iteration 391/1500... Est. remaining: 9m 38sRunning iteration 401/1500... Est. remaining: 9m 33sbest_combination: {'lookbacks': [155, 159, 162], 'score': np.float64(0.3355348136074635), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 27sRunning iteration 421/1500... Est. remaining: 9m 21sRunning iteration 431/1500... Est. remaining: 9m 16sRunning iteration 441/1500... Est. remaining: 9m 10sRunning iteration 451/1500... Est. remaining: 9m 5sRunning iteration 461/1500... Est. remaining: 8m 59sRunning iteration 471/1500... Est. remaining: 8m 54sRunning iteration 481/1500... Est. remaining: 8m 48sRunning iteration 491/1500... Est. remaining: 8m 43sRunning iteration 501/1500... Est. remaining: 8m 37sbest_combination: {'lookbacks': [155, 159, 162], 'score': np.float64(0.3355348136074635), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 32sRunning iteration 521/1500... Est. remaining: 8m 26sRunning iteration 531/1500... Est. remaining: 8m 21sRunning iteration 541/1500... Est. remaining: 8m 16sRunning iteration 551/1500... Est. remaining: 8m 10sRunning iteration 561/1500... Est. remaining: 8m 5sRunning iteration 571/1500... Est. remaining: 8m 0sRunning iteration 581/1500... Est. remaining: 7m 54sRunning iteration 591/1500... Est. remaining: 7m 49sRunning iteration 601/1500... Est. remaining: 7m 44sbest_combination: {'lookbacks': [155, 159, 162], 'score': np.float64(0.3355348136074635), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 38sRunning iteration 621/1500... Est. remaining: 7m 33sRunning iteration 631/1500... Est. remaining: 7m 28sRunning iteration 641/1500... Est. remaining: 7m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,256,839,863
Annual Return: 48.16%
Sharpe Ratio: 1.56401
Sortino Ratio: 1.525
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.473
Lookback periods: [154, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 7m 19sRunning iteration 661/1500... Est. remaining: 7m 14sRunning iteration 671/1500... Est. remaining: 7m 8sRunning iteration 681/1500... Est. remaining: 7m 3sRunning iteration 691/1500... Est. remaining: 6m 58sRunning iteration 701/1500... Est. remaining: 6m 52sbest_combination: {'lookbacks': [154, 157, 172], 'score': np.float64(0.47260244105704485), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 47sRunning iteration 721/1500... Est. remaining: 6m 42sRunning iteration 731/1500... Est. remaining: 6m 37sRunning iteration 741/1500... Est. remaining: 6m 31sRunning iteration 751/1500... Est. remaining: 6m 26sRunning iteration 761/1500... Est. remaining: 6m 21sRunning iteration 771/1500... Est. remaining: 6m 16sRunning iteration 781/1500... Est. remaining: 6m 10sRunning iteration 791/1500... Est. remaining: 6m 5sRunning iteration 801/1500... Est. remaining: 6m 0sbest_combination: {'lookbacks': [154, 157, 172], 'score': np.float64(0.47260244105704485), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 55sRunning iteration 821/1500... Est. remaining: 5m 49sRunning iteration 831/1500... Est. remaining: 5m 44sRunning iteration 841/1500... Est. remaining: 5m 39sRunning iteration 851/1500... Est. remaining: 5m 34sRunning iteration 861/1500... Est. remaining: 5m 29sRunning iteration 871/1500... Est. remaining: 5m 23sRunning iteration 881/1500... Est. remaining: 5m 18sRunning iteration 891/1500... Est. remaining: 5m 13sRunning iteration 901/1500... Est. remaining: 5m 8sbest_combination: {'lookbacks': [154, 157, 172], 'score': np.float64(0.47260244105704485), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 3sRunning iteration 921/1500... Est. remaining: 4m 57sRunning iteration 931/1500... Est. remaining: 4m 52sRunning iteration 941/1500... Est. remaining: 4m 47sRunning iteration 951/1500... Est. remaining: 4m 42sRunning iteration 961/1500... Est. remaining: 4m 37sRunning iteration 971/1500... Est. remaining: 4m 32sRunning iteration 981/1500... Est. remaining: 4m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,659,959,062
Annual Return: 41.45%
Sharpe Ratio: 1.47560
Sortino Ratio: 1.380
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 0.686
Lookback periods: [51, 53, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 991/1500... Est. remaining: 4m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,170,356,237
Annual Return: 42.55%
Sharpe Ratio: 1.52532
Sortino Ratio: 1.430
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 0.878
Lookback periods: [50, 53, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1001/1500... Est. remaining: 4m 17sbest_combination: {'lookbacks': [50, 53, 97], 'score': np.float64(0.877685647119834), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,005,011
Annual Return: 43.90%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.256
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 4m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.391
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1021/1500... Est. remaining: 4m 8sRunning iteration 1031/1500... Est. remaining: 4m 3sRunning iteration 1041/1500... Est. remaining: 3m 58sRunning iteration 1051/1500... Est. remaining: 3m 52sRunning iteration 1061/1500... Est. remaining: 3m 47sRunning iteration 1071/1500... Est. remaining: 3m 42sRunning iteration 1081/1500... Est. remaining: 3m 37sRunning iteration 1091/1500... Est. remaining: 3m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.554
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1101/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5541782760362692), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 21sRunning iteration 1121/1500... Est. remaining: 3m 16sRunning iteration 1131/1500... Est. remaining: 3m 11sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 55sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5541782760362692), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 8sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5541782760362692), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5541782760362692), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 1.55
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5541782760362692), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.5542)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Mon Aug 25 17:03:03 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,540,305,139
Annual Return: 44.58%
Sharpe Ratio: 1.44876
Sortino Ratio: 1.409
Max Drawdown: -60.2%
Avg Drawdown: -12.0%
Normalized Score: -0.233
Lookback periods: [166, 189, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,180,901,523
Annual Return: 46.18%
Sharpe Ratio: 1.50203
Sortino Ratio: 1.468
Max Drawdown: -62.7%
Avg Drawdown: -12.1%
Normalized Score: -0.098
Lookback periods: [139, 160, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 42sRunning iteration 21/1500... Est. remaining: 19m 8sRunning iteration 31/1500... Est. remaining: 16m 52sRunning iteration 41/1500... Est. remaining: 15m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,775,426,535
Annual Return: 43.57%
Sharpe Ratio: 1.49278
Sortino Ratio: 1.390
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: -0.007
Lookback periods: [54, 100, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 15m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,220,862,924
Annual Return: 48.14%
Sharpe Ratio: 1.58404
Sortino Ratio: 1.540
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 0.459
Lookback periods: [138, 158, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 15m 10sRunning iteration 71/1500... Est. remaining: 14m 39sRunning iteration 81/1500... Est. remaining: 14m 15sRunning iteration 91/1500... Est. remaining: 13m 54sRunning iteration 101/1500... Est. remaining: 13m 35sbest_combination: {'lookbacks': [138, 158, 178], 'score': np.float64(0.4593320193871163), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 20sRunning iteration 121/1500... Est. remaining: 13m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,567,028,616
Annual Return: 41.22%
Sharpe Ratio: 1.47838
Sortino Ratio: 1.379
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.660
Lookback periods: [50, 58, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 7sRunning iteration 141/1500... Est. remaining: 12m 54sRunning iteration 151/1500... Est. remaining: 12m 42sRunning iteration 161/1500... Est. remaining: 12m 32sRunning iteration 171/1500... Est. remaining: 12m 22sRunning iteration 181/1500... Est. remaining: 12m 12sRunning iteration 191/1500... Est. remaining: 12m 3sRunning iteration 201/1500... Est. remaining: 11m 55sbest_combination: {'lookbacks': [50, 58, 88], 'score': np.float64(0.6602195312967233), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 47sRunning iteration 221/1500... Est. remaining: 11m 39sRunning iteration 231/1500... Est. remaining: 11m 31sRunning iteration 241/1500... Est. remaining: 11m 24sRunning iteration 251/1500... Est. remaining: 11m 17sRunning iteration 261/1500... Est. remaining: 11m 10sRunning iteration 271/1500... Est. remaining: 11m 3sRunning iteration 281/1500... Est. remaining: 10m 56sRunning iteration 291/1500... Est. remaining: 10m 49sRunning iteration 301/1500... Est. remaining: 10m 43sbest_combination: {'lookbacks': [50, 58, 88], 'score': np.float64(0.6602195312967233), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 36sRunning iteration 321/1500... Est. remaining: 10m 30sRunning iteration 331/1500... Est. remaining: 10m 24sRunning iteration 341/1500... Est. remaining: 10m 18sRunning iteration 351/1500... Est. remaining: 10m 13sRunning iteration 361/1500... Est. remaining: 10m 7sRunning iteration 371/1500... Est. remaining: 10m 1sRunning iteration 381/1500... Est. remaining: 9m 55sRunning iteration 391/1500... Est. remaining: 16m 49sRunning iteration 401/1500... Est. remaining: 21m 51sbest_combination: {'lookbacks': [50, 58, 88], 'score': np.float64(0.6602195312967233), 'visits': 1}
Running iteration 411/1500... Est. remaining: 21m 21sRunning iteration 421/1500... Est. remaining: 20m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,014,954,256
Annual Return: 42.25%
Sharpe Ratio: 1.50115
Sortino Ratio: 1.411
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.783
Lookback periods: [51, 54, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 20m 27sRunning iteration 441/1500... Est. remaining: 20m 0sRunning iteration 451/1500... Est. remaining: 19m 35sRunning iteration 461/1500... Est. remaining: 19m 10sRunning iteration 471/1500... Est. remaining: 18m 46sRunning iteration 481/1500... Est. remaining: 18m 22sRunning iteration 491/1500... Est. remaining: 18m 0sRunning iteration 501/1500... Est. remaining: 17m 38sbest_combination: {'lookbacks': [51, 54, 84], 'score': np.float64(0.7827648504262438), 'visits': 1}
Running iteration 511/1500... Est. remaining: 17m 16sRunning iteration 521/1500... Est. remaining: 16m 56sRunning iteration 531/1500... Est. remaining: 16m 36sRunning iteration 541/1500... Est. remaining: 16m 16sRunning iteration 551/1500... Est. remaining: 15m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,778,317,395
Annual Return: 41.74%
Sharpe Ratio: 1.51109
Sortino Ratio: 1.412
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 0.876
Lookback periods: [50, 50, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 15m 41sRunning iteration 571/1500... Est. remaining: 15m 22sRunning iteration 581/1500... Est. remaining: 15m 5sRunning iteration 591/1500... Est. remaining: 14m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,987,623,688
Annual Return: 42.19%
Sharpe Ratio: 1.52293
Sortino Ratio: 1.427
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 0.912
Lookback periods: [50, 50, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,315,947,560
Annual Return: 44.31%
Sharpe Ratio: 1.57346
Sortino Ratio: 1.481
Max Drawdown: -35.6%
Avg Drawdown: -9.2%
Normalized Score: 1.061
Lookback periods: [50, 53, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/1500... Est. remaining: 14m 35sbest_combination: {'lookbacks': [50, 53, 83], 'score': np.float64(1.06147353464053), 'visits': 1}
Running iteration 611/1500... Est. remaining: 14m 18sRunning iteration 621/1500... Est. remaining: 14m 2sRunning iteration 631/1500... Est. remaining: 13m 46sRunning iteration 641/1500... Est. remaining: 13m 31sRunning iteration 651/1500... Est. remaining: 13m 16sRunning iteration 661/1500... Est. remaining: 13m 1sRunning iteration 671/1500... Est. remaining: 12m 47sRunning iteration 681/1500... Est. remaining: 12m 32sRunning iteration 691/1500... Est. remaining: 12m 18sRunning iteration 701/1500... Est. remaining: 12m 5sbest_combination: {'lookbacks': [50, 53, 83], 'score': np.float64(1.06147353464053), 'visits': 1}
Running iteration 711/1500... Est. remaining: 11m 51sRunning iteration 721/1500... Est. remaining: 11m 38sRunning iteration 731/1500... Est. remaining: 11m 25sRunning iteration 741/1500... Est. remaining: 11m 12sRunning iteration 751/1500... Est. remaining: 10m 59sRunning iteration 761/1500... Est. remaining: 10m 47sRunning iteration 771/1500... Est. remaining: 10m 35sRunning iteration 781/1500... Est. remaining: 10m 23sRunning iteration 791/1500... Est. remaining: 10m 11sRunning iteration 801/1500... Est. remaining: 9m 59sbest_combination: {'lookbacks': [50, 53, 83], 'score': np.float64(1.06147353464053), 'visits': 1}
Running iteration 811/1500... Est. remaining: 9m 47sRunning iteration 821/1500... Est. remaining: 9m 36sRunning iteration 831/1500... Est. remaining: 9m 25sRunning iteration 841/1500... Est. remaining: 9m 14sRunning iteration 851/1500... Est. remaining: 9m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,611,462,174
Annual Return: 44.66%
Sharpe Ratio: 1.57548
Sortino Ratio: 1.485
Max Drawdown: -35.6%
Avg Drawdown: -9.2%
Normalized Score: 1.089
Lookback periods: [52, 54, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 8m 53sRunning iteration 871/1500... Est. remaining: 8m 42sRunning iteration 881/1500... Est. remaining: 8m 32sRunning iteration 891/1500... Est. remaining: 8m 21sRunning iteration 901/1500... Est. remaining: 8m 11sbest_combination: {'lookbacks': [52, 54, 83], 'score': np.float64(1.0890092792949888), 'visits': 1}
Running iteration 911/1500... Est. remaining: 8m 0sRunning iteration 921/1500... Est. remaining: 7m 50sRunning iteration 931/1500... Est. remaining: 7m 40sRunning iteration 941/1500... Est. remaining: 7m 30sRunning iteration 951/1500... Est. remaining: 7m 21sRunning iteration 961/1500... Est. remaining: 7m 11sRunning iteration 971/1500... Est. remaining: 7m 1sRunning iteration 981/1500... Est. remaining: 6m 52sRunning iteration 991/1500... Est. remaining: 6m 42sRunning iteration 1001/1500... Est. remaining: 6m 33sbest_combination: {'lookbacks': [52, 54, 83], 'score': np.float64(1.0890092792949888), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 6m 24sRunning iteration 1021/1500... Est. remaining: 6m 15sRunning iteration 1031/1500... Est. remaining: 6m 6sRunning iteration 1041/1500... Est. remaining: 5m 57sRunning iteration 1051/1500... Est. remaining: 5m 48sRunning iteration 1061/1500... Est. remaining: 5m 39sRunning iteration 1071/1500... Est. remaining: 5m 30sRunning iteration 1081/1500... Est. remaining: 5m 22sRunning iteration 1091/1500... Est. remaining: 5m 13sRunning iteration 1101/1500... Est. remaining: 5m 4sbest_combination: {'lookbacks': [52, 54, 83], 'score': np.float64(1.0890092792949888), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 56sRunning iteration 1121/1500... Est. remaining: 4m 47sRunning iteration 1131/1500... Est. remaining: 4m 39sRunning iteration 1141/1500... Est. remaining: 4m 31sRunning iteration 1151/1500... Est. remaining: 4m 22sRunning iteration 1161/1500... Est. remaining: 4m 14sRunning iteration 1171/1500... Est. remaining: 4m 6sRunning iteration 1181/1500... Est. remaining: 3m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,229,417,452
Annual Return: 44.20%
Sharpe Ratio: 1.57610
Sortino Ratio: 1.489
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.100
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1191/1500... Est. remaining: 3m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,005,011
Annual Return: 43.90%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.243
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 3m 42sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.2428001536662698), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.244
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1211/1500... Est. remaining: 3m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.534
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1221/1500... Est. remaining: 3m 27sRunning iteration 1231/1500... Est. remaining: 3m 19sRunning iteration 1241/1500... Est. remaining: 3m 11sRunning iteration 1251/1500... Est. remaining: 3m 3sRunning iteration 1261/1500... Est. remaining: 2m 55sRunning iteration 1271/1500... Est. remaining: 2m 48sRunning iteration 1281/1500... Est. remaining: 2m 40sRunning iteration 1291/1500... Est. remaining: 2m 32sRunning iteration 1301/1500... Est. remaining: 2m 25sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5344968575791067), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 17sRunning iteration 1321/1500... Est. remaining: 2m 10sRunning iteration 1331/1500... Est. remaining: 2m 2sRunning iteration 1341/1500... Est. remaining: 1m 55sRunning iteration 1351/1500... Est. remaining: 1m 47sRunning iteration 1361/1500... Est. remaining: 1m 40sRunning iteration 1371/1500... Est. remaining: 1m 32sRunning iteration 1381/1500... Est. remaining: 1m 25sRunning iteration 1391/1500... Est. remaining: 1m 18sRunning iteration 1401/1500... Est. remaining: 1m 11sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5344968575791067), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 3sRunning iteration 1421/1500... Est. remaining: 0m 56sRunning iteration 1431/1500... Est. remaining: 0m 49sRunning iteration 1441/1500... Est. remaining: 0m 42sRunning iteration 1451/1500... Est. remaining: 0m 35sRunning iteration 1461/1500... Est. remaining: 0m 28sRunning iteration 1471/1500... Est. remaining: 0m 21sRunning iteration 1481/1500... Est. remaining: 0m 13sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 17.4 minutes
Best normalized score: 1.53
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.5344968575791067), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.5345)

Monte Carlo simulation completed in 17.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Mon Aug 25 17:20:35 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,788,770,028
Annual Return: 43.59%
Sharpe Ratio: 1.43190
Sortino Ratio: 1.391
Max Drawdown: -61.3%
Avg Drawdown: -13.7%
Normalized Score: -0.246
Lookback periods: [134, 145, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,556,171,792
Annual Return: 43.23%
Sharpe Ratio: 1.45838
Sortino Ratio: 1.398
Max Drawdown: -56.9%
Avg Drawdown: -12.8%
Normalized Score: 0.039
Lookback periods: [96, 133, 142] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,402,003,702
Annual Return: 45.49%
Sharpe Ratio: 1.48415
Sortino Ratio: 1.453
Max Drawdown: -61.4%
Avg Drawdown: -11.8%
Normalized Score: 0.261
Lookback periods: [154, 176, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,936,376,537
Annual Return: 46.75%
Sharpe Ratio: 1.52314
Sortino Ratio: 1.483
Max Drawdown: -61.6%
Avg Drawdown: -12.0%
Normalized Score: 0.406
Lookback periods: [158, 188, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 12sRunning iteration 31/1500... Est. remaining: 18m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,183,752,785
Annual Return: 45.28%
Sharpe Ratio: 1.48149
Sortino Ratio: 1.437
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.408
Lookback periods: [157, 162, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,275,630,378
Annual Return: 46.99%
Sharpe Ratio: 1.56355
Sortino Ratio: 1.525
Max Drawdown: -57.2%
Avg Drawdown: -11.7%
Normalized Score: 0.726
Lookback periods: [140, 152, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 17m 4sRunning iteration 61/1500... Est. remaining: 16m 11sRunning iteration 71/1500... Est. remaining: 15m 28sRunning iteration 81/1500... Est. remaining: 14m 55sRunning iteration 91/1500... Est. remaining: 14m 30sRunning iteration 101/1500... Est. remaining: 14m 8sbest_combination: {'lookbacks': [140, 152, 158], 'score': np.float64(0.7262520254563728), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 50sRunning iteration 121/1500... Est. remaining: 13m 34sRunning iteration 131/1500... Est. remaining: 13m 19sRunning iteration 141/1500... Est. remaining: 13m 6sRunning iteration 151/1500... Est. remaining: 12m 53sRunning iteration 161/1500... Est. remaining: 12m 42sRunning iteration 171/1500... Est. remaining: 12m 32sRunning iteration 181/1500... Est. remaining: 12m 22sRunning iteration 191/1500... Est. remaining: 12m 12sRunning iteration 201/1500... Est. remaining: 12m 3sbest_combination: {'lookbacks': [140, 152, 158], 'score': np.float64(0.7262520254563728), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 55sRunning iteration 221/1500... Est. remaining: 11m 46sRunning iteration 231/1500... Est. remaining: 11m 38sRunning iteration 241/1500... Est. remaining: 11m 31sRunning iteration 251/1500... Est. remaining: 11m 23sRunning iteration 261/1500... Est. remaining: 11m 16sRunning iteration 271/1500... Est. remaining: 11m 9sRunning iteration 281/1500... Est. remaining: 11m 2sRunning iteration 291/1500... Est. remaining: 10m 55sRunning iteration 301/1500... Est. remaining: 10m 48sbest_combination: {'lookbacks': [140, 152, 158], 'score': np.float64(0.7262520254563728), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 41sRunning iteration 321/1500... Est. remaining: 10m 35sRunning iteration 331/1500... Est. remaining: 10m 28sRunning iteration 341/1500... Est. remaining: 10m 22sRunning iteration 351/1500... Est. remaining: 10m 15sRunning iteration 361/1500... Est. remaining: 10m 9sRunning iteration 371/1500... Est. remaining: 10m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,135,995,343
Annual Return: 39.91%
Sharpe Ratio: 1.45532
Sortino Ratio: 1.350
Max Drawdown: -34.7%
Avg Drawdown: -9.8%
Normalized Score: 0.905
Lookback periods: [50, 55, 93] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 10m 0sRunning iteration 391/1500... Est. remaining: 9m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,814,606,975
Annual Return: 41.82%
Sharpe Ratio: 1.50097
Sortino Ratio: 1.401
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.187
Lookback periods: [50, 55, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 9m 51sbest_combination: {'lookbacks': [50, 55, 84], 'score': np.float64(1.1868032006245035), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 45sRunning iteration 421/1500... Est. remaining: 9m 39sRunning iteration 431/1500... Est. remaining: 9m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,250,851,932
Annual Return: 42.70%
Sharpe Ratio: 1.52447
Sortino Ratio: 1.441
Max Drawdown: -38.7%
Avg Drawdown: -9.4%
Normalized Score: 1.221
Lookback periods: [51, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,034,639,855
Annual Return: 43.94%
Sharpe Ratio: 1.57742
Sortino Ratio: 1.482
Max Drawdown: -37.2%
Avg Drawdown: -9.2%
Normalized Score: 1.495
Lookback periods: [51, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 33sRunning iteration 451/1500... Est. remaining: 9m 27sRunning iteration 461/1500... Est. remaining: 9m 21sRunning iteration 471/1500... Est. remaining: 9m 14sRunning iteration 481/1500... Est. remaining: 9m 8sRunning iteration 491/1500... Est. remaining: 9m 2sRunning iteration 501/1500... Est. remaining: 8m 56sbest_combination: {'lookbacks': [51, 52, 96], 'score': np.float64(1.4949246186691998), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 50sRunning iteration 521/1500... Est. remaining: 8m 44sRunning iteration 531/1500... Est. remaining: 8m 38sRunning iteration 541/1500... Est. remaining: 8m 33sRunning iteration 551/1500... Est. remaining: 8m 27sRunning iteration 561/1500... Est. remaining: 8m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,796,731,139
Annual Return: 43.60%
Sharpe Ratio: 1.56916
Sortino Ratio: 1.470
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.685
Lookback periods: [50, 50, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 8m 17sRunning iteration 581/1500... Est. remaining: 8m 11sRunning iteration 591/1500... Est. remaining: 8m 5sRunning iteration 601/1500... Est. remaining: 8m 0sbest_combination: {'lookbacks': [50, 50, 97], 'score': np.float64(1.6846136795692146), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,734,383,559
Annual Return: 44.80%
Sharpe Ratio: 1.61116
Sortino Ratio: 1.516
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.794
Lookback periods: [50, 54, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 7m 50sRunning iteration 631/1500... Est. remaining: 7m 44sRunning iteration 641/1500... Est. remaining: 7m 39sRunning iteration 651/1500... Est. remaining: 7m 33sRunning iteration 661/1500... Est. remaining: 7m 27sRunning iteration 671/1500... Est. remaining: 7m 22sRunning iteration 681/1500... Est. remaining: 7m 16sRunning iteration 691/1500... Est. remaining: 7m 10sRunning iteration 701/1500... Est. remaining: 7m 5sbest_combination: {'lookbacks': [50, 54, 98], 'score': np.float64(1.793661384159123), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 59sRunning iteration 721/1500... Est. remaining: 6m 54sRunning iteration 731/1500... Est. remaining: 6m 48sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 37sRunning iteration 761/1500... Est. remaining: 6m 31sRunning iteration 771/1500... Est. remaining: 6m 26sRunning iteration 781/1500... Est. remaining: 6m 20sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [50, 54, 98], 'score': np.float64(1.793661384159123), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 4sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 53sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.910
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.910080446672822), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.923
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 971/1500... Est. remaining: 4m 39sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.9229079161483074), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.9229079161483074), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.097
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,673,528,425
Annual Return: 46.56%
Sharpe Ratio: 1.66674
Sortino Ratio: 1.588
Max Drawdown: -36.6%
Avg Drawdown: -8.1%
Normalized Score: 2.097
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.0974453932875514), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.0974453932875514), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.0974453932875514), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 2.10
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.0974453932875514), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 95] (score: 2.0974)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 103 selections (24.8%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,673,528,425.50
Average Annualized Gain: 46.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Mon Aug 25 17:33:43 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,181,261,128
Annual Return: 42.57%
Sharpe Ratio: 1.41045
Sortino Ratio: 1.368
Max Drawdown: -71.3%
Avg Drawdown: -13.0%
Normalized Score: -0.575
Lookback periods: [110, 171, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $936,092,513
Annual Return: 39.13%
Sharpe Ratio: 1.34869
Sortino Ratio: 1.261
Max Drawdown: -52.3%
Avg Drawdown: -10.8%
Normalized Score: -0.162
Lookback periods: [80, 108, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,083,867,147
Annual Return: 45.18%
Sharpe Ratio: 1.47598
Sortino Ratio: 1.438
Max Drawdown: -59.0%
Avg Drawdown: -12.2%
Normalized Score: 0.384
Lookback periods: [168, 180, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 1sRunning iteration 21/1500... Est. remaining: 20m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $787,070,877
Annual Return: 38.44%
Sharpe Ratio: 1.37516
Sortino Ratio: 1.277
Max Drawdown: -34.7%
Avg Drawdown: -9.8%
Normalized Score: 0.564
Lookback periods: [51, 59, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 48sRunning iteration 41/1500... Est. remaining: 16m 57sRunning iteration 51/1500... Est. remaining: 15m 49sRunning iteration 61/1500... Est. remaining: 15m 3sRunning iteration 71/1500... Est. remaining: 14m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,863,106,017
Annual Return: 47.37%
Sharpe Ratio: 1.53080
Sortino Ratio: 1.490
Max Drawdown: -62.3%
Avg Drawdown: -11.5%
Normalized Score: 0.727
Lookback periods: [183, 193, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 14m 24sRunning iteration 91/1500... Est. remaining: 14m 3sRunning iteration 101/1500... Est. remaining: 13m 44sbest_combination: {'lookbacks': [183, 193, 198], 'score': np.float64(0.7268415129677965), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 27sRunning iteration 121/1500... Est. remaining: 13m 13sRunning iteration 131/1500... Est. remaining: 13m 0sRunning iteration 141/1500... Est. remaining: 12m 48sRunning iteration 151/1500... Est. remaining: 12m 38sRunning iteration 161/1500... Est. remaining: 12m 28sRunning iteration 171/1500... Est. remaining: 12m 18sRunning iteration 181/1500... Est. remaining: 12m 9sRunning iteration 191/1500... Est. remaining: 12m 1sRunning iteration 201/1500... Est. remaining: 11m 53sbest_combination: {'lookbacks': [183, 193, 198], 'score': np.float64(0.7268415129677965), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,333,325,430
Annual Return: 47.03%
Sharpe Ratio: 1.54310
Sortino Ratio: 1.500
Max Drawdown: -58.1%
Avg Drawdown: -12.3%
Normalized Score: 0.740
Lookback periods: [139, 153, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 11m 44sRunning iteration 231/1500... Est. remaining: 11m 37sRunning iteration 241/1500... Est. remaining: 11m 29sRunning iteration 251/1500... Est. remaining: 11m 22sRunning iteration 261/1500... Est. remaining: 11m 16sRunning iteration 271/1500... Est. remaining: 11m 9sRunning iteration 281/1500... Est. remaining: 11m 2sRunning iteration 291/1500... Est. remaining: 10m 55sRunning iteration 301/1500... Est. remaining: 10m 49sbest_combination: {'lookbacks': [139, 153, 194], 'score': np.float64(0.739615216701149), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 42sRunning iteration 321/1500... Est. remaining: 10m 35sRunning iteration 331/1500... Est. remaining: 10m 28sRunning iteration 341/1500... Est. remaining: 10m 22sRunning iteration 351/1500... Est. remaining: 10m 15sRunning iteration 361/1500... Est. remaining: 10m 9sRunning iteration 371/1500... Est. remaining: 10m 3sRunning iteration 381/1500... Est. remaining: 9m 57sRunning iteration 391/1500... Est. remaining: 9m 51sRunning iteration 401/1500... Est. remaining: 9m 44sbest_combination: {'lookbacks': [139, 153, 194], 'score': np.float64(0.739615216701149), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 38sRunning iteration 421/1500... Est. remaining: 9m 32sRunning iteration 431/1500... Est. remaining: 9m 26sRunning iteration 441/1500... Est. remaining: 9m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,872,582,035
Annual Return: 47.37%
Sharpe Ratio: 1.55930
Sortino Ratio: 1.518
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 1.030
Lookback periods: [132, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 18sRunning iteration 461/1500... Est. remaining: 9m 12sRunning iteration 471/1500... Est. remaining: 9m 6sRunning iteration 481/1500... Est. remaining: 9m 0sRunning iteration 491/1500... Est. remaining: 8m 55sRunning iteration 501/1500... Est. remaining: 8m 49sbest_combination: {'lookbacks': [132, 157, 172], 'score': np.float64(1.0300548437517332), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 43sRunning iteration 521/1500... Est. remaining: 8m 38sRunning iteration 531/1500... Est. remaining: 8m 32sRunning iteration 541/1500... Est. remaining: 8m 26sRunning iteration 551/1500... Est. remaining: 8m 21sRunning iteration 561/1500... Est. remaining: 8m 15sRunning iteration 571/1500... Est. remaining: 8m 10sRunning iteration 581/1500... Est. remaining: 8m 4sRunning iteration 591/1500... Est. remaining: 7m 58sRunning iteration 601/1500... Est. remaining: 7m 53sbest_combination: {'lookbacks': [132, 157, 172], 'score': np.float64(1.0300548437517332), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 47sRunning iteration 621/1500... Est. remaining: 7m 42sRunning iteration 631/1500... Est. remaining: 7m 36sRunning iteration 641/1500... Est. remaining: 7m 31sRunning iteration 651/1500... Est. remaining: 7m 26sRunning iteration 661/1500... Est. remaining: 7m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,325,852,497
Annual Return: 49.11%
Sharpe Ratio: 1.60815
Sortino Ratio: 1.577
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 1.332
Lookback periods: [128, 156, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 7m 16sRunning iteration 681/1500... Est. remaining: 7m 11sRunning iteration 691/1500... Est. remaining: 7m 5sRunning iteration 701/1500... Est. remaining: 7m 0sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.3322442189278327), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 54sRunning iteration 721/1500... Est. remaining: 6m 49sRunning iteration 731/1500... Est. remaining: 6m 43sRunning iteration 741/1500... Est. remaining: 6m 38sRunning iteration 751/1500... Est. remaining: 6m 32sRunning iteration 761/1500... Est. remaining: 6m 27sRunning iteration 771/1500... Est. remaining: 6m 22sRunning iteration 781/1500... Est. remaining: 6m 16sRunning iteration 791/1500... Est. remaining: 6m 11sRunning iteration 801/1500... Est. remaining: 6m 5sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.3322442189278327), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 0sRunning iteration 821/1500... Est. remaining: 5m 55sRunning iteration 831/1500... Est. remaining: 5m 49sRunning iteration 841/1500... Est. remaining: 5m 44sRunning iteration 851/1500... Est. remaining: 5m 39sRunning iteration 861/1500... Est. remaining: 5m 33sRunning iteration 871/1500... Est. remaining: 5m 28sRunning iteration 881/1500... Est. remaining: 5m 23sRunning iteration 891/1500... Est. remaining: 5m 17sRunning iteration 901/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [128, 156, 171], 'score': np.float64(1.3322442189278327), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 7sRunning iteration 921/1500... Est. remaining: 5m 1sRunning iteration 931/1500... Est. remaining: 4m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,264,886,268
Annual Return: 49.86%
Sharpe Ratio: 1.63461
Sortino Ratio: 1.600
Max Drawdown: -58.5%
Avg Drawdown: -10.9%
Normalized Score: 1.460
Lookback periods: [139, 155, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 4m 51sRunning iteration 951/1500... Est. remaining: 4m 46sRunning iteration 961/1500... Est. remaining: 4m 41sRunning iteration 971/1500... Est. remaining: 4m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,881,338,382
Annual Return: 43.72%
Sharpe Ratio: 1.55698
Sortino Ratio: 1.467
Max Drawdown: -38.7%
Avg Drawdown: -9.2%
Normalized Score: 1.518
Lookback periods: [51, 54, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 981/1500... Est. remaining: 4m 31sRunning iteration 991/1500... Est. remaining: 4m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,193,700,934
Annual Return: 42.60%
Sharpe Ratio: 1.57031
Sortino Ratio: 1.473
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.707
Lookback periods: [50, 58, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [50, 58, 96], 'score': np.float64(1.7072076136967478), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 4m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,929,534,714
Annual Return: 43.79%
Sharpe Ratio: 1.57927
Sortino Ratio: 1.479
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.821
Lookback periods: [50, 52, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1051/1500... Est. remaining: 3m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,005,011
Annual Return: 43.90%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.901
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 2.034
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(2.034276243920034), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.080
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(2.080310173504432), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.296
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.2964704289620017), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.2964704289620017), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 2.30
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.2964704289620017), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.2965)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 17:46:51 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
State file parameters don't match current settings. Saved: min=50, max=200, n=3. Current: min=25, max=300, n=3. Starting fresh.
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $935,776,989
Annual Return: 39.13%
Sharpe Ratio: 1.36868
Sortino Ratio: 1.290
Max Drawdown: -58.8%
Avg Drawdown: -12.4%
Normalized Score: -0.763
Lookback periods: [26, 188, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,038,083,556
Annual Return: 42.29%
Sharpe Ratio: 1.40636
Sortino Ratio: 1.360
Max Drawdown: -59.4%
Avg Drawdown: -12.2%
Normalized Score: -0.485
Lookback periods: [247, 256, 293] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $364,571,736
Annual Return: 35.40%
Sharpe Ratio: 1.31013
Sortino Ratio: 1.207
Max Drawdown: -44.8%
Avg Drawdown: -10.2%
Normalized Score: -0.211
Lookback periods: [29, 79, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 20m 30sRunning iteration 31/1500... Est. remaining: 17m 47sRunning iteration 41/1500... Est. remaining: 16m 21sRunning iteration 51/1500... Est. remaining: 15m 20sRunning iteration 61/1500... Est. remaining: 14m 41sRunning iteration 71/1500... Est. remaining: 14m 15sRunning iteration 81/1500... Est. remaining: 13m 51sRunning iteration 91/1500... Est. remaining: 13m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $202,177,388
Annual Return: 33.12%
Sharpe Ratio: 1.23607
Sortino Ratio: 1.111
Max Drawdown: -34.7%
Avg Drawdown: -10.6%
Normalized Score: -0.201
Lookback periods: [27, 51, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 13m 34sbest_combination: {'lookbacks': [27, 51, 82], 'score': np.float64(-0.20100949860726985), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 21sRunning iteration 121/1500... Est. remaining: 13m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,701,540,409
Annual Return: 43.46%
Sharpe Ratio: 1.56516
Sortino Ratio: 1.461
Max Drawdown: -51.1%
Avg Drawdown: -10.2%
Normalized Score: 0.533
Lookback periods: [39, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 10sRunning iteration 141/1500... Est. remaining: 13m 0sRunning iteration 151/1500... Est. remaining: 12m 50sRunning iteration 161/1500... Est. remaining: 12m 41sRunning iteration 171/1500... Est. remaining: 12m 32sRunning iteration 181/1500... Est. remaining: 12m 23sRunning iteration 191/1500... Est. remaining: 12m 15sRunning iteration 201/1500... Est. remaining: 12m 6sbest_combination: {'lookbacks': [39, 52, 96], 'score': np.float64(0.5333372394889636), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 59sRunning iteration 221/1500... Est. remaining: 11m 51sRunning iteration 231/1500... Est. remaining: 11m 43sRunning iteration 241/1500... Est. remaining: 11m 36sRunning iteration 251/1500... Est. remaining: 11m 28sRunning iteration 261/1500... Est. remaining: 11m 21sRunning iteration 271/1500... Est. remaining: 11m 14sRunning iteration 281/1500... Est. remaining: 11m 7sRunning iteration 291/1500... Est. remaining: 11m 0sRunning iteration 301/1500... Est. remaining: 10m 53sbest_combination: {'lookbacks': [39, 52, 96], 'score': np.float64(0.5333372394889636), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 47sRunning iteration 321/1500... Est. remaining: 10m 40sRunning iteration 331/1500... Est. remaining: 10m 34sRunning iteration 341/1500... Est. remaining: 10m 27sRunning iteration 351/1500... Est. remaining: 10m 21sRunning iteration 361/1500... Est. remaining: 10m 15sRunning iteration 371/1500... Est. remaining: 10m 9sRunning iteration 381/1500... Est. remaining: 10m 3sRunning iteration 391/1500... Est. remaining: 9m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,732,900,921
Annual Return: 41.63%
Sharpe Ratio: 1.52778
Sortino Ratio: 1.418
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.160
Lookback periods: [41, 47, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 9m 54sbest_combination: {'lookbacks': [41, 47, 88], 'score': np.float64(1.1600270076218515), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,556,916,453
Annual Return: 43.23%
Sharpe Ratio: 1.59162
Sortino Ratio: 1.486
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.459
Lookback periods: [36, 45, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 9m 51sRunning iteration 421/1500... Est. remaining: 9m 45sRunning iteration 431/1500... Est. remaining: 9m 39sRunning iteration 441/1500... Est. remaining: 9m 33sRunning iteration 451/1500... Est. remaining: 9m 26sRunning iteration 461/1500... Est. remaining: 9m 20sRunning iteration 471/1500... Est. remaining: 9m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,414,099,518
Annual Return: 44.43%
Sharpe Ratio: 1.62682
Sortino Ratio: 1.528
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.600
Lookback periods: [36, 46, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 9m 11sRunning iteration 491/1500... Est. remaining: 9m 5sRunning iteration 501/1500... Est. remaining: 8m 59sbest_combination: {'lookbacks': [36, 46, 95], 'score': np.float64(1.59998498741777), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 53sRunning iteration 521/1500... Est. remaining: 8m 47sRunning iteration 531/1500... Est. remaining: 8m 41sRunning iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 29sRunning iteration 561/1500... Est. remaining: 8m 23sRunning iteration 571/1500... Est. remaining: 8m 18sRunning iteration 581/1500... Est. remaining: 8m 12sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 0sbest_combination: {'lookbacks': [36, 46, 95], 'score': np.float64(1.59998498741777), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 55sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 43sRunning iteration 641/1500... Est. remaining: 7m 38sRunning iteration 651/1500... Est. remaining: 7m 32sRunning iteration 661/1500... Est. remaining: 7m 26sRunning iteration 671/1500... Est. remaining: 7m 21sRunning iteration 681/1500... Est. remaining: 7m 15sRunning iteration 691/1500... Est. remaining: 7m 9sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [36, 46, 95], 'score': np.float64(1.59998498741777), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 58sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 47sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 36sRunning iteration 761/1500... Est. remaining: 6m 31sRunning iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 20sRunning iteration 791/1500... Est. remaining: 6m 14sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [36, 46, 95], 'score': np.float64(1.59998498741777), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 53sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [36, 46, 95], 'score': np.float64(1.59998498741777), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [36, 46, 95], 'score': np.float64(1.59998498741777), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [36, 46, 95], 'score': np.float64(1.59998498741777), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [36, 46, 95], 'score': np.float64(1.59998498741777), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [36, 46, 95], 'score': np.float64(1.59998498741777), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [36, 46, 95], 'score': np.float64(1.59998498741777), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.60
best_combination: {'lookbacks': [36, 46, 95], 'score': np.float64(1.59998498741777), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [36, 46, 95] (score: 1.6000)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [36, 46, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 107 selections (25.7%)
2. naz100_hma: 101 selections (24.3%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 72 selections (17.3%)
5. cash: 60 selections (14.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,414,099,517.52
Average Annualized Gain: 44.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 17:59:57 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,094,920,258
Annual Return: 39.77%
Sharpe Ratio: 1.31166
Sortino Ratio: 1.266
Max Drawdown: -65.9%
Avg Drawdown: -13.6%
Normalized Score: -0.949
Lookback periods: [140, 201, 225] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $381,092,544
Annual Return: 35.57%
Sharpe Ratio: 1.27181
Sortino Ratio: 1.164
Max Drawdown: -50.4%
Avg Drawdown: -11.8%
Normalized Score: -0.563
Lookback periods: [41, 50, 247] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,517,180,412
Annual Return: 41.09%
Sharpe Ratio: 1.38324
Sortino Ratio: 1.332
Max Drawdown: -59.0%
Avg Drawdown: -12.4%
Normalized Score: -0.343
Lookback periods: [156, 250, 255] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 17sRunning iteration 21/1500... Est. remaining: 20m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,399,304,603
Annual Return: 44.41%
Sharpe Ratio: 1.44581
Sortino Ratio: 1.401
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.046
Lookback periods: [156, 160, 214] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 0sRunning iteration 41/1500... Est. remaining: 17m 13sRunning iteration 51/1500... Est. remaining: 16m 9sRunning iteration 61/1500... Est. remaining: 15m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,264,337,476
Annual Return: 46.24%
Sharpe Ratio: 1.52912
Sortino Ratio: 1.478
Max Drawdown: -59.7%
Avg Drawdown: -12.2%
Normalized Score: 0.217
Lookback periods: [139, 148, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 15sRunning iteration 81/1500... Est. remaining: 14m 45sRunning iteration 91/1500... Est. remaining: 14m 18sRunning iteration 101/1500... Est. remaining: 14m 3sbest_combination: {'lookbacks': [139, 148, 150], 'score': np.float64(0.21719033686887546), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 45sRunning iteration 121/1500... Est. remaining: 13m 29sRunning iteration 131/1500... Est. remaining: 13m 15sRunning iteration 141/1500... Est. remaining: 13m 2sRunning iteration 151/1500... Est. remaining: 12m 50sRunning iteration 161/1500... Est. remaining: 12m 40sRunning iteration 171/1500... Est. remaining: 12m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,683,738,530
Annual Return: 41.51%
Sharpe Ratio: 1.44426
Sortino Ratio: 1.359
Max Drawdown: -52.1%
Avg Drawdown: -10.1%
Normalized Score: 0.291
Lookback periods: [48, 96, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/1500... Est. remaining: 12m 28sRunning iteration 191/1500... Est. remaining: 12m 19sRunning iteration 201/1500... Est. remaining: 12m 10sbest_combination: {'lookbacks': [48, 96, 100], 'score': np.float64(0.2908951912419596), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 0sRunning iteration 221/1500... Est. remaining: 11m 51sRunning iteration 231/1500... Est. remaining: 11m 43sRunning iteration 241/1500... Est. remaining: 11m 35sRunning iteration 251/1500... Est. remaining: 11m 27sRunning iteration 261/1500... Est. remaining: 11m 19sRunning iteration 271/1500... Est. remaining: 11m 12sRunning iteration 281/1500... Est. remaining: 11m 5sRunning iteration 291/1500... Est. remaining: 10m 57sRunning iteration 301/1500... Est. remaining: 10m 51sbest_combination: {'lookbacks': [48, 96, 100], 'score': np.float64(0.2908951912419596), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 44sRunning iteration 321/1500... Est. remaining: 10m 37sRunning iteration 331/1500... Est. remaining: 10m 30sRunning iteration 341/1500... Est. remaining: 10m 24sRunning iteration 351/1500... Est. remaining: 10m 18sRunning iteration 361/1500... Est. remaining: 10m 11sRunning iteration 371/1500... Est. remaining: 10m 5sRunning iteration 381/1500... Est. remaining: 9m 59sRunning iteration 391/1500... Est. remaining: 9m 53sRunning iteration 401/1500... Est. remaining: 9m 47sbest_combination: {'lookbacks': [48, 96, 100], 'score': np.float64(0.2908951912419596), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,320,472,596
Annual Return: 44.31%
Sharpe Ratio: 1.56714
Sortino Ratio: 1.467
Max Drawdown: -52.3%
Avg Drawdown: -9.5%
Normalized Score: 0.753
Lookback periods: [42, 107, 119] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 38sRunning iteration 431/1500... Est. remaining: 9m 32sRunning iteration 441/1500... Est. remaining: 9m 26sRunning iteration 451/1500... Est. remaining: 9m 20sRunning iteration 461/1500... Est. remaining: 9m 14sRunning iteration 471/1500... Est. remaining: 9m 8sRunning iteration 481/1500... Est. remaining: 9m 2sRunning iteration 491/1500... Est. remaining: 8m 56sRunning iteration 501/1500... Est. remaining: 8m 50sbest_combination: {'lookbacks': [42, 107, 119], 'score': np.float64(0.7528466847725405), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 45sRunning iteration 521/1500... Est. remaining: 8m 39sRunning iteration 531/1500... Est. remaining: 8m 33sRunning iteration 541/1500... Est. remaining: 8m 28sRunning iteration 551/1500... Est. remaining: 8m 22sRunning iteration 561/1500... Est. remaining: 8m 17sRunning iteration 571/1500... Est. remaining: 8m 11sRunning iteration 581/1500... Est. remaining: 8m 5sRunning iteration 591/1500... Est. remaining: 8m 0sRunning iteration 601/1500... Est. remaining: 7m 54sbest_combination: {'lookbacks': [42, 107, 119], 'score': np.float64(0.7528466847725405), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 48sRunning iteration 621/1500... Est. remaining: 7m 43sRunning iteration 631/1500... Est. remaining: 7m 37sRunning iteration 641/1500... Est. remaining: 7m 32sRunning iteration 651/1500... Est. remaining: 7m 26sRunning iteration 661/1500... Est. remaining: 7m 20sRunning iteration 671/1500... Est. remaining: 7m 15sRunning iteration 681/1500... Est. remaining: 7m 9sRunning iteration 691/1500... Est. remaining: 7m 4sRunning iteration 701/1500... Est. remaining: 6m 58sbest_combination: {'lookbacks': [42, 107, 119], 'score': np.float64(0.7528466847725405), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 53sRunning iteration 721/1500... Est. remaining: 6m 48sRunning iteration 731/1500... Est. remaining: 6m 42sRunning iteration 741/1500... Est. remaining: 6m 37sRunning iteration 751/1500... Est. remaining: 6m 31sRunning iteration 761/1500... Est. remaining: 6m 26sRunning iteration 771/1500... Est. remaining: 6m 20sRunning iteration 781/1500... Est. remaining: 6m 15sRunning iteration 791/1500... Est. remaining: 6m 10sRunning iteration 801/1500... Est. remaining: 6m 4sbest_combination: {'lookbacks': [42, 107, 119], 'score': np.float64(0.7528466847725405), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 59sRunning iteration 821/1500... Est. remaining: 5m 54sRunning iteration 831/1500... Est. remaining: 5m 48sRunning iteration 841/1500... Est. remaining: 5m 43sRunning iteration 851/1500... Est. remaining: 5m 38sRunning iteration 861/1500... Est. remaining: 5m 32sRunning iteration 871/1500... Est. remaining: 5m 27sRunning iteration 881/1500... Est. remaining: 5m 22sRunning iteration 891/1500... Est. remaining: 5m 16sRunning iteration 901/1500... Est. remaining: 5m 11sbest_combination: {'lookbacks': [42, 107, 119], 'score': np.float64(0.7528466847725405), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 6sRunning iteration 921/1500... Est. remaining: 5m 0sRunning iteration 931/1500... Est. remaining: 4m 55sRunning iteration 941/1500... Est. remaining: 4m 50sRunning iteration 951/1500... Est. remaining: 4m 44sRunning iteration 961/1500... Est. remaining: 4m 39sRunning iteration 971/1500... Est. remaining: 4m 34sRunning iteration 981/1500... Est. remaining: 4m 29sRunning iteration 991/1500... Est. remaining: 4m 23sRunning iteration 1001/1500... Est. remaining: 4m 18sbest_combination: {'lookbacks': [42, 107, 119], 'score': np.float64(0.7528466847725405), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 13sRunning iteration 1021/1500... Est. remaining: 4m 8sRunning iteration 1031/1500... Est. remaining: 4m 2sRunning iteration 1041/1500... Est. remaining: 3m 57sRunning iteration 1051/1500... Est. remaining: 3m 52sRunning iteration 1061/1500... Est. remaining: 3m 47sRunning iteration 1071/1500... Est. remaining: 3m 41sRunning iteration 1081/1500... Est. remaining: 3m 36sRunning iteration 1091/1500... Est. remaining: 3m 31sRunning iteration 1101/1500... Est. remaining: 3m 26sbest_combination: {'lookbacks': [42, 107, 119], 'score': np.float64(0.7528466847725405), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 20sRunning iteration 1121/1500... Est. remaining: 3m 15sRunning iteration 1131/1500... Est. remaining: 3m 10sRunning iteration 1141/1500... Est. remaining: 3m 5sRunning iteration 1151/1500... Est. remaining: 3m 0sRunning iteration 1161/1500... Est. remaining: 2m 54sRunning iteration 1171/1500... Est. remaining: 2m 49sRunning iteration 1181/1500... Est. remaining: 2m 44sRunning iteration 1191/1500... Est. remaining: 2m 39sRunning iteration 1201/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [42, 107, 119], 'score': np.float64(0.7528466847725405), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 23sRunning iteration 1231/1500... Est. remaining: 2m 18sRunning iteration 1241/1500... Est. remaining: 2m 13sRunning iteration 1251/1500... Est. remaining: 2m 8sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 57sRunning iteration 1281/1500... Est. remaining: 1m 52sRunning iteration 1291/1500... Est. remaining: 1m 47sRunning iteration 1301/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [42, 107, 119], 'score': np.float64(0.7528466847725405), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 21sRunning iteration 1351/1500... Est. remaining: 1m 16sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [42, 107, 119], 'score': np.float64(0.7528466847725405), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 0.75
best_combination: {'lookbacks': [42, 107, 119], 'score': np.float64(0.7528466847725405), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 107, 119] (score: 0.7528)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 107, 119] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 92 selections (22.1%)
3. naz100_pi: 86 selections (20.7%)
4. naz100_pine: 65 selections (15.6%)
5. cash: 59 selections (14.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,320,472,595.81
Average Annualized Gain: 44.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 18:12:51 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $94,916,276
Annual Return: 30.24%
Sharpe Ratio: 1.06572
Sortino Ratio: 0.964
Max Drawdown: -68.0%
Avg Drawdown: -16.4%
Normalized Score: -2.558
Lookback periods: [33, 116, 299] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,029,081,893
Annual Return: 39.52%
Sharpe Ratio: 1.31862
Sortino Ratio: 1.255
Max Drawdown: -59.4%
Avg Drawdown: -13.7%
Normalized Score: -0.884
Lookback periods: [131, 185, 298] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,424,945,906
Annual Return: 40.83%
Sharpe Ratio: 1.37500
Sortino Ratio: 1.318
Max Drawdown: -64.2%
Avg Drawdown: -14.2%
Normalized Score: -0.782
Lookback periods: [101, 140, 142] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,429,943,890
Annual Return: 40.85%
Sharpe Ratio: 1.37051
Sortino Ratio: 1.315
Max Drawdown: -64.6%
Avg Drawdown: -13.6%
Normalized Score: -0.745
Lookback periods: [119, 141, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,423,161,456
Annual Return: 45.51%
Sharpe Ratio: 1.47915
Sortino Ratio: 1.437
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: 0.090
Lookback periods: [181, 187, 233] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 35m 38sRunning iteration 21/1500... Est. remaining: 23m 57sRunning iteration 31/1500... Est. remaining: 20m 0sRunning iteration 41/1500... Est. remaining: 17m 59sRunning iteration 51/1500... Est. remaining: 16m 45sRunning iteration 61/1500... Est. remaining: 15m 53sRunning iteration 71/1500... Est. remaining: 15m 14sRunning iteration 81/1500... Est. remaining: 14m 46sRunning iteration 91/1500... Est. remaining: 14m 18sRunning iteration 101/1500... Est. remaining: 13m 54sbest_combination: {'lookbacks': [181, 187, 233], 'score': np.float64(0.08971304767249215), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,514,780,273
Annual Return: 46.44%
Sharpe Ratio: 1.50455
Sortino Ratio: 1.470
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.270
Lookback periods: [173, 189, 215] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 13m 53sRunning iteration 121/1500... Est. remaining: 13m 36sRunning iteration 131/1500... Est. remaining: 13m 23sRunning iteration 141/1500... Est. remaining: 13m 9sRunning iteration 151/1500... Est. remaining: 12m 57sRunning iteration 161/1500... Est. remaining: 12m 46sRunning iteration 171/1500... Est. remaining: 12m 36sRunning iteration 181/1500... Est. remaining: 12m 26sRunning iteration 191/1500... Est. remaining: 12m 17sRunning iteration 201/1500... Est. remaining: 12m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,793,474,486
Annual Return: 46.65%
Sharpe Ratio: 1.52573
Sortino Ratio: 1.497
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: 0.456
Lookback periods: [161, 164, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [161, 164, 168], 'score': np.float64(0.45596023862393087), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 7sRunning iteration 221/1500... Est. remaining: 11m 59sRunning iteration 231/1500... Est. remaining: 11m 50sRunning iteration 241/1500... Est. remaining: 11m 42sRunning iteration 251/1500... Est. remaining: 11m 34sRunning iteration 261/1500... Est. remaining: 11m 26sRunning iteration 271/1500... Est. remaining: 11m 19sRunning iteration 281/1500... Est. remaining: 11m 11sRunning iteration 291/1500... Est. remaining: 11m 4sRunning iteration 301/1500... Est. remaining: 10m 57sbest_combination: {'lookbacks': [161, 164, 168], 'score': np.float64(0.45596023862393087), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 50sRunning iteration 321/1500... Est. remaining: 10m 43sRunning iteration 331/1500... Est. remaining: 10m 36sRunning iteration 341/1500... Est. remaining: 10m 29sRunning iteration 351/1500... Est. remaining: 10m 23sRunning iteration 361/1500... Est. remaining: 10m 16sRunning iteration 371/1500... Est. remaining: 10m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,603,288,970
Annual Return: 41.31%
Sharpe Ratio: 1.51187
Sortino Ratio: 1.397
Max Drawdown: -35.2%
Avg Drawdown: -9.3%
Normalized Score: 0.621
Lookback periods: [40, 42, 116] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 10m 7sRunning iteration 391/1500... Est. remaining: 10m 1sRunning iteration 401/1500... Est. remaining: 9m 54sbest_combination: {'lookbacks': [40, 42, 116], 'score': np.float64(0.6211850283782374), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 49sRunning iteration 421/1500... Est. remaining: 9m 43sRunning iteration 431/1500... Est. remaining: 9m 36sRunning iteration 441/1500... Est. remaining: 9m 30sRunning iteration 451/1500... Est. remaining: 9m 24sRunning iteration 461/1500... Est. remaining: 9m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,980,989,084
Annual Return: 42.18%
Sharpe Ratio: 1.52264
Sortino Ratio: 1.424
Max Drawdown: -35.2%
Avg Drawdown: -9.2%
Normalized Score: 0.736
Lookback periods: [42, 42, 111] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 9m 14sRunning iteration 481/1500... Est. remaining: 9m 9sRunning iteration 491/1500... Est. remaining: 9m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,408,742,447
Annual Return: 42.98%
Sharpe Ratio: 1.55341
Sortino Ratio: 1.453
Max Drawdown: -35.1%
Avg Drawdown: -8.8%
Normalized Score: 0.902
Lookback periods: [42, 44, 120] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 8m 59sbest_combination: {'lookbacks': [42, 44, 120], 'score': np.float64(0.9017369628794141), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 53sRunning iteration 521/1500... Est. remaining: 8m 47sRunning iteration 531/1500... Est. remaining: 8m 41sRunning iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 29sRunning iteration 561/1500... Est. remaining: 8m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,941,815,316
Annual Return: 43.81%
Sharpe Ratio: 1.57988
Sortino Ratio: 1.481
Max Drawdown: -35.2%
Avg Drawdown: -8.9%
Normalized Score: 1.005
Lookback periods: [42, 43, 113] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 8m 19sRunning iteration 581/1500... Est. remaining: 8m 13sRunning iteration 591/1500... Est. remaining: 8m 7sRunning iteration 601/1500... Est. remaining: 8m 2sbest_combination: {'lookbacks': [42, 43, 113], 'score': np.float64(1.0047353155033947), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 56sRunning iteration 621/1500... Est. remaining: 7m 50sRunning iteration 631/1500... Est. remaining: 7m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,135,243,294
Annual Return: 44.07%
Sharpe Ratio: 1.58988
Sortino Ratio: 1.504
Max Drawdown: -35.2%
Avg Drawdown: -8.9%
Normalized Score: 1.072
Lookback periods: [41, 44, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 7m 40sRunning iteration 651/1500... Est. remaining: 7m 34sRunning iteration 661/1500... Est. remaining: 7m 29sRunning iteration 671/1500... Est. remaining: 7m 23sRunning iteration 681/1500... Est. remaining: 7m 17sRunning iteration 691/1500... Est. remaining: 7m 12sRunning iteration 701/1500... Est. remaining: 7m 6sbest_combination: {'lookbacks': [41, 44, 110], 'score': np.float64(1.0720295202954802), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 0sRunning iteration 721/1500... Est. remaining: 6m 55sRunning iteration 731/1500... Est. remaining: 6m 49sRunning iteration 741/1500... Est. remaining: 6m 44sRunning iteration 751/1500... Est. remaining: 6m 38sRunning iteration 761/1500... Est. remaining: 6m 32sRunning iteration 771/1500... Est. remaining: 6m 27sRunning iteration 781/1500... Est. remaining: 6m 21sRunning iteration 791/1500... Est. remaining: 6m 16sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [41, 44, 110], 'score': np.float64(1.0720295202954802), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 5sRunning iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 54sRunning iteration 841/1500... Est. remaining: 5m 48sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 37sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [41, 44, 110], 'score': np.float64(1.0720295202954802), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 27sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [41, 44, 110], 'score': np.float64(1.0720295202954802), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 0sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,585,442,247
Annual Return: 44.63%
Sharpe Ratio: 1.59302
Sortino Ratio: 1.498
Max Drawdown: -35.2%
Avg Drawdown: -9.0%
Normalized Score: 1.075
Lookback periods: [42, 44, 106] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [42, 44, 106], 'score': np.float64(1.075025586358321), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [42, 44, 106], 'score': np.float64(1.075025586358321), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,939,137,283
Annual Return: 45.02%
Sharpe Ratio: 1.63565
Sortino Ratio: 1.540
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.262
Lookback periods: [42, 47, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1291/1500... Est. remaining: 1m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,083,243,334
Annual Return: 46.10%
Sharpe Ratio: 1.66852
Sortino Ratio: 1.569
Max Drawdown: -34.7%
Avg Drawdown: -8.1%
Normalized Score: 1.470
Lookback periods: [42, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [42, 50, 98], 'score': np.float64(1.470076918805328), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [42, 50, 98], 'score': np.float64(1.470076918805328), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 1.47
best_combination: {'lookbacks': [42, 50, 98], 'score': np.float64(1.470076918805328), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 50, 98] (score: 1.4701)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 50, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 101 selections (24.3%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 55 selections (13.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,083,243,334.12
Average Annualized Gain: 46.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 18:25:56 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $335,064,775
Annual Return: 35.07%
Sharpe Ratio: 1.22548
Sortino Ratio: 1.131
Max Drawdown: -64.8%
Avg Drawdown: -13.7%
Normalized Score: -1.785
Lookback periods: [57, 90, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $808,605,657
Annual Return: 38.55%
Sharpe Ratio: 1.29535
Sortino Ratio: 1.232
Max Drawdown: -70.8%
Avg Drawdown: -13.9%
Normalized Score: -1.313
Lookback periods: [109, 160, 223] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $936,146,450
Annual Return: 39.14%
Sharpe Ratio: 1.28917
Sortino Ratio: 1.231
Max Drawdown: -71.4%
Avg Drawdown: -13.5%
Normalized Score: -1.238
Lookback periods: [127, 188, 229] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,396,633,098
Annual Return: 44.41%
Sharpe Ratio: 1.46468
Sortino Ratio: 1.416
Max Drawdown: -62.2%
Avg Drawdown: -12.0%
Normalized Score: 0.168
Lookback periods: [194, 257, 277] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,428,086,905
Annual Return: 44.44%
Sharpe Ratio: 1.50220
Sortino Ratio: 1.448
Max Drawdown: -61.1%
Avg Drawdown: -12.7%
Normalized Score: 0.223
Lookback periods: [121, 132, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 4sRunning iteration 31/1500... Est. remaining: 19m 21sRunning iteration 41/1500... Est. remaining: 17m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,391,610,503
Annual Return: 45.48%
Sharpe Ratio: 1.49457
Sortino Ratio: 1.457
Max Drawdown: -62.8%
Avg Drawdown: -11.8%
Normalized Score: 0.385
Lookback periods: [146, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 16m 58sRunning iteration 61/1500... Est. remaining: 16m 8sRunning iteration 71/1500... Est. remaining: 15m 29sRunning iteration 81/1500... Est. remaining: 14m 58sRunning iteration 91/1500... Est. remaining: 14m 34sRunning iteration 101/1500... Est. remaining: 14m 11sbest_combination: {'lookbacks': [146, 161, 168], 'score': np.float64(0.3852607471936139), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 51sRunning iteration 121/1500... Est. remaining: 13m 33sRunning iteration 131/1500... Est. remaining: 13m 19sRunning iteration 141/1500... Est. remaining: 13m 6sRunning iteration 151/1500... Est. remaining: 12m 55sRunning iteration 161/1500... Est. remaining: 12m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,166,241,716
Annual Return: 46.91%
Sharpe Ratio: 1.52869
Sortino Ratio: 1.500
Max Drawdown: -59.0%
Avg Drawdown: -10.5%
Normalized Score: 0.852
Lookback periods: [161, 166, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 12m 44sRunning iteration 181/1500... Est. remaining: 12m 34sRunning iteration 191/1500... Est. remaining: 12m 24sRunning iteration 201/1500... Est. remaining: 12m 14sbest_combination: {'lookbacks': [161, 166, 172], 'score': np.float64(0.8522323236527161), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 6sRunning iteration 221/1500... Est. remaining: 11m 57sRunning iteration 231/1500... Est. remaining: 11m 49sRunning iteration 241/1500... Est. remaining: 11m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,925,973,607
Annual Return: 48.49%
Sharpe Ratio: 1.56791
Sortino Ratio: 1.517
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 1.059
Lookback periods: [184, 189, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 11m 39sRunning iteration 261/1500... Est. remaining: 11m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,932,821,741
Annual Return: 48.49%
Sharpe Ratio: 1.59243
Sortino Ratio: 1.547
Max Drawdown: -56.0%
Avg Drawdown: -11.0%
Normalized Score: 1.180
Lookback periods: [136, 156, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/1500... Est. remaining: 11m 29sRunning iteration 281/1500... Est. remaining: 11m 22sRunning iteration 291/1500... Est. remaining: 11m 14sRunning iteration 301/1500... Est. remaining: 11m 7sbest_combination: {'lookbacks': [136, 156, 205], 'score': np.float64(1.1802659693424942), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 0sRunning iteration 321/1500... Est. remaining: 10m 52sRunning iteration 331/1500... Est. remaining: 10m 45sRunning iteration 341/1500... Est. remaining: 10m 38sRunning iteration 351/1500... Est. remaining: 10m 31sRunning iteration 361/1500... Est. remaining: 10m 25sRunning iteration 371/1500... Est. remaining: 10m 18sRunning iteration 381/1500... Est. remaining: 10m 12sRunning iteration 391/1500... Est. remaining: 10m 5sRunning iteration 401/1500... Est. remaining: 9m 59sbest_combination: {'lookbacks': [136, 156, 205], 'score': np.float64(1.1802659693424942), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 53sRunning iteration 421/1500... Est. remaining: 9m 46sRunning iteration 431/1500... Est. remaining: 9m 40sRunning iteration 441/1500... Est. remaining: 9m 34sRunning iteration 451/1500... Est. remaining: 9m 28sRunning iteration 461/1500... Est. remaining: 9m 22sRunning iteration 471/1500... Est. remaining: 9m 16sRunning iteration 481/1500... Est. remaining: 9m 10sRunning iteration 491/1500... Est. remaining: 9m 4sRunning iteration 501/1500... Est. remaining: 8m 58sbest_combination: {'lookbacks': [136, 156, 205], 'score': np.float64(1.1802659693424942), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 52sRunning iteration 521/1500... Est. remaining: 8m 46sRunning iteration 531/1500... Est. remaining: 8m 40sRunning iteration 541/1500... Est. remaining: 8m 34sRunning iteration 551/1500... Est. remaining: 8m 29sRunning iteration 561/1500... Est. remaining: 8m 23sRunning iteration 571/1500... Est. remaining: 8m 17sRunning iteration 581/1500... Est. remaining: 8m 11sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 0sbest_combination: {'lookbacks': [136, 156, 205], 'score': np.float64(1.1802659693424942), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 54sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 43sRunning iteration 641/1500... Est. remaining: 7m 37sRunning iteration 651/1500... Est. remaining: 7m 32sRunning iteration 661/1500... Est. remaining: 7m 26sRunning iteration 671/1500... Est. remaining: 7m 20sRunning iteration 681/1500... Est. remaining: 7m 15sRunning iteration 691/1500... Est. remaining: 7m 9sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [136, 156, 205], 'score': np.float64(1.1802659693424942), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 58sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 47sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 36sRunning iteration 761/1500... Est. remaining: 6m 31sRunning iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 20sRunning iteration 791/1500... Est. remaining: 6m 14sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [136, 156, 205], 'score': np.float64(1.1802659693424942), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 4sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 53sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 37sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [136, 156, 205], 'score': np.float64(1.1802659693424942), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 27sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [136, 156, 205], 'score': np.float64(1.1802659693424942), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [136, 156, 205], 'score': np.float64(1.1802659693424942), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [136, 156, 205], 'score': np.float64(1.1802659693424942), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,689,775,015
Annual Return: 49.26%
Sharpe Ratio: 1.61932
Sortino Ratio: 1.578
Max Drawdown: -56.0%
Avg Drawdown: -10.8%
Normalized Score: 1.366
Lookback periods: [135, 156, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [135, 156, 205], 'score': np.float64(1.3660623877157207), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [135, 156, 205], 'score': np.float64(1.3660623877157207), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.37
best_combination: {'lookbacks': [135, 156, 205], 'score': np.float64(1.3660623877157207), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 156, 205] (score: 1.3661)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 156, 205] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 40 selections (9.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,689,775,015.42
Average Annualized Gain: 49.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 176m 0s
End time: Mon Aug 25 18:39:02 EDT 2025
Average time per successful run: 11m 44s
==============================================================
✓ All runs completed successfully!
