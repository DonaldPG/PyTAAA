Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: none
Start time: Sat Aug 23 23:57:04 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Sat Aug 23 23:57:04 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-23T23:56:41.665513
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 0.8370
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $397,779,986
Annual Return: 35.74%
Sharpe Ratio: 1.20916
Sortino Ratio: 1.133
Max Drawdown: -55.9%
Avg Drawdown: -13.9%
Normalized Score: -1.806
Lookback periods: [74, 146, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $995,093,949
Annual Return: 39.38%
Sharpe Ratio: 1.32718
Sortino Ratio: 1.259
Max Drawdown: -55.0%
Avg Drawdown: -12.8%
Normalized Score: -0.964
Lookback periods: [102, 104, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $793,942,528
Annual Return: 38.48%
Sharpe Ratio: 1.32063
Sortino Ratio: 1.235
Max Drawdown: -52.3%
Avg Drawdown: -11.7%
Normalized Score: -0.903
Lookback periods: [75, 96, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,588,513,627
Annual Return: 44.64%
Sharpe Ratio: 1.46509
Sortino Ratio: 1.433
Max Drawdown: -60.2%
Avg Drawdown: -12.9%
Normalized Score: -0.152
Lookback periods: [134, 152, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 15m 20sRunning iteration 21/750... Est. remaining: 10m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,016,061,692
Annual Return: 45.11%
Sharpe Ratio: 1.46386
Sortino Ratio: 1.426
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.091
Lookback periods: [172, 195, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 9m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,283,498,120
Annual Return: 45.38%
Sharpe Ratio: 1.47674
Sortino Ratio: 1.443
Max Drawdown: -60.4%
Avg Drawdown: -11.3%
Normalized Score: 0.118
Lookback periods: [154, 168, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 8m 42sRunning iteration 51/750... Est. remaining: 7m 59sRunning iteration 61/750... Est. remaining: 7m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,654,398,220
Annual Return: 46.55%
Sharpe Ratio: 1.53308
Sortino Ratio: 1.496
Max Drawdown: -55.0%
Avg Drawdown: -11.9%
Normalized Score: 0.477
Lookback periods: [123, 130, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/750... Est. remaining: 7m 16sRunning iteration 81/750... Est. remaining: 6m 57sRunning iteration 91/750... Est. remaining: 6m 41sRunning iteration 101/750... Est. remaining: 6m 27sbest_combination: {'lookbacks': [136, 158, 171], 'score': np.float64(0.8370159126844777), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 15sRunning iteration 121/750... Est. remaining: 6m 4sRunning iteration 131/750... Est. remaining: 5m 54sRunning iteration 141/750... Est. remaining: 5m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,075,157,200
Annual Return: 47.50%
Sharpe Ratio: 1.55689
Sortino Ratio: 1.521
Max Drawdown: -57.2%
Avg Drawdown: -12.0%
Normalized Score: 0.571
Lookback periods: [128, 156, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/750... Est. remaining: 5m 41sRunning iteration 161/750... Est. remaining: 5m 33sRunning iteration 171/750... Est. remaining: 5m 25sRunning iteration 181/750... Est. remaining: 5m 17sRunning iteration 191/750... Est. remaining: 5m 10sRunning iteration 201/750... Est. remaining: 5m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,290,049,537
Annual Return: 47.62%
Sharpe Ratio: 1.56216
Sortino Ratio: 1.521
Max Drawdown: -58.2%
Avg Drawdown: -10.8%
Normalized Score: 0.681
Lookback periods: [146, 157, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [136, 158, 171], 'score': np.float64(0.8370159126844777), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 59sRunning iteration 221/750... Est. remaining: 4m 52sRunning iteration 231/750... Est. remaining: 4m 45sRunning iteration 241/750... Est. remaining: 4m 39sRunning iteration 251/750... Est. remaining: 4m 32sRunning iteration 261/750... Est. remaining: 4m 25sRunning iteration 271/750... Est. remaining: 4m 19sRunning iteration 281/750... Est. remaining: 4m 13sRunning iteration 291/750... Est. remaining: 4m 6sRunning iteration 301/750... Est. remaining: 4m 0sbest_combination: {'lookbacks': [136, 158, 171], 'score': np.float64(0.8370159126844777), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,804,394,362
Annual Return: 48.89%
Sharpe Ratio: 1.58941
Sortino Ratio: 1.550
Max Drawdown: -59.2%
Avg Drawdown: -11.9%
Normalized Score: 0.746
Lookback periods: [149, 158, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/750... Est. remaining: 3m 50sRunning iteration 331/750... Est. remaining: 3m 44sRunning iteration 341/750... Est. remaining: 3m 39sRunning iteration 351/750... Est. remaining: 3m 33sRunning iteration 361/750... Est. remaining: 3m 27sRunning iteration 371/750... Est. remaining: 3m 22sRunning iteration 381/750... Est. remaining: 3m 16sRunning iteration 391/750... Est. remaining: 3m 10sRunning iteration 401/750... Est. remaining: 3m 5sbest_combination: {'lookbacks': [136, 158, 171], 'score': np.float64(0.8370159126844777), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 59sRunning iteration 421/750... Est. remaining: 2m 54sRunning iteration 431/750... Est. remaining: 2m 48sRunning iteration 441/750... Est. remaining: 2m 43sRunning iteration 451/750... Est. remaining: 2m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,995,019,031
Annual Return: 48.52%
Sharpe Ratio: 1.59351
Sortino Ratio: 1.557
Max Drawdown: -58.5%
Avg Drawdown: -11.3%
Normalized Score: 0.811
Lookback periods: [134, 155, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/750... Est. remaining: 2m 33sRunning iteration 471/750... Est. remaining: 2m 27sRunning iteration 481/750... Est. remaining: 2m 22sRunning iteration 491/750... Est. remaining: 2m 16sRunning iteration 501/750... Est. remaining: 2m 11sbest_combination: {'lookbacks': [136, 158, 171], 'score': np.float64(0.8370159126844777), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 5sRunning iteration 521/750... Est. remaining: 2m 0sRunning iteration 531/750... Est. remaining: 1m 55sRunning iteration 541/750... Est. remaining: 1m 49sRunning iteration 551/750... Est. remaining: 1m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,597,902,871
Annual Return: 48.80%
Sharpe Ratio: 1.60703
Sortino Ratio: 1.571
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 0.844
Lookback periods: [139, 155, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/750... Est. remaining: 1m 39sRunning iteration 571/750... Est. remaining: 1m 34sRunning iteration 581/750... Est. remaining: 1m 28sRunning iteration 591/750... Est. remaining: 1m 23sRunning iteration 601/750... Est. remaining: 1m 18sbest_combination: {'lookbacks': [139, 155, 168], 'score': np.float64(0.8439170995144002), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 12sRunning iteration 621/750... Est. remaining: 1m 7sRunning iteration 631/750... Est. remaining: 1m 2sRunning iteration 641/750... Est. remaining: 0m 57sRunning iteration 651/750... Est. remaining: 0m 51sRunning iteration 661/750... Est. remaining: 0m 46sRunning iteration 671/750... Est. remaining: 0m 41sRunning iteration 681/750... Est. remaining: 0m 36sRunning iteration 691/750... Est. remaining: 0m 31sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [139, 155, 168], 'score': np.float64(0.8439170995144002), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.4 minutes
Best normalized score: 0.84
best_combination: {'lookbacks': [139, 155, 168], 'score': np.float64(0.8439170995144002), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 2250
  Theoretical efficiency improvement: 0.0026666666666666666
  Best performing lookbacks: [139, 155, 168] (score: 0.8439)

Monte Carlo simulation completed in 6.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 155, 168] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 118 selections (28.4%)
2. naz100_hma: 108 selections (26.0%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,597,902,871.29
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Sun Aug 24 00:03:39 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $332,243,647
Annual Return: 35.04%
Sharpe Ratio: 1.22645
Sortino Ratio: 1.135
Max Drawdown: -62.2%
Avg Drawdown: -13.5%
Normalized Score: -1.460
Lookback periods: [66, 73, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $893,647,807
Annual Return: 38.95%
Sharpe Ratio: 1.31493
Sortino Ratio: 1.253
Max Drawdown: -65.7%
Avg Drawdown: -14.0%
Normalized Score: -1.109
Lookback periods: [91, 180, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,251,161,370
Annual Return: 40.30%
Sharpe Ratio: 1.34512
Sortino Ratio: 1.285
Max Drawdown: -63.3%
Avg Drawdown: -13.4%
Normalized Score: -0.792
Lookback periods: [97, 129, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,170,975,997
Annual Return: 42.55%
Sharpe Ratio: 1.40121
Sortino Ratio: 1.350
Max Drawdown: -60.3%
Avg Drawdown: -12.7%
Normalized Score: -0.316
Lookback periods: [129, 193, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,098,239,595
Annual Return: 44.02%
Sharpe Ratio: 1.45198
Sortino Ratio: 1.406
Max Drawdown: -63.5%
Avg Drawdown: -12.9%
Normalized Score: -0.204
Lookback periods: [130, 144, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 16m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,694,273,027
Annual Return: 44.76%
Sharpe Ratio: 1.46623
Sortino Ratio: 1.419
Max Drawdown: -61.4%
Avg Drawdown: -12.6%
Normalized Score: -0.022
Lookback periods: [129, 178, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 12m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,844,377,254
Annual Return: 43.67%
Sharpe Ratio: 1.43710
Sortino Ratio: 1.392
Max Drawdown: -57.2%
Avg Drawdown: -12.5%
Normalized Score: -0.011
Lookback periods: [137, 161, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 10m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,743,730,179
Annual Return: 45.80%
Sharpe Ratio: 1.51765
Sortino Ratio: 1.474
Max Drawdown: -58.5%
Avg Drawdown: -12.1%
Normalized Score: 0.350
Lookback periods: [138, 151, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 9m 30sRunning iteration 51/750... Est. remaining: 8m 38sRunning iteration 61/750... Est. remaining: 8m 1sRunning iteration 71/750... Est. remaining: 7m 33sRunning iteration 81/750... Est. remaining: 7m 11sRunning iteration 91/750... Est. remaining: 6m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,192,942,185
Annual Return: 46.19%
Sharpe Ratio: 1.49976
Sortino Ratio: 1.461
Max Drawdown: -59.2%
Avg Drawdown: -11.6%
Normalized Score: 0.351
Lookback periods: [149, 161, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,421,861,269
Annual Return: 47.08%
Sharpe Ratio: 1.55216
Sortino Ratio: 1.506
Max Drawdown: -56.8%
Avg Drawdown: -11.0%
Normalized Score: 0.687
Lookback periods: [139, 157, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/750... Est. remaining: 6m 54sbest_combination: {'lookbacks': [139, 157, 167], 'score': np.float64(0.6873313386707703), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 40sRunning iteration 121/750... Est. remaining: 6m 26sRunning iteration 131/750... Est. remaining: 6m 13sRunning iteration 141/750... Est. remaining: 6m 2sRunning iteration 151/750... Est. remaining: 5m 52sRunning iteration 161/750... Est. remaining: 5m 42sRunning iteration 171/750... Est. remaining: 5m 33sRunning iteration 181/750... Est. remaining: 5m 24sRunning iteration 191/750... Est. remaining: 5m 16sRunning iteration 201/750... Est. remaining: 5m 9sbest_combination: {'lookbacks': [139, 157, 167], 'score': np.float64(0.6873313386707703), 'visits': 1}
Running iteration 211/750... Est. remaining: 5m 1sRunning iteration 221/750... Est. remaining: 4m 54sRunning iteration 231/750... Est. remaining: 4m 47sRunning iteration 241/750... Est. remaining: 4m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,849,227,807
Annual Return: 48.45%
Sharpe Ratio: 1.58086
Sortino Ratio: 1.545
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.812
Lookback periods: [128, 156, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/750... Est. remaining: 4m 36sRunning iteration 261/750... Est. remaining: 4m 30sRunning iteration 271/750... Est. remaining: 4m 23sRunning iteration 281/750... Est. remaining: 4m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,761,568,684
Annual Return: 48.41%
Sharpe Ratio: 1.58490
Sortino Ratio: 1.549
Max Drawdown: -56.9%
Avg Drawdown: -10.8%
Normalized Score: 0.887
Lookback periods: [156, 159, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 291/750... Est. remaining: 4m 12sRunning iteration 301/750... Est. remaining: 4m 6sbest_combination: {'lookbacks': [156, 159, 160], 'score': np.float64(0.8871888871187542), 'visits': 1}
Running iteration 311/750... Est. remaining: 4m 0sRunning iteration 321/750... Est. remaining: 3m 53sRunning iteration 331/750... Est. remaining: 3m 47sRunning iteration 341/750... Est. remaining: 3m 41sRunning iteration 351/750... Est. remaining: 3m 35sRunning iteration 361/750... Est. remaining: 3m 29sRunning iteration 371/750... Est. remaining: 3m 24sRunning iteration 381/750... Est. remaining: 3m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,006,104,553
Annual Return: 48.98%
Sharpe Ratio: 1.59533
Sortino Ratio: 1.568
Max Drawdown: -55.0%
Avg Drawdown: -10.7%
Normalized Score: 1.045
Lookback periods: [156, 162, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/750... Est. remaining: 3m 13sRunning iteration 401/750... Est. remaining: 3m 7sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(1.0450083174527662), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 2sRunning iteration 421/750... Est. remaining: 2m 56sRunning iteration 431/750... Est. remaining: 2m 50sRunning iteration 441/750... Est. remaining: 2m 45sRunning iteration 451/750... Est. remaining: 2m 39sRunning iteration 461/750... Est. remaining: 2m 33sRunning iteration 471/750... Est. remaining: 2m 28sRunning iteration 481/750... Est. remaining: 2m 22sRunning iteration 491/750... Est. remaining: 2m 17sRunning iteration 501/750... Est. remaining: 2m 11sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(1.0450083174527662), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 6sRunning iteration 521/750... Est. remaining: 2m 0sRunning iteration 531/750... Est. remaining: 1m 55sRunning iteration 541/750... Est. remaining: 1m 50sRunning iteration 551/750... Est. remaining: 1m 44sRunning iteration 561/750... Est. remaining: 1m 39sRunning iteration 571/750... Est. remaining: 1m 33sRunning iteration 581/750... Est. remaining: 1m 28sRunning iteration 591/750... Est. remaining: 1m 23sRunning iteration 601/750... Est. remaining: 1m 18sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(1.0450083174527662), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 12sRunning iteration 621/750... Est. remaining: 1m 7sRunning iteration 631/750... Est. remaining: 1m 2sRunning iteration 641/750... Est. remaining: 0m 57sRunning iteration 651/750... Est. remaining: 0m 51sRunning iteration 661/750... Est. remaining: 0m 46sRunning iteration 671/750... Est. remaining: 0m 41sRunning iteration 681/750... Est. remaining: 0m 36sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(1.0450083174527662), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,475,254,678
Annual Return: 49.57%
Sharpe Ratio: 1.61090
Sortino Ratio: 1.581
Max Drawdown: -59.0%
Avg Drawdown: -9.9%
Normalized Score: 1.064
Lookback periods: [156, 158, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv

Monte Carlo simulation completed in 6.4 minutes
Best normalized score: 1.06
best_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(1.0643107275020802), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [156, 158, 168] (score: 1.0643)

Monte Carlo simulation completed in 6.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 158, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,475,254,678.31
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Sun Aug 24 00:10:12 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,926,897,655
Annual Return: 47.41%
Sharpe Ratio: 1.53602
Sortino Ratio: 1.499
Max Drawdown: -59.2%
Avg Drawdown: -12.3%
Normalized Score: 0.683
Lookback periods: [149, 155, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 10m 54sRunning iteration 21/750... Est. remaining: 8m 16sRunning iteration 31/750... Est. remaining: 7m 19sRunning iteration 41/750... Est. remaining: 6m 49sRunning iteration 51/750... Est. remaining: 6m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,204,099,331
Annual Return: 46.94%
Sharpe Ratio: 1.55596
Sortino Ratio: 1.515
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.813
Lookback periods: [140, 149, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/750... Est. remaining: 6m 29sRunning iteration 71/750... Est. remaining: 6m 15sRunning iteration 81/750... Est. remaining: 6m 3sRunning iteration 91/750... Est. remaining: 5m 53sRunning iteration 101/750... Est. remaining: 5m 44sbest_combination: {'lookbacks': [140, 149, 156], 'score': np.float64(0.8125424602556999), 'visits': 1}
Running iteration 111/750... Est. remaining: 5m 35sRunning iteration 121/750... Est. remaining: 5m 27sRunning iteration 131/750... Est. remaining: 5m 20sRunning iteration 141/750... Est. remaining: 5m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,579,395,294
Annual Return: 48.32%
Sharpe Ratio: 1.58058
Sortino Ratio: 1.554
Max Drawdown: -61.3%
Avg Drawdown: -11.1%
Normalized Score: 0.960
Lookback periods: [152, 159, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/750... Est. remaining: 5m 11sRunning iteration 161/750... Est. remaining: 5m 5sRunning iteration 171/750... Est. remaining: 4m 59sRunning iteration 181/750... Est. remaining: 4m 52sRunning iteration 191/750... Est. remaining: 4m 47sRunning iteration 201/750... Est. remaining: 4m 41sbest_combination: {'lookbacks': [152, 159, 165], 'score': np.float64(0.9603183475109457), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 36sRunning iteration 221/750... Est. remaining: 4m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,971,563,437
Annual Return: 48.00%
Sharpe Ratio: 1.56943
Sortino Ratio: 1.535
Max Drawdown: -56.9%
Avg Drawdown: -11.0%
Normalized Score: 1.063
Lookback periods: [157, 160, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/750... Est. remaining: 4m 27sRunning iteration 241/750... Est. remaining: 4m 22sRunning iteration 251/750... Est. remaining: 4m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,310,123,472
Annual Return: 47.64%
Sharpe Ratio: 1.55263
Sortino Ratio: 1.518
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.108
Lookback periods: [157, 162, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/750... Est. remaining: 4m 13sRunning iteration 271/750... Est. remaining: 4m 8sRunning iteration 281/750... Est. remaining: 4m 2sRunning iteration 291/750... Est. remaining: 3m 57sRunning iteration 301/750... Est. remaining: 3m 51sbest_combination: {'lookbacks': [157, 162, 170], 'score': np.float64(1.107808196263253), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 45sRunning iteration 321/750... Est. remaining: 3m 40sRunning iteration 331/750... Est. remaining: 3m 34sRunning iteration 341/750... Est. remaining: 3m 29sRunning iteration 351/750... Est. remaining: 3m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,836,029,240
Annual Return: 48.91%
Sharpe Ratio: 1.59924
Sortino Ratio: 1.566
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.376
Lookback periods: [156, 160, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 361/750... Est. remaining: 3m 19sRunning iteration 371/750... Est. remaining: 3m 14sRunning iteration 381/750... Est. remaining: 3m 8sRunning iteration 391/750... Est. remaining: 3m 3sRunning iteration 401/750... Est. remaining: 2m 58sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.3759759004851215), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 52sRunning iteration 421/750... Est. remaining: 2m 47sRunning iteration 431/750... Est. remaining: 2m 42sRunning iteration 441/750... Est. remaining: 2m 37sRunning iteration 451/750... Est. remaining: 2m 32sRunning iteration 461/750... Est. remaining: 2m 27sRunning iteration 471/750... Est. remaining: 2m 21sRunning iteration 481/750... Est. remaining: 2m 16sRunning iteration 491/750... Est. remaining: 2m 11sRunning iteration 501/750... Est. remaining: 2m 6sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.3759759004851215), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 1sRunning iteration 521/750... Est. remaining: 1m 56sRunning iteration 531/750... Est. remaining: 1m 50sRunning iteration 541/750... Est. remaining: 1m 45sRunning iteration 551/750... Est. remaining: 1m 40sRunning iteration 561/750... Est. remaining: 1m 35sRunning iteration 571/750... Est. remaining: 1m 30sRunning iteration 581/750... Est. remaining: 1m 25sRunning iteration 591/750... Est. remaining: 1m 20sRunning iteration 601/750... Est. remaining: 1m 15sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.3759759004851215), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 10sRunning iteration 621/750... Est. remaining: 1m 5sRunning iteration 631/750... Est. remaining: 1m 0sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 24sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.3759759004851215), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 19sRunning iteration 721/750... Est. remaining: 0m 14sRunning iteration 731/750... Est. remaining: 0m 9sRunning iteration 741/750... Est. remaining: 0m 4s
Monte Carlo simulation completed in 6.2 minutes
Best normalized score: 1.38
best_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.3759759004851215), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [156, 160, 168] (score: 1.3760)

Monte Carlo simulation completed in 6.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 160, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 116 selections (27.9%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,836,029,239.59
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Sun Aug 24 00:16:34 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,833,671,502
Annual Return: 41.86%
Sharpe Ratio: 1.40996
Sortino Ratio: 1.339
Max Drawdown: -64.9%
Avg Drawdown: -12.8%
Normalized Score: -0.910
Lookback periods: [87, 159, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,407,680,760
Annual Return: 42.98%
Sharpe Ratio: 1.40591
Sortino Ratio: 1.372
Max Drawdown: -67.1%
Avg Drawdown: -12.9%
Normalized Score: -0.886
Lookback periods: [125, 172, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,723,977,136
Annual Return: 43.49%
Sharpe Ratio: 1.42641
Sortino Ratio: 1.381
Max Drawdown: -61.4%
Avg Drawdown: -12.8%
Normalized Score: -0.574
Lookback periods: [124, 180, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,963,569,246
Annual Return: 45.05%
Sharpe Ratio: 1.47619
Sortino Ratio: 1.438
Max Drawdown: -61.3%
Avg Drawdown: -13.2%
Normalized Score: -0.360
Lookback periods: [121, 156, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,933,557,321
Annual Return: 45.97%
Sharpe Ratio: 1.48682
Sortino Ratio: 1.451
Max Drawdown: -59.0%
Avg Drawdown: -12.0%
Normalized Score: -0.044
Lookback periods: [181, 182, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 16m 37sRunning iteration 21/750... Est. remaining: 11m 15sRunning iteration 31/750... Est. remaining: 9m 21sRunning iteration 41/750... Est. remaining: 8m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,349,433,119
Annual Return: 47.66%
Sharpe Ratio: 1.54018
Sortino Ratio: 1.505
Max Drawdown: -60.2%
Avg Drawdown: -11.7%
Normalized Score: 0.205
Lookback periods: [183, 187, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/750... Est. remaining: 8m 1sRunning iteration 61/750... Est. remaining: 7m 30sRunning iteration 71/750... Est. remaining: 7m 8sRunning iteration 81/750... Est. remaining: 6m 50sRunning iteration 91/750... Est. remaining: 6m 34sRunning iteration 101/750... Est. remaining: 6m 20sbest_combination: {'lookbacks': [183, 187, 197], 'score': np.float64(0.20531375767484175), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,765,739,395
Annual Return: 47.31%
Sharpe Ratio: 1.53900
Sortino Ratio: 1.497
Max Drawdown: -56.1%
Avg Drawdown: -11.3%
Normalized Score: 0.372
Lookback periods: [156, 156, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/750... Est. remaining: 6m 5sRunning iteration 131/750... Est. remaining: 5m 54sRunning iteration 141/750... Est. remaining: 5m 44sRunning iteration 151/750... Est. remaining: 5m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,325,735,659
Annual Return: 40.54%
Sharpe Ratio: 1.45411
Sortino Ratio: 1.355
Max Drawdown: -37.0%
Avg Drawdown: -10.0%
Normalized Score: 0.487
Lookback periods: [51, 60, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/750... Est. remaining: 5m 31sRunning iteration 171/750... Est. remaining: 5m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,636,298,282
Annual Return: 41.40%
Sharpe Ratio: 1.50034
Sortino Ratio: 1.396
Max Drawdown: -35.6%
Avg Drawdown: -9.6%
Normalized Score: 0.765
Lookback periods: [50, 56, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/750... Est. remaining: 5m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,912,007
Annual Return: 45.27%
Sharpe Ratio: 1.61355
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.509
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/750... Est. remaining: 5m 15sRunning iteration 201/750... Est. remaining: 5m 7sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.5089801353372274), 'visits': 1}
Running iteration 211/750... Est. remaining: 5m 0sRunning iteration 221/750... Est. remaining: 4m 53sRunning iteration 231/750... Est. remaining: 4m 46sRunning iteration 241/750... Est. remaining: 4m 39sRunning iteration 251/750... Est. remaining: 4m 32sRunning iteration 261/750... Est. remaining: 4m 26sRunning iteration 271/750... Est. remaining: 4m 19sRunning iteration 281/750... Est. remaining: 4m 13sRunning iteration 291/750... Est. remaining: 4m 7sRunning iteration 301/750... Est. remaining: 4m 0sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.5089801353372274), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 54sRunning iteration 321/750... Est. remaining: 3m 48sRunning iteration 331/750... Est. remaining: 3m 42sRunning iteration 341/750... Est. remaining: 3m 36sRunning iteration 351/750... Est. remaining: 3m 30sRunning iteration 361/750... Est. remaining: 3m 24sRunning iteration 371/750... Est. remaining: 3m 18sRunning iteration 381/750... Est. remaining: 3m 12sRunning iteration 391/750... Est. remaining: 3m 7sRunning iteration 401/750... Est. remaining: 3m 1sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.5089801353372274), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 55sRunning iteration 421/750... Est. remaining: 2m 50sRunning iteration 431/750... Est. remaining: 2m 44sRunning iteration 441/750... Est. remaining: 2m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.553
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/750... Est. remaining: 2m 34sRunning iteration 461/750... Est. remaining: 2m 29sRunning iteration 471/750... Est. remaining: 2m 24sRunning iteration 481/750... Est. remaining: 2m 18sRunning iteration 491/750... Est. remaining: 2m 13sRunning iteration 501/750... Est. remaining: 2m 8sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.552642912424988), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 3sRunning iteration 521/750... Est. remaining: 1m 57sRunning iteration 531/750... Est. remaining: 1m 52sRunning iteration 541/750... Est. remaining: 1m 47sRunning iteration 551/750... Est. remaining: 1m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.823
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/750... Est. remaining: 1m 37sRunning iteration 571/750... Est. remaining: 1m 32sRunning iteration 581/750... Est. remaining: 1m 26sRunning iteration 591/750... Est. remaining: 1m 21sRunning iteration 601/750... Est. remaining: 1m 16sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8234988285194866), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 0sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8234988285194866), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 1.82
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8234988285194866), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 52, 95] (score: 1.8235)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Sun Aug 24 00:22:59 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $317,449,095
Annual Return: 34.86%
Sharpe Ratio: 1.21301
Sortino Ratio: 1.126
Max Drawdown: -52.3%
Avg Drawdown: -12.8%
Normalized Score: -1.108
Lookback periods: [67, 74, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $739,779,684
Annual Return: 38.19%
Sharpe Ratio: 1.31600
Sortino Ratio: 1.219
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: -0.677
Lookback periods: [56, 111, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,205,011,586
Annual Return: 45.30%
Sharpe Ratio: 1.49393
Sortino Ratio: 1.447
Max Drawdown: -56.4%
Avg Drawdown: -12.1%
Normalized Score: 0.125
Lookback periods: [123, 130, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 14m 10sRunning iteration 21/750... Est. remaining: 9m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,056,692,928
Annual Return: 39.62%
Sharpe Ratio: 1.44067
Sortino Ratio: 1.332
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 0.812
Lookback periods: [50, 51, 92] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 8m 58sRunning iteration 41/750... Est. remaining: 8m 6sRunning iteration 51/750... Est. remaining: 7m 32sRunning iteration 61/750... Est. remaining: 7m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,133,173,252
Annual Return: 39.90%
Sharpe Ratio: 1.45457
Sortino Ratio: 1.349
Max Drawdown: -34.7%
Avg Drawdown: -9.8%
Normalized Score: 0.832
Lookback periods: [50, 55, 93] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/750... Est. remaining: 7m 0sRunning iteration 81/750... Est. remaining: 6m 42sRunning iteration 91/750... Est. remaining: 6m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,079,286,194
Annual Return: 44.00%
Sharpe Ratio: 1.57949
Sortino Ratio: 1.486
Max Drawdown: -34.8%
Avg Drawdown: -9.0%
Normalized Score: 1.486
Lookback periods: [50, 54, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/750... Est. remaining: 6m 23sbest_combination: {'lookbacks': [50, 54, 98], 'score': np.float64(1.4863530136992147), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,928,518,176
Annual Return: 43.79%
Sharpe Ratio: 1.59880
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.590
Lookback periods: [50, 52, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/750... Est. remaining: 6m 17sRunning iteration 121/750... Est. remaining: 6m 6sRunning iteration 131/750... Est. remaining: 5m 54sRunning iteration 141/750... Est. remaining: 5m 44sRunning iteration 151/750... Est. remaining: 5m 35sRunning iteration 161/750... Est. remaining: 5m 26sRunning iteration 171/750... Est. remaining: 5m 19sRunning iteration 181/750... Est. remaining: 5m 11sRunning iteration 191/750... Est. remaining: 5m 4sRunning iteration 201/750... Est. remaining: 4m 57sbest_combination: {'lookbacks': [50, 52, 94], 'score': np.float64(1.5896981784659459), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 51sRunning iteration 221/750... Est. remaining: 4m 44sRunning iteration 231/750... Est. remaining: 4m 38sRunning iteration 241/750... Est. remaining: 4m 32sRunning iteration 251/750... Est. remaining: 4m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,912,007
Annual Return: 45.27%
Sharpe Ratio: 1.61355
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.696
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/750... Est. remaining: 4m 21sRunning iteration 271/750... Est. remaining: 4m 15sRunning iteration 281/750... Est. remaining: 4m 9sRunning iteration 291/750... Est. remaining: 4m 3sRunning iteration 301/750... Est. remaining: 3m 56sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6957980754250113), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 50sRunning iteration 321/750... Est. remaining: 3m 45sRunning iteration 331/750... Est. remaining: 3m 39sRunning iteration 341/750... Est. remaining: 3m 33sRunning iteration 351/750... Est. remaining: 3m 28sRunning iteration 361/750... Est. remaining: 3m 22sRunning iteration 371/750... Est. remaining: 3m 16sRunning iteration 381/750... Est. remaining: 3m 11sRunning iteration 391/750... Est. remaining: 3m 5sRunning iteration 401/750... Est. remaining: 3m 0sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6957980754250113), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 54sRunning iteration 421/750... Est. remaining: 2m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.765
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/750... Est. remaining: 2m 44sRunning iteration 441/750... Est. remaining: 2m 39sRunning iteration 451/750... Est. remaining: 2m 34sRunning iteration 461/750... Est. remaining: 2m 28sRunning iteration 471/750... Est. remaining: 2m 23sRunning iteration 481/750... Est. remaining: 2m 18sRunning iteration 491/750... Est. remaining: 2m 13sRunning iteration 501/750... Est. remaining: 2m 7sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7645081457314569), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 2sRunning iteration 521/750... Est. remaining: 1m 57sRunning iteration 531/750... Est. remaining: 1m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.002
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/750... Est. remaining: 1m 47sRunning iteration 551/750... Est. remaining: 1m 42sRunning iteration 561/750... Est. remaining: 1m 36sRunning iteration 571/750... Est. remaining: 1m 31sRunning iteration 581/750... Est. remaining: 1m 26sRunning iteration 591/750... Est. remaining: 1m 21sRunning iteration 601/750... Est. remaining: 1m 16sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0023029982843923), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 0sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0023029982843923), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 2.00
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0023029982843923), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 52, 95] (score: 2.0023)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Sun Aug 24 00:29:24 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,958,186,940
Annual Return: 45.99%
Sharpe Ratio: 1.50385
Sortino Ratio: 1.467
Max Drawdown: -59.0%
Avg Drawdown: -10.7%
Normalized Score: 0.528
Lookback periods: [155, 167, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 11m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,925,353,787
Annual Return: 48.49%
Sharpe Ratio: 1.58296
Sortino Ratio: 1.559
Max Drawdown: -56.9%
Avg Drawdown: -10.8%
Normalized Score: 0.898
Lookback periods: [159, 161, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 9m 13sRunning iteration 31/750... Est. remaining: 8m 2sRunning iteration 41/750... Est. remaining: 7m 21sRunning iteration 51/750... Est. remaining: 6m 58sRunning iteration 61/750... Est. remaining: 6m 40sRunning iteration 71/750... Est. remaining: 6m 26sRunning iteration 81/750... Est. remaining: 6m 14sRunning iteration 91/750... Est. remaining: 6m 4sRunning iteration 101/750... Est. remaining: 5m 54sbest_combination: {'lookbacks': [159, 161, 166], 'score': np.float64(0.8983207585920973), 'visits': 1}
Running iteration 111/750... Est. remaining: 5m 46sRunning iteration 121/750... Est. remaining: 5m 38sRunning iteration 131/750... Est. remaining: 5m 31sRunning iteration 141/750... Est. remaining: 5m 23sRunning iteration 151/750... Est. remaining: 5m 16sRunning iteration 161/750... Est. remaining: 5m 9sRunning iteration 171/750... Est. remaining: 5m 2sRunning iteration 181/750... Est. remaining: 4m 56sRunning iteration 191/750... Est. remaining: 4m 50sRunning iteration 201/750... Est. remaining: 4m 44sbest_combination: {'lookbacks': [159, 161, 166], 'score': np.float64(0.8983207585920973), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 39sRunning iteration 221/750... Est. remaining: 4m 33sRunning iteration 231/750... Est. remaining: 4m 27sRunning iteration 241/750... Est. remaining: 4m 22sRunning iteration 251/750... Est. remaining: 4m 16sRunning iteration 261/750... Est. remaining: 4m 11sRunning iteration 271/750... Est. remaining: 4m 5sRunning iteration 281/750... Est. remaining: 3m 59sRunning iteration 291/750... Est. remaining: 3m 54sRunning iteration 301/750... Est. remaining: 3m 48sbest_combination: {'lookbacks': [159, 161, 166], 'score': np.float64(0.8983207585920973), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 43sRunning iteration 321/750... Est. remaining: 3m 37sRunning iteration 331/750... Est. remaining: 3m 32sRunning iteration 341/750... Est. remaining: 3m 26sRunning iteration 351/750... Est. remaining: 3m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,708,002,401
Annual Return: 50.01%
Sharpe Ratio: 1.61667
Sortino Ratio: 1.585
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 1.018
Lookback periods: [154, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 361/750... Est. remaining: 3m 18sRunning iteration 371/750... Est. remaining: 3m 12sRunning iteration 381/750... Est. remaining: 3m 7sRunning iteration 391/750... Est. remaining: 3m 2sRunning iteration 401/750... Est. remaining: 2m 57sbest_combination: {'lookbacks': [154, 154, 156], 'score': np.float64(1.018289884976637), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 52sRunning iteration 421/750... Est. remaining: 2m 47sRunning iteration 431/750... Est. remaining: 2m 41sRunning iteration 441/750... Est. remaining: 2m 36sRunning iteration 451/750... Est. remaining: 2m 31sRunning iteration 461/750... Est. remaining: 2m 26sRunning iteration 471/750... Est. remaining: 2m 21sRunning iteration 481/750... Est. remaining: 2m 16sRunning iteration 491/750... Est. remaining: 2m 11sRunning iteration 501/750... Est. remaining: 2m 6sbest_combination: {'lookbacks': [154, 154, 156], 'score': np.float64(1.018289884976637), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 1sRunning iteration 521/750... Est. remaining: 1m 55sRunning iteration 531/750... Est. remaining: 1m 50sRunning iteration 541/750... Est. remaining: 1m 45sRunning iteration 551/750... Est. remaining: 1m 40sRunning iteration 561/750... Est. remaining: 1m 35sRunning iteration 571/750... Est. remaining: 1m 30sRunning iteration 581/750... Est. remaining: 1m 25sRunning iteration 591/750... Est. remaining: 1m 20sRunning iteration 601/750... Est. remaining: 1m 15sbest_combination: {'lookbacks': [154, 154, 156], 'score': np.float64(1.018289884976637), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 10sRunning iteration 621/750... Est. remaining: 1m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,836,029,240
Annual Return: 48.91%
Sharpe Ratio: 1.59924
Sortino Ratio: 1.566
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.048
Lookback periods: [156, 160, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/750... Est. remaining: 1m 0sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.0484349551960706), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 1.05
best_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.0484349551960706), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [156, 160, 168] (score: 1.0484)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 160, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 116 selections (27.9%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,836,029,239.59
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Sun Aug 24 00:35:49 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $572,813,986
Annual Return: 37.18%
Sharpe Ratio: 1.28852
Sortino Ratio: 1.202
Max Drawdown: -52.3%
Avg Drawdown: -12.4%
Normalized Score: -0.947
Lookback periods: [83, 91, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $776,276,998
Annual Return: 38.39%
Sharpe Ratio: 1.32025
Sortino Ratio: 1.243
Max Drawdown: -52.3%
Avg Drawdown: -11.2%
Normalized Score: -0.484
Lookback periods: [81, 130, 142] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,083,416,566
Annual Return: 46.10%
Sharpe Ratio: 1.51309
Sortino Ratio: 1.471
Max Drawdown: -62.5%
Avg Drawdown: -12.5%
Normalized Score: 0.378
Lookback periods: [148, 153, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 13m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,559,687,254
Annual Return: 46.47%
Sharpe Ratio: 1.53497
Sortino Ratio: 1.491
Max Drawdown: -63.8%
Avg Drawdown: -12.0%
Normalized Score: 0.533
Lookback periods: [138, 148, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 10m 39sRunning iteration 31/750... Est. remaining: 9m 0sRunning iteration 41/750... Est. remaining: 8m 6sRunning iteration 51/750... Est. remaining: 7m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,601,076,607
Annual Return: 47.20%
Sharpe Ratio: 1.53486
Sortino Ratio: 1.497
Max Drawdown: -60.8%
Avg Drawdown: -11.4%
Normalized Score: 0.819
Lookback periods: [156, 156, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/750... Est. remaining: 7m 21sRunning iteration 71/750... Est. remaining: 7m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,079,237,516
Annual Return: 47.50%
Sharpe Ratio: 1.54823
Sortino Ratio: 1.512
Max Drawdown: -58.5%
Avg Drawdown: -11.0%
Normalized Score: 1.042
Lookback periods: [152, 159, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/750... Est. remaining: 6m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,840,292,929
Annual Return: 47.35%
Sharpe Ratio: 1.53755
Sortino Ratio: 1.501
Max Drawdown: -59.0%
Avg Drawdown: -10.6%
Normalized Score: 1.063
Lookback periods: [158, 161, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/750... Est. remaining: 6m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,918,937,488
Annual Return: 47.40%
Sharpe Ratio: 1.53789
Sortino Ratio: 1.508
Max Drawdown: -59.0%
Avg Drawdown: -10.3%
Normalized Score: 1.144
Lookback periods: [155, 167, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/750... Est. remaining: 6m 43sbest_combination: {'lookbacks': [155, 167, 171], 'score': np.float64(1.1441535225937387), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 30sRunning iteration 121/750... Est. remaining: 6m 18sRunning iteration 131/750... Est. remaining: 6m 6sRunning iteration 141/750... Est. remaining: 5m 56sRunning iteration 151/750... Est. remaining: 5m 46sRunning iteration 161/750... Est. remaining: 5m 36sRunning iteration 171/750... Est. remaining: 5m 28sRunning iteration 181/750... Est. remaining: 5m 19sRunning iteration 191/750... Est. remaining: 5m 11sRunning iteration 201/750... Est. remaining: 5m 3sbest_combination: {'lookbacks': [155, 167, 171], 'score': np.float64(1.1441535225937387), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,096,040,310
Annual Return: 49.42%
Sharpe Ratio: 1.60216
Sortino Ratio: 1.571
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 1.397
Lookback periods: [152, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,676,121,662
Annual Return: 48.83%
Sharpe Ratio: 1.60082
Sortino Ratio: 1.566
Max Drawdown: -55.0%
Avg Drawdown: -10.4%
Normalized Score: 1.560
Lookback periods: [157, 160, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/750... Est. remaining: 5m 3sRunning iteration 221/750... Est. remaining: 4m 56sRunning iteration 231/750... Est. remaining: 4m 49sRunning iteration 241/750... Est. remaining: 4m 42sRunning iteration 251/750... Est. remaining: 4m 35sRunning iteration 261/750... Est. remaining: 4m 28sRunning iteration 271/750... Est. remaining: 4m 21sRunning iteration 281/750... Est. remaining: 4m 15sRunning iteration 291/750... Est. remaining: 4m 8sRunning iteration 301/750... Est. remaining: 4m 2sbest_combination: {'lookbacks': [157, 160, 168], 'score': np.float64(1.560108449904002), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 56sRunning iteration 321/750... Est. remaining: 3m 49sRunning iteration 331/750... Est. remaining: 3m 43sRunning iteration 341/750... Est. remaining: 3m 37sRunning iteration 351/750... Est. remaining: 3m 32sRunning iteration 361/750... Est. remaining: 3m 26sRunning iteration 371/750... Est. remaining: 3m 20sRunning iteration 381/750... Est. remaining: 3m 14sRunning iteration 391/750... Est. remaining: 3m 8sRunning iteration 401/750... Est. remaining: 3m 3sbest_combination: {'lookbacks': [157, 160, 168], 'score': np.float64(1.560108449904002), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 57sRunning iteration 421/750... Est. remaining: 2m 52sRunning iteration 431/750... Est. remaining: 2m 46sRunning iteration 441/750... Est. remaining: 2m 41sRunning iteration 451/750... Est. remaining: 2m 35sRunning iteration 461/750... Est. remaining: 2m 30sRunning iteration 471/750... Est. remaining: 2m 24sRunning iteration 481/750... Est. remaining: 2m 19sRunning iteration 491/750... Est. remaining: 2m 14sRunning iteration 501/750... Est. remaining: 2m 8sbest_combination: {'lookbacks': [157, 160, 168], 'score': np.float64(1.560108449904002), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 3sRunning iteration 521/750... Est. remaining: 1m 58sRunning iteration 531/750... Est. remaining: 1m 52sRunning iteration 541/750... Est. remaining: 1m 47sRunning iteration 551/750... Est. remaining: 1m 42sRunning iteration 561/750... Est. remaining: 1m 37sRunning iteration 571/750... Est. remaining: 1m 31sRunning iteration 581/750... Est. remaining: 1m 26sRunning iteration 591/750... Est. remaining: 1m 21sRunning iteration 601/750... Est. remaining: 1m 16sbest_combination: {'lookbacks': [157, 160, 168], 'score': np.float64(1.560108449904002), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 0sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [157, 160, 168], 'score': np.float64(1.560108449904002), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 1.56
best_combination: {'lookbacks': [157, 160, 168], 'score': np.float64(1.560108449904002), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [157, 160, 168] (score: 1.5601)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [157, 160, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 113 selections (27.2%)
3. naz100_pi: 76 selections (18.3%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,676,121,661.68
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Sun Aug 24 00:42:16 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,465,284,092
Annual Return: 40.95%
Sharpe Ratio: 1.39507
Sortino Ratio: 1.310
Max Drawdown: -55.0%
Avg Drawdown: -11.3%
Normalized Score: -0.496
Lookback periods: [51, 127, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 10m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,094,380,987
Annual Return: 45.19%
Sharpe Ratio: 1.50989
Sortino Ratio: 1.466
Max Drawdown: -58.7%
Avg Drawdown: -12.1%
Normalized Score: -0.159
Lookback periods: [111, 130, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 9m 9sRunning iteration 31/750... Est. remaining: 7m 59sRunning iteration 41/750... Est. remaining: 7m 23sRunning iteration 51/750... Est. remaining: 6m 58sRunning iteration 61/750... Est. remaining: 6m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,341,804,334
Annual Return: 46.31%
Sharpe Ratio: 1.49962
Sortino Ratio: 1.459
Max Drawdown: -59.0%
Avg Drawdown: -12.1%
Normalized Score: -0.139
Lookback periods: [179, 181, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/750... Est. remaining: 6m 36sRunning iteration 81/750... Est. remaining: 6m 24sRunning iteration 91/750... Est. remaining: 6m 12sRunning iteration 101/750... Est. remaining: 6m 1sbest_combination: {'lookbacks': [179, 181, 194], 'score': np.float64(-0.13916114503952562), 'visits': 1}
Running iteration 111/750... Est. remaining: 5m 52sRunning iteration 121/750... Est. remaining: 5m 43sRunning iteration 131/750... Est. remaining: 5m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,033,714,174
Annual Return: 46.05%
Sharpe Ratio: 1.49437
Sortino Ratio: 1.458
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: -0.080
Lookback periods: [170, 189, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/750... Est. remaining: 5m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,656,349,560
Annual Return: 46.55%
Sharpe Ratio: 1.50772
Sortino Ratio: 1.468
Max Drawdown: -59.9%
Avg Drawdown: -11.3%
Normalized Score: -0.016
Lookback periods: [176, 200, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/750... Est. remaining: 5m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,867,459,549
Annual Return: 41.94%
Sharpe Ratio: 1.47518
Sortino Ratio: 1.379
Max Drawdown: -52.1%
Avg Drawdown: -9.9%
Normalized Score: 0.080
Lookback periods: [52, 54, 86] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/750... Est. remaining: 5m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,049,338,469
Annual Return: 42.32%
Sharpe Ratio: 1.52822
Sortino Ratio: 1.430
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 0.999
Lookback periods: [50, 50, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/750... Est. remaining: 5m 22sRunning iteration 181/750... Est. remaining: 5m 15sRunning iteration 191/750... Est. remaining: 5m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,682,377,903
Annual Return: 43.43%
Sharpe Ratio: 1.54975
Sortino Ratio: 1.457
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.045
Lookback periods: [50, 54, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/750... Est. remaining: 5m 3sbest_combination: {'lookbacks': [50, 54, 88], 'score': np.float64(1.0446614244333503), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,641,242,461
Annual Return: 44.70%
Sharpe Ratio: 1.59965
Sortino Ratio: 1.512
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.298
Lookback periods: [50, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/750... Est. remaining: 4m 52sRunning iteration 231/750... Est. remaining: 4m 45sRunning iteration 241/750... Est. remaining: 4m 38sRunning iteration 251/750... Est. remaining: 4m 31sRunning iteration 261/750... Est. remaining: 4m 25sRunning iteration 271/750... Est. remaining: 4m 19sRunning iteration 281/750... Est. remaining: 4m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,090,622,705
Annual Return: 44.01%
Sharpe Ratio: 1.57961
Sortino Ratio: 1.488
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.357
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 291/750... Est. remaining: 4m 8sRunning iteration 301/750... Est. remaining: 4m 2sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.3572844035971934), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 55sRunning iteration 321/750... Est. remaining: 3m 49sRunning iteration 331/750... Est. remaining: 3m 43sRunning iteration 341/750... Est. remaining: 3m 37sRunning iteration 351/750... Est. remaining: 3m 31sRunning iteration 361/750... Est. remaining: 3m 25sRunning iteration 371/750... Est. remaining: 3m 20sRunning iteration 381/750... Est. remaining: 3m 14sRunning iteration 391/750... Est. remaining: 3m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,031,844,594
Annual Return: 43.93%
Sharpe Ratio: 1.59905
Sortino Ratio: 1.495
Max Drawdown: -34.7%
Avg Drawdown: -8.1%
Normalized Score: 1.365
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/750... Est. remaining: 3m 4sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.3645957481804767), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 58sRunning iteration 421/750... Est. remaining: 2m 53sRunning iteration 431/750... Est. remaining: 2m 47sRunning iteration 441/750... Est. remaining: 2m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.498
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/750... Est. remaining: 2m 37sRunning iteration 461/750... Est. remaining: 2m 31sRunning iteration 471/750... Est. remaining: 2m 26sRunning iteration 481/750... Est. remaining: 2m 20sRunning iteration 491/750... Est. remaining: 2m 15sRunning iteration 501/750... Est. remaining: 2m 10sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.4978290696872716), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 4sRunning iteration 521/750... Est. remaining: 1m 59sRunning iteration 531/750... Est. remaining: 1m 53sRunning iteration 541/750... Est. remaining: 1m 48sRunning iteration 551/750... Est. remaining: 1m 43sRunning iteration 561/750... Est. remaining: 1m 38sRunning iteration 571/750... Est. remaining: 1m 32sRunning iteration 581/750... Est. remaining: 1m 27sRunning iteration 591/750... Est. remaining: 1m 22sRunning iteration 601/750... Est. remaining: 1m 17sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.4978290696872716), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 1sRunning iteration 641/750... Est. remaining: 0m 56sRunning iteration 651/750... Est. remaining: 0m 51sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.4978290696872716), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 1.50
best_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.4978290696872716), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 51, 95] (score: 1.4978)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 51, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 99 selections (23.8%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,683,002,581.49
Average Annualized Gain: 44.7%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Sun Aug 24 00:48:43 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,657,965,704
Annual Return: 41.45%
Sharpe Ratio: 1.35222
Sortino Ratio: 1.313
Max Drawdown: -65.0%
Avg Drawdown: -13.4%
Normalized Score: -0.916
Lookback periods: [128, 182, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,594,792,572
Annual Return: 47.20%
Sharpe Ratio: 1.53295
Sortino Ratio: 1.506
Max Drawdown: -61.4%
Avg Drawdown: -11.7%
Normalized Score: 0.219
Lookback periods: [155, 176, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 12m 2sRunning iteration 21/750... Est. remaining: 8m 58sRunning iteration 31/750... Est. remaining: 7m 53sRunning iteration 41/750... Est. remaining: 7m 16sRunning iteration 51/750... Est. remaining: 6m 53sRunning iteration 61/750... Est. remaining: 6m 36sRunning iteration 71/750... Est. remaining: 6m 23sRunning iteration 81/750... Est. remaining: 6m 11sRunning iteration 91/750... Est. remaining: 6m 1sRunning iteration 101/750... Est. remaining: 5m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,913,144,683
Annual Return: 47.40%
Sharpe Ratio: 1.54110
Sortino Ratio: 1.503
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.364
Lookback periods: [147, 188, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [147, 188, 194], 'score': np.float64(0.36443768526674974), 'visits': 1}
Running iteration 111/750... Est. remaining: 5m 49sRunning iteration 121/750... Est. remaining: 5m 41sRunning iteration 131/750... Est. remaining: 5m 33sRunning iteration 141/750... Est. remaining: 5m 26sRunning iteration 151/750... Est. remaining: 5m 19sRunning iteration 161/750... Est. remaining: 5m 12sRunning iteration 171/750... Est. remaining: 5m 5sRunning iteration 181/750... Est. remaining: 4m 59sRunning iteration 191/750... Est. remaining: 4m 53sRunning iteration 201/750... Est. remaining: 4m 47sbest_combination: {'lookbacks': [147, 188, 194], 'score': np.float64(0.36443768526674974), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 40sRunning iteration 221/750... Est. remaining: 4m 34sRunning iteration 231/750... Est. remaining: 4m 29sRunning iteration 241/750... Est. remaining: 4m 23sRunning iteration 251/750... Est. remaining: 4m 17sRunning iteration 261/750... Est. remaining: 4m 12sRunning iteration 271/750... Est. remaining: 4m 6sRunning iteration 281/750... Est. remaining: 4m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,994,413,137
Annual Return: 48.52%
Sharpe Ratio: 1.58664
Sortino Ratio: 1.550
Max Drawdown: -57.2%
Avg Drawdown: -11.7%
Normalized Score: 0.499
Lookback periods: [136, 157, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 291/750... Est. remaining: 3m 56sRunning iteration 301/750... Est. remaining: 3m 51sbest_combination: {'lookbacks': [136, 157, 175], 'score': np.float64(0.4988565013053471), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 46sRunning iteration 321/750... Est. remaining: 3m 40sRunning iteration 331/750... Est. remaining: 3m 35sRunning iteration 341/750... Est. remaining: 3m 29sRunning iteration 351/750... Est. remaining: 3m 23sRunning iteration 361/750... Est. remaining: 3m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,181,585,276
Annual Return: 40.07%
Sharpe Ratio: 1.45117
Sortino Ratio: 1.354
Max Drawdown: -36.6%
Avg Drawdown: -10.0%
Normalized Score: 0.662
Lookback periods: [52, 62, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 371/750... Est. remaining: 3m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,410,998,071
Annual Return: 40.79%
Sharpe Ratio: 1.47147
Sortino Ratio: 1.374
Max Drawdown: -34.7%
Avg Drawdown: -9.7%
Normalized Score: 0.866
Lookback periods: [50, 61, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,008,202,014
Annual Return: 39.43%
Sharpe Ratio: 1.44523
Sortino Ratio: 1.345
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 0.895
Lookback periods: [50, 61, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,162,343,396
Annual Return: 40.01%
Sharpe Ratio: 1.47642
Sortino Ratio: 1.367
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 0.986
Lookback periods: [50, 58, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/750... Est. remaining: 3m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,947,652,633
Annual Return: 42.11%
Sharpe Ratio: 1.50704
Sortino Ratio: 1.417
Max Drawdown: -37.2%
Avg Drawdown: -9.2%
Normalized Score: 1.029
Lookback periods: [51, 52, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/750... Est. remaining: 3m 7sRunning iteration 401/750... Est. remaining: 3m 2sbest_combination: {'lookbacks': [51, 52, 90], 'score': np.float64(1.028667920308769), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,997,435,493
Annual Return: 45.09%
Sharpe Ratio: 1.59229
Sortino Ratio: 1.501
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.459
Lookback periods: [51, 54, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/750... Est. remaining: 2m 57sRunning iteration 421/750... Est. remaining: 2m 51sRunning iteration 431/750... Est. remaining: 2m 46sRunning iteration 441/750... Est. remaining: 2m 40sRunning iteration 451/750... Est. remaining: 2m 35sRunning iteration 461/750... Est. remaining: 2m 29sRunning iteration 471/750... Est. remaining: 2m 24sRunning iteration 481/750... Est. remaining: 2m 19sRunning iteration 491/750... Est. remaining: 2m 13sRunning iteration 501/750... Est. remaining: 2m 8sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.459354967989722), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 3sRunning iteration 521/750... Est. remaining: 1m 57sRunning iteration 531/750... Est. remaining: 1m 52sRunning iteration 541/750... Est. remaining: 1m 47sRunning iteration 551/750... Est. remaining: 1m 41sRunning iteration 561/750... Est. remaining: 1m 36sRunning iteration 571/750... Est. remaining: 1m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,864,014,625
Annual Return: 44.94%
Sharpe Ratio: 1.60063
Sortino Ratio: 1.506
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.470
Lookback periods: [50, 54, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/750... Est. remaining: 1m 26sRunning iteration 591/750... Est. remaining: 1m 21sRunning iteration 601/750... Est. remaining: 1m 16sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.469611929555286), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 5sRunning iteration 631/750... Est. remaining: 1m 0sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.469611929555286), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 1.47
best_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.469611929555286), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 54, 83] (score: 1.4696)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 54, 83] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,864,014,625.05
Average Annualized Gain: 44.9%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Sun Aug 24 00:55:08 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $274,449,408
Annual Return: 34.30%
Sharpe Ratio: 1.17829
Sortino Ratio: 1.100
Max Drawdown: -58.9%
Avg Drawdown: -15.2%
Normalized Score: -2.128
Lookback periods: [91, 120, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,028,449,087
Annual Return: 46.05%
Sharpe Ratio: 1.49801
Sortino Ratio: 1.464
Max Drawdown: -59.5%
Avg Drawdown: -11.8%
Normalized Score: 0.055
Lookback periods: [157, 181, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,665,903,941
Annual Return: 46.55%
Sharpe Ratio: 1.53956
Sortino Ratio: 1.497
Max Drawdown: -58.5%
Avg Drawdown: -12.3%
Normalized Score: 0.160
Lookback periods: [140, 147, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 13m 45sRunning iteration 21/750... Est. remaining: 9m 50sRunning iteration 31/750... Est. remaining: 8m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,706,926,520
Annual Return: 47.27%
Sharpe Ratio: 1.52894
Sortino Ratio: 1.496
Max Drawdown: -60.2%
Avg Drawdown: -11.4%
Normalized Score: 0.255
Lookback periods: [150, 158, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 8m 1sRunning iteration 51/750... Est. remaining: 7m 29sRunning iteration 61/750... Est. remaining: 7m 6sRunning iteration 71/750... Est. remaining: 6m 46sRunning iteration 81/750... Est. remaining: 6m 30sRunning iteration 91/750... Est. remaining: 6m 16sRunning iteration 101/750... Est. remaining: 6m 4sbest_combination: {'lookbacks': [150, 158, 187], 'score': np.float64(0.25500333810000775), 'visits': 1}
Running iteration 111/750... Est. remaining: 5m 54sRunning iteration 121/750... Est. remaining: 5m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,417,366,894
Annual Return: 47.08%
Sharpe Ratio: 1.52728
Sortino Ratio: 1.503
Max Drawdown: -59.0%
Avg Drawdown: -10.6%
Normalized Score: 0.389
Lookback periods: [155, 171, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/750... Est. remaining: 5m 42sRunning iteration 141/750... Est. remaining: 5m 33sRunning iteration 151/750... Est. remaining: 5m 25sRunning iteration 161/750... Est. remaining: 5m 19sRunning iteration 171/750... Est. remaining: 5m 12sRunning iteration 181/750... Est. remaining: 5m 5sRunning iteration 191/750... Est. remaining: 4m 58sRunning iteration 201/750... Est. remaining: 4m 52sbest_combination: {'lookbacks': [155, 171, 173], 'score': np.float64(0.3888291908294496), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 45sRunning iteration 221/750... Est. remaining: 4m 39sRunning iteration 231/750... Est. remaining: 4m 33sRunning iteration 241/750... Est. remaining: 4m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,963,382,115
Annual Return: 47.43%
Sharpe Ratio: 1.53910
Sortino Ratio: 1.506
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 0.413
Lookback periods: [154, 155, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/750... Est. remaining: 4m 23sRunning iteration 261/750... Est. remaining: 4m 18sRunning iteration 271/750... Est. remaining: 4m 12sRunning iteration 281/750... Est. remaining: 4m 6sRunning iteration 291/750... Est. remaining: 4m 1sRunning iteration 301/750... Est. remaining: 3m 55sbest_combination: {'lookbacks': [154, 155, 161], 'score': np.float64(0.41251278613144027), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 49sRunning iteration 321/750... Est. remaining: 3m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,717,411,316
Annual Return: 47.28%
Sharpe Ratio: 1.53872
Sortino Ratio: 1.512
Max Drawdown: -58.2%
Avg Drawdown: -10.8%
Normalized Score: 0.423
Lookback periods: [156, 162, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 331/750... Est. remaining: 3m 39sRunning iteration 341/750... Est. remaining: 3m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,084,135,014
Annual Return: 48.06%
Sharpe Ratio: 1.56044
Sortino Ratio: 1.523
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.458
Lookback periods: [181, 186, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 351/750... Est. remaining: 3m 30sRunning iteration 361/750... Est. remaining: 3m 24sRunning iteration 371/750... Est. remaining: 3m 18sRunning iteration 381/750... Est. remaining: 3m 13sRunning iteration 391/750... Est. remaining: 3m 7sRunning iteration 401/750... Est. remaining: 3m 2sbest_combination: {'lookbacks': [181, 186, 188], 'score': np.float64(0.45842973382286345), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 56sRunning iteration 421/750... Est. remaining: 2m 51sRunning iteration 431/750... Est. remaining: 2m 46sRunning iteration 441/750... Est. remaining: 2m 40sRunning iteration 451/750... Est. remaining: 2m 35sRunning iteration 461/750... Est. remaining: 2m 30sRunning iteration 471/750... Est. remaining: 2m 24sRunning iteration 481/750... Est. remaining: 2m 19sRunning iteration 491/750... Est. remaining: 2m 14sRunning iteration 501/750... Est. remaining: 2m 8sbest_combination: {'lookbacks': [181, 186, 188], 'score': np.float64(0.45842973382286345), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,753,698,422
Annual Return: 48.87%
Sharpe Ratio: 1.57225
Sortino Ratio: 1.540
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.495
Lookback periods: [181, 187, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/750... Est. remaining: 2m 4sRunning iteration 521/750... Est. remaining: 1m 58sRunning iteration 531/750... Est. remaining: 1m 53sRunning iteration 541/750... Est. remaining: 1m 48sRunning iteration 551/750... Est. remaining: 1m 42sRunning iteration 561/750... Est. remaining: 1m 37sRunning iteration 571/750... Est. remaining: 1m 32sRunning iteration 581/750... Est. remaining: 1m 27sRunning iteration 591/750... Est. remaining: 1m 21sRunning iteration 601/750... Est. remaining: 1m 16sbest_combination: {'lookbacks': [181, 187, 188], 'score': np.float64(0.4948586992277756), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 1sRunning iteration 641/750... Est. remaining: 0m 56sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [181, 187, 188], 'score': np.float64(0.4948586992277756), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 0.49
best_combination: {'lookbacks': [181, 187, 188], 'score': np.float64(0.4948586992277756), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [181, 187, 188] (score: 0.4949)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [181, 187, 188] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 125 selections (30.0%)
2. sp500_hma: 97 selections (23.3%)
3. naz100_pine: 84 selections (20.2%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,753,698,422.14
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Sun Aug 24 01:01:35 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $873,868,524
Annual Return: 38.86%
Sharpe Ratio: 1.30725
Sortino Ratio: 1.243
Max Drawdown: -69.2%
Avg Drawdown: -13.7%
Normalized Score: -1.219
Lookback periods: [91, 170, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,261,692,729
Annual Return: 45.35%
Sharpe Ratio: 1.49331
Sortino Ratio: 1.445
Max Drawdown: -59.2%
Avg Drawdown: -13.1%
Normalized Score: 0.046
Lookback periods: [148, 149, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,450,519,660
Annual Return: 47.10%
Sharpe Ratio: 1.52752
Sortino Ratio: 1.503
Max Drawdown: -61.4%
Avg Drawdown: -11.8%
Normalized Score: 0.327
Lookback periods: [155, 177, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 13m 37sRunning iteration 21/750... Est. remaining: 9m 47sRunning iteration 31/750... Est. remaining: 8m 19sRunning iteration 41/750... Est. remaining: 7m 36sRunning iteration 51/750... Est. remaining: 7m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,477,282,987
Annual Return: 47.73%
Sharpe Ratio: 1.55944
Sortino Ratio: 1.521
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.599
Lookback periods: [138, 158, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/750... Est. remaining: 7m 0sRunning iteration 71/750... Est. remaining: 6m 42sRunning iteration 81/750... Est. remaining: 6m 27sRunning iteration 91/750... Est. remaining: 6m 14sRunning iteration 101/750... Est. remaining: 6m 2sbest_combination: {'lookbacks': [138, 158, 170], 'score': np.float64(0.5985194653322918), 'visits': 1}
Running iteration 111/750... Est. remaining: 5m 52sRunning iteration 121/750... Est. remaining: 5m 42sRunning iteration 131/750... Est. remaining: 5m 34sRunning iteration 141/750... Est. remaining: 5m 26sRunning iteration 151/750... Est. remaining: 5m 19sRunning iteration 161/750... Est. remaining: 5m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,301,890,437
Annual Return: 48.67%
Sharpe Ratio: 1.59811
Sortino Ratio: 1.561
Max Drawdown: -57.2%
Avg Drawdown: -10.5%
Normalized Score: 0.873
Lookback periods: [139, 155, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/750... Est. remaining: 5m 8sRunning iteration 181/750... Est. remaining: 5m 1sRunning iteration 191/750... Est. remaining: 4m 55sRunning iteration 201/750... Est. remaining: 4m 48sbest_combination: {'lookbacks': [139, 155, 158], 'score': np.float64(0.8726503029748279), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 42sRunning iteration 221/750... Est. remaining: 4m 35sRunning iteration 231/750... Est. remaining: 4m 29sRunning iteration 241/750... Est. remaining: 4m 23sRunning iteration 251/750... Est. remaining: 4m 17sRunning iteration 261/750... Est. remaining: 4m 11sRunning iteration 271/750... Est. remaining: 4m 6sRunning iteration 281/750... Est. remaining: 4m 0sRunning iteration 291/750... Est. remaining: 3m 55sRunning iteration 301/750... Est. remaining: 3m 49sbest_combination: {'lookbacks': [139, 155, 158], 'score': np.float64(0.8726503029748279), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 44sRunning iteration 321/750... Est. remaining: 3m 38sRunning iteration 331/750... Est. remaining: 3m 33sRunning iteration 341/750... Est. remaining: 3m 28sRunning iteration 351/750... Est. remaining: 3m 23sRunning iteration 361/750... Est. remaining: 3m 17sRunning iteration 371/750... Est. remaining: 3m 12sRunning iteration 381/750... Est. remaining: 3m 7sRunning iteration 391/750... Est. remaining: 3m 2sRunning iteration 401/750... Est. remaining: 2m 56sbest_combination: {'lookbacks': [139, 155, 158], 'score': np.float64(0.8726503029748279), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 51sRunning iteration 421/750... Est. remaining: 2m 46sRunning iteration 431/750... Est. remaining: 2m 41sRunning iteration 441/750... Est. remaining: 2m 36sRunning iteration 451/750... Est. remaining: 2m 31sRunning iteration 461/750... Est. remaining: 2m 26sRunning iteration 471/750... Est. remaining: 2m 21sRunning iteration 481/750... Est. remaining: 2m 15sRunning iteration 491/750... Est. remaining: 2m 10sRunning iteration 501/750... Est. remaining: 2m 5sbest_combination: {'lookbacks': [139, 155, 158], 'score': np.float64(0.8726503029748279), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 0sRunning iteration 521/750... Est. remaining: 1m 55sRunning iteration 531/750... Est. remaining: 1m 50sRunning iteration 541/750... Est. remaining: 1m 45sRunning iteration 551/750... Est. remaining: 1m 40sRunning iteration 561/750... Est. remaining: 1m 35sRunning iteration 571/750... Est. remaining: 1m 30sRunning iteration 581/750... Est. remaining: 1m 24sRunning iteration 591/750... Est. remaining: 1m 19sRunning iteration 601/750... Est. remaining: 1m 14sbest_combination: {'lookbacks': [139, 155, 158], 'score': np.float64(0.8726503029748279), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 9sRunning iteration 621/750... Est. remaining: 1m 4sRunning iteration 631/750... Est. remaining: 0m 59sRunning iteration 641/750... Est. remaining: 0m 54sRunning iteration 651/750... Est. remaining: 0m 49sRunning iteration 661/750... Est. remaining: 0m 44sRunning iteration 671/750... Est. remaining: 0m 39sRunning iteration 681/750... Est. remaining: 0m 34sRunning iteration 691/750... Est. remaining: 0m 29sRunning iteration 701/750... Est. remaining: 0m 24sbest_combination: {'lookbacks': [139, 155, 158], 'score': np.float64(0.8726503029748279), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 19sRunning iteration 721/750... Est. remaining: 0m 14sRunning iteration 731/750... Est. remaining: 0m 9sRunning iteration 741/750... Est. remaining: 0m 4s
Monte Carlo simulation completed in 6.2 minutes
Best normalized score: 0.87
best_combination: {'lookbacks': [139, 155, 158], 'score': np.float64(0.8726503029748279), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [139, 155, 158] (score: 0.8727)

Monte Carlo simulation completed in 6.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 155, 158] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 111 selections (26.7%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,301,890,437.26
Average Annualized Gain: 48.7%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Sun Aug 24 01:07:55 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $998,090,724
Annual Return: 39.39%
Sharpe Ratio: 1.35136
Sortino Ratio: 1.278
Max Drawdown: -52.3%
Avg Drawdown: -12.1%
Normalized Score: -0.283
Lookback periods: [78, 140, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,164,811,118
Annual Return: 42.54%
Sharpe Ratio: 1.40968
Sortino Ratio: 1.358
Max Drawdown: -59.0%
Avg Drawdown: -12.3%
Normalized Score: -0.268
Lookback periods: [141, 169, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,207,170,293
Annual Return: 45.30%
Sharpe Ratio: 1.49921
Sortino Ratio: 1.456
Max Drawdown: -55.0%
Avg Drawdown: -12.4%
Normalized Score: 0.236
Lookback periods: [134, 134, 140] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 13m 29sRunning iteration 21/750... Est. remaining: 9m 33sRunning iteration 31/750... Est. remaining: 8m 10sRunning iteration 41/750... Est. remaining: 7m 26sRunning iteration 51/750... Est. remaining: 6m 58sRunning iteration 61/750... Est. remaining: 6m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,832,161,646
Annual Return: 47.35%
Sharpe Ratio: 1.53949
Sortino Ratio: 1.507
Max Drawdown: -61.0%
Avg Drawdown: -11.8%
Normalized Score: 0.264
Lookback periods: [154, 168, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/750... Est. remaining: 6m 36sRunning iteration 81/750... Est. remaining: 6m 23sRunning iteration 91/750... Est. remaining: 6m 11sRunning iteration 101/750... Est. remaining: 6m 1sbest_combination: {'lookbacks': [154, 168, 178], 'score': np.float64(0.2641065010360261), 'visits': 1}
Running iteration 111/750... Est. remaining: 5m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,243,338,936
Annual Return: 46.23%
Sharpe Ratio: 1.52334
Sortino Ratio: 1.477
Max Drawdown: -56.8%
Avg Drawdown: -11.7%
Normalized Score: 0.337
Lookback periods: [141, 154, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/750... Est. remaining: 5m 49sRunning iteration 131/750... Est. remaining: 5m 41sRunning iteration 141/750... Est. remaining: 5m 33sRunning iteration 151/750... Est. remaining: 5m 25sRunning iteration 161/750... Est. remaining: 5m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,347,980,004
Annual Return: 40.61%
Sharpe Ratio: 1.46824
Sortino Ratio: 1.367
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 1.041
Lookback periods: [50, 59, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,633,555,450
Annual Return: 41.39%
Sharpe Ratio: 1.49187
Sortino Ratio: 1.398
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 1.139
Lookback periods: [50, 64, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/750... Est. remaining: 5m 18sRunning iteration 181/750... Est. remaining: 5m 11sRunning iteration 191/750... Est. remaining: 5m 4sRunning iteration 201/750... Est. remaining: 4m 57sbest_combination: {'lookbacks': [50, 64, 89], 'score': np.float64(1.1389375627530778), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 51sRunning iteration 221/750... Est. remaining: 4m 44sRunning iteration 231/750... Est. remaining: 4m 38sRunning iteration 241/750... Est. remaining: 4m 32sRunning iteration 251/750... Est. remaining: 4m 25sRunning iteration 261/750... Est. remaining: 4m 19sRunning iteration 271/750... Est. remaining: 4m 13sRunning iteration 281/750... Est. remaining: 4m 7sRunning iteration 291/750... Est. remaining: 4m 1sRunning iteration 301/750... Est. remaining: 3m 56sbest_combination: {'lookbacks': [50, 64, 89], 'score': np.float64(1.1389375627530778), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 50sRunning iteration 321/750... Est. remaining: 3m 44sRunning iteration 331/750... Est. remaining: 3m 38sRunning iteration 341/750... Est. remaining: 3m 33sRunning iteration 351/750... Est. remaining: 3m 27sRunning iteration 361/750... Est. remaining: 3m 22sRunning iteration 371/750... Est. remaining: 3m 16sRunning iteration 381/750... Est. remaining: 3m 11sRunning iteration 391/750... Est. remaining: 3m 5sRunning iteration 401/750... Est. remaining: 3m 0sbest_combination: {'lookbacks': [50, 64, 89], 'score': np.float64(1.1389375627530778), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 54sRunning iteration 421/750... Est. remaining: 2m 49sRunning iteration 431/750... Est. remaining: 2m 44sRunning iteration 441/750... Est. remaining: 2m 38sRunning iteration 451/750... Est. remaining: 2m 33sRunning iteration 461/750... Est. remaining: 2m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,734,052,467
Annual Return: 41.63%
Sharpe Ratio: 1.49710
Sortino Ratio: 1.413
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.211
Lookback periods: [50, 63, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/750... Est. remaining: 2m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,035,533,687
Annual Return: 42.29%
Sharpe Ratio: 1.53157
Sortino Ratio: 1.421
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 1.230
Lookback periods: [50, 57, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/750... Est. remaining: 2m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,205,286,346
Annual Return: 45.30%
Sharpe Ratio: 1.62640
Sortino Ratio: 1.543
Max Drawdown: -36.6%
Avg Drawdown: -8.6%
Normalized Score: 1.663
Lookback periods: [52, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/750... Est. remaining: 2m 14sRunning iteration 501/750... Est. remaining: 2m 8sbest_combination: {'lookbacks': [52, 52, 96], 'score': np.float64(1.6631135573841642), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 3sRunning iteration 521/750... Est. remaining: 1m 58sRunning iteration 531/750... Est. remaining: 1m 53sRunning iteration 541/750... Est. remaining: 1m 47sRunning iteration 551/750... Est. remaining: 1m 42sRunning iteration 561/750... Est. remaining: 1m 37sRunning iteration 571/750... Est. remaining: 1m 32sRunning iteration 581/750... Est. remaining: 1m 26sRunning iteration 591/750... Est. remaining: 1m 21sRunning iteration 601/750... Est. remaining: 1m 16sbest_combination: {'lookbacks': [52, 52, 96], 'score': np.float64(1.6631135573841642), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,912,007
Annual Return: 45.27%
Sharpe Ratio: 1.61355
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.696
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 1sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6963821765548683), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.975
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 1.98
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9752905943267762), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 52, 95] (score: 1.9753)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Sun Aug 24 01:14:22 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,364,247,884
Annual Return: 42.90%
Sharpe Ratio: 1.42200
Sortino Ratio: 1.377
Max Drawdown: -67.5%
Avg Drawdown: -12.0%
Normalized Score: -0.734
Lookback periods: [110, 161, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $954,596,499
Annual Return: 39.21%
Sharpe Ratio: 1.42237
Sortino Ratio: 1.318
Max Drawdown: -38.8%
Avg Drawdown: -10.0%
Normalized Score: 0.413
Lookback periods: [50, 59, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 11m 56sRunning iteration 21/750... Est. remaining: 8m 51sRunning iteration 31/750... Est. remaining: 7m 46sRunning iteration 41/750... Est. remaining: 7m 8sRunning iteration 51/750... Est. remaining: 6m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $954,553,236
Annual Return: 39.21%
Sharpe Ratio: 1.40281
Sortino Ratio: 1.304
Max Drawdown: -34.7%
Avg Drawdown: -9.9%
Normalized Score: 0.539
Lookback periods: [51, 60, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/750... Est. remaining: 6m 42sRunning iteration 71/750... Est. remaining: 6m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,811,846,481
Annual Return: 41.81%
Sharpe Ratio: 1.50330
Sortino Ratio: 1.401
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.968
Lookback periods: [50, 55, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/750... Est. remaining: 6m 24sRunning iteration 91/750... Est. remaining: 6m 13sRunning iteration 101/750... Est. remaining: 6m 2sbest_combination: {'lookbacks': [50, 55, 85], 'score': np.float64(0.967860946691548), 'visits': 1}
Running iteration 111/750... Est. remaining: 5m 52sRunning iteration 121/750... Est. remaining: 5m 42sRunning iteration 131/750... Est. remaining: 5m 33sRunning iteration 141/750... Est. remaining: 5m 25sRunning iteration 151/750... Est. remaining: 5m 17sRunning iteration 161/750... Est. remaining: 5m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,035,533,687
Annual Return: 42.29%
Sharpe Ratio: 1.53157
Sortino Ratio: 1.421
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 1.023
Lookback periods: [50, 57, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/750... Est. remaining: 5m 7sRunning iteration 181/750... Est. remaining: 5m 0sRunning iteration 191/750... Est. remaining: 4m 53sRunning iteration 201/750... Est. remaining: 4m 47sbest_combination: {'lookbacks': [50, 57, 89], 'score': np.float64(1.0225520573466422), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 41sRunning iteration 221/750... Est. remaining: 4m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,613,763,997
Annual Return: 44.66%
Sharpe Ratio: 1.61575
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.580
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/750... Est. remaining: 4m 31sRunning iteration 241/750... Est. remaining: 4m 25sRunning iteration 251/750... Est. remaining: 4m 20sRunning iteration 261/750... Est. remaining: 4m 14sRunning iteration 271/750... Est. remaining: 4m 8sRunning iteration 281/750... Est. remaining: 4m 2sRunning iteration 291/750... Est. remaining: 3m 56sRunning iteration 301/750... Est. remaining: 3m 50sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.579894861948968), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 45sRunning iteration 321/750... Est. remaining: 3m 39sRunning iteration 331/750... Est. remaining: 3m 33sRunning iteration 341/750... Est. remaining: 3m 28sRunning iteration 351/750... Est. remaining: 3m 22sRunning iteration 361/750... Est. remaining: 3m 17sRunning iteration 371/750... Est. remaining: 3m 11sRunning iteration 381/750... Est. remaining: 3m 6sRunning iteration 391/750... Est. remaining: 3m 1sRunning iteration 401/750... Est. remaining: 2m 55sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.579894861948968), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 50sRunning iteration 421/750... Est. remaining: 2m 45sRunning iteration 431/750... Est. remaining: 2m 40sRunning iteration 441/750... Est. remaining: 2m 35sRunning iteration 451/750... Est. remaining: 2m 30sRunning iteration 461/750... Est. remaining: 2m 25sRunning iteration 471/750... Est. remaining: 2m 19sRunning iteration 481/750... Est. remaining: 2m 14sRunning iteration 491/750... Est. remaining: 2m 9sRunning iteration 501/750... Est. remaining: 2m 4sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.579894861948968), 'visits': 1}
Running iteration 511/750... Est. remaining: 1m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,830,490,959
Annual Return: 45.88%
Sharpe Ratio: 1.64903
Sortino Ratio: 1.560
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.767
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/750... Est. remaining: 1m 54sRunning iteration 531/750... Est. remaining: 1m 49sRunning iteration 541/750... Est. remaining: 1m 44sRunning iteration 551/750... Est. remaining: 1m 39sRunning iteration 561/750... Est. remaining: 1m 34sRunning iteration 571/750... Est. remaining: 1m 29sRunning iteration 581/750... Est. remaining: 1m 24sRunning iteration 591/750... Est. remaining: 1m 19sRunning iteration 601/750... Est. remaining: 1m 14sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.76698866796346), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 9sRunning iteration 621/750... Est. remaining: 1m 4sRunning iteration 631/750... Est. remaining: 0m 59sRunning iteration 641/750... Est. remaining: 0m 54sRunning iteration 651/750... Est. remaining: 0m 49sRunning iteration 661/750... Est. remaining: 0m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.885
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/750... Est. remaining: 0m 39sRunning iteration 681/750... Est. remaining: 0m 34sRunning iteration 691/750... Est. remaining: 0m 29sRunning iteration 701/750... Est. remaining: 0m 24sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.885297212318521), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 19sRunning iteration 721/750... Est. remaining: 0m 14sRunning iteration 731/750... Est. remaining: 0m 9sRunning iteration 741/750... Est. remaining: 0m 4s
Monte Carlo simulation completed in 6.2 minutes
Best normalized score: 1.89
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.885297212318521), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 52, 95] (score: 1.8853)

Monte Carlo simulation completed in 6.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Sun Aug 24 01:20:41 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $935,041,900
Annual Return: 39.13%
Sharpe Ratio: 1.37600
Sortino Ratio: 1.270
Max Drawdown: -66.1%
Avg Drawdown: -12.6%
Normalized Score: -0.469
Lookback periods: [58, 107, 139] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,206,652,841
Annual Return: 40.16%
Sharpe Ratio: 1.35692
Sortino Ratio: 1.282
Max Drawdown: -59.2%
Avg Drawdown: -12.3%
Normalized Score: -0.216
Lookback periods: [59, 160, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,496,349,897
Annual Return: 43.13%
Sharpe Ratio: 1.42569
Sortino Ratio: 1.387
Max Drawdown: -64.8%
Avg Drawdown: -13.0%
Normalized Score: -0.103
Lookback periods: [120, 147, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,228,604,057
Annual Return: 44.20%
Sharpe Ratio: 1.43481
Sortino Ratio: 1.409
Max Drawdown: -66.1%
Avg Drawdown: -12.3%
Normalized Score: 0.007
Lookback periods: [154, 175, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 15m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,454,124,610
Annual Return: 49.17%
Sharpe Ratio: 1.60429
Sortino Ratio: 1.569
Max Drawdown: -58.3%
Avg Drawdown: -11.5%
Normalized Score: 0.935
Lookback periods: [146, 159, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 11m 15sRunning iteration 31/750... Est. remaining: 9m 21sRunning iteration 41/750... Est. remaining: 8m 21sRunning iteration 51/750... Est. remaining: 7m 43sRunning iteration 61/750... Est. remaining: 7m 18sRunning iteration 71/750... Est. remaining: 6m 58sRunning iteration 81/750... Est. remaining: 6m 43sRunning iteration 91/750... Est. remaining: 6m 29sRunning iteration 101/750... Est. remaining: 6m 16sbest_combination: {'lookbacks': [146, 159, 189], 'score': np.float64(0.935278154227549), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 5sRunning iteration 121/750... Est. remaining: 5m 57sRunning iteration 131/750... Est. remaining: 5m 48sRunning iteration 141/750... Est. remaining: 5m 38sRunning iteration 151/750... Est. remaining: 67m 8sRunning iteration 161/750... Est. remaining: 62m 12sRunning iteration 171/750... Est. remaining: 111m 39sRunning iteration 181/750... Est. remaining: 104m 11sRunning iteration 191/750... Est. remaining: 315m 31sRunning iteration 201/750... Est. remaining: 294m 37sbest_combination: {'lookbacks': [146, 159, 189], 'score': np.float64(0.935278154227549), 'visits': 1}
Running iteration 211/750... Est. remaining: 419m 4sRunning iteration 221/750... Est. remaining: 603m 23sRunning iteration 231/750... Est. remaining: 566m 26sRunning iteration 241/750... Est. remaining: 595m 47sRunning iteration 251/750... Est. remaining: 599m 53sRunning iteration 261/750... Est. remaining: 565m 26sRunning iteration 271/750... Est. remaining: 688m 55sRunning iteration 281/750... Est. remaining: 650m 37sRunning iteration 291/750... Est. remaining: 636m 35sRunning iteration 301/750... Est. remaining: 602m 6sbest_combination: {'lookbacks': [146, 159, 189], 'score': np.float64(0.935278154227549), 'visits': 1}
Running iteration 311/750... Est. remaining: 656m 11sRunning iteration 321/750... Est. remaining: 621m 20sRunning iteration 331/750... Est. remaining: 628m 52sRunning iteration 341/750... Est. remaining: 631m 2sRunning iteration 351/750... Est. remaining: 598m 9sRunning iteration 361/750... Est. remaining: 577m 45sRunning iteration 371/750... Est. remaining: 547m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,233,539,211
Annual Return: 48.63%
Sharpe Ratio: 1.58432
Sortino Ratio: 1.545
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.056
Lookback periods: [157, 160, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/750... Est. remaining: 526m 32sRunning iteration 391/750... Est. remaining: 499m 15sRunning iteration 401/750... Est. remaining: 474m 46sbest_combination: {'lookbacks': [157, 160, 171], 'score': np.float64(1.0561329371892152), 'visits': 1}
Running iteration 411/750... Est. remaining: 450m 1sRunning iteration 421/750... Est. remaining: 429m 0sRunning iteration 431/750... Est. remaining: 406m 24sRunning iteration 441/750... Est. remaining: 387m 46sRunning iteration 451/750... Est. remaining: 375m 30sRunning iteration 461/750... Est. remaining: 355m 9sRunning iteration 471/750... Est. remaining: 335m 56sRunning iteration 481/750... Est. remaining: 317m 16sRunning iteration 491/750... Est. remaining: 299m 20sRunning iteration 501/750... Est. remaining: 282m 6sbest_combination: {'lookbacks': [157, 160, 171], 'score': np.float64(1.0561329371892152), 'visits': 1}
Running iteration 511/750... Est. remaining: 267m 49sRunning iteration 521/750... Est. remaining: 253m 8sRunning iteration 531/750... Est. remaining: 237m 36sRunning iteration 541/750... Est. remaining: 222m 59sRunning iteration 551/750... Est. remaining: 209m 14sRunning iteration 561/750... Est. remaining: 195m 15sRunning iteration 571/750... Est. remaining: 182m 34sRunning iteration 581/750... Est. remaining: 169m 28sRunning iteration 591/750... Est. remaining: 158m 27sRunning iteration 601/750... Est. remaining: 147m 45sbest_combination: {'lookbacks': [157, 160, 171], 'score': np.float64(1.0561329371892152), 'visits': 1}
Running iteration 611/750... Est. remaining: 135m 40sRunning iteration 621/750... Est. remaining: 124m 26sRunning iteration 631/750... Est. remaining: 113m 3sRunning iteration 641/750... Est. remaining: 102m 6sRunning iteration 651/750... Est. remaining: 91m 24sRunning iteration 661/750... Est. remaining: 81m 41sRunning iteration 671/750... Est. remaining: 71m 43sRunning iteration 681/750... Est. remaining: 61m 51sRunning iteration 691/750... Est. remaining: 53m 9sRunning iteration 701/750... Est. remaining: 43m 45sbest_combination: {'lookbacks': [157, 160, 171], 'score': np.float64(1.0561329371892152), 'visits': 1}
Running iteration 711/750... Est. remaining: 34m 31sRunning iteration 721/750... Est. remaining: 25m 33sRunning iteration 731/750... Est. remaining: 16m 48sRunning iteration 741/750... Est. remaining: 8m 25s
Monte Carlo simulation completed in 622.9 minutes
Best normalized score: 1.06
best_combination: {'lookbacks': [157, 160, 171], 'score': np.float64(1.0561329371892152), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [157, 160, 171] (score: 1.0561)

Monte Carlo simulation completed in 622.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [157, 160, 171] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 77 selections (18.5%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,233,539,211.25
Average Annualized Gain: 48.6%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Sun Aug 24 11:43:45 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $644,814,675
Annual Return: 37.65%
Sharpe Ratio: 1.31957
Sortino Ratio: 1.227
Max Drawdown: -73.5%
Avg Drawdown: -13.9%
Normalized Score: -1.591
Lookback periods: [56, 107, 116] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,113,539,162
Annual Return: 45.21%
Sharpe Ratio: 1.49132
Sortino Ratio: 1.451
Max Drawdown: -67.5%
Avg Drawdown: -11.7%
Normalized Score: 0.016
Lookback periods: [111, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 1496m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,855,726,654
Annual Return: 41.91%
Sharpe Ratio: 1.44712
Sortino Ratio: 1.379
Max Drawdown: -52.3%
Avg Drawdown: -10.4%
Normalized Score: 0.340
Lookback periods: [92, 107, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,108,904,810
Annual Return: 46.87%
Sharpe Ratio: 1.52221
Sortino Ratio: 1.501
Max Drawdown: -61.3%
Avg Drawdown: -11.5%
Normalized Score: 0.448
Lookback periods: [153, 160, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 811m 22sRunning iteration 31/750... Est. remaining: 535m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,448,833,152
Annual Return: 47.72%
Sharpe Ratio: 1.54724
Sortino Ratio: 1.508
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.749
Lookback periods: [157, 158, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 438m 34sRunning iteration 51/750... Est. remaining: 560m 19sRunning iteration 61/750... Est. remaining: 862m 4sRunning iteration 71/750... Est. remaining: 729m 0sRunning iteration 81/750... Est. remaining: 629m 12sRunning iteration 91/750... Est. remaining: 562m 0sRunning iteration 101/750... Est. remaining: 498m 39sbest_combination: {'lookbacks': [157, 158, 197], 'score': np.float64(0.749345899440341), 'visits': 1}
Running iteration 111/750... Est. remaining: 447m 10sRunning iteration 121/750... Est. remaining: 413m 6sRunning iteration 131/750... Est. remaining: 375m 39sRunning iteration 141/750... Est. remaining: 346m 26sRunning iteration 151/750... Est. remaining: 318m 21sRunning iteration 161/750... Est. remaining: 307m 9sRunning iteration 171/750... Est. remaining: 287m 25sRunning iteration 181/750... Est. remaining: 267m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,762,562,615
Annual Return: 48.87%
Sharpe Ratio: 1.58575
Sortino Ratio: 1.548
Max Drawdown: -57.9%
Avg Drawdown: -11.7%
Normalized Score: 0.759
Lookback periods: [149, 159, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/750... Est. remaining: 256m 33sRunning iteration 201/750... Est. remaining: 251m 46sbest_combination: {'lookbacks': [149, 159, 200], 'score': np.float64(0.7591584337682986), 'visits': 1}
Running iteration 211/750... Est. remaining: 235m 38sRunning iteration 221/750... Est. remaining: 220m 57sRunning iteration 231/750... Est. remaining: 207m 32sRunning iteration 241/750... Est. remaining: 195m 15sRunning iteration 251/750... Est. remaining: 183m 55sRunning iteration 261/750... Est. remaining: 173m 28sRunning iteration 271/750... Est. remaining: 163m 46sRunning iteration 281/750... Est. remaining: 154m 46sRunning iteration 291/750... Est. remaining: 146m 23sRunning iteration 301/750... Est. remaining: 138m 33sbest_combination: {'lookbacks': [149, 159, 200], 'score': np.float64(0.7591584337682986), 'visits': 1}
Running iteration 311/750... Est. remaining: 131m 13sRunning iteration 321/750... Est. remaining: 124m 20sRunning iteration 331/750... Est. remaining: 117m 52sRunning iteration 341/750... Est. remaining: 111m 46sRunning iteration 351/750... Est. remaining: 106m 1sRunning iteration 361/750... Est. remaining: 100m 35sRunning iteration 371/750... Est. remaining: 95m 27sRunning iteration 381/750... Est. remaining: 90m 34sRunning iteration 391/750... Est. remaining: 85m 56sRunning iteration 401/750... Est. remaining: 81m 31sbest_combination: {'lookbacks': [149, 159, 200], 'score': np.float64(0.7591584337682986), 'visits': 1}
Running iteration 411/750... Est. remaining: 77m 20sRunning iteration 421/750... Est. remaining: 73m 20sRunning iteration 431/750... Est. remaining: 69m 31sRunning iteration 441/750... Est. remaining: 65m 52sRunning iteration 451/750... Est. remaining: 62m 23sRunning iteration 461/750... Est. remaining: 59m 3sRunning iteration 471/750... Est. remaining: 55m 51sRunning iteration 481/750... Est. remaining: 52m 46sRunning iteration 491/750... Est. remaining: 49m 49sRunning iteration 501/750... Est. remaining: 46m 59sbest_combination: {'lookbacks': [149, 159, 200], 'score': np.float64(0.7591584337682986), 'visits': 1}
Running iteration 511/750... Est. remaining: 44m 16sRunning iteration 521/750... Est. remaining: 41m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,372,332,714
Annual Return: 48.70%
Sharpe Ratio: 1.58814
Sortino Ratio: 1.556
Max Drawdown: -58.7%
Avg Drawdown: -11.3%
Normalized Score: 0.827
Lookback periods: [146, 156, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/750... Est. remaining: 39m 7sRunning iteration 541/750... Est. remaining: 36m 41sRunning iteration 551/750... Est. remaining: 34m 20sRunning iteration 561/750... Est. remaining: 32m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,806,994,079
Annual Return: 47.92%
Sharpe Ratio: 1.57539
Sortino Ratio: 1.530
Max Drawdown: -55.0%
Avg Drawdown: -11.1%
Normalized Score: 0.862
Lookback periods: [146, 156, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/750... Est. remaining: 29m 52sRunning iteration 581/750... Est. remaining: 27m 45sRunning iteration 591/750... Est. remaining: 25m 41sRunning iteration 601/750... Est. remaining: 23m 42sbest_combination: {'lookbacks': [146, 156, 178], 'score': np.float64(0.8621618281099315), 'visits': 1}
Running iteration 611/750... Est. remaining: 21m 47sRunning iteration 621/750... Est. remaining: 19m 55sRunning iteration 631/750... Est. remaining: 18m 6sRunning iteration 641/750... Est. remaining: 16m 21sRunning iteration 651/750... Est. remaining: 14m 39sRunning iteration 661/750... Est. remaining: 12m 59sRunning iteration 671/750... Est. remaining: 11m 23sRunning iteration 681/750... Est. remaining: 9m 49sRunning iteration 691/750... Est. remaining: 8m 18sRunning iteration 701/750... Est. remaining: 6m 49sbest_combination: {'lookbacks': [146, 156, 178], 'score': np.float64(0.8621618281099315), 'visits': 1}
Running iteration 711/750... Est. remaining: 5m 23sRunning iteration 721/750... Est. remaining: 3m 59sRunning iteration 731/750... Est. remaining: 2m 37sRunning iteration 741/750... Est. remaining: 1m 17s
Monte Carlo simulation completed in 96.1 minutes
Best normalized score: 0.86
best_combination: {'lookbacks': [146, 156, 178], 'score': np.float64(0.8621618281099315), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [146, 156, 178] (score: 0.8622)

Monte Carlo simulation completed in 96.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [146, 156, 178] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 41 selections (9.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $7,806,994,079.28
Average Annualized Gain: 47.9%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 802m 47s
End time: Sun Aug 24 13:19:51 EDT 2025
Average time per successful run: 53m 31s
==============================================================
✓ All runs completed successfully!
