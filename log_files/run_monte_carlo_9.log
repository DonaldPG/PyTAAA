Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Start time: Sun Aug 24 13:28:43 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Sun Aug 24 13:28:43 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,708,021,755
Annual Return: 48.38%
Sharpe Ratio: 1.54909
Sortino Ratio: 1.517
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.631
Lookback periods: [174, 189, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 17sRunning iteration 21/1500... Est. remaining: 22m 39sRunning iteration 31/1500... Est. remaining: 20m 21sRunning iteration 41/1500... Est. remaining: 19m 16sRunning iteration 51/1500... Est. remaining: 18m 32sRunning iteration 61/1500... Est. remaining: 17m 59sRunning iteration 71/1500... Est. remaining: 17m 32sRunning iteration 81/1500... Est. remaining: 17m 9sRunning iteration 91/1500... Est. remaining: 16m 50sRunning iteration 101/1500... Est. remaining: 16m 35sbest_combination: {'lookbacks': [174, 189, 189], 'score': np.float64(0.631259816946043), 'visits': 1}
Running iteration 111/1500... Est. remaining: 16m 21sRunning iteration 121/1500... Est. remaining: 16m 7sRunning iteration 131/1500... Est. remaining: 15m 55sRunning iteration 141/1500... Est. remaining: 15m 47sRunning iteration 151/1500... Est. remaining: 15m 37sRunning iteration 161/1500... Est. remaining: 15m 26sRunning iteration 171/1500... Est. remaining: 15m 17sRunning iteration 181/1500... Est. remaining: 15m 6sRunning iteration 191/1500... Est. remaining: 14m 58sRunning iteration 201/1500... Est. remaining: 14m 49sbest_combination: {'lookbacks': [174, 189, 189], 'score': np.float64(0.631259816946043), 'visits': 1}
Running iteration 211/1500... Est. remaining: 14m 41sRunning iteration 221/1500... Est. remaining: 14m 32sRunning iteration 231/1500... Est. remaining: 14m 24sRunning iteration 241/1500... Est. remaining: 14m 17sRunning iteration 251/1500... Est. remaining: 14m 9sRunning iteration 261/1500... Est. remaining: 14m 0sRunning iteration 271/1500... Est. remaining: 13m 51sRunning iteration 281/1500... Est. remaining: 13m 44sRunning iteration 291/1500... Est. remaining: 13m 37sRunning iteration 301/1500... Est. remaining: 13m 29sbest_combination: {'lookbacks': [174, 189, 189], 'score': np.float64(0.631259816946043), 'visits': 1}
Running iteration 311/1500... Est. remaining: 13m 22sRunning iteration 321/1500... Est. remaining: 13m 14sRunning iteration 331/1500... Est. remaining: 13m 6sRunning iteration 341/1500... Est. remaining: 12m 59sRunning iteration 351/1500... Est. remaining: 12m 51sRunning iteration 361/1500... Est. remaining: 12m 44sRunning iteration 371/1500... Est. remaining: 12m 37sRunning iteration 381/1500... Est. remaining: 12m 30sRunning iteration 391/1500... Est. remaining: 12m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,401,816,874
Annual Return: 48.71%
Sharpe Ratio: 1.57288
Sortino Ratio: 1.534
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.681
Lookback periods: [181, 185, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 12m 20sbest_combination: {'lookbacks': [181, 185, 189], 'score': np.float64(0.6814112561750109), 'visits': 1}
Running iteration 411/1500... Est. remaining: 12m 14sRunning iteration 421/1500... Est. remaining: 12m 7sRunning iteration 431/1500... Est. remaining: 11m 59sRunning iteration 441/1500... Est. remaining: 11m 52sRunning iteration 451/1500... Est. remaining: 11m 45sRunning iteration 461/1500... Est. remaining: 11m 38sRunning iteration 471/1500... Est. remaining: 11m 31sRunning iteration 481/1500... Est. remaining: 11m 24sRunning iteration 491/1500... Est. remaining: 11m 16sRunning iteration 501/1500... Est. remaining: 11m 9sbest_combination: {'lookbacks': [181, 185, 189], 'score': np.float64(0.6814112561750109), 'visits': 1}
Running iteration 511/1500... Est. remaining: 11m 2sRunning iteration 521/1500... Est. remaining: 10m 55sRunning iteration 531/1500... Est. remaining: 10m 48sRunning iteration 541/1500... Est. remaining: 10m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,081,058,134
Annual Return: 49.01%
Sharpe Ratio: 1.57619
Sortino Ratio: 1.540
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.788
Lookback periods: [178, 190, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 10m 37sRunning iteration 561/1500... Est. remaining: 10m 30sRunning iteration 571/1500... Est. remaining: 10m 23sRunning iteration 581/1500... Est. remaining: 10m 16sRunning iteration 591/1500... Est. remaining: 10m 10sRunning iteration 601/1500... Est. remaining: 10m 3sbest_combination: {'lookbacks': [178, 190, 198], 'score': np.float64(0.788472175661011), 'visits': 1}
Running iteration 611/1500... Est. remaining: 9m 56sRunning iteration 621/1500... Est. remaining: 9m 49sRunning iteration 631/1500... Est. remaining: 9m 42sRunning iteration 641/1500... Est. remaining: 9m 35sRunning iteration 651/1500... Est. remaining: 9m 28sRunning iteration 661/1500... Est. remaining: 9m 21sRunning iteration 671/1500... Est. remaining: 9m 14sRunning iteration 681/1500... Est. remaining: 9m 7sRunning iteration 691/1500... Est. remaining: 9m 0sRunning iteration 701/1500... Est. remaining: 8m 54sbest_combination: {'lookbacks': [178, 190, 198], 'score': np.float64(0.788472175661011), 'visits': 1}
Running iteration 711/1500... Est. remaining: 8m 47sRunning iteration 721/1500... Est. remaining: 8m 40sRunning iteration 731/1500... Est. remaining: 8m 33sRunning iteration 741/1500... Est. remaining: 8m 27sRunning iteration 751/1500... Est. remaining: 8m 20sRunning iteration 761/1500... Est. remaining: 8m 13sRunning iteration 771/1500... Est. remaining: 8m 7sRunning iteration 781/1500... Est. remaining: 8m 0sRunning iteration 791/1500... Est. remaining: 7m 53sRunning iteration 801/1500... Est. remaining: 7m 46sbest_combination: {'lookbacks': [178, 190, 198], 'score': np.float64(0.788472175661011), 'visits': 1}
Running iteration 811/1500... Est. remaining: 7m 40sRunning iteration 821/1500... Est. remaining: 7m 33sRunning iteration 831/1500... Est. remaining: 7m 27sRunning iteration 841/1500... Est. remaining: 7m 20sRunning iteration 851/1500... Est. remaining: 7m 13sRunning iteration 861/1500... Est. remaining: 7m 7sRunning iteration 871/1500... Est. remaining: 7m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,496,465,422
Annual Return: 49.18%
Sharpe Ratio: 1.58751
Sortino Ratio: 1.546
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.822
Lookback periods: [181, 189, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 881/1500... Est. remaining: 6m 55sRunning iteration 891/1500... Est. remaining: 6m 48sRunning iteration 901/1500... Est. remaining: 6m 41sbest_combination: {'lookbacks': [181, 189, 193], 'score': np.float64(0.8215676161059324), 'visits': 1}
Running iteration 911/1500... Est. remaining: 6m 35sRunning iteration 921/1500... Est. remaining: 6m 29sRunning iteration 931/1500... Est. remaining: 6m 22sRunning iteration 941/1500... Est. remaining: 6m 15sRunning iteration 951/1500... Est. remaining: 6m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,353,552,410
Annual Return: 49.13%
Sharpe Ratio: 1.57795
Sortino Ratio: 1.539
Max Drawdown: -59.6%
Avg Drawdown: -11.0%
Normalized Score: 0.830
Lookback periods: [183, 188, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 961/1500... Est. remaining: 6m 2sRunning iteration 971/1500... Est. remaining: 5m 55sRunning iteration 981/1500... Est. remaining: 5m 48sRunning iteration 991/1500... Est. remaining: 5m 41sRunning iteration 1001/1500... Est. remaining: 5m 34sbest_combination: {'lookbacks': [183, 188, 191], 'score': np.float64(0.8298073968008726), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 5m 27sRunning iteration 1021/1500... Est. remaining: 5m 20sRunning iteration 1031/1500... Est. remaining: 5m 13sRunning iteration 1041/1500... Est. remaining: 5m 6sRunning iteration 1051/1500... Est. remaining: 5m 0sRunning iteration 1061/1500... Est. remaining: 4m 53sRunning iteration 1071/1500... Est. remaining: 4m 46sRunning iteration 1081/1500... Est. remaining: 4m 39sRunning iteration 1091/1500... Est. remaining: 4m 32sRunning iteration 1101/1500... Est. remaining: 4m 25sbest_combination: {'lookbacks': [183, 188, 191], 'score': np.float64(0.8298073968008726), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 19sRunning iteration 1121/1500... Est. remaining: 4m 12sRunning iteration 1131/1500... Est. remaining: 4m 5sRunning iteration 1141/1500... Est. remaining: 3m 58sRunning iteration 1151/1500... Est. remaining: 3m 52sRunning iteration 1161/1500... Est. remaining: 3m 45sRunning iteration 1171/1500... Est. remaining: 3m 38sRunning iteration 1181/1500... Est. remaining: 3m 32sRunning iteration 1191/1500... Est. remaining: 3m 25sRunning iteration 1201/1500... Est. remaining: 3m 18sbest_combination: {'lookbacks': [183, 188, 191], 'score': np.float64(0.8298073968008726), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 11sRunning iteration 1221/1500... Est. remaining: 3m 5sRunning iteration 1231/1500... Est. remaining: 2m 58sRunning iteration 1241/1500... Est. remaining: 2m 51sRunning iteration 1251/1500... Est. remaining: 2m 45sRunning iteration 1261/1500... Est. remaining: 2m 38sRunning iteration 1271/1500... Est. remaining: 2m 31sRunning iteration 1281/1500... Est. remaining: 2m 25sRunning iteration 1291/1500... Est. remaining: 2m 18sRunning iteration 1301/1500... Est. remaining: 2m 11sbest_combination: {'lookbacks': [183, 188, 191], 'score': np.float64(0.8298073968008726), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 5sRunning iteration 1321/1500... Est. remaining: 1m 58sRunning iteration 1331/1500... Est. remaining: 1m 51sRunning iteration 1341/1500... Est. remaining: 1m 45sRunning iteration 1351/1500... Est. remaining: 1m 38sRunning iteration 1361/1500... Est. remaining: 1m 32sRunning iteration 1371/1500... Est. remaining: 1m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,306,109,464
Annual Return: 42.80%
Sharpe Ratio: 1.53778
Sortino Ratio: 1.440
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.285
Lookback periods: [50, 50, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,090,622,705
Annual Return: 44.01%
Sharpe Ratio: 1.57961
Sortino Ratio: 1.488
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.562
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1381/1500... Est. remaining: 1m 19sRunning iteration 1391/1500... Est. remaining: 1m 12sRunning iteration 1401/1500... Est. remaining: 1m 6sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.5624359116410709), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 59sRunning iteration 1421/1500... Est. remaining: 0m 52sRunning iteration 1431/1500... Est. remaining: 0m 46sRunning iteration 1441/1500... Est. remaining: 0m 39sRunning iteration 1451/1500... Est. remaining: 0m 33sRunning iteration 1461/1500... Est. remaining: 0m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,774,718,571
Annual Return: 44.85%
Sharpe Ratio: 1.62561
Sortino Ratio: 1.530
Max Drawdown: -37.5%
Avg Drawdown: -8.3%
Normalized Score: 1.601
Lookback periods: [52, 52, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1471/1500... Est. remaining: 0m 19sRunning iteration 1481/1500... Est. remaining: 0m 13sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 16.5 minutes
Best normalized score: 1.60
best_combination: {'lookbacks': [52, 52, 94], 'score': np.float64(1.600668216704658), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 94] (score: 1.6007)

Monte Carlo simulation completed in 16.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 94] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 102 selections (24.5%)
2. naz100_hma: 96 selections (23.1%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 79 selections (19.0%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,774,718,570.75
Average Annualized Gain: 44.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Sun Aug 24 13:45:25 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $175,378,091
Annual Return: 32.57%
Sharpe Ratio: 1.13084
Sortino Ratio: 1.044
Max Drawdown: -52.3%
Avg Drawdown: -13.2%
Normalized Score: -2.122
Lookback periods: [73, 78, 123] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,945,763,797
Annual Return: 43.81%
Sharpe Ratio: 1.43039
Sortino Ratio: 1.395
Max Drawdown: -62.7%
Avg Drawdown: -12.0%
Normalized Score: -0.324
Lookback periods: [152, 190, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,629,603,448
Annual Return: 44.68%
Sharpe Ratio: 1.45467
Sortino Ratio: 1.419
Max Drawdown: -63.8%
Avg Drawdown: -12.1%
Normalized Score: -0.222
Lookback periods: [146, 158, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 38m 30sRunning iteration 21/1500... Est. remaining: 27m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,491,828,944
Annual Return: 45.58%
Sharpe Ratio: 1.47775
Sortino Ratio: 1.443
Max Drawdown: -61.2%
Avg Drawdown: -12.0%
Normalized Score: 0.030
Lookback periods: [167, 183, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 24m 15sRunning iteration 41/1500... Est. remaining: 21m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,213,514,882
Annual Return: 44.18%
Sharpe Ratio: 1.44540
Sortino Ratio: 1.409
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.031
Lookback periods: [167, 170, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 20m 58sRunning iteration 61/1500... Est. remaining: 19m 46sRunning iteration 71/1500... Est. remaining: 18m 56sRunning iteration 81/1500... Est. remaining: 18m 16sRunning iteration 91/1500... Est. remaining: 17m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,268,296,480
Annual Return: 40.36%
Sharpe Ratio: 1.44832
Sortino Ratio: 1.339
Max Drawdown: -39.0%
Avg Drawdown: -10.7%
Normalized Score: 0.262
Lookback periods: [51, 56, 75] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 17m 38sbest_combination: {'lookbacks': [51, 56, 75], 'score': np.float64(0.2618933978457075), 'visits': 1}
Running iteration 111/1500... Est. remaining: 17m 12sRunning iteration 121/1500... Est. remaining: 16m 51sRunning iteration 131/1500... Est. remaining: 16m 32sRunning iteration 141/1500... Est. remaining: 16m 14sRunning iteration 151/1500... Est. remaining: 15m 57sRunning iteration 161/1500... Est. remaining: 15m 41sRunning iteration 171/1500... Est. remaining: 15m 26sRunning iteration 181/1500... Est. remaining: 15m 13sRunning iteration 191/1500... Est. remaining: 15m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,988,550,480
Annual Return: 48.01%
Sharpe Ratio: 1.57574
Sortino Ratio: 1.537
Max Drawdown: -57.2%
Avg Drawdown: -11.6%
Normalized Score: 0.715
Lookback periods: [138, 156, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 14m 59sbest_combination: {'lookbacks': [138, 156, 164], 'score': np.float64(0.7154686641022798), 'visits': 1}
Running iteration 211/1500... Est. remaining: 14m 48sRunning iteration 221/1500... Est. remaining: 14m 37sRunning iteration 231/1500... Est. remaining: 14m 25sRunning iteration 241/1500... Est. remaining: 14m 14sRunning iteration 251/1500... Est. remaining: 14m 7sRunning iteration 261/1500... Est. remaining: 14m 0sRunning iteration 271/1500... Est. remaining: 13m 51sRunning iteration 281/1500... Est. remaining: 13m 42sRunning iteration 291/1500... Est. remaining: 13m 33sRunning iteration 301/1500... Est. remaining: 13m 24sbest_combination: {'lookbacks': [138, 156, 164], 'score': np.float64(0.7154686641022798), 'visits': 1}
Running iteration 311/1500... Est. remaining: 13m 15sRunning iteration 321/1500... Est. remaining: 13m 7sRunning iteration 331/1500... Est. remaining: 12m 57sRunning iteration 341/1500... Est. remaining: 12m 49sRunning iteration 351/1500... Est. remaining: 12m 42sRunning iteration 361/1500... Est. remaining: 12m 34sRunning iteration 371/1500... Est. remaining: 12m 27sRunning iteration 381/1500... Est. remaining: 12m 19sRunning iteration 391/1500... Est. remaining: 12m 13sRunning iteration 401/1500... Est. remaining: 12m 5sbest_combination: {'lookbacks': [138, 156, 164], 'score': np.float64(0.7154686641022798), 'visits': 1}
Running iteration 411/1500... Est. remaining: 11m 57sRunning iteration 421/1500... Est. remaining: 11m 50sRunning iteration 431/1500... Est. remaining: 11m 43sRunning iteration 441/1500... Est. remaining: 11m 36sRunning iteration 451/1500... Est. remaining: 11m 30sRunning iteration 461/1500... Est. remaining: 11m 22sRunning iteration 471/1500... Est. remaining: 11m 16sRunning iteration 481/1500... Est. remaining: 11m 10sRunning iteration 491/1500... Est. remaining: 11m 4sRunning iteration 501/1500... Est. remaining: 10m 57sbest_combination: {'lookbacks': [138, 156, 164], 'score': np.float64(0.7154686641022798), 'visits': 1}
Running iteration 511/1500... Est. remaining: 10m 52sRunning iteration 521/1500... Est. remaining: 10m 47sRunning iteration 531/1500... Est. remaining: 10m 39sRunning iteration 541/1500... Est. remaining: 10m 32sRunning iteration 551/1500... Est. remaining: 10m 24sRunning iteration 561/1500... Est. remaining: 10m 16sRunning iteration 571/1500... Est. remaining: 10m 9sRunning iteration 581/1500... Est. remaining: 10m 2sRunning iteration 591/1500... Est. remaining: 9m 54sRunning iteration 601/1500... Est. remaining: 9m 47sbest_combination: {'lookbacks': [138, 156, 164], 'score': np.float64(0.7154686641022798), 'visits': 1}
Running iteration 611/1500... Est. remaining: 9m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,185,222,853
Annual Return: 49.05%
Sharpe Ratio: 1.58459
Sortino Ratio: 1.549
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.814
Lookback periods: [178, 186, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 9m 35sRunning iteration 631/1500... Est. remaining: 9m 28sRunning iteration 641/1500... Est. remaining: 9m 21sRunning iteration 651/1500... Est. remaining: 9m 14sRunning iteration 661/1500... Est. remaining: 9m 7sRunning iteration 671/1500... Est. remaining: 9m 0sRunning iteration 681/1500... Est. remaining: 8m 54sRunning iteration 691/1500... Est. remaining: 8m 47sRunning iteration 701/1500... Est. remaining: 8m 40sbest_combination: {'lookbacks': [178, 186, 189], 'score': np.float64(0.8143577336664676), 'visits': 1}
Running iteration 711/1500... Est. remaining: 8m 34sRunning iteration 721/1500... Est. remaining: 8m 27sRunning iteration 731/1500... Est. remaining: 8m 21sRunning iteration 741/1500... Est. remaining: 8m 14sRunning iteration 751/1500... Est. remaining: 8m 7sRunning iteration 761/1500... Est. remaining: 8m 0sRunning iteration 771/1500... Est. remaining: 7m 53sRunning iteration 781/1500... Est. remaining: 7m 46sRunning iteration 791/1500... Est. remaining: 7m 40sRunning iteration 801/1500... Est. remaining: 7m 33sbest_combination: {'lookbacks': [178, 186, 189], 'score': np.float64(0.8143577336664676), 'visits': 1}
Running iteration 811/1500... Est. remaining: 7m 27sRunning iteration 821/1500... Est. remaining: 7m 20sRunning iteration 831/1500... Est. remaining: 7m 14sRunning iteration 841/1500... Est. remaining: 7m 8sRunning iteration 851/1500... Est. remaining: 7m 1sRunning iteration 861/1500... Est. remaining: 6m 55sRunning iteration 871/1500... Est. remaining: 6m 48sRunning iteration 881/1500... Est. remaining: 6m 41sRunning iteration 891/1500... Est. remaining: 6m 35sRunning iteration 901/1500... Est. remaining: 6m 28sbest_combination: {'lookbacks': [178, 186, 189], 'score': np.float64(0.8143577336664676), 'visits': 1}
Running iteration 911/1500... Est. remaining: 6m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,515,152,435
Annual Return: 49.58%
Sharpe Ratio: 1.59106
Sortino Ratio: 1.567
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.923
Lookback periods: [175, 184, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 921/1500... Est. remaining: 6m 16sRunning iteration 931/1500... Est. remaining: 6m 10sRunning iteration 941/1500... Est. remaining: 6m 4sRunning iteration 951/1500... Est. remaining: 5m 57sRunning iteration 961/1500... Est. remaining: 5m 51sRunning iteration 971/1500... Est. remaining: 5m 44sRunning iteration 981/1500... Est. remaining: 5m 38sRunning iteration 991/1500... Est. remaining: 5m 31sRunning iteration 1001/1500... Est. remaining: 5m 25sbest_combination: {'lookbacks': [175, 184, 188], 'score': np.float64(0.9226449590075602), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 5m 18sRunning iteration 1021/1500... Est. remaining: 5m 12sRunning iteration 1031/1500... Est. remaining: 5m 6sRunning iteration 1041/1500... Est. remaining: 4m 59sRunning iteration 1051/1500... Est. remaining: 4m 53sRunning iteration 1061/1500... Est. remaining: 4m 46sRunning iteration 1071/1500... Est. remaining: 4m 40sRunning iteration 1081/1500... Est. remaining: 4m 33sRunning iteration 1091/1500... Est. remaining: 4m 27sRunning iteration 1101/1500... Est. remaining: 4m 20sbest_combination: {'lookbacks': [175, 184, 188], 'score': np.float64(0.9226449590075602), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 14sRunning iteration 1121/1500... Est. remaining: 4m 8sRunning iteration 1131/1500... Est. remaining: 4m 1sRunning iteration 1141/1500... Est. remaining: 3m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,249,624,187
Annual Return: 49.85%
Sharpe Ratio: 1.59703
Sortino Ratio: 1.571
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.990
Lookback periods: [176, 188, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1151/1500... Est. remaining: 3m 48sRunning iteration 1161/1500... Est. remaining: 3m 42sRunning iteration 1171/1500... Est. remaining: 3m 36sRunning iteration 1181/1500... Est. remaining: 3m 29sRunning iteration 1191/1500... Est. remaining: 3m 22sRunning iteration 1201/1500... Est. remaining: 3m 16sbest_combination: {'lookbacks': [176, 188, 198], 'score': np.float64(0.990446451677936), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 9sRunning iteration 1221/1500... Est. remaining: 3m 3sRunning iteration 1231/1500... Est. remaining: 2m 56sRunning iteration 1241/1500... Est. remaining: 2m 50sRunning iteration 1251/1500... Est. remaining: 2m 43sRunning iteration 1261/1500... Est. remaining: 2m 36sRunning iteration 1271/1500... Est. remaining: 2m 30sRunning iteration 1281/1500... Est. remaining: 2m 23sRunning iteration 1291/1500... Est. remaining: 2m 17sRunning iteration 1301/1500... Est. remaining: 2m 10sbest_combination: {'lookbacks': [176, 188, 198], 'score': np.float64(0.990446451677936), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 4sRunning iteration 1321/1500... Est. remaining: 1m 57sRunning iteration 1331/1500... Est. remaining: 1m 50sRunning iteration 1341/1500... Est. remaining: 1m 44sRunning iteration 1351/1500... Est. remaining: 1m 37sRunning iteration 1361/1500... Est. remaining: 1m 31sRunning iteration 1371/1500... Est. remaining: 1m 24sRunning iteration 1381/1500... Est. remaining: 1m 18sRunning iteration 1391/1500... Est. remaining: 1m 11sRunning iteration 1401/1500... Est. remaining: 1m 5sbest_combination: {'lookbacks': [176, 188, 198], 'score': np.float64(0.990446451677936), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 58sRunning iteration 1421/1500... Est. remaining: 0m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,581,049,141
Annual Return: 43.27%
Sharpe Ratio: 1.53861
Sortino Ratio: 1.441
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.169
Lookback periods: [50, 54, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1431/1500... Est. remaining: 0m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,942,937,289
Annual Return: 43.81%
Sharpe Ratio: 1.57848
Sortino Ratio: 1.484
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.555
Lookback periods: [50, 50, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1441/1500... Est. remaining: 0m 39sRunning iteration 1451/1500... Est. remaining: 0m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,090,622,705
Annual Return: 44.01%
Sharpe Ratio: 1.57961
Sortino Ratio: 1.488
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.562
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1461/1500... Est. remaining: 0m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,912,007
Annual Return: 45.27%
Sharpe Ratio: 1.61355
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.670
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.729
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1471/1500... Est. remaining: 0m 19sRunning iteration 1481/1500... Est. remaining: 0m 13sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 16.3 minutes
Best normalized score: 1.73
best_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 51, 95] (score: 1.7293)

Monte Carlo simulation completed in 16.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 51, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 99 selections (23.8%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,683,002,581.49
Average Annualized Gain: 44.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Sun Aug 24 14:01:52 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $494,842,774
Annual Return: 36.60%
Sharpe Ratio: 1.25129
Sortino Ratio: 1.173
Max Drawdown: -60.1%
Avg Drawdown: -13.3%
Normalized Score: -1.670
Lookback periods: [91, 126, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $969,966,920
Annual Return: 39.28%
Sharpe Ratio: 1.34449
Sortino Ratio: 1.271
Max Drawdown: -55.0%
Avg Drawdown: -13.4%
Normalized Score: -1.010
Lookback periods: [93, 122, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,860,907,275
Annual Return: 43.69%
Sharpe Ratio: 1.45493
Sortino Ratio: 1.417
Max Drawdown: -67.5%
Avg Drawdown: -12.5%
Normalized Score: -0.517
Lookback periods: [117, 150, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 35m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,149,088,195
Annual Return: 39.96%
Sharpe Ratio: 1.36027
Sortino Ratio: 1.292
Max Drawdown: -52.3%
Avg Drawdown: -11.4%
Normalized Score: -0.489
Lookback periods: [80, 128, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,569,108,700
Annual Return: 44.61%
Sharpe Ratio: 1.46912
Sortino Ratio: 1.435
Max Drawdown: -65.8%
Avg Drawdown: -12.2%
Normalized Score: -0.278
Lookback periods: [107, 169, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 28m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,059,858,324
Annual Return: 42.34%
Sharpe Ratio: 1.43127
Sortino Ratio: 1.338
Max Drawdown: -56.4%
Avg Drawdown: -11.4%
Normalized Score: -0.246
Lookback periods: [60, 149, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,240,146,151
Annual Return: 45.33%
Sharpe Ratio: 1.48199
Sortino Ratio: 1.450
Max Drawdown: -63.8%
Avg Drawdown: -12.2%
Normalized Score: -0.096
Lookback periods: [158, 177, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,576,063,664
Annual Return: 47.79%
Sharpe Ratio: 1.55085
Sortino Ratio: 1.509
Max Drawdown: -59.7%
Avg Drawdown: -11.8%
Normalized Score: 0.508
Lookback periods: [146, 155, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 27m 44sRunning iteration 41/1500... Est. remaining: 24m 21sRunning iteration 51/1500... Est. remaining: 22m 15sRunning iteration 61/1500... Est. remaining: 20m 52sRunning iteration 71/1500... Est. remaining: 19m 50sRunning iteration 81/1500... Est. remaining: 19m 1sRunning iteration 91/1500... Est. remaining: 18m 22sRunning iteration 101/1500... Est. remaining: 17m 51sbest_combination: {'lookbacks': [146, 155, 176], 'score': np.float64(0.5078013415578972), 'visits': 1}
Running iteration 111/1500... Est. remaining: 17m 23sRunning iteration 121/1500... Est. remaining: 17m 0sRunning iteration 131/1500... Est. remaining: 16m 39sRunning iteration 141/1500... Est. remaining: 16m 19sRunning iteration 151/1500... Est. remaining: 16m 2sRunning iteration 161/1500... Est. remaining: 15m 46sRunning iteration 171/1500... Est. remaining: 15m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,537,921,947
Annual Return: 47.77%
Sharpe Ratio: 1.55521
Sortino Ratio: 1.516
Max Drawdown: -58.0%
Avg Drawdown: -10.7%
Normalized Score: 0.742
Lookback periods: [156, 156, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/1500... Est. remaining: 15m 28sRunning iteration 191/1500... Est. remaining: 15m 15sRunning iteration 201/1500... Est. remaining: 15m 2sbest_combination: {'lookbacks': [156, 156, 172], 'score': np.float64(0.7420034330233535), 'visits': 1}
Running iteration 211/1500... Est. remaining: 14m 49sRunning iteration 221/1500... Est. remaining: 14m 37sRunning iteration 231/1500... Est. remaining: 14m 27sRunning iteration 241/1500... Est. remaining: 14m 16sRunning iteration 251/1500... Est. remaining: 14m 5sRunning iteration 261/1500... Est. remaining: 13m 55sRunning iteration 271/1500... Est. remaining: 13m 45sRunning iteration 281/1500... Est. remaining: 13m 36sRunning iteration 291/1500... Est. remaining: 13m 26sRunning iteration 301/1500... Est. remaining: 13m 17sbest_combination: {'lookbacks': [156, 156, 172], 'score': np.float64(0.7420034330233535), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,739,349,139
Annual Return: 43.51%
Sharpe Ratio: 1.53753
Sortino Ratio: 1.434
Max Drawdown: -34.7%
Avg Drawdown: -9.8%
Normalized Score: 1.101
Lookback periods: [51, 53, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 13m 14sRunning iteration 321/1500... Est. remaining: 13m 5sRunning iteration 331/1500... Est. remaining: 12m 56sRunning iteration 341/1500... Est. remaining: 12m 47sRunning iteration 351/1500... Est. remaining: 12m 39sRunning iteration 361/1500... Est. remaining: 12m 30sRunning iteration 371/1500... Est. remaining: 12m 22sRunning iteration 381/1500... Est. remaining: 12m 14sRunning iteration 391/1500... Est. remaining: 12m 6sRunning iteration 401/1500... Est. remaining: 11m 58sbest_combination: {'lookbacks': [51, 53, 83], 'score': np.float64(1.1011690553525628), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,049,338,469
Annual Return: 42.32%
Sharpe Ratio: 1.52822
Sortino Ratio: 1.430
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.128
Lookback periods: [50, 50, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 11m 53sRunning iteration 421/1500... Est. remaining: 11m 46sRunning iteration 431/1500... Est. remaining: 11m 38sRunning iteration 441/1500... Est. remaining: 11m 31sRunning iteration 451/1500... Est. remaining: 11m 24sRunning iteration 461/1500... Est. remaining: 11m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,934,300,309
Annual Return: 43.80%
Sharpe Ratio: 1.56598
Sortino Ratio: 1.470
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.261
Lookback periods: [50, 54, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 11m 13sRunning iteration 481/1500... Est. remaining: 11m 5sRunning iteration 491/1500... Est. remaining: 10m 58sRunning iteration 501/1500... Est. remaining: 10m 50sbest_combination: {'lookbacks': [50, 54, 89], 'score': np.float64(1.2614673127141058), 'visits': 1}
Running iteration 511/1500... Est. remaining: 10m 43sRunning iteration 521/1500... Est. remaining: 10m 36sRunning iteration 531/1500... Est. remaining: 10m 28sRunning iteration 541/1500... Est. remaining: 10m 21sRunning iteration 551/1500... Est. remaining: 10m 13sRunning iteration 561/1500... Est. remaining: 10m 6sRunning iteration 571/1500... Est. remaining: 9m 59sRunning iteration 581/1500... Est. remaining: 9m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,912,007
Annual Return: 45.27%
Sharpe Ratio: 1.61355
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.670
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 9m 47sRunning iteration 601/1500... Est. remaining: 9m 40sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6697769261771946), 'visits': 1}
Running iteration 611/1500... Est. remaining: 9m 33sRunning iteration 621/1500... Est. remaining: 9m 26sRunning iteration 631/1500... Est. remaining: 9m 19sRunning iteration 641/1500... Est. remaining: 9m 12sRunning iteration 651/1500... Est. remaining: 9m 5sRunning iteration 661/1500... Est. remaining: 8m 58sRunning iteration 671/1500... Est. remaining: 8m 51sRunning iteration 681/1500... Est. remaining: 8m 44sRunning iteration 691/1500... Est. remaining: 8m 37sRunning iteration 701/1500... Est. remaining: 8m 31sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6697769261771946), 'visits': 1}
Running iteration 711/1500... Est. remaining: 8m 24sRunning iteration 721/1500... Est. remaining: 8m 17sRunning iteration 731/1500... Est. remaining: 8m 10sRunning iteration 741/1500... Est. remaining: 8m 4sRunning iteration 751/1500... Est. remaining: 7m 57sRunning iteration 761/1500... Est. remaining: 7m 50sRunning iteration 771/1500... Est. remaining: 7m 43sRunning iteration 781/1500... Est. remaining: 7m 37sRunning iteration 791/1500... Est. remaining: 7m 30sRunning iteration 801/1500... Est. remaining: 7m 24sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6697769261771946), 'visits': 1}
Running iteration 811/1500... Est. remaining: 7m 17sRunning iteration 821/1500... Est. remaining: 7m 10sRunning iteration 831/1500... Est. remaining: 7m 4sRunning iteration 841/1500... Est. remaining: 6m 57sRunning iteration 851/1500... Est. remaining: 6m 51sRunning iteration 861/1500... Est. remaining: 6m 44sRunning iteration 871/1500... Est. remaining: 6m 38sRunning iteration 881/1500... Est. remaining: 6m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.046
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 6m 26sRunning iteration 901/1500... Est. remaining: 6m 19sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 911/1500... Est. remaining: 6m 13sRunning iteration 921/1500... Est. remaining: 6m 6sRunning iteration 931/1500... Est. remaining: 6m 0sRunning iteration 941/1500... Est. remaining: 5m 53sRunning iteration 951/1500... Est. remaining: 5m 46sRunning iteration 961/1500... Est. remaining: 5m 40sRunning iteration 971/1500... Est. remaining: 5m 34sRunning iteration 981/1500... Est. remaining: 5m 27sRunning iteration 991/1500... Est. remaining: 5m 21sRunning iteration 1001/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 5m 8sRunning iteration 1021/1500... Est. remaining: 5m 1sRunning iteration 1031/1500... Est. remaining: 4m 55sRunning iteration 1041/1500... Est. remaining: 4m 49sRunning iteration 1051/1500... Est. remaining: 4m 42sRunning iteration 1061/1500... Est. remaining: 4m 36sRunning iteration 1071/1500... Est. remaining: 4m 29sRunning iteration 1081/1500... Est. remaining: 4m 23sRunning iteration 1091/1500... Est. remaining: 4m 17sRunning iteration 1101/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 4sRunning iteration 1121/1500... Est. remaining: 3m 58sRunning iteration 1131/1500... Est. remaining: 3m 51sRunning iteration 1141/1500... Est. remaining: 3m 45sRunning iteration 1151/1500... Est. remaining: 3m 38sRunning iteration 1161/1500... Est. remaining: 3m 32sRunning iteration 1171/1500... Est. remaining: 3m 26sRunning iteration 1181/1500... Est. remaining: 3m 19sRunning iteration 1191/1500... Est. remaining: 3m 13sRunning iteration 1201/1500... Est. remaining: 3m 7sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 1sRunning iteration 1221/1500... Est. remaining: 2m 54sRunning iteration 1231/1500... Est. remaining: 2m 48sRunning iteration 1241/1500... Est. remaining: 2m 42sRunning iteration 1251/1500... Est. remaining: 2m 35sRunning iteration 1261/1500... Est. remaining: 2m 29sRunning iteration 1271/1500... Est. remaining: 2m 23sRunning iteration 1281/1500... Est. remaining: 2m 17sRunning iteration 1291/1500... Est. remaining: 2m 10sRunning iteration 1301/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 58sRunning iteration 1321/1500... Est. remaining: 1m 52sRunning iteration 1331/1500... Est. remaining: 1m 45sRunning iteration 1341/1500... Est. remaining: 1m 39sRunning iteration 1351/1500... Est. remaining: 1m 33sRunning iteration 1361/1500... Est. remaining: 1m 26sRunning iteration 1371/1500... Est. remaining: 1m 20sRunning iteration 1381/1500... Est. remaining: 1m 14sRunning iteration 1391/1500... Est. remaining: 1m 8sRunning iteration 1401/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 55sRunning iteration 1421/1500... Est. remaining: 0m 49sRunning iteration 1431/1500... Est. remaining: 0m 43sRunning iteration 1441/1500... Est. remaining: 0m 37sRunning iteration 1451/1500... Est. remaining: 0m 30sRunning iteration 1461/1500... Est. remaining: 0m 24sRunning iteration 1471/1500... Est. remaining: 0m 18sRunning iteration 1481/1500... Est. remaining: 0m 12sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 15.4 minutes
Best normalized score: 2.05
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.0463)

Monte Carlo simulation completed in 15.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Sun Aug 24 14:17:23 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $921,436,650
Annual Return: 39.07%
Sharpe Ratio: 1.35593
Sortino Ratio: 1.251
Max Drawdown: -55.0%
Avg Drawdown: -11.6%
Normalized Score: -0.764
Lookback periods: [52, 106, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,446,557,073
Annual Return: 44.47%
Sharpe Ratio: 1.44680
Sortino Ratio: 1.408
Max Drawdown: -61.2%
Avg Drawdown: -12.0%
Normalized Score: -0.164
Lookback periods: [159, 182, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 50sRunning iteration 21/1500... Est. remaining: 22m 12sRunning iteration 31/1500... Est. remaining: 19m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,791,691,669
Annual Return: 43.59%
Sharpe Ratio: 1.47106
Sortino Ratio: 1.405
Max Drawdown: -55.0%
Avg Drawdown: -12.1%
Normalized Score: -0.049
Lookback periods: [87, 157, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,369,194,221
Annual Return: 45.46%
Sharpe Ratio: 1.48450
Sortino Ratio: 1.445
Max Drawdown: -57.2%
Avg Drawdown: -12.1%
Normalized Score: 0.138
Lookback periods: [140, 157, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 18m 22sRunning iteration 61/1500... Est. remaining: 17m 29sRunning iteration 71/1500... Est. remaining: 16m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,284,223,219
Annual Return: 48.66%
Sharpe Ratio: 1.58518
Sortino Ratio: 1.550
Max Drawdown: -59.7%
Avg Drawdown: -11.5%
Normalized Score: 0.739
Lookback periods: [146, 155, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 16m 45sRunning iteration 91/1500... Est. remaining: 16m 17sRunning iteration 101/1500... Est. remaining: 15m 52sbest_combination: {'lookbacks': [146, 155, 169], 'score': np.float64(0.7389675939548475), 'visits': 1}
Running iteration 111/1500... Est. remaining: 15m 31sRunning iteration 121/1500... Est. remaining: 15m 11sRunning iteration 131/1500... Est. remaining: 14m 55sRunning iteration 141/1500... Est. remaining: 14m 40sRunning iteration 151/1500... Est. remaining: 14m 26sRunning iteration 161/1500... Est. remaining: 14m 13sRunning iteration 171/1500... Est. remaining: 14m 1sRunning iteration 181/1500... Est. remaining: 13m 51sRunning iteration 191/1500... Est. remaining: 13m 40sRunning iteration 201/1500... Est. remaining: 13m 30sbest_combination: {'lookbacks': [146, 155, 169], 'score': np.float64(0.7389675939548475), 'visits': 1}
Running iteration 211/1500... Est. remaining: 13m 21sRunning iteration 221/1500... Est. remaining: 13m 11sRunning iteration 231/1500... Est. remaining: 13m 2sRunning iteration 241/1500... Est. remaining: 12m 53sRunning iteration 251/1500... Est. remaining: 12m 45sRunning iteration 261/1500... Est. remaining: 12m 36sRunning iteration 271/1500... Est. remaining: 12m 28sRunning iteration 281/1500... Est. remaining: 12m 20sRunning iteration 291/1500... Est. remaining: 12m 12sRunning iteration 301/1500... Est. remaining: 12m 4sbest_combination: {'lookbacks': [146, 155, 169], 'score': np.float64(0.7389675939548475), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 57sRunning iteration 321/1500... Est. remaining: 11m 50sRunning iteration 331/1500... Est. remaining: 11m 42sRunning iteration 341/1500... Est. remaining: 11m 35sRunning iteration 351/1500... Est. remaining: 11m 28sRunning iteration 361/1500... Est. remaining: 11m 21sRunning iteration 371/1500... Est. remaining: 11m 13sRunning iteration 381/1500... Est. remaining: 11m 4sRunning iteration 391/1500... Est. remaining: 10m 56sRunning iteration 401/1500... Est. remaining: 10m 48sbest_combination: {'lookbacks': [146, 155, 169], 'score': np.float64(0.7389675939548475), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 40sRunning iteration 421/1500... Est. remaining: 10m 33sRunning iteration 431/1500... Est. remaining: 10m 25sRunning iteration 441/1500... Est. remaining: 10m 18sRunning iteration 451/1500... Est. remaining: 10m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,822,867,141
Annual Return: 48.44%
Sharpe Ratio: 1.58839
Sortino Ratio: 1.552
Max Drawdown: -57.2%
Avg Drawdown: -11.6%
Normalized Score: 0.783
Lookback periods: [138, 159, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 10m 6sRunning iteration 471/1500... Est. remaining: 19m 8sRunning iteration 481/1500... Est. remaining: 27m 34sRunning iteration 491/1500... Est. remaining: 26m 56sRunning iteration 501/1500... Est. remaining: 26m 18sbest_combination: {'lookbacks': [138, 159, 170], 'score': np.float64(0.7829366718101866), 'visits': 1}
Running iteration 511/1500... Est. remaining: 25m 42sRunning iteration 521/1500... Est. remaining: 25m 6sRunning iteration 531/1500... Est. remaining: 24m 32sRunning iteration 541/1500... Est. remaining: 23m 59sRunning iteration 551/1500... Est. remaining: 23m 27sRunning iteration 561/1500... Est. remaining: 22m 55sRunning iteration 571/1500... Est. remaining: 22m 25sRunning iteration 581/1500... Est. remaining: 21m 56sRunning iteration 591/1500... Est. remaining: 21m 27sRunning iteration 601/1500... Est. remaining: 20m 59sbest_combination: {'lookbacks': [138, 159, 170], 'score': np.float64(0.7829366718101866), 'visits': 1}
Running iteration 611/1500... Est. remaining: 20m 33sRunning iteration 621/1500... Est. remaining: 20m 6sRunning iteration 631/1500... Est. remaining: 19m 41sRunning iteration 641/1500... Est. remaining: 19m 16sRunning iteration 651/1500... Est. remaining: 18m 52sRunning iteration 661/1500... Est. remaining: 18m 28sRunning iteration 671/1500... Est. remaining: 18m 5sRunning iteration 681/1500... Est. remaining: 17m 43sRunning iteration 691/1500... Est. remaining: 17m 21sRunning iteration 701/1500... Est. remaining: 17m 0sbest_combination: {'lookbacks': [138, 159, 170], 'score': np.float64(0.7829366718101866), 'visits': 1}
Running iteration 711/1500... Est. remaining: 16m 39sRunning iteration 721/1500... Est. remaining: 16m 18sRunning iteration 731/1500... Est. remaining: 15m 58sRunning iteration 741/1500... Est. remaining: 15m 38sRunning iteration 751/1500... Est. remaining: 15m 19sRunning iteration 761/1500... Est. remaining: 15m 0sRunning iteration 771/1500... Est. remaining: 14m 41sRunning iteration 781/1500... Est. remaining: 14m 23sRunning iteration 791/1500... Est. remaining: 14m 5sRunning iteration 801/1500... Est. remaining: 13m 47sbest_combination: {'lookbacks': [138, 159, 170], 'score': np.float64(0.7829366718101866), 'visits': 1}
Running iteration 811/1500... Est. remaining: 13m 30sRunning iteration 821/1500... Est. remaining: 13m 13sRunning iteration 831/1500... Est. remaining: 12m 56sRunning iteration 841/1500... Est. remaining: 12m 39sRunning iteration 851/1500... Est. remaining: 12m 23sRunning iteration 861/1500... Est. remaining: 12m 7sRunning iteration 871/1500... Est. remaining: 11m 51sRunning iteration 881/1500... Est. remaining: 11m 36sRunning iteration 891/1500... Est. remaining: 11m 20sRunning iteration 901/1500... Est. remaining: 11m 5sbest_combination: {'lookbacks': [138, 159, 170], 'score': np.float64(0.7829366718101866), 'visits': 1}
Running iteration 911/1500... Est. remaining: 10m 50sRunning iteration 921/1500... Est. remaining: 10m 36sRunning iteration 931/1500... Est. remaining: 10m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,455,174,788
Annual Return: 48.26%
Sharpe Ratio: 1.58226
Sortino Ratio: 1.542
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 0.966
Lookback periods: [146, 156, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 10m 8sRunning iteration 951/1500... Est. remaining: 9m 53sRunning iteration 961/1500... Est. remaining: 9m 40sRunning iteration 971/1500... Est. remaining: 9m 26sRunning iteration 981/1500... Est. remaining: 9m 12sRunning iteration 991/1500... Est. remaining: 8m 59sRunning iteration 1001/1500... Est. remaining: 8m 46sbest_combination: {'lookbacks': [146, 156, 172], 'score': np.float64(0.9658134013565395), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 8m 33sRunning iteration 1021/1500... Est. remaining: 8m 20sRunning iteration 1031/1500... Est. remaining: 8m 7sRunning iteration 1041/1500... Est. remaining: 7m 54sRunning iteration 1051/1500... Est. remaining: 7m 42sRunning iteration 1061/1500... Est. remaining: 7m 29sRunning iteration 1071/1500... Est. remaining: 7m 17sRunning iteration 1081/1500... Est. remaining: 7m 5sRunning iteration 1091/1500... Est. remaining: 6m 53sRunning iteration 1101/1500... Est. remaining: 6m 41sbest_combination: {'lookbacks': [146, 156, 172], 'score': np.float64(0.9658134013565395), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 6m 30sRunning iteration 1121/1500... Est. remaining: 6m 18sRunning iteration 1131/1500... Est. remaining: 6m 6sRunning iteration 1141/1500... Est. remaining: 5m 55sRunning iteration 1151/1500... Est. remaining: 5m 44sRunning iteration 1161/1500... Est. remaining: 5m 33sRunning iteration 1171/1500... Est. remaining: 5m 21sRunning iteration 1181/1500... Est. remaining: 5m 11sRunning iteration 1191/1500... Est. remaining: 5m 0sRunning iteration 1201/1500... Est. remaining: 4m 49sbest_combination: {'lookbacks': [146, 156, 172], 'score': np.float64(0.9658134013565395), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 4m 38sRunning iteration 1221/1500... Est. remaining: 4m 28sRunning iteration 1231/1500... Est. remaining: 4m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,916,119,872
Annual Return: 43.77%
Sharpe Ratio: 1.58945
Sortino Ratio: 1.492
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.498
Lookback periods: [50, 51, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1241/1500... Est. remaining: 4m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,912,007
Annual Return: 45.27%
Sharpe Ratio: 1.61355
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.670
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1251/1500... Est. remaining: 3m 57sRunning iteration 1261/1500... Est. remaining: 3m 46sRunning iteration 1271/1500... Est. remaining: 3m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.729
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1281/1500... Est. remaining: 3m 26sRunning iteration 1291/1500... Est. remaining: 3m 16sRunning iteration 1301/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 56sRunning iteration 1321/1500... Est. remaining: 2m 46sRunning iteration 1331/1500... Est. remaining: 2m 37sRunning iteration 1341/1500... Est. remaining: 2m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.046
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1351/1500... Est. remaining: 2m 17sRunning iteration 1361/1500... Est. remaining: 2m 8sRunning iteration 1371/1500... Est. remaining: 1m 58sRunning iteration 1381/1500... Est. remaining: 1m 49sRunning iteration 1391/1500... Est. remaining: 1m 39sRunning iteration 1401/1500... Est. remaining: 1m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 21sRunning iteration 1421/1500... Est. remaining: 1m 11sRunning iteration 1431/1500... Est. remaining: 1m 2sRunning iteration 1441/1500... Est. remaining: 0m 53sRunning iteration 1451/1500... Est. remaining: 0m 44sRunning iteration 1461/1500... Est. remaining: 0m 35sRunning iteration 1471/1500... Est. remaining: 0m 26sRunning iteration 1481/1500... Est. remaining: 0m 17sRunning iteration 1491/1500... Est. remaining: 0m 8s
Monte Carlo simulation completed in 22.0 minutes
Best normalized score: 2.05
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.0463)

Monte Carlo simulation completed in 22.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Sun Aug 24 14:39:28 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,477,293,870
Annual Return: 40.98%
Sharpe Ratio: 1.34430
Sortino Ratio: 1.303
Max Drawdown: -71.8%
Avg Drawdown: -14.0%
Normalized Score: -1.442
Lookback periods: [119, 171, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $995,084,872
Annual Return: 39.38%
Sharpe Ratio: 1.32206
Sortino Ratio: 1.268
Max Drawdown: -64.2%
Avg Drawdown: -13.6%
Normalized Score: -1.366
Lookback periods: [120, 126, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,186,473,467
Annual Return: 44.14%
Sharpe Ratio: 1.45319
Sortino Ratio: 1.415
Max Drawdown: -62.4%
Avg Drawdown: -12.2%
Normalized Score: -0.257
Lookback periods: [130, 161, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,170,264,501
Annual Return: 44.12%
Sharpe Ratio: 1.47697
Sortino Ratio: 1.434
Max Drawdown: -58.7%
Avg Drawdown: -12.7%
Normalized Score: -0.149
Lookback periods: [113, 133, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,041,294,792
Annual Return: 42.30%
Sharpe Ratio: 1.45818
Sortino Ratio: 1.367
Max Drawdown: -52.3%
Avg Drawdown: -9.7%
Normalized Score: 0.217
Lookback periods: [50, 98, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 51sRunning iteration 41/1500... Est. remaining: 18m 46sRunning iteration 51/1500... Est. remaining: 17m 24sRunning iteration 61/1500... Est. remaining: 16m 29sRunning iteration 71/1500... Est. remaining: 15m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,644,641,867
Annual Return: 45.72%
Sharpe Ratio: 1.48762
Sortino Ratio: 1.449
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.239
Lookback periods: [169, 186, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 15m 39sRunning iteration 91/1500... Est. remaining: 15m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,231,061,528
Annual Return: 46.96%
Sharpe Ratio: 1.52779
Sortino Ratio: 1.497
Max Drawdown: -59.0%
Avg Drawdown: -12.2%
Normalized Score: 0.347
Lookback periods: [145, 174, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 15m 6sbest_combination: {'lookbacks': [145, 174, 181], 'score': np.float64(0.34692098181095643), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 46sRunning iteration 121/1500... Est. remaining: 14m 27sRunning iteration 131/1500... Est. remaining: 14m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,921,206,217
Annual Return: 46.74%
Sharpe Ratio: 1.51666
Sortino Ratio: 1.479
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.412
Lookback periods: [167, 178, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 14m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,332,505,559
Annual Return: 47.65%
Sharpe Ratio: 1.54409
Sortino Ratio: 1.507
Max Drawdown: -61.3%
Avg Drawdown: -11.0%
Normalized Score: 0.542
Lookback periods: [155, 158, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 14m 2sRunning iteration 161/1500... Est. remaining: 13m 48sRunning iteration 171/1500... Est. remaining: 13m 34sRunning iteration 181/1500... Est. remaining: 13m 22sRunning iteration 191/1500... Est. remaining: 13m 10sRunning iteration 201/1500... Est. remaining: 12m 59sbest_combination: {'lookbacks': [155, 158, 158], 'score': np.float64(0.5418019186908661), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 48sRunning iteration 221/1500... Est. remaining: 12m 38sRunning iteration 231/1500... Est. remaining: 12m 28sRunning iteration 241/1500... Est. remaining: 12m 19sRunning iteration 251/1500... Est. remaining: 12m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,885,786,401
Annual Return: 47.96%
Sharpe Ratio: 1.56510
Sortino Ratio: 1.540
Max Drawdown: -56.9%
Avg Drawdown: -10.9%
Normalized Score: 0.816
Lookback periods: [159, 161, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 12m 7sRunning iteration 271/1500... Est. remaining: 11m 59sRunning iteration 281/1500... Est. remaining: 11m 50sRunning iteration 291/1500... Est. remaining: 11m 41sRunning iteration 301/1500... Est. remaining: 11m 33sbest_combination: {'lookbacks': [159, 161, 164], 'score': np.float64(0.8163277106004072), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 25sRunning iteration 321/1500... Est. remaining: 11m 17sRunning iteration 331/1500... Est. remaining: 11m 10sRunning iteration 341/1500... Est. remaining: 11m 3sRunning iteration 351/1500... Est. remaining: 10m 55sRunning iteration 361/1500... Est. remaining: 10m 48sRunning iteration 371/1500... Est. remaining: 10m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,405,338,212
Annual Return: 48.23%
Sharpe Ratio: 1.58170
Sortino Ratio: 1.549
Max Drawdown: -58.2%
Avg Drawdown: -10.8%
Normalized Score: 0.846
Lookback periods: [146, 156, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 10m 38sRunning iteration 391/1500... Est. remaining: 10m 31sRunning iteration 401/1500... Est. remaining: 10m 24sbest_combination: {'lookbacks': [146, 156, 163], 'score': np.float64(0.8455602676609402), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 17sRunning iteration 421/1500... Est. remaining: 10m 11sRunning iteration 431/1500... Est. remaining: 10m 4sRunning iteration 441/1500... Est. remaining: 9m 57sRunning iteration 451/1500... Est. remaining: 9m 51sRunning iteration 461/1500... Est. remaining: 9m 44sRunning iteration 471/1500... Est. remaining: 9m 38sRunning iteration 481/1500... Est. remaining: 9m 31sRunning iteration 491/1500... Est. remaining: 9m 25sRunning iteration 501/1500... Est. remaining: 9m 19sbest_combination: {'lookbacks': [146, 156, 163], 'score': np.float64(0.8455602676609402), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 12sRunning iteration 521/1500... Est. remaining: 9m 6sRunning iteration 531/1500... Est. remaining: 9m 0sRunning iteration 541/1500... Est. remaining: 8m 54sRunning iteration 551/1500... Est. remaining: 8m 48sRunning iteration 561/1500... Est. remaining: 8m 42sRunning iteration 571/1500... Est. remaining: 8m 35sRunning iteration 581/1500... Est. remaining: 8m 29sRunning iteration 591/1500... Est. remaining: 8m 23sRunning iteration 601/1500... Est. remaining: 8m 17sbest_combination: {'lookbacks': [146, 156, 163], 'score': np.float64(0.8455602676609402), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 11sRunning iteration 621/1500... Est. remaining: 8m 5sRunning iteration 631/1500... Est. remaining: 7m 59sRunning iteration 641/1500... Est. remaining: 7m 54sRunning iteration 651/1500... Est. remaining: 7m 48sRunning iteration 661/1500... Est. remaining: 7m 42sRunning iteration 671/1500... Est. remaining: 7m 36sRunning iteration 681/1500... Est. remaining: 7m 30sRunning iteration 691/1500... Est. remaining: 7m 25sRunning iteration 701/1500... Est. remaining: 7m 19sbest_combination: {'lookbacks': [146, 156, 163], 'score': np.float64(0.8455602676609402), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 13sRunning iteration 721/1500... Est. remaining: 7m 8sRunning iteration 731/1500... Est. remaining: 7m 2sRunning iteration 741/1500... Est. remaining: 6m 56sRunning iteration 751/1500... Est. remaining: 6m 50sRunning iteration 761/1500... Est. remaining: 6m 45sRunning iteration 771/1500... Est. remaining: 6m 39sRunning iteration 781/1500... Est. remaining: 6m 33sRunning iteration 791/1500... Est. remaining: 6m 28sRunning iteration 801/1500... Est. remaining: 6m 22sbest_combination: {'lookbacks': [146, 156, 163], 'score': np.float64(0.8455602676609402), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 16sRunning iteration 821/1500... Est. remaining: 6m 11sRunning iteration 831/1500... Est. remaining: 6m 5sRunning iteration 841/1500... Est. remaining: 6m 0sRunning iteration 851/1500... Est. remaining: 5m 54sRunning iteration 861/1500... Est. remaining: 5m 49sRunning iteration 871/1500... Est. remaining: 5m 43sRunning iteration 881/1500... Est. remaining: 5m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,800,902,170
Annual Return: 48.89%
Sharpe Ratio: 1.60576
Sortino Ratio: 1.566
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.984
Lookback periods: [136, 154, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 5m 33sRunning iteration 901/1500... Est. remaining: 5m 27sbest_combination: {'lookbacks': [136, 154, 171], 'score': np.float64(0.9843923453943406), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 22sRunning iteration 921/1500... Est. remaining: 5m 16sRunning iteration 931/1500... Est. remaining: 5m 11sRunning iteration 941/1500... Est. remaining: 5m 5sRunning iteration 951/1500... Est. remaining: 4m 59sRunning iteration 961/1500... Est. remaining: 4m 54sRunning iteration 971/1500... Est. remaining: 4m 48sRunning iteration 981/1500... Est. remaining: 4m 43sRunning iteration 991/1500... Est. remaining: 4m 37sRunning iteration 1001/1500... Est. remaining: 4m 32sbest_combination: {'lookbacks': [136, 154, 171], 'score': np.float64(0.9843923453943406), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 26sRunning iteration 1021/1500... Est. remaining: 4m 21sRunning iteration 1031/1500... Est. remaining: 4m 15sRunning iteration 1041/1500... Est. remaining: 4m 10sRunning iteration 1051/1500... Est. remaining: 4m 4sRunning iteration 1061/1500... Est. remaining: 3m 58sRunning iteration 1071/1500... Est. remaining: 3m 53sRunning iteration 1081/1500... Est. remaining: 3m 47sRunning iteration 1091/1500... Est. remaining: 3m 42sRunning iteration 1101/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [136, 154, 171], 'score': np.float64(0.9843923453943406), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 31sRunning iteration 1121/1500... Est. remaining: 3m 26sRunning iteration 1131/1500... Est. remaining: 3m 20sRunning iteration 1141/1500... Est. remaining: 3m 15sRunning iteration 1151/1500... Est. remaining: 3m 9sRunning iteration 1161/1500... Est. remaining: 3m 4sRunning iteration 1171/1500... Est. remaining: 2m 58sRunning iteration 1181/1500... Est. remaining: 2m 53sRunning iteration 1191/1500... Est. remaining: 2m 47sRunning iteration 1201/1500... Est. remaining: 2m 42sbest_combination: {'lookbacks': [136, 154, 171], 'score': np.float64(0.9843923453943406), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 36sRunning iteration 1221/1500... Est. remaining: 2m 31sRunning iteration 1231/1500... Est. remaining: 2m 25sRunning iteration 1241/1500... Est. remaining: 2m 20sRunning iteration 1251/1500... Est. remaining: 2m 15sRunning iteration 1261/1500... Est. remaining: 2m 9sRunning iteration 1271/1500... Est. remaining: 2m 4sRunning iteration 1281/1500... Est. remaining: 1m 58sRunning iteration 1291/1500... Est. remaining: 1m 53sRunning iteration 1301/1500... Est. remaining: 1m 48sbest_combination: {'lookbacks': [136, 154, 171], 'score': np.float64(0.9843923453943406), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 42sRunning iteration 1321/1500... Est. remaining: 1m 37sRunning iteration 1331/1500... Est. remaining: 1m 31sRunning iteration 1341/1500... Est. remaining: 1m 26sRunning iteration 1351/1500... Est. remaining: 1m 20sRunning iteration 1361/1500... Est. remaining: 1m 15sRunning iteration 1371/1500... Est. remaining: 1m 10sRunning iteration 1381/1500... Est. remaining: 1m 4sRunning iteration 1391/1500... Est. remaining: 0m 59sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [136, 154, 171], 'score': np.float64(0.9843923453943406), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.5 minutes
Best normalized score: 0.98
best_combination: {'lookbacks': [136, 154, 171], 'score': np.float64(0.9843923453943406), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 154, 171] (score: 0.9844)

Monte Carlo simulation completed in 13.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 154, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 111 selections (26.7%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,800,902,170.43
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Sun Aug 24 14:53:05 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,580,976,374
Annual Return: 41.25%
Sharpe Ratio: 1.38662
Sortino Ratio: 1.328
Max Drawdown: -66.3%
Avg Drawdown: -12.9%
Normalized Score: -0.982
Lookback periods: [95, 158, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,698,126,273
Annual Return: 43.45%
Sharpe Ratio: 1.42840
Sortino Ratio: 1.391
Max Drawdown: -71.3%
Avg Drawdown: -12.9%
Normalized Score: -0.793
Lookback periods: [111, 173, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,451,210
Annual Return: 43.98%
Sharpe Ratio: 1.42828
Sortino Ratio: 1.400
Max Drawdown: -60.2%
Avg Drawdown: -11.6%
Normalized Score: -0.157
Lookback periods: [166, 186, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 42sRunning iteration 31/1500... Est. remaining: 19m 24sRunning iteration 41/1500... Est. remaining: 17m 42sRunning iteration 51/1500... Est. remaining: 16m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,526,272,161
Annual Return: 41.11%
Sharpe Ratio: 1.48923
Sortino Ratio: 1.384
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 0.824
Lookback periods: [51, 51, 93] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 21sRunning iteration 71/1500... Est. remaining: 15m 44sRunning iteration 81/1500... Est. remaining: 15m 16sRunning iteration 91/1500... Est. remaining: 14m 51sRunning iteration 101/1500... Est. remaining: 14m 30sbest_combination: {'lookbacks': [51, 51, 93], 'score': np.float64(0.8243525078826612), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 16sRunning iteration 121/1500... Est. remaining: 14m 4sRunning iteration 131/1500... Est. remaining: 13m 49sRunning iteration 141/1500... Est. remaining: 13m 38sRunning iteration 151/1500... Est. remaining: 13m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,301,456,641
Annual Return: 49.50%
Sharpe Ratio: 1.58586
Sortino Ratio: 1.557
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.841
Lookback periods: [177, 189, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 13m 26sRunning iteration 171/1500... Est. remaining: 13m 14sRunning iteration 181/1500... Est. remaining: 13m 4sRunning iteration 191/1500... Est. remaining: 12m 54sRunning iteration 201/1500... Est. remaining: 12m 44sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 34sRunning iteration 221/1500... Est. remaining: 12m 25sRunning iteration 231/1500... Est. remaining: 12m 16sRunning iteration 241/1500... Est. remaining: 12m 8sRunning iteration 251/1500... Est. remaining: 12m 0sRunning iteration 261/1500... Est. remaining: 11m 52sRunning iteration 271/1500... Est. remaining: 11m 44sRunning iteration 281/1500... Est. remaining: 11m 36sRunning iteration 291/1500... Est. remaining: 11m 29sRunning iteration 301/1500... Est. remaining: 11m 22sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 15sRunning iteration 321/1500... Est. remaining: 11m 8sRunning iteration 331/1500... Est. remaining: 11m 1sRunning iteration 341/1500... Est. remaining: 10m 54sRunning iteration 351/1500... Est. remaining: 10m 47sRunning iteration 361/1500... Est. remaining: 10m 40sRunning iteration 371/1500... Est. remaining: 10m 34sRunning iteration 381/1500... Est. remaining: 10m 27sRunning iteration 391/1500... Est. remaining: 10m 21sRunning iteration 401/1500... Est. remaining: 10m 15sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 8sRunning iteration 421/1500... Est. remaining: 10m 2sRunning iteration 431/1500... Est. remaining: 9m 56sRunning iteration 441/1500... Est. remaining: 9m 49sRunning iteration 451/1500... Est. remaining: 9m 43sRunning iteration 461/1500... Est. remaining: 9m 37sRunning iteration 471/1500... Est. remaining: 9m 31sRunning iteration 481/1500... Est. remaining: 9m 25sRunning iteration 491/1500... Est. remaining: 9m 19sRunning iteration 501/1500... Est. remaining: 9m 13sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 7sRunning iteration 521/1500... Est. remaining: 9m 1sRunning iteration 531/1500... Est. remaining: 8m 55sRunning iteration 541/1500... Est. remaining: 8m 49sRunning iteration 551/1500... Est. remaining: 8m 43sRunning iteration 561/1500... Est. remaining: 8m 37sRunning iteration 571/1500... Est. remaining: 8m 31sRunning iteration 581/1500... Est. remaining: 8m 25sRunning iteration 591/1500... Est. remaining: 8m 19sRunning iteration 601/1500... Est. remaining: 8m 13sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 8sRunning iteration 621/1500... Est. remaining: 8m 2sRunning iteration 631/1500... Est. remaining: 7m 56sRunning iteration 641/1500... Est. remaining: 7m 51sRunning iteration 651/1500... Est. remaining: 7m 45sRunning iteration 661/1500... Est. remaining: 7m 39sRunning iteration 671/1500... Est. remaining: 7m 34sRunning iteration 681/1500... Est. remaining: 7m 28sRunning iteration 691/1500... Est. remaining: 7m 22sRunning iteration 701/1500... Est. remaining: 7m 17sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.8414809142933445), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 11sRunning iteration 721/1500... Est. remaining: 7m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,855,896,414
Annual Return: 49.71%
Sharpe Ratio: 1.59449
Sortino Ratio: 1.557
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.956
Lookback periods: [178, 193, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 7m 1sRunning iteration 741/1500... Est. remaining: 6m 56sRunning iteration 751/1500... Est. remaining: 6m 50sRunning iteration 761/1500... Est. remaining: 6m 45sRunning iteration 771/1500... Est. remaining: 6m 39sRunning iteration 781/1500... Est. remaining: 6m 33sRunning iteration 791/1500... Est. remaining: 6m 28sRunning iteration 801/1500... Est. remaining: 6m 22sbest_combination: {'lookbacks': [178, 193, 197], 'score': np.float64(0.9559320414592742), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 17sRunning iteration 821/1500... Est. remaining: 6m 11sRunning iteration 831/1500... Est. remaining: 6m 6sRunning iteration 841/1500... Est. remaining: 6m 0sRunning iteration 851/1500... Est. remaining: 5m 55sRunning iteration 861/1500... Est. remaining: 5m 49sRunning iteration 871/1500... Est. remaining: 5m 43sRunning iteration 881/1500... Est. remaining: 5m 38sRunning iteration 891/1500... Est. remaining: 5m 32sRunning iteration 901/1500... Est. remaining: 5m 27sbest_combination: {'lookbacks': [178, 193, 197], 'score': np.float64(0.9559320414592742), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 21sRunning iteration 921/1500... Est. remaining: 5m 16sRunning iteration 931/1500... Est. remaining: 5m 10sRunning iteration 941/1500... Est. remaining: 5m 5sRunning iteration 951/1500... Est. remaining: 4m 59sRunning iteration 961/1500... Est. remaining: 4m 54sRunning iteration 971/1500... Est. remaining: 4m 48sRunning iteration 981/1500... Est. remaining: 4m 43sRunning iteration 991/1500... Est. remaining: 4m 37sRunning iteration 1001/1500... Est. remaining: 4m 32sbest_combination: {'lookbacks': [178, 193, 197], 'score': np.float64(0.9559320414592742), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 27sRunning iteration 1021/1500... Est. remaining: 4m 21sRunning iteration 1031/1500... Est. remaining: 4m 15sRunning iteration 1041/1500... Est. remaining: 4m 10sRunning iteration 1051/1500... Est. remaining: 4m 5sRunning iteration 1061/1500... Est. remaining: 3m 59sRunning iteration 1071/1500... Est. remaining: 3m 54sRunning iteration 1081/1500... Est. remaining: 3m 48sRunning iteration 1091/1500... Est. remaining: 3m 43sRunning iteration 1101/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [178, 193, 197], 'score': np.float64(0.9559320414592742), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 32sRunning iteration 1121/1500... Est. remaining: 3m 26sRunning iteration 1131/1500... Est. remaining: 3m 21sRunning iteration 1141/1500... Est. remaining: 3m 15sRunning iteration 1151/1500... Est. remaining: 3m 10sRunning iteration 1161/1500... Est. remaining: 3m 4sRunning iteration 1171/1500... Est. remaining: 2m 59sRunning iteration 1181/1500... Est. remaining: 2m 53sRunning iteration 1191/1500... Est. remaining: 2m 48sRunning iteration 1201/1500... Est. remaining: 2m 42sbest_combination: {'lookbacks': [178, 193, 197], 'score': np.float64(0.9559320414592742), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $13,950,221,616
Annual Return: 50.41%
Sharpe Ratio: 1.62315
Sortino Ratio: 1.584
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 1.062
Lookback periods: [181, 189, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1221/1500... Est. remaining: 2m 32sRunning iteration 1231/1500... Est. remaining: 2m 26sRunning iteration 1241/1500... Est. remaining: 2m 21sRunning iteration 1251/1500... Est. remaining: 2m 15sRunning iteration 1261/1500... Est. remaining: 2m 10sRunning iteration 1271/1500... Est. remaining: 2m 4sRunning iteration 1281/1500... Est. remaining: 1m 59sRunning iteration 1291/1500... Est. remaining: 1m 53sRunning iteration 1301/1500... Est. remaining: 1m 48sbest_combination: {'lookbacks': [181, 189, 194], 'score': np.float64(1.0617412810017144), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 43sRunning iteration 1321/1500... Est. remaining: 1m 37sRunning iteration 1331/1500... Est. remaining: 1m 32sRunning iteration 1341/1500... Est. remaining: 1m 26sRunning iteration 1351/1500... Est. remaining: 1m 21sRunning iteration 1361/1500... Est. remaining: 1m 15sRunning iteration 1371/1500... Est. remaining: 1m 10sRunning iteration 1381/1500... Est. remaining: 1m 5sRunning iteration 1391/1500... Est. remaining: 0m 59sRunning iteration 1401/1500... Est. remaining: 0m 54sbest_combination: {'lookbacks': [181, 189, 194], 'score': np.float64(1.0617412810017144), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 27sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.5 minutes
Best normalized score: 1.06
best_combination: {'lookbacks': [181, 189, 194], 'score': np.float64(1.0617412810017144), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [181, 189, 194] (score: 1.0617)

Monte Carlo simulation completed in 13.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [181, 189, 194] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 122 selections (29.3%)
2. sp500_hma: 100 selections (24.0%)
3. naz100_pine: 84 selections (20.2%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 40 selections (9.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $13,950,221,615.80
Average Annualized Gain: 50.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Sun Aug 24 15:06:44 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $773,386,006
Annual Return: 38.37%
Sharpe Ratio: 1.32272
Sortino Ratio: 1.240
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: -0.982
Lookback periods: [63, 110, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,725,311,288
Annual Return: 41.61%
Sharpe Ratio: 1.36739
Sortino Ratio: 1.332
Max Drawdown: -60.3%
Avg Drawdown: -12.7%
Normalized Score: -0.735
Lookback periods: [134, 173, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,123,122,701
Annual Return: 48.58%
Sharpe Ratio: 1.58204
Sortino Ratio: 1.548
Max Drawdown: -58.5%
Avg Drawdown: -11.0%
Normalized Score: 0.840
Lookback periods: [152, 159, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 58sRunning iteration 21/1500... Est. remaining: 21m 54sRunning iteration 31/1500... Est. remaining: 18m 43sRunning iteration 41/1500... Est. remaining: 17m 6sRunning iteration 51/1500... Est. remaining: 16m 9sRunning iteration 61/1500... Est. remaining: 15m 27sRunning iteration 71/1500... Est. remaining: 14m 55sRunning iteration 81/1500... Est. remaining: 14m 31sRunning iteration 91/1500... Est. remaining: 14m 13sRunning iteration 101/1500... Est. remaining: 13m 58sbest_combination: {'lookbacks': [152, 159, 171], 'score': np.float64(0.8395722783739977), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 43sRunning iteration 121/1500... Est. remaining: 13m 30sRunning iteration 131/1500... Est. remaining: 13m 18sRunning iteration 141/1500... Est. remaining: 13m 6sRunning iteration 151/1500... Est. remaining: 12m 57sRunning iteration 161/1500... Est. remaining: 12m 47sRunning iteration 171/1500... Est. remaining: 12m 38sRunning iteration 181/1500... Est. remaining: 12m 28sRunning iteration 191/1500... Est. remaining: 12m 20sRunning iteration 201/1500... Est. remaining: 12m 15sbest_combination: {'lookbacks': [152, 159, 171], 'score': np.float64(0.8395722783739977), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 10sRunning iteration 221/1500... Est. remaining: 12m 3sRunning iteration 231/1500... Est. remaining: 11m 56sRunning iteration 241/1500... Est. remaining: 11m 50sRunning iteration 251/1500... Est. remaining: 11m 45sRunning iteration 261/1500... Est. remaining: 11m 38sRunning iteration 271/1500... Est. remaining: 11m 32sRunning iteration 281/1500... Est. remaining: 11m 25sRunning iteration 291/1500... Est. remaining: 11m 18sRunning iteration 301/1500... Est. remaining: 11m 12sbest_combination: {'lookbacks': [152, 159, 171], 'score': np.float64(0.8395722783739977), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 7sRunning iteration 321/1500... Est. remaining: 11m 1sRunning iteration 331/1500... Est. remaining: 10m 55sRunning iteration 341/1500... Est. remaining: 10m 49sRunning iteration 351/1500... Est. remaining: 10m 43sRunning iteration 361/1500... Est. remaining: 10m 36sRunning iteration 371/1500... Est. remaining: 10m 30sRunning iteration 381/1500... Est. remaining: 10m 23sRunning iteration 391/1500... Est. remaining: 10m 17sRunning iteration 401/1500... Est. remaining: 10m 10sbest_combination: {'lookbacks': [152, 159, 171], 'score': np.float64(0.8395722783739977), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 5sRunning iteration 421/1500... Est. remaining: 9m 59sRunning iteration 431/1500... Est. remaining: 9m 54sRunning iteration 441/1500... Est. remaining: 9m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,481,474,855
Annual Return: 48.75%
Sharpe Ratio: 1.58005
Sortino Ratio: 1.544
Max Drawdown: -57.2%
Avg Drawdown: -10.7%
Normalized Score: 0.941
Lookback periods: [154, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 45sRunning iteration 461/1500... Est. remaining: 9m 39sRunning iteration 471/1500... Est. remaining: 9m 33sRunning iteration 481/1500... Est. remaining: 9m 26sRunning iteration 491/1500... Est. remaining: 9m 20sRunning iteration 501/1500... Est. remaining: 9m 14sbest_combination: {'lookbacks': [154, 157, 172], 'score': np.float64(0.9407088532817077), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 8sRunning iteration 521/1500... Est. remaining: 9m 2sRunning iteration 531/1500... Est. remaining: 8m 57sRunning iteration 541/1500... Est. remaining: 8m 51sRunning iteration 551/1500... Est. remaining: 8m 45sRunning iteration 561/1500... Est. remaining: 8m 39sRunning iteration 571/1500... Est. remaining: 8m 33sRunning iteration 581/1500... Est. remaining: 8m 27sRunning iteration 591/1500... Est. remaining: 8m 22sRunning iteration 601/1500... Est. remaining: 8m 16sbest_combination: {'lookbacks': [154, 157, 172], 'score': np.float64(0.9407088532817077), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 10sRunning iteration 621/1500... Est. remaining: 8m 4sRunning iteration 631/1500... Est. remaining: 7m 59sRunning iteration 641/1500... Est. remaining: 7m 53sRunning iteration 651/1500... Est. remaining: 7m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,599,776,726
Annual Return: 48.80%
Sharpe Ratio: 1.59565
Sortino Ratio: 1.556
Max Drawdown: -55.0%
Avg Drawdown: -10.4%
Normalized Score: 1.097
Lookback periods: [157, 159, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 43sRunning iteration 671/1500... Est. remaining: 7m 38sRunning iteration 681/1500... Est. remaining: 7m 32sRunning iteration 691/1500... Est. remaining: 7m 27sRunning iteration 701/1500... Est. remaining: 7m 22sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(1.096763205366607), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 17sRunning iteration 721/1500... Est. remaining: 7m 11sRunning iteration 731/1500... Est. remaining: 7m 5sRunning iteration 741/1500... Est. remaining: 6m 59sRunning iteration 751/1500... Est. remaining: 6m 54sRunning iteration 761/1500... Est. remaining: 6m 48sRunning iteration 771/1500... Est. remaining: 6m 42sRunning iteration 781/1500... Est. remaining: 6m 36sRunning iteration 791/1500... Est. remaining: 6m 31sRunning iteration 801/1500... Est. remaining: 6m 25sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(1.096763205366607), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 19sRunning iteration 821/1500... Est. remaining: 6m 14sRunning iteration 831/1500... Est. remaining: 6m 8sRunning iteration 841/1500... Est. remaining: 6m 3sRunning iteration 851/1500... Est. remaining: 5m 57sRunning iteration 861/1500... Est. remaining: 5m 51sRunning iteration 871/1500... Est. remaining: 5m 45sRunning iteration 881/1500... Est. remaining: 5m 40sRunning iteration 891/1500... Est. remaining: 5m 34sRunning iteration 901/1500... Est. remaining: 5m 29sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(1.096763205366607), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 23sRunning iteration 921/1500... Est. remaining: 5m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,836,029,240
Annual Return: 48.91%
Sharpe Ratio: 1.59924
Sortino Ratio: 1.566
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.112
Lookback periods: [156, 160, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 5m 12sRunning iteration 941/1500... Est. remaining: 5m 7sRunning iteration 951/1500... Est. remaining: 5m 1sRunning iteration 961/1500... Est. remaining: 4m 56sRunning iteration 971/1500... Est. remaining: 4m 50sRunning iteration 981/1500... Est. remaining: 4m 45sRunning iteration 991/1500... Est. remaining: 4m 39sRunning iteration 1001/1500... Est. remaining: 4m 34sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.1118860036712301), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 28sRunning iteration 1021/1500... Est. remaining: 4m 22sRunning iteration 1031/1500... Est. remaining: 4m 17sRunning iteration 1041/1500... Est. remaining: 4m 11sRunning iteration 1051/1500... Est. remaining: 4m 6sRunning iteration 1061/1500... Est. remaining: 4m 0sRunning iteration 1071/1500... Est. remaining: 3m 55sRunning iteration 1081/1500... Est. remaining: 3m 49sRunning iteration 1091/1500... Est. remaining: 3m 44sRunning iteration 1101/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.1118860036712301), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 32sRunning iteration 1121/1500... Est. remaining: 3m 27sRunning iteration 1131/1500... Est. remaining: 3m 21sRunning iteration 1141/1500... Est. remaining: 3m 16sRunning iteration 1151/1500... Est. remaining: 3m 10sRunning iteration 1161/1500... Est. remaining: 3m 5sRunning iteration 1171/1500... Est. remaining: 2m 59sRunning iteration 1181/1500... Est. remaining: 2m 54sRunning iteration 1191/1500... Est. remaining: 2m 48sRunning iteration 1201/1500... Est. remaining: 2m 43sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.1118860036712301), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 38sRunning iteration 1221/1500... Est. remaining: 2m 32sRunning iteration 1231/1500... Est. remaining: 2m 27sRunning iteration 1241/1500... Est. remaining: 2m 21sRunning iteration 1251/1500... Est. remaining: 2m 16sRunning iteration 1261/1500... Est. remaining: 2m 10sRunning iteration 1271/1500... Est. remaining: 2m 5sRunning iteration 1281/1500... Est. remaining: 1m 59sRunning iteration 1291/1500... Est. remaining: 1m 54sRunning iteration 1301/1500... Est. remaining: 1m 48sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.1118860036712301), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 43sRunning iteration 1321/1500... Est. remaining: 1m 37sRunning iteration 1331/1500... Est. remaining: 1m 32sRunning iteration 1341/1500... Est. remaining: 1m 26sRunning iteration 1351/1500... Est. remaining: 1m 21sRunning iteration 1361/1500... Est. remaining: 1m 16sRunning iteration 1371/1500... Est. remaining: 1m 10sRunning iteration 1381/1500... Est. remaining: 1m 5sRunning iteration 1391/1500... Est. remaining: 0m 59sRunning iteration 1401/1500... Est. remaining: 0m 54sbest_combination: {'lookbacks': [156, 160, 168], 'score': np.float64(1.1118860036712301), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 27sRunning iteration 1461/1500... Est. remaining: 0m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,563,996,271
Annual Return: 49.60%
Sharpe Ratio: 1.60796
Sortino Ratio: 1.582
Max Drawdown: -59.0%
Avg Drawdown: -10.1%
Normalized Score: 1.143
Lookback periods: [158, 161, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1471/1500... Est. remaining: 0m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,606,407,930
Annual Return: 49.62%
Sharpe Ratio: 1.60975
Sortino Ratio: 1.572
Max Drawdown: -59.0%
Avg Drawdown: -10.0%
Normalized Score: 1.146
Lookback periods: [156, 158, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.6 minutes
Best normalized score: 1.15
best_combination: {'lookbacks': [156, 158, 174], 'score': np.float64(1.1463182621484695), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 158, 174] (score: 1.1463)

Monte Carlo simulation completed in 13.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 158, 174] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 116 selections (27.9%)
2. sp500_hma: 112 selections (26.9%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,606,407,930.11
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Sun Aug 24 15:20:29 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $567,669,199
Annual Return: 37.14%
Sharpe Ratio: 1.25386
Sortino Ratio: 1.187
Max Drawdown: -57.0%
Avg Drawdown: -14.5%
Normalized Score: -1.676
Lookback periods: [71, 181, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,084,503,904
Annual Return: 39.73%
Sharpe Ratio: 1.32827
Sortino Ratio: 1.275
Max Drawdown: -73.3%
Avg Drawdown: -13.5%
Normalized Score: -1.602
Lookback periods: [97, 167, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $924,246,257
Annual Return: 39.08%
Sharpe Ratio: 1.32517
Sortino Ratio: 1.265
Max Drawdown: -60.6%
Avg Drawdown: -14.0%
Normalized Score: -1.327
Lookback periods: [97, 120, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,582,581,005
Annual Return: 45.66%
Sharpe Ratio: 1.47933
Sortino Ratio: 1.448
Max Drawdown: -65.7%
Avg Drawdown: -12.5%
Normalized Score: -0.187
Lookback periods: [152, 153, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 34m 20sRunning iteration 21/1500... Est. remaining: 23m 30sRunning iteration 31/1500... Est. remaining: 19m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,454,254
Annual Return: 44.82%
Sharpe Ratio: 1.46485
Sortino Ratio: 1.423
Max Drawdown: -58.1%
Avg Drawdown: -12.6%
Normalized Score: -0.084
Lookback periods: [144, 145, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,580,519,125
Annual Return: 44.63%
Sharpe Ratio: 1.45316
Sortino Ratio: 1.417
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.053
Lookback periods: [157, 165, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 19m 35sRunning iteration 51/1500... Est. remaining: 18m 9sRunning iteration 61/1500... Est. remaining: 17m 11sRunning iteration 71/1500... Est. remaining: 16m 24sRunning iteration 81/1500... Est. remaining: 15m 50sRunning iteration 91/1500... Est. remaining: 15m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,476,197,737
Annual Return: 45.56%
Sharpe Ratio: 1.48836
Sortino Ratio: 1.457
Max Drawdown: -59.0%
Avg Drawdown: -12.1%
Normalized Score: 0.121
Lookback periods: [159, 177, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 15m 15sbest_combination: {'lookbacks': [159, 177, 182], 'score': np.float64(0.12099305397865763), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $974,486,252
Annual Return: 39.30%
Sharpe Ratio: 1.41049
Sortino Ratio: 1.309
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.380
Lookback periods: [51, 59, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 15m 11sRunning iteration 121/1500... Est. remaining: 14m 50sRunning iteration 131/1500... Est. remaining: 14m 31sRunning iteration 141/1500... Est. remaining: 14m 13sRunning iteration 151/1500... Est. remaining: 13m 58sRunning iteration 161/1500... Est. remaining: 13m 45sRunning iteration 171/1500... Est. remaining: 13m 31sRunning iteration 181/1500... Est. remaining: 13m 19sRunning iteration 191/1500... Est. remaining: 13m 8sRunning iteration 201/1500... Est. remaining: 12m 58sbest_combination: {'lookbacks': [51, 59, 83], 'score': np.float64(0.38011211145732504), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 48sRunning iteration 221/1500... Est. remaining: 12m 39sRunning iteration 231/1500... Est. remaining: 12m 30sRunning iteration 241/1500... Est. remaining: 12m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,699,867,003
Annual Return: 47.86%
Sharpe Ratio: 1.55759
Sortino Ratio: 1.525
Max Drawdown: -61.3%
Avg Drawdown: -11.0%
Normalized Score: 0.604
Lookback periods: [150, 158, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 12m 19sRunning iteration 261/1500... Est. remaining: 12m 10sRunning iteration 271/1500... Est. remaining: 12m 2sRunning iteration 281/1500... Est. remaining: 11m 53sRunning iteration 291/1500... Est. remaining: 11m 46sRunning iteration 301/1500... Est. remaining: 11m 38sbest_combination: {'lookbacks': [150, 158, 161], 'score': np.float64(0.6040493994986936), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 30sRunning iteration 321/1500... Est. remaining: 11m 22sRunning iteration 331/1500... Est. remaining: 11m 15sRunning iteration 341/1500... Est. remaining: 11m 8sRunning iteration 351/1500... Est. remaining: 11m 1sRunning iteration 361/1500... Est. remaining: 10m 54sRunning iteration 371/1500... Est. remaining: 10m 46sRunning iteration 381/1500... Est. remaining: 10m 39sRunning iteration 391/1500... Est. remaining: 10m 33sRunning iteration 401/1500... Est. remaining: 10m 26sbest_combination: {'lookbacks': [150, 158, 161], 'score': np.float64(0.6040493994986936), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 20sRunning iteration 421/1500... Est. remaining: 10m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,784,143,537
Annual Return: 48.42%
Sharpe Ratio: 1.59494
Sortino Ratio: 1.562
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.818
Lookback periods: [139, 153, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 10m 10sRunning iteration 441/1500... Est. remaining: 10m 4sRunning iteration 451/1500... Est. remaining: 9m 57sRunning iteration 461/1500... Est. remaining: 9m 51sRunning iteration 471/1500... Est. remaining: 9m 44sRunning iteration 481/1500... Est. remaining: 9m 38sRunning iteration 491/1500... Est. remaining: 9m 31sRunning iteration 501/1500... Est. remaining: 9m 25sbest_combination: {'lookbacks': [139, 153, 159], 'score': np.float64(0.8176873186595888), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 20sRunning iteration 521/1500... Est. remaining: 9m 14sRunning iteration 531/1500... Est. remaining: 9m 7sRunning iteration 541/1500... Est. remaining: 9m 1sRunning iteration 551/1500... Est. remaining: 8m 55sRunning iteration 561/1500... Est. remaining: 8m 48sRunning iteration 571/1500... Est. remaining: 8m 42sRunning iteration 581/1500... Est. remaining: 8m 36sRunning iteration 591/1500... Est. remaining: 8m 30sRunning iteration 601/1500... Est. remaining: 8m 24sbest_combination: {'lookbacks': [139, 153, 159], 'score': np.float64(0.8176873186595888), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 19sRunning iteration 621/1500... Est. remaining: 8m 13sRunning iteration 631/1500... Est. remaining: 8m 7sRunning iteration 641/1500... Est. remaining: 8m 1sRunning iteration 651/1500... Est. remaining: 7m 55sRunning iteration 661/1500... Est. remaining: 7m 49sRunning iteration 671/1500... Est. remaining: 7m 43sRunning iteration 681/1500... Est. remaining: 7m 38sRunning iteration 691/1500... Est. remaining: 7m 32sRunning iteration 701/1500... Est. remaining: 7m 26sbest_combination: {'lookbacks': [139, 153, 159], 'score': np.float64(0.8176873186595888), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 20sRunning iteration 721/1500... Est. remaining: 7m 14sRunning iteration 731/1500... Est. remaining: 7m 8sRunning iteration 741/1500... Est. remaining: 7m 2sRunning iteration 751/1500... Est. remaining: 6m 57sRunning iteration 761/1500... Est. remaining: 6m 52sRunning iteration 771/1500... Est. remaining: 6m 46sRunning iteration 781/1500... Est. remaining: 6m 40sRunning iteration 791/1500... Est. remaining: 6m 34sRunning iteration 801/1500... Est. remaining: 6m 29sbest_combination: {'lookbacks': [139, 153, 159], 'score': np.float64(0.8176873186595888), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 23sRunning iteration 821/1500... Est. remaining: 6m 17sRunning iteration 831/1500... Est. remaining: 6m 11sRunning iteration 841/1500... Est. remaining: 6m 5sRunning iteration 851/1500... Est. remaining: 6m 0sRunning iteration 861/1500... Est. remaining: 5m 54sRunning iteration 871/1500... Est. remaining: 5m 48sRunning iteration 881/1500... Est. remaining: 5m 42sRunning iteration 891/1500... Est. remaining: 5m 37sRunning iteration 901/1500... Est. remaining: 5m 31sbest_combination: {'lookbacks': [139, 153, 159], 'score': np.float64(0.8176873186595888), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 25sRunning iteration 921/1500... Est. remaining: 5m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,405,338,212
Annual Return: 48.23%
Sharpe Ratio: 1.58170
Sortino Ratio: 1.549
Max Drawdown: -58.2%
Avg Drawdown: -10.8%
Normalized Score: 0.846
Lookback periods: [146, 156, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 5m 15sRunning iteration 941/1500... Est. remaining: 5m 9sRunning iteration 951/1500... Est. remaining: 5m 3sRunning iteration 961/1500... Est. remaining: 4m 58sRunning iteration 971/1500... Est. remaining: 4m 52sRunning iteration 981/1500... Est. remaining: 4m 46sRunning iteration 991/1500... Est. remaining: 4m 41sRunning iteration 1001/1500... Est. remaining: 4m 35sbest_combination: {'lookbacks': [146, 156, 163], 'score': np.float64(0.8455602676609402), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 29sRunning iteration 1021/1500... Est. remaining: 4m 24sRunning iteration 1031/1500... Est. remaining: 4m 18sRunning iteration 1041/1500... Est. remaining: 4m 13sRunning iteration 1051/1500... Est. remaining: 4m 7sRunning iteration 1061/1500... Est. remaining: 4m 2sRunning iteration 1071/1500... Est. remaining: 3m 56sRunning iteration 1081/1500... Est. remaining: 3m 50sRunning iteration 1091/1500... Est. remaining: 3m 45sRunning iteration 1101/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [146, 156, 163], 'score': np.float64(0.8455602676609402), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 34sRunning iteration 1121/1500... Est. remaining: 3m 28sRunning iteration 1131/1500... Est. remaining: 3m 23sRunning iteration 1141/1500... Est. remaining: 3m 17sRunning iteration 1151/1500... Est. remaining: 3m 12sRunning iteration 1161/1500... Est. remaining: 3m 6sRunning iteration 1171/1500... Est. remaining: 3m 0sRunning iteration 1181/1500... Est. remaining: 2m 55sRunning iteration 1191/1500... Est. remaining: 2m 49sRunning iteration 1201/1500... Est. remaining: 2m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,925,353,787
Annual Return: 48.49%
Sharpe Ratio: 1.58296
Sortino Ratio: 1.559
Max Drawdown: -56.9%
Avg Drawdown: -10.8%
Normalized Score: 0.921
Lookback periods: [159, 161, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [159, 161, 166], 'score': np.float64(0.9212104566481484), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,553,518,508
Annual Return: 49.96%
Sharpe Ratio: 1.61745
Sortino Ratio: 1.582
Max Drawdown: -59.7%
Avg Drawdown: -11.3%
Normalized Score: 0.982
Lookback periods: [150, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1221/1500... Est. remaining: 2m 33sRunning iteration 1231/1500... Est. remaining: 2m 28sRunning iteration 1241/1500... Est. remaining: 2m 22sRunning iteration 1251/1500... Est. remaining: 2m 17sRunning iteration 1261/1500... Est. remaining: 2m 11sRunning iteration 1271/1500... Est. remaining: 2m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,235,985,998
Annual Return: 48.63%
Sharpe Ratio: 1.58821
Sortino Ratio: 1.564
Max Drawdown: -56.9%
Avg Drawdown: -10.6%
Normalized Score: 0.987
Lookback periods: [158, 161, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1281/1500... Est. remaining: 2m 0sRunning iteration 1291/1500... Est. remaining: 1m 55sRunning iteration 1301/1500... Est. remaining: 1m 49sbest_combination: {'lookbacks': [158, 161, 165], 'score': np.float64(0.9866458669965489), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 44sRunning iteration 1321/1500... Est. remaining: 1m 38sRunning iteration 1331/1500... Est. remaining: 1m 33sRunning iteration 1341/1500... Est. remaining: 1m 27sRunning iteration 1351/1500... Est. remaining: 1m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,491,532,588
Annual Return: 49.94%
Sharpe Ratio: 1.61502
Sortino Ratio: 1.583
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 1.026
Lookback periods: [150, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1361/1500... Est. remaining: 1m 16sRunning iteration 1371/1500... Est. remaining: 1m 11sRunning iteration 1381/1500... Est. remaining: 1m 5sRunning iteration 1391/1500... Est. remaining: 1m 0sRunning iteration 1401/1500... Est. remaining: 0m 54sbest_combination: {'lookbacks': [150, 154, 156], 'score': np.float64(1.0264347960878069), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 49sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 38sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 27sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.7 minutes
Best normalized score: 1.03
best_combination: {'lookbacks': [150, 154, 156], 'score': np.float64(1.0264347960878069), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [150, 154, 156] (score: 1.0264)

Monte Carlo simulation completed in 13.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [150, 154, 156] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 111 selections (26.7%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 77 selections (18.5%)
5. cash: 34 selections (8.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,491,532,588.20
Average Annualized Gain: 49.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Sun Aug 24 15:34:20 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $172,677,561
Annual Return: 32.51%
Sharpe Ratio: 1.14171
Sortino Ratio: 1.052
Max Drawdown: -52.3%
Avg Drawdown: -13.1%
Normalized Score: -2.087
Lookback periods: [77, 100, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $495,090,646
Annual Return: 36.60%
Sharpe Ratio: 1.26513
Sortino Ratio: 1.183
Max Drawdown: -52.3%
Avg Drawdown: -12.1%
Normalized Score: -1.195
Lookback periods: [83, 88, 91] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,479,417,070
Annual Return: 40.98%
Sharpe Ratio: 1.37283
Sortino Ratio: 1.320
Max Drawdown: -66.5%
Avg Drawdown: -12.9%
Normalized Score: -1.046
Lookback periods: [96, 130, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,009,877,598
Annual Return: 45.10%
Sharpe Ratio: 1.46770
Sortino Ratio: 1.428
Max Drawdown: -61.6%
Avg Drawdown: -11.5%
Normalized Score: 0.003
Lookback periods: [163, 191, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 35m 3sRunning iteration 21/1500... Est. remaining: 24m 14sRunning iteration 31/1500... Est. remaining: 20m 29sRunning iteration 41/1500... Est. remaining: 18m 29sRunning iteration 51/1500... Est. remaining: 17m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,430,857,217
Annual Return: 43.02%
Sharpe Ratio: 1.47843
Sortino Ratio: 1.407
Max Drawdown: -52.3%
Avg Drawdown: -10.5%
Normalized Score: 0.245
Lookback periods: [88, 99, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 58sRunning iteration 71/1500... Est. remaining: 16m 25sRunning iteration 81/1500... Est. remaining: 15m 53sRunning iteration 91/1500... Est. remaining: 15m 28sRunning iteration 101/1500... Est. remaining: 15m 3sbest_combination: {'lookbacks': [88, 99, 146], 'score': np.float64(0.24468693218548462), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,001,864,840
Annual Return: 46.03%
Sharpe Ratio: 1.48807
Sortino Ratio: 1.451
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.270
Lookback periods: [168, 187, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 59sRunning iteration 121/1500... Est. remaining: 14m 40sRunning iteration 131/1500... Est. remaining: 14m 23sRunning iteration 141/1500... Est. remaining: 14m 7sRunning iteration 151/1500... Est. remaining: 13m 53sRunning iteration 161/1500... Est. remaining: 13m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,285,790,880
Annual Return: 46.99%
Sharpe Ratio: 1.53296
Sortino Ratio: 1.496
Max Drawdown: -57.9%
Avg Drawdown: -11.9%
Normalized Score: 0.434
Lookback periods: [147, 154, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 13m 39sRunning iteration 181/1500... Est. remaining: 13m 28sRunning iteration 191/1500... Est. remaining: 13m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,911,937,038
Annual Return: 48.94%
Sharpe Ratio: 1.60579
Sortino Ratio: 1.561
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.971
Lookback periods: [138, 156, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 13m 13sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.9712969571403336), 'visits': 1}
Running iteration 211/1500... Est. remaining: 13m 4sRunning iteration 221/1500... Est. remaining: 12m 54sRunning iteration 231/1500... Est. remaining: 12m 44sRunning iteration 241/1500... Est. remaining: 12m 34sRunning iteration 251/1500... Est. remaining: 12m 25sRunning iteration 261/1500... Est. remaining: 12m 16sRunning iteration 271/1500... Est. remaining: 12m 7sRunning iteration 281/1500... Est. remaining: 11m 58sRunning iteration 291/1500... Est. remaining: 11m 49sRunning iteration 301/1500... Est. remaining: 11m 42sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.9712969571403336), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 37sRunning iteration 321/1500... Est. remaining: 11m 31sRunning iteration 331/1500... Est. remaining: 11m 25sRunning iteration 341/1500... Est. remaining: 11m 19sRunning iteration 351/1500... Est. remaining: 11m 12sRunning iteration 361/1500... Est. remaining: 11m 4sRunning iteration 371/1500... Est. remaining: 10m 57sRunning iteration 381/1500... Est. remaining: 10m 50sRunning iteration 391/1500... Est. remaining: 10m 43sRunning iteration 401/1500... Est. remaining: 10m 36sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.9712969571403336), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 29sRunning iteration 421/1500... Est. remaining: 10m 23sRunning iteration 431/1500... Est. remaining: 10m 17sRunning iteration 441/1500... Est. remaining: 10m 12sRunning iteration 451/1500... Est. remaining: 10m 6sRunning iteration 461/1500... Est. remaining: 10m 0sRunning iteration 471/1500... Est. remaining: 9m 54sRunning iteration 481/1500... Est. remaining: 9m 47sRunning iteration 491/1500... Est. remaining: 9m 41sRunning iteration 501/1500... Est. remaining: 9m 35sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.9712969571403336), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 29sRunning iteration 521/1500... Est. remaining: 9m 22sRunning iteration 531/1500... Est. remaining: 9m 15sRunning iteration 541/1500... Est. remaining: 9m 8sRunning iteration 551/1500... Est. remaining: 9m 2sRunning iteration 561/1500... Est. remaining: 8m 55sRunning iteration 571/1500... Est. remaining: 8m 49sRunning iteration 581/1500... Est. remaining: 8m 43sRunning iteration 591/1500... Est. remaining: 8m 36sRunning iteration 601/1500... Est. remaining: 8m 30sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.9712969571403336), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 24sRunning iteration 621/1500... Est. remaining: 8m 18sRunning iteration 631/1500... Est. remaining: 8m 12sRunning iteration 641/1500... Est. remaining: 8m 5sRunning iteration 651/1500... Est. remaining: 7m 59sRunning iteration 661/1500... Est. remaining: 7m 53sRunning iteration 671/1500... Est. remaining: 7m 47sRunning iteration 681/1500... Est. remaining: 7m 41sRunning iteration 691/1500... Est. remaining: 7m 35sRunning iteration 701/1500... Est. remaining: 7m 29sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.9712969571403336), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 23sRunning iteration 721/1500... Est. remaining: 7m 17sRunning iteration 731/1500... Est. remaining: 7m 11sRunning iteration 741/1500... Est. remaining: 7m 5sRunning iteration 751/1500... Est. remaining: 6m 59sRunning iteration 761/1500... Est. remaining: 6m 53sRunning iteration 771/1500... Est. remaining: 6m 48sRunning iteration 781/1500... Est. remaining: 6m 42sRunning iteration 791/1500... Est. remaining: 6m 36sRunning iteration 801/1500... Est. remaining: 6m 30sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.9712969571403336), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 24sRunning iteration 821/1500... Est. remaining: 6m 19sRunning iteration 831/1500... Est. remaining: 6m 13sRunning iteration 841/1500... Est. remaining: 6m 7sRunning iteration 851/1500... Est. remaining: 6m 2sRunning iteration 861/1500... Est. remaining: 5m 56sRunning iteration 871/1500... Est. remaining: 5m 50sRunning iteration 881/1500... Est. remaining: 5m 45sRunning iteration 891/1500... Est. remaining: 5m 40sRunning iteration 901/1500... Est. remaining: 5m 34sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.9712969571403336), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 28sRunning iteration 921/1500... Est. remaining: 5m 23sRunning iteration 931/1500... Est. remaining: 5m 17sRunning iteration 941/1500... Est. remaining: 5m 11sRunning iteration 951/1500... Est. remaining: 5m 5sRunning iteration 961/1500... Est. remaining: 4m 59sRunning iteration 971/1500... Est. remaining: 4m 54sRunning iteration 981/1500... Est. remaining: 4m 48sRunning iteration 991/1500... Est. remaining: 4m 42sRunning iteration 1001/1500... Est. remaining: 4m 37sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.9712969571403336), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 31sRunning iteration 1021/1500... Est. remaining: 4m 25sRunning iteration 1031/1500... Est. remaining: 4m 20sRunning iteration 1041/1500... Est. remaining: 4m 14sRunning iteration 1051/1500... Est. remaining: 4m 8sRunning iteration 1061/1500... Est. remaining: 4m 3sRunning iteration 1071/1500... Est. remaining: 3m 57sRunning iteration 1081/1500... Est. remaining: 3m 51sRunning iteration 1091/1500... Est. remaining: 3m 46sRunning iteration 1101/1500... Est. remaining: 3m 40sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.9712969571403336), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 34sRunning iteration 1121/1500... Est. remaining: 3m 29sRunning iteration 1131/1500... Est. remaining: 3m 23sRunning iteration 1141/1500... Est. remaining: 3m 18sRunning iteration 1151/1500... Est. remaining: 3m 12sRunning iteration 1161/1500... Est. remaining: 3m 6sRunning iteration 1171/1500... Est. remaining: 3m 1sRunning iteration 1181/1500... Est. remaining: 2m 55sRunning iteration 1191/1500... Est. remaining: 2m 50sRunning iteration 1201/1500... Est. remaining: 2m 44sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.9712969571403336), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 39sRunning iteration 1221/1500... Est. remaining: 2m 33sRunning iteration 1231/1500... Est. remaining: 2m 28sRunning iteration 1241/1500... Est. remaining: 2m 22sRunning iteration 1251/1500... Est. remaining: 2m 16sRunning iteration 1261/1500... Est. remaining: 2m 11sRunning iteration 1271/1500... Est. remaining: 2m 5sRunning iteration 1281/1500... Est. remaining: 2m 0sRunning iteration 1291/1500... Est. remaining: 1m 54sRunning iteration 1301/1500... Est. remaining: 1m 49sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.9712969571403336), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 43sRunning iteration 1321/1500... Est. remaining: 1m 38sRunning iteration 1331/1500... Est. remaining: 1m 32sRunning iteration 1341/1500... Est. remaining: 1m 27sRunning iteration 1351/1500... Est. remaining: 1m 21sRunning iteration 1361/1500... Est. remaining: 1m 16sRunning iteration 1371/1500... Est. remaining: 1m 10sRunning iteration 1381/1500... Est. remaining: 1m 5sRunning iteration 1391/1500... Est. remaining: 0m 59sRunning iteration 1401/1500... Est. remaining: 0m 54sbest_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.9712969571403336), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 49sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 38sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 27sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.6 minutes
Best normalized score: 0.97
best_combination: {'lookbacks': [138, 156, 171], 'score': np.float64(0.9712969571403336), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [138, 156, 171] (score: 0.9713)

Monte Carlo simulation completed in 13.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [138, 156, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 113 selections (27.2%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,911,937,037.67
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Sun Aug 24 15:48:04 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $183,872,456
Annual Return: 32.75%
Sharpe Ratio: 1.13805
Sortino Ratio: 1.055
Max Drawdown: -52.3%
Avg Drawdown: -14.3%
Normalized Score: -2.244
Lookback periods: [72, 91, 108] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $141,324,189
Annual Return: 31.75%
Sharpe Ratio: 1.10533
Sortino Ratio: 1.026
Max Drawdown: -52.3%
Avg Drawdown: -13.0%
Normalized Score: -2.229
Lookback periods: [66, 77, 79] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $513,534,828
Annual Return: 36.75%
Sharpe Ratio: 1.27857
Sortino Ratio: 1.188
Max Drawdown: -71.2%
Avg Drawdown: -13.8%
Normalized Score: -2.060
Lookback periods: [62, 117, 135] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $911,804,832
Annual Return: 39.03%
Sharpe Ratio: 1.31251
Sortino Ratio: 1.251
Max Drawdown: -58.6%
Avg Drawdown: -13.3%
Normalized Score: -1.203
Lookback periods: [107, 116, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $999,524,724
Annual Return: 39.40%
Sharpe Ratio: 1.35817
Sortino Ratio: 1.284
Max Drawdown: -52.3%
Avg Drawdown: -12.4%
Normalized Score: -0.722
Lookback periods: [93, 93, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 36m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,817,089,877
Annual Return: 44.89%
Sharpe Ratio: 1.46766
Sortino Ratio: 1.431
Max Drawdown: -60.9%
Avg Drawdown: -13.3%
Normalized Score: -0.266
Lookback periods: [133, 149, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,638,028,115
Annual Return: 45.71%
Sharpe Ratio: 1.48366
Sortino Ratio: 1.461
Max Drawdown: -63.0%
Avg Drawdown: -11.1%
Normalized Score: 0.146
Lookback periods: [153, 166, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 28m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,914,381,175
Annual Return: 46.74%
Sharpe Ratio: 1.53412
Sortino Ratio: 1.488
Max Drawdown: -55.0%
Avg Drawdown: -11.9%
Normalized Score: 0.488
Lookback periods: [146, 160, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 23m 55sRunning iteration 41/1500... Est. remaining: 20m 58sRunning iteration 51/1500... Est. remaining: 19m 12sRunning iteration 61/1500... Est. remaining: 17m 58sRunning iteration 71/1500... Est. remaining: 17m 5sRunning iteration 81/1500... Est. remaining: 16m 23sRunning iteration 91/1500... Est. remaining: 15m 49sRunning iteration 101/1500... Est. remaining: 15m 21sbest_combination: {'lookbacks': [146, 160, 181], 'score': np.float64(0.48762686513478865), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 59sRunning iteration 121/1500... Est. remaining: 14m 38sRunning iteration 131/1500... Est. remaining: 14m 20sRunning iteration 141/1500... Est. remaining: 14m 4sRunning iteration 151/1500... Est. remaining: 13m 49sRunning iteration 161/1500... Est. remaining: 13m 36sRunning iteration 171/1500... Est. remaining: 13m 24sRunning iteration 181/1500... Est. remaining: 13m 11sRunning iteration 191/1500... Est. remaining: 13m 0sRunning iteration 201/1500... Est. remaining: 12m 50sbest_combination: {'lookbacks': [146, 160, 181], 'score': np.float64(0.48762686513478865), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 39sRunning iteration 221/1500... Est. remaining: 12m 30sRunning iteration 231/1500... Est. remaining: 12m 20sRunning iteration 241/1500... Est. remaining: 12m 12sRunning iteration 251/1500... Est. remaining: 12m 3sRunning iteration 261/1500... Est. remaining: 11m 54sRunning iteration 271/1500... Est. remaining: 11m 46sRunning iteration 281/1500... Est. remaining: 11m 38sRunning iteration 291/1500... Est. remaining: 11m 31sRunning iteration 301/1500... Est. remaining: 11m 23sbest_combination: {'lookbacks': [146, 160, 181], 'score': np.float64(0.48762686513478865), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 16sRunning iteration 321/1500... Est. remaining: 11m 8sRunning iteration 331/1500... Est. remaining: 11m 1sRunning iteration 341/1500... Est. remaining: 10m 54sRunning iteration 351/1500... Est. remaining: 10m 47sRunning iteration 361/1500... Est. remaining: 10m 41sRunning iteration 371/1500... Est. remaining: 10m 34sRunning iteration 381/1500... Est. remaining: 10m 27sRunning iteration 391/1500... Est. remaining: 10m 20sRunning iteration 401/1500... Est. remaining: 10m 14sbest_combination: {'lookbacks': [146, 160, 181], 'score': np.float64(0.48762686513478865), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,811,700,777
Annual Return: 47.33%
Sharpe Ratio: 1.55501
Sortino Ratio: 1.514
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 0.702
Lookback periods: [142, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 10m 11sRunning iteration 421/1500... Est. remaining: 10m 4sRunning iteration 431/1500... Est. remaining: 9m 58sRunning iteration 441/1500... Est. remaining: 9m 52sRunning iteration 451/1500... Est. remaining: 9m 45sRunning iteration 461/1500... Est. remaining: 9m 39sRunning iteration 471/1500... Est. remaining: 9m 33sRunning iteration 481/1500... Est. remaining: 9m 26sRunning iteration 491/1500... Est. remaining: 9m 20sRunning iteration 501/1500... Est. remaining: 9m 14sbest_combination: {'lookbacks': [142, 157, 172], 'score': np.float64(0.702133080225661), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 8sRunning iteration 521/1500... Est. remaining: 9m 2sRunning iteration 531/1500... Est. remaining: 8m 55sRunning iteration 541/1500... Est. remaining: 8m 49sRunning iteration 551/1500... Est. remaining: 8m 43sRunning iteration 561/1500... Est. remaining: 8m 37sRunning iteration 571/1500... Est. remaining: 8m 31sRunning iteration 581/1500... Est. remaining: 8m 25sRunning iteration 591/1500... Est. remaining: 8m 19sRunning iteration 601/1500... Est. remaining: 8m 13sbest_combination: {'lookbacks': [142, 157, 172], 'score': np.float64(0.702133080225661), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,046,010,972
Annual Return: 49.00%
Sharpe Ratio: 1.59075
Sortino Ratio: 1.563
Max Drawdown: -60.1%
Avg Drawdown: -11.6%
Normalized Score: 0.757
Lookback periods: [153, 154, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/1500... Est. remaining: 8m 9sRunning iteration 621/1500... Est. remaining: 8m 3sRunning iteration 631/1500... Est. remaining: 7m 57sRunning iteration 641/1500... Est. remaining: 7m 52sRunning iteration 651/1500... Est. remaining: 7m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,775,736,070
Annual Return: 47.31%
Sharpe Ratio: 1.53872
Sortino Ratio: 1.511
Max Drawdown: -55.0%
Avg Drawdown: -10.8%
Normalized Score: 0.762
Lookback periods: [156, 164, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 42sRunning iteration 671/1500... Est. remaining: 7m 36sRunning iteration 681/1500... Est. remaining: 7m 30sRunning iteration 691/1500... Est. remaining: 7m 24sRunning iteration 701/1500... Est. remaining: 7m 18sbest_combination: {'lookbacks': [156, 164, 168], 'score': np.float64(0.7622561468731728), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 13sRunning iteration 721/1500... Est. remaining: 7m 7sRunning iteration 731/1500... Est. remaining: 7m 1sRunning iteration 741/1500... Est. remaining: 6m 55sRunning iteration 751/1500... Est. remaining: 6m 50sRunning iteration 761/1500... Est. remaining: 6m 44sRunning iteration 771/1500... Est. remaining: 6m 38sRunning iteration 781/1500... Est. remaining: 6m 33sRunning iteration 791/1500... Est. remaining: 6m 27sRunning iteration 801/1500... Est. remaining: 6m 21sbest_combination: {'lookbacks': [156, 164, 168], 'score': np.float64(0.7622561468731728), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,257,472,821
Annual Return: 48.16%
Sharpe Ratio: 1.57008
Sortino Ratio: 1.533
Max Drawdown: -58.5%
Avg Drawdown: -10.9%
Normalized Score: 0.774
Lookback periods: [150, 159, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 811/1500... Est. remaining: 6m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,917,109,652
Annual Return: 42.04%
Sharpe Ratio: 1.52123
Sortino Ratio: 1.423
Max Drawdown: -37.8%
Avg Drawdown: -9.7%
Normalized Score: 0.834
Lookback periods: [51, 55, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 821/1500... Est. remaining: 6m 12sRunning iteration 831/1500... Est. remaining: 6m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,948,076,278
Annual Return: 42.11%
Sharpe Ratio: 1.52099
Sortino Ratio: 1.423
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.007
Lookback periods: [50, 54, 92] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,577,165,362
Annual Return: 43.26%
Sharpe Ratio: 1.55673
Sortino Ratio: 1.456
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.262
Lookback periods: [51, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 841/1500... Est. remaining: 6m 3sRunning iteration 851/1500... Est. remaining: 5m 57sRunning iteration 861/1500... Est. remaining: 5m 51sRunning iteration 871/1500... Est. remaining: 5m 46sRunning iteration 881/1500... Est. remaining: 5m 40sRunning iteration 891/1500... Est. remaining: 5m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,525,950,064
Annual Return: 43.18%
Sharpe Ratio: 1.55179
Sortino Ratio: 1.460
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.364
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,090,622,705
Annual Return: 44.01%
Sharpe Ratio: 1.57961
Sortino Ratio: 1.488
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.562
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 901/1500... Est. remaining: 5m 31sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.5624359116410709), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,912,007
Annual Return: 45.27%
Sharpe Ratio: 1.61355
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.670
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 921/1500... Est. remaining: 5m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.046
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 5m 15sRunning iteration 941/1500... Est. remaining: 5m 10sRunning iteration 951/1500... Est. remaining: 5m 4sRunning iteration 961/1500... Est. remaining: 4m 58sRunning iteration 971/1500... Est. remaining: 4m 52sRunning iteration 981/1500... Est. remaining: 4m 47sRunning iteration 991/1500... Est. remaining: 4m 41sRunning iteration 1001/1500... Est. remaining: 4m 35sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 30sRunning iteration 1021/1500... Est. remaining: 4m 24sRunning iteration 1031/1500... Est. remaining: 4m 18sRunning iteration 1041/1500... Est. remaining: 4m 13sRunning iteration 1051/1500... Est. remaining: 4m 7sRunning iteration 1061/1500... Est. remaining: 4m 1sRunning iteration 1071/1500... Est. remaining: 3m 56sRunning iteration 1081/1500... Est. remaining: 3m 50sRunning iteration 1091/1500... Est. remaining: 3m 44sRunning iteration 1101/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 33sRunning iteration 1121/1500... Est. remaining: 3m 28sRunning iteration 1131/1500... Est. remaining: 3m 22sRunning iteration 1141/1500... Est. remaining: 3m 17sRunning iteration 1151/1500... Est. remaining: 3m 11sRunning iteration 1161/1500... Est. remaining: 3m 5sRunning iteration 1171/1500... Est. remaining: 3m 0sRunning iteration 1181/1500... Est. remaining: 2m 54sRunning iteration 1191/1500... Est. remaining: 2m 49sRunning iteration 1201/1500... Est. remaining: 2m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 38sRunning iteration 1221/1500... Est. remaining: 2m 32sRunning iteration 1231/1500... Est. remaining: 2m 27sRunning iteration 1241/1500... Est. remaining: 2m 21sRunning iteration 1251/1500... Est. remaining: 2m 16sRunning iteration 1261/1500... Est. remaining: 2m 10sRunning iteration 1271/1500... Est. remaining: 2m 5sRunning iteration 1281/1500... Est. remaining: 1m 59sRunning iteration 1291/1500... Est. remaining: 1m 54sRunning iteration 1301/1500... Est. remaining: 1m 48sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 43sRunning iteration 1321/1500... Est. remaining: 1m 37sRunning iteration 1331/1500... Est. remaining: 1m 32sRunning iteration 1341/1500... Est. remaining: 1m 26sRunning iteration 1351/1500... Est. remaining: 1m 21sRunning iteration 1361/1500... Est. remaining: 1m 16sRunning iteration 1371/1500... Est. remaining: 1m 10sRunning iteration 1381/1500... Est. remaining: 1m 5sRunning iteration 1391/1500... Est. remaining: 0m 59sRunning iteration 1401/1500... Est. remaining: 0m 54sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 27sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.5 minutes
Best normalized score: 2.05
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.0463)

Monte Carlo simulation completed in 13.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Sun Aug 24 16:01:43 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $389,858,926
Annual Return: 35.66%
Sharpe Ratio: 1.25278
Sortino Ratio: 1.158
Max Drawdown: -54.1%
Avg Drawdown: -13.1%
Normalized Score: -1.553
Lookback periods: [82, 89, 111] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,302,018,614
Annual Return: 40.47%
Sharpe Ratio: 1.35211
Sortino Ratio: 1.298
Max Drawdown: -68.9%
Avg Drawdown: -13.1%
Normalized Score: -1.254
Lookback periods: [99, 161, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,525,483,877
Annual Return: 41.11%
Sharpe Ratio: 1.36769
Sortino Ratio: 1.320
Max Drawdown: -65.4%
Avg Drawdown: -14.2%
Normalized Score: -1.202
Lookback periods: [116, 147, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $616,686,898
Annual Return: 37.47%
Sharpe Ratio: 1.33827
Sortino Ratio: 1.238
Max Drawdown: -56.2%
Avg Drawdown: -11.5%
Normalized Score: -0.989
Lookback periods: [50, 60, 107] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,368,046,758
Annual Return: 40.67%
Sharpe Ratio: 1.40274
Sortino Ratio: 1.325
Max Drawdown: -53.0%
Avg Drawdown: -12.9%
Normalized Score: -0.581
Lookback periods: [94, 94, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $823,077,914
Annual Return: 38.62%
Sharpe Ratio: 1.36470
Sortino Ratio: 1.274
Max Drawdown: -52.1%
Avg Drawdown: -10.6%
Normalized Score: -0.523
Lookback periods: [54, 58, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,803,009,048
Annual Return: 45.86%
Sharpe Ratio: 1.48688
Sortino Ratio: 1.454
Max Drawdown: -59.4%
Avg Drawdown: -11.5%
Normalized Score: 0.219
Lookback periods: [154, 185, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 22m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,443,843,392
Annual Return: 43.04%
Sharpe Ratio: 1.47464
Sortino Ratio: 1.403
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: 0.220
Lookback periods: [92, 125, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 20m 49sRunning iteration 51/1500... Est. remaining: 19m 5sRunning iteration 61/1500... Est. remaining: 17m 59sRunning iteration 71/1500... Est. remaining: 17m 8sRunning iteration 81/1500... Est. remaining: 16m 25sRunning iteration 91/1500... Est. remaining: 15m 52sRunning iteration 101/1500... Est. remaining: 15m 25sbest_combination: {'lookbacks': [92, 125, 146], 'score': np.float64(0.21964335362616047), 'visits': 1}
Running iteration 111/1500... Est. remaining: 15m 2sRunning iteration 121/1500... Est. remaining: 14m 42sRunning iteration 131/1500... Est. remaining: 14m 26sRunning iteration 141/1500... Est. remaining: 14m 10sRunning iteration 151/1500... Est. remaining: 13m 54sRunning iteration 161/1500... Est. remaining: 13m 40sRunning iteration 171/1500... Est. remaining: 13m 26sRunning iteration 181/1500... Est. remaining: 13m 14sRunning iteration 191/1500... Est. remaining: 13m 3sRunning iteration 201/1500... Est. remaining: 12m 52sbest_combination: {'lookbacks': [92, 125, 146], 'score': np.float64(0.21964335362616047), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 41sRunning iteration 221/1500... Est. remaining: 12m 31sRunning iteration 231/1500... Est. remaining: 12m 22sRunning iteration 241/1500... Est. remaining: 12m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,315,293,776
Annual Return: 46.28%
Sharpe Ratio: 1.51357
Sortino Ratio: 1.470
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: 0.261
Lookback periods: [147, 183, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 12m 12sRunning iteration 261/1500... Est. remaining: 12m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,524,137,611
Annual Return: 47.15%
Sharpe Ratio: 1.51121
Sortino Ratio: 1.465
Max Drawdown: -59.6%
Avg Drawdown: -11.6%
Normalized Score: 0.374
Lookback periods: [187, 188, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/1500... Est. remaining: 12m 1sRunning iteration 281/1500... Est. remaining: 11m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,037,369,398
Annual Return: 47.47%
Sharpe Ratio: 1.54490
Sortino Ratio: 1.516
Max Drawdown: -61.3%
Avg Drawdown: -11.1%
Normalized Score: 0.536
Lookback periods: [155, 160, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 291/1500... Est. remaining: 11m 49sRunning iteration 301/1500... Est. remaining: 11m 41sbest_combination: {'lookbacks': [155, 160, 163], 'score': np.float64(0.5364826760427394), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 33sRunning iteration 321/1500... Est. remaining: 11m 30sRunning iteration 331/1500... Est. remaining: 11m 23sRunning iteration 341/1500... Est. remaining: 11m 15sRunning iteration 351/1500... Est. remaining: 11m 9sRunning iteration 361/1500... Est. remaining: 11m 1sRunning iteration 371/1500... Est. remaining: 10m 55sRunning iteration 381/1500... Est. remaining: 10m 48sRunning iteration 391/1500... Est. remaining: 10m 41sRunning iteration 401/1500... Est. remaining: 10m 34sbest_combination: {'lookbacks': [155, 160, 163], 'score': np.float64(0.5364826760427394), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 27sRunning iteration 421/1500... Est. remaining: 10m 21sRunning iteration 431/1500... Est. remaining: 10m 15sRunning iteration 441/1500... Est. remaining: 10m 8sRunning iteration 451/1500... Est. remaining: 10m 2sRunning iteration 461/1500... Est. remaining: 9m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,681,641,555
Annual Return: 47.85%
Sharpe Ratio: 1.56101
Sortino Ratio: 1.528
Max Drawdown: -58.2%
Avg Drawdown: -10.9%
Normalized Score: 0.738
Lookback periods: [157, 158, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 9m 52sRunning iteration 481/1500... Est. remaining: 9m 46sRunning iteration 491/1500... Est. remaining: 9m 40sRunning iteration 501/1500... Est. remaining: 9m 33sbest_combination: {'lookbacks': [157, 158, 161], 'score': np.float64(0.7379898048928126), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 26sRunning iteration 521/1500... Est. remaining: 9m 20sRunning iteration 531/1500... Est. remaining: 9m 15sRunning iteration 541/1500... Est. remaining: 9m 8sRunning iteration 551/1500... Est. remaining: 9m 2sRunning iteration 561/1500... Est. remaining: 8m 56sRunning iteration 571/1500... Est. remaining: 8m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,781,823,512
Annual Return: 49.30%
Sharpe Ratio: 1.60771
Sortino Ratio: 1.579
Max Drawdown: -55.0%
Avg Drawdown: -10.4%
Normalized Score: 1.195
Lookback periods: [156, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 8m 46sRunning iteration 591/1500... Est. remaining: 8m 40sRunning iteration 601/1500... Est. remaining: 8m 34sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 28sRunning iteration 621/1500... Est. remaining: 8m 22sRunning iteration 631/1500... Est. remaining: 8m 16sRunning iteration 641/1500... Est. remaining: 8m 10sRunning iteration 651/1500... Est. remaining: 8m 3sRunning iteration 661/1500... Est. remaining: 7m 57sRunning iteration 671/1500... Est. remaining: 7m 52sRunning iteration 681/1500... Est. remaining: 7m 46sRunning iteration 691/1500... Est. remaining: 7m 40sRunning iteration 701/1500... Est. remaining: 7m 34sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 28sRunning iteration 721/1500... Est. remaining: 7m 22sRunning iteration 731/1500... Est. remaining: 7m 16sRunning iteration 741/1500... Est. remaining: 7m 11sRunning iteration 751/1500... Est. remaining: 7m 5sRunning iteration 761/1500... Est. remaining: 6m 59sRunning iteration 771/1500... Est. remaining: 6m 53sRunning iteration 781/1500... Est. remaining: 6m 47sRunning iteration 791/1500... Est. remaining: 6m 41sRunning iteration 801/1500... Est. remaining: 6m 35sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 29sRunning iteration 821/1500... Est. remaining: 6m 23sRunning iteration 831/1500... Est. remaining: 6m 17sRunning iteration 841/1500... Est. remaining: 6m 11sRunning iteration 851/1500... Est. remaining: 6m 5sRunning iteration 861/1500... Est. remaining: 5m 59sRunning iteration 871/1500... Est. remaining: 5m 53sRunning iteration 881/1500... Est. remaining: 5m 48sRunning iteration 891/1500... Est. remaining: 5m 40sRunning iteration 901/1500... Est. remaining: 5m 33sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 26sRunning iteration 921/1500... Est. remaining: 5m 19sRunning iteration 931/1500... Est. remaining: 5m 12sRunning iteration 941/1500... Est. remaining: 5m 5sRunning iteration 951/1500... Est. remaining: 4m 59sRunning iteration 961/1500... Est. remaining: 4m 52sRunning iteration 971/1500... Est. remaining: 4m 46sRunning iteration 981/1500... Est. remaining: 4m 39sRunning iteration 991/1500... Est. remaining: 4m 33sRunning iteration 1001/1500... Est. remaining: 4m 26sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 20sRunning iteration 1021/1500... Est. remaining: 4m 14sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 43sRunning iteration 1081/1500... Est. remaining: 3m 37sRunning iteration 1091/1500... Est. remaining: 3m 32sRunning iteration 1101/1500... Est. remaining: 3m 26sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 20sRunning iteration 1121/1500... Est. remaining: 3m 14sRunning iteration 1131/1500... Est. remaining: 3m 9sRunning iteration 1141/1500... Est. remaining: 3m 3sRunning iteration 1151/1500... Est. remaining: 2m 58sRunning iteration 1161/1500... Est. remaining: 2m 53sRunning iteration 1171/1500... Est. remaining: 2m 48sRunning iteration 1181/1500... Est. remaining: 2m 42sRunning iteration 1191/1500... Est. remaining: 2m 37sRunning iteration 1201/1500... Est. remaining: 2m 31sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 26sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 53sRunning iteration 1281/1500... Est. remaining: 1m 48sRunning iteration 1291/1500... Est. remaining: 1m 43sRunning iteration 1301/1500... Est. remaining: 1m 38sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 32sRunning iteration 1321/1500... Est. remaining: 1m 27sRunning iteration 1331/1500... Est. remaining: 1m 22sRunning iteration 1341/1500... Est. remaining: 1m 17sRunning iteration 1351/1500... Est. remaining: 1m 12sRunning iteration 1361/1500... Est. remaining: 1m 7sRunning iteration 1371/1500... Est. remaining: 1m 2sRunning iteration 1381/1500... Est. remaining: 0m 57sRunning iteration 1391/1500... Est. remaining: 0m 52sRunning iteration 1401/1500... Est. remaining: 0m 47sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 43sRunning iteration 1421/1500... Est. remaining: 0m 38sRunning iteration 1431/1500... Est. remaining: 0m 33sRunning iteration 1441/1500... Est. remaining: 0m 28sRunning iteration 1451/1500... Est. remaining: 0m 23sRunning iteration 1461/1500... Est. remaining: 0m 18sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 11.7 minutes
Best normalized score: 1.20
best_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 161, 168] (score: 1.1953)

Monte Carlo simulation completed in 11.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 161, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 117 selections (28.1%)
2. sp500_hma: 108 selections (26.0%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,781,823,511.96
Average Annualized Gain: 49.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Sun Aug 24 16:13:34 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $848,113,126
Annual Return: 38.74%
Sharpe Ratio: 1.31422
Sortino Ratio: 1.251
Max Drawdown: -55.7%
Avg Drawdown: -13.4%
Normalized Score: -1.145
Lookback periods: [85, 140, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,415,720,025
Annual Return: 42.99%
Sharpe Ratio: 1.41542
Sortino Ratio: 1.372
Max Drawdown: -61.0%
Avg Drawdown: -12.6%
Normalized Score: -0.495
Lookback periods: [139, 173, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,170,071,172
Annual Return: 44.12%
Sharpe Ratio: 1.45803
Sortino Ratio: 1.415
Max Drawdown: -65.6%
Avg Drawdown: -12.4%
Normalized Score: -0.383
Lookback periods: [111, 157, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,761,484,962
Annual Return: 44.83%
Sharpe Ratio: 1.45840
Sortino Ratio: 1.420
Max Drawdown: -62.2%
Avg Drawdown: -12.7%
Normalized Score: -0.236
Lookback periods: [143, 160, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 16m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $748,216,937
Annual Return: 38.24%
Sharpe Ratio: 1.34694
Sortino Ratio: 1.256
Max Drawdown: -34.7%
Avg Drawdown: -9.9%
Normalized Score: 0.085
Lookback periods: [50, 84, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 14m 24sRunning iteration 41/1500... Est. remaining: 12m 47sRunning iteration 51/1500... Est. remaining: 11m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,705,760,027
Annual Return: 48.85%
Sharpe Ratio: 1.59805
Sortino Ratio: 1.560
Max Drawdown: -59.7%
Avg Drawdown: -11.4%
Normalized Score: 0.796
Lookback periods: [136, 151, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 11m 23sRunning iteration 71/1500... Est. remaining: 10m 51sRunning iteration 81/1500... Est. remaining: 10m 25sRunning iteration 91/1500... Est. remaining: 10m 3sRunning iteration 101/1500... Est. remaining: 9m 45sbest_combination: {'lookbacks': [136, 151, 171], 'score': np.float64(0.7964918741081862), 'visits': 1}
Running iteration 111/1500... Est. remaining: 9m 29sRunning iteration 121/1500... Est. remaining: 9m 17sRunning iteration 131/1500... Est. remaining: 9m 5sRunning iteration 141/1500... Est. remaining: 8m 55sRunning iteration 151/1500... Est. remaining: 8m 45sRunning iteration 161/1500... Est. remaining: 8m 37sRunning iteration 171/1500... Est. remaining: 8m 28sRunning iteration 181/1500... Est. remaining: 8m 21sRunning iteration 191/1500... Est. remaining: 8m 15sRunning iteration 201/1500... Est. remaining: 8m 9sbest_combination: {'lookbacks': [136, 151, 171], 'score': np.float64(0.7964918741081862), 'visits': 1}
Running iteration 211/1500... Est. remaining: 8m 3sRunning iteration 221/1500... Est. remaining: 7m 57sRunning iteration 231/1500... Est. remaining: 7m 52sRunning iteration 241/1500... Est. remaining: 7m 46sRunning iteration 251/1500... Est. remaining: 7m 40sRunning iteration 261/1500... Est. remaining: 7m 35sRunning iteration 271/1500... Est. remaining: 7m 30sRunning iteration 281/1500... Est. remaining: 7m 25sRunning iteration 291/1500... Est. remaining: 7m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,387,807,434
Annual Return: 47.68%
Sharpe Ratio: 1.62668
Sortino Ratio: 1.533
Max Drawdown: -56.4%
Avg Drawdown: -10.1%
Normalized Score: 0.984
Lookback periods: [56, 148, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 301/1500... Est. remaining: 7m 18sbest_combination: {'lookbacks': [56, 148, 156], 'score': np.float64(0.9838195859041343), 'visits': 1}
Running iteration 311/1500... Est. remaining: 7m 14sRunning iteration 321/1500... Est. remaining: 7m 9sRunning iteration 331/1500... Est. remaining: 7m 3sRunning iteration 341/1500... Est. remaining: 6m 59sRunning iteration 351/1500... Est. remaining: 6m 54sRunning iteration 361/1500... Est. remaining: 6m 50sRunning iteration 371/1500... Est. remaining: 6m 45sRunning iteration 381/1500... Est. remaining: 6m 41sRunning iteration 391/1500... Est. remaining: 6m 37sRunning iteration 401/1500... Est. remaining: 6m 32sbest_combination: {'lookbacks': [56, 148, 156], 'score': np.float64(0.9838195859041343), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 28sRunning iteration 421/1500... Est. remaining: 6m 24sRunning iteration 431/1500... Est. remaining: 6m 20sRunning iteration 441/1500... Est. remaining: 6m 16sRunning iteration 451/1500... Est. remaining: 6m 11sRunning iteration 461/1500... Est. remaining: 6m 7sRunning iteration 471/1500... Est. remaining: 6m 3sRunning iteration 481/1500... Est. remaining: 6m 0sRunning iteration 491/1500... Est. remaining: 5m 56sRunning iteration 501/1500... Est. remaining: 5m 51sbest_combination: {'lookbacks': [56, 148, 156], 'score': np.float64(0.9838195859041343), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 47sRunning iteration 521/1500... Est. remaining: 5m 43sRunning iteration 531/1500... Est. remaining: 5m 39sRunning iteration 541/1500... Est. remaining: 5m 35sRunning iteration 551/1500... Est. remaining: 5m 31sRunning iteration 561/1500... Est. remaining: 5m 28sRunning iteration 571/1500... Est. remaining: 5m 24sRunning iteration 581/1500... Est. remaining: 5m 20sRunning iteration 591/1500... Est. remaining: 5m 17sRunning iteration 601/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [56, 148, 156], 'score': np.float64(0.9838195859041343), 'visits': 1}
Running iteration 611/1500... Est. remaining: 5m 9sRunning iteration 621/1500... Est. remaining: 5m 6sRunning iteration 631/1500... Est. remaining: 5m 2sRunning iteration 641/1500... Est. remaining: 4m 59sRunning iteration 651/1500... Est. remaining: 4m 55sRunning iteration 661/1500... Est. remaining: 4m 51sRunning iteration 671/1500... Est. remaining: 4m 47sRunning iteration 681/1500... Est. remaining: 4m 44sRunning iteration 691/1500... Est. remaining: 4m 40sRunning iteration 701/1500... Est. remaining: 4m 36sbest_combination: {'lookbacks': [56, 148, 156], 'score': np.float64(0.9838195859041343), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 33sRunning iteration 721/1500... Est. remaining: 4m 29sRunning iteration 731/1500... Est. remaining: 4m 26sRunning iteration 741/1500... Est. remaining: 4m 22sRunning iteration 751/1500... Est. remaining: 4m 19sRunning iteration 761/1500... Est. remaining: 4m 15sRunning iteration 771/1500... Est. remaining: 4m 12sRunning iteration 781/1500... Est. remaining: 4m 8sRunning iteration 791/1500... Est. remaining: 4m 5sRunning iteration 801/1500... Est. remaining: 4m 1sbest_combination: {'lookbacks': [56, 148, 156], 'score': np.float64(0.9838195859041343), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 58sRunning iteration 821/1500... Est. remaining: 3m 54sRunning iteration 831/1500... Est. remaining: 3m 51sRunning iteration 841/1500... Est. remaining: 3m 47sRunning iteration 851/1500... Est. remaining: 3m 44sRunning iteration 861/1500... Est. remaining: 3m 40sRunning iteration 871/1500... Est. remaining: 3m 37sRunning iteration 881/1500... Est. remaining: 3m 33sRunning iteration 891/1500... Est. remaining: 3m 30sRunning iteration 901/1500... Est. remaining: 3m 26sbest_combination: {'lookbacks': [56, 148, 156], 'score': np.float64(0.9838195859041343), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 23sRunning iteration 921/1500... Est. remaining: 3m 19sRunning iteration 931/1500... Est. remaining: 3m 16sRunning iteration 941/1500... Est. remaining: 3m 12sRunning iteration 951/1500... Est. remaining: 3m 9sRunning iteration 961/1500... Est. remaining: 3m 5sRunning iteration 971/1500... Est. remaining: 3m 2sRunning iteration 981/1500... Est. remaining: 2m 58sRunning iteration 991/1500... Est. remaining: 2m 55sRunning iteration 1001/1500... Est. remaining: 2m 51sbest_combination: {'lookbacks': [56, 148, 156], 'score': np.float64(0.9838195859041343), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 48sRunning iteration 1021/1500... Est. remaining: 2m 44sRunning iteration 1031/1500... Est. remaining: 2m 41sRunning iteration 1041/1500... Est. remaining: 2m 37sRunning iteration 1051/1500... Est. remaining: 2m 34sRunning iteration 1061/1500... Est. remaining: 2m 30sRunning iteration 1071/1500... Est. remaining: 2m 27sRunning iteration 1081/1500... Est. remaining: 2m 23sRunning iteration 1091/1500... Est. remaining: 2m 20sRunning iteration 1101/1500... Est. remaining: 2m 16sbest_combination: {'lookbacks': [56, 148, 156], 'score': np.float64(0.9838195859041343), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 13sRunning iteration 1121/1500... Est. remaining: 2m 9sRunning iteration 1131/1500... Est. remaining: 2m 6sRunning iteration 1141/1500... Est. remaining: 2m 2sRunning iteration 1151/1500... Est. remaining: 1m 59sRunning iteration 1161/1500... Est. remaining: 1m 56sRunning iteration 1171/1500... Est. remaining: 1m 52sRunning iteration 1181/1500... Est. remaining: 1m 49sRunning iteration 1191/1500... Est. remaining: 1m 45sRunning iteration 1201/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [56, 148, 156], 'score': np.float64(0.9838195859041343), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 38sRunning iteration 1221/1500... Est. remaining: 1m 35sRunning iteration 1231/1500... Est. remaining: 1m 32sRunning iteration 1241/1500... Est. remaining: 1m 28sRunning iteration 1251/1500... Est. remaining: 1m 25sRunning iteration 1261/1500... Est. remaining: 1m 21sRunning iteration 1271/1500... Est. remaining: 1m 18sRunning iteration 1281/1500... Est. remaining: 1m 14sRunning iteration 1291/1500... Est. remaining: 1m 11sRunning iteration 1301/1500... Est. remaining: 1m 7sbest_combination: {'lookbacks': [56, 148, 156], 'score': np.float64(0.9838195859041343), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 4sRunning iteration 1321/1500... Est. remaining: 1m 0sRunning iteration 1331/1500... Est. remaining: 0m 57sRunning iteration 1341/1500... Est. remaining: 0m 54sRunning iteration 1351/1500... Est. remaining: 0m 50sRunning iteration 1361/1500... Est. remaining: 0m 47sRunning iteration 1371/1500... Est. remaining: 0m 43sRunning iteration 1381/1500... Est. remaining: 0m 40sRunning iteration 1391/1500... Est. remaining: 0m 37sRunning iteration 1401/1500... Est. remaining: 0m 33sbest_combination: {'lookbacks': [56, 148, 156], 'score': np.float64(0.9838195859041343), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 30sRunning iteration 1421/1500... Est. remaining: 0m 27sRunning iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 20sRunning iteration 1451/1500... Est. remaining: 0m 16sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 10sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.4 minutes
Best normalized score: 0.98
best_combination: {'lookbacks': [56, 148, 156], 'score': np.float64(0.9838195859041343), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [56, 148, 156] (score: 0.9838)

Monte Carlo simulation completed in 8.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [56, 148, 156] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 124 selections (29.8%)
2. naz100_hma: 96 selections (23.1%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 69 selections (16.6%)
5. cash: 47 selections (11.3%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $7,387,807,434.18
Average Annualized Gain: 47.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Sun Aug 24 16:22:06 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,749,339,830
Annual Return: 44.82%
Sharpe Ratio: 1.45391
Sortino Ratio: 1.420
Max Drawdown: -67.4%
Avg Drawdown: -12.3%
Normalized Score: -0.353
Lookback periods: [155, 194, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 20m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,773,655,023
Annual Return: 43.56%
Sharpe Ratio: 1.41957
Sortino Ratio: 1.378
Max Drawdown: -61.6%
Avg Drawdown: -11.9%
Normalized Score: -0.324
Lookback periods: [164, 193, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,847,211,103
Annual Return: 44.93%
Sharpe Ratio: 1.47111
Sortino Ratio: 1.428
Max Drawdown: -60.3%
Avg Drawdown: -12.0%
Normalized Score: -0.038
Lookback periods: [125, 187, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 16m 10sRunning iteration 31/1500... Est. remaining: 13m 24sRunning iteration 41/1500... Est. remaining: 11m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,161,515,700
Annual Return: 46.16%
Sharpe Ratio: 1.52806
Sortino Ratio: 1.481
Max Drawdown: -61.3%
Avg Drawdown: -11.7%
Normalized Score: 0.244
Lookback periods: [136, 146, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 11m 28sRunning iteration 61/1500... Est. remaining: 10m 51sRunning iteration 71/1500... Est. remaining: 10m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,573,452,506
Annual Return: 47.18%
Sharpe Ratio: 1.53184
Sortino Ratio: 1.491
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.582
Lookback periods: [159, 159, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 10m 13sRunning iteration 91/1500... Est. remaining: 9m 53sRunning iteration 101/1500... Est. remaining: 9m 36sbest_combination: {'lookbacks': [159, 159, 191], 'score': np.float64(0.5816702489772673), 'visits': 1}
Running iteration 111/1500... Est. remaining: 9m 22sRunning iteration 121/1500... Est. remaining: 9m 9sRunning iteration 131/1500... Est. remaining: 8m 59sRunning iteration 141/1500... Est. remaining: 8m 49sRunning iteration 151/1500... Est. remaining: 8m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,393,010,810
Annual Return: 49.14%
Sharpe Ratio: 1.58128
Sortino Ratio: 1.548
Max Drawdown: -60.2%
Avg Drawdown: -11.1%
Normalized Score: 0.826
Lookback periods: [183, 189, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 8m 39sRunning iteration 171/1500... Est. remaining: 8m 31sRunning iteration 181/1500... Est. remaining: 8m 23sRunning iteration 191/1500... Est. remaining: 8m 16sRunning iteration 201/1500... Est. remaining: 8m 9sbest_combination: {'lookbacks': [183, 189, 190], 'score': np.float64(0.8258542338009589), 'visits': 1}
Running iteration 211/1500... Est. remaining: 8m 2sRunning iteration 221/1500... Est. remaining: 7m 56sRunning iteration 231/1500... Est. remaining: 7m 50sRunning iteration 241/1500... Est. remaining: 7m 45sRunning iteration 251/1500... Est. remaining: 7m 39sRunning iteration 261/1500... Est. remaining: 7m 33sRunning iteration 271/1500... Est. remaining: 7m 28sRunning iteration 281/1500... Est. remaining: 7m 23sRunning iteration 291/1500... Est. remaining: 7m 18sRunning iteration 301/1500... Est. remaining: 7m 13sbest_combination: {'lookbacks': [183, 189, 190], 'score': np.float64(0.8258542338009589), 'visits': 1}
Running iteration 311/1500... Est. remaining: 7m 8sRunning iteration 321/1500... Est. remaining: 7m 4sRunning iteration 331/1500... Est. remaining: 6m 59sRunning iteration 341/1500... Est. remaining: 6m 55sRunning iteration 351/1500... Est. remaining: 6m 50sRunning iteration 361/1500... Est. remaining: 6m 46sRunning iteration 371/1500... Est. remaining: 6m 41sRunning iteration 381/1500... Est. remaining: 6m 37sRunning iteration 391/1500... Est. remaining: 6m 33sRunning iteration 401/1500... Est. remaining: 6m 28sbest_combination: {'lookbacks': [183, 189, 190], 'score': np.float64(0.8258542338009589), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 24sRunning iteration 421/1500... Est. remaining: 6m 20sRunning iteration 431/1500... Est. remaining: 6m 16sRunning iteration 441/1500... Est. remaining: 6m 12sRunning iteration 451/1500... Est. remaining: 6m 8sRunning iteration 461/1500... Est. remaining: 6m 4sRunning iteration 471/1500... Est. remaining: 6m 0sRunning iteration 481/1500... Est. remaining: 5m 56sRunning iteration 491/1500... Est. remaining: 5m 52sRunning iteration 501/1500... Est. remaining: 5m 48sbest_combination: {'lookbacks': [183, 189, 190], 'score': np.float64(0.8258542338009589), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 43sRunning iteration 521/1500... Est. remaining: 5m 39sRunning iteration 531/1500... Est. remaining: 5m 35sRunning iteration 541/1500... Est. remaining: 5m 31sRunning iteration 551/1500... Est. remaining: 5m 28sRunning iteration 561/1500... Est. remaining: 5m 24sRunning iteration 571/1500... Est. remaining: 5m 20sRunning iteration 581/1500... Est. remaining: 5m 16sRunning iteration 591/1500... Est. remaining: 5m 13sRunning iteration 601/1500... Est. remaining: 5m 9sbest_combination: {'lookbacks': [183, 189, 190], 'score': np.float64(0.8258542338009589), 'visits': 1}
Running iteration 611/1500... Est. remaining: 5m 6sRunning iteration 621/1500... Est. remaining: 5m 2sRunning iteration 631/1500... Est. remaining: 4m 58sRunning iteration 641/1500... Est. remaining: 4m 55sRunning iteration 651/1500... Est. remaining: 4m 51sRunning iteration 661/1500... Est. remaining: 4m 48sRunning iteration 671/1500... Est. remaining: 4m 44sRunning iteration 681/1500... Est. remaining: 4m 40sRunning iteration 691/1500... Est. remaining: 4m 37sRunning iteration 701/1500... Est. remaining: 4m 33sbest_combination: {'lookbacks': [183, 189, 190], 'score': np.float64(0.8258542338009589), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 30sRunning iteration 721/1500... Est. remaining: 4m 26sRunning iteration 731/1500... Est. remaining: 4m 23sRunning iteration 741/1500... Est. remaining: 4m 19sRunning iteration 751/1500... Est. remaining: 4m 15sRunning iteration 761/1500... Est. remaining: 4m 12sRunning iteration 771/1500... Est. remaining: 4m 8sRunning iteration 781/1500... Est. remaining: 4m 5sRunning iteration 791/1500... Est. remaining: 4m 1sRunning iteration 801/1500... Est. remaining: 3m 58sbest_combination: {'lookbacks': [183, 189, 190], 'score': np.float64(0.8258542338009589), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 54sRunning iteration 821/1500... Est. remaining: 3m 51sRunning iteration 831/1500... Est. remaining: 3m 48sRunning iteration 841/1500... Est. remaining: 3m 44sRunning iteration 851/1500... Est. remaining: 3m 41sRunning iteration 861/1500... Est. remaining: 3m 37sRunning iteration 871/1500... Est. remaining: 3m 34sRunning iteration 881/1500... Est. remaining: 3m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,488,227,558
Annual Return: 48.27%
Sharpe Ratio: 1.57255
Sortino Ratio: 1.543
Max Drawdown: -59.0%
Avg Drawdown: -10.0%
Normalized Score: 0.927
Lookback periods: [157, 167, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 3m 27sRunning iteration 901/1500... Est. remaining: 3m 24sbest_combination: {'lookbacks': [157, 167, 168], 'score': np.float64(0.9273722868266576), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 20sRunning iteration 921/1500... Est. remaining: 3m 17sRunning iteration 931/1500... Est. remaining: 3m 14sRunning iteration 941/1500... Est. remaining: 3m 10sRunning iteration 951/1500... Est. remaining: 3m 7sRunning iteration 961/1500... Est. remaining: 3m 3sRunning iteration 971/1500... Est. remaining: 3m 0sRunning iteration 981/1500... Est. remaining: 2m 56sRunning iteration 991/1500... Est. remaining: 2m 53sRunning iteration 1001/1500... Est. remaining: 2m 49sbest_combination: {'lookbacks': [157, 167, 168], 'score': np.float64(0.9273722868266576), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,029,715,779
Annual Return: 48.54%
Sharpe Ratio: 1.58331
Sortino Ratio: 1.540
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 0.998
Lookback periods: [156, 159, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 2m 46sRunning iteration 1021/1500... Est. remaining: 2m 43sRunning iteration 1031/1500... Est. remaining: 2m 40sRunning iteration 1041/1500... Est. remaining: 2m 36sRunning iteration 1051/1500... Est. remaining: 2m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,552,905,790
Annual Return: 48.78%
Sharpe Ratio: 1.59349
Sortino Ratio: 1.566
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 1.066
Lookback periods: [159, 162, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1061/1500... Est. remaining: 2m 30sRunning iteration 1071/1500... Est. remaining: 2m 26sRunning iteration 1081/1500... Est. remaining: 2m 23sRunning iteration 1091/1500... Est. remaining: 2m 19sRunning iteration 1101/1500... Est. remaining: 2m 16sbest_combination: {'lookbacks': [159, 162, 168], 'score': np.float64(1.0657872449856813), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 12sRunning iteration 1121/1500... Est. remaining: 2m 9sRunning iteration 1131/1500... Est. remaining: 2m 5sRunning iteration 1141/1500... Est. remaining: 2m 2sRunning iteration 1151/1500... Est. remaining: 1m 59sRunning iteration 1161/1500... Est. remaining: 1m 55sRunning iteration 1171/1500... Est. remaining: 1m 52sRunning iteration 1181/1500... Est. remaining: 1m 48sRunning iteration 1191/1500... Est. remaining: 1m 45sRunning iteration 1201/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [159, 162, 168], 'score': np.float64(1.0657872449856813), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 38sRunning iteration 1221/1500... Est. remaining: 1m 35sRunning iteration 1231/1500... Est. remaining: 1m 32sRunning iteration 1241/1500... Est. remaining: 1m 28sRunning iteration 1251/1500... Est. remaining: 1m 25sRunning iteration 1261/1500... Est. remaining: 1m 21sRunning iteration 1271/1500... Est. remaining: 1m 18sRunning iteration 1281/1500... Est. remaining: 1m 14sRunning iteration 1291/1500... Est. remaining: 1m 11sRunning iteration 1301/1500... Est. remaining: 1m 8sbest_combination: {'lookbacks': [159, 162, 168], 'score': np.float64(1.0657872449856813), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,522,524,178
Annual Return: 49.20%
Sharpe Ratio: 1.60197
Sortino Ratio: 1.577
Max Drawdown: -59.0%
Avg Drawdown: -10.2%
Normalized Score: 1.072
Lookback periods: [158, 162, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1311/1500... Est. remaining: 1m 4sRunning iteration 1321/1500... Est. remaining: 1m 1sRunning iteration 1331/1500... Est. remaining: 0m 57sRunning iteration 1341/1500... Est. remaining: 0m 54sRunning iteration 1351/1500... Est. remaining: 0m 51sRunning iteration 1361/1500... Est. remaining: 0m 47sRunning iteration 1371/1500... Est. remaining: 0m 44sRunning iteration 1381/1500... Est. remaining: 0m 40sRunning iteration 1391/1500... Est. remaining: 0m 37sRunning iteration 1401/1500... Est. remaining: 0m 34sbest_combination: {'lookbacks': [158, 162, 168], 'score': np.float64(1.071844783041098), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 30sRunning iteration 1421/1500... Est. remaining: 0m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,596,239,321
Annual Return: 49.23%
Sharpe Ratio: 1.60013
Sortino Ratio: 1.570
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.145
Lookback periods: [156, 161, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 20sRunning iteration 1451/1500... Est. remaining: 0m 16sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 10sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.5 minutes
Best normalized score: 1.14
best_combination: {'lookbacks': [156, 161, 172], 'score': np.float64(1.1449484095304059), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 161, 172] (score: 1.1449)

Monte Carlo simulation completed in 8.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 161, 172] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 117 selections (28.1%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,596,239,320.69
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Sun Aug 24 16:30:43 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $292,305,590
Annual Return: 34.54%
Sharpe Ratio: 1.18623
Sortino Ratio: 1.106
Max Drawdown: -55.9%
Avg Drawdown: -14.3%
Normalized Score: -2.064
Lookback periods: [71, 163, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,386,183,233
Annual Return: 44.39%
Sharpe Ratio: 1.44813
Sortino Ratio: 1.412
Max Drawdown: -66.0%
Avg Drawdown: -12.2%
Normalized Score: -0.363
Lookback periods: [146, 195, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 50sRunning iteration 21/1500... Est. remaining: 14m 59sRunning iteration 31/1500... Est. remaining: 12m 42sRunning iteration 41/1500... Est. remaining: 11m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,278,742,659
Annual Return: 44.26%
Sharpe Ratio: 1.46926
Sortino Ratio: 1.426
Max Drawdown: -63.8%
Avg Drawdown: -12.1%
Normalized Score: -0.239
Lookback periods: [137, 147, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,876,908,278
Annual Return: 45.92%
Sharpe Ratio: 1.51056
Sortino Ratio: 1.480
Max Drawdown: -58.8%
Avg Drawdown: -13.3%
Normalized Score: 0.033
Lookback periods: [133, 147, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 11m 34sRunning iteration 61/1500... Est. remaining: 10m 54sRunning iteration 71/1500... Est. remaining: 10m 28sRunning iteration 81/1500... Est. remaining: 10m 5sRunning iteration 91/1500... Est. remaining: 9m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,140,754,658
Annual Return: 46.89%
Sharpe Ratio: 1.53486
Sortino Ratio: 1.487
Max Drawdown: -61.6%
Avg Drawdown: -12.2%
Normalized Score: 0.234
Lookback periods: [146, 149, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 9m 45sbest_combination: {'lookbacks': [146, 149, 193], 'score': np.float64(0.23353444892378264), 'visits': 1}
Running iteration 111/1500... Est. remaining: 9m 31sRunning iteration 121/1500... Est. remaining: 9m 19sRunning iteration 131/1500... Est. remaining: 9m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,058,914,239
Annual Return: 48.55%
Sharpe Ratio: 1.57887
Sortino Ratio: 1.540
Max Drawdown: -59.7%
Avg Drawdown: -11.8%
Normalized Score: 0.650
Lookback periods: [150, 159, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 9m 5sRunning iteration 151/1500... Est. remaining: 8m 55sRunning iteration 161/1500... Est. remaining: 8m 46sRunning iteration 171/1500... Est. remaining: 8m 37sRunning iteration 181/1500... Est. remaining: 8m 29sRunning iteration 191/1500... Est. remaining: 8m 22sRunning iteration 201/1500... Est. remaining: 8m 15sbest_combination: {'lookbacks': [150, 159, 184], 'score': np.float64(0.6501275041840726), 'visits': 1}
Running iteration 211/1500... Est. remaining: 8m 8sRunning iteration 221/1500... Est. remaining: 8m 2sRunning iteration 231/1500... Est. remaining: 7m 56sRunning iteration 241/1500... Est. remaining: 7m 50sRunning iteration 251/1500... Est. remaining: 7m 45sRunning iteration 261/1500... Est. remaining: 7m 39sRunning iteration 271/1500... Est. remaining: 7m 34sRunning iteration 281/1500... Est. remaining: 7m 29sRunning iteration 291/1500... Est. remaining: 7m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,403,944,477
Annual Return: 47.07%
Sharpe Ratio: 1.53752
Sortino Ratio: 1.510
Max Drawdown: -55.0%
Avg Drawdown: -10.7%
Normalized Score: 0.740
Lookback periods: [162, 163, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 301/1500... Est. remaining: 7m 23sbest_combination: {'lookbacks': [162, 163, 169], 'score': np.float64(0.7400734132775008), 'visits': 1}
Running iteration 311/1500... Est. remaining: 7m 18sRunning iteration 321/1500... Est. remaining: 7m 14sRunning iteration 331/1500... Est. remaining: 7m 9sRunning iteration 341/1500... Est. remaining: 7m 4sRunning iteration 351/1500... Est. remaining: 7m 0sRunning iteration 361/1500... Est. remaining: 6m 55sRunning iteration 371/1500... Est. remaining: 6m 51sRunning iteration 381/1500... Est. remaining: 6m 46sRunning iteration 391/1500... Est. remaining: 6m 41sRunning iteration 401/1500... Est. remaining: 6m 37sbest_combination: {'lookbacks': [162, 163, 169], 'score': np.float64(0.7400734132775008), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 33sRunning iteration 421/1500... Est. remaining: 6m 28sRunning iteration 431/1500... Est. remaining: 6m 24sRunning iteration 441/1500... Est. remaining: 6m 20sRunning iteration 451/1500... Est. remaining: 6m 15sRunning iteration 461/1500... Est. remaining: 6m 11sRunning iteration 471/1500... Est. remaining: 6m 7sRunning iteration 481/1500... Est. remaining: 6m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,793,186,271
Annual Return: 48.42%
Sharpe Ratio: 1.57832
Sortino Ratio: 1.548
Max Drawdown: -56.9%
Avg Drawdown: -10.6%
Normalized Score: 0.927
Lookback periods: [156, 161, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 6m 1sRunning iteration 501/1500... Est. remaining: 5m 57sbest_combination: {'lookbacks': [156, 161, 167], 'score': np.float64(0.9272759755928481), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 53sRunning iteration 521/1500... Est. remaining: 5m 48sRunning iteration 531/1500... Est. remaining: 5m 44sRunning iteration 541/1500... Est. remaining: 5m 39sRunning iteration 551/1500... Est. remaining: 5m 35sRunning iteration 561/1500... Est. remaining: 5m 31sRunning iteration 571/1500... Est. remaining: 5m 27sRunning iteration 581/1500... Est. remaining: 5m 23sRunning iteration 591/1500... Est. remaining: 5m 19sRunning iteration 601/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [156, 161, 167], 'score': np.float64(0.9272759755928481), 'visits': 1}
Running iteration 611/1500... Est. remaining: 5m 12sRunning iteration 621/1500... Est. remaining: 5m 8sRunning iteration 631/1500... Est. remaining: 5m 4sRunning iteration 641/1500... Est. remaining: 5m 1sRunning iteration 651/1500... Est. remaining: 4m 57sRunning iteration 661/1500... Est. remaining: 4m 53sRunning iteration 671/1500... Est. remaining: 4m 49sRunning iteration 681/1500... Est. remaining: 4m 46sRunning iteration 691/1500... Est. remaining: 4m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,796,054,792
Annual Return: 48.43%
Sharpe Ratio: 1.57975
Sortino Ratio: 1.552
Max Drawdown: -56.9%
Avg Drawdown: -10.7%
Normalized Score: 0.928
Lookback periods: [156, 160, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/1500... Est. remaining: 4m 39sbest_combination: {'lookbacks': [156, 160, 162], 'score': np.float64(0.9280263339940327), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 36sRunning iteration 721/1500... Est. remaining: 4m 32sRunning iteration 731/1500... Est. remaining: 4m 28sRunning iteration 741/1500... Est. remaining: 4m 24sRunning iteration 751/1500... Est. remaining: 4m 21sRunning iteration 761/1500... Est. remaining: 4m 17sRunning iteration 771/1500... Est. remaining: 4m 14sRunning iteration 781/1500... Est. remaining: 4m 10sRunning iteration 791/1500... Est. remaining: 4m 6sRunning iteration 801/1500... Est. remaining: 4m 3sbest_combination: {'lookbacks': [156, 160, 162], 'score': np.float64(0.9280263339940327), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 59sRunning iteration 821/1500... Est. remaining: 3m 55sRunning iteration 831/1500... Est. remaining: 3m 52sRunning iteration 841/1500... Est. remaining: 3m 48sRunning iteration 851/1500... Est. remaining: 3m 45sRunning iteration 861/1500... Est. remaining: 3m 41sRunning iteration 871/1500... Est. remaining: 3m 38sRunning iteration 881/1500... Est. remaining: 3m 34sRunning iteration 891/1500... Est. remaining: 3m 30sRunning iteration 901/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [156, 160, 162], 'score': np.float64(0.9280263339940327), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 23sRunning iteration 921/1500... Est. remaining: 3m 20sRunning iteration 931/1500... Est. remaining: 3m 16sRunning iteration 941/1500... Est. remaining: 3m 13sRunning iteration 951/1500... Est. remaining: 3m 9sRunning iteration 961/1500... Est. remaining: 3m 6sRunning iteration 971/1500... Est. remaining: 3m 2sRunning iteration 981/1500... Est. remaining: 2m 59sRunning iteration 991/1500... Est. remaining: 2m 55sRunning iteration 1001/1500... Est. remaining: 2m 52sbest_combination: {'lookbacks': [156, 160, 162], 'score': np.float64(0.9280263339940327), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 48sRunning iteration 1021/1500... Est. remaining: 2m 45sRunning iteration 1031/1500... Est. remaining: 2m 41sRunning iteration 1041/1500... Est. remaining: 2m 38sRunning iteration 1051/1500... Est. remaining: 2m 34sRunning iteration 1061/1500... Est. remaining: 2m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,419,959,907
Annual Return: 48.72%
Sharpe Ratio: 1.58158
Sortino Ratio: 1.544
Max Drawdown: -57.2%
Avg Drawdown: -10.6%
Normalized Score: 0.944
Lookback periods: [154, 156, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1071/1500... Est. remaining: 2m 28sRunning iteration 1081/1500... Est. remaining: 2m 24sRunning iteration 1091/1500... Est. remaining: 2m 21sRunning iteration 1101/1500... Est. remaining: 2m 17sbest_combination: {'lookbacks': [154, 156, 172], 'score': np.float64(0.944380545788789), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,032,015,417
Annual Return: 48.54%
Sharpe Ratio: 1.57967
Sortino Ratio: 1.553
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.024
Lookback periods: [157, 162, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1121/1500... Est. remaining: 2m 11sRunning iteration 1131/1500... Est. remaining: 2m 7sRunning iteration 1141/1500... Est. remaining: 2m 4sRunning iteration 1151/1500... Est. remaining: 2m 0sRunning iteration 1161/1500... Est. remaining: 1m 57sRunning iteration 1171/1500... Est. remaining: 1m 53sRunning iteration 1181/1500... Est. remaining: 1m 50sRunning iteration 1191/1500... Est. remaining: 1m 46sRunning iteration 1201/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [157, 162, 172], 'score': np.float64(1.0241234028976458), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 39sRunning iteration 1221/1500... Est. remaining: 1m 36sRunning iteration 1231/1500... Est. remaining: 1m 32sRunning iteration 1241/1500... Est. remaining: 1m 29sRunning iteration 1251/1500... Est. remaining: 1m 25sRunning iteration 1261/1500... Est. remaining: 1m 22sRunning iteration 1271/1500... Est. remaining: 1m 18sRunning iteration 1281/1500... Est. remaining: 1m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,275,798,584
Annual Return: 49.09%
Sharpe Ratio: 1.59918
Sortino Ratio: 1.574
Max Drawdown: -55.0%
Avg Drawdown: -10.7%
Normalized Score: 1.111
Lookback periods: [159, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1291/1500... Est. remaining: 1m 12sRunning iteration 1301/1500... Est. remaining: 1m 8sbest_combination: {'lookbacks': [159, 162, 169], 'score': np.float64(1.1114361874523007), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 5sRunning iteration 1321/1500... Est. remaining: 1m 1sRunning iteration 1331/1500... Est. remaining: 0m 58sRunning iteration 1341/1500... Est. remaining: 0m 54sRunning iteration 1351/1500... Est. remaining: 0m 51sRunning iteration 1361/1500... Est. remaining: 0m 47sRunning iteration 1371/1500... Est. remaining: 0m 44sRunning iteration 1381/1500... Est. remaining: 0m 41sRunning iteration 1391/1500... Est. remaining: 0m 37sRunning iteration 1401/1500... Est. remaining: 0m 34sbest_combination: {'lookbacks': [159, 162, 169], 'score': np.float64(1.1114361874523007), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 30sRunning iteration 1421/1500... Est. remaining: 0m 27sRunning iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 20sRunning iteration 1451/1500... Est. remaining: 0m 17sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 10sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.5 minutes
Best normalized score: 1.11
best_combination: {'lookbacks': [159, 162, 169], 'score': np.float64(1.1114361874523007), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [159, 162, 169] (score: 1.1114)

Monte Carlo simulation completed in 8.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [159, 162, 169] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 34 selections (8.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,275,798,583.97
Average Annualized Gain: 49.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Sun Aug 24 16:39:21 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $200,532,959
Annual Return: 33.09%
Sharpe Ratio: 1.15650
Sortino Ratio: 1.070
Max Drawdown: -62.9%
Avg Drawdown: -13.6%
Normalized Score: -2.413
Lookback periods: [61, 68, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,065,217,663
Annual Return: 42.35%
Sharpe Ratio: 1.39880
Sortino Ratio: 1.360
Max Drawdown: -72.0%
Avg Drawdown: -13.0%
Normalized Score: -1.011
Lookback periods: [113, 169, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,009,645,095
Annual Return: 39.44%
Sharpe Ratio: 1.33636
Sortino Ratio: 1.281
Max Drawdown: -56.9%
Avg Drawdown: -12.6%
Normalized Score: -0.921
Lookback periods: [115, 123, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $450,421,611
Annual Return: 36.23%
Sharpe Ratio: 1.29165
Sortino Ratio: 1.198
Max Drawdown: -36.3%
Avg Drawdown: -10.7%
Normalized Score: -0.431
Lookback periods: [51, 68, 86] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,242,317,311
Annual Return: 46.23%
Sharpe Ratio: 1.52356
Sortino Ratio: 1.482
Max Drawdown: -57.2%
Avg Drawdown: -11.6%
Normalized Score: 0.390
Lookback periods: [135, 154, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 45sRunning iteration 21/1500... Est. remaining: 17m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,557,831,597
Annual Return: 48.78%
Sharpe Ratio: 1.58606
Sortino Ratio: 1.546
Max Drawdown: -56.6%
Avg Drawdown: -11.1%
Normalized Score: 0.915
Lookback periods: [154, 159, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 15m 19sRunning iteration 41/1500... Est. remaining: 13m 27sRunning iteration 51/1500... Est. remaining: 12m 19sRunning iteration 61/1500... Est. remaining: 11m 31sRunning iteration 71/1500... Est. remaining: 10m 56sRunning iteration 81/1500... Est. remaining: 10m 28sRunning iteration 91/1500... Est. remaining: 10m 6sRunning iteration 101/1500... Est. remaining: 9m 48sbest_combination: {'lookbacks': [154, 159, 181], 'score': np.float64(0.9152599754108424), 'visits': 1}
Running iteration 111/1500... Est. remaining: 9m 33sRunning iteration 121/1500... Est. remaining: 9m 21sRunning iteration 131/1500... Est. remaining: 9m 9sRunning iteration 141/1500... Est. remaining: 8m 59sRunning iteration 151/1500... Est. remaining: 8m 49sRunning iteration 161/1500... Est. remaining: 8m 40sRunning iteration 171/1500... Est. remaining: 8m 32sRunning iteration 181/1500... Est. remaining: 8m 24sRunning iteration 191/1500... Est. remaining: 8m 17sRunning iteration 201/1500... Est. remaining: 8m 10sbest_combination: {'lookbacks': [154, 159, 181], 'score': np.float64(0.9152599754108424), 'visits': 1}
Running iteration 211/1500... Est. remaining: 8m 3sRunning iteration 221/1500... Est. remaining: 7m 57sRunning iteration 231/1500... Est. remaining: 7m 51sRunning iteration 241/1500... Est. remaining: 7m 45sRunning iteration 251/1500... Est. remaining: 7m 40sRunning iteration 261/1500... Est. remaining: 7m 34sRunning iteration 271/1500... Est. remaining: 7m 29sRunning iteration 281/1500... Est. remaining: 7m 24sRunning iteration 291/1500... Est. remaining: 7m 19sRunning iteration 301/1500... Est. remaining: 7m 14sbest_combination: {'lookbacks': [154, 159, 181], 'score': np.float64(0.9152599754108424), 'visits': 1}
Running iteration 311/1500... Est. remaining: 7m 10sRunning iteration 321/1500... Est. remaining: 7m 5sRunning iteration 331/1500... Est. remaining: 7m 0sRunning iteration 341/1500... Est. remaining: 6m 56sRunning iteration 351/1500... Est. remaining: 6m 52sRunning iteration 361/1500... Est. remaining: 6m 47sRunning iteration 371/1500... Est. remaining: 6m 43sRunning iteration 381/1500... Est. remaining: 6m 38sRunning iteration 391/1500... Est. remaining: 6m 34sRunning iteration 401/1500... Est. remaining: 6m 30sbest_combination: {'lookbacks': [154, 159, 181], 'score': np.float64(0.9152599754108424), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 26sRunning iteration 421/1500... Est. remaining: 6m 22sRunning iteration 431/1500... Est. remaining: 6m 18sRunning iteration 441/1500... Est. remaining: 6m 14sRunning iteration 451/1500... Est. remaining: 6m 10sRunning iteration 461/1500... Est. remaining: 6m 6sRunning iteration 471/1500... Est. remaining: 6m 2sRunning iteration 481/1500... Est. remaining: 5m 58sRunning iteration 491/1500... Est. remaining: 5m 54sRunning iteration 501/1500... Est. remaining: 5m 50sbest_combination: {'lookbacks': [154, 159, 181], 'score': np.float64(0.9152599754108424), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 46sRunning iteration 521/1500... Est. remaining: 5m 42sRunning iteration 531/1500... Est. remaining: 5m 37sRunning iteration 541/1500... Est. remaining: 5m 33sRunning iteration 551/1500... Est. remaining: 5m 29sRunning iteration 561/1500... Est. remaining: 5m 25sRunning iteration 571/1500... Est. remaining: 5m 22sRunning iteration 581/1500... Est. remaining: 5m 18sRunning iteration 591/1500... Est. remaining: 5m 14sRunning iteration 601/1500... Est. remaining: 5m 11sbest_combination: {'lookbacks': [154, 159, 181], 'score': np.float64(0.9152599754108424), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,779,578,281
Annual Return: 41.74%
Sharpe Ratio: 1.50158
Sortino Ratio: 1.412
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.050
Lookback periods: [50, 62, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/1500... Est. remaining: 5m 8sRunning iteration 621/1500... Est. remaining: 5m 4sRunning iteration 631/1500... Est. remaining: 5m 1sRunning iteration 641/1500... Est. remaining: 4m 57sRunning iteration 651/1500... Est. remaining: 4m 53sRunning iteration 661/1500... Est. remaining: 4m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,406,464,560
Annual Return: 42.98%
Sharpe Ratio: 1.55185
Sortino Ratio: 1.464
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.329
Lookback periods: [50, 62, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 4m 47sRunning iteration 681/1500... Est. remaining: 4m 43sRunning iteration 691/1500... Est. remaining: 4m 40sRunning iteration 701/1500... Est. remaining: 4m 36sbest_combination: {'lookbacks': [50, 62, 96], 'score': np.float64(1.3292116366876336), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 33sRunning iteration 721/1500... Est. remaining: 4m 29sRunning iteration 731/1500... Est. remaining: 4m 25sRunning iteration 741/1500... Est. remaining: 4m 22sRunning iteration 751/1500... Est. remaining: 4m 18sRunning iteration 761/1500... Est. remaining: 4m 14sRunning iteration 771/1500... Est. remaining: 4m 11sRunning iteration 781/1500... Est. remaining: 4m 7sRunning iteration 791/1500... Est. remaining: 4m 4sRunning iteration 801/1500... Est. remaining: 4m 0sbest_combination: {'lookbacks': [50, 62, 96], 'score': np.float64(1.3292116366876336), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 57sRunning iteration 821/1500... Est. remaining: 3m 53sRunning iteration 831/1500... Est. remaining: 3m 50sRunning iteration 841/1500... Est. remaining: 3m 46sRunning iteration 851/1500... Est. remaining: 3m 43sRunning iteration 861/1500... Est. remaining: 3m 39sRunning iteration 871/1500... Est. remaining: 3m 36sRunning iteration 881/1500... Est. remaining: 3m 32sRunning iteration 891/1500... Est. remaining: 3m 28sRunning iteration 901/1500... Est. remaining: 3m 25sbest_combination: {'lookbacks': [50, 62, 96], 'score': np.float64(1.3292116366876336), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 21sRunning iteration 921/1500... Est. remaining: 3m 18sRunning iteration 931/1500... Est. remaining: 3m 15sRunning iteration 941/1500... Est. remaining: 3m 11sRunning iteration 951/1500... Est. remaining: 3m 8sRunning iteration 961/1500... Est. remaining: 3m 4sRunning iteration 971/1500... Est. remaining: 3m 1sRunning iteration 981/1500... Est. remaining: 2m 57sRunning iteration 991/1500... Est. remaining: 2m 54sRunning iteration 1001/1500... Est. remaining: 2m 50sbest_combination: {'lookbacks': [50, 62, 96], 'score': np.float64(1.3292116366876336), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 47sRunning iteration 1021/1500... Est. remaining: 2m 43sRunning iteration 1031/1500... Est. remaining: 2m 40sRunning iteration 1041/1500... Est. remaining: 2m 36sRunning iteration 1051/1500... Est. remaining: 2m 33sRunning iteration 1061/1500... Est. remaining: 2m 29sRunning iteration 1071/1500... Est. remaining: 2m 26sRunning iteration 1081/1500... Est. remaining: 2m 22sRunning iteration 1091/1500... Est. remaining: 2m 19sRunning iteration 1101/1500... Est. remaining: 2m 16sbest_combination: {'lookbacks': [50, 62, 96], 'score': np.float64(1.3292116366876336), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 12sRunning iteration 1121/1500... Est. remaining: 2m 9sRunning iteration 1131/1500... Est. remaining: 2m 5sRunning iteration 1141/1500... Est. remaining: 2m 2sRunning iteration 1151/1500... Est. remaining: 1m 58sRunning iteration 1161/1500... Est. remaining: 1m 55sRunning iteration 1171/1500... Est. remaining: 1m 52sRunning iteration 1181/1500... Est. remaining: 1m 48sRunning iteration 1191/1500... Est. remaining: 1m 45sRunning iteration 1201/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [50, 62, 96], 'score': np.float64(1.3292116366876336), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 38sRunning iteration 1221/1500... Est. remaining: 1m 34sRunning iteration 1231/1500... Est. remaining: 1m 31sRunning iteration 1241/1500... Est. remaining: 1m 28sRunning iteration 1251/1500... Est. remaining: 1m 24sRunning iteration 1261/1500... Est. remaining: 1m 21sRunning iteration 1271/1500... Est. remaining: 1m 17sRunning iteration 1281/1500... Est. remaining: 1m 14sRunning iteration 1291/1500... Est. remaining: 1m 10sRunning iteration 1301/1500... Est. remaining: 1m 7sbest_combination: {'lookbacks': [50, 62, 96], 'score': np.float64(1.3292116366876336), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 3sRunning iteration 1321/1500... Est. remaining: 1m 0sRunning iteration 1331/1500... Est. remaining: 0m 56sRunning iteration 1341/1500... Est. remaining: 0m 53sRunning iteration 1351/1500... Est. remaining: 0m 50sRunning iteration 1361/1500... Est. remaining: 0m 46sRunning iteration 1371/1500... Est. remaining: 0m 43sRunning iteration 1381/1500... Est. remaining: 0m 39sRunning iteration 1391/1500... Est. remaining: 0m 36sRunning iteration 1401/1500... Est. remaining: 0m 33sbest_combination: {'lookbacks': [50, 62, 96], 'score': np.float64(1.3292116366876336), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 29sRunning iteration 1421/1500... Est. remaining: 0m 26sRunning iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 19sRunning iteration 1451/1500... Est. remaining: 0m 16sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.1 minutes
Best normalized score: 1.33
best_combination: {'lookbacks': [50, 62, 96], 'score': np.float64(1.3292116366876336), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 62, 96] (score: 1.3292)

Monte Carlo simulation completed in 8.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 62, 96] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 72 selections (17.3%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $2,406,464,559.81
Average Annualized Gain: 43.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 198m 50s
End time: Sun Aug 24 16:47:33 EDT 2025
Average time per successful run: 13m 15s
==============================================================
✓ All runs completed successfully!
