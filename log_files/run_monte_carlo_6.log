Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Start time: Sun Aug 24 13:26:55 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Sun Aug 24 13:26:55 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,326,154,451
Annual Return: 40.54%
Sharpe Ratio: 1.38928
Sortino Ratio: 1.285
Max Drawdown: -62.2%
Avg Drawdown: -12.9%
Normalized Score: -0.970
Lookback periods: [54, 105, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,796,218,500
Annual Return: 41.78%
Sharpe Ratio: 1.41721
Sortino Ratio: 1.354
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: -0.095
Lookback periods: [88, 100, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,335,908,983
Annual Return: 45.43%
Sharpe Ratio: 1.48911
Sortino Ratio: 1.448
Max Drawdown: -58.1%
Avg Drawdown: -13.0%
Normalized Score: -0.019
Lookback periods: [144, 153, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,813,260,923
Annual Return: 47.92%
Sharpe Ratio: 1.55553
Sortino Ratio: 1.522
Max Drawdown: -58.5%
Avg Drawdown: -11.9%
Normalized Score: 0.569
Lookback periods: [148, 159, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 45sRunning iteration 31/1500... Est. remaining: 19m 13sRunning iteration 41/1500... Est. remaining: 17m 22sRunning iteration 51/1500... Est. remaining: 16m 16sRunning iteration 61/1500... Est. remaining: 15m 32sRunning iteration 71/1500... Est. remaining: 15m 0sRunning iteration 81/1500... Est. remaining: 14m 34sRunning iteration 91/1500... Est. remaining: 14m 13sRunning iteration 101/1500... Est. remaining: 13m 55sbest_combination: {'lookbacks': [148, 159, 198], 'score': np.float64(0.569043123236719), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 39sRunning iteration 121/1500... Est. remaining: 13m 25sRunning iteration 131/1500... Est. remaining: 13m 13sRunning iteration 141/1500... Est. remaining: 13m 1sRunning iteration 151/1500... Est. remaining: 12m 51sRunning iteration 161/1500... Est. remaining: 12m 41sRunning iteration 171/1500... Est. remaining: 12m 31sRunning iteration 181/1500... Est. remaining: 12m 23sRunning iteration 191/1500... Est. remaining: 12m 18sRunning iteration 201/1500... Est. remaining: 12m 14sbest_combination: {'lookbacks': [148, 159, 198], 'score': np.float64(0.569043123236719), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 13sRunning iteration 221/1500... Est. remaining: 12m 12sRunning iteration 231/1500... Est. remaining: 12m 11sRunning iteration 241/1500... Est. remaining: 12m 10sRunning iteration 251/1500... Est. remaining: 12m 8sRunning iteration 261/1500... Est. remaining: 12m 5sRunning iteration 271/1500... Est. remaining: 12m 3sRunning iteration 281/1500... Est. remaining: 11m 59sRunning iteration 291/1500... Est. remaining: 11m 55sRunning iteration 301/1500... Est. remaining: 11m 52sbest_combination: {'lookbacks': [148, 159, 198], 'score': np.float64(0.569043123236719), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 48sRunning iteration 321/1500... Est. remaining: 11m 44sRunning iteration 331/1500... Est. remaining: 11m 40sRunning iteration 341/1500... Est. remaining: 11m 37sRunning iteration 351/1500... Est. remaining: 11m 33sRunning iteration 361/1500... Est. remaining: 11m 28sRunning iteration 371/1500... Est. remaining: 11m 23sRunning iteration 381/1500... Est. remaining: 11m 19sRunning iteration 391/1500... Est. remaining: 11m 14sRunning iteration 401/1500... Est. remaining: 11m 9sbest_combination: {'lookbacks': [148, 159, 198], 'score': np.float64(0.569043123236719), 'visits': 1}
Running iteration 411/1500... Est. remaining: 11m 4sRunning iteration 421/1500... Est. remaining: 10m 59sRunning iteration 431/1500... Est. remaining: 10m 54sRunning iteration 441/1500... Est. remaining: 10m 49sRunning iteration 451/1500... Est. remaining: 10m 44sRunning iteration 461/1500... Est. remaining: 10m 38sRunning iteration 471/1500... Est. remaining: 10m 32sRunning iteration 481/1500... Est. remaining: 10m 27sRunning iteration 491/1500... Est. remaining: 10m 22sRunning iteration 501/1500... Est. remaining: 10m 17sbest_combination: {'lookbacks': [148, 159, 198], 'score': np.float64(0.569043123236719), 'visits': 1}
Running iteration 511/1500... Est. remaining: 10m 11sRunning iteration 521/1500... Est. remaining: 10m 5sRunning iteration 531/1500... Est. remaining: 9m 59sRunning iteration 541/1500... Est. remaining: 9m 54sRunning iteration 551/1500... Est. remaining: 9m 48sRunning iteration 561/1500... Est. remaining: 9m 43sRunning iteration 571/1500... Est. remaining: 9m 37sRunning iteration 581/1500... Est. remaining: 9m 31sRunning iteration 591/1500... Est. remaining: 9m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,097,057,002
Annual Return: 47.51%
Sharpe Ratio: 1.53809
Sortino Ratio: 1.509
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.636
Lookback periods: [155, 170, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/1500... Est. remaining: 9m 22sbest_combination: {'lookbacks': [155, 170, 198], 'score': np.float64(0.6360567206126618), 'visits': 1}
Running iteration 611/1500... Est. remaining: 9m 17sRunning iteration 621/1500... Est. remaining: 9m 11sRunning iteration 631/1500... Est. remaining: 9m 5sRunning iteration 641/1500... Est. remaining: 8m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,345,432,664
Annual Return: 48.69%
Sharpe Ratio: 1.58022
Sortino Ratio: 1.548
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 0.868
Lookback periods: [154, 160, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 8m 55sRunning iteration 661/1500... Est. remaining: 8m 49sRunning iteration 671/1500... Est. remaining: 8m 43sRunning iteration 681/1500... Est. remaining: 8m 37sRunning iteration 691/1500... Est. remaining: 8m 30sRunning iteration 701/1500... Est. remaining: 8m 24sbest_combination: {'lookbacks': [154, 160, 178], 'score': np.float64(0.8679167808327428), 'visits': 1}
Running iteration 711/1500... Est. remaining: 8m 18sRunning iteration 721/1500... Est. remaining: 8m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,599,776,726
Annual Return: 48.80%
Sharpe Ratio: 1.59565
Sortino Ratio: 1.556
Max Drawdown: -55.0%
Avg Drawdown: -10.4%
Normalized Score: 1.097
Lookback periods: [157, 159, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 8m 7sRunning iteration 741/1500... Est. remaining: 8m 1sRunning iteration 751/1500... Est. remaining: 7m 55sRunning iteration 761/1500... Est. remaining: 7m 49sRunning iteration 771/1500... Est. remaining: 7m 43sRunning iteration 781/1500... Est. remaining: 7m 36sRunning iteration 791/1500... Est. remaining: 7m 30sRunning iteration 801/1500... Est. remaining: 7m 24sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(1.096763205366607), 'visits': 1}
Running iteration 811/1500... Est. remaining: 7m 18sRunning iteration 821/1500... Est. remaining: 7m 12sRunning iteration 831/1500... Est. remaining: 7m 5sRunning iteration 841/1500... Est. remaining: 6m 59sRunning iteration 851/1500... Est. remaining: 6m 53sRunning iteration 861/1500... Est. remaining: 6m 47sRunning iteration 871/1500... Est. remaining: 6m 40sRunning iteration 881/1500... Est. remaining: 6m 34sRunning iteration 891/1500... Est. remaining: 6m 28sRunning iteration 901/1500... Est. remaining: 6m 22sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(1.096763205366607), 'visits': 1}
Running iteration 911/1500... Est. remaining: 6m 15sRunning iteration 921/1500... Est. remaining: 6m 9sRunning iteration 931/1500... Est. remaining: 6m 3sRunning iteration 941/1500... Est. remaining: 5m 56sRunning iteration 951/1500... Est. remaining: 5m 50sRunning iteration 961/1500... Est. remaining: 5m 44sRunning iteration 971/1500... Est. remaining: 5m 38sRunning iteration 981/1500... Est. remaining: 5m 31sRunning iteration 991/1500... Est. remaining: 5m 25sRunning iteration 1001/1500... Est. remaining: 5m 19sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(1.096763205366607), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 5m 13sRunning iteration 1021/1500... Est. remaining: 5m 7sRunning iteration 1031/1500... Est. remaining: 5m 0sRunning iteration 1041/1500... Est. remaining: 4m 54sRunning iteration 1051/1500... Est. remaining: 4m 48sRunning iteration 1061/1500... Est. remaining: 4m 41sRunning iteration 1071/1500... Est. remaining: 4m 35sRunning iteration 1081/1500... Est. remaining: 4m 29sRunning iteration 1091/1500... Est. remaining: 4m 23sRunning iteration 1101/1500... Est. remaining: 4m 16sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(1.096763205366607), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 10sRunning iteration 1121/1500... Est. remaining: 4m 4sRunning iteration 1131/1500... Est. remaining: 3m 58sRunning iteration 1141/1500... Est. remaining: 3m 51sRunning iteration 1151/1500... Est. remaining: 3m 45sRunning iteration 1161/1500... Est. remaining: 3m 38sRunning iteration 1171/1500... Est. remaining: 3m 32sRunning iteration 1181/1500... Est. remaining: 3m 25sRunning iteration 1191/1500... Est. remaining: 3m 19sRunning iteration 1201/1500... Est. remaining: 3m 12sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(1.096763205366607), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 6sRunning iteration 1221/1500... Est. remaining: 2m 59sRunning iteration 1231/1500... Est. remaining: 2m 53sRunning iteration 1241/1500... Est. remaining: 2m 46sRunning iteration 1251/1500... Est. remaining: 2m 40sRunning iteration 1261/1500... Est. remaining: 2m 33sRunning iteration 1271/1500... Est. remaining: 2m 27sRunning iteration 1281/1500... Est. remaining: 2m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,298,617,541
Annual Return: 49.50%
Sharpe Ratio: 1.60605
Sortino Ratio: 1.570
Max Drawdown: -59.0%
Avg Drawdown: -9.9%
Normalized Score: 1.136
Lookback periods: [156, 158, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1291/1500... Est. remaining: 2m 14sRunning iteration 1301/1500... Est. remaining: 2m 8sbest_combination: {'lookbacks': [156, 158, 172], 'score': np.float64(1.136279376300887), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 1sRunning iteration 1321/1500... Est. remaining: 1m 55sRunning iteration 1331/1500... Est. remaining: 1m 48sRunning iteration 1341/1500... Est. remaining: 1m 42sRunning iteration 1351/1500... Est. remaining: 1m 36sRunning iteration 1361/1500... Est. remaining: 1m 29sRunning iteration 1371/1500... Est. remaining: 1m 23sRunning iteration 1381/1500... Est. remaining: 1m 16sRunning iteration 1391/1500... Est. remaining: 1m 10sRunning iteration 1401/1500... Est. remaining: 1m 4sbest_combination: {'lookbacks': [156, 158, 172], 'score': np.float64(1.136279376300887), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 57sRunning iteration 1421/1500... Est. remaining: 0m 51sRunning iteration 1431/1500... Est. remaining: 0m 44sRunning iteration 1441/1500... Est. remaining: 0m 38sRunning iteration 1451/1500... Est. remaining: 0m 31sRunning iteration 1461/1500... Est. remaining: 0m 25sRunning iteration 1471/1500... Est. remaining: 0m 19sRunning iteration 1481/1500... Est. remaining: 0m 12sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 16.0 minutes
Best normalized score: 1.14
best_combination: {'lookbacks': [156, 158, 172], 'score': np.float64(1.136279376300887), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 158, 172] (score: 1.1363)

Monte Carlo simulation completed in 16.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 158, 172] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 116 selections (27.9%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 77 selections (18.5%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,298,617,541.35
Average Annualized Gain: 49.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Sun Aug 24 13:43:02 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $306,367,637
Annual Return: 34.72%
Sharpe Ratio: 1.22570
Sortino Ratio: 1.127
Max Drawdown: -72.1%
Avg Drawdown: -14.2%
Normalized Score: -2.494
Lookback periods: [64, 98, 138] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,541,432,770
Annual Return: 41.15%
Sharpe Ratio: 1.35711
Sortino Ratio: 1.311
Max Drawdown: -67.2%
Avg Drawdown: -13.6%
Normalized Score: -1.182
Lookback periods: [125, 132, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $826,218,783
Annual Return: 38.63%
Sharpe Ratio: 1.36813
Sortino Ratio: 1.267
Max Drawdown: -52.3%
Avg Drawdown: -12.3%
Normalized Score: -0.793
Lookback periods: [54, 93, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 37m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,011,424,856
Annual Return: 43.91%
Sharpe Ratio: 1.45486
Sortino Ratio: 1.418
Max Drawdown: -68.2%
Avg Drawdown: -12.3%
Normalized Score: -0.475
Lookback periods: [108, 168, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,807,163,535
Annual Return: 44.88%
Sharpe Ratio: 1.45320
Sortino Ratio: 1.426
Max Drawdown: -61.3%
Avg Drawdown: -12.1%
Normalized Score: -0.107
Lookback periods: [152, 161, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,747,045,851
Annual Return: 44.82%
Sharpe Ratio: 1.47753
Sortino Ratio: 1.441
Max Drawdown: -55.0%
Avg Drawdown: -12.3%
Normalized Score: 0.114
Lookback periods: [132, 134, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 32m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,240,816,745
Annual Return: 45.33%
Sharpe Ratio: 1.47538
Sortino Ratio: 1.436
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.134
Lookback periods: [171, 197, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 28m 6sRunning iteration 41/1500... Est. remaining: 25m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,213,060,602
Annual Return: 46.94%
Sharpe Ratio: 1.53290
Sortino Ratio: 1.493
Max Drawdown: -62.7%
Avg Drawdown: -12.2%
Normalized Score: 0.211
Lookback periods: [136, 159, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 23m 41sRunning iteration 61/1500... Est. remaining: 22m 9sRunning iteration 71/1500... Est. remaining: 21m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,921,488,418
Annual Return: 43.78%
Sharpe Ratio: 1.51984
Sortino Ratio: 1.429
Max Drawdown: -52.3%
Avg Drawdown: -9.1%
Normalized Score: 0.609
Lookback periods: [50, 96, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 20m 51sRunning iteration 91/1500... Est. remaining: 20m 4sRunning iteration 101/1500... Est. remaining: 19m 29sbest_combination: {'lookbacks': [50, 96, 146], 'score': np.float64(0.6094953701163315), 'visits': 1}
Running iteration 111/1500... Est. remaining: 19m 0sRunning iteration 121/1500... Est. remaining: 18m 33sRunning iteration 131/1500... Est. remaining: 18m 9sRunning iteration 141/1500... Est. remaining: 17m 46sRunning iteration 151/1500... Est. remaining: 17m 29sRunning iteration 161/1500... Est. remaining: 17m 16sRunning iteration 171/1500... Est. remaining: 16m 59sRunning iteration 181/1500... Est. remaining: 16m 41sRunning iteration 191/1500... Est. remaining: 16m 20sRunning iteration 201/1500... Est. remaining: 16m 4sbest_combination: {'lookbacks': [50, 96, 146], 'score': np.float64(0.6094953701163315), 'visits': 1}
Running iteration 211/1500... Est. remaining: 15m 50sRunning iteration 221/1500... Est. remaining: 15m 38sRunning iteration 231/1500... Est. remaining: 15m 25sRunning iteration 241/1500... Est. remaining: 15m 11sRunning iteration 251/1500... Est. remaining: 14m 58sRunning iteration 261/1500... Est. remaining: 14m 45sRunning iteration 271/1500... Est. remaining: 14m 33sRunning iteration 281/1500... Est. remaining: 14m 22sRunning iteration 291/1500... Est. remaining: 14m 11sRunning iteration 301/1500... Est. remaining: 14m 0sbest_combination: {'lookbacks': [50, 96, 146], 'score': np.float64(0.6094953701163315), 'visits': 1}
Running iteration 311/1500... Est. remaining: 13m 49sRunning iteration 321/1500... Est. remaining: 13m 39sRunning iteration 331/1500... Est. remaining: 13m 30sRunning iteration 341/1500... Est. remaining: 13m 20sRunning iteration 351/1500... Est. remaining: 13m 10sRunning iteration 361/1500... Est. remaining: 13m 1sRunning iteration 371/1500... Est. remaining: 12m 51sRunning iteration 381/1500... Est. remaining: 12m 42sRunning iteration 391/1500... Est. remaining: 12m 33sRunning iteration 401/1500... Est. remaining: 12m 24sbest_combination: {'lookbacks': [50, 96, 146], 'score': np.float64(0.6094953701163315), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,499,922,762
Annual Return: 47.74%
Sharpe Ratio: 1.55776
Sortino Ratio: 1.518
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.819
Lookback periods: [146, 156, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 12m 19sRunning iteration 421/1500... Est. remaining: 12m 11sRunning iteration 431/1500... Est. remaining: 12m 3sRunning iteration 441/1500... Est. remaining: 11m 54sRunning iteration 451/1500... Est. remaining: 11m 46sRunning iteration 461/1500... Est. remaining: 11m 39sRunning iteration 471/1500... Est. remaining: 11m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,587,112,534
Annual Return: 48.79%
Sharpe Ratio: 1.58396
Sortino Ratio: 1.560
Max Drawdown: -58.5%
Avg Drawdown: -10.8%
Normalized Score: 0.908
Lookback periods: [155, 162, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 11m 28sRunning iteration 491/1500... Est. remaining: 11m 20sRunning iteration 501/1500... Est. remaining: 11m 12sbest_combination: {'lookbacks': [155, 162, 168], 'score': np.float64(0.9084531943802251), 'visits': 1}
Running iteration 511/1500... Est. remaining: 11m 4sRunning iteration 521/1500... Est. remaining: 10m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,911,221,965
Annual Return: 48.48%
Sharpe Ratio: 1.59607
Sortino Ratio: 1.554
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 0.993
Lookback periods: [139, 157, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 10m 51sRunning iteration 541/1500... Est. remaining: 10m 43sRunning iteration 551/1500... Est. remaining: 10m 36sRunning iteration 561/1500... Est. remaining: 10m 29sRunning iteration 571/1500... Est. remaining: 10m 21sRunning iteration 581/1500... Est. remaining: 10m 14sRunning iteration 591/1500... Est. remaining: 10m 7sRunning iteration 601/1500... Est. remaining: 9m 59sbest_combination: {'lookbacks': [139, 157, 172], 'score': np.float64(0.9925339427301285), 'visits': 1}
Running iteration 611/1500... Est. remaining: 9m 52sRunning iteration 621/1500... Est. remaining: 9m 45sRunning iteration 631/1500... Est. remaining: 9m 38sRunning iteration 641/1500... Est. remaining: 9m 30sRunning iteration 651/1500... Est. remaining: 9m 24sRunning iteration 661/1500... Est. remaining: 9m 17sRunning iteration 671/1500... Est. remaining: 9m 10sRunning iteration 681/1500... Est. remaining: 9m 3sRunning iteration 691/1500... Est. remaining: 8m 57sRunning iteration 701/1500... Est. remaining: 8m 50sbest_combination: {'lookbacks': [139, 157, 172], 'score': np.float64(0.9925339427301285), 'visits': 1}
Running iteration 711/1500... Est. remaining: 8m 44sRunning iteration 721/1500... Est. remaining: 8m 37sRunning iteration 731/1500... Est. remaining: 8m 32sRunning iteration 741/1500... Est. remaining: 8m 24sRunning iteration 751/1500... Est. remaining: 8m 17sRunning iteration 761/1500... Est. remaining: 8m 10sRunning iteration 771/1500... Est. remaining: 8m 2sRunning iteration 781/1500... Est. remaining: 7m 55sRunning iteration 791/1500... Est. remaining: 7m 48sRunning iteration 801/1500... Est. remaining: 7m 41sbest_combination: {'lookbacks': [139, 157, 172], 'score': np.float64(0.9925339427301285), 'visits': 1}
Running iteration 811/1500... Est. remaining: 7m 34sRunning iteration 821/1500... Est. remaining: 7m 27sRunning iteration 831/1500... Est. remaining: 7m 20sRunning iteration 841/1500... Est. remaining: 7m 13sRunning iteration 851/1500... Est. remaining: 7m 6sRunning iteration 861/1500... Est. remaining: 6m 59sRunning iteration 871/1500... Est. remaining: 6m 52sRunning iteration 881/1500... Est. remaining: 6m 45sRunning iteration 891/1500... Est. remaining: 6m 39sRunning iteration 901/1500... Est. remaining: 6m 32sbest_combination: {'lookbacks': [139, 157, 172], 'score': np.float64(0.9925339427301285), 'visits': 1}
Running iteration 911/1500... Est. remaining: 6m 25sRunning iteration 921/1500... Est. remaining: 6m 18sRunning iteration 931/1500... Est. remaining: 6m 12sRunning iteration 941/1500... Est. remaining: 6m 5sRunning iteration 951/1500... Est. remaining: 5m 59sRunning iteration 961/1500... Est. remaining: 5m 52sRunning iteration 971/1500... Est. remaining: 5m 45sRunning iteration 981/1500... Est. remaining: 5m 38sRunning iteration 991/1500... Est. remaining: 5m 31sRunning iteration 1001/1500... Est. remaining: 5m 25sbest_combination: {'lookbacks': [139, 157, 172], 'score': np.float64(0.9925339427301285), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 5m 18sRunning iteration 1021/1500... Est. remaining: 5m 12sRunning iteration 1031/1500... Est. remaining: 5m 5sRunning iteration 1041/1500... Est. remaining: 4m 59sRunning iteration 1051/1500... Est. remaining: 4m 52sRunning iteration 1061/1500... Est. remaining: 4m 46sRunning iteration 1071/1500... Est. remaining: 4m 39sRunning iteration 1081/1500... Est. remaining: 4m 33sRunning iteration 1091/1500... Est. remaining: 4m 26sRunning iteration 1101/1500... Est. remaining: 4m 19sbest_combination: {'lookbacks': [139, 157, 172], 'score': np.float64(0.9925339427301285), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 13sRunning iteration 1121/1500... Est. remaining: 4m 6sRunning iteration 1131/1500... Est. remaining: 4m 0sRunning iteration 1141/1500... Est. remaining: 3m 53sRunning iteration 1151/1500... Est. remaining: 3m 47sRunning iteration 1161/1500... Est. remaining: 3m 40sRunning iteration 1171/1500... Est. remaining: 3m 34sRunning iteration 1181/1500... Est. remaining: 3m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,560,123,240
Annual Return: 49.21%
Sharpe Ratio: 1.61587
Sortino Ratio: 1.571
Max Drawdown: -57.2%
Avg Drawdown: -10.7%
Normalized Score: 1.054
Lookback periods: [138, 157, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1191/1500... Est. remaining: 3m 21sRunning iteration 1201/1500... Est. remaining: 3m 15sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(1.0542186905131279), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 8sRunning iteration 1221/1500... Est. remaining: 3m 2sRunning iteration 1231/1500... Est. remaining: 2m 55sRunning iteration 1241/1500... Est. remaining: 2m 49sRunning iteration 1251/1500... Est. remaining: 2m 42sRunning iteration 1261/1500... Est. remaining: 2m 36sRunning iteration 1271/1500... Est. remaining: 2m 29sRunning iteration 1281/1500... Est. remaining: 2m 23sRunning iteration 1291/1500... Est. remaining: 2m 16sRunning iteration 1301/1500... Est. remaining: 2m 10sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(1.0542186905131279), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 3sRunning iteration 1321/1500... Est. remaining: 1m 57sRunning iteration 1331/1500... Est. remaining: 1m 50sRunning iteration 1341/1500... Est. remaining: 1m 44sRunning iteration 1351/1500... Est. remaining: 1m 37sRunning iteration 1361/1500... Est. remaining: 1m 31sRunning iteration 1371/1500... Est. remaining: 1m 24sRunning iteration 1381/1500... Est. remaining: 1m 18sRunning iteration 1391/1500... Est. remaining: 1m 11sRunning iteration 1401/1500... Est. remaining: 1m 5sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(1.0542186905131279), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 58sRunning iteration 1421/1500... Est. remaining: 0m 52sRunning iteration 1431/1500... Est. remaining: 0m 45sRunning iteration 1441/1500... Est. remaining: 0m 39sRunning iteration 1451/1500... Est. remaining: 0m 32sRunning iteration 1461/1500... Est. remaining: 0m 26sRunning iteration 1471/1500... Est. remaining: 0m 19sRunning iteration 1481/1500... Est. remaining: 0m 13sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 16.3 minutes
Best normalized score: 1.05
best_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(1.0542186905131279), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [138, 157, 171] (score: 1.0542)

Monte Carlo simulation completed in 16.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [138, 157, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,560,123,239.54
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Sun Aug 24 13:59:28 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,189,228,160
Annual Return: 40.10%
Sharpe Ratio: 1.36505
Sortino Ratio: 1.294
Max Drawdown: -57.8%
Avg Drawdown: -12.4%
Normalized Score: -0.801
Lookback periods: [91, 127, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,418,631,482
Annual Return: 40.81%
Sharpe Ratio: 1.41436
Sortino Ratio: 1.327
Max Drawdown: -52.3%
Avg Drawdown: -11.2%
Normalized Score: -0.265
Lookback periods: [89, 97, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,934,300,309
Annual Return: 43.80%
Sharpe Ratio: 1.56598
Sortino Ratio: 1.470
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.261
Lookback periods: [50, 54, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 38m 55sRunning iteration 21/1500... Est. remaining: 26m 57sRunning iteration 31/1500... Est. remaining: 22m 56sRunning iteration 41/1500... Est. remaining: 20m 55sRunning iteration 51/1500... Est. remaining: 19m 34sRunning iteration 61/1500... Est. remaining: 18m 33sRunning iteration 71/1500... Est. remaining: 17m 59sRunning iteration 81/1500... Est. remaining: 17m 28sRunning iteration 91/1500... Est. remaining: 17m 2sRunning iteration 101/1500... Est. remaining: 16m 38sbest_combination: {'lookbacks': [50, 54, 89], 'score': np.float64(1.2614673127141058), 'visits': 1}
Running iteration 111/1500... Est. remaining: 16m 18sRunning iteration 121/1500... Est. remaining: 15m 59sRunning iteration 131/1500... Est. remaining: 15m 44sRunning iteration 141/1500... Est. remaining: 15m 28sRunning iteration 151/1500... Est. remaining: 15m 15sRunning iteration 161/1500... Est. remaining: 15m 6sRunning iteration 171/1500... Est. remaining: 14m 54sRunning iteration 181/1500... Est. remaining: 14m 43sRunning iteration 191/1500... Est. remaining: 14m 33sRunning iteration 201/1500... Est. remaining: 14m 22sbest_combination: {'lookbacks': [50, 54, 89], 'score': np.float64(1.2614673127141058), 'visits': 1}
Running iteration 211/1500... Est. remaining: 14m 9sRunning iteration 221/1500... Est. remaining: 13m 57sRunning iteration 231/1500... Est. remaining: 13m 48sRunning iteration 241/1500... Est. remaining: 13m 39sRunning iteration 251/1500... Est. remaining: 13m 31sRunning iteration 261/1500... Est. remaining: 13m 22sRunning iteration 271/1500... Est. remaining: 13m 14sRunning iteration 281/1500... Est. remaining: 13m 6sRunning iteration 291/1500... Est. remaining: 12m 57sRunning iteration 301/1500... Est. remaining: 12m 49sbest_combination: {'lookbacks': [50, 54, 89], 'score': np.float64(1.2614673127141058), 'visits': 1}
Running iteration 311/1500... Est. remaining: 12m 41sRunning iteration 321/1500... Est. remaining: 12m 33sRunning iteration 331/1500... Est. remaining: 12m 26sRunning iteration 341/1500... Est. remaining: 12m 18sRunning iteration 351/1500... Est. remaining: 12m 11sRunning iteration 361/1500... Est. remaining: 12m 3sRunning iteration 371/1500... Est. remaining: 11m 56sRunning iteration 381/1500... Est. remaining: 11m 49sRunning iteration 391/1500... Est. remaining: 11m 41sRunning iteration 401/1500... Est. remaining: 11m 34sbest_combination: {'lookbacks': [50, 54, 89], 'score': np.float64(1.2614673127141058), 'visits': 1}
Running iteration 411/1500... Est. remaining: 11m 27sRunning iteration 421/1500... Est. remaining: 11m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,851,720,310
Annual Return: 44.93%
Sharpe Ratio: 1.61361
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.601
Lookback periods: [51, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 11m 17sRunning iteration 441/1500... Est. remaining: 11m 10sRunning iteration 451/1500... Est. remaining: 11m 2sRunning iteration 461/1500... Est. remaining: 10m 55sRunning iteration 471/1500... Est. remaining: 10m 48sRunning iteration 481/1500... Est. remaining: 10m 41sRunning iteration 491/1500... Est. remaining: 10m 34sRunning iteration 501/1500... Est. remaining: 10m 28sbest_combination: {'lookbacks': [51, 52, 95], 'score': np.float64(1.6005885647434503), 'visits': 1}
Running iteration 511/1500... Est. remaining: 10m 21sRunning iteration 521/1500... Est. remaining: 10m 14sRunning iteration 531/1500... Est. remaining: 10m 7sRunning iteration 541/1500... Est. remaining: 10m 1sRunning iteration 551/1500... Est. remaining: 9m 54sRunning iteration 561/1500... Est. remaining: 9m 47sRunning iteration 571/1500... Est. remaining: 9m 40sRunning iteration 581/1500... Est. remaining: 9m 34sRunning iteration 591/1500... Est. remaining: 9m 27sRunning iteration 601/1500... Est. remaining: 9m 20sbest_combination: {'lookbacks': [51, 52, 95], 'score': np.float64(1.6005885647434503), 'visits': 1}
Running iteration 611/1500... Est. remaining: 9m 13sRunning iteration 621/1500... Est. remaining: 9m 7sRunning iteration 631/1500... Est. remaining: 9m 0sRunning iteration 641/1500... Est. remaining: 8m 54sRunning iteration 651/1500... Est. remaining: 8m 47sRunning iteration 661/1500... Est. remaining: 8m 41sRunning iteration 671/1500... Est. remaining: 8m 34sRunning iteration 681/1500... Est. remaining: 8m 28sRunning iteration 691/1500... Est. remaining: 8m 21sRunning iteration 701/1500... Est. remaining: 8m 15sbest_combination: {'lookbacks': [51, 52, 95], 'score': np.float64(1.6005885647434503), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,613,763,997
Annual Return: 44.66%
Sharpe Ratio: 1.61575
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.649
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 711/1500... Est. remaining: 8m 11sRunning iteration 721/1500... Est. remaining: 8m 4sRunning iteration 731/1500... Est. remaining: 7m 58sRunning iteration 741/1500... Est. remaining: 7m 52sRunning iteration 751/1500... Est. remaining: 7m 45sRunning iteration 761/1500... Est. remaining: 7m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.046
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 771/1500... Est. remaining: 7m 34sRunning iteration 781/1500... Est. remaining: 7m 27sRunning iteration 791/1500... Est. remaining: 7m 21sRunning iteration 801/1500... Est. remaining: 7m 14sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 811/1500... Est. remaining: 7m 8sRunning iteration 821/1500... Est. remaining: 7m 1sRunning iteration 831/1500... Est. remaining: 6m 55sRunning iteration 841/1500... Est. remaining: 6m 49sRunning iteration 851/1500... Est. remaining: 6m 42sRunning iteration 861/1500... Est. remaining: 6m 36sRunning iteration 871/1500... Est. remaining: 6m 29sRunning iteration 881/1500... Est. remaining: 6m 23sRunning iteration 891/1500... Est. remaining: 6m 17sRunning iteration 901/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 911/1500... Est. remaining: 6m 4sRunning iteration 921/1500... Est. remaining: 5m 58sRunning iteration 931/1500... Est. remaining: 5m 51sRunning iteration 941/1500... Est. remaining: 5m 45sRunning iteration 951/1500... Est. remaining: 5m 39sRunning iteration 961/1500... Est. remaining: 5m 33sRunning iteration 971/1500... Est. remaining: 5m 26sRunning iteration 981/1500... Est. remaining: 5m 20sRunning iteration 991/1500... Est. remaining: 5m 14sRunning iteration 1001/1500... Est. remaining: 5m 8sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 5m 1sRunning iteration 1021/1500... Est. remaining: 4m 55sRunning iteration 1031/1500... Est. remaining: 4m 49sRunning iteration 1041/1500... Est. remaining: 4m 43sRunning iteration 1051/1500... Est. remaining: 4m 36sRunning iteration 1061/1500... Est. remaining: 4m 30sRunning iteration 1071/1500... Est. remaining: 4m 24sRunning iteration 1081/1500... Est. remaining: 4m 18sRunning iteration 1091/1500... Est. remaining: 4m 11sRunning iteration 1101/1500... Est. remaining: 4m 5sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 59sRunning iteration 1121/1500... Est. remaining: 3m 53sRunning iteration 1131/1500... Est. remaining: 3m 47sRunning iteration 1141/1500... Est. remaining: 3m 40sRunning iteration 1151/1500... Est. remaining: 3m 34sRunning iteration 1161/1500... Est. remaining: 3m 28sRunning iteration 1171/1500... Est. remaining: 3m 22sRunning iteration 1181/1500... Est. remaining: 3m 16sRunning iteration 1191/1500... Est. remaining: 3m 9sRunning iteration 1201/1500... Est. remaining: 3m 3sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 57sRunning iteration 1221/1500... Est. remaining: 2m 51sRunning iteration 1231/1500... Est. remaining: 2m 45sRunning iteration 1241/1500... Est. remaining: 2m 39sRunning iteration 1251/1500... Est. remaining: 2m 33sRunning iteration 1261/1500... Est. remaining: 2m 26sRunning iteration 1271/1500... Est. remaining: 2m 20sRunning iteration 1281/1500... Est. remaining: 2m 14sRunning iteration 1291/1500... Est. remaining: 2m 8sRunning iteration 1301/1500... Est. remaining: 2m 2sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 56sRunning iteration 1321/1500... Est. remaining: 1m 50sRunning iteration 1331/1500... Est. remaining: 1m 43sRunning iteration 1341/1500... Est. remaining: 1m 37sRunning iteration 1351/1500... Est. remaining: 1m 31sRunning iteration 1361/1500... Est. remaining: 1m 25sRunning iteration 1371/1500... Est. remaining: 1m 19sRunning iteration 1381/1500... Est. remaining: 1m 13sRunning iteration 1391/1500... Est. remaining: 1m 7sRunning iteration 1401/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 54sRunning iteration 1421/1500... Est. remaining: 0m 48sRunning iteration 1431/1500... Est. remaining: 0m 42sRunning iteration 1441/1500... Est. remaining: 0m 36sRunning iteration 1451/1500... Est. remaining: 0m 30sRunning iteration 1461/1500... Est. remaining: 0m 24sRunning iteration 1471/1500... Est. remaining: 0m 18sRunning iteration 1481/1500... Est. remaining: 0m 12sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 15.2 minutes
Best normalized score: 2.05
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.0463)

Monte Carlo simulation completed in 15.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Sun Aug 24 14:14:50 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,390,352,023
Annual Return: 40.73%
Sharpe Ratio: 1.36888
Sortino Ratio: 1.313
Max Drawdown: -67.0%
Avg Drawdown: -13.6%
Normalized Score: -1.201
Lookback periods: [108, 117, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,249,757,891
Annual Return: 44.22%
Sharpe Ratio: 1.43854
Sortino Ratio: 1.398
Max Drawdown: -65.6%
Avg Drawdown: -13.0%
Normalized Score: -0.521
Lookback periods: [144, 183, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,008,987,373
Annual Return: 39.44%
Sharpe Ratio: 1.40453
Sortino Ratio: 1.296
Max Drawdown: -41.9%
Avg Drawdown: -9.9%
Normalized Score: 0.085
Lookback periods: [50, 51, 135] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 36m 14sRunning iteration 21/1500... Est. remaining: 25m 33sRunning iteration 31/1500... Est. remaining: 21m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,041,958,157
Annual Return: 45.13%
Sharpe Ratio: 1.51185
Sortino Ratio: 1.459
Max Drawdown: -56.9%
Avg Drawdown: -11.6%
Normalized Score: 0.244
Lookback periods: [115, 145, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 20m 57sRunning iteration 51/1500... Est. remaining: 19m 35sRunning iteration 61/1500... Est. remaining: 18m 37sRunning iteration 71/1500... Est. remaining: 17m 43sRunning iteration 81/1500... Est. remaining: 17m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,754,241,539
Annual Return: 47.30%
Sharpe Ratio: 1.55946
Sortino Ratio: 1.520
Max Drawdown: -56.8%
Avg Drawdown: -12.1%
Normalized Score: 0.535
Lookback periods: [139, 139, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 16m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,836,321,860
Annual Return: 47.35%
Sharpe Ratio: 1.53398
Sortino Ratio: 1.499
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.559
Lookback periods: [178, 185, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 16m 45sbest_combination: {'lookbacks': [178, 185, 186], 'score': np.float64(0.5588122737018792), 'visits': 1}
Running iteration 111/1500... Est. remaining: 16m 18sRunning iteration 121/1500... Est. remaining: 15m 55sRunning iteration 131/1500... Est. remaining: 15m 34sRunning iteration 141/1500... Est. remaining: 15m 16sRunning iteration 151/1500... Est. remaining: 14m 59sRunning iteration 161/1500... Est. remaining: 14m 44sRunning iteration 171/1500... Est. remaining: 14m 30sRunning iteration 181/1500... Est. remaining: 14m 18sRunning iteration 191/1500... Est. remaining: 14m 3sRunning iteration 201/1500... Est. remaining: 13m 49sbest_combination: {'lookbacks': [178, 185, 186], 'score': np.float64(0.5588122737018792), 'visits': 1}
Running iteration 211/1500... Est. remaining: 13m 37sRunning iteration 221/1500... Est. remaining: 13m 27sRunning iteration 231/1500... Est. remaining: 13m 18sRunning iteration 241/1500... Est. remaining: 13m 6sRunning iteration 251/1500... Est. remaining: 12m 56sRunning iteration 261/1500... Est. remaining: 12m 47sRunning iteration 271/1500... Est. remaining: 12m 38sRunning iteration 281/1500... Est. remaining: 12m 30sRunning iteration 291/1500... Est. remaining: 12m 22sRunning iteration 301/1500... Est. remaining: 12m 15sbest_combination: {'lookbacks': [178, 185, 186], 'score': np.float64(0.5588122737018792), 'visits': 1}
Running iteration 311/1500... Est. remaining: 12m 7sRunning iteration 321/1500... Est. remaining: 11m 59sRunning iteration 331/1500... Est. remaining: 11m 52sRunning iteration 341/1500... Est. remaining: 11m 44sRunning iteration 351/1500... Est. remaining: 11m 37sRunning iteration 361/1500... Est. remaining: 11m 30sRunning iteration 371/1500... Est. remaining: 11m 22sRunning iteration 381/1500... Est. remaining: 11m 15sRunning iteration 391/1500... Est. remaining: 11m 8sRunning iteration 401/1500... Est. remaining: 11m 1sbest_combination: {'lookbacks': [178, 185, 186], 'score': np.float64(0.5588122737018792), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 54sRunning iteration 421/1500... Est. remaining: 10m 47sRunning iteration 431/1500... Est. remaining: 10m 40sRunning iteration 441/1500... Est. remaining: 10m 33sRunning iteration 451/1500... Est. remaining: 10m 26sRunning iteration 461/1500... Est. remaining: 10m 20sRunning iteration 471/1500... Est. remaining: 10m 13sRunning iteration 481/1500... Est. remaining: 10m 6sRunning iteration 491/1500... Est. remaining: 10m 0sRunning iteration 501/1500... Est. remaining: 9m 53sbest_combination: {'lookbacks': [178, 185, 186], 'score': np.float64(0.5588122737018792), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,544,597,718
Annual Return: 46.46%
Sharpe Ratio: 1.50803
Sortino Ratio: 1.484
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.578
Lookback periods: [162, 164, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 9m 49sRunning iteration 521/1500... Est. remaining: 9m 43sRunning iteration 531/1500... Est. remaining: 9m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,513,172,460
Annual Return: 47.75%
Sharpe Ratio: 1.56124
Sortino Ratio: 1.530
Max Drawdown: -58.5%
Avg Drawdown: -11.8%
Normalized Score: 0.588
Lookback periods: [139, 155, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 9m 33sRunning iteration 551/1500... Est. remaining: 9m 26sRunning iteration 561/1500... Est. remaining: 9m 20sRunning iteration 571/1500... Est. remaining: 9m 13sRunning iteration 581/1500... Est. remaining: 9m 7sRunning iteration 591/1500... Est. remaining: 9m 0sRunning iteration 601/1500... Est. remaining: 8m 54sbest_combination: {'lookbacks': [139, 155, 164], 'score': np.float64(0.5876502072177762), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,645,206,516
Annual Return: 48.35%
Sharpe Ratio: 1.55468
Sortino Ratio: 1.528
Max Drawdown: -59.0%
Avg Drawdown: -10.7%
Normalized Score: 0.777
Lookback periods: [176, 193, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 8m 43sRunning iteration 631/1500... Est. remaining: 8m 36sRunning iteration 641/1500... Est. remaining: 8m 29sRunning iteration 651/1500... Est. remaining: 8m 22sRunning iteration 661/1500... Est. remaining: 8m 15sRunning iteration 671/1500... Est. remaining: 8m 8sRunning iteration 681/1500... Est. remaining: 8m 2sRunning iteration 691/1500... Est. remaining: 7m 55sRunning iteration 701/1500... Est. remaining: 7m 49sbest_combination: {'lookbacks': [176, 193, 196], 'score': np.float64(0.7774983458513847), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 42sRunning iteration 721/1500... Est. remaining: 7m 36sRunning iteration 731/1500... Est. remaining: 11m 53sRunning iteration 741/1500... Est. remaining: 15m 56sRunning iteration 751/1500... Est. remaining: 15m 36sRunning iteration 761/1500... Est. remaining: 15m 17sRunning iteration 771/1500... Est. remaining: 14m 58sRunning iteration 781/1500... Est. remaining: 14m 39sRunning iteration 791/1500... Est. remaining: 14m 20sRunning iteration 801/1500... Est. remaining: 14m 2sbest_combination: {'lookbacks': [176, 193, 196], 'score': np.float64(0.7774983458513847), 'visits': 1}
Running iteration 811/1500... Est. remaining: 13m 44sRunning iteration 821/1500... Est. remaining: 13m 26sRunning iteration 831/1500... Est. remaining: 13m 9sRunning iteration 841/1500... Est. remaining: 12m 52sRunning iteration 851/1500... Est. remaining: 12m 35sRunning iteration 861/1500... Est. remaining: 12m 19sRunning iteration 871/1500... Est. remaining: 12m 3sRunning iteration 881/1500... Est. remaining: 11m 47sRunning iteration 891/1500... Est. remaining: 11m 31sRunning iteration 901/1500... Est. remaining: 11m 16sbest_combination: {'lookbacks': [176, 193, 196], 'score': np.float64(0.7774983458513847), 'visits': 1}
Running iteration 911/1500... Est. remaining: 11m 1sRunning iteration 921/1500... Est. remaining: 10m 46sRunning iteration 931/1500... Est. remaining: 10m 31sRunning iteration 941/1500... Est. remaining: 10m 16sRunning iteration 951/1500... Est. remaining: 10m 2sRunning iteration 961/1500... Est. remaining: 9m 48sRunning iteration 971/1500... Est. remaining: 9m 34sRunning iteration 981/1500... Est. remaining: 9m 21sRunning iteration 991/1500... Est. remaining: 9m 7sRunning iteration 1001/1500... Est. remaining: 8m 54sbest_combination: {'lookbacks': [176, 193, 196], 'score': np.float64(0.7774983458513847), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 8m 40sRunning iteration 1021/1500... Est. remaining: 8m 27sRunning iteration 1031/1500... Est. remaining: 8m 14sRunning iteration 1041/1500... Est. remaining: 8m 1sRunning iteration 1051/1500... Est. remaining: 7m 49sRunning iteration 1061/1500... Est. remaining: 7m 36sRunning iteration 1071/1500... Est. remaining: 7m 24sRunning iteration 1081/1500... Est. remaining: 7m 11sRunning iteration 1091/1500... Est. remaining: 6m 59sRunning iteration 1101/1500... Est. remaining: 6m 47sbest_combination: {'lookbacks': [176, 193, 196], 'score': np.float64(0.7774983458513847), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 6m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,718,735,953
Annual Return: 49.27%
Sharpe Ratio: 1.58741
Sortino Ratio: 1.553
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.800
Lookback periods: [178, 185, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1121/1500... Est. remaining: 6m 24sRunning iteration 1131/1500... Est. remaining: 6m 12sRunning iteration 1141/1500... Est. remaining: 6m 1sRunning iteration 1151/1500... Est. remaining: 5m 49sRunning iteration 1161/1500... Est. remaining: 5m 38sRunning iteration 1171/1500... Est. remaining: 5m 27sRunning iteration 1181/1500... Est. remaining: 5m 15sRunning iteration 1191/1500... Est. remaining: 5m 4sRunning iteration 1201/1500... Est. remaining: 4m 53sbest_combination: {'lookbacks': [178, 185, 189], 'score': np.float64(0.8002349726944615), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 4m 42sRunning iteration 1221/1500... Est. remaining: 4m 32sRunning iteration 1231/1500... Est. remaining: 4m 21sRunning iteration 1241/1500... Est. remaining: 4m 10sRunning iteration 1251/1500... Est. remaining: 4m 0sRunning iteration 1261/1500... Est. remaining: 3m 49sRunning iteration 1271/1500... Est. remaining: 3m 39sRunning iteration 1281/1500... Est. remaining: 3m 29sRunning iteration 1291/1500... Est. remaining: 3m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,423,130,937
Annual Return: 49.55%
Sharpe Ratio: 1.58866
Sortino Ratio: 1.567
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.928
Lookback periods: [176, 189, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1301/1500... Est. remaining: 3m 9sbest_combination: {'lookbacks': [176, 189, 197], 'score': np.float64(0.9277149060390368), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 59sRunning iteration 1321/1500... Est. remaining: 2m 49sRunning iteration 1331/1500... Est. remaining: 2m 39sRunning iteration 1341/1500... Est. remaining: 2m 29sRunning iteration 1351/1500... Est. remaining: 2m 19sRunning iteration 1361/1500... Est. remaining: 2m 9sRunning iteration 1371/1500... Est. remaining: 2m 0sRunning iteration 1381/1500... Est. remaining: 1m 50sRunning iteration 1391/1500... Est. remaining: 1m 41sRunning iteration 1401/1500... Est. remaining: 1m 31sbest_combination: {'lookbacks': [176, 189, 197], 'score': np.float64(0.9277149060390368), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 22sRunning iteration 1421/1500... Est. remaining: 1m 12sRunning iteration 1431/1500... Est. remaining: 1m 3sRunning iteration 1441/1500... Est. remaining: 0m 54sRunning iteration 1451/1500... Est. remaining: 0m 45sRunning iteration 1461/1500... Est. remaining: 0m 35sRunning iteration 1471/1500... Est. remaining: 0m 26sRunning iteration 1481/1500... Est. remaining: 0m 17sRunning iteration 1491/1500... Est. remaining: 0m 8s
Monte Carlo simulation completed in 22.3 minutes
Best normalized score: 0.93
best_combination: {'lookbacks': [176, 189, 197], 'score': np.float64(0.9277149060390368), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [176, 189, 197] (score: 0.9277)

Monte Carlo simulation completed in 22.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 189, 197] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 121 selections (29.1%)
2. sp500_hma: 106 selections (25.5%)
3. naz100_pine: 86 selections (20.7%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 34 selections (8.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,423,130,937.09
Average Annualized Gain: 49.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Sun Aug 24 14:37:14 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $994,203,673
Annual Return: 39.38%
Sharpe Ratio: 1.35496
Sortino Ratio: 1.280
Max Drawdown: -52.3%
Avg Drawdown: -11.1%
Normalized Score: -0.525
Lookback periods: [85, 97, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,428,091,739
Annual Return: 40.84%
Sharpe Ratio: 1.40733
Sortino Ratio: 1.325
Max Drawdown: -52.3%
Avg Drawdown: -10.7%
Normalized Score: -0.195
Lookback periods: [78, 109, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,783,135,788
Annual Return: 43.58%
Sharpe Ratio: 1.42065
Sortino Ratio: 1.389
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: -0.165
Lookback periods: [167, 177, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,338,944,309
Annual Return: 44.33%
Sharpe Ratio: 1.46128
Sortino Ratio: 1.422
Max Drawdown: -56.9%
Avg Drawdown: -12.4%
Normalized Score: -0.057
Lookback periods: [128, 146, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 31sRunning iteration 41/1500... Est. remaining: 17m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,311,972,524
Annual Return: 47.64%
Sharpe Ratio: 1.52321
Sortino Ratio: 1.483
Max Drawdown: -60.2%
Avg Drawdown: -11.5%
Normalized Score: 0.459
Lookback periods: [185, 188, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 17m 9sRunning iteration 61/1500... Est. remaining: 16m 13sRunning iteration 71/1500... Est. remaining: 15m 34sRunning iteration 81/1500... Est. remaining: 15m 3sRunning iteration 91/1500... Est. remaining: 14m 39sRunning iteration 101/1500... Est. remaining: 14m 17sbest_combination: {'lookbacks': [185, 188, 198], 'score': np.float64(0.45850414839799425), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,210,413,490
Annual Return: 48.13%
Sharpe Ratio: 1.56063
Sortino Ratio: 1.533
Max Drawdown: -59.5%
Avg Drawdown: -12.0%
Normalized Score: 0.565
Lookback periods: [157, 178, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 16sRunning iteration 121/1500... Est. remaining: 13m 59sRunning iteration 131/1500... Est. remaining: 13m 45sRunning iteration 141/1500... Est. remaining: 13m 30sRunning iteration 151/1500... Est. remaining: 13m 17sRunning iteration 161/1500... Est. remaining: 13m 5sRunning iteration 171/1500... Est. remaining: 12m 53sRunning iteration 181/1500... Est. remaining: 12m 42sRunning iteration 191/1500... Est. remaining: 12m 31sRunning iteration 201/1500... Est. remaining: 12m 20sbest_combination: {'lookbacks': [157, 178, 181], 'score': np.float64(0.5653300719163149), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 11sRunning iteration 221/1500... Est. remaining: 12m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,579,943,807
Annual Return: 47.79%
Sharpe Ratio: 1.55537
Sortino Ratio: 1.526
Max Drawdown: -56.9%
Avg Drawdown: -10.8%
Normalized Score: 0.778
Lookback periods: [156, 160, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 12m 0sRunning iteration 241/1500... Est. remaining: 11m 51sRunning iteration 251/1500... Est. remaining: 11m 42sRunning iteration 261/1500... Est. remaining: 11m 34sRunning iteration 271/1500... Est. remaining: 11m 27sRunning iteration 281/1500... Est. remaining: 11m 19sRunning iteration 291/1500... Est. remaining: 11m 12sRunning iteration 301/1500... Est. remaining: 11m 5sbest_combination: {'lookbacks': [156, 160, 164], 'score': np.float64(0.7784875952293846), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 58sRunning iteration 321/1500... Est. remaining: 10m 51sRunning iteration 331/1500... Est. remaining: 10m 45sRunning iteration 341/1500... Est. remaining: 10m 38sRunning iteration 351/1500... Est. remaining: 10m 31sRunning iteration 361/1500... Est. remaining: 10m 24sRunning iteration 371/1500... Est. remaining: 10m 18sRunning iteration 381/1500... Est. remaining: 10m 12sRunning iteration 391/1500... Est. remaining: 10m 5sRunning iteration 401/1500... Est. remaining: 9m 59sbest_combination: {'lookbacks': [156, 160, 164], 'score': np.float64(0.7784875952293846), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 53sRunning iteration 421/1500... Est. remaining: 9m 47sRunning iteration 431/1500... Est. remaining: 9m 41sRunning iteration 441/1500... Est. remaining: 9m 35sRunning iteration 451/1500... Est. remaining: 9m 29sRunning iteration 461/1500... Est. remaining: 9m 23sRunning iteration 471/1500... Est. remaining: 9m 17sRunning iteration 481/1500... Est. remaining: 9m 11sRunning iteration 491/1500... Est. remaining: 9m 5sRunning iteration 501/1500... Est. remaining: 8m 59sbest_combination: {'lookbacks': [156, 160, 164], 'score': np.float64(0.7784875952293846), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,480,802,759
Annual Return: 47.73%
Sharpe Ratio: 1.55779
Sortino Ratio: 1.526
Max Drawdown: -56.9%
Avg Drawdown: -10.8%
Normalized Score: 0.779
Lookback periods: [156, 160, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 8m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,957,477,440
Annual Return: 48.00%
Sharpe Ratio: 1.56448
Sortino Ratio: 1.532
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 0.934
Lookback periods: [157, 163, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 53sRunning iteration 531/1500... Est. remaining: 8m 47sRunning iteration 541/1500... Est. remaining: 8m 41sRunning iteration 551/1500... Est. remaining: 8m 35sRunning iteration 561/1500... Est. remaining: 8m 29sRunning iteration 571/1500... Est. remaining: 8m 24sRunning iteration 581/1500... Est. remaining: 8m 18sRunning iteration 591/1500... Est. remaining: 8m 12sRunning iteration 601/1500... Est. remaining: 8m 6sbest_combination: {'lookbacks': [157, 163, 173], 'score': np.float64(0.933764643163566), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 1sRunning iteration 621/1500... Est. remaining: 7m 55sRunning iteration 631/1500... Est. remaining: 7m 49sRunning iteration 641/1500... Est. remaining: 7m 43sRunning iteration 651/1500... Est. remaining: 7m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,318,429,095
Annual Return: 49.88%
Sharpe Ratio: 1.62083
Sortino Ratio: 1.597
Max Drawdown: -59.0%
Avg Drawdown: -10.0%
Normalized Score: 1.223
Lookback periods: [158, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 34sRunning iteration 671/1500... Est. remaining: 7m 28sRunning iteration 681/1500... Est. remaining: 7m 23sRunning iteration 691/1500... Est. remaining: 7m 17sRunning iteration 701/1500... Est. remaining: 7m 11sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 6sRunning iteration 721/1500... Est. remaining: 7m 0sRunning iteration 731/1500... Est. remaining: 6m 55sRunning iteration 741/1500... Est. remaining: 6m 49sRunning iteration 751/1500... Est. remaining: 6m 43sRunning iteration 761/1500... Est. remaining: 6m 38sRunning iteration 771/1500... Est. remaining: 6m 32sRunning iteration 781/1500... Est. remaining: 6m 27sRunning iteration 791/1500... Est. remaining: 6m 21sRunning iteration 801/1500... Est. remaining: 6m 16sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 10sRunning iteration 821/1500... Est. remaining: 6m 5sRunning iteration 831/1500... Est. remaining: 5m 59sRunning iteration 841/1500... Est. remaining: 5m 54sRunning iteration 851/1500... Est. remaining: 5m 48sRunning iteration 861/1500... Est. remaining: 5m 43sRunning iteration 871/1500... Est. remaining: 5m 37sRunning iteration 881/1500... Est. remaining: 5m 32sRunning iteration 891/1500... Est. remaining: 5m 26sRunning iteration 901/1500... Est. remaining: 5m 21sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 15sRunning iteration 921/1500... Est. remaining: 5m 10sRunning iteration 931/1500... Est. remaining: 5m 4sRunning iteration 941/1500... Est. remaining: 4m 59sRunning iteration 951/1500... Est. remaining: 4m 54sRunning iteration 961/1500... Est. remaining: 4m 48sRunning iteration 971/1500... Est. remaining: 4m 43sRunning iteration 981/1500... Est. remaining: 4m 37sRunning iteration 991/1500... Est. remaining: 4m 32sRunning iteration 1001/1500... Est. remaining: 4m 27sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 21sRunning iteration 1021/1500... Est. remaining: 4m 16sRunning iteration 1031/1500... Est. remaining: 4m 10sRunning iteration 1041/1500... Est. remaining: 4m 5sRunning iteration 1051/1500... Est. remaining: 4m 0sRunning iteration 1061/1500... Est. remaining: 3m 54sRunning iteration 1071/1500... Est. remaining: 3m 49sRunning iteration 1081/1500... Est. remaining: 3m 44sRunning iteration 1091/1500... Est. remaining: 3m 38sRunning iteration 1101/1500... Est. remaining: 3m 33sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 27sRunning iteration 1121/1500... Est. remaining: 3m 22sRunning iteration 1131/1500... Est. remaining: 3m 17sRunning iteration 1141/1500... Est. remaining: 3m 11sRunning iteration 1151/1500... Est. remaining: 3m 6sRunning iteration 1161/1500... Est. remaining: 3m 1sRunning iteration 1171/1500... Est. remaining: 2m 55sRunning iteration 1181/1500... Est. remaining: 2m 50sRunning iteration 1191/1500... Est. remaining: 2m 45sRunning iteration 1201/1500... Est. remaining: 2m 39sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 34sRunning iteration 1221/1500... Est. remaining: 2m 29sRunning iteration 1231/1500... Est. remaining: 2m 23sRunning iteration 1241/1500... Est. remaining: 2m 18sRunning iteration 1251/1500... Est. remaining: 2m 13sRunning iteration 1261/1500... Est. remaining: 2m 7sRunning iteration 1271/1500... Est. remaining: 2m 2sRunning iteration 1281/1500... Est. remaining: 1m 57sRunning iteration 1291/1500... Est. remaining: 1m 51sRunning iteration 1301/1500... Est. remaining: 1m 46sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 41sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 30sRunning iteration 1341/1500... Est. remaining: 1m 25sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 14sRunning iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.3 minutes
Best normalized score: 1.22
best_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [158, 162, 169] (score: 1.2226)

Monte Carlo simulation completed in 13.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [158, 162, 169] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 79 selections (19.0%)
5. cash: 34 selections (8.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,318,429,094.71
Average Annualized Gain: 49.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Sun Aug 24 14:50:38 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $520,234,352
Annual Return: 36.80%
Sharpe Ratio: 1.28556
Sortino Ratio: 1.185
Max Drawdown: -71.5%
Avg Drawdown: -13.9%
Normalized Score: -2.074
Lookback periods: [62, 98, 133] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,431,589,905
Annual Return: 40.85%
Sharpe Ratio: 1.39300
Sortino Ratio: 1.321
Max Drawdown: -52.3%
Avg Drawdown: -10.7%
Normalized Score: -0.216
Lookback periods: [80, 115, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,135,059,088
Annual Return: 45.23%
Sharpe Ratio: 1.49548
Sortino Ratio: 1.447
Max Drawdown: -56.4%
Avg Drawdown: -12.1%
Normalized Score: 0.156
Lookback periods: [132, 146, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 0sRunning iteration 31/1500... Est. remaining: 18m 54sRunning iteration 41/1500... Est. remaining: 17m 19sRunning iteration 51/1500... Est. remaining: 16m 21sRunning iteration 61/1500... Est. remaining: 15m 37sRunning iteration 71/1500... Est. remaining: 15m 3sRunning iteration 81/1500... Est. remaining: 14m 37sRunning iteration 91/1500... Est. remaining: 14m 17sRunning iteration 101/1500... Est. remaining: 14m 0sbest_combination: {'lookbacks': [132, 146, 149], 'score': np.float64(0.15598484477829783), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 44sRunning iteration 121/1500... Est. remaining: 13m 31sRunning iteration 131/1500... Est. remaining: 13m 19sRunning iteration 141/1500... Est. remaining: 13m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,187,202,434
Annual Return: 46.93%
Sharpe Ratio: 1.53223
Sortino Ratio: 1.488
Max Drawdown: -61.9%
Avg Drawdown: -12.2%
Normalized Score: 0.232
Lookback periods: [146, 155, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 13m 11sRunning iteration 161/1500... Est. remaining: 13m 2sRunning iteration 171/1500... Est. remaining: 12m 54sRunning iteration 181/1500... Est. remaining: 12m 43sRunning iteration 191/1500... Est. remaining: 12m 31sRunning iteration 201/1500... Est. remaining: 12m 20sbest_combination: {'lookbacks': [146, 155, 187], 'score': np.float64(0.2315709166836947), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 12sRunning iteration 221/1500... Est. remaining: 12m 4sRunning iteration 231/1500... Est. remaining: 11m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,880,254,673
Annual Return: 47.38%
Sharpe Ratio: 1.54354
Sortino Ratio: 1.499
Max Drawdown: -59.8%
Avg Drawdown: -11.6%
Normalized Score: 0.467
Lookback periods: [149, 159, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/1500... Est. remaining: 12m 1sRunning iteration 251/1500... Est. remaining: 11m 54sRunning iteration 261/1500... Est. remaining: 11m 46sRunning iteration 271/1500... Est. remaining: 11m 38sRunning iteration 281/1500... Est. remaining: 11m 33sRunning iteration 291/1500... Est. remaining: 11m 25sRunning iteration 301/1500... Est. remaining: 11m 18sbest_combination: {'lookbacks': [149, 159, 192], 'score': np.float64(0.4670031446403338), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 12sRunning iteration 321/1500... Est. remaining: 11m 5sRunning iteration 331/1500... Est. remaining: 10m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,612,241,970
Annual Return: 44.66%
Sharpe Ratio: 1.52737
Sortino Ratio: 1.466
Max Drawdown: -52.3%
Avg Drawdown: -10.1%
Normalized Score: 0.615
Lookback periods: [94, 109, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 341/1500... Est. remaining: 10m 56sRunning iteration 351/1500... Est. remaining: 10m 49sRunning iteration 361/1500... Est. remaining: 10m 43sRunning iteration 371/1500... Est. remaining: 10m 36sRunning iteration 381/1500... Est. remaining: 10m 30sRunning iteration 391/1500... Est. remaining: 10m 24sRunning iteration 401/1500... Est. remaining: 10m 18sbest_combination: {'lookbacks': [94, 109, 146], 'score': np.float64(0.6149007935388576), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 12sRunning iteration 421/1500... Est. remaining: 10m 6sRunning iteration 431/1500... Est. remaining: 10m 0sRunning iteration 441/1500... Est. remaining: 9m 53sRunning iteration 451/1500... Est. remaining: 9m 47sRunning iteration 461/1500... Est. remaining: 9m 41sRunning iteration 471/1500... Est. remaining: 9m 35sRunning iteration 481/1500... Est. remaining: 9m 29sRunning iteration 491/1500... Est. remaining: 9m 23sRunning iteration 501/1500... Est. remaining: 9m 17sbest_combination: {'lookbacks': [94, 109, 146], 'score': np.float64(0.6149007935388576), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 11sRunning iteration 521/1500... Est. remaining: 9m 5sRunning iteration 531/1500... Est. remaining: 8m 59sRunning iteration 541/1500... Est. remaining: 8m 52sRunning iteration 551/1500... Est. remaining: 8m 46sRunning iteration 561/1500... Est. remaining: 8m 41sRunning iteration 571/1500... Est. remaining: 8m 35sRunning iteration 581/1500... Est. remaining: 8m 29sRunning iteration 591/1500... Est. remaining: 8m 23sRunning iteration 601/1500... Est. remaining: 8m 17sbest_combination: {'lookbacks': [94, 109, 146], 'score': np.float64(0.6149007935388576), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 11sRunning iteration 621/1500... Est. remaining: 8m 6sRunning iteration 631/1500... Est. remaining: 8m 0sRunning iteration 641/1500... Est. remaining: 7m 54sRunning iteration 651/1500... Est. remaining: 7m 48sRunning iteration 661/1500... Est. remaining: 7m 42sRunning iteration 671/1500... Est. remaining: 7m 37sRunning iteration 681/1500... Est. remaining: 7m 31sRunning iteration 691/1500... Est. remaining: 7m 25sRunning iteration 701/1500... Est. remaining: 7m 20sbest_combination: {'lookbacks': [94, 109, 146], 'score': np.float64(0.6149007935388576), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 14sRunning iteration 721/1500... Est. remaining: 7m 8sRunning iteration 731/1500... Est. remaining: 7m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,600,005,166
Annual Return: 47.80%
Sharpe Ratio: 1.56603
Sortino Ratio: 1.529
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.752
Lookback periods: [144, 154, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 6m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,872,860,706
Annual Return: 47.95%
Sharpe Ratio: 1.58544
Sortino Ratio: 1.539
Max Drawdown: -56.8%
Avg Drawdown: -11.1%
Normalized Score: 0.804
Lookback periods: [139, 157, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 6m 54sRunning iteration 761/1500... Est. remaining: 6m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,104,029,289
Annual Return: 48.57%
Sharpe Ratio: 1.58341
Sortino Ratio: 1.542
Max Drawdown: -55.0%
Avg Drawdown: -10.4%
Normalized Score: 1.031
Lookback periods: [157, 159, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 771/1500... Est. remaining: 6m 44sRunning iteration 781/1500... Est. remaining: 6m 38sRunning iteration 791/1500... Est. remaining: 6m 32sRunning iteration 801/1500... Est. remaining: 6m 27sbest_combination: {'lookbacks': [157, 159, 171], 'score': np.float64(1.0307365884442277), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 21sRunning iteration 821/1500... Est. remaining: 6m 15sRunning iteration 831/1500... Est. remaining: 6m 9sRunning iteration 841/1500... Est. remaining: 6m 4sRunning iteration 851/1500... Est. remaining: 5m 58sRunning iteration 861/1500... Est. remaining: 5m 52sRunning iteration 871/1500... Est. remaining: 5m 46sRunning iteration 881/1500... Est. remaining: 5m 41sRunning iteration 891/1500... Est. remaining: 5m 35sRunning iteration 901/1500... Est. remaining: 5m 30sbest_combination: {'lookbacks': [157, 159, 171], 'score': np.float64(1.0307365884442277), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 24sRunning iteration 921/1500... Est. remaining: 5m 19sRunning iteration 931/1500... Est. remaining: 5m 13sRunning iteration 941/1500... Est. remaining: 5m 7sRunning iteration 951/1500... Est. remaining: 5m 2sRunning iteration 961/1500... Est. remaining: 4m 56sRunning iteration 971/1500... Est. remaining: 4m 51sRunning iteration 981/1500... Est. remaining: 4m 45sRunning iteration 991/1500... Est. remaining: 4m 40sRunning iteration 1001/1500... Est. remaining: 4m 34sbest_combination: {'lookbacks': [157, 159, 171], 'score': np.float64(1.0307365884442277), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 28sRunning iteration 1021/1500... Est. remaining: 4m 23sRunning iteration 1031/1500... Est. remaining: 4m 17sRunning iteration 1041/1500... Est. remaining: 4m 12sRunning iteration 1051/1500... Est. remaining: 4m 6sRunning iteration 1061/1500... Est. remaining: 4m 1sRunning iteration 1071/1500... Est. remaining: 3m 55sRunning iteration 1081/1500... Est. remaining: 3m 50sRunning iteration 1091/1500... Est. remaining: 3m 44sRunning iteration 1101/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [157, 159, 171], 'score': np.float64(1.0307365884442277), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 33sRunning iteration 1121/1500... Est. remaining: 3m 28sRunning iteration 1131/1500... Est. remaining: 3m 22sRunning iteration 1141/1500... Est. remaining: 3m 17sRunning iteration 1151/1500... Est. remaining: 3m 11sRunning iteration 1161/1500... Est. remaining: 3m 6sRunning iteration 1171/1500... Est. remaining: 3m 0sRunning iteration 1181/1500... Est. remaining: 2m 55sRunning iteration 1191/1500... Est. remaining: 2m 49sRunning iteration 1201/1500... Est. remaining: 2m 44sbest_combination: {'lookbacks': [157, 159, 171], 'score': np.float64(1.0307365884442277), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 38sRunning iteration 1221/1500... Est. remaining: 2m 33sRunning iteration 1231/1500... Est. remaining: 2m 27sRunning iteration 1241/1500... Est. remaining: 2m 22sRunning iteration 1251/1500... Est. remaining: 2m 16sRunning iteration 1261/1500... Est. remaining: 2m 11sRunning iteration 1271/1500... Est. remaining: 2m 5sRunning iteration 1281/1500... Est. remaining: 2m 0sRunning iteration 1291/1500... Est. remaining: 1m 54sRunning iteration 1301/1500... Est. remaining: 1m 49sbest_combination: {'lookbacks': [157, 159, 171], 'score': np.float64(1.0307365884442277), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 43sRunning iteration 1321/1500... Est. remaining: 1m 38sRunning iteration 1331/1500... Est. remaining: 1m 32sRunning iteration 1341/1500... Est. remaining: 1m 27sRunning iteration 1351/1500... Est. remaining: 1m 21sRunning iteration 1361/1500... Est. remaining: 1m 16sRunning iteration 1371/1500... Est. remaining: 1m 10sRunning iteration 1381/1500... Est. remaining: 1m 5sRunning iteration 1391/1500... Est. remaining: 1m 0sRunning iteration 1401/1500... Est. remaining: 0m 54sbest_combination: {'lookbacks': [157, 159, 171], 'score': np.float64(1.0307365884442277), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 49sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 38sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 27sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.6 minutes
Best normalized score: 1.03
best_combination: {'lookbacks': [157, 159, 171], 'score': np.float64(1.0307365884442277), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [157, 159, 171] (score: 1.0307)

Monte Carlo simulation completed in 13.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [157, 159, 171] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,104,029,289.15
Average Annualized Gain: 48.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Sun Aug 24 15:04:24 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $785,690,761
Annual Return: 38.43%
Sharpe Ratio: 1.30970
Sortino Ratio: 1.230
Max Drawdown: -70.1%
Avg Drawdown: -13.9%
Normalized Score: -1.765
Lookback periods: [92, 143, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $616,167,987
Annual Return: 37.47%
Sharpe Ratio: 1.31809
Sortino Ratio: 1.216
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: -0.978
Lookback periods: [55, 86, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,826,753,948
Annual Return: 44.90%
Sharpe Ratio: 1.48886
Sortino Ratio: 1.448
Max Drawdown: -61.9%
Avg Drawdown: -12.6%
Normalized Score: -0.129
Lookback periods: [125, 133, 135] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,177,397,014
Annual Return: 45.27%
Sharpe Ratio: 1.47633
Sortino Ratio: 1.435
Max Drawdown: -59.2%
Avg Drawdown: -12.3%
Normalized Score: -0.000
Lookback periods: [149, 162, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 34m 0sRunning iteration 21/1500... Est. remaining: 23m 21sRunning iteration 31/1500... Est. remaining: 19m 42sRunning iteration 41/1500... Est. remaining: 17m 47sRunning iteration 51/1500... Est. remaining: 16m 32sRunning iteration 61/1500... Est. remaining: 15m 45sRunning iteration 71/1500... Est. remaining: 15m 10sRunning iteration 81/1500... Est. remaining: 14m 42sRunning iteration 91/1500... Est. remaining: 14m 20sRunning iteration 101/1500... Est. remaining: 14m 2sbest_combination: {'lookbacks': [149, 162, 182], 'score': np.float64(-0.0002943106446735233), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,621,888,598
Annual Return: 46.52%
Sharpe Ratio: 1.53573
Sortino Ratio: 1.490
Max Drawdown: -62.4%
Avg Drawdown: -12.1%
Normalized Score: 0.200
Lookback periods: [134, 159, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 2sRunning iteration 121/1500... Est. remaining: 13m 46sRunning iteration 131/1500... Est. remaining: 13m 31sRunning iteration 141/1500... Est. remaining: 13m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,542,172,959
Annual Return: 48.77%
Sharpe Ratio: 1.58634
Sortino Ratio: 1.554
Max Drawdown: -62.5%
Avg Drawdown: -11.4%
Normalized Score: 0.671
Lookback periods: [146, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 13m 18sRunning iteration 161/1500... Est. remaining: 13m 4sRunning iteration 171/1500... Est. remaining: 12m 50sRunning iteration 181/1500... Est. remaining: 12m 40sRunning iteration 191/1500... Est. remaining: 12m 31sRunning iteration 201/1500... Est. remaining: 12m 22sbest_combination: {'lookbacks': [146, 155, 156], 'score': np.float64(0.6707413891876692), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,928,269,786
Annual Return: 42.07%
Sharpe Ratio: 1.49480
Sortino Ratio: 1.400
Max Drawdown: -36.9%
Avg Drawdown: -9.4%
Normalized Score: 0.842
Lookback periods: [50, 50, 75] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/1500... Est. remaining: 12m 21sRunning iteration 221/1500... Est. remaining: 12m 13sRunning iteration 231/1500... Est. remaining: 12m 5sRunning iteration 241/1500... Est. remaining: 11m 56sRunning iteration 251/1500... Est. remaining: 11m 48sRunning iteration 261/1500... Est. remaining: 11m 39sRunning iteration 271/1500... Est. remaining: 11m 32sRunning iteration 281/1500... Est. remaining: 11m 24sRunning iteration 291/1500... Est. remaining: 11m 16sRunning iteration 301/1500... Est. remaining: 11m 9sbest_combination: {'lookbacks': [50, 50, 75], 'score': np.float64(0.8419347028029192), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 2sRunning iteration 321/1500... Est. remaining: 10m 55sRunning iteration 331/1500... Est. remaining: 10m 48sRunning iteration 341/1500... Est. remaining: 10m 42sRunning iteration 351/1500... Est. remaining: 10m 35sRunning iteration 361/1500... Est. remaining: 10m 29sRunning iteration 371/1500... Est. remaining: 10m 23sRunning iteration 381/1500... Est. remaining: 10m 17sRunning iteration 391/1500... Est. remaining: 10m 11sRunning iteration 401/1500... Est. remaining: 10m 4sbest_combination: {'lookbacks': [50, 50, 75], 'score': np.float64(0.8419347028029192), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 58sRunning iteration 421/1500... Est. remaining: 9m 52sRunning iteration 431/1500... Est. remaining: 9m 46sRunning iteration 441/1500... Est. remaining: 9m 40sRunning iteration 451/1500... Est. remaining: 9m 34sRunning iteration 461/1500... Est. remaining: 9m 29sRunning iteration 471/1500... Est. remaining: 9m 24sRunning iteration 481/1500... Est. remaining: 9m 19sRunning iteration 491/1500... Est. remaining: 9m 13sRunning iteration 501/1500... Est. remaining: 9m 7sbest_combination: {'lookbacks': [50, 50, 75], 'score': np.float64(0.8419347028029192), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,293,866,326
Annual Return: 42.78%
Sharpe Ratio: 1.51652
Sortino Ratio: 1.427
Max Drawdown: -39.0%
Avg Drawdown: -9.8%
Normalized Score: 0.849
Lookback periods: [51, 54, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 59sRunning iteration 531/1500... Est. remaining: 8m 53sRunning iteration 541/1500... Est. remaining: 8m 47sRunning iteration 551/1500... Est. remaining: 8m 42sRunning iteration 561/1500... Est. remaining: 8m 36sRunning iteration 571/1500... Est. remaining: 8m 30sRunning iteration 581/1500... Est. remaining: 8m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,513,577,297
Annual Return: 41.08%
Sharpe Ratio: 1.47655
Sortino Ratio: 1.381
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 0.863
Lookback periods: [50, 50, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,581,049,141
Annual Return: 43.27%
Sharpe Ratio: 1.53861
Sortino Ratio: 1.441
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.169
Lookback periods: [50, 54, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,704,630,213
Annual Return: 43.46%
Sharpe Ratio: 1.54453
Sortino Ratio: 1.456
Max Drawdown: -35.6%
Avg Drawdown: -9.1%
Normalized Score: 1.201
Lookback periods: [50, 53, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 8m 25sRunning iteration 601/1500... Est. remaining: 8m 19sbest_combination: {'lookbacks': [50, 53, 87], 'score': np.float64(1.2007531646719218), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 14sRunning iteration 621/1500... Est. remaining: 8m 8sRunning iteration 631/1500... Est. remaining: 8m 2sRunning iteration 641/1500... Est. remaining: 7m 56sRunning iteration 651/1500... Est. remaining: 7m 50sRunning iteration 661/1500... Est. remaining: 7m 44sRunning iteration 671/1500... Est. remaining: 7m 39sRunning iteration 681/1500... Est. remaining: 7m 33sRunning iteration 691/1500... Est. remaining: 7m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,942,937,289
Annual Return: 43.81%
Sharpe Ratio: 1.57848
Sortino Ratio: 1.484
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.555
Lookback periods: [50, 50, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/1500... Est. remaining: 7m 23sbest_combination: {'lookbacks': [50, 50, 95], 'score': np.float64(1.5547069165358762), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 17sRunning iteration 721/1500... Est. remaining: 7m 12sRunning iteration 731/1500... Est. remaining: 7m 6sRunning iteration 741/1500... Est. remaining: 7m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,851,720,310
Annual Return: 44.93%
Sharpe Ratio: 1.61361
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.601
Lookback periods: [51, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 6m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,912,007
Annual Return: 45.27%
Sharpe Ratio: 1.61355
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.670
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 6m 51sRunning iteration 771/1500... Est. remaining: 6m 45sRunning iteration 781/1500... Est. remaining: 6m 39sRunning iteration 791/1500... Est. remaining: 6m 33sRunning iteration 801/1500... Est. remaining: 6m 27sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6697769261771946), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 22sRunning iteration 821/1500... Est. remaining: 6m 16sRunning iteration 831/1500... Est. remaining: 6m 10sRunning iteration 841/1500... Est. remaining: 6m 5sRunning iteration 851/1500... Est. remaining: 5m 59sRunning iteration 861/1500... Est. remaining: 5m 53sRunning iteration 871/1500... Est. remaining: 5m 48sRunning iteration 881/1500... Est. remaining: 5m 42sRunning iteration 891/1500... Est. remaining: 5m 36sRunning iteration 901/1500... Est. remaining: 5m 30sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6697769261771946), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 25sRunning iteration 921/1500... Est. remaining: 5m 19sRunning iteration 931/1500... Est. remaining: 5m 14sRunning iteration 941/1500... Est. remaining: 5m 8sRunning iteration 951/1500... Est. remaining: 5m 3sRunning iteration 961/1500... Est. remaining: 4m 57sRunning iteration 971/1500... Est. remaining: 4m 52sRunning iteration 981/1500... Est. remaining: 4m 46sRunning iteration 991/1500... Est. remaining: 4m 41sRunning iteration 1001/1500... Est. remaining: 4m 35sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6697769261771946), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 29sRunning iteration 1021/1500... Est. remaining: 4m 24sRunning iteration 1031/1500... Est. remaining: 4m 18sRunning iteration 1041/1500... Est. remaining: 4m 12sRunning iteration 1051/1500... Est. remaining: 4m 7sRunning iteration 1061/1500... Est. remaining: 4m 1sRunning iteration 1071/1500... Est. remaining: 3m 56sRunning iteration 1081/1500... Est. remaining: 3m 50sRunning iteration 1091/1500... Est. remaining: 3m 45sRunning iteration 1101/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6697769261771946), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 33sRunning iteration 1121/1500... Est. remaining: 3m 28sRunning iteration 1131/1500... Est. remaining: 3m 22sRunning iteration 1141/1500... Est. remaining: 3m 17sRunning iteration 1151/1500... Est. remaining: 3m 11sRunning iteration 1161/1500... Est. remaining: 3m 5sRunning iteration 1171/1500... Est. remaining: 3m 0sRunning iteration 1181/1500... Est. remaining: 2m 54sRunning iteration 1191/1500... Est. remaining: 2m 49sRunning iteration 1201/1500... Est. remaining: 2m 43sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6697769261771946), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 38sRunning iteration 1221/1500... Est. remaining: 2m 32sRunning iteration 1231/1500... Est. remaining: 2m 27sRunning iteration 1241/1500... Est. remaining: 2m 21sRunning iteration 1251/1500... Est. remaining: 2m 16sRunning iteration 1261/1500... Est. remaining: 2m 10sRunning iteration 1271/1500... Est. remaining: 2m 5sRunning iteration 1281/1500... Est. remaining: 1m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.729
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1291/1500... Est. remaining: 1m 54sRunning iteration 1301/1500... Est. remaining: 1m 49sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.046
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1311/1500... Est. remaining: 1m 43sRunning iteration 1321/1500... Est. remaining: 1m 38sRunning iteration 1331/1500... Est. remaining: 1m 32sRunning iteration 1341/1500... Est. remaining: 1m 27sRunning iteration 1351/1500... Est. remaining: 1m 21sRunning iteration 1361/1500... Est. remaining: 1m 16sRunning iteration 1371/1500... Est. remaining: 1m 10sRunning iteration 1381/1500... Est. remaining: 1m 5sRunning iteration 1391/1500... Est. remaining: 0m 59sRunning iteration 1401/1500... Est. remaining: 0m 54sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 38sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,188,708,617
Annual Return: 46.93%
Sharpe Ratio: 1.68323
Sortino Ratio: 1.602
Max Drawdown: -36.6%
Avg Drawdown: -7.9%
Normalized Score: 2.063
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.6 minutes
Best normalized score: 2.06
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.06290296935403), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 95] (score: 2.0629)

Monte Carlo simulation completed in 13.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 102 selections (24.5%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 82 selections (19.7%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $6,188,708,617.20
Average Annualized Gain: 46.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Sun Aug 24 15:18:08 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,441,060,568
Annual Return: 40.88%
Sharpe Ratio: 1.36871
Sortino Ratio: 1.313
Max Drawdown: -66.7%
Avg Drawdown: -12.9%
Normalized Score: -1.073
Lookback periods: [97, 161, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,841,955,999
Annual Return: 41.88%
Sharpe Ratio: 1.38578
Sortino Ratio: 1.341
Max Drawdown: -65.1%
Avg Drawdown: -13.7%
Normalized Score: -0.990
Lookback periods: [102, 151, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,680,308,233
Annual Return: 46.56%
Sharpe Ratio: 1.54296
Sortino Ratio: 1.506
Max Drawdown: -64.6%
Avg Drawdown: -11.6%
Normalized Score: 0.229
Lookback periods: [135, 150, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 34sRunning iteration 21/1500... Est. remaining: 22m 46sRunning iteration 31/1500... Est. remaining: 19m 40sRunning iteration 41/1500... Est. remaining: 17m 56sRunning iteration 51/1500... Est. remaining: 16m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,444,923,472
Annual Return: 47.10%
Sharpe Ratio: 1.53564
Sortino Ratio: 1.489
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.479
Lookback periods: [139, 157, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 30sRunning iteration 71/1500... Est. remaining: 15m 54sRunning iteration 81/1500... Est. remaining: 15m 23sRunning iteration 91/1500... Est. remaining: 14m 58sRunning iteration 101/1500... Est. remaining: 14m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,156,332,927
Annual Return: 47.54%
Sharpe Ratio: 1.56600
Sortino Ratio: 1.520
Max Drawdown: -57.9%
Avg Drawdown: -12.4%
Normalized Score: 0.480
Lookback periods: [135, 155, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [135, 155, 184], 'score': np.float64(0.4797352585303087), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 40sRunning iteration 121/1500... Est. remaining: 14m 22sRunning iteration 131/1500... Est. remaining: 14m 5sRunning iteration 141/1500... Est. remaining: 13m 48sRunning iteration 151/1500... Est. remaining: 13m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,630,677,174
Annual Return: 49.24%
Sharpe Ratio: 1.60105
Sortino Ratio: 1.581
Max Drawdown: -59.0%
Avg Drawdown: -10.2%
Normalized Score: 1.085
Lookback periods: [158, 161, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 13m 29sRunning iteration 171/1500... Est. remaining: 13m 16sRunning iteration 181/1500... Est. remaining: 13m 7sRunning iteration 191/1500... Est. remaining: 12m 58sRunning iteration 201/1500... Est. remaining: 12m 49sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.084692378380815), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 40sRunning iteration 221/1500... Est. remaining: 12m 30sRunning iteration 231/1500... Est. remaining: 12m 22sRunning iteration 241/1500... Est. remaining: 12m 12sRunning iteration 251/1500... Est. remaining: 12m 3sRunning iteration 261/1500... Est. remaining: 11m 55sRunning iteration 271/1500... Est. remaining: 11m 47sRunning iteration 281/1500... Est. remaining: 11m 40sRunning iteration 291/1500... Est. remaining: 11m 32sRunning iteration 301/1500... Est. remaining: 11m 25sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.084692378380815), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 18sRunning iteration 321/1500... Est. remaining: 11m 11sRunning iteration 331/1500... Est. remaining: 11m 3sRunning iteration 341/1500... Est. remaining: 10m 56sRunning iteration 351/1500... Est. remaining: 10m 50sRunning iteration 361/1500... Est. remaining: 10m 43sRunning iteration 371/1500... Est. remaining: 10m 37sRunning iteration 381/1500... Est. remaining: 10m 30sRunning iteration 391/1500... Est. remaining: 10m 24sRunning iteration 401/1500... Est. remaining: 10m 17sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.084692378380815), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 11sRunning iteration 421/1500... Est. remaining: 10m 5sRunning iteration 431/1500... Est. remaining: 9m 58sRunning iteration 441/1500... Est. remaining: 9m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,475,254,678
Annual Return: 49.57%
Sharpe Ratio: 1.61090
Sortino Ratio: 1.581
Max Drawdown: -59.0%
Avg Drawdown: -9.9%
Normalized Score: 1.166
Lookback periods: [156, 158, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 49sRunning iteration 461/1500... Est. remaining: 9m 43sRunning iteration 471/1500... Est. remaining: 9m 37sRunning iteration 481/1500... Est. remaining: 9m 31sRunning iteration 491/1500... Est. remaining: 9m 25sRunning iteration 501/1500... Est. remaining: 9m 18sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(1.1658529803568043), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 12sRunning iteration 521/1500... Est. remaining: 9m 6sRunning iteration 531/1500... Est. remaining: 9m 0sRunning iteration 541/1500... Est. remaining: 8m 54sRunning iteration 551/1500... Est. remaining: 8m 48sRunning iteration 561/1500... Est. remaining: 8m 43sRunning iteration 571/1500... Est. remaining: 8m 37sRunning iteration 581/1500... Est. remaining: 8m 31sRunning iteration 591/1500... Est. remaining: 8m 25sRunning iteration 601/1500... Est. remaining: 8m 19sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(1.1658529803568043), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 13sRunning iteration 621/1500... Est. remaining: 8m 8sRunning iteration 631/1500... Est. remaining: 8m 2sRunning iteration 641/1500... Est. remaining: 7m 56sRunning iteration 651/1500... Est. remaining: 7m 50sRunning iteration 661/1500... Est. remaining: 7m 44sRunning iteration 671/1500... Est. remaining: 7m 39sRunning iteration 681/1500... Est. remaining: 7m 33sRunning iteration 691/1500... Est. remaining: 7m 27sRunning iteration 701/1500... Est. remaining: 7m 22sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(1.1658529803568043), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 16sRunning iteration 721/1500... Est. remaining: 7m 10sRunning iteration 731/1500... Est. remaining: 7m 4sRunning iteration 741/1500... Est. remaining: 6m 59sRunning iteration 751/1500... Est. remaining: 6m 53sRunning iteration 761/1500... Est. remaining: 6m 48sRunning iteration 771/1500... Est. remaining: 6m 42sRunning iteration 781/1500... Est. remaining: 6m 37sRunning iteration 791/1500... Est. remaining: 6m 31sRunning iteration 801/1500... Est. remaining: 6m 25sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(1.1658529803568043), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 20sRunning iteration 821/1500... Est. remaining: 6m 14sRunning iteration 831/1500... Est. remaining: 6m 8sRunning iteration 841/1500... Est. remaining: 6m 3sRunning iteration 851/1500... Est. remaining: 5m 57sRunning iteration 861/1500... Est. remaining: 5m 52sRunning iteration 871/1500... Est. remaining: 5m 46sRunning iteration 881/1500... Est. remaining: 5m 41sRunning iteration 891/1500... Est. remaining: 5m 35sRunning iteration 901/1500... Est. remaining: 5m 30sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(1.1658529803568043), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 24sRunning iteration 921/1500... Est. remaining: 5m 18sRunning iteration 931/1500... Est. remaining: 5m 13sRunning iteration 941/1500... Est. remaining: 5m 7sRunning iteration 951/1500... Est. remaining: 5m 2sRunning iteration 961/1500... Est. remaining: 4m 56sRunning iteration 971/1500... Est. remaining: 4m 51sRunning iteration 981/1500... Est. remaining: 4m 45sRunning iteration 991/1500... Est. remaining: 4m 40sRunning iteration 1001/1500... Est. remaining: 4m 34sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(1.1658529803568043), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 29sRunning iteration 1021/1500... Est. remaining: 4m 23sRunning iteration 1031/1500... Est. remaining: 4m 18sRunning iteration 1041/1500... Est. remaining: 4m 12sRunning iteration 1051/1500... Est. remaining: 4m 7sRunning iteration 1061/1500... Est. remaining: 4m 1sRunning iteration 1071/1500... Est. remaining: 3m 56sRunning iteration 1081/1500... Est. remaining: 3m 50sRunning iteration 1091/1500... Est. remaining: 3m 45sRunning iteration 1101/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(1.1658529803568043), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 33sRunning iteration 1121/1500... Est. remaining: 3m 28sRunning iteration 1131/1500... Est. remaining: 3m 22sRunning iteration 1141/1500... Est. remaining: 3m 17sRunning iteration 1151/1500... Est. remaining: 3m 11sRunning iteration 1161/1500... Est. remaining: 3m 6sRunning iteration 1171/1500... Est. remaining: 3m 0sRunning iteration 1181/1500... Est. remaining: 2m 55sRunning iteration 1191/1500... Est. remaining: 2m 49sRunning iteration 1201/1500... Est. remaining: 2m 44sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(1.1658529803568043), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 38sRunning iteration 1221/1500... Est. remaining: 2m 33sRunning iteration 1231/1500... Est. remaining: 2m 27sRunning iteration 1241/1500... Est. remaining: 2m 22sRunning iteration 1251/1500... Est. remaining: 2m 16sRunning iteration 1261/1500... Est. remaining: 2m 11sRunning iteration 1271/1500... Est. remaining: 2m 5sRunning iteration 1281/1500... Est. remaining: 2m 0sRunning iteration 1291/1500... Est. remaining: 1m 54sRunning iteration 1301/1500... Est. remaining: 1m 49sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(1.1658529803568043), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 43sRunning iteration 1321/1500... Est. remaining: 1m 38sRunning iteration 1331/1500... Est. remaining: 1m 32sRunning iteration 1341/1500... Est. remaining: 1m 27sRunning iteration 1351/1500... Est. remaining: 1m 21sRunning iteration 1361/1500... Est. remaining: 1m 16sRunning iteration 1371/1500... Est. remaining: 1m 10sRunning iteration 1381/1500... Est. remaining: 1m 5sRunning iteration 1391/1500... Est. remaining: 0m 59sRunning iteration 1401/1500... Est. remaining: 0m 54sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(1.1658529803568043), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,318,429,095
Annual Return: 49.88%
Sharpe Ratio: 1.62083
Sortino Ratio: 1.597
Max Drawdown: -59.0%
Avg Drawdown: -10.0%
Normalized Score: 1.223
Lookback periods: [158, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 38sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 27sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.6 minutes
Best normalized score: 1.22
best_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [158, 162, 169] (score: 1.2226)

Monte Carlo simulation completed in 13.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [158, 162, 169] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 79 selections (19.0%)
5. cash: 34 selections (8.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,318,429,094.71
Average Annualized Gain: 49.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Sun Aug 24 15:31:54 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $783,060,689
Annual Return: 38.42%
Sharpe Ratio: 1.31510
Sortino Ratio: 1.236
Max Drawdown: -56.9%
Avg Drawdown: -13.3%
Normalized Score: -1.225
Lookback periods: [88, 115, 141] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $704,342,895
Annual Return: 38.00%
Sharpe Ratio: 1.29964
Sortino Ratio: 1.223
Max Drawdown: -52.3%
Avg Drawdown: -11.8%
Normalized Score: -0.923
Lookback periods: [78, 113, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,299,178,461
Annual Return: 45.39%
Sharpe Ratio: 1.49997
Sortino Ratio: 1.453
Max Drawdown: -57.2%
Avg Drawdown: -12.3%
Normalized Score: 0.128
Lookback periods: [130, 136, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,026,929,225
Annual Return: 39.51%
Sharpe Ratio: 1.44733
Sortino Ratio: 1.345
Max Drawdown: -37.0%
Avg Drawdown: -10.0%
Normalized Score: 0.354
Lookback periods: [51, 55, 92] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 55sRunning iteration 21/1500... Est. remaining: 23m 18sRunning iteration 31/1500... Est. remaining: 19m 40sRunning iteration 41/1500... Est. remaining: 17m 54sRunning iteration 51/1500... Est. remaining: 16m 46sRunning iteration 61/1500... Est. remaining: 15m 59sRunning iteration 71/1500... Est. remaining: 15m 23sRunning iteration 81/1500... Est. remaining: 14m 55sRunning iteration 91/1500... Est. remaining: 14m 35sRunning iteration 101/1500... Est. remaining: 14m 20sbest_combination: {'lookbacks': [51, 55, 92], 'score': np.float64(0.3541311885124803), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 8sRunning iteration 121/1500... Est. remaining: 13m 58sRunning iteration 131/1500... Est. remaining: 13m 44sRunning iteration 141/1500... Est. remaining: 13m 31sRunning iteration 151/1500... Est. remaining: 13m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,791,725,960
Annual Return: 45.85%
Sharpe Ratio: 1.49949
Sortino Ratio: 1.466
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.355
Lookback periods: [159, 167, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 13m 14sRunning iteration 171/1500... Est. remaining: 13m 3sRunning iteration 181/1500... Est. remaining: 12m 53sRunning iteration 191/1500... Est. remaining: 12m 44sRunning iteration 201/1500... Est. remaining: 12m 37sbest_combination: {'lookbacks': [159, 167, 175], 'score': np.float64(0.35523128768767354), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 27sRunning iteration 221/1500... Est. remaining: 12m 20sRunning iteration 231/1500... Est. remaining: 12m 11sRunning iteration 241/1500... Est. remaining: 12m 5sRunning iteration 251/1500... Est. remaining: 11m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,566,986,268
Annual Return: 46.48%
Sharpe Ratio: 1.53999
Sortino Ratio: 1.503
Max Drawdown: -55.0%
Avg Drawdown: -11.4%
Normalized Score: 0.565
Lookback periods: [132, 132, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 11m 53sRunning iteration 271/1500... Est. remaining: 11m 46sRunning iteration 281/1500... Est. remaining: 11m 38sRunning iteration 291/1500... Est. remaining: 11m 31sRunning iteration 301/1500... Est. remaining: 11m 24sbest_combination: {'lookbacks': [132, 132, 156], 'score': np.float64(0.5650599902783897), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 17sRunning iteration 321/1500... Est. remaining: 11m 10sRunning iteration 331/1500... Est. remaining: 11m 3sRunning iteration 341/1500... Est. remaining: 10m 58sRunning iteration 351/1500... Est. remaining: 10m 52sRunning iteration 361/1500... Est. remaining: 10m 46sRunning iteration 371/1500... Est. remaining: 10m 39sRunning iteration 381/1500... Est. remaining: 10m 33sRunning iteration 391/1500... Est. remaining: 10m 25sRunning iteration 401/1500... Est. remaining: 10m 19sbest_combination: {'lookbacks': [132, 132, 156], 'score': np.float64(0.5650599902783897), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 12sRunning iteration 421/1500... Est. remaining: 10m 6sRunning iteration 431/1500... Est. remaining: 10m 0sRunning iteration 441/1500... Est. remaining: 9m 53sRunning iteration 451/1500... Est. remaining: 9m 47sRunning iteration 461/1500... Est. remaining: 9m 42sRunning iteration 471/1500... Est. remaining: 9m 35sRunning iteration 481/1500... Est. remaining: 9m 29sRunning iteration 491/1500... Est. remaining: 9m 23sRunning iteration 501/1500... Est. remaining: 9m 17sbest_combination: {'lookbacks': [132, 132, 156], 'score': np.float64(0.5650599902783897), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 11sRunning iteration 521/1500... Est. remaining: 9m 5sRunning iteration 531/1500... Est. remaining: 8m 59sRunning iteration 541/1500... Est. remaining: 8m 53sRunning iteration 551/1500... Est. remaining: 8m 47sRunning iteration 561/1500... Est. remaining: 8m 41sRunning iteration 571/1500... Est. remaining: 8m 35sRunning iteration 581/1500... Est. remaining: 8m 29sRunning iteration 591/1500... Est. remaining: 8m 24sRunning iteration 601/1500... Est. remaining: 8m 19sbest_combination: {'lookbacks': [132, 132, 156], 'score': np.float64(0.5650599902783897), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 14sRunning iteration 621/1500... Est. remaining: 8m 9sRunning iteration 631/1500... Est. remaining: 8m 3sRunning iteration 641/1500... Est. remaining: 7m 57sRunning iteration 651/1500... Est. remaining: 7m 52sRunning iteration 661/1500... Est. remaining: 7m 46sRunning iteration 671/1500... Est. remaining: 7m 40sRunning iteration 681/1500... Est. remaining: 7m 34sRunning iteration 691/1500... Est. remaining: 7m 28sRunning iteration 701/1500... Est. remaining: 7m 23sbest_combination: {'lookbacks': [132, 132, 156], 'score': np.float64(0.5650599902783897), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 18sRunning iteration 721/1500... Est. remaining: 7m 12sRunning iteration 731/1500... Est. remaining: 7m 7sRunning iteration 741/1500... Est. remaining: 7m 2sRunning iteration 751/1500... Est. remaining: 6m 56sRunning iteration 761/1500... Est. remaining: 6m 51sRunning iteration 771/1500... Est. remaining: 6m 45sRunning iteration 781/1500... Est. remaining: 6m 39sRunning iteration 791/1500... Est. remaining: 6m 34sRunning iteration 801/1500... Est. remaining: 6m 28sbest_combination: {'lookbacks': [132, 132, 156], 'score': np.float64(0.5650599902783897), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 22sRunning iteration 821/1500... Est. remaining: 6m 16sRunning iteration 831/1500... Est. remaining: 6m 10sRunning iteration 841/1500... Est. remaining: 6m 5sRunning iteration 851/1500... Est. remaining: 5m 59sRunning iteration 861/1500... Est. remaining: 5m 53sRunning iteration 871/1500... Est. remaining: 5m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,486,706,588
Annual Return: 49.93%
Sharpe Ratio: 1.64064
Sortino Ratio: 1.607
Max Drawdown: -58.5%
Avg Drawdown: -10.6%
Normalized Score: 1.181
Lookback periods: [139, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 881/1500... Est. remaining: 5m 43sRunning iteration 891/1500... Est. remaining: 5m 37sRunning iteration 901/1500... Est. remaining: 5m 32sbest_combination: {'lookbacks': [139, 155, 172], 'score': np.float64(1.1812928179526847), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 26sRunning iteration 921/1500... Est. remaining: 5m 20sRunning iteration 931/1500... Est. remaining: 5m 14sRunning iteration 941/1500... Est. remaining: 5m 9sRunning iteration 951/1500... Est. remaining: 5m 3sRunning iteration 961/1500... Est. remaining: 4m 57sRunning iteration 971/1500... Est. remaining: 4m 52sRunning iteration 981/1500... Est. remaining: 4m 46sRunning iteration 991/1500... Est. remaining: 4m 41sRunning iteration 1001/1500... Est. remaining: 4m 35sbest_combination: {'lookbacks': [139, 155, 172], 'score': np.float64(1.1812928179526847), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 29sRunning iteration 1021/1500... Est. remaining: 4m 24sRunning iteration 1031/1500... Est. remaining: 4m 18sRunning iteration 1041/1500... Est. remaining: 4m 13sRunning iteration 1051/1500... Est. remaining: 4m 7sRunning iteration 1061/1500... Est. remaining: 4m 2sRunning iteration 1071/1500... Est. remaining: 3m 56sRunning iteration 1081/1500... Est. remaining: 3m 50sRunning iteration 1091/1500... Est. remaining: 3m 45sRunning iteration 1101/1500... Est. remaining: 3m 39sbest_combination: {'lookbacks': [139, 155, 172], 'score': np.float64(1.1812928179526847), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 34sRunning iteration 1121/1500... Est. remaining: 3m 28sRunning iteration 1131/1500... Est. remaining: 3m 23sRunning iteration 1141/1500... Est. remaining: 3m 17sRunning iteration 1151/1500... Est. remaining: 3m 12sRunning iteration 1161/1500... Est. remaining: 3m 7sRunning iteration 1171/1500... Est. remaining: 3m 1sRunning iteration 1181/1500... Est. remaining: 2m 56sRunning iteration 1191/1500... Est. remaining: 2m 50sRunning iteration 1201/1500... Est. remaining: 2m 45sbest_combination: {'lookbacks': [139, 155, 172], 'score': np.float64(1.1812928179526847), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 39sRunning iteration 1221/1500... Est. remaining: 2m 33sRunning iteration 1231/1500... Est. remaining: 2m 28sRunning iteration 1241/1500... Est. remaining: 2m 22sRunning iteration 1251/1500... Est. remaining: 2m 17sRunning iteration 1261/1500... Est. remaining: 2m 11sRunning iteration 1271/1500... Est. remaining: 2m 6sRunning iteration 1281/1500... Est. remaining: 2m 0sRunning iteration 1291/1500... Est. remaining: 1m 55sRunning iteration 1301/1500... Est. remaining: 1m 49sbest_combination: {'lookbacks': [139, 155, 172], 'score': np.float64(1.1812928179526847), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 44sRunning iteration 1321/1500... Est. remaining: 1m 38sRunning iteration 1331/1500... Est. remaining: 1m 33sRunning iteration 1341/1500... Est. remaining: 1m 27sRunning iteration 1351/1500... Est. remaining: 1m 22sRunning iteration 1361/1500... Est. remaining: 1m 16sRunning iteration 1371/1500... Est. remaining: 1m 11sRunning iteration 1381/1500... Est. remaining: 1m 5sRunning iteration 1391/1500... Est. remaining: 1m 0sRunning iteration 1401/1500... Est. remaining: 0m 54sbest_combination: {'lookbacks': [139, 155, 172], 'score': np.float64(1.1812928179526847), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 49sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 38sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 27sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.6 minutes
Best normalized score: 1.18
best_combination: {'lookbacks': [139, 155, 172], 'score': np.float64(1.1812928179526847), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 155, 172] (score: 1.1813)

Monte Carlo simulation completed in 13.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 155, 172] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 111 selections (26.7%)
3. naz100_pi: 77 selections (18.5%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,486,706,588.23
Average Annualized Gain: 49.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Sun Aug 24 15:45:41 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $395,098,833
Annual Return: 35.71%
Sharpe Ratio: 1.25440
Sortino Ratio: 1.163
Max Drawdown: -52.3%
Avg Drawdown: -12.5%
Normalized Score: -1.393
Lookback periods: [81, 89, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,299,690,237
Annual Return: 40.46%
Sharpe Ratio: 1.36688
Sortino Ratio: 1.303
Max Drawdown: -63.0%
Avg Drawdown: -13.4%
Normalized Score: -1.088
Lookback periods: [110, 114, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $919,243,076
Annual Return: 39.06%
Sharpe Ratio: 1.34117
Sortino Ratio: 1.264
Max Drawdown: -55.0%
Avg Drawdown: -12.4%
Normalized Score: -0.885
Lookback periods: [53, 145, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 55sRunning iteration 21/1500... Est. remaining: 21m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $774,831,664
Annual Return: 38.38%
Sharpe Ratio: 1.33584
Sortino Ratio: 1.250
Max Drawdown: -52.3%
Avg Drawdown: -12.0%
Normalized Score: -0.830
Lookback periods: [77, 92, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $786,689,461
Annual Return: 38.44%
Sharpe Ratio: 1.33003
Sortino Ratio: 1.255
Max Drawdown: -52.3%
Avg Drawdown: -11.5%
Normalized Score: -0.753
Lookback periods: [80, 114, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 32sRunning iteration 41/1500... Est. remaining: 18m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,640,311,276
Annual Return: 41.41%
Sharpe Ratio: 1.39675
Sortino Ratio: 1.338
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: -0.451
Lookback periods: [95, 147, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 17m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,563,626,608
Annual Return: 43.24%
Sharpe Ratio: 1.45511
Sortino Ratio: 1.397
Max Drawdown: -58.9%
Avg Drawdown: -12.1%
Normalized Score: -0.240
Lookback periods: [101, 136, 137] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 17m 23sRunning iteration 71/1500... Est. remaining: 16m 35sRunning iteration 81/1500... Est. remaining: 15m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,469,779,116
Annual Return: 46.41%
Sharpe Ratio: 1.52579
Sortino Ratio: 1.479
Max Drawdown: -57.5%
Avg Drawdown: -12.9%
Normalized Score: 0.195
Lookback periods: [140, 149, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 15m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,275,321,674
Annual Return: 47.62%
Sharpe Ratio: 1.53614
Sortino Ratio: 1.500
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.519
Lookback periods: [180, 190, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 15m 37sbest_combination: {'lookbacks': [180, 190, 198], 'score': np.float64(0.5194270898466437), 'visits': 1}
Running iteration 111/1500... Est. remaining: 15m 13sRunning iteration 121/1500... Est. remaining: 14m 51sRunning iteration 131/1500... Est. remaining: 14m 32sRunning iteration 141/1500... Est. remaining: 14m 17sRunning iteration 151/1500... Est. remaining: 14m 1sRunning iteration 161/1500... Est. remaining: 13m 44sRunning iteration 171/1500... Est. remaining: 13m 29sRunning iteration 181/1500... Est. remaining: 13m 17sRunning iteration 191/1500... Est. remaining: 13m 5sRunning iteration 201/1500... Est. remaining: 12m 54sbest_combination: {'lookbacks': [180, 190, 198], 'score': np.float64(0.5194270898466437), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 44sRunning iteration 221/1500... Est. remaining: 12m 34sRunning iteration 231/1500... Est. remaining: 12m 25sRunning iteration 241/1500... Est. remaining: 12m 15sRunning iteration 251/1500... Est. remaining: 12m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,695,296,600
Annual Return: 48.38%
Sharpe Ratio: 1.57197
Sortino Ratio: 1.537
Max Drawdown: -60.1%
Avg Drawdown: -10.7%
Normalized Score: 0.777
Lookback periods: [156, 158, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 12m 2sRunning iteration 271/1500... Est. remaining: 11m 54sRunning iteration 281/1500... Est. remaining: 11m 46sRunning iteration 291/1500... Est. remaining: 11m 37sRunning iteration 301/1500... Est. remaining: 11m 29sbest_combination: {'lookbacks': [156, 158, 159], 'score': np.float64(0.7774732229933491), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 21sRunning iteration 321/1500... Est. remaining: 11m 13sRunning iteration 331/1500... Est. remaining: 11m 6sRunning iteration 341/1500... Est. remaining: 10m 58sRunning iteration 351/1500... Est. remaining: 10m 51sRunning iteration 361/1500... Est. remaining: 10m 44sRunning iteration 371/1500... Est. remaining: 10m 37sRunning iteration 381/1500... Est. remaining: 10m 30sRunning iteration 391/1500... Est. remaining: 10m 23sRunning iteration 401/1500... Est. remaining: 10m 17sbest_combination: {'lookbacks': [156, 158, 159], 'score': np.float64(0.7774732229933491), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 10sRunning iteration 421/1500... Est. remaining: 10m 3sRunning iteration 431/1500... Est. remaining: 9m 56sRunning iteration 441/1500... Est. remaining: 9m 50sRunning iteration 451/1500... Est. remaining: 9m 44sRunning iteration 461/1500... Est. remaining: 9m 37sRunning iteration 471/1500... Est. remaining: 9m 31sRunning iteration 481/1500... Est. remaining: 9m 24sRunning iteration 491/1500... Est. remaining: 9m 18sRunning iteration 501/1500... Est. remaining: 9m 12sbest_combination: {'lookbacks': [156, 158, 159], 'score': np.float64(0.7774732229933491), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,027,880,775
Annual Return: 48.54%
Sharpe Ratio: 1.58390
Sortino Ratio: 1.545
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.027
Lookback periods: [157, 159, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 9m 8sRunning iteration 521/1500... Est. remaining: 9m 2sRunning iteration 531/1500... Est. remaining: 8m 56sRunning iteration 541/1500... Est. remaining: 8m 50sRunning iteration 551/1500... Est. remaining: 8m 44sRunning iteration 561/1500... Est. remaining: 8m 38sRunning iteration 571/1500... Est. remaining: 8m 32sRunning iteration 581/1500... Est. remaining: 8m 26sRunning iteration 591/1500... Est. remaining: 8m 20sRunning iteration 601/1500... Est. remaining: 8m 14sbest_combination: {'lookbacks': [157, 159, 169], 'score': np.float64(1.0273101774833795), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 8sRunning iteration 621/1500... Est. remaining: 8m 2sRunning iteration 631/1500... Est. remaining: 7m 56sRunning iteration 641/1500... Est. remaining: 7m 50sRunning iteration 651/1500... Est. remaining: 7m 45sRunning iteration 661/1500... Est. remaining: 7m 39sRunning iteration 671/1500... Est. remaining: 7m 33sRunning iteration 681/1500... Est. remaining: 7m 27sRunning iteration 691/1500... Est. remaining: 7m 21sRunning iteration 701/1500... Est. remaining: 7m 16sbest_combination: {'lookbacks': [157, 159, 169], 'score': np.float64(1.0273101774833795), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 10sRunning iteration 721/1500... Est. remaining: 7m 4sRunning iteration 731/1500... Est. remaining: 6m 59sRunning iteration 741/1500... Est. remaining: 6m 53sRunning iteration 751/1500... Est. remaining: 6m 47sRunning iteration 761/1500... Est. remaining: 6m 42sRunning iteration 771/1500... Est. remaining: 6m 36sRunning iteration 781/1500... Est. remaining: 6m 30sRunning iteration 791/1500... Est. remaining: 6m 25sRunning iteration 801/1500... Est. remaining: 6m 19sbest_combination: {'lookbacks': [157, 159, 169], 'score': np.float64(1.0273101774833795), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 13sRunning iteration 821/1500... Est. remaining: 6m 8sRunning iteration 831/1500... Est. remaining: 6m 2sRunning iteration 841/1500... Est. remaining: 5m 56sRunning iteration 851/1500... Est. remaining: 5m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,630,677,174
Annual Return: 49.24%
Sharpe Ratio: 1.60105
Sortino Ratio: 1.581
Max Drawdown: -59.0%
Avg Drawdown: -10.2%
Normalized Score: 1.085
Lookback periods: [158, 161, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 5m 46sRunning iteration 871/1500... Est. remaining: 5m 41sRunning iteration 881/1500... Est. remaining: 5m 35sRunning iteration 891/1500... Est. remaining: 5m 30sRunning iteration 901/1500... Est. remaining: 5m 24sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.084692378380815), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 19sRunning iteration 921/1500... Est. remaining: 5m 13sRunning iteration 931/1500... Est. remaining: 5m 7sRunning iteration 941/1500... Est. remaining: 5m 2sRunning iteration 951/1500... Est. remaining: 4m 56sRunning iteration 961/1500... Est. remaining: 4m 51sRunning iteration 971/1500... Est. remaining: 4m 45sRunning iteration 981/1500... Est. remaining: 4m 40sRunning iteration 991/1500... Est. remaining: 4m 34sRunning iteration 1001/1500... Est. remaining: 4m 29sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.084692378380815), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 23sRunning iteration 1021/1500... Est. remaining: 4m 18sRunning iteration 1031/1500... Est. remaining: 4m 12sRunning iteration 1041/1500... Est. remaining: 4m 7sRunning iteration 1051/1500... Est. remaining: 4m 2sRunning iteration 1061/1500... Est. remaining: 3m 56sRunning iteration 1071/1500... Est. remaining: 3m 51sRunning iteration 1081/1500... Est. remaining: 3m 45sRunning iteration 1091/1500... Est. remaining: 3m 40sRunning iteration 1101/1500... Est. remaining: 3m 34sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.084692378380815), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 29sRunning iteration 1121/1500... Est. remaining: 3m 23sRunning iteration 1131/1500... Est. remaining: 3m 18sRunning iteration 1141/1500... Est. remaining: 3m 13sRunning iteration 1151/1500... Est. remaining: 3m 7sRunning iteration 1161/1500... Est. remaining: 3m 2sRunning iteration 1171/1500... Est. remaining: 2m 56sRunning iteration 1181/1500... Est. remaining: 2m 51sRunning iteration 1191/1500... Est. remaining: 2m 46sRunning iteration 1201/1500... Est. remaining: 2m 40sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.084692378380815), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,787,460,186
Annual Return: 49.30%
Sharpe Ratio: 1.61007
Sortino Ratio: 1.577
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 1.116
Lookback periods: [154, 159, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1221/1500... Est. remaining: 2m 30sRunning iteration 1231/1500... Est. remaining: 2m 25sRunning iteration 1241/1500... Est. remaining: 2m 19sRunning iteration 1251/1500... Est. remaining: 2m 14sRunning iteration 1261/1500... Est. remaining: 2m 8sRunning iteration 1271/1500... Est. remaining: 2m 3sRunning iteration 1281/1500... Est. remaining: 1m 58sRunning iteration 1291/1500... Est. remaining: 1m 52sRunning iteration 1301/1500... Est. remaining: 1m 47sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 41sRunning iteration 1321/1500... Est. remaining: 1m 36sRunning iteration 1331/1500... Est. remaining: 1m 31sRunning iteration 1341/1500... Est. remaining: 1m 25sRunning iteration 1351/1500... Est. remaining: 1m 20sRunning iteration 1361/1500... Est. remaining: 1m 15sRunning iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 4sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.4 minutes
Best normalized score: 1.12
best_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.1162650724022916), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [154, 159, 166] (score: 1.1163)

Monte Carlo simulation completed in 13.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 159, 166] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,787,460,185.92
Average Annualized Gain: 49.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Sun Aug 24 15:59:12 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $783,088,381
Annual Return: 38.42%
Sharpe Ratio: 1.29128
Sortino Ratio: 1.230
Max Drawdown: -67.4%
Avg Drawdown: -13.8%
Normalized Score: -1.678
Lookback periods: [93, 185, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,000,017,580
Annual Return: 42.22%
Sharpe Ratio: 1.39644
Sortino Ratio: 1.347
Max Drawdown: -62.3%
Avg Drawdown: -13.0%
Normalized Score: -0.720
Lookback periods: [143, 161, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,388,891,325
Annual Return: 40.73%
Sharpe Ratio: 1.38367
Sortino Ratio: 1.304
Max Drawdown: -57.9%
Avg Drawdown: -12.0%
Normalized Score: -0.654
Lookback periods: [60, 156, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,527,063,051
Annual Return: 41.11%
Sharpe Ratio: 1.38606
Sortino Ratio: 1.314
Max Drawdown: -55.0%
Avg Drawdown: -12.0%
Normalized Score: -0.500
Lookback periods: [50, 107, 108] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 34m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,781,020,159
Annual Return: 44.85%
Sharpe Ratio: 1.47141
Sortino Ratio: 1.423
Max Drawdown: -59.1%
Avg Drawdown: -12.0%
Normalized Score: -0.011
Lookback periods: [137, 158, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 25m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,830,343,840
Annual Return: 44.91%
Sharpe Ratio: 1.47515
Sortino Ratio: 1.436
Max Drawdown: -58.5%
Avg Drawdown: -12.2%
Normalized Score: 0.009
Lookback periods: [140, 155, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,051,795,743
Annual Return: 46.07%
Sharpe Ratio: 1.51590
Sortino Ratio: 1.482
Max Drawdown: -57.9%
Avg Drawdown: -11.6%
Normalized Score: 0.344
Lookback periods: [134, 147, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 22m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,666,894,559
Annual Return: 47.24%
Sharpe Ratio: 1.53839
Sortino Ratio: 1.504
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.452
Lookback periods: [156, 178, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 20m 55sRunning iteration 51/1500... Est. remaining: 19m 9sRunning iteration 61/1500... Est. remaining: 17m 56sRunning iteration 71/1500... Est. remaining: 17m 4sRunning iteration 81/1500... Est. remaining: 16m 23sRunning iteration 91/1500... Est. remaining: 15m 52sRunning iteration 101/1500... Est. remaining: 15m 24sbest_combination: {'lookbacks': [156, 178, 184], 'score': np.float64(0.45217379438283406), 'visits': 1}
Running iteration 111/1500... Est. remaining: 15m 4sRunning iteration 121/1500... Est. remaining: 14m 45sRunning iteration 131/1500... Est. remaining: 14m 28sRunning iteration 141/1500... Est. remaining: 14m 12sRunning iteration 151/1500... Est. remaining: 13m 59sRunning iteration 161/1500... Est. remaining: 13m 43sRunning iteration 171/1500... Est. remaining: 13m 29sRunning iteration 181/1500... Est. remaining: 13m 16sRunning iteration 191/1500... Est. remaining: 13m 4sRunning iteration 201/1500... Est. remaining: 12m 53sbest_combination: {'lookbacks': [156, 178, 184], 'score': np.float64(0.45217379438283406), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 43sRunning iteration 221/1500... Est. remaining: 12m 34sRunning iteration 231/1500... Est. remaining: 12m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,434,690,317
Annual Return: 47.71%
Sharpe Ratio: 1.54975
Sortino Ratio: 1.518
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.693
Lookback periods: [155, 170, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/1500... Est. remaining: 12m 22sRunning iteration 251/1500... Est. remaining: 12m 13sRunning iteration 261/1500... Est. remaining: 12m 4sRunning iteration 271/1500... Est. remaining: 11m 55sRunning iteration 281/1500... Est. remaining: 11m 47sRunning iteration 291/1500... Est. remaining: 11m 39sRunning iteration 301/1500... Est. remaining: 11m 31sbest_combination: {'lookbacks': [155, 170, 197], 'score': np.float64(0.6933981117627595), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 23sRunning iteration 321/1500... Est. remaining: 11m 15sRunning iteration 331/1500... Est. remaining: 11m 8sRunning iteration 341/1500... Est. remaining: 11m 1sRunning iteration 351/1500... Est. remaining: 10m 54sRunning iteration 361/1500... Est. remaining: 10m 48sRunning iteration 371/1500... Est. remaining: 10m 41sRunning iteration 381/1500... Est. remaining: 10m 35sRunning iteration 391/1500... Est. remaining: 10m 28sRunning iteration 401/1500... Est. remaining: 10m 22sbest_combination: {'lookbacks': [155, 170, 197], 'score': np.float64(0.6933981117627595), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 16sRunning iteration 421/1500... Est. remaining: 10m 10sRunning iteration 431/1500... Est. remaining: 10m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,712,779,132
Annual Return: 48.38%
Sharpe Ratio: 1.60071
Sortino Ratio: 1.562
Max Drawdown: -57.2%
Avg Drawdown: -11.6%
Normalized Score: 0.805
Lookback periods: [140, 148, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 10m 0sRunning iteration 451/1500... Est. remaining: 9m 53sRunning iteration 461/1500... Est. remaining: 9m 47sRunning iteration 471/1500... Est. remaining: 9m 40sRunning iteration 481/1500... Est. remaining: 9m 34sRunning iteration 491/1500... Est. remaining: 9m 28sRunning iteration 501/1500... Est. remaining: 9m 21sbest_combination: {'lookbacks': [140, 148, 156], 'score': np.float64(0.8052021479867151), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 15sRunning iteration 521/1500... Est. remaining: 9m 9sRunning iteration 531/1500... Est. remaining: 9m 3sRunning iteration 541/1500... Est. remaining: 8m 57sRunning iteration 551/1500... Est. remaining: 8m 51sRunning iteration 561/1500... Est. remaining: 8m 45sRunning iteration 571/1500... Est. remaining: 8m 39sRunning iteration 581/1500... Est. remaining: 8m 33sRunning iteration 591/1500... Est. remaining: 8m 27sRunning iteration 601/1500... Est. remaining: 8m 22sbest_combination: {'lookbacks': [140, 148, 156], 'score': np.float64(0.8052021479867151), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 17sRunning iteration 621/1500... Est. remaining: 8m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,335,871,371
Annual Return: 48.68%
Sharpe Ratio: 1.58659
Sortino Ratio: 1.551
Max Drawdown: -59.2%
Avg Drawdown: -10.9%
Normalized Score: 0.842
Lookback periods: [149, 159, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 8m 7sRunning iteration 641/1500... Est. remaining: 8m 2sRunning iteration 651/1500... Est. remaining: 7m 56sRunning iteration 661/1500... Est. remaining: 7m 51sRunning iteration 671/1500... Est. remaining: 7m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,193,108,380
Annual Return: 42.60%
Sharpe Ratio: 1.49433
Sortino Ratio: 1.391
Max Drawdown: -36.1%
Avg Drawdown: -9.8%
Normalized Score: 0.856
Lookback periods: [52, 53, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 7m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,682,377,903
Annual Return: 43.43%
Sharpe Ratio: 1.54975
Sortino Ratio: 1.457
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.226
Lookback periods: [50, 54, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 7m 36sRunning iteration 701/1500... Est. remaining: 7m 31sbest_combination: {'lookbacks': [50, 54, 88], 'score': np.float64(1.2259625032350803), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 25sRunning iteration 721/1500... Est. remaining: 7m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,928,518,176
Annual Return: 43.79%
Sharpe Ratio: 1.59880
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.498
Lookback periods: [50, 52, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 7m 15sRunning iteration 741/1500... Est. remaining: 7m 9sRunning iteration 751/1500... Est. remaining: 7m 3sRunning iteration 761/1500... Est. remaining: 6m 58sRunning iteration 771/1500... Est. remaining: 6m 52sRunning iteration 781/1500... Est. remaining: 6m 46sRunning iteration 791/1500... Est. remaining: 6m 40sRunning iteration 801/1500... Est. remaining: 6m 34sbest_combination: {'lookbacks': [50, 52, 94], 'score': np.float64(1.4976614665732562), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 28sRunning iteration 821/1500... Est. remaining: 6m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,090,622,705
Annual Return: 44.01%
Sharpe Ratio: 1.57961
Sortino Ratio: 1.488
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.562
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 831/1500... Est. remaining: 6m 18sRunning iteration 841/1500... Est. remaining: 6m 12sRunning iteration 851/1500... Est. remaining: 6m 6sRunning iteration 861/1500... Est. remaining: 6m 1sRunning iteration 871/1500... Est. remaining: 5m 55sRunning iteration 881/1500... Est. remaining: 5m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,774,718,571
Annual Return: 44.85%
Sharpe Ratio: 1.62561
Sortino Ratio: 1.530
Max Drawdown: -37.5%
Avg Drawdown: -8.3%
Normalized Score: 1.601
Lookback periods: [52, 52, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 5m 44sRunning iteration 901/1500... Est. remaining: 5m 39sbest_combination: {'lookbacks': [52, 52, 94], 'score': np.float64(1.600668216704658), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 33sRunning iteration 921/1500... Est. remaining: 5m 27sRunning iteration 931/1500... Est. remaining: 5m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,613,763,997
Annual Return: 44.66%
Sharpe Ratio: 1.61575
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.649
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 5m 16sRunning iteration 951/1500... Est. remaining: 5m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,205,286,346
Annual Return: 45.30%
Sharpe Ratio: 1.62640
Sortino Ratio: 1.543
Max Drawdown: -36.6%
Avg Drawdown: -8.6%
Normalized Score: 1.653
Lookback periods: [52, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 961/1500... Est. remaining: 5m 5sRunning iteration 971/1500... Est. remaining: 5m 0sRunning iteration 981/1500... Est. remaining: 4m 54sRunning iteration 991/1500... Est. remaining: 4m 48sRunning iteration 1001/1500... Est. remaining: 4m 43sbest_combination: {'lookbacks': [52, 52, 96], 'score': np.float64(1.6526393852251182), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 37sRunning iteration 1021/1500... Est. remaining: 4m 31sRunning iteration 1031/1500... Est. remaining: 4m 25sRunning iteration 1041/1500... Est. remaining: 4m 19sRunning iteration 1051/1500... Est. remaining: 4m 14sRunning iteration 1061/1500... Est. remaining: 4m 8sRunning iteration 1071/1500... Est. remaining: 4m 2sRunning iteration 1081/1500... Est. remaining: 3m 56sRunning iteration 1091/1500... Est. remaining: 3m 50sRunning iteration 1101/1500... Est. remaining: 3m 45sbest_combination: {'lookbacks': [52, 52, 96], 'score': np.float64(1.6526393852251182), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,912,007
Annual Return: 45.27%
Sharpe Ratio: 1.61355
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.670
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.729
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1121/1500... Est. remaining: 3m 34sRunning iteration 1131/1500... Est. remaining: 3m 28sRunning iteration 1141/1500... Est. remaining: 3m 22sRunning iteration 1151/1500... Est. remaining: 3m 17sRunning iteration 1161/1500... Est. remaining: 3m 10sRunning iteration 1171/1500... Est. remaining: 3m 4sRunning iteration 1181/1500... Est. remaining: 2m 58sRunning iteration 1191/1500... Est. remaining: 2m 52sRunning iteration 1201/1500... Est. remaining: 2m 45sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.7293086365814339), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.046
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1221/1500... Est. remaining: 2m 33sRunning iteration 1231/1500... Est. remaining: 2m 27sRunning iteration 1241/1500... Est. remaining: 2m 22sRunning iteration 1251/1500... Est. remaining: 2m 16sRunning iteration 1261/1500... Est. remaining: 2m 10sRunning iteration 1271/1500... Est. remaining: 2m 4sRunning iteration 1281/1500... Est. remaining: 1m 58sRunning iteration 1291/1500... Est. remaining: 1m 52sRunning iteration 1301/1500... Est. remaining: 1m 47sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 41sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 30sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 2.05
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.046318973786927), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.0463)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Sun Aug 24 16:12:08 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,175,563,230
Annual Return: 44.13%
Sharpe Ratio: 1.45724
Sortino Ratio: 1.416
Max Drawdown: -55.0%
Avg Drawdown: -13.0%
Normalized Score: -0.129
Lookback periods: [130, 143, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 18m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,258,408,628
Annual Return: 46.24%
Sharpe Ratio: 1.49132
Sortino Ratio: 1.448
Max Drawdown: -60.6%
Avg Drawdown: -11.6%
Normalized Score: 0.196
Lookback periods: [149, 187, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 14m 6sRunning iteration 31/1500... Est. remaining: 12m 7sRunning iteration 41/1500... Est. remaining: 11m 5sRunning iteration 51/1500... Est. remaining: 10m 27sRunning iteration 61/1500... Est. remaining: 9m 58sRunning iteration 71/1500... Est. remaining: 9m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,434,985,173
Annual Return: 46.38%
Sharpe Ratio: 1.54452
Sortino Ratio: 1.497
Max Drawdown: -56.0%
Avg Drawdown: -11.8%
Normalized Score: 0.455
Lookback periods: [136, 137, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 9m 35sRunning iteration 91/1500... Est. remaining: 9m 20sRunning iteration 101/1500... Est. remaining: 9m 7sbest_combination: {'lookbacks': [136, 137, 148], 'score': np.float64(0.45471789193077444), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 56sRunning iteration 121/1500... Est. remaining: 8m 45sRunning iteration 131/1500... Est. remaining: 8m 34sRunning iteration 141/1500... Est. remaining: 8m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,793,856,172
Annual Return: 47.91%
Sharpe Ratio: 1.53485
Sortino Ratio: 1.499
Max Drawdown: -60.2%
Avg Drawdown: -11.1%
Normalized Score: 0.581
Lookback periods: [189, 194, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 8m 16sRunning iteration 161/1500... Est. remaining: 8m 6sRunning iteration 171/1500... Est. remaining: 7m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,275,765,066
Annual Return: 45.37%
Sharpe Ratio: 1.53742
Sortino Ratio: 1.465
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: 0.616
Lookback periods: [94, 127, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/1500... Est. remaining: 7m 59sRunning iteration 191/1500... Est. remaining: 7m 53sRunning iteration 201/1500... Est. remaining: 7m 47sbest_combination: {'lookbacks': [94, 127, 144], 'score': np.float64(0.6164309805861157), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 41sRunning iteration 221/1500... Est. remaining: 7m 36sRunning iteration 231/1500... Est. remaining: 7m 30sRunning iteration 241/1500... Est. remaining: 7m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,900,836,655
Annual Return: 47.39%
Sharpe Ratio: 1.53502
Sortino Ratio: 1.512
Max Drawdown: -58.5%
Avg Drawdown: -10.9%
Normalized Score: 0.631
Lookback periods: [155, 164, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 7m 22sRunning iteration 261/1500... Est. remaining: 7m 17sRunning iteration 271/1500... Est. remaining: 7m 12sRunning iteration 281/1500... Est. remaining: 7m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,694,081,886
Annual Return: 47.85%
Sharpe Ratio: 1.57448
Sortino Ratio: 1.535
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 0.817
Lookback periods: [139, 156, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 291/1500... Est. remaining: 7m 7sRunning iteration 301/1500... Est. remaining: 7m 2sbest_combination: {'lookbacks': [139, 156, 173], 'score': np.float64(0.8174723749110123), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 58sRunning iteration 321/1500... Est. remaining: 6m 54sRunning iteration 331/1500... Est. remaining: 6m 50sRunning iteration 341/1500... Est. remaining: 6m 45sRunning iteration 351/1500... Est. remaining: 6m 41sRunning iteration 361/1500... Est. remaining: 6m 37sRunning iteration 371/1500... Est. remaining: 6m 33sRunning iteration 381/1500... Est. remaining: 6m 29sRunning iteration 391/1500... Est. remaining: 6m 25sRunning iteration 401/1500... Est. remaining: 6m 21sbest_combination: {'lookbacks': [139, 156, 173], 'score': np.float64(0.8174723749110123), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 17sRunning iteration 421/1500... Est. remaining: 6m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,917,533,440
Annual Return: 48.94%
Sharpe Ratio: 1.60846
Sortino Ratio: 1.575
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 0.913
Lookback periods: [136, 155, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 6m 12sRunning iteration 441/1500... Est. remaining: 6m 8sRunning iteration 451/1500... Est. remaining: 6m 4sRunning iteration 461/1500... Est. remaining: 6m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,634,270,151
Annual Return: 43.35%
Sharpe Ratio: 1.55177
Sortino Ratio: 1.449
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 1.169
Lookback periods: [51, 55, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 5m 59sRunning iteration 481/1500... Est. remaining: 5m 55sRunning iteration 491/1500... Est. remaining: 5m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,781,823,512
Annual Return: 49.30%
Sharpe Ratio: 1.60771
Sortino Ratio: 1.579
Max Drawdown: -55.0%
Avg Drawdown: -10.4%
Normalized Score: 1.195
Lookback periods: [156, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 5m 49sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 46sRunning iteration 521/1500... Est. remaining: 5m 42sRunning iteration 531/1500... Est. remaining: 5m 38sRunning iteration 541/1500... Est. remaining: 5m 34sRunning iteration 551/1500... Est. remaining: 5m 30sRunning iteration 561/1500... Est. remaining: 5m 27sRunning iteration 571/1500... Est. remaining: 5m 23sRunning iteration 581/1500... Est. remaining: 5m 19sRunning iteration 591/1500... Est. remaining: 5m 15sRunning iteration 601/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 611/1500... Est. remaining: 5m 8sRunning iteration 621/1500... Est. remaining: 5m 4sRunning iteration 631/1500... Est. remaining: 5m 1sRunning iteration 641/1500... Est. remaining: 4m 57sRunning iteration 651/1500... Est. remaining: 4m 53sRunning iteration 661/1500... Est. remaining: 4m 50sRunning iteration 671/1500... Est. remaining: 4m 46sRunning iteration 681/1500... Est. remaining: 4m 42sRunning iteration 691/1500... Est. remaining: 4m 39sRunning iteration 701/1500... Est. remaining: 4m 35sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 31sRunning iteration 721/1500... Est. remaining: 4m 28sRunning iteration 731/1500... Est. remaining: 4m 24sRunning iteration 741/1500... Est. remaining: 4m 21sRunning iteration 751/1500... Est. remaining: 4m 17sRunning iteration 761/1500... Est. remaining: 4m 14sRunning iteration 771/1500... Est. remaining: 4m 10sRunning iteration 781/1500... Est. remaining: 4m 6sRunning iteration 791/1500... Est. remaining: 4m 3sRunning iteration 801/1500... Est. remaining: 3m 59sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 56sRunning iteration 821/1500... Est. remaining: 3m 52sRunning iteration 831/1500... Est. remaining: 3m 49sRunning iteration 841/1500... Est. remaining: 3m 45sRunning iteration 851/1500... Est. remaining: 3m 42sRunning iteration 861/1500... Est. remaining: 3m 38sRunning iteration 871/1500... Est. remaining: 3m 35sRunning iteration 881/1500... Est. remaining: 3m 32sRunning iteration 891/1500... Est. remaining: 3m 28sRunning iteration 901/1500... Est. remaining: 3m 25sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 21sRunning iteration 921/1500... Est. remaining: 3m 18sRunning iteration 931/1500... Est. remaining: 3m 14sRunning iteration 941/1500... Est. remaining: 3m 11sRunning iteration 951/1500... Est. remaining: 3m 7sRunning iteration 961/1500... Est. remaining: 3m 4sRunning iteration 971/1500... Est. remaining: 3m 0sRunning iteration 981/1500... Est. remaining: 2m 57sRunning iteration 991/1500... Est. remaining: 2m 53sRunning iteration 1001/1500... Est. remaining: 2m 50sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.1953459399513957), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 47sRunning iteration 1021/1500... Est. remaining: 2m 43sRunning iteration 1031/1500... Est. remaining: 2m 40sRunning iteration 1041/1500... Est. remaining: 2m 36sRunning iteration 1051/1500... Est. remaining: 2m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,318,429,095
Annual Return: 49.88%
Sharpe Ratio: 1.62083
Sortino Ratio: 1.597
Max Drawdown: -59.0%
Avg Drawdown: -10.0%
Normalized Score: 1.223
Lookback periods: [158, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1061/1500... Est. remaining: 2m 30sRunning iteration 1071/1500... Est. remaining: 2m 26sRunning iteration 1081/1500... Est. remaining: 2m 23sRunning iteration 1091/1500... Est. remaining: 2m 20sRunning iteration 1101/1500... Est. remaining: 2m 16sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 13sRunning iteration 1121/1500... Est. remaining: 2m 9sRunning iteration 1131/1500... Est. remaining: 2m 6sRunning iteration 1141/1500... Est. remaining: 2m 2sRunning iteration 1151/1500... Est. remaining: 1m 59sRunning iteration 1161/1500... Est. remaining: 1m 56sRunning iteration 1171/1500... Est. remaining: 1m 52sRunning iteration 1181/1500... Est. remaining: 1m 49sRunning iteration 1191/1500... Est. remaining: 1m 45sRunning iteration 1201/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 38sRunning iteration 1221/1500... Est. remaining: 1m 35sRunning iteration 1231/1500... Est. remaining: 1m 32sRunning iteration 1241/1500... Est. remaining: 1m 28sRunning iteration 1251/1500... Est. remaining: 1m 25sRunning iteration 1261/1500... Est. remaining: 1m 21sRunning iteration 1271/1500... Est. remaining: 1m 18sRunning iteration 1281/1500... Est. remaining: 1m 14sRunning iteration 1291/1500... Est. remaining: 1m 11sRunning iteration 1301/1500... Est. remaining: 1m 8sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 4sRunning iteration 1321/1500... Est. remaining: 1m 1sRunning iteration 1331/1500... Est. remaining: 0m 57sRunning iteration 1341/1500... Est. remaining: 0m 54sRunning iteration 1351/1500... Est. remaining: 0m 51sRunning iteration 1361/1500... Est. remaining: 0m 47sRunning iteration 1371/1500... Est. remaining: 0m 44sRunning iteration 1381/1500... Est. remaining: 0m 40sRunning iteration 1391/1500... Est. remaining: 0m 37sRunning iteration 1401/1500... Est. remaining: 0m 33sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 30sRunning iteration 1421/1500... Est. remaining: 0m 27sRunning iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 20sRunning iteration 1451/1500... Est. remaining: 0m 16sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 10sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.5 minutes
Best normalized score: 1.22
best_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(1.222629988852672), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [158, 162, 169] (score: 1.2226)

Monte Carlo simulation completed in 8.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [158, 162, 169] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 79 selections (19.0%)
5. cash: 34 selections (8.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,318,429,094.71
Average Annualized Gain: 49.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Sun Aug 24 16:20:45 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $286,322,879
Annual Return: 34.46%
Sharpe Ratio: 1.20856
Sortino Ratio: 1.121
Max Drawdown: -52.3%
Avg Drawdown: -12.8%
Normalized Score: -1.679
Lookback periods: [71, 84, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,681,037,831
Annual Return: 44.74%
Sharpe Ratio: 1.46334
Sortino Ratio: 1.423
Max Drawdown: -65.8%
Avg Drawdown: -13.4%
Normalized Score: -0.471
Lookback periods: [148, 152, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 20m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,195,101,693
Annual Return: 44.15%
Sharpe Ratio: 1.44827
Sortino Ratio: 1.407
Max Drawdown: -61.0%
Avg Drawdown: -12.5%
Normalized Score: -0.263
Lookback periods: [139, 169, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 14m 57sRunning iteration 31/1500... Est. remaining: 12m 31sRunning iteration 41/1500... Est. remaining: 11m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,383,563,447
Annual Return: 40.71%
Sharpe Ratio: 1.41038
Sortino Ratio: 1.322
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: -0.247
Lookback periods: [92, 96, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 11m 2sRunning iteration 61/1500... Est. remaining: 10m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,839,855,173
Annual Return: 45.89%
Sharpe Ratio: 1.50668
Sortino Ratio: 1.456
Max Drawdown: -59.3%
Avg Drawdown: -12.4%
Normalized Score: 0.111
Lookback periods: [146, 151, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 10m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,422,864,987
Annual Return: 46.37%
Sharpe Ratio: 1.52817
Sortino Ratio: 1.484
Max Drawdown: -59.2%
Avg Drawdown: -12.3%
Normalized Score: 0.249
Lookback periods: [134, 149, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 10m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,240,232,739
Annual Return: 46.22%
Sharpe Ratio: 1.50506
Sortino Ratio: 1.469
Max Drawdown: -56.6%
Avg Drawdown: -11.2%
Normalized Score: 0.441
Lookback periods: [159, 161, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 10m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,182,172,385
Annual Return: 48.61%
Sharpe Ratio: 1.59840
Sortino Ratio: 1.560
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 0.907
Lookback periods: [138, 156, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 10m 1sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.9067719675030155), 'visits': 1}
Running iteration 111/1500... Est. remaining: 9m 43sRunning iteration 121/1500... Est. remaining: 9m 25sRunning iteration 131/1500... Est. remaining: 9m 10sRunning iteration 141/1500... Est. remaining: 8m 53sRunning iteration 151/1500... Est. remaining: 8m 40sRunning iteration 161/1500... Est. remaining: 8m 29sRunning iteration 171/1500... Est. remaining: 8m 21sRunning iteration 181/1500... Est. remaining: 8m 14sRunning iteration 191/1500... Est. remaining: 8m 8sRunning iteration 201/1500... Est. remaining: 8m 1sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.9067719675030155), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 53sRunning iteration 221/1500... Est. remaining: 7m 46sRunning iteration 231/1500... Est. remaining: 7m 39sRunning iteration 241/1500... Est. remaining: 7m 33sRunning iteration 251/1500... Est. remaining: 7m 28sRunning iteration 261/1500... Est. remaining: 7m 23sRunning iteration 271/1500... Est. remaining: 7m 19sRunning iteration 281/1500... Est. remaining: 7m 14sRunning iteration 291/1500... Est. remaining: 7m 9sRunning iteration 301/1500... Est. remaining: 7m 5sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.9067719675030155), 'visits': 1}
Running iteration 311/1500... Est. remaining: 7m 0sRunning iteration 321/1500... Est. remaining: 6m 56sRunning iteration 331/1500... Est. remaining: 6m 51sRunning iteration 341/1500... Est. remaining: 6m 47sRunning iteration 351/1500... Est. remaining: 6m 43sRunning iteration 361/1500... Est. remaining: 6m 39sRunning iteration 371/1500... Est. remaining: 6m 34sRunning iteration 381/1500... Est. remaining: 6m 30sRunning iteration 391/1500... Est. remaining: 6m 26sRunning iteration 401/1500... Est. remaining: 6m 22sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.9067719675030155), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 18sRunning iteration 421/1500... Est. remaining: 6m 14sRunning iteration 431/1500... Est. remaining: 6m 11sRunning iteration 441/1500... Est. remaining: 6m 7sRunning iteration 451/1500... Est. remaining: 6m 3sRunning iteration 461/1500... Est. remaining: 5m 59sRunning iteration 471/1500... Est. remaining: 5m 56sRunning iteration 481/1500... Est. remaining: 5m 52sRunning iteration 491/1500... Est. remaining: 5m 48sRunning iteration 501/1500... Est. remaining: 5m 44sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.9067719675030155), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 41sRunning iteration 521/1500... Est. remaining: 5m 37sRunning iteration 531/1500... Est. remaining: 5m 33sRunning iteration 541/1500... Est. remaining: 5m 30sRunning iteration 551/1500... Est. remaining: 5m 26sRunning iteration 561/1500... Est. remaining: 5m 22sRunning iteration 571/1500... Est. remaining: 5m 19sRunning iteration 581/1500... Est. remaining: 5m 15sRunning iteration 591/1500... Est. remaining: 5m 11sRunning iteration 601/1500... Est. remaining: 5m 8sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.9067719675030155), 'visits': 1}
Running iteration 611/1500... Est. remaining: 5m 4sRunning iteration 621/1500... Est. remaining: 5m 1sRunning iteration 631/1500... Est. remaining: 4m 57sRunning iteration 641/1500... Est. remaining: 4m 54sRunning iteration 651/1500... Est. remaining: 4m 50sRunning iteration 661/1500... Est. remaining: 4m 47sRunning iteration 671/1500... Est. remaining: 4m 43sRunning iteration 681/1500... Est. remaining: 4m 40sRunning iteration 691/1500... Est. remaining: 4m 36sRunning iteration 701/1500... Est. remaining: 4m 32sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.9067719675030155), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 29sRunning iteration 721/1500... Est. remaining: 4m 25sRunning iteration 731/1500... Est. remaining: 4m 22sRunning iteration 741/1500... Est. remaining: 4m 18sRunning iteration 751/1500... Est. remaining: 4m 15sRunning iteration 761/1500... Est. remaining: 4m 11sRunning iteration 771/1500... Est. remaining: 4m 7sRunning iteration 781/1500... Est. remaining: 4m 4sRunning iteration 791/1500... Est. remaining: 4m 0sRunning iteration 801/1500... Est. remaining: 3m 57sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.9067719675030155), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 53sRunning iteration 821/1500... Est. remaining: 3m 50sRunning iteration 831/1500... Est. remaining: 3m 46sRunning iteration 841/1500... Est. remaining: 3m 43sRunning iteration 851/1500... Est. remaining: 3m 39sRunning iteration 861/1500... Est. remaining: 3m 36sRunning iteration 871/1500... Est. remaining: 3m 33sRunning iteration 881/1500... Est. remaining: 3m 29sRunning iteration 891/1500... Est. remaining: 3m 26sRunning iteration 901/1500... Est. remaining: 3m 22sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.9067719675030155), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 19sRunning iteration 921/1500... Est. remaining: 3m 15sRunning iteration 931/1500... Est. remaining: 3m 12sRunning iteration 941/1500... Est. remaining: 3m 9sRunning iteration 951/1500... Est. remaining: 3m 5sRunning iteration 961/1500... Est. remaining: 3m 2sRunning iteration 971/1500... Est. remaining: 2m 58sRunning iteration 981/1500... Est. remaining: 2m 55sRunning iteration 991/1500... Est. remaining: 2m 52sRunning iteration 1001/1500... Est. remaining: 2m 48sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.9067719675030155), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 45sRunning iteration 1021/1500... Est. remaining: 2m 41sRunning iteration 1031/1500... Est. remaining: 2m 38sRunning iteration 1041/1500... Est. remaining: 2m 35sRunning iteration 1051/1500... Est. remaining: 2m 31sRunning iteration 1061/1500... Est. remaining: 2m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,165,214,390
Annual Return: 49.45%
Sharpe Ratio: 1.61937
Sortino Ratio: 1.587
Max Drawdown: -58.5%
Avg Drawdown: -11.0%
Normalized Score: 1.018
Lookback periods: [139, 155, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1071/1500... Est. remaining: 2m 25sRunning iteration 1081/1500... Est. remaining: 2m 21sRunning iteration 1091/1500... Est. remaining: 2m 18sRunning iteration 1101/1500... Est. remaining: 2m 15sbest_combination: {'lookbacks': [139, 155, 173], 'score': np.float64(1.0184073791720647), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 11sRunning iteration 1121/1500... Est. remaining: 2m 8sRunning iteration 1131/1500... Est. remaining: 2m 4sRunning iteration 1141/1500... Est. remaining: 2m 1sRunning iteration 1151/1500... Est. remaining: 1m 58sRunning iteration 1161/1500... Est. remaining: 1m 54sRunning iteration 1171/1500... Est. remaining: 1m 51sRunning iteration 1181/1500... Est. remaining: 1m 47sRunning iteration 1191/1500... Est. remaining: 1m 44sRunning iteration 1201/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [139, 155, 173], 'score': np.float64(1.0184073791720647), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 37sRunning iteration 1221/1500... Est. remaining: 1m 34sRunning iteration 1231/1500... Est. remaining: 1m 31sRunning iteration 1241/1500... Est. remaining: 1m 27sRunning iteration 1251/1500... Est. remaining: 1m 24sRunning iteration 1261/1500... Est. remaining: 1m 20sRunning iteration 1271/1500... Est. remaining: 1m 17sRunning iteration 1281/1500... Est. remaining: 1m 14sRunning iteration 1291/1500... Est. remaining: 1m 10sRunning iteration 1301/1500... Est. remaining: 1m 7sbest_combination: {'lookbacks': [139, 155, 173], 'score': np.float64(1.0184073791720647), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 4sRunning iteration 1321/1500... Est. remaining: 1m 0sRunning iteration 1331/1500... Est. remaining: 0m 57sRunning iteration 1341/1500... Est. remaining: 0m 53sRunning iteration 1351/1500... Est. remaining: 0m 50sRunning iteration 1361/1500... Est. remaining: 0m 47sRunning iteration 1371/1500... Est. remaining: 0m 43sRunning iteration 1381/1500... Est. remaining: 0m 40sRunning iteration 1391/1500... Est. remaining: 0m 37sRunning iteration 1401/1500... Est. remaining: 0m 33sbest_combination: {'lookbacks': [139, 155, 173], 'score': np.float64(1.0184073791720647), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 30sRunning iteration 1421/1500... Est. remaining: 0m 26sRunning iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 20sRunning iteration 1451/1500... Est. remaining: 0m 16sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 10sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.4 minutes
Best normalized score: 1.02
best_combination: {'lookbacks': [139, 155, 173], 'score': np.float64(1.0184073791720647), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 155, 173] (score: 1.0184)

Monte Carlo simulation completed in 8.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 155, 173] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,165,214,389.74
Average Annualized Gain: 49.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Sun Aug 24 16:29:19 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $505,893,295
Annual Return: 36.69%
Sharpe Ratio: 1.28222
Sortino Ratio: 1.195
Max Drawdown: -52.3%
Avg Drawdown: -12.7%
Normalized Score: -1.242
Lookback periods: [75, 91, 129] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,773,892,966
Annual Return: 45.83%
Sharpe Ratio: 1.50853
Sortino Ratio: 1.458
Max Drawdown: -57.2%
Avg Drawdown: -12.0%
Normalized Score: 0.239
Lookback periods: [137, 157, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 22m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,431,663,994
Annual Return: 47.71%
Sharpe Ratio: 1.55663
Sortino Ratio: 1.525
Max Drawdown: -59.0%
Avg Drawdown: -10.0%
Normalized Score: 0.824
Lookback periods: [157, 167, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 16m 8sRunning iteration 31/1500... Est. remaining: 13m 18sRunning iteration 41/1500... Est. remaining: 11m 56sRunning iteration 51/1500... Est. remaining: 11m 3sRunning iteration 61/1500... Est. remaining: 10m 29sRunning iteration 71/1500... Est. remaining: 10m 2sRunning iteration 81/1500... Est. remaining: 9m 42sRunning iteration 91/1500... Est. remaining: 9m 26sRunning iteration 101/1500... Est. remaining: 9m 11sbest_combination: {'lookbacks': [157, 167, 174], 'score': np.float64(0.8237999088411536), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 56sRunning iteration 121/1500... Est. remaining: 8m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,279,908,874
Annual Return: 49.49%
Sharpe Ratio: 1.58627
Sortino Ratio: 1.561
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.900
Lookback periods: [176, 189, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 8m 41sRunning iteration 141/1500... Est. remaining: 8m 33sRunning iteration 151/1500... Est. remaining: 8m 23sRunning iteration 161/1500... Est. remaining: 8m 13sRunning iteration 171/1500... Est. remaining: 8m 5sRunning iteration 181/1500... Est. remaining: 8m 0sRunning iteration 191/1500... Est. remaining: 7m 54sRunning iteration 201/1500... Est. remaining: 7m 48sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(0.9000520010034716), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 43sRunning iteration 221/1500... Est. remaining: 7m 37sRunning iteration 231/1500... Est. remaining: 7m 31sRunning iteration 241/1500... Est. remaining: 7m 25sRunning iteration 251/1500... Est. remaining: 7m 20sRunning iteration 261/1500... Est. remaining: 7m 15sRunning iteration 271/1500... Est. remaining: 7m 11sRunning iteration 281/1500... Est. remaining: 7m 7sRunning iteration 291/1500... Est. remaining: 7m 3sRunning iteration 301/1500... Est. remaining: 6m 59sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(0.9000520010034716), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 55sRunning iteration 321/1500... Est. remaining: 6m 51sRunning iteration 331/1500... Est. remaining: 6m 47sRunning iteration 341/1500... Est. remaining: 6m 43sRunning iteration 351/1500... Est. remaining: 6m 39sRunning iteration 361/1500... Est. remaining: 6m 35sRunning iteration 371/1500... Est. remaining: 6m 32sRunning iteration 381/1500... Est. remaining: 6m 28sRunning iteration 391/1500... Est. remaining: 6m 24sRunning iteration 401/1500... Est. remaining: 6m 20sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(0.9000520010034716), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 17sRunning iteration 421/1500... Est. remaining: 6m 13sRunning iteration 431/1500... Est. remaining: 6m 9sRunning iteration 441/1500... Est. remaining: 6m 5sRunning iteration 451/1500... Est. remaining: 6m 2sRunning iteration 461/1500... Est. remaining: 5m 58sRunning iteration 471/1500... Est. remaining: 5m 54sRunning iteration 481/1500... Est. remaining: 5m 50sRunning iteration 491/1500... Est. remaining: 5m 47sRunning iteration 501/1500... Est. remaining: 5m 43sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(0.9000520010034716), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 40sRunning iteration 521/1500... Est. remaining: 5m 36sRunning iteration 531/1500... Est. remaining: 5m 33sRunning iteration 541/1500... Est. remaining: 5m 29sRunning iteration 551/1500... Est. remaining: 5m 26sRunning iteration 561/1500... Est. remaining: 5m 22sRunning iteration 571/1500... Est. remaining: 5m 19sRunning iteration 581/1500... Est. remaining: 5m 15sRunning iteration 591/1500... Est. remaining: 5m 12sRunning iteration 601/1500... Est. remaining: 5m 8sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(0.9000520010034716), 'visits': 1}
Running iteration 611/1500... Est. remaining: 5m 5sRunning iteration 621/1500... Est. remaining: 5m 1sRunning iteration 631/1500... Est. remaining: 4m 58sRunning iteration 641/1500... Est. remaining: 4m 54sRunning iteration 651/1500... Est. remaining: 4m 51sRunning iteration 661/1500... Est. remaining: 4m 47sRunning iteration 671/1500... Est. remaining: 4m 44sRunning iteration 681/1500... Est. remaining: 4m 40sRunning iteration 691/1500... Est. remaining: 4m 37sRunning iteration 701/1500... Est. remaining: 4m 33sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(0.9000520010034716), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 30sRunning iteration 721/1500... Est. remaining: 4m 26sRunning iteration 731/1500... Est. remaining: 4m 23sRunning iteration 741/1500... Est. remaining: 4m 19sRunning iteration 751/1500... Est. remaining: 4m 16sRunning iteration 761/1500... Est. remaining: 4m 12sRunning iteration 771/1500... Est. remaining: 4m 9sRunning iteration 781/1500... Est. remaining: 4m 5sRunning iteration 791/1500... Est. remaining: 4m 1sRunning iteration 801/1500... Est. remaining: 3m 58sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(0.9000520010034716), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 54sRunning iteration 821/1500... Est. remaining: 3m 50sRunning iteration 831/1500... Est. remaining: 3m 47sRunning iteration 841/1500... Est. remaining: 3m 43sRunning iteration 851/1500... Est. remaining: 3m 40sRunning iteration 861/1500... Est. remaining: 3m 37sRunning iteration 871/1500... Est. remaining: 3m 33sRunning iteration 881/1500... Est. remaining: 3m 30sRunning iteration 891/1500... Est. remaining: 3m 26sRunning iteration 901/1500... Est. remaining: 3m 23sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(0.9000520010034716), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 19sRunning iteration 921/1500... Est. remaining: 3m 16sRunning iteration 931/1500... Est. remaining: 3m 13sRunning iteration 941/1500... Est. remaining: 3m 9sRunning iteration 951/1500... Est. remaining: 3m 6sRunning iteration 961/1500... Est. remaining: 3m 2sRunning iteration 971/1500... Est. remaining: 2m 59sRunning iteration 981/1500... Est. remaining: 2m 55sRunning iteration 991/1500... Est. remaining: 2m 52sRunning iteration 1001/1500... Est. remaining: 2m 49sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(0.9000520010034716), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 45sRunning iteration 1021/1500... Est. remaining: 2m 42sRunning iteration 1031/1500... Est. remaining: 2m 38sRunning iteration 1041/1500... Est. remaining: 2m 35sRunning iteration 1051/1500... Est. remaining: 2m 32sRunning iteration 1061/1500... Est. remaining: 2m 28sRunning iteration 1071/1500... Est. remaining: 2m 25sRunning iteration 1081/1500... Est. remaining: 2m 22sRunning iteration 1091/1500... Est. remaining: 2m 18sRunning iteration 1101/1500... Est. remaining: 2m 15sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(0.9000520010034716), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 11sRunning iteration 1121/1500... Est. remaining: 2m 8sRunning iteration 1131/1500... Est. remaining: 2m 5sRunning iteration 1141/1500... Est. remaining: 2m 1sRunning iteration 1151/1500... Est. remaining: 1m 58sRunning iteration 1161/1500... Est. remaining: 1m 54sRunning iteration 1171/1500... Est. remaining: 1m 51sRunning iteration 1181/1500... Est. remaining: 1m 48sRunning iteration 1191/1500... Est. remaining: 1m 44sRunning iteration 1201/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(0.9000520010034716), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 37sRunning iteration 1221/1500... Est. remaining: 1m 34sRunning iteration 1231/1500... Est. remaining: 1m 31sRunning iteration 1241/1500... Est. remaining: 1m 27sRunning iteration 1251/1500... Est. remaining: 1m 24sRunning iteration 1261/1500... Est. remaining: 1m 21sRunning iteration 1271/1500... Est. remaining: 1m 17sRunning iteration 1281/1500... Est. remaining: 1m 14sRunning iteration 1291/1500... Est. remaining: 1m 10sRunning iteration 1301/1500... Est. remaining: 1m 7sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(0.9000520010034716), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 4sRunning iteration 1321/1500... Est. remaining: 1m 0sRunning iteration 1331/1500... Est. remaining: 0m 57sRunning iteration 1341/1500... Est. remaining: 0m 54sRunning iteration 1351/1500... Est. remaining: 0m 50sRunning iteration 1361/1500... Est. remaining: 0m 47sRunning iteration 1371/1500... Est. remaining: 0m 43sRunning iteration 1381/1500... Est. remaining: 0m 40sRunning iteration 1391/1500... Est. remaining: 0m 37sRunning iteration 1401/1500... Est. remaining: 0m 33sbest_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(0.9000520010034716), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 30sRunning iteration 1421/1500... Est. remaining: 0m 27sRunning iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 20sRunning iteration 1451/1500... Est. remaining: 0m 16sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 10sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.4 minutes
Best normalized score: 0.90
best_combination: {'lookbacks': [176, 189, 198], 'score': np.float64(0.9000520010034716), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [176, 189, 198] (score: 0.9001)

Monte Carlo simulation completed in 8.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 189, 198] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 120 selections (28.8%)
2. sp500_hma: 104 selections (25.0%)
3. naz100_pine: 85 selections (20.4%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,279,908,874.04
Average Annualized Gain: 49.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Sun Aug 24 16:37:54 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $835,623,346
Annual Return: 38.68%
Sharpe Ratio: 1.32769
Sortino Ratio: 1.248
Max Drawdown: -57.5%
Avg Drawdown: -13.1%
Normalized Score: -1.154
Lookback periods: [86, 99, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,599,031,240
Annual Return: 41.30%
Sharpe Ratio: 1.40409
Sortino Ratio: 1.343
Max Drawdown: -56.9%
Avg Drawdown: -12.4%
Normalized Score: -0.540
Lookback periods: [94, 133, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,391,561,010
Annual Return: 42.95%
Sharpe Ratio: 1.45567
Sortino Ratio: 1.391
Max Drawdown: -55.0%
Avg Drawdown: -12.4%
Normalized Score: -0.183
Lookback periods: [100, 135, 137] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,269,465,019
Annual Return: 46.25%
Sharpe Ratio: 1.49900
Sortino Ratio: 1.470
Max Drawdown: -61.8%
Avg Drawdown: -12.8%
Normalized Score: 0.018
Lookback periods: [153, 179, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 16m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,360,422,114
Annual Return: 40.64%
Sharpe Ratio: 1.42609
Sortino Ratio: 1.320
Max Drawdown: -41.9%
Avg Drawdown: -9.8%
Normalized Score: 0.283
Lookback periods: [50, 52, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 14m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,851,470,032
Annual Return: 46.69%
Sharpe Ratio: 1.51701
Sortino Ratio: 1.486
Max Drawdown: -61.6%
Avg Drawdown: -11.6%
Normalized Score: 0.291
Lookback periods: [160, 189, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 13m 4sRunning iteration 51/1500... Est. remaining: 12m 1sRunning iteration 61/1500... Est. remaining: 11m 17sRunning iteration 71/1500... Est. remaining: 10m 43sRunning iteration 81/1500... Est. remaining: 10m 18sRunning iteration 91/1500... Est. remaining: 9m 59sRunning iteration 101/1500... Est. remaining: 9m 38sbest_combination: {'lookbacks': [160, 189, 199], 'score': np.float64(0.2911996491476525), 'visits': 1}
Running iteration 111/1500... Est. remaining: 9m 20sRunning iteration 121/1500... Est. remaining: 9m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,489,746,744
Annual Return: 47.13%
Sharpe Ratio: 1.51975
Sortino Ratio: 1.490
Max Drawdown: -60.0%
Avg Drawdown: -11.7%
Normalized Score: 0.384
Lookback periods: [154, 188, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 9m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,696,807,685
Annual Return: 48.84%
Sharpe Ratio: 1.59265
Sortino Ratio: 1.555
Max Drawdown: -56.8%
Avg Drawdown: -11.5%
Normalized Score: 0.869
Lookback periods: [139, 157, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 9m 0sRunning iteration 151/1500... Est. remaining: 8m 50sRunning iteration 161/1500... Est. remaining: 8m 41sRunning iteration 171/1500... Est. remaining: 8m 33sRunning iteration 181/1500... Est. remaining: 8m 23sRunning iteration 191/1500... Est. remaining: 8m 14sRunning iteration 201/1500... Est. remaining: 8m 5sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(0.8690924551909307), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 58sRunning iteration 221/1500... Est. remaining: 7m 51sRunning iteration 231/1500... Est. remaining: 7m 44sRunning iteration 241/1500... Est. remaining: 7m 37sRunning iteration 251/1500... Est. remaining: 7m 31sRunning iteration 261/1500... Est. remaining: 7m 26sRunning iteration 271/1500... Est. remaining: 7m 21sRunning iteration 281/1500... Est. remaining: 7m 16sRunning iteration 291/1500... Est. remaining: 7m 11sRunning iteration 301/1500... Est. remaining: 7m 6sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(0.8690924551909307), 'visits': 1}
Running iteration 311/1500... Est. remaining: 7m 2sRunning iteration 321/1500... Est. remaining: 6m 57sRunning iteration 331/1500... Est. remaining: 6m 53sRunning iteration 341/1500... Est. remaining: 6m 49sRunning iteration 351/1500... Est. remaining: 6m 45sRunning iteration 361/1500... Est. remaining: 6m 40sRunning iteration 371/1500... Est. remaining: 6m 36sRunning iteration 381/1500... Est. remaining: 6m 32sRunning iteration 391/1500... Est. remaining: 6m 28sRunning iteration 401/1500... Est. remaining: 6m 24sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(0.8690924551909307), 'visits': 1}
Running iteration 411/1500... Est. remaining: 6m 20sRunning iteration 421/1500... Est. remaining: 6m 16sRunning iteration 431/1500... Est. remaining: 6m 12sRunning iteration 441/1500... Est. remaining: 6m 8sRunning iteration 451/1500... Est. remaining: 6m 4sRunning iteration 461/1500... Est. remaining: 6m 0sRunning iteration 471/1500... Est. remaining: 5m 57sRunning iteration 481/1500... Est. remaining: 5m 53sRunning iteration 491/1500... Est. remaining: 5m 49sRunning iteration 501/1500... Est. remaining: 5m 45sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(0.8690924551909307), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 42sRunning iteration 521/1500... Est. remaining: 5m 38sRunning iteration 531/1500... Est. remaining: 5m 34sRunning iteration 541/1500... Est. remaining: 5m 30sRunning iteration 551/1500... Est. remaining: 5m 27sRunning iteration 561/1500... Est. remaining: 5m 23sRunning iteration 571/1500... Est. remaining: 5m 19sRunning iteration 581/1500... Est. remaining: 5m 16sRunning iteration 591/1500... Est. remaining: 5m 12sRunning iteration 601/1500... Est. remaining: 5m 9sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(0.8690924551909307), 'visits': 1}
Running iteration 611/1500... Est. remaining: 5m 5sRunning iteration 621/1500... Est. remaining: 5m 1sRunning iteration 631/1500... Est. remaining: 4m 58sRunning iteration 641/1500... Est. remaining: 4m 54sRunning iteration 651/1500... Est. remaining: 4m 50sRunning iteration 661/1500... Est. remaining: 4m 47sRunning iteration 671/1500... Est. remaining: 4m 43sRunning iteration 681/1500... Est. remaining: 4m 40sRunning iteration 691/1500... Est. remaining: 4m 36sRunning iteration 701/1500... Est. remaining: 4m 33sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(0.8690924551909307), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 29sRunning iteration 721/1500... Est. remaining: 4m 26sRunning iteration 731/1500... Est. remaining: 4m 22sRunning iteration 741/1500... Est. remaining: 4m 19sRunning iteration 751/1500... Est. remaining: 4m 15sRunning iteration 761/1500... Est. remaining: 4m 12sRunning iteration 771/1500... Est. remaining: 4m 8sRunning iteration 781/1500... Est. remaining: 4m 5sRunning iteration 791/1500... Est. remaining: 4m 1sRunning iteration 801/1500... Est. remaining: 3m 57sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(0.8690924551909307), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 54sRunning iteration 821/1500... Est. remaining: 3m 50sRunning iteration 831/1500... Est. remaining: 3m 47sRunning iteration 841/1500... Est. remaining: 3m 43sRunning iteration 851/1500... Est. remaining: 3m 40sRunning iteration 861/1500... Est. remaining: 3m 36sRunning iteration 871/1500... Est. remaining: 3m 33sRunning iteration 881/1500... Est. remaining: 3m 29sRunning iteration 891/1500... Est. remaining: 3m 26sRunning iteration 901/1500... Est. remaining: 3m 23sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(0.8690924551909307), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 19sRunning iteration 921/1500... Est. remaining: 3m 16sRunning iteration 931/1500... Est. remaining: 3m 12sRunning iteration 941/1500... Est. remaining: 3m 9sRunning iteration 951/1500... Est. remaining: 3m 5sRunning iteration 961/1500... Est. remaining: 3m 2sRunning iteration 971/1500... Est. remaining: 2m 59sRunning iteration 981/1500... Est. remaining: 2m 55sRunning iteration 991/1500... Est. remaining: 2m 52sRunning iteration 1001/1500... Est. remaining: 2m 48sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(0.8690924551909307), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 45sRunning iteration 1021/1500... Est. remaining: 2m 42sRunning iteration 1031/1500... Est. remaining: 2m 38sRunning iteration 1041/1500... Est. remaining: 2m 35sRunning iteration 1051/1500... Est. remaining: 2m 31sRunning iteration 1061/1500... Est. remaining: 2m 28sRunning iteration 1071/1500... Est. remaining: 2m 25sRunning iteration 1081/1500... Est. remaining: 2m 21sRunning iteration 1091/1500... Est. remaining: 2m 18sRunning iteration 1101/1500... Est. remaining: 2m 14sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(0.8690924551909307), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 11sRunning iteration 1121/1500... Est. remaining: 2m 8sRunning iteration 1131/1500... Est. remaining: 2m 4sRunning iteration 1141/1500... Est. remaining: 2m 1sRunning iteration 1151/1500... Est. remaining: 1m 58sRunning iteration 1161/1500... Est. remaining: 1m 54sRunning iteration 1171/1500... Est. remaining: 1m 51sRunning iteration 1181/1500... Est. remaining: 1m 47sRunning iteration 1191/1500... Est. remaining: 1m 44sRunning iteration 1201/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(0.8690924551909307), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 37sRunning iteration 1221/1500... Est. remaining: 1m 34sRunning iteration 1231/1500... Est. remaining: 1m 31sRunning iteration 1241/1500... Est. remaining: 1m 27sRunning iteration 1251/1500... Est. remaining: 1m 24sRunning iteration 1261/1500... Est. remaining: 1m 20sRunning iteration 1271/1500... Est. remaining: 1m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,098,751,113
Annual Return: 48.57%
Sharpe Ratio: 1.57912
Sortino Ratio: 1.548
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.033
Lookback periods: [156, 161, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1281/1500... Est. remaining: 1m 14sRunning iteration 1291/1500... Est. remaining: 1m 10sRunning iteration 1301/1500... Est. remaining: 1m 7sbest_combination: {'lookbacks': [156, 161, 169], 'score': np.float64(1.0331063826629165), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 4sRunning iteration 1321/1500... Est. remaining: 1m 0sRunning iteration 1331/1500... Est. remaining: 0m 57sRunning iteration 1341/1500... Est. remaining: 0m 54sRunning iteration 1351/1500... Est. remaining: 0m 50sRunning iteration 1361/1500... Est. remaining: 0m 47sRunning iteration 1371/1500... Est. remaining: 0m 43sRunning iteration 1381/1500... Est. remaining: 0m 40sRunning iteration 1391/1500... Est. remaining: 0m 37sRunning iteration 1401/1500... Est. remaining: 0m 33sbest_combination: {'lookbacks': [156, 161, 169], 'score': np.float64(1.0331063826629165), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 30sRunning iteration 1421/1500... Est. remaining: 0m 26sRunning iteration 1431/1500... Est. remaining: 0m 23sRunning iteration 1441/1500... Est. remaining: 0m 20sRunning iteration 1451/1500... Est. remaining: 0m 16sRunning iteration 1461/1500... Est. remaining: 0m 13sRunning iteration 1471/1500... Est. remaining: 0m 10sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 8.4 minutes
Best normalized score: 1.03
best_combination: {'lookbacks': [156, 161, 169], 'score': np.float64(1.0331063826629165), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 161, 169] (score: 1.0331)

Monte Carlo simulation completed in 8.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 161, 169] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 77 selections (18.5%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,098,751,113.35
Average Annualized Gain: 48.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 199m 28s
End time: Sun Aug 24 16:46:23 EDT 2025
Average time per successful run: 13m 17s
==============================================================
✓ All runs completed successfully!
