Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Tue Aug 26 23:40:45 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Tue Aug 26 23:40:45 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $546,666,478
Annual Return: 36.99%
Sharpe Ratio: 1.29408
Sortino Ratio: 1.195
Max Drawdown: -61.3%
Avg Drawdown: -12.4%
Normalized Score: -1.486
Lookback periods: [33, 143, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $957,768,381
Annual Return: 39.23%
Sharpe Ratio: 1.29595
Sortino Ratio: 1.243
Max Drawdown: -75.7%
Avg Drawdown: -14.6%
Normalized Score: -1.212
Lookback periods: [240, 276, 277] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,991,507,257
Annual Return: 42.20%
Sharpe Ratio: 1.39326
Sortino Ratio: 1.344
Max Drawdown: -65.1%
Avg Drawdown: -12.9%
Normalized Score: -0.168
Lookback periods: [132, 190, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 25sRunning iteration 21/1500... Est. remaining: 19m 50sRunning iteration 31/1500... Est. remaining: 17m 7sRunning iteration 41/1500... Est. remaining: 15m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,160,078,476
Annual Return: 42.53%
Sharpe Ratio: 1.37988
Sortino Ratio: 1.344
Max Drawdown: -64.8%
Avg Drawdown: -12.4%
Normalized Score: -0.124
Lookback periods: [164, 207, 213] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 15m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,798,059,634
Annual Return: 45.85%
Sharpe Ratio: 1.49505
Sortino Ratio: 1.456
Max Drawdown: -64.5%
Avg Drawdown: -12.0%
Normalized Score: 0.901
Lookback periods: [149, 194, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 15m 15sRunning iteration 71/1500... Est. remaining: 14m 38sRunning iteration 81/1500... Est. remaining: 14m 8sRunning iteration 91/1500... Est. remaining: 13m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,386,599,629
Annual Return: 46.34%
Sharpe Ratio: 1.52078
Sortino Ratio: 1.484
Max Drawdown: -68.5%
Avg Drawdown: -11.5%
Normalized Score: 1.116
Lookback periods: [142, 158, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 13m 42sbest_combination: {'lookbacks': [142, 158, 172], 'score': np.float64(1.1164342257362603), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,437,746,098
Annual Return: 46.38%
Sharpe Ratio: 1.51452
Sortino Ratio: 1.484
Max Drawdown: -55.0%
Avg Drawdown: -11.1%
Normalized Score: 1.215
Lookback periods: [156, 163, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 13m 40sRunning iteration 121/1500... Est. remaining: 13m 23sRunning iteration 131/1500... Est. remaining: 13m 7sRunning iteration 141/1500... Est. remaining: 12m 53sRunning iteration 151/1500... Est. remaining: 12m 39sRunning iteration 161/1500... Est. remaining: 12m 28sRunning iteration 171/1500... Est. remaining: 12m 17sRunning iteration 181/1500... Est. remaining: 12m 6sRunning iteration 191/1500... Est. remaining: 11m 57sRunning iteration 201/1500... Est. remaining: 11m 47sbest_combination: {'lookbacks': [156, 163, 169], 'score': np.float64(1.2146118705830893), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 39sRunning iteration 221/1500... Est. remaining: 11m 31sRunning iteration 231/1500... Est. remaining: 11m 23sRunning iteration 241/1500... Est. remaining: 11m 15sRunning iteration 251/1500... Est. remaining: 11m 7sRunning iteration 261/1500... Est. remaining: 11m 0sRunning iteration 271/1500... Est. remaining: 10m 52sRunning iteration 281/1500... Est. remaining: 10m 45sRunning iteration 291/1500... Est. remaining: 10m 38sRunning iteration 301/1500... Est. remaining: 10m 31sbest_combination: {'lookbacks': [156, 163, 169], 'score': np.float64(1.2146118705830893), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 24sRunning iteration 321/1500... Est. remaining: 10m 17sRunning iteration 331/1500... Est. remaining: 10m 11sRunning iteration 341/1500... Est. remaining: 10m 4sRunning iteration 351/1500... Est. remaining: 9m 58sRunning iteration 361/1500... Est. remaining: 9m 52sRunning iteration 371/1500... Est. remaining: 9m 45sRunning iteration 381/1500... Est. remaining: 9m 39sRunning iteration 391/1500... Est. remaining: 9m 33sRunning iteration 401/1500... Est. remaining: 9m 27sbest_combination: {'lookbacks': [156, 163, 169], 'score': np.float64(1.2146118705830893), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,032,563,839
Annual Return: 46.82%
Sharpe Ratio: 1.52712
Sortino Ratio: 1.493
Max Drawdown: -58.5%
Avg Drawdown: -11.5%
Normalized Score: 1.275
Lookback periods: [153, 161, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 9m 24sRunning iteration 421/1500... Est. remaining: 9m 18sRunning iteration 431/1500... Est. remaining: 9m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,410,161,113
Annual Return: 47.69%
Sharpe Ratio: 1.56009
Sortino Ratio: 1.533
Max Drawdown: -56.9%
Avg Drawdown: -10.8%
Normalized Score: 1.637
Lookback periods: [157, 161, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 9sRunning iteration 451/1500... Est. remaining: 9m 3sRunning iteration 461/1500... Est. remaining: 8m 57sRunning iteration 471/1500... Est. remaining: 8m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,552,943,673
Annual Return: 48.31%
Sharpe Ratio: 1.56524
Sortino Ratio: 1.533
Max Drawdown: -58.5%
Avg Drawdown: -11.9%
Normalized Score: 1.646
Lookback periods: [154, 155, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 8m 48sRunning iteration 491/1500... Est. remaining: 8m 42sRunning iteration 501/1500... Est. remaining: 8m 36sbest_combination: {'lookbacks': [154, 155, 166], 'score': np.float64(1.645671426868762), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 30sRunning iteration 521/1500... Est. remaining: 8m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,868,649,203
Annual Return: 48.92%
Sharpe Ratio: 1.57972
Sortino Ratio: 1.546
Max Drawdown: -61.3%
Avg Drawdown: -11.7%
Normalized Score: 1.778
Lookback periods: [154, 155, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 8m 21sRunning iteration 541/1500... Est. remaining: 8m 15sRunning iteration 551/1500... Est. remaining: 8m 10sRunning iteration 561/1500... Est. remaining: 8m 4sRunning iteration 571/1500... Est. remaining: 7m 58sRunning iteration 581/1500... Est. remaining: 7m 53sRunning iteration 591/1500... Est. remaining: 7m 47sRunning iteration 601/1500... Est. remaining: 7m 41sbest_combination: {'lookbacks': [154, 155, 157], 'score': np.float64(1.7777326204705104), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 36sRunning iteration 621/1500... Est. remaining: 7m 30sRunning iteration 631/1500... Est. remaining: 7m 25sRunning iteration 641/1500... Est. remaining: 7m 19sRunning iteration 651/1500... Est. remaining: 7m 14sRunning iteration 661/1500... Est. remaining: 7m 8sRunning iteration 671/1500... Est. remaining: 7m 3sRunning iteration 681/1500... Est. remaining: 6m 58sRunning iteration 691/1500... Est. remaining: 6m 52sRunning iteration 701/1500... Est. remaining: 6m 47sbest_combination: {'lookbacks': [154, 155, 157], 'score': np.float64(1.7777326204705104), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 42sRunning iteration 721/1500... Est. remaining: 6m 36sRunning iteration 731/1500... Est. remaining: 6m 31sRunning iteration 741/1500... Est. remaining: 6m 26sRunning iteration 751/1500... Est. remaining: 6m 20sRunning iteration 761/1500... Est. remaining: 6m 15sRunning iteration 771/1500... Est. remaining: 6m 10sRunning iteration 781/1500... Est. remaining: 6m 5sRunning iteration 791/1500... Est. remaining: 5m 59sRunning iteration 801/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [154, 155, 157], 'score': np.float64(1.7777326204705104), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 49sRunning iteration 821/1500... Est. remaining: 5m 44sRunning iteration 831/1500... Est. remaining: 5m 39sRunning iteration 841/1500... Est. remaining: 5m 33sRunning iteration 851/1500... Est. remaining: 5m 28sRunning iteration 861/1500... Est. remaining: 5m 23sRunning iteration 871/1500... Est. remaining: 5m 18sRunning iteration 881/1500... Est. remaining: 5m 13sRunning iteration 891/1500... Est. remaining: 5m 8sRunning iteration 901/1500... Est. remaining: 5m 2sbest_combination: {'lookbacks': [154, 155, 157], 'score': np.float64(1.7777326204705104), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 57sRunning iteration 921/1500... Est. remaining: 4m 52sRunning iteration 931/1500... Est. remaining: 4m 47sRunning iteration 941/1500... Est. remaining: 4m 42sRunning iteration 951/1500... Est. remaining: 4m 37sRunning iteration 961/1500... Est. remaining: 4m 31sRunning iteration 971/1500... Est. remaining: 4m 26sRunning iteration 981/1500... Est. remaining: 4m 21sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [154, 155, 157], 'score': np.float64(1.7777326204705104), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 45sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [154, 155, 157], 'score': np.float64(1.7777326204705104), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,738,320,468
Annual Return: 49.28%
Sharpe Ratio: 1.59875
Sortino Ratio: 1.564
Max Drawdown: -58.5%
Avg Drawdown: -11.3%
Normalized Score: 1.960
Lookback periods: [154, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [154, 155, 172], 'score': np.float64(1.9595355840574804), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [154, 155, 172], 'score': np.float64(1.9595355840574804), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [154, 155, 172], 'score': np.float64(1.9595355840574804), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 1.96
best_combination: {'lookbacks': [154, 155, 172], 'score': np.float64(1.9595355840574804), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [154, 155, 172] (score: 1.9595)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 155, 172] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 116 selections (27.9%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 74 selections (17.8%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,738,320,467.74
Average Annualized Gain: 49.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Tue Aug 26 23:53:20 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $300,295,533
Annual Return: 34.64%
Sharpe Ratio: 1.19475
Sortino Ratio: 1.113
Max Drawdown: -59.0%
Avg Drawdown: -12.7%
Normalized Score: -1.532
Lookback periods: [84, 270, 295] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,209,793,816
Annual Return: 44.17%
Sharpe Ratio: 1.44703
Sortino Ratio: 1.404
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: -0.171
Lookback periods: [161, 187, 210] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,705,737,092
Annual Return: 45.77%
Sharpe Ratio: 1.49110
Sortino Ratio: 1.459
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.066
Lookback periods: [149, 171, 206] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 1sRunning iteration 21/1500... Est. remaining: 20m 10sRunning iteration 31/1500... Est. remaining: 17m 28sRunning iteration 41/1500... Est. remaining: 16m 3sRunning iteration 51/1500... Est. remaining: 15m 11sRunning iteration 61/1500... Est. remaining: 14m 28sRunning iteration 71/1500... Est. remaining: 13m 58sRunning iteration 81/1500... Est. remaining: 13m 35sRunning iteration 91/1500... Est. remaining: 13m 16sRunning iteration 101/1500... Est. remaining: 13m 0sbest_combination: {'lookbacks': [149, 171, 206], 'score': np.float64(0.06587821472245294), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 47sRunning iteration 121/1500... Est. remaining: 12m 35sRunning iteration 131/1500... Est. remaining: 12m 24sRunning iteration 141/1500... Est. remaining: 12m 13sRunning iteration 151/1500... Est. remaining: 12m 4sRunning iteration 161/1500... Est. remaining: 11m 56sRunning iteration 171/1500... Est. remaining: 11m 47sRunning iteration 181/1500... Est. remaining: 11m 39sRunning iteration 191/1500... Est. remaining: 11m 31sRunning iteration 201/1500... Est. remaining: 11m 23sbest_combination: {'lookbacks': [149, 171, 206], 'score': np.float64(0.06587821472245294), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 16sRunning iteration 221/1500... Est. remaining: 11m 9sRunning iteration 231/1500... Est. remaining: 11m 2sRunning iteration 241/1500... Est. remaining: 10m 56sRunning iteration 251/1500... Est. remaining: 10m 49sRunning iteration 261/1500... Est. remaining: 10m 43sRunning iteration 271/1500... Est. remaining: 10m 37sRunning iteration 281/1500... Est. remaining: 10m 30sRunning iteration 291/1500... Est. remaining: 10m 24sRunning iteration 301/1500... Est. remaining: 10m 18sbest_combination: {'lookbacks': [149, 171, 206], 'score': np.float64(0.06587821472245294), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 12sRunning iteration 321/1500... Est. remaining: 10m 6sRunning iteration 331/1500... Est. remaining: 9m 59sRunning iteration 341/1500... Est. remaining: 9m 54sRunning iteration 351/1500... Est. remaining: 9m 47sRunning iteration 361/1500... Est. remaining: 9m 42sRunning iteration 371/1500... Est. remaining: 9m 36sRunning iteration 381/1500... Est. remaining: 9m 30sRunning iteration 391/1500... Est. remaining: 9m 24sRunning iteration 401/1500... Est. remaining: 9m 18sbest_combination: {'lookbacks': [149, 171, 206], 'score': np.float64(0.06587821472245294), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 13sRunning iteration 421/1500... Est. remaining: 9m 7sRunning iteration 431/1500... Est. remaining: 9m 2sRunning iteration 441/1500... Est. remaining: 8m 57sRunning iteration 451/1500... Est. remaining: 8m 51sRunning iteration 461/1500... Est. remaining: 8m 46sRunning iteration 471/1500... Est. remaining: 8m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,903,737,282
Annual Return: 46.73%
Sharpe Ratio: 1.54852
Sortino Ratio: 1.509
Max Drawdown: -57.2%
Avg Drawdown: -11.7%
Normalized Score: 0.252
Lookback periods: [142, 149, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 8m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,673,646,644
Annual Return: 46.56%
Sharpe Ratio: 1.54151
Sortino Ratio: 1.495
Max Drawdown: -55.0%
Avg Drawdown: -10.8%
Normalized Score: 0.269
Lookback periods: [141, 157, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 8m 35sRunning iteration 501/1500... Est. remaining: 8m 30sbest_combination: {'lookbacks': [141, 157, 171], 'score': np.float64(0.2694329771772077), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 24sRunning iteration 521/1500... Est. remaining: 8m 18sRunning iteration 531/1500... Est. remaining: 8m 13sRunning iteration 541/1500... Est. remaining: 8m 7sRunning iteration 551/1500... Est. remaining: 8m 2sRunning iteration 561/1500... Est. remaining: 7m 56sRunning iteration 571/1500... Est. remaining: 7m 51sRunning iteration 581/1500... Est. remaining: 7m 46sRunning iteration 591/1500... Est. remaining: 7m 40sRunning iteration 601/1500... Est. remaining: 7m 35sbest_combination: {'lookbacks': [141, 157, 171], 'score': np.float64(0.2694329771772077), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 29sRunning iteration 621/1500... Est. remaining: 7m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,099,718,918
Annual Return: 47.51%
Sharpe Ratio: 1.54675
Sortino Ratio: 1.519
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 0.333
Lookback periods: [154, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 7m 21sRunning iteration 641/1500... Est. remaining: 7m 15sRunning iteration 651/1500... Est. remaining: 7m 10sRunning iteration 661/1500... Est. remaining: 7m 5sRunning iteration 671/1500... Est. remaining: 7m 0sRunning iteration 681/1500... Est. remaining: 6m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,417,699,961
Annual Return: 47.70%
Sharpe Ratio: 1.55496
Sortino Ratio: 1.517
Max Drawdown: -60.2%
Avg Drawdown: -10.9%
Normalized Score: 0.354
Lookback periods: [157, 158, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 6m 51sRunning iteration 701/1500... Est. remaining: 6m 46sbest_combination: {'lookbacks': [157, 158, 168], 'score': np.float64(0.35437741924074906), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 40sRunning iteration 721/1500... Est. remaining: 6m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,070,968,658
Annual Return: 49.01%
Sharpe Ratio: 1.59187
Sortino Ratio: 1.563
Max Drawdown: -59.0%
Avg Drawdown: -10.4%
Normalized Score: 0.574
Lookback periods: [158, 161, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 6m 31sRunning iteration 741/1500... Est. remaining: 6m 26sRunning iteration 751/1500... Est. remaining: 6m 21sRunning iteration 761/1500... Est. remaining: 6m 15sRunning iteration 771/1500... Est. remaining: 6m 10sRunning iteration 781/1500... Est. remaining: 6m 5sRunning iteration 791/1500... Est. remaining: 5m 59sRunning iteration 801/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [158, 161, 172], 'score': np.float64(0.5742021773509498), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 49sRunning iteration 821/1500... Est. remaining: 5m 44sRunning iteration 831/1500... Est. remaining: 5m 38sRunning iteration 841/1500... Est. remaining: 5m 33sRunning iteration 851/1500... Est. remaining: 5m 28sRunning iteration 861/1500... Est. remaining: 5m 23sRunning iteration 871/1500... Est. remaining: 5m 18sRunning iteration 881/1500... Est. remaining: 5m 13sRunning iteration 891/1500... Est. remaining: 5m 7sRunning iteration 901/1500... Est. remaining: 5m 2sbest_combination: {'lookbacks': [158, 161, 172], 'score': np.float64(0.5742021773509498), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 57sRunning iteration 921/1500... Est. remaining: 5m 29sRunning iteration 931/1500... Est. remaining: 9m 46sRunning iteration 941/1500... Est. remaining: 9m 32sRunning iteration 951/1500... Est. remaining: 12m 7sRunning iteration 961/1500... Est. remaining: 11m 49sRunning iteration 971/1500... Est. remaining: 13m 54sRunning iteration 981/1500... Est. remaining: 60m 1sRunning iteration 991/1500... Est. remaining: 58m 19sRunning iteration 1001/1500... Est. remaining: 64m 8sbest_combination: {'lookbacks': [158, 161, 172], 'score': np.float64(0.5742021773509498), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 62m 16sRunning iteration 1021/1500... Est. remaining: 101m 46sRunning iteration 1031/1500... Est. remaining: 138m 41sRunning iteration 1041/1500... Est. remaining: 134m 28sRunning iteration 1051/1500... Est. remaining: 157m 35sRunning iteration 1061/1500... Est. remaining: 152m 40sRunning iteration 1071/1500... Est. remaining: 167m 16sRunning iteration 1081/1500... Est. remaining: 190m 2sRunning iteration 1091/1500... Est. remaining: 183m 50sRunning iteration 1101/1500... Est. remaining: 177m 45sbest_combination: {'lookbacks': [158, 161, 172], 'score': np.float64(0.5742021773509498), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 192m 6sRunning iteration 1121/1500... Est. remaining: 186m 30sRunning iteration 1131/1500... Est. remaining: 180m 0sRunning iteration 1141/1500... Est. remaining: 188m 58sRunning iteration 1151/1500... Est. remaining: 185m 51sRunning iteration 1161/1500... Est. remaining: 179m 0sRunning iteration 1171/1500... Est. remaining: 181m 37sRunning iteration 1181/1500... Est. remaining: 174m 47sRunning iteration 1191/1500... Est. remaining: 167m 55sRunning iteration 1201/1500... Est. remaining: 161m 10sbest_combination: {'lookbacks': [158, 161, 172], 'score': np.float64(0.5742021773509498), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 154m 31sRunning iteration 1221/1500... Est. remaining: 148m 2sRunning iteration 1231/1500... Est. remaining: 142m 43sRunning iteration 1241/1500... Est. remaining: 136m 20sRunning iteration 1251/1500... Est. remaining: 130m 59sRunning iteration 1261/1500... Est. remaining: 126m 14sRunning iteration 1271/1500... Est. remaining: 120m 2sRunning iteration 1281/1500... Est. remaining: 114m 53sRunning iteration 1291/1500... Est. remaining: 109m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,907,454,513
Annual Return: 48.94%
Sharpe Ratio: 1.59606
Sortino Ratio: 1.568
Max Drawdown: -59.0%
Avg Drawdown: -10.4%
Normalized Score: 0.577
Lookback periods: [158, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1301/1500... Est. remaining: 103m 29sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(0.5770115738498536), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 97m 34sRunning iteration 1321/1500... Est. remaining: 93m 10sRunning iteration 1331/1500... Est. remaining: 87m 21sRunning iteration 1341/1500... Est. remaining: 82m 28sRunning iteration 1351/1500... Est. remaining: 77m 2sRunning iteration 1361/1500... Est. remaining: 71m 22sRunning iteration 1371/1500... Est. remaining: 65m 56sRunning iteration 1381/1500... Est. remaining: 60m 26sRunning iteration 1391/1500... Est. remaining: 55m 0sRunning iteration 1401/1500... Est. remaining: 49m 51sbest_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(0.5770115738498536), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 44m 33sRunning iteration 1421/1500... Est. remaining: 39m 51sRunning iteration 1431/1500... Est. remaining: 35m 51sRunning iteration 1441/1500... Est. remaining: 30m 31sRunning iteration 1451/1500... Est. remaining: 25m 24sRunning iteration 1461/1500... Est. remaining: 20m 11sRunning iteration 1471/1500... Est. remaining: 15m 2sRunning iteration 1481/1500... Est. remaining: 10m 2sRunning iteration 1491/1500... Est. remaining: 4m 59s
Monte Carlo simulation completed in 743.6 minutes
Best normalized score: 0.58
best_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(0.5770115738498536), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [158, 162, 169] (score: 0.5770)

Monte Carlo simulation completed in 743.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [158, 162, 169] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 78 selections (18.8%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,907,454,512.91
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Wed Aug 27 12:17:15 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,892,998,026
Annual Return: 43.74%
Sharpe Ratio: 1.42624
Sortino Ratio: 1.383
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.268
Lookback periods: [166, 185, 206] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,171,786,472
Annual Return: 44.12%
Sharpe Ratio: 1.44735
Sortino Ratio: 1.402
Max Drawdown: -59.0%
Avg Drawdown: -12.0%
Normalized Score: 0.402
Lookback periods: [147, 182, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 75m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,757,394,992
Annual Return: 44.83%
Sharpe Ratio: 1.46207
Sortino Ratio: 1.426
Max Drawdown: -59.0%
Avg Drawdown: -12.3%
Normalized Score: 0.560
Lookback periods: [145, 157, 212] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 62m 7sRunning iteration 31/1500... Est. remaining: 72m 10sRunning iteration 41/1500... Est. remaining: 56m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,004,614,972
Annual Return: 42.23%
Sharpe Ratio: 1.51612
Sortino Ratio: 1.415
Max Drawdown: -40.7%
Avg Drawdown: -10.3%
Normalized Score: 0.631
Lookback periods: [37, 79, 113] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 105m 27sRunning iteration 61/1500... Est. remaining: 117m 36sRunning iteration 71/1500... Est. remaining: 101m 46sRunning iteration 81/1500... Est. remaining: 468m 48sRunning iteration 91/1500... Est. remaining: 466m 55sRunning iteration 101/1500... Est. remaining: 418m 22sbest_combination: {'lookbacks': [37, 79, 113], 'score': np.float64(0.6313657087811086), 'visits': 1}
Running iteration 111/1500... Est. remaining: 392m 54sRunning iteration 121/1500... Est. remaining: 572m 13sRunning iteration 131/1500... Est. remaining: 525m 14sRunning iteration 141/1500... Est. remaining: 487m 52sRunning iteration 151/1500... Est. remaining: 452m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,615,424,458
Annual Return: 47.81%
Sharpe Ratio: 1.56784
Sortino Ratio: 1.528
Max Drawdown: -56.8%
Avg Drawdown: -11.7%
Normalized Score: 1.375
Lookback periods: [139, 154, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 530m 42sRunning iteration 171/1500... Est. remaining: 669m 49sRunning iteration 181/1500... Est. remaining: 636m 58sRunning iteration 191/1500... Est. remaining: 599m 26sRunning iteration 201/1500... Est. remaining: 585m 58sbest_combination: {'lookbacks': [139, 154, 169], 'score': np.float64(1.3749907338652432), 'visits': 1}
Running iteration 211/1500... Est. remaining: 554m 17sRunning iteration 221/1500... Est. remaining: 525m 28sRunning iteration 231/1500... Est. remaining: 499m 9sRunning iteration 241/1500... Est. remaining: 475m 2sRunning iteration 251/1500... Est. remaining: 452m 49sRunning iteration 261/1500... Est. remaining: 432m 18sRunning iteration 271/1500... Est. remaining: 413m 19sRunning iteration 281/1500... Est. remaining: 395m 40sRunning iteration 291/1500... Est. remaining: 379m 14sRunning iteration 301/1500... Est. remaining: 363m 53sbest_combination: {'lookbacks': [139, 154, 169], 'score': np.float64(1.3749907338652432), 'visits': 1}
Running iteration 311/1500... Est. remaining: 349m 32sRunning iteration 321/1500... Est. remaining: 336m 4sRunning iteration 331/1500... Est. remaining: 323m 25sRunning iteration 341/1500... Est. remaining: 311m 30sRunning iteration 351/1500... Est. remaining: 300m 15sRunning iteration 361/1500... Est. remaining: 289m 38sRunning iteration 371/1500... Est. remaining: 279m 35sRunning iteration 381/1500... Est. remaining: 270m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,558,972,485
Annual Return: 48.31%
Sharpe Ratio: 1.58196
Sortino Ratio: 1.550
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 1.512
Lookback periods: [136, 153, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 261m 4sRunning iteration 401/1500... Est. remaining: 252m 28sbest_combination: {'lookbacks': [136, 153, 178], 'score': np.float64(1.5124645358348219), 'visits': 1}
Running iteration 411/1500... Est. remaining: 244m 17sRunning iteration 421/1500... Est. remaining: 236m 29sRunning iteration 431/1500... Est. remaining: 229m 3sRunning iteration 441/1500... Est. remaining: 221m 57sRunning iteration 451/1500... Est. remaining: 215m 10sRunning iteration 461/1500... Est. remaining: 208m 40sRunning iteration 471/1500... Est. remaining: 202m 26sRunning iteration 481/1500... Est. remaining: 196m 28sRunning iteration 491/1500... Est. remaining: 190m 44sRunning iteration 501/1500... Est. remaining: 185m 14sbest_combination: {'lookbacks': [136, 153, 178], 'score': np.float64(1.5124645358348219), 'visits': 1}
Running iteration 511/1500... Est. remaining: 179m 57sRunning iteration 521/1500... Est. remaining: 174m 51sRunning iteration 531/1500... Est. remaining: 169m 57sRunning iteration 541/1500... Est. remaining: 165m 14sRunning iteration 551/1500... Est. remaining: 160m 40sRunning iteration 561/1500... Est. remaining: 156m 17sRunning iteration 571/1500... Est. remaining: 152m 2sRunning iteration 581/1500... Est. remaining: 147m 56sRunning iteration 591/1500... Est. remaining: 143m 58sRunning iteration 601/1500... Est. remaining: 140m 8sbest_combination: {'lookbacks': [136, 153, 178], 'score': np.float64(1.5124645358348219), 'visits': 1}
Running iteration 611/1500... Est. remaining: 136m 26sRunning iteration 621/1500... Est. remaining: 132m 50sRunning iteration 631/1500... Est. remaining: 129m 21sRunning iteration 641/1500... Est. remaining: 125m 59sRunning iteration 651/1500... Est. remaining: 122m 42sRunning iteration 661/1500... Est. remaining: 119m 32sRunning iteration 671/1500... Est. remaining: 116m 27sRunning iteration 681/1500... Est. remaining: 113m 27sRunning iteration 691/1500... Est. remaining: 110m 32sRunning iteration 701/1500... Est. remaining: 107m 42sbest_combination: {'lookbacks': [136, 153, 178], 'score': np.float64(1.5124645358348219), 'visits': 1}
Running iteration 711/1500... Est. remaining: 104m 57sRunning iteration 721/1500... Est. remaining: 102m 16sRunning iteration 731/1500... Est. remaining: 99m 39sRunning iteration 741/1500... Est. remaining: 97m 7sRunning iteration 751/1500... Est. remaining: 94m 39sRunning iteration 761/1500... Est. remaining: 92m 14sRunning iteration 771/1500... Est. remaining: 89m 53sRunning iteration 781/1500... Est. remaining: 87m 35sRunning iteration 791/1500... Est. remaining: 85m 21sRunning iteration 801/1500... Est. remaining: 83m 10sbest_combination: {'lookbacks': [136, 153, 178], 'score': np.float64(1.5124645358348219), 'visits': 1}
Running iteration 811/1500... Est. remaining: 81m 2sRunning iteration 821/1500... Est. remaining: 78m 57sRunning iteration 831/1500... Est. remaining: 76m 55sRunning iteration 841/1500... Est. remaining: 74m 56sRunning iteration 851/1500... Est. remaining: 73m 0sRunning iteration 861/1500... Est. remaining: 71m 6sRunning iteration 871/1500... Est. remaining: 69m 15sRunning iteration 881/1500... Est. remaining: 67m 26sRunning iteration 891/1500... Est. remaining: 65m 39sRunning iteration 901/1500... Est. remaining: 63m 55sbest_combination: {'lookbacks': [136, 153, 178], 'score': np.float64(1.5124645358348219), 'visits': 1}
Running iteration 911/1500... Est. remaining: 62m 12sRunning iteration 921/1500... Est. remaining: 60m 32sRunning iteration 931/1500... Est. remaining: 58m 54sRunning iteration 941/1500... Est. remaining: 57m 18sRunning iteration 951/1500... Est. remaining: 55m 44sRunning iteration 961/1500... Est. remaining: 54m 12sRunning iteration 971/1500... Est. remaining: 52m 41sRunning iteration 981/1500... Est. remaining: 51m 13sRunning iteration 991/1500... Est. remaining: 49m 46sRunning iteration 1001/1500... Est. remaining: 48m 20sbest_combination: {'lookbacks': [136, 153, 178], 'score': np.float64(1.5124645358348219), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 46m 56sRunning iteration 1021/1500... Est. remaining: 45m 34sRunning iteration 1031/1500... Est. remaining: 44m 13sRunning iteration 1041/1500... Est. remaining: 42m 54sRunning iteration 1051/1500... Est. remaining: 41m 36sRunning iteration 1061/1500... Est. remaining: 40m 20sRunning iteration 1071/1500... Est. remaining: 39m 5sRunning iteration 1081/1500... Est. remaining: 37m 51sRunning iteration 1091/1500... Est. remaining: 36m 38sRunning iteration 1101/1500... Est. remaining: 35m 27sbest_combination: {'lookbacks': [136, 153, 178], 'score': np.float64(1.5124645358348219), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 34m 17sRunning iteration 1121/1500... Est. remaining: 33m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,896,021,360
Annual Return: 48.93%
Sharpe Ratio: 1.60999
Sortino Ratio: 1.571
Max Drawdown: -58.5%
Avg Drawdown: -11.0%
Normalized Score: 1.700
Lookback periods: [139, 155, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1131/1500... Est. remaining: 32m 0sRunning iteration 1141/1500... Est. remaining: 30m 54sRunning iteration 1151/1500... Est. remaining: 29m 48sRunning iteration 1161/1500... Est. remaining: 28m 43sRunning iteration 1171/1500... Est. remaining: 27m 40sRunning iteration 1181/1500... Est. remaining: 26m 37sRunning iteration 1191/1500... Est. remaining: 25m 35sRunning iteration 1201/1500... Est. remaining: 24m 35sbest_combination: {'lookbacks': [139, 155, 178], 'score': np.float64(1.699613467080162), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 23m 35sRunning iteration 1221/1500... Est. remaining: 22m 36sRunning iteration 1231/1500... Est. remaining: 21m 38sRunning iteration 1241/1500... Est. remaining: 20m 41sRunning iteration 1251/1500... Est. remaining: 19m 44sRunning iteration 1261/1500... Est. remaining: 18m 49sRunning iteration 1271/1500... Est. remaining: 17m 54sRunning iteration 1281/1500... Est. remaining: 17m 0sRunning iteration 1291/1500... Est. remaining: 16m 7sRunning iteration 1301/1500... Est. remaining: 15m 15sbest_combination: {'lookbacks': [139, 155, 178], 'score': np.float64(1.699613467080162), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 14m 23sRunning iteration 1321/1500... Est. remaining: 13m 32sRunning iteration 1331/1500... Est. remaining: 12m 42sRunning iteration 1341/1500... Est. remaining: 11m 52sRunning iteration 1351/1500... Est. remaining: 11m 3sRunning iteration 1361/1500... Est. remaining: 10m 15sRunning iteration 1371/1500... Est. remaining: 9m 27sRunning iteration 1381/1500... Est. remaining: 8m 40sRunning iteration 1391/1500... Est. remaining: 7m 54sRunning iteration 1401/1500... Est. remaining: 7m 8sbest_combination: {'lookbacks': [139, 155, 178], 'score': np.float64(1.699613467080162), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 6m 23sRunning iteration 1421/1500... Est. remaining: 5m 38sRunning iteration 1431/1500... Est. remaining: 4m 54sRunning iteration 1441/1500... Est. remaining: 4m 10sRunning iteration 1451/1500... Est. remaining: 3m 27sRunning iteration 1461/1500... Est. remaining: 2m 45sRunning iteration 1471/1500... Est. remaining: 2m 3sRunning iteration 1481/1500... Est. remaining: 1m 21sRunning iteration 1491/1500... Est. remaining: 0m 40s
Monte Carlo simulation completed in 100.8 minutes
Best normalized score: 1.70
best_combination: {'lookbacks': [139, 155, 178], 'score': np.float64(1.699613467080162), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 155, 178] (score: 1.6996)

Monte Carlo simulation completed in 100.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 155, 178] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 112 selections (26.9%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 40 selections (9.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,896,021,360.00
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Wed Aug 27 13:58:09 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $997,848,788
Annual Return: 39.39%
Sharpe Ratio: 1.31604
Sortino Ratio: 1.264
Max Drawdown: -62.5%
Avg Drawdown: -14.0%
Normalized Score: -0.605
Lookback periods: [132, 150, 225] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,213,953,934
Annual Return: 40.18%
Sharpe Ratio: 1.33913
Sortino Ratio: 1.280
Max Drawdown: -68.6%
Avg Drawdown: -13.7%
Normalized Score: -0.554
Lookback periods: [124, 160, 249] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,089,164,549
Annual Return: 39.74%
Sharpe Ratio: 1.32399
Sortino Ratio: 1.271
Max Drawdown: -63.2%
Avg Drawdown: -13.1%
Normalized Score: -0.551
Lookback periods: [168, 223, 230] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $658,844,528
Annual Return: 37.73%
Sharpe Ratio: 1.35095
Sortino Ratio: 1.258
Max Drawdown: -52.1%
Avg Drawdown: -10.5%
Normalized Score: -0.470
Lookback periods: [36, 87, 105] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,581,111,787
Annual Return: 41.26%
Sharpe Ratio: 1.34675
Sortino Ratio: 1.296
Max Drawdown: -67.8%
Avg Drawdown: -13.8%
Normalized Score: -0.463
Lookback periods: [179, 216, 220] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 25sRunning iteration 31/1500... Est. remaining: 18m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,720,382,062
Annual Return: 43.48%
Sharpe Ratio: 1.40109
Sortino Ratio: 1.356
Max Drawdown: -64.8%
Avg Drawdown: -11.9%
Normalized Score: -0.114
Lookback periods: [186, 205, 212] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,257,096,687
Annual Return: 44.23%
Sharpe Ratio: 1.44765
Sortino Ratio: 1.398
Max Drawdown: -62.6%
Avg Drawdown: -12.2%
Normalized Score: 0.066
Lookback periods: [154, 156, 243] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 17m 4sRunning iteration 61/1500... Est. remaining: 16m 8sRunning iteration 71/1500... Est. remaining: 15m 29sRunning iteration 81/1500... Est. remaining: 14m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,273,829,314
Annual Return: 44.25%
Sharpe Ratio: 1.46364
Sortino Ratio: 1.426
Max Drawdown: -60.3%
Avg Drawdown: -12.3%
Normalized Score: 0.148
Lookback periods: [137, 168, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 45sRunning iteration 101/1500... Est. remaining: 14m 20sbest_combination: {'lookbacks': [137, 168, 188], 'score': np.float64(0.14841563757496887), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 59sRunning iteration 121/1500... Est. remaining: 13m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,492,101,375
Annual Return: 44.52%
Sharpe Ratio: 1.46535
Sortino Ratio: 1.423
Max Drawdown: -58.5%
Avg Drawdown: -13.0%
Normalized Score: 0.161
Lookback periods: [138, 147, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 35sRunning iteration 141/1500... Est. remaining: 13m 19sRunning iteration 151/1500... Est. remaining: 13m 4sRunning iteration 161/1500... Est. remaining: 12m 51sRunning iteration 171/1500... Est. remaining: 12m 39sRunning iteration 181/1500... Est. remaining: 12m 27sRunning iteration 191/1500... Est. remaining: 12m 16sRunning iteration 201/1500... Est. remaining: 12m 6sbest_combination: {'lookbacks': [138, 147, 184], 'score': np.float64(0.1607772939068484), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 56sRunning iteration 221/1500... Est. remaining: 11m 47sRunning iteration 231/1500... Est. remaining: 11m 39sRunning iteration 241/1500... Est. remaining: 11m 31sRunning iteration 251/1500... Est. remaining: 11m 22sRunning iteration 261/1500... Est. remaining: 11m 14sRunning iteration 271/1500... Est. remaining: 11m 6sRunning iteration 281/1500... Est. remaining: 10m 59sRunning iteration 291/1500... Est. remaining: 10m 51sRunning iteration 301/1500... Est. remaining: 10m 43sbest_combination: {'lookbacks': [138, 147, 184], 'score': np.float64(0.1607772939068484), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 36sRunning iteration 321/1500... Est. remaining: 10m 29sRunning iteration 331/1500... Est. remaining: 10m 22sRunning iteration 341/1500... Est. remaining: 10m 16sRunning iteration 351/1500... Est. remaining: 10m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,978,136,597
Annual Return: 46.01%
Sharpe Ratio: 1.52125
Sortino Ratio: 1.467
Max Drawdown: -57.2%
Avg Drawdown: -11.9%
Normalized Score: 0.416
Lookback periods: [137, 157, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 361/1500... Est. remaining: 10m 6sRunning iteration 371/1500... Est. remaining: 10m 0sRunning iteration 381/1500... Est. remaining: 9m 53sRunning iteration 391/1500... Est. remaining: 9m 47sRunning iteration 401/1500... Est. remaining: 9m 41sbest_combination: {'lookbacks': [137, 157, 180], 'score': np.float64(0.41604153652890885), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 35sRunning iteration 421/1500... Est. remaining: 9m 28sRunning iteration 431/1500... Est. remaining: 9m 22sRunning iteration 441/1500... Est. remaining: 9m 16sRunning iteration 451/1500... Est. remaining: 9m 10sRunning iteration 461/1500... Est. remaining: 9m 4sRunning iteration 471/1500... Est. remaining: 8m 58sRunning iteration 481/1500... Est. remaining: 8m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,331,750,375
Annual Return: 47.02%
Sharpe Ratio: 1.54475
Sortino Ratio: 1.507
Max Drawdown: -58.5%
Avg Drawdown: -11.8%
Normalized Score: 0.549
Lookback periods: [136, 155, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 8m 49sRunning iteration 501/1500... Est. remaining: 8m 43sbest_combination: {'lookbacks': [136, 155, 164], 'score': np.float64(0.5494611385864339), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,297,294,215
Annual Return: 47.00%
Sharpe Ratio: 1.54761
Sortino Ratio: 1.510
Max Drawdown: -58.5%
Avg Drawdown: -12.0%
Normalized Score: 0.553
Lookback periods: [129, 155, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 34sRunning iteration 531/1500... Est. remaining: 8m 28sRunning iteration 541/1500... Est. remaining: 8m 22sRunning iteration 551/1500... Est. remaining: 8m 16sRunning iteration 561/1500... Est. remaining: 8m 11sRunning iteration 571/1500... Est. remaining: 8m 5sRunning iteration 581/1500... Est. remaining: 7m 59sRunning iteration 591/1500... Est. remaining: 7m 53sRunning iteration 601/1500... Est. remaining: 7m 48sbest_combination: {'lookbacks': [129, 155, 165], 'score': np.float64(0.5530028177220756), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 42sRunning iteration 621/1500... Est. remaining: 7m 36sRunning iteration 631/1500... Est. remaining: 7m 31sRunning iteration 641/1500... Est. remaining: 7m 25sRunning iteration 651/1500... Est. remaining: 7m 20sRunning iteration 661/1500... Est. remaining: 7m 14sRunning iteration 671/1500... Est. remaining: 7m 9sRunning iteration 681/1500... Est. remaining: 7m 3sRunning iteration 691/1500... Est. remaining: 6m 57sRunning iteration 701/1500... Est. remaining: 6m 52sbest_combination: {'lookbacks': [129, 155, 165], 'score': np.float64(0.5530028177220756), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 46sRunning iteration 721/1500... Est. remaining: 6m 41sRunning iteration 731/1500... Est. remaining: 6m 36sRunning iteration 741/1500... Est. remaining: 6m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,649,491,918
Annual Return: 47.83%
Sharpe Ratio: 1.58011
Sortino Ratio: 1.547
Max Drawdown: -63.5%
Avg Drawdown: -11.7%
Normalized Score: 0.657
Lookback periods: [134, 152, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 6m 26sRunning iteration 761/1500... Est. remaining: 6m 21sRunning iteration 771/1500... Est. remaining: 6m 15sRunning iteration 781/1500... Est. remaining: 6m 10sRunning iteration 791/1500... Est. remaining: 6m 5sRunning iteration 801/1500... Est. remaining: 5m 59sbest_combination: {'lookbacks': [134, 152, 172], 'score': np.float64(0.657261191103342), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 54sRunning iteration 821/1500... Est. remaining: 5m 49sRunning iteration 831/1500... Est. remaining: 5m 43sRunning iteration 841/1500... Est. remaining: 5m 38sRunning iteration 851/1500... Est. remaining: 5m 33sRunning iteration 861/1500... Est. remaining: 5m 27sRunning iteration 871/1500... Est. remaining: 5m 22sRunning iteration 881/1500... Est. remaining: 5m 17sRunning iteration 891/1500... Est. remaining: 5m 12sRunning iteration 901/1500... Est. remaining: 5m 6sbest_combination: {'lookbacks': [134, 152, 172], 'score': np.float64(0.657261191103342), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 1sRunning iteration 921/1500... Est. remaining: 4m 56sRunning iteration 931/1500... Est. remaining: 4m 51sRunning iteration 941/1500... Est. remaining: 4m 46sRunning iteration 951/1500... Est. remaining: 4m 40sRunning iteration 961/1500... Est. remaining: 4m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,093,773,911
Annual Return: 47.51%
Sharpe Ratio: 1.56025
Sortino Ratio: 1.516
Max Drawdown: -55.0%
Avg Drawdown: -10.8%
Normalized Score: 0.664
Lookback periods: [146, 159, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 971/1500... Est. remaining: 4m 30sRunning iteration 981/1500... Est. remaining: 4m 25sRunning iteration 991/1500... Est. remaining: 4m 20sRunning iteration 1001/1500... Est. remaining: 4m 15sbest_combination: {'lookbacks': [146, 159, 171], 'score': np.float64(0.6639554277551085), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,032,057,111
Annual Return: 48.04%
Sharpe Ratio: 1.56963
Sortino Ratio: 1.534
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.695
Lookback periods: [136, 158, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 4m 10sRunning iteration 1021/1500... Est. remaining: 4m 5sRunning iteration 1031/1500... Est. remaining: 4m 0sRunning iteration 1041/1500... Est. remaining: 3m 55sRunning iteration 1051/1500... Est. remaining: 3m 49sRunning iteration 1061/1500... Est. remaining: 3m 44sRunning iteration 1071/1500... Est. remaining: 3m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,483,501,917
Annual Return: 49.57%
Sharpe Ratio: 1.62943
Sortino Ratio: 1.594
Max Drawdown: -58.5%
Avg Drawdown: -10.8%
Normalized Score: 0.950
Lookback periods: [139, 155, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1081/1500... Est. remaining: 3m 34sRunning iteration 1091/1500... Est. remaining: 3m 29sRunning iteration 1101/1500... Est. remaining: 3m 24sbest_combination: {'lookbacks': [139, 155, 179], 'score': np.float64(0.9502126123474893), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 19sRunning iteration 1121/1500... Est. remaining: 3m 14sRunning iteration 1131/1500... Est. remaining: 3m 8sRunning iteration 1141/1500... Est. remaining: 3m 3sRunning iteration 1151/1500... Est. remaining: 2m 58sRunning iteration 1161/1500... Est. remaining: 2m 53sRunning iteration 1171/1500... Est. remaining: 2m 48sRunning iteration 1181/1500... Est. remaining: 2m 43sRunning iteration 1191/1500... Est. remaining: 2m 37sRunning iteration 1201/1500... Est. remaining: 2m 32sbest_combination: {'lookbacks': [139, 155, 179], 'score': np.float64(0.9502126123474893), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 27sRunning iteration 1221/1500... Est. remaining: 2m 22sRunning iteration 1231/1500... Est. remaining: 2m 17sRunning iteration 1241/1500... Est. remaining: 2m 12sRunning iteration 1251/1500... Est. remaining: 2m 7sRunning iteration 1261/1500... Est. remaining: 2m 2sRunning iteration 1271/1500... Est. remaining: 1m 56sRunning iteration 1281/1500... Est. remaining: 1m 51sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [139, 155, 179], 'score': np.float64(0.9502126123474893), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 36sRunning iteration 1321/1500... Est. remaining: 1m 31sRunning iteration 1331/1500... Est. remaining: 1m 26sRunning iteration 1341/1500... Est. remaining: 1m 21sRunning iteration 1351/1500... Est. remaining: 1m 16sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [139, 155, 179], 'score': np.float64(0.9502126123474893), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.6 minutes
Best normalized score: 0.95
best_combination: {'lookbacks': [139, 155, 179], 'score': np.float64(0.9502126123474893), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 155, 179] (score: 0.9502)

Monte Carlo simulation completed in 12.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 155, 179] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 111 selections (26.7%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,483,501,916.65
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Wed Aug 27 14:10:55 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $137,544,093
Annual Return: 31.65%
Sharpe Ratio: 1.13260
Sortino Ratio: 1.036
Max Drawdown: -52.3%
Avg Drawdown: -12.2%
Normalized Score: -1.417
Lookback periods: [77, 92, 254] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $435,105,277
Annual Return: 36.09%
Sharpe Ratio: 1.23572
Sortino Ratio: 1.173
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: -0.899
Lookback periods: [97, 272, 273] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,522,090,995
Annual Return: 41.10%
Sharpe Ratio: 1.36578
Sortino Ratio: 1.317
Max Drawdown: -69.1%
Avg Drawdown: -12.4%
Normalized Score: -0.379
Lookback periods: [243, 249, 259] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,449,223,308
Annual Return: 43.05%
Sharpe Ratio: 1.39040
Sortino Ratio: 1.342
Max Drawdown: -63.9%
Avg Drawdown: -11.9%
Normalized Score: -0.163
Lookback periods: [186, 201, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,558,678,384
Annual Return: 43.23%
Sharpe Ratio: 1.41873
Sortino Ratio: 1.368
Max Drawdown: -64.9%
Avg Drawdown: -12.5%
Normalized Score: -0.105
Lookback periods: [157, 189, 288] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,064,936,268
Annual Return: 46.08%
Sharpe Ratio: 1.49674
Sortino Ratio: 1.460
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.360
Lookback periods: [155, 166, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 51sRunning iteration 41/1500... Est. remaining: 17m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,087,559,449
Annual Return: 47.50%
Sharpe Ratio: 1.56783
Sortino Ratio: 1.532
Max Drawdown: -56.6%
Avg Drawdown: -12.2%
Normalized Score: 0.609
Lookback periods: [131, 133, 135] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 16m 53sRunning iteration 61/1500... Est. remaining: 16m 0sRunning iteration 71/1500... Est. remaining: 15m 16sRunning iteration 81/1500... Est. remaining: 14m 43sRunning iteration 91/1500... Est. remaining: 14m 14sRunning iteration 101/1500... Est. remaining: 13m 52sbest_combination: {'lookbacks': [131, 133, 135], 'score': np.float64(0.608663367172942), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 32sRunning iteration 121/1500... Est. remaining: 13m 14sRunning iteration 131/1500... Est. remaining: 12m 59sRunning iteration 141/1500... Est. remaining: 12m 46sRunning iteration 151/1500... Est. remaining: 12m 33sRunning iteration 161/1500... Est. remaining: 12m 22sRunning iteration 171/1500... Est. remaining: 12m 11sRunning iteration 181/1500... Est. remaining: 12m 1sRunning iteration 191/1500... Est. remaining: 11m 51sRunning iteration 201/1500... Est. remaining: 11m 42sbest_combination: {'lookbacks': [131, 133, 135], 'score': np.float64(0.608663367172942), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 34sRunning iteration 221/1500... Est. remaining: 11m 26sRunning iteration 231/1500... Est. remaining: 11m 17sRunning iteration 241/1500... Est. remaining: 11m 10sRunning iteration 251/1500... Est. remaining: 11m 2sRunning iteration 261/1500... Est. remaining: 10m 55sRunning iteration 271/1500... Est. remaining: 10m 48sRunning iteration 281/1500... Est. remaining: 10m 41sRunning iteration 291/1500... Est. remaining: 10m 34sRunning iteration 301/1500... Est. remaining: 10m 27sbest_combination: {'lookbacks': [131, 133, 135], 'score': np.float64(0.608663367172942), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 21sRunning iteration 321/1500... Est. remaining: 10m 14sRunning iteration 331/1500... Est. remaining: 10m 7sRunning iteration 341/1500... Est. remaining: 10m 1sRunning iteration 351/1500... Est. remaining: 9m 55sRunning iteration 361/1500... Est. remaining: 9m 48sRunning iteration 371/1500... Est. remaining: 9m 42sRunning iteration 381/1500... Est. remaining: 9m 36sRunning iteration 391/1500... Est. remaining: 9m 30sRunning iteration 401/1500... Est. remaining: 9m 25sbest_combination: {'lookbacks': [131, 133, 135], 'score': np.float64(0.608663367172942), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 19sRunning iteration 421/1500... Est. remaining: 9m 13sRunning iteration 431/1500... Est. remaining: 9m 7sRunning iteration 441/1500... Est. remaining: 9m 1sRunning iteration 451/1500... Est. remaining: 8m 56sRunning iteration 461/1500... Est. remaining: 8m 50sRunning iteration 471/1500... Est. remaining: 8m 45sRunning iteration 481/1500... Est. remaining: 8m 39sRunning iteration 491/1500... Est. remaining: 8m 34sRunning iteration 501/1500... Est. remaining: 8m 28sbest_combination: {'lookbacks': [131, 133, 135], 'score': np.float64(0.608663367172942), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 23sRunning iteration 521/1500... Est. remaining: 8m 17sRunning iteration 531/1500... Est. remaining: 8m 12sRunning iteration 541/1500... Est. remaining: 8m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,077,303,633
Annual Return: 49.01%
Sharpe Ratio: 1.60306
Sortino Ratio: 1.570
Max Drawdown: -55.0%
Avg Drawdown: -11.9%
Normalized Score: 0.802
Lookback periods: [130, 131, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 3sRunning iteration 561/1500... Est. remaining: 7m 57sRunning iteration 571/1500... Est. remaining: 7m 52sRunning iteration 581/1500... Est. remaining: 7m 46sRunning iteration 591/1500... Est. remaining: 7m 41sRunning iteration 601/1500... Est. remaining: 7m 35sbest_combination: {'lookbacks': [130, 131, 136], 'score': np.float64(0.8020103198792479), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 30sRunning iteration 621/1500... Est. remaining: 7m 25sRunning iteration 631/1500... Est. remaining: 7m 19sRunning iteration 641/1500... Est. remaining: 7m 14sRunning iteration 651/1500... Est. remaining: 7m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,634,581,689
Annual Return: 49.24%
Sharpe Ratio: 1.60728
Sortino Ratio: 1.577
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: 0.835
Lookback periods: [130, 130, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 5sRunning iteration 671/1500... Est. remaining: 7m 0sRunning iteration 681/1500... Est. remaining: 6m 55sRunning iteration 691/1500... Est. remaining: 6m 49sRunning iteration 701/1500... Est. remaining: 6m 44sbest_combination: {'lookbacks': [130, 130, 136], 'score': np.float64(0.835371678092453), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 39sRunning iteration 721/1500... Est. remaining: 6m 34sRunning iteration 731/1500... Est. remaining: 6m 28sRunning iteration 741/1500... Est. remaining: 6m 23sRunning iteration 751/1500... Est. remaining: 6m 18sRunning iteration 761/1500... Est. remaining: 6m 13sRunning iteration 771/1500... Est. remaining: 6m 8sRunning iteration 781/1500... Est. remaining: 6m 3sRunning iteration 791/1500... Est. remaining: 5m 57sRunning iteration 801/1500... Est. remaining: 5m 52sbest_combination: {'lookbacks': [130, 130, 136], 'score': np.float64(0.835371678092453), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 47sRunning iteration 821/1500... Est. remaining: 5m 42sRunning iteration 831/1500... Est. remaining: 5m 37sRunning iteration 841/1500... Est. remaining: 5m 32sRunning iteration 851/1500... Est. remaining: 5m 27sRunning iteration 861/1500... Est. remaining: 5m 21sRunning iteration 871/1500... Est. remaining: 5m 16sRunning iteration 881/1500... Est. remaining: 5m 11sRunning iteration 891/1500... Est. remaining: 5m 6sRunning iteration 901/1500... Est. remaining: 5m 1sbest_combination: {'lookbacks': [130, 130, 136], 'score': np.float64(0.835371678092453), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 56sRunning iteration 921/1500... Est. remaining: 4m 51sRunning iteration 931/1500... Est. remaining: 4m 45sRunning iteration 941/1500... Est. remaining: 4m 40sRunning iteration 951/1500... Est. remaining: 4m 35sRunning iteration 961/1500... Est. remaining: 4m 30sRunning iteration 971/1500... Est. remaining: 4m 25sRunning iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 15sRunning iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [130, 130, 136], 'score': np.float64(0.835371678092453), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 5sRunning iteration 1021/1500... Est. remaining: 4m 0sRunning iteration 1031/1500... Est. remaining: 3m 55sRunning iteration 1041/1500... Est. remaining: 3m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $13,791,822,540
Annual Return: 50.36%
Sharpe Ratio: 1.63803
Sortino Ratio: 1.613
Max Drawdown: -55.0%
Avg Drawdown: -11.6%
Normalized Score: 0.988
Lookback periods: [129, 130, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1051/1500... Est. remaining: 3m 45sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [129, 130, 130], 'score': np.float64(0.9880971921881615), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 4m 26sRunning iteration 1131/1500... Est. remaining: 4m 18sRunning iteration 1141/1500... Est. remaining: 4m 10sRunning iteration 1151/1500... Est. remaining: 4m 3sRunning iteration 1161/1500... Est. remaining: 3m 55sRunning iteration 1171/1500... Est. remaining: 3m 48sRunning iteration 1181/1500... Est. remaining: 3m 40sRunning iteration 1191/1500... Est. remaining: 3m 33sRunning iteration 1201/1500... Est. remaining: 3m 25sbest_combination: {'lookbacks': [129, 130, 130], 'score': np.float64(0.9880971921881615), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 18sRunning iteration 1221/1500... Est. remaining: 3m 11sRunning iteration 1231/1500... Est. remaining: 3m 4sRunning iteration 1241/1500... Est. remaining: 2m 56sRunning iteration 1251/1500... Est. remaining: 2m 49sRunning iteration 1261/1500... Est. remaining: 2m 42sRunning iteration 1271/1500... Est. remaining: 2m 35sRunning iteration 1281/1500... Est. remaining: 2m 28sRunning iteration 1291/1500... Est. remaining: 2m 21sRunning iteration 1301/1500... Est. remaining: 2m 14sbest_combination: {'lookbacks': [129, 130, 130], 'score': np.float64(0.9880971921881615), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 7sRunning iteration 1321/1500... Est. remaining: 2m 0sRunning iteration 1331/1500... Est. remaining: 1m 53sRunning iteration 1341/1500... Est. remaining: 1m 46sRunning iteration 1351/1500... Est. remaining: 1m 39sRunning iteration 1361/1500... Est. remaining: 1m 32sRunning iteration 1371/1500... Est. remaining: 1m 26sRunning iteration 1381/1500... Est. remaining: 1m 19sRunning iteration 1391/1500... Est. remaining: 1m 12sRunning iteration 1401/1500... Est. remaining: 1m 5sbest_combination: {'lookbacks': [129, 130, 130], 'score': np.float64(0.9880971921881615), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 59sRunning iteration 1421/1500... Est. remaining: 0m 52sRunning iteration 1431/1500... Est. remaining: 0m 45sRunning iteration 1441/1500... Est. remaining: 0m 39sRunning iteration 1451/1500... Est. remaining: 0m 32sRunning iteration 1461/1500... Est. remaining: 0m 26sRunning iteration 1471/1500... Est. remaining: 0m 19sRunning iteration 1481/1500... Est. remaining: 0m 12sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 16.2 minutes
Best normalized score: 0.99
best_combination: {'lookbacks': [129, 130, 130], 'score': np.float64(0.9880971921881615), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [129, 130, 130] (score: 0.9881)

Monte Carlo simulation completed in 16.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [129, 130, 130] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 106 selections (25.5%)
3. naz100_pi: 90 selections (21.6%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $13,791,822,539.82
Average Annualized Gain: 50.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Wed Aug 27 14:27:13 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $90,605,251
Annual Return: 30.07%
Sharpe Ratio: 1.12168
Sortino Ratio: 1.007
Max Drawdown: -59.3%
Avg Drawdown: -14.3%
Normalized Score: -2.735
Lookback periods: [27, 71, 129] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $377,440,307
Annual Return: 35.54%
Sharpe Ratio: 1.21537
Sortino Ratio: 1.137
Max Drawdown: -62.6%
Avg Drawdown: -14.0%
Normalized Score: -1.893
Lookback periods: [112, 141, 254] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,017,970,098
Annual Return: 42.25%
Sharpe Ratio: 1.37472
Sortino Ratio: 1.336
Max Drawdown: -67.8%
Avg Drawdown: -13.6%
Normalized Score: -0.618
Lookback periods: [175, 196, 287] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,807,216,793
Annual Return: 43.61%
Sharpe Ratio: 1.44671
Sortino Ratio: 1.395
Max Drawdown: -61.7%
Avg Drawdown: -11.8%
Normalized Score: -0.056
Lookback periods: [194, 249, 266] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,863,299,298
Annual Return: 43.70%
Sharpe Ratio: 1.44769
Sortino Ratio: 1.395
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: -0.017
Lookback periods: [196, 255, 293] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 18sRunning iteration 31/1500... Est. remaining: 18m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,796,710,464
Annual Return: 45.85%
Sharpe Ratio: 1.50639
Sortino Ratio: 1.460
Max Drawdown: -62.5%
Avg Drawdown: -12.5%
Normalized Score: 0.373
Lookback periods: [134, 194, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 38sRunning iteration 51/1500... Est. remaining: 16m 24sRunning iteration 61/1500... Est. remaining: 15m 35sRunning iteration 71/1500... Est. remaining: 14m 57sRunning iteration 81/1500... Est. remaining: 14m 25sRunning iteration 91/1500... Est. remaining: 13m 58sRunning iteration 101/1500... Est. remaining: 13m 38sbest_combination: {'lookbacks': [134, 194, 203], 'score': np.float64(0.3729616004887307), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 20sRunning iteration 121/1500... Est. remaining: 13m 4sRunning iteration 131/1500... Est. remaining: 12m 50sRunning iteration 141/1500... Est. remaining: 12m 37sRunning iteration 151/1500... Est. remaining: 12m 26sRunning iteration 161/1500... Est. remaining: 12m 14sRunning iteration 171/1500... Est. remaining: 12m 4sRunning iteration 181/1500... Est. remaining: 11m 55sRunning iteration 191/1500... Est. remaining: 11m 46sRunning iteration 201/1500... Est. remaining: 11m 38sbest_combination: {'lookbacks': [134, 194, 203], 'score': np.float64(0.3729616004887307), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 30sRunning iteration 221/1500... Est. remaining: 11m 22sRunning iteration 231/1500... Est. remaining: 11m 14sRunning iteration 241/1500... Est. remaining: 11m 7sRunning iteration 251/1500... Est. remaining: 11m 0sRunning iteration 261/1500... Est. remaining: 10m 52sRunning iteration 271/1500... Est. remaining: 10m 46sRunning iteration 281/1500... Est. remaining: 10m 39sRunning iteration 291/1500... Est. remaining: 10m 32sRunning iteration 301/1500... Est. remaining: 10m 25sbest_combination: {'lookbacks': [134, 194, 203], 'score': np.float64(0.3729616004887307), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 19sRunning iteration 321/1500... Est. remaining: 10m 12sRunning iteration 331/1500... Est. remaining: 10m 6sRunning iteration 341/1500... Est. remaining: 10m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,936,033,416
Annual Return: 45.97%
Sharpe Ratio: 1.52775
Sortino Ratio: 1.481
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.556
Lookback periods: [139, 151, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 351/1500... Est. remaining: 9m 58sRunning iteration 361/1500... Est. remaining: 9m 52sRunning iteration 371/1500... Est. remaining: 9m 46sRunning iteration 381/1500... Est. remaining: 9m 41sRunning iteration 391/1500... Est. remaining: 9m 35sRunning iteration 401/1500... Est. remaining: 9m 28sbest_combination: {'lookbacks': [139, 151, 156], 'score': np.float64(0.5561935842766281), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,226,241,590
Annual Return: 47.59%
Sharpe Ratio: 1.55220
Sortino Ratio: 1.520
Max Drawdown: -68.6%
Avg Drawdown: -11.3%
Normalized Score: 0.739
Lookback periods: [146, 155, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 20sRunning iteration 431/1500... Est. remaining: 9m 14sRunning iteration 441/1500... Est. remaining: 9m 8sRunning iteration 451/1500... Est. remaining: 9m 2sRunning iteration 461/1500... Est. remaining: 8m 57sRunning iteration 471/1500... Est. remaining: 8m 51sRunning iteration 481/1500... Est. remaining: 8m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,406,423,450
Annual Return: 48.23%
Sharpe Ratio: 1.58323
Sortino Ratio: 1.550
Max Drawdown: -59.7%
Avg Drawdown: -12.1%
Normalized Score: 0.976
Lookback periods: [136, 151, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 8m 42sRunning iteration 501/1500... Est. remaining: 8m 37sbest_combination: {'lookbacks': [136, 151, 168], 'score': np.float64(0.9759608254023471), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 31sRunning iteration 521/1500... Est. remaining: 8m 25sRunning iteration 531/1500... Est. remaining: 8m 20sRunning iteration 541/1500... Est. remaining: 8m 14sRunning iteration 551/1500... Est. remaining: 8m 9sRunning iteration 561/1500... Est. remaining: 8m 3sRunning iteration 571/1500... Est. remaining: 7m 58sRunning iteration 581/1500... Est. remaining: 7m 52sRunning iteration 591/1500... Est. remaining: 7m 47sRunning iteration 601/1500... Est. remaining: 7m 42sbest_combination: {'lookbacks': [136, 151, 168], 'score': np.float64(0.9759608254023471), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 36sRunning iteration 621/1500... Est. remaining: 7m 31sRunning iteration 631/1500... Est. remaining: 7m 25sRunning iteration 641/1500... Est. remaining: 7m 20sRunning iteration 651/1500... Est. remaining: 7m 15sRunning iteration 661/1500... Est. remaining: 7m 9sRunning iteration 671/1500... Est. remaining: 7m 4sRunning iteration 681/1500... Est. remaining: 6m 59sRunning iteration 691/1500... Est. remaining: 6m 54sRunning iteration 701/1500... Est. remaining: 6m 49sbest_combination: {'lookbacks': [136, 151, 168], 'score': np.float64(0.9759608254023471), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 43sRunning iteration 721/1500... Est. remaining: 6m 38sRunning iteration 731/1500... Est. remaining: 6m 33sRunning iteration 741/1500... Est. remaining: 6m 27sRunning iteration 751/1500... Est. remaining: 6m 22sRunning iteration 761/1500... Est. remaining: 6m 17sRunning iteration 771/1500... Est. remaining: 6m 11sRunning iteration 781/1500... Est. remaining: 6m 6sRunning iteration 791/1500... Est. remaining: 6m 1sRunning iteration 801/1500... Est. remaining: 5m 56sbest_combination: {'lookbacks': [136, 151, 168], 'score': np.float64(0.9759608254023471), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 51sRunning iteration 821/1500... Est. remaining: 5m 46sRunning iteration 831/1500... Est. remaining: 5m 40sRunning iteration 841/1500... Est. remaining: 5m 35sRunning iteration 851/1500... Est. remaining: 5m 30sRunning iteration 861/1500... Est. remaining: 5m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,586,125,305
Annual Return: 48.32%
Sharpe Ratio: 1.59370
Sortino Ratio: 1.563
Max Drawdown: -60.1%
Avg Drawdown: -11.4%
Normalized Score: 1.065
Lookback periods: [140, 153, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 871/1500... Est. remaining: 5m 20sRunning iteration 881/1500... Est. remaining: 5m 15sRunning iteration 891/1500... Est. remaining: 5m 10sRunning iteration 901/1500... Est. remaining: 5m 5sbest_combination: {'lookbacks': [140, 153, 158], 'score': np.float64(1.0652329782229526), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 0sRunning iteration 921/1500... Est. remaining: 4m 54sRunning iteration 931/1500... Est. remaining: 4m 49sRunning iteration 941/1500... Est. remaining: 4m 44sRunning iteration 951/1500... Est. remaining: 4m 39sRunning iteration 961/1500... Est. remaining: 4m 34sRunning iteration 971/1500... Est. remaining: 4m 29sRunning iteration 981/1500... Est. remaining: 4m 24sRunning iteration 991/1500... Est. remaining: 4m 19sRunning iteration 1001/1500... Est. remaining: 4m 13sbest_combination: {'lookbacks': [140, 153, 158], 'score': np.float64(1.0652329782229526), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 8sRunning iteration 1021/1500... Est. remaining: 4m 3sRunning iteration 1031/1500... Est. remaining: 3m 58sRunning iteration 1041/1500... Est. remaining: 3m 53sRunning iteration 1051/1500... Est. remaining: 3m 48sRunning iteration 1061/1500... Est. remaining: 3m 43sRunning iteration 1071/1500... Est. remaining: 3m 38sRunning iteration 1081/1500... Est. remaining: 3m 33sRunning iteration 1091/1500... Est. remaining: 3m 27sRunning iteration 1101/1500... Est. remaining: 3m 22sbest_combination: {'lookbacks': [140, 153, 158], 'score': np.float64(1.0652329782229526), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 17sRunning iteration 1121/1500... Est. remaining: 3m 12sRunning iteration 1131/1500... Est. remaining: 3m 7sRunning iteration 1141/1500... Est. remaining: 3m 2sRunning iteration 1151/1500... Est. remaining: 2m 57sRunning iteration 1161/1500... Est. remaining: 2m 52sRunning iteration 1171/1500... Est. remaining: 2m 47sRunning iteration 1181/1500... Est. remaining: 2m 42sRunning iteration 1191/1500... Est. remaining: 2m 36sRunning iteration 1201/1500... Est. remaining: 2m 31sbest_combination: {'lookbacks': [140, 153, 158], 'score': np.float64(1.0652329782229526), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 26sRunning iteration 1221/1500... Est. remaining: 2m 21sRunning iteration 1231/1500... Est. remaining: 2m 16sRunning iteration 1241/1500... Est. remaining: 2m 11sRunning iteration 1251/1500... Est. remaining: 2m 6sRunning iteration 1261/1500... Est. remaining: 2m 1sRunning iteration 1271/1500... Est. remaining: 1m 56sRunning iteration 1281/1500... Est. remaining: 1m 51sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [140, 153, 158], 'score': np.float64(1.0652329782229526), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 36sRunning iteration 1321/1500... Est. remaining: 1m 31sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,093,171,924
Annual Return: 48.57%
Sharpe Ratio: 1.60004
Sortino Ratio: 1.559
Max Drawdown: -57.2%
Avg Drawdown: -10.7%
Normalized Score: 1.145
Lookback periods: [136, 156, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [136, 156, 158], 'score': np.float64(1.1450025893353355), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,217,545,337
Annual Return: 48.63%
Sharpe Ratio: 1.60868
Sortino Ratio: 1.567
Max Drawdown: -57.2%
Avg Drawdown: -11.6%
Normalized Score: 1.164
Lookback periods: [139, 148, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.6 minutes
Best normalized score: 1.16
best_combination: {'lookbacks': [139, 148, 156], 'score': np.float64(1.163712574112516), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 148, 156] (score: 1.1637)

Monte Carlo simulation completed in 12.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 148, 156] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 113 selections (27.2%)
2. naz100_hma: 107 selections (25.7%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 40 selections (9.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,217,545,336.73
Average Annualized Gain: 48.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Wed Aug 27 14:39:59 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $280,734,057
Annual Return: 34.38%
Sharpe Ratio: 1.17712
Sortino Ratio: 1.090
Max Drawdown: -70.5%
Avg Drawdown: -12.9%
Normalized Score: -2.399
Lookback periods: [39, 182, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,427,112,368
Annual Return: 40.84%
Sharpe Ratio: 1.36792
Sortino Ratio: 1.309
Max Drawdown: -63.4%
Avg Drawdown: -13.4%
Normalized Score: -0.667
Lookback periods: [109, 132, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,570,196,850
Annual Return: 41.23%
Sharpe Ratio: 1.35848
Sortino Ratio: 1.318
Max Drawdown: -66.0%
Avg Drawdown: -13.5%
Normalized Score: -0.638
Lookback periods: [130, 163, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,683,762,790
Annual Return: 41.51%
Sharpe Ratio: 1.38644
Sortino Ratio: 1.326
Max Drawdown: -67.7%
Avg Drawdown: -13.0%
Normalized Score: -0.535
Lookback periods: [96, 156, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,943,316,094
Annual Return: 43.81%
Sharpe Ratio: 1.45242
Sortino Ratio: 1.405
Max Drawdown: -66.4%
Avg Drawdown: -12.9%
Normalized Score: 0.084
Lookback periods: [108, 181, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 54sRunning iteration 31/1500... Est. remaining: 19m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,272,241,240
Annual Return: 45.37%
Sharpe Ratio: 1.48679
Sortino Ratio: 1.437
Max Drawdown: -65.3%
Avg Drawdown: -13.5%
Normalized Score: 0.362
Lookback periods: [148, 148, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 6sRunning iteration 51/1500... Est. remaining: 16m 47sRunning iteration 61/1500... Est. remaining: 15m 54sRunning iteration 71/1500... Est. remaining: 15m 13sRunning iteration 81/1500... Est. remaining: 14m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,175,345,337
Annual Return: 44.13%
Sharpe Ratio: 1.60027
Sortino Ratio: 1.503
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.191
Lookback periods: [47, 52, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 31sRunning iteration 101/1500... Est. remaining: 14m 7sbest_combination: {'lookbacks': [47, 52, 88], 'score': np.float64(1.1912605609955242), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 47sRunning iteration 121/1500... Est. remaining: 13m 31sRunning iteration 131/1500... Est. remaining: 13m 15sRunning iteration 141/1500... Est. remaining: 13m 1sRunning iteration 151/1500... Est. remaining: 12m 48sRunning iteration 161/1500... Est. remaining: 12m 36sRunning iteration 171/1500... Est. remaining: 12m 25sRunning iteration 181/1500... Est. remaining: 12m 15sRunning iteration 191/1500... Est. remaining: 12m 5sRunning iteration 201/1500... Est. remaining: 11m 56sbest_combination: {'lookbacks': [47, 52, 88], 'score': np.float64(1.1912605609955242), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 48sRunning iteration 221/1500... Est. remaining: 11m 40sRunning iteration 231/1500... Est. remaining: 11m 32sRunning iteration 241/1500... Est. remaining: 11m 24sRunning iteration 251/1500... Est. remaining: 11m 16sRunning iteration 261/1500... Est. remaining: 11m 8sRunning iteration 271/1500... Est. remaining: 11m 1sRunning iteration 281/1500... Est. remaining: 10m 54sRunning iteration 291/1500... Est. remaining: 10m 47sRunning iteration 301/1500... Est. remaining: 10m 39sbest_combination: {'lookbacks': [47, 52, 88], 'score': np.float64(1.1912605609955242), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 32sRunning iteration 321/1500... Est. remaining: 10m 25sRunning iteration 331/1500... Est. remaining: 10m 18sRunning iteration 341/1500... Est. remaining: 10m 12sRunning iteration 351/1500... Est. remaining: 10m 5sRunning iteration 361/1500... Est. remaining: 9m 59sRunning iteration 371/1500... Est. remaining: 9m 53sRunning iteration 381/1500... Est. remaining: 9m 47sRunning iteration 391/1500... Est. remaining: 9m 40sRunning iteration 401/1500... Est. remaining: 9m 34sbest_combination: {'lookbacks': [47, 52, 88], 'score': np.float64(1.1912605609955242), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 28sRunning iteration 421/1500... Est. remaining: 9m 22sRunning iteration 431/1500... Est. remaining: 9m 16sRunning iteration 441/1500... Est. remaining: 9m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,220,458,008
Annual Return: 44.18%
Sharpe Ratio: 1.60807
Sortino Ratio: 1.511
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.248
Lookback periods: [47, 51, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 7sRunning iteration 461/1500... Est. remaining: 9m 1sRunning iteration 471/1500... Est. remaining: 8m 55sRunning iteration 481/1500... Est. remaining: 8m 49sRunning iteration 491/1500... Est. remaining: 8m 43sRunning iteration 501/1500... Est. remaining: 8m 37sbest_combination: {'lookbacks': [47, 51, 96], 'score': np.float64(1.2478230976455431), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 32sRunning iteration 521/1500... Est. remaining: 8m 26sRunning iteration 531/1500... Est. remaining: 8m 20sRunning iteration 541/1500... Est. remaining: 8m 15sRunning iteration 551/1500... Est. remaining: 8m 9sRunning iteration 561/1500... Est. remaining: 8m 3sRunning iteration 571/1500... Est. remaining: 7m 57sRunning iteration 581/1500... Est. remaining: 7m 52sRunning iteration 591/1500... Est. remaining: 7m 46sRunning iteration 601/1500... Est. remaining: 7m 41sbest_combination: {'lookbacks': [47, 51, 96], 'score': np.float64(1.2478230976455431), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 35sRunning iteration 621/1500... Est. remaining: 7m 30sRunning iteration 631/1500... Est. remaining: 7m 24sRunning iteration 641/1500... Est. remaining: 7m 19sRunning iteration 651/1500... Est. remaining: 7m 13sRunning iteration 661/1500... Est. remaining: 7m 8sRunning iteration 671/1500... Est. remaining: 7m 3sRunning iteration 681/1500... Est. remaining: 6m 57sRunning iteration 691/1500... Est. remaining: 6m 52sRunning iteration 701/1500... Est. remaining: 6m 47sbest_combination: {'lookbacks': [47, 51, 96], 'score': np.float64(1.2478230976455431), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 41sRunning iteration 721/1500... Est. remaining: 6m 36sRunning iteration 731/1500... Est. remaining: 6m 31sRunning iteration 741/1500... Est. remaining: 6m 25sRunning iteration 751/1500... Est. remaining: 6m 20sRunning iteration 761/1500... Est. remaining: 6m 15sRunning iteration 771/1500... Est. remaining: 6m 10sRunning iteration 781/1500... Est. remaining: 6m 4sRunning iteration 791/1500... Est. remaining: 5m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,914,034,326
Annual Return: 45.00%
Sharpe Ratio: 1.63017
Sortino Ratio: 1.536
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.453
Lookback periods: [48, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 801/1500... Est. remaining: 5m 55sbest_combination: {'lookbacks': [48, 50, 96], 'score': np.float64(1.452795834091904), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 50sRunning iteration 821/1500... Est. remaining: 5m 44sRunning iteration 831/1500... Est. remaining: 5m 39sRunning iteration 841/1500... Est. remaining: 5m 34sRunning iteration 851/1500... Est. remaining: 5m 29sRunning iteration 861/1500... Est. remaining: 5m 24sRunning iteration 871/1500... Est. remaining: 5m 18sRunning iteration 881/1500... Est. remaining: 5m 13sRunning iteration 891/1500... Est. remaining: 5m 8sRunning iteration 901/1500... Est. remaining: 5m 3sbest_combination: {'lookbacks': [48, 50, 96], 'score': np.float64(1.452795834091904), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 58sRunning iteration 921/1500... Est. remaining: 4m 52sRunning iteration 931/1500... Est. remaining: 4m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,236,710,918
Annual Return: 46.22%
Sharpe Ratio: 1.66334
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.782
Lookback periods: [46, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 4m 43sRunning iteration 951/1500... Est. remaining: 4m 38sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 17sRunning iteration 1001/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [46, 52, 95], 'score': np.float64(1.781988729011437), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 7sRunning iteration 1021/1500... Est. remaining: 4m 2sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 21sbest_combination: {'lookbacks': [46, 52, 95], 'score': np.float64(1.781988729011437), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [46, 52, 95], 'score': np.float64(1.781988729011437), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [46, 52, 95], 'score': np.float64(1.781988729011437), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [46, 52, 95], 'score': np.float64(1.781988729011437), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.78
best_combination: {'lookbacks': [46, 52, 95], 'score': np.float64(1.781988729011437), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [46, 52, 95] (score: 1.7820)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [46, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 81 selections (19.5%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 54 selections (13.0%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,236,710,918.02
Average Annualized Gain: 46.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Wed Aug 27 14:52:33 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $303,704,009
Annual Return: 34.69%
Sharpe Ratio: 1.23425
Sortino Ratio: 1.149
Max Drawdown: -51.1%
Avg Drawdown: -12.7%
Normalized Score: -3.457
Lookback periods: [26, 289, 289] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $754,458,528
Annual Return: 38.27%
Sharpe Ratio: 1.27274
Sortino Ratio: 1.215
Max Drawdown: -75.8%
Avg Drawdown: -14.5%
Normalized Score: -2.945
Lookback periods: [205, 266, 271] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $971,651,361
Annual Return: 39.28%
Sharpe Ratio: 1.29903
Sortino Ratio: 1.243
Max Drawdown: -71.5%
Avg Drawdown: -14.9%
Normalized Score: -2.461
Lookback periods: [274, 283, 294] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $926,754,315
Annual Return: 39.09%
Sharpe Ratio: 1.29335
Sortino Ratio: 1.248
Max Drawdown: -68.2%
Avg Drawdown: -13.6%
Normalized Score: -2.396
Lookback periods: [151, 213, 261] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,828,460,788
Annual Return: 41.85%
Sharpe Ratio: 1.38002
Sortino Ratio: 1.344
Max Drawdown: -69.0%
Avg Drawdown: -12.3%
Normalized Score: -1.300
Lookback periods: [114, 173, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,524,643,739
Annual Return: 45.61%
Sharpe Ratio: 1.47129
Sortino Ratio: 1.438
Max Drawdown: -63.8%
Avg Drawdown: -11.9%
Normalized Score: 0.233
Lookback periods: [175, 192, 229] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 52sRunning iteration 31/1500... Est. remaining: 19m 44sRunning iteration 41/1500... Est. remaining: 17m 36sRunning iteration 51/1500... Est. remaining: 16m 19sRunning iteration 61/1500... Est. remaining: 15m 26sRunning iteration 71/1500... Est. remaining: 14m 48sRunning iteration 81/1500... Est. remaining: 14m 20sRunning iteration 91/1500... Est. remaining: 13m 56sRunning iteration 101/1500... Est. remaining: 13m 35sbest_combination: {'lookbacks': [175, 192, 229], 'score': np.float64(0.23274941974185026), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 16sRunning iteration 121/1500... Est. remaining: 13m 0sRunning iteration 131/1500... Est. remaining: 12m 46sRunning iteration 141/1500... Est. remaining: 12m 32sRunning iteration 151/1500... Est. remaining: 12m 21sRunning iteration 161/1500... Est. remaining: 12m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,274,296,550
Annual Return: 45.37%
Sharpe Ratio: 1.48209
Sortino Ratio: 1.441
Max Drawdown: -59.2%
Avg Drawdown: -12.2%
Normalized Score: 0.293
Lookback periods: [149, 163, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 12m 9sRunning iteration 181/1500... Est. remaining: 12m 0sRunning iteration 191/1500... Est. remaining: 11m 50sRunning iteration 201/1500... Est. remaining: 11m 41sbest_combination: {'lookbacks': [149, 163, 180], 'score': np.float64(0.29349280619464196), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 33sRunning iteration 221/1500... Est. remaining: 11m 25sRunning iteration 231/1500... Est. remaining: 11m 17sRunning iteration 241/1500... Est. remaining: 11m 9sRunning iteration 251/1500... Est. remaining: 11m 2sRunning iteration 261/1500... Est. remaining: 10m 55sRunning iteration 271/1500... Est. remaining: 10m 48sRunning iteration 281/1500... Est. remaining: 10m 40sRunning iteration 291/1500... Est. remaining: 10m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,990,544,503
Annual Return: 48.52%
Sharpe Ratio: 1.59164
Sortino Ratio: 1.547
Max Drawdown: -57.3%
Avg Drawdown: -11.0%
Normalized Score: 1.620
Lookback periods: [137, 155, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 301/1500... Est. remaining: 10m 31sbest_combination: {'lookbacks': [137, 155, 205], 'score': np.float64(1.619983272079701), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 25sRunning iteration 321/1500... Est. remaining: 10m 18sRunning iteration 331/1500... Est. remaining: 10m 12sRunning iteration 341/1500... Est. remaining: 10m 6sRunning iteration 351/1500... Est. remaining: 9m 59sRunning iteration 361/1500... Est. remaining: 9m 53sRunning iteration 371/1500... Est. remaining: 9m 47sRunning iteration 381/1500... Est. remaining: 9m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,651,382,915
Annual Return: 49.25%
Sharpe Ratio: 1.60772
Sortino Ratio: 1.568
Max Drawdown: -56.8%
Avg Drawdown: -11.2%
Normalized Score: 1.897
Lookback periods: [139, 157, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 9m 38sRunning iteration 401/1500... Est. remaining: 9m 32sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(1.8970984408760365), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 26sRunning iteration 421/1500... Est. remaining: 9m 20sRunning iteration 431/1500... Est. remaining: 9m 14sRunning iteration 441/1500... Est. remaining: 9m 8sRunning iteration 451/1500... Est. remaining: 9m 2sRunning iteration 461/1500... Est. remaining: 8m 57sRunning iteration 471/1500... Est. remaining: 8m 51sRunning iteration 481/1500... Est. remaining: 8m 45sRunning iteration 491/1500... Est. remaining: 8m 39sRunning iteration 501/1500... Est. remaining: 8m 34sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(1.8970984408760365), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 28sRunning iteration 521/1500... Est. remaining: 8m 22sRunning iteration 531/1500... Est. remaining: 8m 17sRunning iteration 541/1500... Est. remaining: 8m 11sRunning iteration 551/1500... Est. remaining: 8m 5sRunning iteration 561/1500... Est. remaining: 8m 0sRunning iteration 571/1500... Est. remaining: 7m 54sRunning iteration 581/1500... Est. remaining: 7m 49sRunning iteration 591/1500... Est. remaining: 7m 43sRunning iteration 601/1500... Est. remaining: 7m 38sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(1.8970984408760365), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 33sRunning iteration 621/1500... Est. remaining: 7m 27sRunning iteration 631/1500... Est. remaining: 7m 22sRunning iteration 641/1500... Est. remaining: 7m 16sRunning iteration 651/1500... Est. remaining: 7m 11sRunning iteration 661/1500... Est. remaining: 7m 6sRunning iteration 671/1500... Est. remaining: 7m 0sRunning iteration 681/1500... Est. remaining: 6m 55sRunning iteration 691/1500... Est. remaining: 6m 50sRunning iteration 701/1500... Est. remaining: 6m 44sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(1.8970984408760365), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 39sRunning iteration 721/1500... Est. remaining: 6m 34sRunning iteration 731/1500... Est. remaining: 6m 29sRunning iteration 741/1500... Est. remaining: 6m 23sRunning iteration 751/1500... Est. remaining: 6m 18sRunning iteration 761/1500... Est. remaining: 6m 13sRunning iteration 771/1500... Est. remaining: 6m 8sRunning iteration 781/1500... Est. remaining: 6m 2sRunning iteration 791/1500... Est. remaining: 5m 57sRunning iteration 801/1500... Est. remaining: 5m 52sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(1.8970984408760365), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 47sRunning iteration 821/1500... Est. remaining: 5m 42sRunning iteration 831/1500... Est. remaining: 5m 37sRunning iteration 841/1500... Est. remaining: 5m 31sRunning iteration 851/1500... Est. remaining: 5m 26sRunning iteration 861/1500... Est. remaining: 5m 21sRunning iteration 871/1500... Est. remaining: 5m 16sRunning iteration 881/1500... Est. remaining: 5m 11sRunning iteration 891/1500... Est. remaining: 5m 6sRunning iteration 901/1500... Est. remaining: 5m 1sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(1.8970984408760365), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 56sRunning iteration 921/1500... Est. remaining: 4m 50sRunning iteration 931/1500... Est. remaining: 4m 45sRunning iteration 941/1500... Est. remaining: 4m 40sRunning iteration 951/1500... Est. remaining: 4m 35sRunning iteration 961/1500... Est. remaining: 4m 30sRunning iteration 971/1500... Est. remaining: 4m 25sRunning iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 15sRunning iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(1.8970984408760365), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 5sRunning iteration 1021/1500... Est. remaining: 4m 0sRunning iteration 1031/1500... Est. remaining: 3m 54sRunning iteration 1041/1500... Est. remaining: 3m 49sRunning iteration 1051/1500... Est. remaining: 3m 44sRunning iteration 1061/1500... Est. remaining: 3m 39sRunning iteration 1071/1500... Est. remaining: 3m 34sRunning iteration 1081/1500... Est. remaining: 3m 29sRunning iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(1.8970984408760365), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4sRunning iteration 1141/1500... Est. remaining: 2m 59sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(1.8970984408760365), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(1.8970984408760365), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(1.8970984408760365), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.90
best_combination: {'lookbacks': [139, 157, 188], 'score': np.float64(1.8970984408760365), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 157, 188] (score: 1.8971)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 157, 188] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pi: 75 selections (18.0%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 40 selections (9.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,651,382,915.24
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Wed Aug 27 15:05:04 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $637,578,610
Annual Return: 37.60%
Sharpe Ratio: 1.24837
Sortino Ratio: 1.203
Max Drawdown: -72.8%
Avg Drawdown: -15.0%
Normalized Score: -1.598
Lookback periods: [131, 146, 226] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $622,983,617
Annual Return: 37.51%
Sharpe Ratio: 1.34977
Sortino Ratio: 1.250
Max Drawdown: -34.7%
Avg Drawdown: -10.4%
Normalized Score: -0.530
Lookback periods: [49, 71, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,234,746,696
Annual Return: 45.33%
Sharpe Ratio: 1.47100
Sortino Ratio: 1.423
Max Drawdown: -64.5%
Avg Drawdown: -11.8%
Normalized Score: -0.130
Lookback periods: [183, 194, 231] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 35sRunning iteration 21/1500... Est. remaining: 19m 54sRunning iteration 31/1500... Est. remaining: 17m 14sRunning iteration 41/1500... Est. remaining: 15m 52sRunning iteration 51/1500... Est. remaining: 15m 0sRunning iteration 61/1500... Est. remaining: 14m 24sRunning iteration 71/1500... Est. remaining: 13m 57sRunning iteration 81/1500... Est. remaining: 13m 34sRunning iteration 91/1500... Est. remaining: 13m 14sRunning iteration 101/1500... Est. remaining: 12m 58sbest_combination: {'lookbacks': [183, 194, 231], 'score': np.float64(-0.13010020332131791), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 44sRunning iteration 121/1500... Est. remaining: 12m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,794,845,907
Annual Return: 41.77%
Sharpe Ratio: 1.50642
Sortino Ratio: 1.413
Max Drawdown: -37.8%
Avg Drawdown: -9.9%
Normalized Score: 0.172
Lookback periods: [45, 54, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 12m 33sRunning iteration 141/1500... Est. remaining: 12m 21sRunning iteration 151/1500... Est. remaining: 12m 11sRunning iteration 161/1500... Est. remaining: 12m 0sRunning iteration 171/1500... Est. remaining: 11m 51sRunning iteration 181/1500... Est. remaining: 11m 42sRunning iteration 191/1500... Est. remaining: 11m 34sRunning iteration 201/1500... Est. remaining: 11m 26sbest_combination: {'lookbacks': [45, 54, 87], 'score': np.float64(0.1719379366401563), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 19sRunning iteration 221/1500... Est. remaining: 11m 11sRunning iteration 231/1500... Est. remaining: 11m 4sRunning iteration 241/1500... Est. remaining: 10m 58sRunning iteration 251/1500... Est. remaining: 10m 51sRunning iteration 261/1500... Est. remaining: 10m 45sRunning iteration 271/1500... Est. remaining: 10m 38sRunning iteration 281/1500... Est. remaining: 10m 31sRunning iteration 291/1500... Est. remaining: 10m 25sRunning iteration 301/1500... Est. remaining: 10m 19sbest_combination: {'lookbacks': [45, 54, 87], 'score': np.float64(0.1719379366401563), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 13sRunning iteration 321/1500... Est. remaining: 10m 7sRunning iteration 331/1500... Est. remaining: 10m 1sRunning iteration 341/1500... Est. remaining: 9m 55sRunning iteration 351/1500... Est. remaining: 9m 49sRunning iteration 361/1500... Est. remaining: 9m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,419,961,007
Annual Return: 43.00%
Sharpe Ratio: 1.54805
Sortino Ratio: 1.452
Max Drawdown: -35.2%
Avg Drawdown: -8.4%
Normalized Score: 0.560
Lookback periods: [42, 52, 108] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 371/1500... Est. remaining: 9m 40sRunning iteration 381/1500... Est. remaining: 9m 34sRunning iteration 391/1500... Est. remaining: 9m 29sRunning iteration 401/1500... Est. remaining: 9m 23sbest_combination: {'lookbacks': [42, 52, 108], 'score': np.float64(0.5604509659297408), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 17sRunning iteration 421/1500... Est. remaining: 9m 11sRunning iteration 431/1500... Est. remaining: 9m 6sRunning iteration 441/1500... Est. remaining: 9m 0sRunning iteration 451/1500... Est. remaining: 8m 55sRunning iteration 461/1500... Est. remaining: 8m 49sRunning iteration 471/1500... Est. remaining: 8m 44sRunning iteration 481/1500... Est. remaining: 8m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,261,107,560
Annual Return: 44.24%
Sharpe Ratio: 1.62095
Sortino Ratio: 1.516
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 0.795
Lookback periods: [38, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 8m 35sRunning iteration 501/1500... Est. remaining: 8m 29sbest_combination: {'lookbacks': [38, 52, 98], 'score': np.float64(0.7948159121761202), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 24sRunning iteration 521/1500... Est. remaining: 8m 19sRunning iteration 531/1500... Est. remaining: 8m 13sRunning iteration 541/1500... Est. remaining: 8m 8sRunning iteration 551/1500... Est. remaining: 8m 2sRunning iteration 561/1500... Est. remaining: 7m 57sRunning iteration 571/1500... Est. remaining: 8m 33sRunning iteration 581/1500... Est. remaining: 10m 47sRunning iteration 591/1500... Est. remaining: 10m 37sRunning iteration 601/1500... Est. remaining: 13m 3sbest_combination: {'lookbacks': [38, 52, 98], 'score': np.float64(0.7948159121761202), 'visits': 1}
Running iteration 611/1500... Est. remaining: 12m 48sRunning iteration 621/1500... Est. remaining: 12m 34sRunning iteration 631/1500... Est. remaining: 12m 21sRunning iteration 641/1500... Est. remaining: 12m 7sRunning iteration 651/1500... Est. remaining: 11m 54sRunning iteration 661/1500... Est. remaining: 11m 41sRunning iteration 671/1500... Est. remaining: 11m 28sRunning iteration 681/1500... Est. remaining: 11m 16sRunning iteration 691/1500... Est. remaining: 11m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,900,997,505
Annual Return: 44.98%
Sharpe Ratio: 1.64710
Sortino Ratio: 1.543
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.015
Lookback periods: [41, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/1500... Est. remaining: 10m 53sbest_combination: {'lookbacks': [41, 51, 98], 'score': np.float64(1.0153416305179128), 'visits': 1}
Running iteration 711/1500... Est. remaining: 10m 41sRunning iteration 721/1500... Est. remaining: 10m 29sRunning iteration 731/1500... Est. remaining: 10m 18sRunning iteration 741/1500... Est. remaining: 10m 6sRunning iteration 751/1500... Est. remaining: 9m 55sRunning iteration 761/1500... Est. remaining: 9m 44sRunning iteration 771/1500... Est. remaining: 9m 34sRunning iteration 781/1500... Est. remaining: 9m 23sRunning iteration 791/1500... Est. remaining: 9m 12sRunning iteration 801/1500... Est. remaining: 9m 2sbest_combination: {'lookbacks': [41, 51, 98], 'score': np.float64(1.0153416305179128), 'visits': 1}
Running iteration 811/1500... Est. remaining: 8m 52sRunning iteration 821/1500... Est. remaining: 8m 42sRunning iteration 831/1500... Est. remaining: 8m 32sRunning iteration 841/1500... Est. remaining: 8m 22sRunning iteration 851/1500... Est. remaining: 8m 12sRunning iteration 861/1500... Est. remaining: 8m 3sRunning iteration 871/1500... Est. remaining: 7m 53sRunning iteration 881/1500... Est. remaining: 7m 44sRunning iteration 891/1500... Est. remaining: 7m 34sRunning iteration 901/1500... Est. remaining: 7m 25sbest_combination: {'lookbacks': [41, 51, 98], 'score': np.float64(1.0153416305179128), 'visits': 1}
Running iteration 911/1500... Est. remaining: 7m 16sRunning iteration 921/1500... Est. remaining: 7m 7sRunning iteration 931/1500... Est. remaining: 6m 58sRunning iteration 941/1500... Est. remaining: 6m 49sRunning iteration 951/1500... Est. remaining: 6m 40sRunning iteration 961/1500... Est. remaining: 6m 32sRunning iteration 971/1500... Est. remaining: 6m 23sRunning iteration 981/1500... Est. remaining: 6m 15sRunning iteration 991/1500... Est. remaining: 6m 6sRunning iteration 1001/1500... Est. remaining: 5m 58sbest_combination: {'lookbacks': [41, 51, 98], 'score': np.float64(1.0153416305179128), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 5m 49sRunning iteration 1021/1500... Est. remaining: 5m 41sRunning iteration 1031/1500... Est. remaining: 5m 33sRunning iteration 1041/1500... Est. remaining: 5m 25sRunning iteration 1051/1500... Est. remaining: 5m 17sRunning iteration 1061/1500... Est. remaining: 5m 9sRunning iteration 1071/1500... Est. remaining: 5m 1sRunning iteration 1081/1500... Est. remaining: 4m 53sRunning iteration 1091/1500... Est. remaining: 4m 45sRunning iteration 1101/1500... Est. remaining: 4m 37sbest_combination: {'lookbacks': [41, 51, 98], 'score': np.float64(1.0153416305179128), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 4m 30sRunning iteration 1121/1500... Est. remaining: 4m 22sRunning iteration 1131/1500... Est. remaining: 4m 14sRunning iteration 1141/1500... Est. remaining: 4m 7sRunning iteration 1151/1500... Est. remaining: 3m 59sRunning iteration 1161/1500... Est. remaining: 3m 52sRunning iteration 1171/1500... Est. remaining: 3m 44sRunning iteration 1181/1500... Est. remaining: 3m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,008,937,375
Annual Return: 46.03%
Sharpe Ratio: 1.67914
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.086
Lookback periods: [41, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1191/1500... Est. remaining: 3m 30sRunning iteration 1201/1500... Est. remaining: 3m 23sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.0860925491239075), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 3m 16sRunning iteration 1221/1500... Est. remaining: 3m 8sRunning iteration 1231/1500... Est. remaining: 3m 1sRunning iteration 1241/1500... Est. remaining: 2m 54sRunning iteration 1251/1500... Est. remaining: 2m 47sRunning iteration 1261/1500... Est. remaining: 2m 40sRunning iteration 1271/1500... Est. remaining: 2m 33sRunning iteration 1281/1500... Est. remaining: 2m 26sRunning iteration 1291/1500... Est. remaining: 2m 19sRunning iteration 1301/1500... Est. remaining: 2m 12sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.0860925491239075), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 5sRunning iteration 1321/1500... Est. remaining: 1m 58sRunning iteration 1331/1500... Est. remaining: 1m 51sRunning iteration 1341/1500... Est. remaining: 1m 45sRunning iteration 1351/1500... Est. remaining: 1m 38sRunning iteration 1361/1500... Est. remaining: 1m 31sRunning iteration 1371/1500... Est. remaining: 1m 24sRunning iteration 1381/1500... Est. remaining: 1m 18sRunning iteration 1391/1500... Est. remaining: 1m 11sRunning iteration 1401/1500... Est. remaining: 1m 4sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.0860925491239075), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 58sRunning iteration 1421/1500... Est. remaining: 0m 51sRunning iteration 1431/1500... Est. remaining: 0m 45sRunning iteration 1441/1500... Est. remaining: 0m 38sRunning iteration 1451/1500... Est. remaining: 0m 32sRunning iteration 1461/1500... Est. remaining: 0m 25sRunning iteration 1471/1500... Est. remaining: 0m 19sRunning iteration 1481/1500... Est. remaining: 0m 12sRunning iteration 1491/1500... Est. remaining: 0m 6s
Monte Carlo simulation completed in 15.9 minutes
Best normalized score: 1.09
best_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.0860925491239075), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 52, 98] (score: 1.0861)

Monte Carlo simulation completed in 16.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,008,937,374.54
Average Annualized Gain: 46.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Wed Aug 27 15:21:09 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $105,502,936
Annual Return: 30.64%
Sharpe Ratio: 1.09804
Sortino Ratio: 1.006
Max Drawdown: -68.8%
Avg Drawdown: -13.1%
Normalized Score: -1.417
Lookback periods: [30, 196, 284] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $411,138,606
Annual Return: 35.87%
Sharpe Ratio: 1.25244
Sortino Ratio: 1.153
Max Drawdown: -62.9%
Avg Drawdown: -13.6%
Normalized Score: -0.814
Lookback periods: [48, 86, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,871,407,888
Annual Return: 43.71%
Sharpe Ratio: 1.42164
Sortino Ratio: 1.383
Max Drawdown: -65.4%
Avg Drawdown: -12.7%
Normalized Score: 0.009
Lookback periods: [149, 168, 217] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,434,683,043
Annual Return: 44.45%
Sharpe Ratio: 1.44842
Sortino Ratio: 1.411
Max Drawdown: -65.1%
Avg Drawdown: -12.3%
Normalized Score: 0.122
Lookback periods: [146, 190, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 3sRunning iteration 21/1500... Est. remaining: 20m 48sRunning iteration 31/1500... Est. remaining: 17m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,917,041,317
Annual Return: 46.74%
Sharpe Ratio: 1.54369
Sortino Ratio: 1.493
Max Drawdown: -55.0%
Avg Drawdown: -11.4%
Normalized Score: 0.553
Lookback periods: [141, 157, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 16m 47sRunning iteration 51/1500... Est. remaining: 15m 42sRunning iteration 61/1500... Est. remaining: 14m 57sRunning iteration 71/1500... Est. remaining: 14m 24sRunning iteration 81/1500... Est. remaining: 13m 55sRunning iteration 91/1500... Est. remaining: 13m 33sRunning iteration 101/1500... Est. remaining: 13m 16sbest_combination: {'lookbacks': [141, 157, 205], 'score': np.float64(0.5525133576833224), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 1sRunning iteration 121/1500... Est. remaining: 12m 47sRunning iteration 131/1500... Est. remaining: 12m 34sRunning iteration 141/1500... Est. remaining: 12m 22sRunning iteration 151/1500... Est. remaining: 12m 13sRunning iteration 161/1500... Est. remaining: 12m 3sRunning iteration 171/1500... Est. remaining: 11m 54sRunning iteration 181/1500... Est. remaining: 11m 46sRunning iteration 191/1500... Est. remaining: 11m 37sRunning iteration 201/1500... Est. remaining: 11m 29sbest_combination: {'lookbacks': [141, 157, 205], 'score': np.float64(0.5525133576833224), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 22sRunning iteration 221/1500... Est. remaining: 11m 14sRunning iteration 231/1500... Est. remaining: 11m 7sRunning iteration 241/1500... Est. remaining: 11m 0sRunning iteration 251/1500... Est. remaining: 10m 53sRunning iteration 261/1500... Est. remaining: 10m 46sRunning iteration 271/1500... Est. remaining: 10m 40sRunning iteration 281/1500... Est. remaining: 10m 33sRunning iteration 291/1500... Est. remaining: 10m 26sRunning iteration 301/1500... Est. remaining: 10m 20sbest_combination: {'lookbacks': [141, 157, 205], 'score': np.float64(0.5525133576833224), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 13sRunning iteration 321/1500... Est. remaining: 10m 7sRunning iteration 331/1500... Est. remaining: 10m 1sRunning iteration 341/1500... Est. remaining: 9m 55sRunning iteration 351/1500... Est. remaining: 9m 49sRunning iteration 361/1500... Est. remaining: 9m 43sRunning iteration 371/1500... Est. remaining: 9m 37sRunning iteration 381/1500... Est. remaining: 9m 31sRunning iteration 391/1500... Est. remaining: 9m 26sRunning iteration 401/1500... Est. remaining: 9m 20sbest_combination: {'lookbacks': [141, 157, 205], 'score': np.float64(0.5525133576833224), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 14sRunning iteration 421/1500... Est. remaining: 9m 8sRunning iteration 431/1500... Est. remaining: 9m 3sRunning iteration 441/1500... Est. remaining: 8m 57sRunning iteration 451/1500... Est. remaining: 8m 52sRunning iteration 461/1500... Est. remaining: 8m 46sRunning iteration 471/1500... Est. remaining: 8m 41sRunning iteration 481/1500... Est. remaining: 8m 35sRunning iteration 491/1500... Est. remaining: 8m 30sRunning iteration 501/1500... Est. remaining: 8m 24sbest_combination: {'lookbacks': [141, 157, 205], 'score': np.float64(0.5525133576833224), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 19sRunning iteration 521/1500... Est. remaining: 8m 14sRunning iteration 531/1500... Est. remaining: 8m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,833,834,404
Annual Return: 43.65%
Sharpe Ratio: 1.58606
Sortino Ratio: 1.493
Max Drawdown: -39.8%
Avg Drawdown: -9.3%
Normalized Score: 0.685
Lookback periods: [41, 53, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 8m 5sRunning iteration 551/1500... Est. remaining: 8m 0sRunning iteration 561/1500... Est. remaining: 7m 55sRunning iteration 571/1500... Est. remaining: 7m 49sRunning iteration 581/1500... Est. remaining: 7m 44sRunning iteration 591/1500... Est. remaining: 7m 39sRunning iteration 601/1500... Est. remaining: 7m 33sbest_combination: {'lookbacks': [41, 53, 101], 'score': np.float64(0.6849348102796095), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 28sRunning iteration 621/1500... Est. remaining: 7m 23sRunning iteration 631/1500... Est. remaining: 7m 18sRunning iteration 641/1500... Est. remaining: 7m 12sRunning iteration 651/1500... Est. remaining: 7m 7sRunning iteration 661/1500... Est. remaining: 7m 2sRunning iteration 671/1500... Est. remaining: 6m 57sRunning iteration 681/1500... Est. remaining: 6m 51sRunning iteration 691/1500... Est. remaining: 6m 46sRunning iteration 701/1500... Est. remaining: 6m 41sbest_combination: {'lookbacks': [41, 53, 101], 'score': np.float64(0.6849348102796095), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,718,446,473
Annual Return: 43.48%
Sharpe Ratio: 1.54853
Sortino Ratio: 1.463
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 0.690
Lookback periods: [41, 51, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 711/1500... Est. remaining: 6m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,352,415,697
Annual Return: 44.35%
Sharpe Ratio: 1.58518
Sortino Ratio: 1.498
Max Drawdown: -34.9%
Avg Drawdown: -9.2%
Normalized Score: 0.772
Lookback periods: [42, 50, 105] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 6m 33sRunning iteration 731/1500... Est. remaining: 6m 28sRunning iteration 741/1500... Est. remaining: 6m 23sRunning iteration 751/1500... Est. remaining: 6m 18sRunning iteration 761/1500... Est. remaining: 6m 12sRunning iteration 771/1500... Est. remaining: 6m 7sRunning iteration 781/1500... Est. remaining: 6m 2sRunning iteration 791/1500... Est. remaining: 5m 57sRunning iteration 801/1500... Est. remaining: 5m 51sbest_combination: {'lookbacks': [42, 50, 105], 'score': np.float64(0.7721756795633761), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 46sRunning iteration 821/1500... Est. remaining: 5m 41sRunning iteration 831/1500... Est. remaining: 5m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,822,268,855
Annual Return: 43.64%
Sharpe Ratio: 1.59492
Sortino Ratio: 1.504
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 0.800
Lookback periods: [44, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 841/1500... Est. remaining: 5m 32sRunning iteration 851/1500... Est. remaining: 5m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,188,560,902
Annual Return: 44.14%
Sharpe Ratio: 1.60520
Sortino Ratio: 1.510
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 0.834
Lookback periods: [47, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,398,891,000
Annual Return: 45.49%
Sharpe Ratio: 1.64063
Sortino Ratio: 1.549
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 0.978
Lookback periods: [46, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 5m 23sRunning iteration 871/1500... Est. remaining: 5m 18sRunning iteration 881/1500... Est. remaining: 5m 13sRunning iteration 891/1500... Est. remaining: 5m 7sRunning iteration 901/1500... Est. remaining: 5m 2sbest_combination: {'lookbacks': [46, 51, 95], 'score': np.float64(0.9775351224304645), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 57sRunning iteration 921/1500... Est. remaining: 4m 52sRunning iteration 931/1500... Est. remaining: 4m 47sRunning iteration 941/1500... Est. remaining: 4m 42sRunning iteration 951/1500... Est. remaining: 4m 36sRunning iteration 961/1500... Est. remaining: 4m 31sRunning iteration 971/1500... Est. remaining: 4m 26sRunning iteration 981/1500... Est. remaining: 4m 21sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [46, 51, 95], 'score': np.float64(0.9775351224304645), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 55sRunning iteration 1041/1500... Est. remaining: 3m 50sRunning iteration 1051/1500... Est. remaining: 3m 45sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [46, 51, 95], 'score': np.float64(0.9775351224304645), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,008,937,375
Annual Return: 46.03%
Sharpe Ratio: 1.67914
Sortino Ratio: 1.579
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.083
Lookback periods: [41, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.0829622089047768), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.0829622089047768), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.0829622089047768), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 1.08
best_combination: {'lookbacks': [41, 52, 98], 'score': np.float64(1.0829622089047768), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [41, 52, 98] (score: 1.0830)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [41, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pine: 75 selections (18.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,008,937,374.54
Average Annualized Gain: 46.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Wed Aug 27 15:33:41 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $450,204,980
Annual Return: 36.23%
Sharpe Ratio: 1.24745
Sortino Ratio: 1.155
Max Drawdown: -71.5%
Avg Drawdown: -13.3%
Normalized Score: -3.423
Lookback periods: [60, 188, 210] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,613,195,051
Annual Return: 41.34%
Sharpe Ratio: 1.36673
Sortino Ratio: 1.314
Max Drawdown: -75.9%
Avg Drawdown: -13.7%
Normalized Score: -1.092
Lookback periods: [250, 256, 264] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,195,006,006
Annual Return: 45.29%
Sharpe Ratio: 1.47338
Sortino Ratio: 1.432
Max Drawdown: -62.6%
Avg Drawdown: -11.8%
Normalized Score: 1.215
Lookback periods: [166, 198, 230] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,238,759,988
Annual Return: 47.59%
Sharpe Ratio: 1.53260
Sortino Ratio: 1.494
Max Drawdown: -59.9%
Avg Drawdown: -11.8%
Normalized Score: 2.355
Lookback periods: [177, 197, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 735m 42sRunning iteration 41/1500... Est. remaining: 551m 4sRunning iteration 51/1500... Est. remaining: 500m 23sRunning iteration 61/1500... Est. remaining: 712m 35sRunning iteration 71/1500... Est. remaining: 608m 11sRunning iteration 81/1500... Est. remaining: 576m 13sRunning iteration 91/1500... Est. remaining: 603m 56sRunning iteration 101/1500... Est. remaining: 540m 50sbest_combination: {'lookbacks': [177, 197, 198], 'score': np.float64(2.3552508194535466), 'visits': 1}
Running iteration 111/1500... Est. remaining: 588m 56sRunning iteration 121/1500... Est. remaining: 619m 7sRunning iteration 131/1500... Est. remaining: 568m 13sRunning iteration 141/1500... Est. remaining: 569m 14sRunning iteration 151/1500... Est. remaining: 528m 7sRunning iteration 161/1500... Est. remaining: 630m 59sRunning iteration 171/1500... Est. remaining: 590m 12sRunning iteration 181/1500... Est. remaining: 553m 49sRunning iteration 191/1500... Est. remaining: 537m 15sRunning iteration 201/1500... Est. remaining: 561m 20sbest_combination: {'lookbacks': [177, 197, 198], 'score': np.float64(2.3552508194535466), 'visits': 1}
Running iteration 211/1500... Est. remaining: 530m 59sRunning iteration 221/1500... Est. remaining: 578m 32sRunning iteration 231/1500... Est. remaining: 549m 30sRunning iteration 241/1500... Est. remaining: 631m 12sRunning iteration 251/1500... Est. remaining: 601m 33sRunning iteration 261/1500... Est. remaining: 864m 30sRunning iteration 271/1500... Est. remaining: 853m 33sRunning iteration 281/1500... Est. remaining: 816m 44sRunning iteration 291/1500... Est. remaining: 783m 28sRunning iteration 301/1500... Est. remaining: 759m 35sbest_combination: {'lookbacks': [177, 197, 198], 'score': np.float64(2.3552508194535466), 'visits': 1}
Running iteration 311/1500... Est. remaining: 729m 16sRunning iteration 321/1500... Est. remaining: 701m 3sRunning iteration 331/1500... Est. remaining: 680m 41sRunning iteration 341/1500... Est. remaining: 655m 18sRunning iteration 351/1500... Est. remaining: 633m 50sRunning iteration 361/1500... Est. remaining: 611m 29sRunning iteration 371/1500... Est. remaining: 589m 59sRunning iteration 381/1500... Est. remaining: 572m 23sRunning iteration 391/1500... Est. remaining: 552m 58sRunning iteration 401/1500... Est. remaining: 542m 17sbest_combination: {'lookbacks': [177, 197, 198], 'score': np.float64(2.3552508194535466), 'visits': 1}
Running iteration 411/1500... Est. remaining: 524m 28sRunning iteration 421/1500... Est. remaining: 530m 41sRunning iteration 431/1500... Est. remaining: 515m 52sRunning iteration 441/1500... Est. remaining: 499m 37sRunning iteration 451/1500... Est. remaining: 508m 57sRunning iteration 461/1500... Est. remaining: 503m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,453,208,603
Annual Return: 47.72%
Sharpe Ratio: 1.55184
Sortino Ratio: 1.511
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 2.532
Lookback periods: [169, 189, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 488m 39sRunning iteration 481/1500... Est. remaining: 479m 41sRunning iteration 491/1500... Est. remaining: 470m 42sRunning iteration 501/1500... Est. remaining: 456m 52sbest_combination: {'lookbacks': [169, 189, 197], 'score': np.float64(2.5315121163165966), 'visits': 1}
Running iteration 511/1500... Est. remaining: 444m 38sRunning iteration 521/1500... Est. remaining: 436m 9sRunning iteration 531/1500... Est. remaining: 423m 42sRunning iteration 541/1500... Est. remaining: 418m 52sRunning iteration 551/1500... Est. remaining: 407m 44sRunning iteration 561/1500... Est. remaining: 396m 22sRunning iteration 571/1500... Est. remaining: 395m 16sRunning iteration 581/1500... Est. remaining: 392m 57sRunning iteration 591/1500... Est. remaining: 382m 13sRunning iteration 601/1500... Est. remaining: 384m 54sbest_combination: {'lookbacks': [169, 189, 197], 'score': np.float64(2.5315121163165966), 'visits': 1}
Running iteration 611/1500... Est. remaining: 383m 13sRunning iteration 621/1500... Est. remaining: 372m 55sRunning iteration 631/1500... Est. remaining: 369m 44sRunning iteration 641/1500... Est. remaining: 359m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,304,007,773
Annual Return: 48.18%
Sharpe Ratio: 1.55142
Sortino Ratio: 1.521
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 2.713
Lookback periods: [177, 184, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 354m 45sRunning iteration 661/1500... Est. remaining: 355m 40sRunning iteration 671/1500... Est. remaining: 346m 18sRunning iteration 681/1500... Est. remaining: 347m 46sRunning iteration 691/1500... Est. remaining: 339m 59sRunning iteration 701/1500... Est. remaining: 331m 5sbest_combination: {'lookbacks': [177, 184, 198], 'score': np.float64(2.713320166265208), 'visits': 1}
Running iteration 711/1500... Est. remaining: 323m 37sRunning iteration 721/1500... Est. remaining: 317m 34sRunning iteration 731/1500... Est. remaining: 309m 17sRunning iteration 741/1500... Est. remaining: 309m 16sRunning iteration 751/1500... Est. remaining: 303m 13sRunning iteration 761/1500... Est. remaining: 295m 19sRunning iteration 771/1500... Est. remaining: 288m 28sRunning iteration 781/1500... Est. remaining: 286m 35sRunning iteration 791/1500... Est. remaining: 279m 6sRunning iteration 801/1500... Est. remaining: 273m 11sbest_combination: {'lookbacks': [177, 184, 198], 'score': np.float64(2.713320166265208), 'visits': 1}
Running iteration 811/1500... Est. remaining: 267m 23sRunning iteration 821/1500... Est. remaining: 260m 22sRunning iteration 831/1500... Est. remaining: 255m 43sRunning iteration 841/1500... Est. remaining: 248m 58sRunning iteration 851/1500... Est. remaining: 242m 37sRunning iteration 861/1500... Est. remaining: 237m 41sRunning iteration 871/1500... Est. remaining: 231m 21sRunning iteration 881/1500... Est. remaining: 225m 20sRunning iteration 891/1500... Est. remaining: 224m 24sRunning iteration 901/1500... Est. remaining: 218m 19sbest_combination: {'lookbacks': [177, 184, 198], 'score': np.float64(2.713320166265208), 'visits': 1}
Running iteration 911/1500... Est. remaining: 213m 16sRunning iteration 921/1500... Est. remaining: 207m 25sRunning iteration 931/1500... Est. remaining: 203m 12sRunning iteration 941/1500... Est. remaining: 197m 48sRunning iteration 951/1500... Est. remaining: 192m 17sRunning iteration 961/1500... Est. remaining: 187m 54sRunning iteration 971/1500... Est. remaining: 183m 6sRunning iteration 981/1500... Est. remaining: 177m 51sRunning iteration 991/1500... Est. remaining: 173m 40sRunning iteration 1001/1500... Est. remaining: 168m 36sbest_combination: {'lookbacks': [177, 184, 198], 'score': np.float64(2.713320166265208), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 164m 11sRunning iteration 1021/1500... Est. remaining: 159m 17sRunning iteration 1031/1500... Est. remaining: 156m 36sRunning iteration 1041/1500... Est. remaining: 153m 32sRunning iteration 1051/1500... Est. remaining: 148m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,330,133,874
Annual Return: 49.88%
Sharpe Ratio: 1.61584
Sortino Ratio: 1.570
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 3.548
Lookback periods: [181, 190, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1061/1500... Est. remaining: 145m 33sRunning iteration 1071/1500... Est. remaining: 143m 25sRunning iteration 1081/1500... Est. remaining: 139m 25sRunning iteration 1091/1500... Est. remaining: 134m 53sRunning iteration 1101/1500... Est. remaining: 132m 27sbest_combination: {'lookbacks': [181, 190, 198], 'score': np.float64(3.5484327951192354), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 128m 9sRunning iteration 1121/1500... Est. remaining: 123m 46sRunning iteration 1131/1500... Est. remaining: 121m 54sRunning iteration 1141/1500... Est. remaining: 117m 36sRunning iteration 1151/1500... Est. remaining: 114m 0sRunning iteration 1161/1500... Est. remaining: 109m 49sRunning iteration 1171/1500... Est. remaining: 105m 42sRunning iteration 1181/1500... Est. remaining: 101m 39sRunning iteration 1191/1500... Est. remaining: 97m 40sRunning iteration 1201/1500... Est. remaining: 93m 45sbest_combination: {'lookbacks': [181, 190, 198], 'score': np.float64(3.5484327951192354), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 89m 53sRunning iteration 1221/1500... Est. remaining: 86m 6sRunning iteration 1231/1500... Est. remaining: 82m 22sRunning iteration 1241/1500... Est. remaining: 78m 42sRunning iteration 1251/1500... Est. remaining: 75m 5sRunning iteration 1261/1500... Est. remaining: 71m 31sRunning iteration 1271/1500... Est. remaining: 68m 1sRunning iteration 1281/1500... Est. remaining: 64m 34sRunning iteration 1291/1500... Est. remaining: 61m 10sRunning iteration 1301/1500... Est. remaining: 57m 49sbest_combination: {'lookbacks': [181, 190, 198], 'score': np.float64(3.5484327951192354), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 54m 31sRunning iteration 1321/1500... Est. remaining: 51m 16sRunning iteration 1331/1500... Est. remaining: 48m 4sRunning iteration 1341/1500... Est. remaining: 44m 54sRunning iteration 1351/1500... Est. remaining: 41m 48sRunning iteration 1361/1500... Est. remaining: 38m 44sRunning iteration 1371/1500... Est. remaining: 35m 43sRunning iteration 1381/1500... Est. remaining: 32m 44sRunning iteration 1391/1500... Est. remaining: 29m 48sRunning iteration 1401/1500... Est. remaining: 26m 54sbest_combination: {'lookbacks': [181, 190, 198], 'score': np.float64(3.5484327951192354), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 24m 2sRunning iteration 1421/1500... Est. remaining: 21m 13sRunning iteration 1431/1500... Est. remaining: 18m 27sRunning iteration 1441/1500... Est. remaining: 15m 42sRunning iteration 1451/1500... Est. remaining: 13m 0sRunning iteration 1461/1500... Est. remaining: 10m 20sRunning iteration 1471/1500... Est. remaining: 7m 41sRunning iteration 1481/1500... Est. remaining: 5m 5sRunning iteration 1491/1500... Est. remaining: 2m 31s
Monte Carlo simulation completed in 377.5 minutes
Best normalized score: 3.55
best_combination: {'lookbacks': [181, 190, 198], 'score': np.float64(3.5484327951192354), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [181, 190, 198] (score: 3.5484)

Monte Carlo simulation completed in 377.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [181, 190, 198] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 122 selections (29.3%)
2. sp500_hma: 98 selections (23.6%)
3. naz100_pine: 82 selections (19.7%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 44 selections (10.6%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,330,133,873.78
Average Annualized Gain: 49.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Wed Aug 27 21:51:18 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $253,838,676
Annual Return: 33.99%
Sharpe Ratio: 1.17345
Sortino Ratio: 1.080
Max Drawdown: -67.0%
Avg Drawdown: -13.2%
Normalized Score: -1.759
Lookback periods: [46, 188, 272] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $671,168,700
Annual Return: 37.81%
Sharpe Ratio: 1.35213
Sortino Ratio: 1.238
Max Drawdown: -51.1%
Avg Drawdown: -11.2%
Normalized Score: -0.810
Lookback periods: [50, 56, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,549,336,283
Annual Return: 43.22%
Sharpe Ratio: 1.40570
Sortino Ratio: 1.363
Max Drawdown: -64.3%
Avg Drawdown: -13.0%
Normalized Score: -0.302
Lookback periods: [175, 206, 237] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,704,652,837
Annual Return: 45.77%
Sharpe Ratio: 1.50495
Sortino Ratio: 1.462
Max Drawdown: -56.0%
Avg Drawdown: -12.0%
Normalized Score: 0.263
Lookback periods: [137, 160, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 0sRunning iteration 21/1500... Est. remaining: 20m 53sRunning iteration 31/1500... Est. remaining: 17m 50sRunning iteration 41/1500... Est. remaining: 16m 15sRunning iteration 51/1500... Est. remaining: 15m 15sRunning iteration 61/1500... Est. remaining: 14m 35sRunning iteration 71/1500... Est. remaining: 14m 5sRunning iteration 81/1500... Est. remaining: 13m 40sRunning iteration 91/1500... Est. remaining: 13m 20sRunning iteration 101/1500... Est. remaining: 13m 3sbest_combination: {'lookbacks': [137, 160, 187], 'score': np.float64(0.2631616905244587), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 49sRunning iteration 121/1500... Est. remaining: 12m 37sRunning iteration 131/1500... Est. remaining: 12m 25sRunning iteration 141/1500... Est. remaining: 12m 14sRunning iteration 151/1500... Est. remaining: 12m 4sRunning iteration 161/1500... Est. remaining: 11m 54sRunning iteration 171/1500... Est. remaining: 11m 45sRunning iteration 181/1500... Est. remaining: 11m 37sRunning iteration 191/1500... Est. remaining: 11m 29sRunning iteration 201/1500... Est. remaining: 11m 22sbest_combination: {'lookbacks': [137, 160, 187], 'score': np.float64(0.2631616905244587), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 14sRunning iteration 221/1500... Est. remaining: 11m 7sRunning iteration 231/1500... Est. remaining: 11m 0sRunning iteration 241/1500... Est. remaining: 10m 53sRunning iteration 251/1500... Est. remaining: 10m 47sRunning iteration 261/1500... Est. remaining: 10m 40sRunning iteration 271/1500... Est. remaining: 10m 34sRunning iteration 281/1500... Est. remaining: 10m 27sRunning iteration 291/1500... Est. remaining: 10m 21sRunning iteration 301/1500... Est. remaining: 10m 15sbest_combination: {'lookbacks': [137, 160, 187], 'score': np.float64(0.2631616905244587), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 9sRunning iteration 321/1500... Est. remaining: 10m 3sRunning iteration 331/1500... Est. remaining: 9m 57sRunning iteration 341/1500... Est. remaining: 9m 51sRunning iteration 351/1500... Est. remaining: 9m 45sRunning iteration 361/1500... Est. remaining: 9m 39sRunning iteration 371/1500... Est. remaining: 9m 33sRunning iteration 381/1500... Est. remaining: 9m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,597,679,231
Annual Return: 46.50%
Sharpe Ratio: 1.53698
Sortino Ratio: 1.498
Max Drawdown: -58.1%
Avg Drawdown: -11.7%
Normalized Score: 0.413
Lookback periods: [139, 150, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 9m 25sRunning iteration 401/1500... Est. remaining: 9m 20sbest_combination: {'lookbacks': [139, 150, 168], 'score': np.float64(0.41271855696462606), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 14sRunning iteration 421/1500... Est. remaining: 9m 9sRunning iteration 431/1500... Est. remaining: 9m 3sRunning iteration 441/1500... Est. remaining: 8m 57sRunning iteration 451/1500... Est. remaining: 8m 52sRunning iteration 461/1500... Est. remaining: 8m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,104,390,952
Annual Return: 44.03%
Sharpe Ratio: 1.57802
Sortino Ratio: 1.485
Max Drawdown: -35.1%
Avg Drawdown: -8.6%
Normalized Score: 0.530
Lookback periods: [42, 44, 117] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 8m 43sRunning iteration 481/1500... Est. remaining: 8m 38sRunning iteration 491/1500... Est. remaining: 8m 32sRunning iteration 501/1500... Est. remaining: 8m 27sbest_combination: {'lookbacks': [42, 44, 117], 'score': np.float64(0.5297439134437095), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 21sRunning iteration 521/1500... Est. remaining: 8m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,344,695,408
Annual Return: 44.34%
Sharpe Ratio: 1.57669
Sortino Ratio: 1.488
Max Drawdown: -35.2%
Avg Drawdown: -9.0%
Normalized Score: 0.543
Lookback periods: [42, 45, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 8m 12sRunning iteration 541/1500... Est. remaining: 8m 7sRunning iteration 551/1500... Est. remaining: 8m 1sRunning iteration 561/1500... Est. remaining: 7m 56sRunning iteration 571/1500... Est. remaining: 7m 50sRunning iteration 581/1500... Est. remaining: 7m 45sRunning iteration 591/1500... Est. remaining: 7m 39sRunning iteration 601/1500... Est. remaining: 7m 34sbest_combination: {'lookbacks': [42, 45, 110], 'score': np.float64(0.5427714616614197), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 29sRunning iteration 621/1500... Est. remaining: 7m 23sRunning iteration 631/1500... Est. remaining: 7m 18sRunning iteration 641/1500... Est. remaining: 7m 13sRunning iteration 651/1500... Est. remaining: 7m 7sRunning iteration 661/1500... Est. remaining: 7m 2sRunning iteration 671/1500... Est. remaining: 6m 57sRunning iteration 681/1500... Est. remaining: 6m 51sRunning iteration 691/1500... Est. remaining: 6m 46sRunning iteration 701/1500... Est. remaining: 6m 41sbest_combination: {'lookbacks': [42, 45, 110], 'score': np.float64(0.5427714616614197), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 36sRunning iteration 721/1500... Est. remaining: 6m 30sRunning iteration 731/1500... Est. remaining: 6m 25sRunning iteration 741/1500... Est. remaining: 6m 20sRunning iteration 751/1500... Est. remaining: 6m 15sRunning iteration 761/1500... Est. remaining: 6m 10sRunning iteration 771/1500... Est. remaining: 6m 5sRunning iteration 781/1500... Est. remaining: 5m 59sRunning iteration 791/1500... Est. remaining: 5m 54sRunning iteration 801/1500... Est. remaining: 5m 49sbest_combination: {'lookbacks': [42, 45, 110], 'score': np.float64(0.5427714616614197), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 44sRunning iteration 821/1500... Est. remaining: 5m 39sRunning iteration 831/1500... Est. remaining: 5m 34sRunning iteration 841/1500... Est. remaining: 5m 29sRunning iteration 851/1500... Est. remaining: 5m 23sRunning iteration 861/1500... Est. remaining: 5m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,171,201,722
Annual Return: 44.12%
Sharpe Ratio: 1.59330
Sortino Ratio: 1.498
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 0.568
Lookback periods: [41, 48, 104] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 871/1500... Est. remaining: 5m 14sRunning iteration 881/1500... Est. remaining: 5m 9sRunning iteration 891/1500... Est. remaining: 5m 4sRunning iteration 901/1500... Est. remaining: 4m 59sbest_combination: {'lookbacks': [41, 48, 104], 'score': np.float64(0.5677625274088072), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 54sRunning iteration 921/1500... Est. remaining: 4m 49sRunning iteration 931/1500... Est. remaining: 4m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,407,023,602
Annual Return: 44.42%
Sharpe Ratio: 1.61383
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 0.671
Lookback periods: [42, 45, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 4m 39sRunning iteration 951/1500... Est. remaining: 4m 34sRunning iteration 961/1500... Est. remaining: 4m 29sRunning iteration 971/1500... Est. remaining: 4m 24sRunning iteration 981/1500... Est. remaining: 4m 19sRunning iteration 991/1500... Est. remaining: 4m 14sRunning iteration 1001/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [42, 45, 96], 'score': np.float64(0.6706199324245908), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 3sRunning iteration 1021/1500... Est. remaining: 3m 58sRunning iteration 1031/1500... Est. remaining: 3m 53sRunning iteration 1041/1500... Est. remaining: 3m 48sRunning iteration 1051/1500... Est. remaining: 3m 43sRunning iteration 1061/1500... Est. remaining: 3m 38sRunning iteration 1071/1500... Est. remaining: 3m 33sRunning iteration 1081/1500... Est. remaining: 3m 28sRunning iteration 1091/1500... Est. remaining: 3m 23sRunning iteration 1101/1500... Est. remaining: 3m 18sbest_combination: {'lookbacks': [42, 45, 96], 'score': np.float64(0.6706199324245908), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 13sRunning iteration 1121/1500... Est. remaining: 3m 8sRunning iteration 1131/1500... Est. remaining: 3m 3sRunning iteration 1141/1500... Est. remaining: 2m 58sRunning iteration 1151/1500... Est. remaining: 2m 53sRunning iteration 1161/1500... Est. remaining: 2m 48sRunning iteration 1171/1500... Est. remaining: 2m 43sRunning iteration 1181/1500... Est. remaining: 2m 38sRunning iteration 1191/1500... Est. remaining: 2m 33sRunning iteration 1201/1500... Est. remaining: 2m 28sbest_combination: {'lookbacks': [42, 45, 96], 'score': np.float64(0.6706199324245908), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 23sRunning iteration 1221/1500... Est. remaining: 2m 18sRunning iteration 1231/1500... Est. remaining: 2m 13sRunning iteration 1241/1500... Est. remaining: 2m 8sRunning iteration 1251/1500... Est. remaining: 2m 3sRunning iteration 1261/1500... Est. remaining: 1m 58sRunning iteration 1271/1500... Est. remaining: 1m 53sRunning iteration 1281/1500... Est. remaining: 1m 48sRunning iteration 1291/1500... Est. remaining: 1m 43sRunning iteration 1301/1500... Est. remaining: 1m 38sbest_combination: {'lookbacks': [42, 45, 96], 'score': np.float64(0.6706199324245908), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 33sRunning iteration 1321/1500... Est. remaining: 1m 28sRunning iteration 1331/1500... Est. remaining: 1m 23sRunning iteration 1341/1500... Est. remaining: 1m 18sRunning iteration 1351/1500... Est. remaining: 1m 13sRunning iteration 1361/1500... Est. remaining: 1m 8sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [42, 45, 96], 'score': np.float64(0.6706199324245908), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,642,825,404
Annual Return: 44.70%
Sharpe Ratio: 1.61701
Sortino Ratio: 1.514
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 0.692
Lookback periods: [42, 45, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.3 minutes
Best normalized score: 0.69
best_combination: {'lookbacks': [42, 45, 97], 'score': np.float64(0.6916207612366753), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 45, 97] (score: 0.6916)

Monte Carlo simulation completed in 12.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 45, 97] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 105 selections (25.2%)
2. naz100_hma: 94 selections (22.6%)
3. naz100_pine: 83 selections (20.0%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,642,825,404.30
Average Annualized Gain: 44.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Wed Aug 27 22:03:43 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,413,539,148
Annual Return: 40.80%
Sharpe Ratio: 1.34440
Sortino Ratio: 1.293
Max Drawdown: -66.4%
Avg Drawdown: -13.0%
Normalized Score: -0.633
Lookback periods: [176, 194, 263] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,842,361,340
Annual Return: 43.67%
Sharpe Ratio: 1.43638
Sortino Ratio: 1.400
Max Drawdown: -59.6%
Avg Drawdown: -11.9%
Normalized Score: 0.250
Lookback periods: [146, 175, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 27sRunning iteration 21/1500... Est. remaining: 18m 8sRunning iteration 31/1500... Est. remaining: 15m 58sRunning iteration 41/1500... Est. remaining: 14m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,431,247,049
Annual Return: 45.52%
Sharpe Ratio: 1.47745
Sortino Ratio: 1.424
Max Drawdown: -63.5%
Avg Drawdown: -11.6%
Normalized Score: 0.552
Lookback periods: [183, 186, 228] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 14m 41sRunning iteration 61/1500... Est. remaining: 14m 10sRunning iteration 71/1500... Est. remaining: 13m 44sRunning iteration 81/1500... Est. remaining: 13m 22sRunning iteration 91/1500... Est. remaining: 13m 5sRunning iteration 101/1500... Est. remaining: 12m 51sbest_combination: {'lookbacks': [183, 186, 228], 'score': np.float64(0.5519866933428225), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,562,257,628
Annual Return: 41.21%
Sharpe Ratio: 1.47036
Sortino Ratio: 1.369
Max Drawdown: -41.9%
Avg Drawdown: -9.9%
Normalized Score: 0.696
Lookback periods: [44, 52, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 12m 39sRunning iteration 131/1500... Est. remaining: 12m 26sRunning iteration 141/1500... Est. remaining: 12m 15sRunning iteration 151/1500... Est. remaining: 12m 4sRunning iteration 161/1500... Est. remaining: 11m 54sRunning iteration 171/1500... Est. remaining: 11m 45sRunning iteration 181/1500... Est. remaining: 11m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,682,297,343
Annual Return: 47.25%
Sharpe Ratio: 1.53806
Sortino Ratio: 1.500
Max Drawdown: -61.4%
Avg Drawdown: -11.8%
Normalized Score: 0.992
Lookback periods: [149, 193, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/1500... Est. remaining: 11m 37sRunning iteration 201/1500... Est. remaining: 11m 29sbest_combination: {'lookbacks': [149, 193, 201], 'score': np.float64(0.9919219024502286), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 21sRunning iteration 221/1500... Est. remaining: 11m 13sRunning iteration 231/1500... Est. remaining: 11m 6sRunning iteration 241/1500... Est. remaining: 10m 58sRunning iteration 251/1500... Est. remaining: 10m 51sRunning iteration 261/1500... Est. remaining: 10m 45sRunning iteration 271/1500... Est. remaining: 10m 38sRunning iteration 281/1500... Est. remaining: 10m 32sRunning iteration 291/1500... Est. remaining: 10m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,251,635,590
Annual Return: 42.70%
Sharpe Ratio: 1.55202
Sortino Ratio: 1.450
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.461
Lookback periods: [41, 53, 129] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 301/1500... Est. remaining: 10m 23sbest_combination: {'lookbacks': [41, 53, 129], 'score': np.float64(1.4607914948975402), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 18sRunning iteration 321/1500... Est. remaining: 10m 11sRunning iteration 331/1500... Est. remaining: 10m 5sRunning iteration 341/1500... Est. remaining: 9m 59sRunning iteration 351/1500... Est. remaining: 9m 53sRunning iteration 361/1500... Est. remaining: 9m 47sRunning iteration 371/1500... Est. remaining: 9m 41sRunning iteration 381/1500... Est. remaining: 9m 35sRunning iteration 391/1500... Est. remaining: 9m 29sRunning iteration 401/1500... Est. remaining: 9m 23sbest_combination: {'lookbacks': [41, 53, 129], 'score': np.float64(1.4607914948975402), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 17sRunning iteration 421/1500... Est. remaining: 9m 11sRunning iteration 431/1500... Est. remaining: 9m 5sRunning iteration 441/1500... Est. remaining: 9m 0sRunning iteration 451/1500... Est. remaining: 8m 54sRunning iteration 461/1500... Est. remaining: 8m 48sRunning iteration 471/1500... Est. remaining: 8m 43sRunning iteration 481/1500... Est. remaining: 8m 37sRunning iteration 491/1500... Est. remaining: 8m 32sRunning iteration 501/1500... Est. remaining: 8m 26sbest_combination: {'lookbacks': [41, 53, 129], 'score': np.float64(1.4607914948975402), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 21sRunning iteration 521/1500... Est. remaining: 8m 15sRunning iteration 531/1500... Est. remaining: 8m 10sRunning iteration 541/1500... Est. remaining: 8m 4sRunning iteration 551/1500... Est. remaining: 7m 59sRunning iteration 561/1500... Est. remaining: 7m 54sRunning iteration 571/1500... Est. remaining: 7m 48sRunning iteration 581/1500... Est. remaining: 7m 43sRunning iteration 591/1500... Est. remaining: 7m 38sRunning iteration 601/1500... Est. remaining: 7m 32sbest_combination: {'lookbacks': [41, 53, 129], 'score': np.float64(1.4607914948975402), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 27sRunning iteration 621/1500... Est. remaining: 7m 22sRunning iteration 631/1500... Est. remaining: 7m 16sRunning iteration 641/1500... Est. remaining: 7m 11sRunning iteration 651/1500... Est. remaining: 7m 6sRunning iteration 661/1500... Est. remaining: 7m 1sRunning iteration 671/1500... Est. remaining: 6m 55sRunning iteration 681/1500... Est. remaining: 6m 50sRunning iteration 691/1500... Est. remaining: 6m 45sRunning iteration 701/1500... Est. remaining: 6m 40sbest_combination: {'lookbacks': [41, 53, 129], 'score': np.float64(1.4607914948975402), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 35sRunning iteration 721/1500... Est. remaining: 6m 29sRunning iteration 731/1500... Est. remaining: 6m 24sRunning iteration 741/1500... Est. remaining: 6m 19sRunning iteration 751/1500... Est. remaining: 6m 14sRunning iteration 761/1500... Est. remaining: 6m 9sRunning iteration 771/1500... Est. remaining: 6m 4sRunning iteration 781/1500... Est. remaining: 5m 59sRunning iteration 791/1500... Est. remaining: 5m 53sRunning iteration 801/1500... Est. remaining: 5m 48sbest_combination: {'lookbacks': [41, 53, 129], 'score': np.float64(1.4607914948975402), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,806,001,048
Annual Return: 43.61%
Sharpe Ratio: 1.57821
Sortino Ratio: 1.474
Max Drawdown: -35.2%
Avg Drawdown: -8.5%
Normalized Score: 1.661
Lookback periods: [42, 52, 126] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 811/1500... Est. remaining: 5m 44sRunning iteration 821/1500... Est. remaining: 5m 39sRunning iteration 831/1500... Est. remaining: 5m 34sRunning iteration 841/1500... Est. remaining: 5m 29sRunning iteration 851/1500... Est. remaining: 5m 23sRunning iteration 861/1500... Est. remaining: 5m 18sRunning iteration 871/1500... Est. remaining: 5m 13sRunning iteration 881/1500... Est. remaining: 5m 8sRunning iteration 891/1500... Est. remaining: 5m 3sRunning iteration 901/1500... Est. remaining: 4m 58sbest_combination: {'lookbacks': [42, 52, 126], 'score': np.float64(1.6605637011741592), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 53sRunning iteration 921/1500... Est. remaining: 4m 48sRunning iteration 931/1500... Est. remaining: 4m 43sRunning iteration 941/1500... Est. remaining: 4m 38sRunning iteration 951/1500... Est. remaining: 4m 33sRunning iteration 961/1500... Est. remaining: 4m 28sRunning iteration 971/1500... Est. remaining: 4m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,287,059,066
Annual Return: 44.27%
Sharpe Ratio: 1.57879
Sortino Ratio: 1.477
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.739
Lookback periods: [42, 51, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 981/1500... Est. remaining: 4m 18sRunning iteration 991/1500... Est. remaining: 4m 13sRunning iteration 1001/1500... Est. remaining: 8m 8sbest_combination: {'lookbacks': [42, 51, 131], 'score': np.float64(1.7387980763639423), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 7m 56sRunning iteration 1021/1500... Est. remaining: 7m 44sRunning iteration 1031/1500... Est. remaining: 7m 32sRunning iteration 1041/1500... Est. remaining: 7m 20sRunning iteration 1051/1500... Est. remaining: 7m 8sRunning iteration 1061/1500... Est. remaining: 6m 57sRunning iteration 1071/1500... Est. remaining: 6m 45sRunning iteration 1081/1500... Est. remaining: 6m 34sRunning iteration 1091/1500... Est. remaining: 6m 23sRunning iteration 1101/1500... Est. remaining: 6m 12sbest_combination: {'lookbacks': [42, 51, 131], 'score': np.float64(1.7387980763639423), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 6m 1sRunning iteration 1121/1500... Est. remaining: 5m 50sRunning iteration 1131/1500... Est. remaining: 5m 40sRunning iteration 1141/1500... Est. remaining: 5m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,763,808,724
Annual Return: 44.83%
Sharpe Ratio: 1.60966
Sortino Ratio: 1.495
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.879
Lookback periods: [42, 52, 140] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1151/1500... Est. remaining: 5m 19sRunning iteration 1161/1500... Est. remaining: 5m 8sRunning iteration 1171/1500... Est. remaining: 4m 58sRunning iteration 1181/1500... Est. remaining: 4m 48sRunning iteration 1191/1500... Est. remaining: 4m 38sRunning iteration 1201/1500... Est. remaining: 4m 28sbest_combination: {'lookbacks': [42, 52, 140], 'score': np.float64(1.8788783395434094), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 4m 18sRunning iteration 1221/1500... Est. remaining: 4m 8sRunning iteration 1231/1500... Est. remaining: 3m 58sRunning iteration 1241/1500... Est. remaining: 3m 49sRunning iteration 1251/1500... Est. remaining: 3m 39sRunning iteration 1261/1500... Est. remaining: 3m 29sRunning iteration 1271/1500... Est. remaining: 3m 20sRunning iteration 1281/1500... Est. remaining: 3m 10sRunning iteration 1291/1500... Est. remaining: 3m 1sRunning iteration 1301/1500... Est. remaining: 2m 52sbest_combination: {'lookbacks': [42, 52, 140], 'score': np.float64(1.8788783395434094), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 43sRunning iteration 1321/1500... Est. remaining: 2m 34sRunning iteration 1331/1500... Est. remaining: 2m 25sRunning iteration 1341/1500... Est. remaining: 2m 16sRunning iteration 1351/1500... Est. remaining: 2m 7sRunning iteration 1361/1500... Est. remaining: 1m 58sRunning iteration 1371/1500... Est. remaining: 1m 49sRunning iteration 1381/1500... Est. remaining: 1m 40sRunning iteration 1391/1500... Est. remaining: 1m 32sRunning iteration 1401/1500... Est. remaining: 1m 23sbest_combination: {'lookbacks': [42, 52, 140], 'score': np.float64(1.8788783395434094), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 14sRunning iteration 1421/1500... Est. remaining: 1m 6sRunning iteration 1431/1500... Est. remaining: 0m 57sRunning iteration 1441/1500... Est. remaining: 0m 49sRunning iteration 1451/1500... Est. remaining: 0m 41sRunning iteration 1461/1500... Est. remaining: 0m 32sRunning iteration 1471/1500... Est. remaining: 0m 24sRunning iteration 1481/1500... Est. remaining: 0m 16sRunning iteration 1491/1500... Est. remaining: 0m 8s
Monte Carlo simulation completed in 20.3 minutes
Best normalized score: 1.88
best_combination: {'lookbacks': [42, 52, 140], 'score': np.float64(1.8788783395434094), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 52, 140] (score: 1.8789)

Monte Carlo simulation completed in 20.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 52, 140] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 99 selections (23.8%)
3. naz100_pine: 74 selections (17.8%)
4. naz100_pi: 72 selections (17.3%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,763,808,723.71
Average Annualized Gain: 44.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Wed Aug 27 22:24:07 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,052,435,114
Annual Return: 39.61%
Sharpe Ratio: 1.30321
Sortino Ratio: 1.259
Max Drawdown: -73.7%
Avg Drawdown: -13.7%
Normalized Score: -1.302
Lookback periods: [158, 194, 258] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,386,266,282
Annual Return: 40.72%
Sharpe Ratio: 1.34038
Sortino Ratio: 1.288
Max Drawdown: -72.2%
Avg Drawdown: -13.9%
Normalized Score: -0.870
Lookback periods: [132, 190, 247] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,342,901,841
Annual Return: 40.59%
Sharpe Ratio: 1.33786
Sortino Ratio: 1.288
Max Drawdown: -69.6%
Avg Drawdown: -13.4%
Normalized Score: -0.869
Lookback periods: [221, 244, 273] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,769,933,630
Annual Return: 41.72%
Sharpe Ratio: 1.39833
Sortino Ratio: 1.334
Max Drawdown: -64.9%
Avg Drawdown: -13.2%
Normalized Score: -0.330
Lookback periods: [116, 119, 142] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,826,376,133
Annual Return: 43.64%
Sharpe Ratio: 1.43816
Sortino Ratio: 1.403
Max Drawdown: -68.2%
Avg Drawdown: -12.7%
Normalized Score: 0.413
Lookback periods: [135, 143, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 55sRunning iteration 41/1500... Est. remaining: 17m 6sRunning iteration 51/1500... Est. remaining: 15m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,617,667,956
Annual Return: 44.67%
Sharpe Ratio: 1.47089
Sortino Ratio: 1.435
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.953
Lookback periods: [146, 171, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 15m 39sRunning iteration 71/1500... Est. remaining: 15m 1sRunning iteration 81/1500... Est. remaining: 14m 32sRunning iteration 91/1500... Est. remaining: 14m 7sRunning iteration 101/1500... Est. remaining: 13m 45sbest_combination: {'lookbacks': [146, 171, 190], 'score': np.float64(0.952721977775715), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 27sRunning iteration 121/1500... Est. remaining: 13m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,205,810,981
Annual Return: 45.30%
Sharpe Ratio: 1.49270
Sortino Ratio: 1.451
Max Drawdown: -64.9%
Avg Drawdown: -12.2%
Normalized Score: 1.109
Lookback periods: [140, 146, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 9sRunning iteration 141/1500... Est. remaining: 12m 57sRunning iteration 151/1500... Est. remaining: 12m 44sRunning iteration 161/1500... Est. remaining: 12m 33sRunning iteration 171/1500... Est. remaining: 12m 22sRunning iteration 181/1500... Est. remaining: 12m 12sRunning iteration 191/1500... Est. remaining: 12m 2sRunning iteration 201/1500... Est. remaining: 11m 52sbest_combination: {'lookbacks': [140, 146, 169], 'score': np.float64(1.1090521394179922), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 43sRunning iteration 221/1500... Est. remaining: 11m 35sRunning iteration 231/1500... Est. remaining: 11m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,637,093,562
Annual Return: 45.71%
Sharpe Ratio: 1.48491
Sortino Ratio: 1.457
Max Drawdown: -61.8%
Avg Drawdown: -12.4%
Normalized Score: 1.244
Lookback periods: [152, 178, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/1500... Est. remaining: 11m 25sRunning iteration 251/1500... Est. remaining: 11m 17sRunning iteration 261/1500... Est. remaining: 11m 9sRunning iteration 271/1500... Est. remaining: 11m 1sRunning iteration 281/1500... Est. remaining: 10m 54sRunning iteration 291/1500... Est. remaining: 10m 46sRunning iteration 301/1500... Est. remaining: 10m 39sbest_combination: {'lookbacks': [152, 178, 179], 'score': np.float64(1.2438696711888118), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 32sRunning iteration 321/1500... Est. remaining: 10m 25sRunning iteration 331/1500... Est. remaining: 10m 19sRunning iteration 341/1500... Est. remaining: 10m 12sRunning iteration 351/1500... Est. remaining: 10m 6sRunning iteration 361/1500... Est. remaining: 9m 59sRunning iteration 371/1500... Est. remaining: 9m 53sRunning iteration 381/1500... Est. remaining: 9m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,006,037,189
Annual Return: 48.53%
Sharpe Ratio: 1.59540
Sortino Ratio: 1.560
Max Drawdown: -60.1%
Avg Drawdown: -11.4%
Normalized Score: 2.467
Lookback periods: [139, 153, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 9m 44sRunning iteration 401/1500... Est. remaining: 9m 38sbest_combination: {'lookbacks': [139, 153, 157], 'score': np.float64(2.4665518180134143), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 32sRunning iteration 421/1500... Est. remaining: 9m 26sRunning iteration 431/1500... Est. remaining: 9m 20sRunning iteration 441/1500... Est. remaining: 9m 14sRunning iteration 451/1500... Est. remaining: 9m 8sRunning iteration 461/1500... Est. remaining: 9m 2sRunning iteration 471/1500... Est. remaining: 8m 57sRunning iteration 481/1500... Est. remaining: 8m 51sRunning iteration 491/1500... Est. remaining: 8m 45sRunning iteration 501/1500... Est. remaining: 8m 39sbest_combination: {'lookbacks': [139, 153, 157], 'score': np.float64(2.4665518180134143), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 34sRunning iteration 521/1500... Est. remaining: 8m 28sRunning iteration 531/1500... Est. remaining: 8m 23sRunning iteration 541/1500... Est. remaining: 8m 17sRunning iteration 551/1500... Est. remaining: 8m 11sRunning iteration 561/1500... Est. remaining: 8m 6sRunning iteration 571/1500... Est. remaining: 8m 0sRunning iteration 581/1500... Est. remaining: 7m 55sRunning iteration 591/1500... Est. remaining: 7m 49sRunning iteration 601/1500... Est. remaining: 7m 44sbest_combination: {'lookbacks': [139, 153, 157], 'score': np.float64(2.4665518180134143), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 39sRunning iteration 621/1500... Est. remaining: 7m 33sRunning iteration 631/1500... Est. remaining: 7m 28sRunning iteration 641/1500... Est. remaining: 7m 22sRunning iteration 651/1500... Est. remaining: 7m 17sRunning iteration 661/1500... Est. remaining: 7m 11sRunning iteration 671/1500... Est. remaining: 7m 6sRunning iteration 681/1500... Est. remaining: 7m 0sRunning iteration 691/1500... Est. remaining: 6m 55sRunning iteration 701/1500... Est. remaining: 6m 50sbest_combination: {'lookbacks': [139, 153, 157], 'score': np.float64(2.4665518180134143), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 44sRunning iteration 721/1500... Est. remaining: 6m 39sRunning iteration 731/1500... Est. remaining: 6m 34sRunning iteration 741/1500... Est. remaining: 6m 28sRunning iteration 751/1500... Est. remaining: 6m 23sRunning iteration 761/1500... Est. remaining: 6m 18sRunning iteration 771/1500... Est. remaining: 6m 12sRunning iteration 781/1500... Est. remaining: 6m 7sRunning iteration 791/1500... Est. remaining: 6m 2sRunning iteration 801/1500... Est. remaining: 5m 57sbest_combination: {'lookbacks': [139, 153, 157], 'score': np.float64(2.4665518180134143), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 51sRunning iteration 821/1500... Est. remaining: 5m 46sRunning iteration 831/1500... Est. remaining: 5m 41sRunning iteration 841/1500... Est. remaining: 5m 36sRunning iteration 851/1500... Est. remaining: 5m 31sRunning iteration 861/1500... Est. remaining: 5m 25sRunning iteration 871/1500... Est. remaining: 5m 20sRunning iteration 881/1500... Est. remaining: 5m 15sRunning iteration 891/1500... Est. remaining: 5m 10sRunning iteration 901/1500... Est. remaining: 5m 4sbest_combination: {'lookbacks': [139, 153, 157], 'score': np.float64(2.4665518180134143), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 59sRunning iteration 921/1500... Est. remaining: 4m 54sRunning iteration 931/1500... Est. remaining: 4m 49sRunning iteration 941/1500... Est. remaining: 4m 44sRunning iteration 951/1500... Est. remaining: 4m 39sRunning iteration 961/1500... Est. remaining: 4m 34sRunning iteration 971/1500... Est. remaining: 4m 28sRunning iteration 981/1500... Est. remaining: 4m 23sRunning iteration 991/1500... Est. remaining: 4m 18sRunning iteration 1001/1500... Est. remaining: 4m 13sbest_combination: {'lookbacks': [139, 153, 157], 'score': np.float64(2.4665518180134143), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 8sRunning iteration 1021/1500... Est. remaining: 4m 3sRunning iteration 1031/1500... Est. remaining: 3m 58sRunning iteration 1041/1500... Est. remaining: 3m 53sRunning iteration 1051/1500... Est. remaining: 3m 48sRunning iteration 1061/1500... Est. remaining: 3m 42sRunning iteration 1071/1500... Est. remaining: 3m 37sRunning iteration 1081/1500... Est. remaining: 3m 32sRunning iteration 1091/1500... Est. remaining: 3m 27sRunning iteration 1101/1500... Est. remaining: 3m 22sbest_combination: {'lookbacks': [139, 153, 157], 'score': np.float64(2.4665518180134143), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 17sRunning iteration 1121/1500... Est. remaining: 3m 12sRunning iteration 1131/1500... Est. remaining: 3m 6sRunning iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 56sRunning iteration 1161/1500... Est. remaining: 2m 51sRunning iteration 1171/1500... Est. remaining: 2m 46sRunning iteration 1181/1500... Est. remaining: 2m 41sRunning iteration 1191/1500... Est. remaining: 2m 36sRunning iteration 1201/1500... Est. remaining: 2m 31sbest_combination: {'lookbacks': [139, 153, 157], 'score': np.float64(2.4665518180134143), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 26sRunning iteration 1221/1500... Est. remaining: 2m 21sRunning iteration 1231/1500... Est. remaining: 2m 16sRunning iteration 1241/1500... Est. remaining: 2m 11sRunning iteration 1251/1500... Est. remaining: 2m 6sRunning iteration 1261/1500... Est. remaining: 2m 1sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [139, 153, 157], 'score': np.float64(2.4665518180134143), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [139, 153, 157], 'score': np.float64(2.4665518180134143), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 2.47
best_combination: {'lookbacks': [139, 153, 157], 'score': np.float64(2.4665518180134143), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 153, 157] (score: 2.4666)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 153, 157] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,006,037,189.26
Average Annualized Gain: 48.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Wed Aug 27 22:36:46 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,033,691,324
Annual Return: 39.53%
Sharpe Ratio: 1.37613
Sortino Ratio: 1.272
Max Drawdown: -55.0%
Avg Drawdown: -12.4%
Normalized Score: -1.021
Lookback periods: [54, 123, 142] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,455,310,803
Annual Return: 44.48%
Sharpe Ratio: 1.46917
Sortino Ratio: 1.426
Max Drawdown: -61.4%
Avg Drawdown: -12.1%
Normalized Score: -0.029
Lookback periods: [129, 168, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 6sRunning iteration 21/1500... Est. remaining: 17m 54sRunning iteration 31/1500... Est. remaining: 15m 44sRunning iteration 41/1500... Est. remaining: 14m 37sRunning iteration 51/1500... Est. remaining: 13m 59sRunning iteration 61/1500... Est. remaining: 13m 31sRunning iteration 71/1500... Est. remaining: 13m 10sRunning iteration 81/1500... Est. remaining: 12m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,588,361,822
Annual Return: 44.64%
Sharpe Ratio: 1.48139
Sortino Ratio: 1.423
Max Drawdown: -61.6%
Avg Drawdown: -12.0%
Normalized Score: -0.008
Lookback periods: [107, 197, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 12m 59sRunning iteration 101/1500... Est. remaining: 12m 45sbest_combination: {'lookbacks': [107, 197, 197], 'score': np.float64(-0.00848747556224314), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,008,845,795
Annual Return: 45.10%
Sharpe Ratio: 1.50174
Sortino Ratio: 1.454
Max Drawdown: -60.8%
Avg Drawdown: -12.0%
Normalized Score: 0.213
Lookback periods: [174, 254, 274] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 12m 49sRunning iteration 121/1500... Est. remaining: 12m 38sRunning iteration 131/1500... Est. remaining: 12m 28sRunning iteration 141/1500... Est. remaining: 12m 17sRunning iteration 151/1500... Est. remaining: 12m 8sRunning iteration 161/1500... Est. remaining: 11m 59sRunning iteration 171/1500... Est. remaining: 11m 50sRunning iteration 181/1500... Est. remaining: 11m 41sRunning iteration 191/1500... Est. remaining: 11m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,558,741,079
Annual Return: 46.47%
Sharpe Ratio: 1.51010
Sortino Ratio: 1.459
Max Drawdown: -59.9%
Avg Drawdown: -11.7%
Normalized Score: 0.372
Lookback periods: [178, 198, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 11m 34sbest_combination: {'lookbacks': [178, 198, 200], 'score': np.float64(0.3715985583172945), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 26sRunning iteration 221/1500... Est. remaining: 11m 18sRunning iteration 231/1500... Est. remaining: 11m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,541,738,236
Annual Return: 41.15%
Sharpe Ratio: 1.48215
Sortino Ratio: 1.379
Max Drawdown: -39.3%
Avg Drawdown: -10.1%
Normalized Score: 0.436
Lookback periods: [37, 78, 113] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/1500... Est. remaining: 11m 9sRunning iteration 251/1500... Est. remaining: 11m 2sRunning iteration 261/1500... Est. remaining: 10m 54sRunning iteration 271/1500... Est. remaining: 10m 47sRunning iteration 281/1500... Est. remaining: 10m 40sRunning iteration 291/1500... Est. remaining: 10m 34sRunning iteration 301/1500... Est. remaining: 10m 27sbest_combination: {'lookbacks': [37, 78, 113], 'score': np.float64(0.4360177123411644), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 21sRunning iteration 321/1500... Est. remaining: 10m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,348,703,427
Annual Return: 47.04%
Sharpe Ratio: 1.51865
Sortino Ratio: 1.487
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.629
Lookback periods: [174, 189, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 331/1500... Est. remaining: 10m 13sRunning iteration 341/1500... Est. remaining: 10m 6sRunning iteration 351/1500... Est. remaining: 10m 0sRunning iteration 361/1500... Est. remaining: 9m 54sRunning iteration 371/1500... Est. remaining: 9m 48sRunning iteration 381/1500... Est. remaining: 9m 42sRunning iteration 391/1500... Est. remaining: 9m 36sRunning iteration 401/1500... Est. remaining: 9m 30sbest_combination: {'lookbacks': [174, 189, 196], 'score': np.float64(0.6288612638229376), 'visits': 1}
Running iteration 411/1500... Est. remaining: 27m 19sRunning iteration 421/1500... Est. remaining: 29m 59sRunning iteration 431/1500... Est. remaining: 29m 13sRunning iteration 441/1500... Est. remaining: 29m 43sRunning iteration 451/1500... Est. remaining: 28m 58sRunning iteration 461/1500... Est. remaining: 28m 15sRunning iteration 471/1500... Est. remaining: 61m 41sRunning iteration 481/1500... Est. remaining: 59m 59sRunning iteration 491/1500... Est. remaining: 58m 27sRunning iteration 501/1500... Est. remaining: 56m 52sbest_combination: {'lookbacks': [174, 189, 196], 'score': np.float64(0.6288612638229376), 'visits': 1}
Running iteration 511/1500... Est. remaining: 55m 21sRunning iteration 521/1500... Est. remaining: 53m 54sRunning iteration 531/1500... Est. remaining: 52m 29sRunning iteration 541/1500... Est. remaining: 51m 8sRunning iteration 551/1500... Est. remaining: 49m 49sRunning iteration 561/1500... Est. remaining: 48m 33sRunning iteration 571/1500... Est. remaining: 47m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,521,162,062
Annual Return: 48.29%
Sharpe Ratio: 1.56140
Sortino Ratio: 1.523
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.920
Lookback periods: [178, 188, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 46m 10sRunning iteration 591/1500... Est. remaining: 45m 1sRunning iteration 601/1500... Est. remaining: 43m 54sbest_combination: {'lookbacks': [178, 188, 195], 'score': np.float64(0.9204997858328829), 'visits': 1}
Running iteration 611/1500... Est. remaining: 42m 49sRunning iteration 621/1500... Est. remaining: 41m 46sRunning iteration 631/1500... Est. remaining: 40m 45sRunning iteration 641/1500... Est. remaining: 39m 46sRunning iteration 651/1500... Est. remaining: 38m 48sRunning iteration 661/1500... Est. remaining: 37m 52sRunning iteration 671/1500... Est. remaining: 36m 58sRunning iteration 681/1500... Est. remaining: 36m 5sRunning iteration 691/1500... Est. remaining: 35m 13sRunning iteration 701/1500... Est. remaining: 34m 23sbest_combination: {'lookbacks': [178, 188, 195], 'score': np.float64(0.9204997858328829), 'visits': 1}
Running iteration 711/1500... Est. remaining: 33m 34sRunning iteration 721/1500... Est. remaining: 32m 46sRunning iteration 731/1500... Est. remaining: 31m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,128,282,602
Annual Return: 42.47%
Sharpe Ratio: 1.53397
Sortino Ratio: 1.434
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.141
Lookback periods: [42, 42, 127] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 31m 15sRunning iteration 751/1500... Est. remaining: 30m 30sRunning iteration 761/1500... Est. remaining: 29m 47sRunning iteration 771/1500... Est. remaining: 29m 4sRunning iteration 781/1500... Est. remaining: 28m 23sRunning iteration 791/1500... Est. remaining: 27m 42sRunning iteration 801/1500... Est. remaining: 27m 3sbest_combination: {'lookbacks': [42, 42, 127], 'score': np.float64(1.141057259115006), 'visits': 1}
Running iteration 811/1500... Est. remaining: 26m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,987,205,505
Annual Return: 43.87%
Sharpe Ratio: 1.58212
Sortino Ratio: 1.474
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.528
Lookback periods: [42, 45, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 821/1500... Est. remaining: 25m 47sRunning iteration 831/1500... Est. remaining: 25m 10sRunning iteration 841/1500... Est. remaining: 24m 33sRunning iteration 851/1500... Est. remaining: 23m 58sRunning iteration 861/1500... Est. remaining: 23m 23sRunning iteration 871/1500... Est. remaining: 22m 48sRunning iteration 881/1500... Est. remaining: 22m 15sRunning iteration 891/1500... Est. remaining: 21m 42sRunning iteration 901/1500... Est. remaining: 21m 9sbest_combination: {'lookbacks': [42, 45, 131], 'score': np.float64(1.5281371675294457), 'visits': 1}
Running iteration 911/1500... Est. remaining: 20m 38sRunning iteration 921/1500... Est. remaining: 20m 6sRunning iteration 931/1500... Est. remaining: 19m 36sRunning iteration 941/1500... Est. remaining: 19m 6sRunning iteration 951/1500... Est. remaining: 18m 36sRunning iteration 961/1500... Est. remaining: 18m 7sRunning iteration 971/1500... Est. remaining: 17m 39sRunning iteration 981/1500... Est. remaining: 17m 11sRunning iteration 991/1500... Est. remaining: 16m 43sRunning iteration 1001/1500... Est. remaining: 16m 16sbest_combination: {'lookbacks': [42, 45, 131], 'score': np.float64(1.5281371675294457), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 15m 49sRunning iteration 1021/1500... Est. remaining: 15m 23sRunning iteration 1031/1500... Est. remaining: 14m 57sRunning iteration 1041/1500... Est. remaining: 14m 32sRunning iteration 1051/1500... Est. remaining: 14m 7sRunning iteration 1061/1500... Est. remaining: 13m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,017,863,921
Annual Return: 43.91%
Sharpe Ratio: 1.58303
Sortino Ratio: 1.488
Max Drawdown: -35.1%
Avg Drawdown: -8.5%
Normalized Score: 1.554
Lookback periods: [42, 44, 121] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1071/1500... Est. remaining: 13m 18sRunning iteration 1081/1500... Est. remaining: 12m 54sRunning iteration 1091/1500... Est. remaining: 12m 31sRunning iteration 1101/1500... Est. remaining: 12m 8sbest_combination: {'lookbacks': [42, 44, 121], 'score': np.float64(1.5542572726871202), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 11m 45sRunning iteration 1121/1500... Est. remaining: 11m 22sRunning iteration 1131/1500... Est. remaining: 11m 0sRunning iteration 1141/1500... Est. remaining: 10m 38sRunning iteration 1151/1500... Est. remaining: 10m 16sRunning iteration 1161/1500... Est. remaining: 9m 55sRunning iteration 1171/1500... Est. remaining: 9m 34sRunning iteration 1181/1500... Est. remaining: 9m 13sRunning iteration 1191/1500... Est. remaining: 8m 52sRunning iteration 1201/1500... Est. remaining: 8m 32sbest_combination: {'lookbacks': [42, 44, 121], 'score': np.float64(1.5542572726871202), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 8m 12sRunning iteration 1221/1500... Est. remaining: 7m 52sRunning iteration 1231/1500... Est. remaining: 7m 33sRunning iteration 1241/1500... Est. remaining: 7m 13sRunning iteration 1251/1500... Est. remaining: 6m 54sRunning iteration 1261/1500... Est. remaining: 6m 35sRunning iteration 1271/1500... Est. remaining: 6m 17sRunning iteration 1281/1500... Est. remaining: 5m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,138,533,904
Annual Return: 44.08%
Sharpe Ratio: 1.59486
Sortino Ratio: 1.500
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.610
Lookback periods: [42, 42, 117] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1291/1500... Est. remaining: 5m 40sRunning iteration 1301/1500... Est. remaining: 5m 22sbest_combination: {'lookbacks': [42, 42, 117], 'score': np.float64(1.6096709139702567), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 5m 5sRunning iteration 1321/1500... Est. remaining: 4m 47sRunning iteration 1331/1500... Est. remaining: 4m 30sRunning iteration 1341/1500... Est. remaining: 4m 12sRunning iteration 1351/1500... Est. remaining: 3m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,512,602,142
Annual Return: 44.55%
Sharpe Ratio: 1.59205
Sortino Ratio: 1.502
Max Drawdown: -35.2%
Avg Drawdown: -8.8%
Normalized Score: 1.629
Lookback periods: [42, 44, 111] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1361/1500... Est. remaining: 3m 39sRunning iteration 1371/1500... Est. remaining: 3m 22sRunning iteration 1381/1500... Est. remaining: 3m 5sRunning iteration 1391/1500... Est. remaining: 2m 49sRunning iteration 1401/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [42, 44, 111], 'score': np.float64(1.6290461238307927), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 2m 17sRunning iteration 1421/1500... Est. remaining: 2m 1sRunning iteration 1431/1500... Est. remaining: 1m 45sRunning iteration 1441/1500... Est. remaining: 1m 30sRunning iteration 1451/1500... Est. remaining: 1m 14sRunning iteration 1461/1500... Est. remaining: 0m 59sRunning iteration 1471/1500... Est. remaining: 0m 44sRunning iteration 1481/1500... Est. remaining: 0m 29sRunning iteration 1491/1500... Est. remaining: 0m 14s
Monte Carlo simulation completed in 36.6 minutes
Best normalized score: 1.63
best_combination: {'lookbacks': [42, 44, 111], 'score': np.float64(1.6290461238307927), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [42, 44, 111] (score: 1.6290)

Monte Carlo simulation completed in 36.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [42, 44, 111] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 52 selections (12.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,512,602,142.19
Average Annualized Gain: 44.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 1412m 39s
End time: Wed Aug 27 23:13:24 EDT 2025
Average time per successful run: 94m 10s
==============================================================
✓ All runs completed successfully!
