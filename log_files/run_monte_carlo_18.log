Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Mon Aug 25 12:52:06 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Mon Aug 25 12:52:06 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-25T12:34:50.600826
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.0504
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $926,839,743
Annual Return: 39.10%
Sharpe Ratio: 1.33909
Sortino Ratio: 1.260
Max Drawdown: -56.9%
Avg Drawdown: -13.4%
Normalized Score: -1.095
Lookback periods: [85, 120, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,494,288,267
Annual Return: 43.13%
Sharpe Ratio: 1.42574
Sortino Ratio: 1.385
Max Drawdown: -73.0%
Avg Drawdown: -13.0%
Normalized Score: -0.979
Lookback periods: [126, 165, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,058,868,558
Annual Return: 42.34%
Sharpe Ratio: 1.40004
Sortino Ratio: 1.355
Max Drawdown: -67.1%
Avg Drawdown: -12.9%
Normalized Score: -0.897
Lookback periods: [113, 145, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $731,016,969
Annual Return: 38.15%
Sharpe Ratio: 1.34682
Sortino Ratio: 1.236
Max Drawdown: -52.3%
Avg Drawdown: -11.3%
Normalized Score: -0.591
Lookback periods: [55, 85, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 8sRunning iteration 21/1500... Est. remaining: 21m 13sRunning iteration 31/1500... Est. remaining: 18m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,114,070,764
Annual Return: 42.44%
Sharpe Ratio: 1.38487
Sortino Ratio: 1.347
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: -0.432
Lookback periods: [171, 172, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,277,684,185
Annual Return: 45.37%
Sharpe Ratio: 1.49605
Sortino Ratio: 1.452
Max Drawdown: -64.4%
Avg Drawdown: -12.9%
Normalized Score: -0.353
Lookback periods: [139, 147, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 8sRunning iteration 51/1500... Est. remaining: 16m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,430,634,142
Annual Return: 43.02%
Sharpe Ratio: 1.41362
Sortino Ratio: 1.373
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: -0.280
Lookback periods: [167, 171, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 29sRunning iteration 71/1500... Est. remaining: 15m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,699,599,522
Annual Return: 47.26%
Sharpe Ratio: 1.54575
Sortino Ratio: 1.517
Max Drawdown: -68.5%
Avg Drawdown: -11.7%
Normalized Score: 0.033
Lookback periods: [128, 154, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,917,384,283
Annual Return: 46.74%
Sharpe Ratio: 1.51379
Sortino Ratio: 1.476
Max Drawdown: -61.9%
Avg Drawdown: -11.7%
Normalized Score: 0.119
Lookback periods: [176, 187, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 15m 54sRunning iteration 91/1500... Est. remaining: 15m 22sRunning iteration 101/1500... Est. remaining: 14m 56sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,583,365,405
Annual Return: 45.66%
Sharpe Ratio: 1.48877
Sortino Ratio: 1.463
Max Drawdown: -59.0%
Avg Drawdown: -10.6%
Normalized Score: 0.311
Lookback periods: [161, 169, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 14m 25sRunning iteration 131/1500... Est. remaining: 14m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,953,770,116
Annual Return: 46.76%
Sharpe Ratio: 1.53972
Sortino Ratio: 1.495
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 0.461
Lookback periods: [132, 157, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 13m 59sRunning iteration 151/1500... Est. remaining: 13m 44sRunning iteration 161/1500... Est. remaining: 13m 28sRunning iteration 171/1500... Est. remaining: 13m 14sRunning iteration 181/1500... Est. remaining: 13m 1sRunning iteration 191/1500... Est. remaining: 12m 48sRunning iteration 201/1500... Est. remaining: 12m 37sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 27sRunning iteration 221/1500... Est. remaining: 12m 16sRunning iteration 231/1500... Est. remaining: 12m 6sRunning iteration 241/1500... Est. remaining: 11m 57sRunning iteration 251/1500... Est. remaining: 11m 47sRunning iteration 261/1500... Est. remaining: 11m 39sRunning iteration 271/1500... Est. remaining: 11m 30sRunning iteration 281/1500... Est. remaining: 11m 22sRunning iteration 291/1500... Est. remaining: 11m 14sRunning iteration 301/1500... Est. remaining: 11m 6sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 58sRunning iteration 321/1500... Est. remaining: 10m 51sRunning iteration 331/1500... Est. remaining: 10m 44sRunning iteration 341/1500... Est. remaining: 10m 36sRunning iteration 351/1500... Est. remaining: 10m 29sRunning iteration 361/1500... Est. remaining: 10m 22sRunning iteration 371/1500... Est. remaining: 10m 15sRunning iteration 381/1500... Est. remaining: 10m 8sRunning iteration 391/1500... Est. remaining: 10m 2sRunning iteration 401/1500... Est. remaining: 9m 55sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 49sRunning iteration 421/1500... Est. remaining: 9m 42sRunning iteration 431/1500... Est. remaining: 9m 36sRunning iteration 441/1500... Est. remaining: 9m 30sRunning iteration 451/1500... Est. remaining: 9m 23sRunning iteration 461/1500... Est. remaining: 9m 17sRunning iteration 471/1500... Est. remaining: 9m 11sRunning iteration 481/1500... Est. remaining: 9m 5sRunning iteration 491/1500... Est. remaining: 8m 59sRunning iteration 501/1500... Est. remaining: 8m 53sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,232,995,879
Annual Return: 48.63%
Sharpe Ratio: 1.58467
Sortino Ratio: 1.555
Max Drawdown: -58.5%
Avg Drawdown: -10.9%
Normalized Score: 0.732
Lookback periods: [155, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 8m 49sRunning iteration 521/1500... Est. remaining: 8m 43sRunning iteration 531/1500... Est. remaining: 8m 38sRunning iteration 541/1500... Est. remaining: 8m 32sRunning iteration 551/1500... Est. remaining: 8m 26sRunning iteration 561/1500... Est. remaining: 8m 20sRunning iteration 571/1500... Est. remaining: 8m 14sRunning iteration 581/1500... Est. remaining: 8m 9sRunning iteration 591/1500... Est. remaining: 8m 3sRunning iteration 601/1500... Est. remaining: 7m 57sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 51sRunning iteration 621/1500... Est. remaining: 7m 46sRunning iteration 631/1500... Est. remaining: 7m 41sRunning iteration 641/1500... Est. remaining: 7m 35sRunning iteration 651/1500... Est. remaining: 7m 30sRunning iteration 661/1500... Est. remaining: 7m 24sRunning iteration 671/1500... Est. remaining: 7m 19sRunning iteration 681/1500... Est. remaining: 7m 13sRunning iteration 691/1500... Est. remaining: 7m 8sRunning iteration 701/1500... Est. remaining: 7m 2sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 57sRunning iteration 721/1500... Est. remaining: 6m 52sRunning iteration 731/1500... Est. remaining: 6m 46sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 35sRunning iteration 761/1500... Est. remaining: 6m 30sRunning iteration 771/1500... Est. remaining: 6m 24sRunning iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 13sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 2sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 51sRunning iteration 841/1500... Est. remaining: 5m 46sRunning iteration 851/1500... Est. remaining: 5m 40sRunning iteration 861/1500... Est. remaining: 5m 35sRunning iteration 871/1500... Est. remaining: 5m 30sRunning iteration 881/1500... Est. remaining: 5m 24sRunning iteration 891/1500... Est. remaining: 5m 19sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 8sRunning iteration 921/1500... Est. remaining: 5m 3sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 52sRunning iteration 951/1500... Est. remaining: 4m 47sRunning iteration 961/1500... Est. remaining: 4m 41sRunning iteration 971/1500... Est. remaining: 4m 36sRunning iteration 981/1500... Est. remaining: 4m 31sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 20sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 4sRunning iteration 1041/1500... Est. remaining: 3m 59sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 43sRunning iteration 1081/1500... Est. remaining: 3m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,591,416,256
Annual Return: 41.28%
Sharpe Ratio: 1.48816
Sortino Ratio: 1.392
Max Drawdown: -37.2%
Avg Drawdown: -9.6%
Normalized Score: 0.864
Lookback periods: [50, 50, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 0.86
best_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [154, 155, 156] (score: 1.0504)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 50, 88] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 107 selections (25.7%)
2. naz100_hma: 101 selections (24.3%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 54 selections (13.0%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $1,591,416,256.04
Average Annualized Gain: 41.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Mon Aug 25 13:05:08 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $148,494,729
Annual Return: 31.94%
Sharpe Ratio: 1.12383
Sortino Ratio: 1.031
Max Drawdown: -65.7%
Avg Drawdown: -15.7%
Normalized Score: -2.566
Lookback periods: [75, 103, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $345,538,046
Annual Return: 35.19%
Sharpe Ratio: 1.24921
Sortino Ratio: 1.143
Max Drawdown: -52.3%
Avg Drawdown: -11.3%
Normalized Score: -0.850
Lookback periods: [50, 76, 115] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,115,217,724
Annual Return: 42.45%
Sharpe Ratio: 1.46736
Sortino Ratio: 1.383
Max Drawdown: -52.3%
Avg Drawdown: -11.3%
Normalized Score: 0.167
Lookback periods: [88, 95, 125] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $644,461,960
Annual Return: 37.64%
Sharpe Ratio: 1.36358
Sortino Ratio: 1.264
Max Drawdown: -38.7%
Avg Drawdown: -10.7%
Normalized Score: 0.257
Lookback periods: [52, 61, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 32m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,058,522,973
Annual Return: 46.84%
Sharpe Ratio: 1.52926
Sortino Ratio: 1.487
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.384
Lookback periods: [156, 160, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 32sRunning iteration 31/1500... Est. remaining: 19m 47sRunning iteration 41/1500... Est. remaining: 17m 52sRunning iteration 51/1500... Est. remaining: 16m 40sRunning iteration 61/1500... Est. remaining: 15m 52sRunning iteration 71/1500... Est. remaining: 15m 14sRunning iteration 81/1500... Est. remaining: 14m 43sRunning iteration 91/1500... Est. remaining: 14m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,508,763,122
Annual Return: 41.06%
Sharpe Ratio: 1.51375
Sortino Ratio: 1.406
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.330
Lookback periods: [50, 57, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 14m 19sbest_combination: {'lookbacks': [50, 57, 95], 'score': np.float64(1.3300984905861877), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 0sRunning iteration 121/1500... Est. remaining: 13m 44sRunning iteration 131/1500... Est. remaining: 13m 29sRunning iteration 141/1500... Est. remaining: 13m 15sRunning iteration 151/1500... Est. remaining: 13m 3sRunning iteration 161/1500... Est. remaining: 12m 51sRunning iteration 171/1500... Est. remaining: 12m 40sRunning iteration 181/1500... Est. remaining: 12m 30sRunning iteration 191/1500... Est. remaining: 12m 21sRunning iteration 201/1500... Est. remaining: 12m 11sbest_combination: {'lookbacks': [50, 57, 95], 'score': np.float64(1.3300984905861877), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 3sRunning iteration 221/1500... Est. remaining: 11m 54sRunning iteration 231/1500... Est. remaining: 11m 46sRunning iteration 241/1500... Est. remaining: 11m 38sRunning iteration 251/1500... Est. remaining: 11m 30sRunning iteration 261/1500... Est. remaining: 11m 25sRunning iteration 271/1500... Est. remaining: 11m 18sRunning iteration 281/1500... Est. remaining: 11m 11sRunning iteration 291/1500... Est. remaining: 11m 4sRunning iteration 301/1500... Est. remaining: 10m 57sbest_combination: {'lookbacks': [50, 57, 95], 'score': np.float64(1.3300984905861877), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 50sRunning iteration 321/1500... Est. remaining: 10m 43sRunning iteration 331/1500... Est. remaining: 10m 37sRunning iteration 341/1500... Est. remaining: 10m 30sRunning iteration 351/1500... Est. remaining: 10m 23sRunning iteration 361/1500... Est. remaining: 10m 17sRunning iteration 371/1500... Est. remaining: 10m 10sRunning iteration 381/1500... Est. remaining: 10m 4sRunning iteration 391/1500... Est. remaining: 9m 58sRunning iteration 401/1500... Est. remaining: 9m 51sbest_combination: {'lookbacks': [50, 57, 95], 'score': np.float64(1.3300984905861877), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 45sRunning iteration 421/1500... Est. remaining: 9m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,301,207,364
Annual Return: 42.79%
Sharpe Ratio: 1.52347
Sortino Ratio: 1.433
Max Drawdown: -35.6%
Avg Drawdown: -9.1%
Normalized Score: 1.347
Lookback periods: [50, 53, 86] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 9m 36sRunning iteration 441/1500... Est. remaining: 9m 30sRunning iteration 451/1500... Est. remaining: 9m 24sRunning iteration 461/1500... Est. remaining: 9m 18sRunning iteration 471/1500... Est. remaining: 9m 12sRunning iteration 481/1500... Est. remaining: 9m 7sRunning iteration 491/1500... Est. remaining: 9m 1sRunning iteration 501/1500... Est. remaining: 8m 55sbest_combination: {'lookbacks': [50, 53, 86], 'score': np.float64(1.3474530479438003), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 49sRunning iteration 521/1500... Est. remaining: 8m 43sRunning iteration 531/1500... Est. remaining: 8m 37sRunning iteration 541/1500... Est. remaining: 8m 31sRunning iteration 551/1500... Est. remaining: 8m 26sRunning iteration 561/1500... Est. remaining: 8m 20sRunning iteration 571/1500... Est. remaining: 8m 14sRunning iteration 581/1500... Est. remaining: 8m 8sRunning iteration 591/1500... Est. remaining: 8m 3sRunning iteration 601/1500... Est. remaining: 7m 57sbest_combination: {'lookbacks': [50, 53, 86], 'score': np.float64(1.3474530479438003), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 52sRunning iteration 621/1500... Est. remaining: 7m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,109,906,920
Annual Return: 44.04%
Sharpe Ratio: 1.57266
Sortino Ratio: 1.479
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.515
Lookback periods: [50, 53, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 7m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.851
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 7m 38sRunning iteration 651/1500... Est. remaining: 7m 33sRunning iteration 661/1500... Est. remaining: 7m 27sRunning iteration 671/1500... Est. remaining: 7m 21sRunning iteration 681/1500... Est. remaining: 7m 16sRunning iteration 691/1500... Est. remaining: 7m 10sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.8512232789673493), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 59sRunning iteration 721/1500... Est. remaining: 6m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.949
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/1500... Est. remaining: 6m 49sRunning iteration 741/1500... Est. remaining: 6m 43sRunning iteration 751/1500... Est. remaining: 6m 38sRunning iteration 761/1500... Est. remaining: 6m 32sRunning iteration 771/1500... Est. remaining: 6m 27sRunning iteration 781/1500... Est. remaining: 6m 21sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.9486635798664804), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 4sRunning iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 53sRunning iteration 841/1500... Est. remaining: 5m 48sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 37sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.9486635798664804), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.102
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1020329380735836), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1020329380735836), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1020329380735836), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.1020329380735836), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.156
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1564962129315695), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 2.16
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.1564962129315695), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 2.1565)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Mon Aug 25 13:18:13 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,558,949,576
Annual Return: 41.20%
Sharpe Ratio: 1.38528
Sortino Ratio: 1.324
Max Drawdown: -62.7%
Avg Drawdown: -12.6%
Normalized Score: -0.228
Lookback periods: [105, 118, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,962,185,983
Annual Return: 45.05%
Sharpe Ratio: 1.48022
Sortino Ratio: 1.440
Max Drawdown: -67.5%
Avg Drawdown: -12.2%
Normalized Score: 0.149
Lookback periods: [114, 159, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,571,431,495
Annual Return: 44.62%
Sharpe Ratio: 1.46527
Sortino Ratio: 1.417
Max Drawdown: -60.3%
Avg Drawdown: -12.4%
Normalized Score: 0.250
Lookback periods: [132, 183, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 56sRunning iteration 21/1500... Est. remaining: 21m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,790,712,829
Annual Return: 45.85%
Sharpe Ratio: 1.51595
Sortino Ratio: 1.475
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: 0.631
Lookback periods: [131, 147, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,770,277,533
Annual Return: 45.83%
Sharpe Ratio: 1.51333
Sortino Ratio: 1.466
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.691
Lookback periods: [130, 156, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 10sRunning iteration 51/1500... Est. remaining: 16m 55sRunning iteration 61/1500... Est. remaining: 16m 2sRunning iteration 71/1500... Est. remaining: 15m 24sRunning iteration 81/1500... Est. remaining: 14m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,050,212,044
Annual Return: 42.32%
Sharpe Ratio: 1.50072
Sortino Ratio: 1.413
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.516
Lookback periods: [50, 97, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 47sRunning iteration 101/1500... Est. remaining: 14m 25sbest_combination: {'lookbacks': [50, 97, 97], 'score': np.float64(1.5156225254507985), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 6sRunning iteration 121/1500... Est. remaining: 13m 48sRunning iteration 131/1500... Est. remaining: 13m 33sRunning iteration 141/1500... Est. remaining: 13m 19sRunning iteration 151/1500... Est. remaining: 13m 7sRunning iteration 161/1500... Est. remaining: 12m 55sRunning iteration 171/1500... Est. remaining: 12m 45sRunning iteration 181/1500... Est. remaining: 12m 34sRunning iteration 191/1500... Est. remaining: 12m 25sRunning iteration 201/1500... Est. remaining: 12m 16sbest_combination: {'lookbacks': [50, 97, 97], 'score': np.float64(1.5156225254507985), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 7sRunning iteration 221/1500... Est. remaining: 11m 58sRunning iteration 231/1500... Est. remaining: 11m 50sRunning iteration 241/1500... Est. remaining: 11m 42sRunning iteration 251/1500... Est. remaining: 11m 34sRunning iteration 261/1500... Est. remaining: 11m 27sRunning iteration 271/1500... Est. remaining: 11m 19sRunning iteration 281/1500... Est. remaining: 11m 12sRunning iteration 291/1500... Est. remaining: 11m 5sRunning iteration 301/1500... Est. remaining: 10m 57sbest_combination: {'lookbacks': [50, 97, 97], 'score': np.float64(1.5156225254507985), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 51sRunning iteration 321/1500... Est. remaining: 10m 44sRunning iteration 331/1500... Est. remaining: 10m 38sRunning iteration 341/1500... Est. remaining: 10m 31sRunning iteration 351/1500... Est. remaining: 10m 24sRunning iteration 361/1500... Est. remaining: 10m 18sRunning iteration 371/1500... Est. remaining: 10m 11sRunning iteration 381/1500... Est. remaining: 10m 5sRunning iteration 391/1500... Est. remaining: 9m 59sRunning iteration 401/1500... Est. remaining: 9m 52sbest_combination: {'lookbacks': [50, 97, 97], 'score': np.float64(1.5156225254507985), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 46sRunning iteration 421/1500... Est. remaining: 9m 40sRunning iteration 431/1500... Est. remaining: 9m 34sRunning iteration 441/1500... Est. remaining: 9m 28sRunning iteration 451/1500... Est. remaining: 9m 22sRunning iteration 461/1500... Est. remaining: 9m 16sRunning iteration 471/1500... Est. remaining: 9m 10sRunning iteration 481/1500... Est. remaining: 9m 4sRunning iteration 491/1500... Est. remaining: 8m 58sRunning iteration 501/1500... Est. remaining: 8m 53sbest_combination: {'lookbacks': [50, 97, 97], 'score': np.float64(1.5156225254507985), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 47sRunning iteration 521/1500... Est. remaining: 8m 41sRunning iteration 531/1500... Est. remaining: 8m 35sRunning iteration 541/1500... Est. remaining: 8m 30sRunning iteration 551/1500... Est. remaining: 8m 24sRunning iteration 561/1500... Est. remaining: 8m 18sRunning iteration 571/1500... Est. remaining: 8m 13sRunning iteration 581/1500... Est. remaining: 8m 7sRunning iteration 591/1500... Est. remaining: 8m 1sRunning iteration 601/1500... Est. remaining: 7m 56sbest_combination: {'lookbacks': [50, 97, 97], 'score': np.float64(1.5156225254507985), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 50sRunning iteration 621/1500... Est. remaining: 7m 45sRunning iteration 631/1500... Est. remaining: 7m 39sRunning iteration 641/1500... Est. remaining: 7m 33sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 22sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 11sRunning iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 0sbest_combination: {'lookbacks': [50, 97, 97], 'score': np.float64(1.5156225254507985), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 55sRunning iteration 721/1500... Est. remaining: 6m 49sRunning iteration 731/1500... Est. remaining: 6m 44sRunning iteration 741/1500... Est. remaining: 6m 39sRunning iteration 751/1500... Est. remaining: 6m 33sRunning iteration 761/1500... Est. remaining: 6m 28sRunning iteration 771/1500... Est. remaining: 6m 22sRunning iteration 781/1500... Est. remaining: 6m 17sRunning iteration 791/1500... Est. remaining: 6m 12sRunning iteration 801/1500... Est. remaining: 6m 6sbest_combination: {'lookbacks': [50, 97, 97], 'score': np.float64(1.5156225254507985), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 1sRunning iteration 821/1500... Est. remaining: 5m 55sRunning iteration 831/1500... Est. remaining: 5m 50sRunning iteration 841/1500... Est. remaining: 5m 45sRunning iteration 851/1500... Est. remaining: 5m 39sRunning iteration 861/1500... Est. remaining: 5m 34sRunning iteration 871/1500... Est. remaining: 5m 29sRunning iteration 881/1500... Est. remaining: 5m 23sRunning iteration 891/1500... Est. remaining: 5m 18sRunning iteration 901/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [50, 97, 97], 'score': np.float64(1.5156225254507985), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 7sRunning iteration 921/1500... Est. remaining: 5m 2sRunning iteration 931/1500... Est. remaining: 4m 57sRunning iteration 941/1500... Est. remaining: 4m 52sRunning iteration 951/1500... Est. remaining: 4m 46sRunning iteration 961/1500... Est. remaining: 4m 41sRunning iteration 971/1500... Est. remaining: 4m 36sRunning iteration 981/1500... Est. remaining: 4m 30sRunning iteration 991/1500... Est. remaining: 4m 25sRunning iteration 1001/1500... Est. remaining: 4m 20sbest_combination: {'lookbacks': [50, 97, 97], 'score': np.float64(1.5156225254507985), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 9sRunning iteration 1031/1500... Est. remaining: 4m 4sRunning iteration 1041/1500... Est. remaining: 3m 59sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 48sRunning iteration 1071/1500... Est. remaining: 3m 43sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [50, 97, 97], 'score': np.float64(1.5156225254507985), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 22sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 97, 97], 'score': np.float64(1.5156225254507985), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [50, 97, 97], 'score': np.float64(1.5156225254507985), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,180,697,390
Annual Return: 42.57%
Sharpe Ratio: 1.50063
Sortino Ratio: 1.415
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.527
Lookback periods: [50, 96, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 96, 98], 'score': np.float64(1.526879484711016), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 1.53
best_combination: {'lookbacks': [50, 96, 98], 'score': np.float64(1.526879484711016), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 96, 98] (score: 1.5269)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 96, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 120 selections (28.8%)
2. naz100_hma: 99 selections (23.8%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 65 selections (15.6%)
5. cash: 52 selections (12.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $2,180,697,390.15
Average Annualized Gain: 42.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Mon Aug 25 13:31:16 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,063,752,284
Annual Return: 42.35%
Sharpe Ratio: 1.39142
Sortino Ratio: 1.347
Max Drawdown: -61.6%
Avg Drawdown: -11.8%
Normalized Score: -0.430
Lookback periods: [161, 199, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,383,682,353
Annual Return: 47.06%
Sharpe Ratio: 1.53668
Sortino Ratio: 1.509
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.324
Lookback periods: [158, 162, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 55sRunning iteration 21/1500... Est. remaining: 19m 0sRunning iteration 31/1500... Est. remaining: 16m 42sRunning iteration 41/1500... Est. remaining: 15m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,528,882,800
Annual Return: 41.12%
Sharpe Ratio: 1.48183
Sortino Ratio: 1.385
Max Drawdown: -37.2%
Avg Drawdown: -9.5%
Normalized Score: 0.603
Lookback periods: [50, 51, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 15m 16sRunning iteration 61/1500... Est. remaining: 14m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,867,778,490
Annual Return: 41.94%
Sharpe Ratio: 1.49262
Sortino Ratio: 1.389
Max Drawdown: -36.9%
Avg Drawdown: -9.9%
Normalized Score: 0.623
Lookback periods: [50, 54, 79] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 14m 37sRunning iteration 81/1500... Est. remaining: 14m 12sRunning iteration 91/1500... Est. remaining: 13m 52sRunning iteration 101/1500... Est. remaining: 13m 33sbest_combination: {'lookbacks': [50, 54, 79], 'score': np.float64(0.6227710431908933), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 18sRunning iteration 121/1500... Est. remaining: 13m 5sRunning iteration 131/1500... Est. remaining: 12m 52sRunning iteration 141/1500... Est. remaining: 12m 41sRunning iteration 151/1500... Est. remaining: 12m 30sRunning iteration 161/1500... Est. remaining: 12m 20sRunning iteration 171/1500... Est. remaining: 12m 11sRunning iteration 181/1500... Est. remaining: 12m 2sRunning iteration 191/1500... Est. remaining: 11m 54sRunning iteration 201/1500... Est. remaining: 11m 46sbest_combination: {'lookbacks': [50, 54, 79], 'score': np.float64(0.6227710431908933), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 39sRunning iteration 221/1500... Est. remaining: 11m 32sRunning iteration 231/1500... Est. remaining: 11m 24sRunning iteration 241/1500... Est. remaining: 11m 17sRunning iteration 251/1500... Est. remaining: 11m 10sRunning iteration 261/1500... Est. remaining: 11m 3sRunning iteration 271/1500... Est. remaining: 10m 57sRunning iteration 281/1500... Est. remaining: 10m 50sRunning iteration 291/1500... Est. remaining: 10m 43sRunning iteration 301/1500... Est. remaining: 10m 37sbest_combination: {'lookbacks': [50, 54, 79], 'score': np.float64(0.6227710431908933), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 31sRunning iteration 321/1500... Est. remaining: 10m 24sRunning iteration 331/1500... Est. remaining: 10m 18sRunning iteration 341/1500... Est. remaining: 10m 12sRunning iteration 351/1500... Est. remaining: 10m 6sRunning iteration 361/1500... Est. remaining: 10m 0sRunning iteration 371/1500... Est. remaining: 9m 54sRunning iteration 381/1500... Est. remaining: 9m 48sRunning iteration 391/1500... Est. remaining: 9m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,954,435,532
Annual Return: 43.83%
Sharpe Ratio: 1.55829
Sortino Ratio: 1.459
Max Drawdown: -38.0%
Avg Drawdown: -9.5%
Normalized Score: 0.871
Lookback periods: [51, 54, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 9m 40sbest_combination: {'lookbacks': [51, 54, 82], 'score': np.float64(0.8710254663589486), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 34sRunning iteration 421/1500... Est. remaining: 9m 28sRunning iteration 431/1500... Est. remaining: 9m 22sRunning iteration 441/1500... Est. remaining: 9m 16sRunning iteration 451/1500... Est. remaining: 9m 11sRunning iteration 461/1500... Est. remaining: 9m 5sRunning iteration 471/1500... Est. remaining: 8m 59sRunning iteration 481/1500... Est. remaining: 8m 54sRunning iteration 491/1500... Est. remaining: 8m 48sRunning iteration 501/1500... Est. remaining: 8m 42sbest_combination: {'lookbacks': [51, 54, 82], 'score': np.float64(0.8710254663589486), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 37sRunning iteration 521/1500... Est. remaining: 8m 31sRunning iteration 531/1500... Est. remaining: 8m 26sRunning iteration 541/1500... Est. remaining: 8m 20sRunning iteration 551/1500... Est. remaining: 8m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,779,940,917
Annual Return: 43.57%
Sharpe Ratio: 1.56839
Sortino Ratio: 1.467
Max Drawdown: -37.2%
Avg Drawdown: -9.3%
Normalized Score: 0.931
Lookback periods: [50, 52, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 8m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,650,069,972
Annual Return: 43.38%
Sharpe Ratio: 1.54673
Sortino Ratio: 1.453
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 0.973
Lookback periods: [50, 54, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 8m 8sRunning iteration 581/1500... Est. remaining: 8m 2sRunning iteration 591/1500... Est. remaining: 7m 57sRunning iteration 601/1500... Est. remaining: 7m 51sbest_combination: {'lookbacks': [50, 54, 84], 'score': np.float64(0.9733091939421339), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 46sRunning iteration 621/1500... Est. remaining: 7m 40sRunning iteration 631/1500... Est. remaining: 7m 34sRunning iteration 641/1500... Est. remaining: 7m 29sRunning iteration 651/1500... Est. remaining: 7m 23sRunning iteration 661/1500... Est. remaining: 7m 18sRunning iteration 671/1500... Est. remaining: 7m 13sRunning iteration 681/1500... Est. remaining: 7m 7sRunning iteration 691/1500... Est. remaining: 7m 2sRunning iteration 701/1500... Est. remaining: 6m 56sbest_combination: {'lookbacks': [50, 54, 84], 'score': np.float64(0.9733091939421339), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 51sRunning iteration 721/1500... Est. remaining: 6m 45sRunning iteration 731/1500... Est. remaining: 6m 40sRunning iteration 741/1500... Est. remaining: 6m 35sRunning iteration 751/1500... Est. remaining: 6m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,007,517,603
Annual Return: 45.10%
Sharpe Ratio: 1.59306
Sortino Ratio: 1.502
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.164
Lookback periods: [51, 54, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 6m 25sRunning iteration 771/1500... Est. remaining: 6m 20sRunning iteration 781/1500... Est. remaining: 6m 14sRunning iteration 791/1500... Est. remaining: 6m 9sRunning iteration 801/1500... Est. remaining: 6m 4sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.1638870840831952), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 58sRunning iteration 821/1500... Est. remaining: 5m 53sRunning iteration 831/1500... Est. remaining: 5m 48sRunning iteration 841/1500... Est. remaining: 5m 42sRunning iteration 851/1500... Est. remaining: 5m 37sRunning iteration 861/1500... Est. remaining: 5m 32sRunning iteration 871/1500... Est. remaining: 5m 26sRunning iteration 881/1500... Est. remaining: 5m 21sRunning iteration 891/1500... Est. remaining: 5m 16sRunning iteration 901/1500... Est. remaining: 5m 10sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.1638870840831952), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 5sRunning iteration 921/1500... Est. remaining: 5m 0sRunning iteration 931/1500... Est. remaining: 4m 55sRunning iteration 941/1500... Est. remaining: 4m 49sRunning iteration 951/1500... Est. remaining: 4m 44sRunning iteration 961/1500... Est. remaining: 4m 39sRunning iteration 971/1500... Est. remaining: 4m 33sRunning iteration 981/1500... Est. remaining: 4m 28sRunning iteration 991/1500... Est. remaining: 4m 23sRunning iteration 1001/1500... Est. remaining: 4m 18sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.1638870840831952), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 12sRunning iteration 1021/1500... Est. remaining: 4m 7sRunning iteration 1031/1500... Est. remaining: 4m 2sRunning iteration 1041/1500... Est. remaining: 3m 57sRunning iteration 1051/1500... Est. remaining: 3m 51sRunning iteration 1061/1500... Est. remaining: 3m 46sRunning iteration 1071/1500... Est. remaining: 3m 41sRunning iteration 1081/1500... Est. remaining: 3m 36sRunning iteration 1091/1500... Est. remaining: 3m 31sRunning iteration 1101/1500... Est. remaining: 3m 25sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.1638870840831952), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 20sRunning iteration 1121/1500... Est. remaining: 3m 15sRunning iteration 1131/1500... Est. remaining: 3m 10sRunning iteration 1141/1500... Est. remaining: 3m 5sRunning iteration 1151/1500... Est. remaining: 3m 0sRunning iteration 1161/1500... Est. remaining: 2m 55sRunning iteration 1171/1500... Est. remaining: 2m 49sRunning iteration 1181/1500... Est. remaining: 2m 44sRunning iteration 1191/1500... Est. remaining: 2m 39sRunning iteration 1201/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.1638870840831952), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 18sRunning iteration 1241/1500... Est. remaining: 2m 13sRunning iteration 1251/1500... Est. remaining: 2m 8sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 52sRunning iteration 1291/1500... Est. remaining: 1m 47sRunning iteration 1301/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.1638870840831952), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 16sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.1638870840831952), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 1.16
best_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.1638870840831952), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [51, 54, 83] (score: 1.1639)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [51, 54, 83] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 53 selections (12.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,007,517,603.28
Average Annualized Gain: 45.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Mon Aug 25 13:44:11 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,708,730,769
Annual Return: 45.77%
Sharpe Ratio: 1.48867
Sortino Ratio: 1.447
Max Drawdown: -59.7%
Avg Drawdown: -11.9%
Normalized Score: 0.059
Lookback periods: [150, 161, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 22m 47sRunning iteration 21/1500... Est. remaining: 17m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,348,862,938
Annual Return: 42.88%
Sharpe Ratio: 1.52496
Sortino Ratio: 1.430
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.178
Lookback periods: [50, 54, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 16m 39sRunning iteration 41/1500... Est. remaining: 15m 23sRunning iteration 51/1500... Est. remaining: 14m 40sRunning iteration 61/1500... Est. remaining: 14m 11sRunning iteration 71/1500... Est. remaining: 13m 44sRunning iteration 81/1500... Est. remaining: 13m 23sRunning iteration 91/1500... Est. remaining: 13m 9sRunning iteration 101/1500... Est. remaining: 12m 57sbest_combination: {'lookbacks': [50, 54, 100], 'score': np.float64(1.178027895419364), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 46sRunning iteration 121/1500... Est. remaining: 12m 36sRunning iteration 131/1500... Est. remaining: 12m 26sRunning iteration 141/1500... Est. remaining: 12m 18sRunning iteration 151/1500... Est. remaining: 12m 10sRunning iteration 161/1500... Est. remaining: 12m 2sRunning iteration 171/1500... Est. remaining: 11m 55sRunning iteration 181/1500... Est. remaining: 11m 48sRunning iteration 191/1500... Est. remaining: 11m 41sRunning iteration 201/1500... Est. remaining: 11m 34sbest_combination: {'lookbacks': [50, 54, 100], 'score': np.float64(1.178027895419364), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 27sRunning iteration 221/1500... Est. remaining: 11m 21sRunning iteration 231/1500... Est. remaining: 11m 15sRunning iteration 241/1500... Est. remaining: 11m 9sRunning iteration 251/1500... Est. remaining: 11m 2sRunning iteration 261/1500... Est. remaining: 10m 56sRunning iteration 271/1500... Est. remaining: 10m 50sRunning iteration 281/1500... Est. remaining: 10m 44sRunning iteration 291/1500... Est. remaining: 10m 38sRunning iteration 301/1500... Est. remaining: 10m 32sbest_combination: {'lookbacks': [50, 54, 100], 'score': np.float64(1.178027895419364), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 26sRunning iteration 321/1500... Est. remaining: 10m 20sRunning iteration 331/1500... Est. remaining: 10m 14sRunning iteration 341/1500... Est. remaining: 10m 9sRunning iteration 351/1500... Est. remaining: 10m 3sRunning iteration 361/1500... Est. remaining: 9m 57sRunning iteration 371/1500... Est. remaining: 9m 51sRunning iteration 381/1500... Est. remaining: 9m 46sRunning iteration 391/1500... Est. remaining: 9m 40sRunning iteration 401/1500... Est. remaining: 9m 34sbest_combination: {'lookbacks': [50, 54, 100], 'score': np.float64(1.178027895419364), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 29sRunning iteration 421/1500... Est. remaining: 9m 23sRunning iteration 431/1500... Est. remaining: 9m 18sRunning iteration 441/1500... Est. remaining: 9m 12sRunning iteration 451/1500... Est. remaining: 9m 7sRunning iteration 461/1500... Est. remaining: 9m 1sRunning iteration 471/1500... Est. remaining: 8m 56sRunning iteration 481/1500... Est. remaining: 8m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,925,507,681
Annual Return: 43.79%
Sharpe Ratio: 1.57035
Sortino Ratio: 1.478
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.349
Lookback periods: [50, 53, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,014,039,551
Annual Return: 43.91%
Sharpe Ratio: 1.59069
Sortino Ratio: 1.496
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.480
Lookback periods: [50, 51, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 8m 50sRunning iteration 501/1500... Est. remaining: 8m 44sbest_combination: {'lookbacks': [50, 51, 96], 'score': np.float64(1.4804882892723736), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 39sRunning iteration 521/1500... Est. remaining: 8m 33sRunning iteration 531/1500... Est. remaining: 8m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.625
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 8m 24sRunning iteration 551/1500... Est. remaining: 8m 19sRunning iteration 561/1500... Est. remaining: 8m 13sRunning iteration 571/1500... Est. remaining: 8m 7sRunning iteration 581/1500... Est. remaining: 8m 2sRunning iteration 591/1500... Est. remaining: 7m 56sRunning iteration 601/1500... Est. remaining: 7m 51sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.6252070764498996), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 45sRunning iteration 621/1500... Est. remaining: 7m 40sRunning iteration 631/1500... Est. remaining: 7m 34sRunning iteration 641/1500... Est. remaining: 7m 29sRunning iteration 651/1500... Est. remaining: 7m 23sRunning iteration 661/1500... Est. remaining: 7m 18sRunning iteration 671/1500... Est. remaining: 7m 13sRunning iteration 681/1500... Est. remaining: 7m 7sRunning iteration 691/1500... Est. remaining: 7m 2sRunning iteration 701/1500... Est. remaining: 6m 56sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.6252070764498996), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.673
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 711/1500... Est. remaining: 6m 52sRunning iteration 721/1500... Est. remaining: 6m 47sRunning iteration 731/1500... Est. remaining: 6m 42sRunning iteration 741/1500... Est. remaining: 6m 36sRunning iteration 751/1500... Est. remaining: 6m 31sRunning iteration 761/1500... Est. remaining: 6m 25sRunning iteration 771/1500... Est. remaining: 6m 20sRunning iteration 781/1500... Est. remaining: 6m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.841
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 6m 11sRunning iteration 801/1500... Est. remaining: 6m 5sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8407324663379874), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 0sRunning iteration 821/1500... Est. remaining: 5m 55sRunning iteration 831/1500... Est. remaining: 5m 49sRunning iteration 841/1500... Est. remaining: 5m 44sRunning iteration 851/1500... Est. remaining: 5m 39sRunning iteration 861/1500... Est. remaining: 5m 33sRunning iteration 871/1500... Est. remaining: 5m 28sRunning iteration 881/1500... Est. remaining: 5m 23sRunning iteration 891/1500... Est. remaining: 5m 17sRunning iteration 901/1500... Est. remaining: 5m 11sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8407324663379874), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 5sRunning iteration 921/1500... Est. remaining: 4m 58sRunning iteration 931/1500... Est. remaining: 4m 52sRunning iteration 941/1500... Est. remaining: 4m 45sRunning iteration 951/1500... Est. remaining: 4m 39sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 26sRunning iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 14sRunning iteration 1001/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8407324663379874), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 2sRunning iteration 1021/1500... Est. remaining: 3m 56sRunning iteration 1031/1500... Est. remaining: 3m 51sRunning iteration 1041/1500... Est. remaining: 3m 45sRunning iteration 1051/1500... Est. remaining: 3m 39sRunning iteration 1061/1500... Est. remaining: 3m 33sRunning iteration 1071/1500... Est. remaining: 3m 28sRunning iteration 1081/1500... Est. remaining: 3m 22sRunning iteration 1091/1500... Est. remaining: 3m 17sRunning iteration 1101/1500... Est. remaining: 3m 11sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8407324663379874), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 6sRunning iteration 1121/1500... Est. remaining: 3m 1sRunning iteration 1131/1500... Est. remaining: 2m 55sRunning iteration 1141/1500... Est. remaining: 2m 50sRunning iteration 1151/1500... Est. remaining: 2m 45sRunning iteration 1161/1500... Est. remaining: 2m 39sRunning iteration 1171/1500... Est. remaining: 2m 34sRunning iteration 1181/1500... Est. remaining: 2m 29sRunning iteration 1191/1500... Est. remaining: 2m 24sRunning iteration 1201/1500... Est. remaining: 2m 19sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8407324663379874), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 14sRunning iteration 1221/1500... Est. remaining: 2m 9sRunning iteration 1231/1500... Est. remaining: 2m 4sRunning iteration 1241/1500... Est. remaining: 1m 59sRunning iteration 1251/1500... Est. remaining: 1m 54sRunning iteration 1261/1500... Est. remaining: 1m 49sRunning iteration 1271/1500... Est. remaining: 1m 44sRunning iteration 1281/1500... Est. remaining: 1m 39sRunning iteration 1291/1500... Est. remaining: 1m 35sRunning iteration 1301/1500... Est. remaining: 1m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8407324663379874), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 25sRunning iteration 1321/1500... Est. remaining: 1m 20sRunning iteration 1331/1500... Est. remaining: 1m 16sRunning iteration 1341/1500... Est. remaining: 1m 11sRunning iteration 1351/1500... Est. remaining: 1m 6sRunning iteration 1361/1500... Est. remaining: 1m 2sRunning iteration 1371/1500... Est. remaining: 0m 57sRunning iteration 1381/1500... Est. remaining: 0m 53sRunning iteration 1391/1500... Est. remaining: 0m 48sRunning iteration 1401/1500... Est. remaining: 0m 44sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8407324663379874), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 39sRunning iteration 1421/1500... Est. remaining: 0m 35sRunning iteration 1431/1500... Est. remaining: 0m 30sRunning iteration 1441/1500... Est. remaining: 0m 26sRunning iteration 1451/1500... Est. remaining: 0m 21sRunning iteration 1461/1500... Est. remaining: 0m 17sRunning iteration 1471/1500... Est. remaining: 0m 13sRunning iteration 1481/1500... Est. remaining: 0m 8sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 10.8 minutes
Best normalized score: 1.84
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8407324663379874), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.8407)

Monte Carlo simulation completed in 10.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Mon Aug 25 13:55:05 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $938,722,071
Annual Return: 39.15%
Sharpe Ratio: 1.34455
Sortino Ratio: 1.257
Max Drawdown: -52.3%
Avg Drawdown: -11.4%
Normalized Score: -0.407
Lookback periods: [81, 129, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 12m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,336,912,212
Annual Return: 44.33%
Sharpe Ratio: 1.44974
Sortino Ratio: 1.412
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: -0.072
Lookback periods: [161, 179, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 10m 28sRunning iteration 31/1500... Est. remaining: 9m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,677,479,214
Annual Return: 45.75%
Sharpe Ratio: 1.49549
Sortino Ratio: 1.467
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.183
Lookback periods: [158, 175, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 9m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,225,275,623
Annual Return: 46.21%
Sharpe Ratio: 1.51547
Sortino Ratio: 1.471
Max Drawdown: -55.0%
Avg Drawdown: -11.4%
Normalized Score: 0.327
Lookback periods: [147, 156, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 8m 48sRunning iteration 61/1500... Est. remaining: 8m 22sRunning iteration 71/1500... Est. remaining: 8m 4sRunning iteration 81/1500... Est. remaining: 7m 51sRunning iteration 91/1500... Est. remaining: 7m 45sRunning iteration 101/1500... Est. remaining: 7m 40sbest_combination: {'lookbacks': [147, 156, 172], 'score': np.float64(0.3270035601729078), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 33sRunning iteration 121/1500... Est. remaining: 7m 28sRunning iteration 131/1500... Est. remaining: 7m 23sRunning iteration 141/1500... Est. remaining: 7m 18sRunning iteration 151/1500... Est. remaining: 7m 13sRunning iteration 161/1500... Est. remaining: 7m 8sRunning iteration 171/1500... Est. remaining: 7m 4sRunning iteration 181/1500... Est. remaining: 6m 59sRunning iteration 191/1500... Est. remaining: 6m 55sRunning iteration 201/1500... Est. remaining: 6m 51sbest_combination: {'lookbacks': [147, 156, 172], 'score': np.float64(0.3270035601729078), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 47sRunning iteration 221/1500... Est. remaining: 6m 43sRunning iteration 231/1500... Est. remaining: 6m 39sRunning iteration 241/1500... Est. remaining: 6m 35sRunning iteration 251/1500... Est. remaining: 6m 32sRunning iteration 261/1500... Est. remaining: 6m 28sRunning iteration 271/1500... Est. remaining: 6m 25sRunning iteration 281/1500... Est. remaining: 6m 21sRunning iteration 291/1500... Est. remaining: 6m 18sRunning iteration 301/1500... Est. remaining: 6m 14sbest_combination: {'lookbacks': [147, 156, 172], 'score': np.float64(0.3270035601729078), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 10sRunning iteration 321/1500... Est. remaining: 6m 7sRunning iteration 331/1500... Est. remaining: 6m 4sRunning iteration 341/1500... Est. remaining: 6m 0sRunning iteration 351/1500... Est. remaining: 5m 57sRunning iteration 361/1500... Est. remaining: 5m 53sRunning iteration 371/1500... Est. remaining: 5m 50sRunning iteration 381/1500... Est. remaining: 5m 47sRunning iteration 391/1500... Est. remaining: 5m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,399,319,990
Annual Return: 47.69%
Sharpe Ratio: 1.57454
Sortino Ratio: 1.538
Max Drawdown: -61.3%
Avg Drawdown: -11.5%
Normalized Score: 0.349
Lookback periods: [135, 153, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 5m 42sbest_combination: {'lookbacks': [135, 153, 158], 'score': np.float64(0.3491745888446667), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 39sRunning iteration 421/1500... Est. remaining: 5m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,455,301,212
Annual Return: 47.11%
Sharpe Ratio: 1.55462
Sortino Ratio: 1.512
Max Drawdown: -58.2%
Avg Drawdown: -11.5%
Normalized Score: 0.361
Lookback periods: [132, 146, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 5m 35sRunning iteration 441/1500... Est. remaining: 5m 31sRunning iteration 451/1500... Est. remaining: 5m 28sRunning iteration 461/1500... Est. remaining: 5m 25sRunning iteration 471/1500... Est. remaining: 5m 21sRunning iteration 481/1500... Est. remaining: 5m 18sRunning iteration 491/1500... Est. remaining: 5m 15sRunning iteration 501/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [132, 146, 157], 'score': np.float64(0.3613783848462696), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 8sRunning iteration 521/1500... Est. remaining: 5m 5sRunning iteration 531/1500... Est. remaining: 5m 2sRunning iteration 541/1500... Est. remaining: 4m 58sRunning iteration 551/1500... Est. remaining: 4m 55sRunning iteration 561/1500... Est. remaining: 4m 52sRunning iteration 571/1500... Est. remaining: 4m 49sRunning iteration 581/1500... Est. remaining: 4m 46sRunning iteration 591/1500... Est. remaining: 4m 43sRunning iteration 601/1500... Est. remaining: 4m 39sbest_combination: {'lookbacks': [132, 146, 157], 'score': np.float64(0.3613783848462696), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 36sRunning iteration 621/1500... Est. remaining: 4m 33sRunning iteration 631/1500... Est. remaining: 4m 30sRunning iteration 641/1500... Est. remaining: 4m 26sRunning iteration 651/1500... Est. remaining: 4m 23sRunning iteration 661/1500... Est. remaining: 4m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,458,887,600
Annual Return: 47.72%
Sharpe Ratio: 1.56544
Sortino Ratio: 1.522
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.451
Lookback periods: [136, 156, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 4m 18sRunning iteration 681/1500... Est. remaining: 4m 15sRunning iteration 691/1500... Est. remaining: 4m 12sRunning iteration 701/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [136, 156, 159], 'score': np.float64(0.4507820342261383), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 5sRunning iteration 721/1500... Est. remaining: 4m 2sRunning iteration 731/1500... Est. remaining: 3m 59sRunning iteration 741/1500... Est. remaining: 3m 56sRunning iteration 751/1500... Est. remaining: 3m 53sRunning iteration 761/1500... Est. remaining: 3m 49sRunning iteration 771/1500... Est. remaining: 3m 46sRunning iteration 781/1500... Est. remaining: 3m 43sRunning iteration 791/1500... Est. remaining: 3m 40sRunning iteration 801/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [136, 156, 159], 'score': np.float64(0.4507820342261383), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 34sRunning iteration 821/1500... Est. remaining: 3m 31sRunning iteration 831/1500... Est. remaining: 3m 27sRunning iteration 841/1500... Est. remaining: 3m 24sRunning iteration 851/1500... Est. remaining: 3m 21sRunning iteration 861/1500... Est. remaining: 3m 18sRunning iteration 871/1500... Est. remaining: 3m 15sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 5sbest_combination: {'lookbacks': [136, 156, 159], 'score': np.float64(0.4507820342261383), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 2sRunning iteration 921/1500... Est. remaining: 2m 59sRunning iteration 931/1500... Est. remaining: 2m 56sRunning iteration 941/1500... Est. remaining: 2m 53sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 40sRunning iteration 991/1500... Est. remaining: 2m 37sRunning iteration 1001/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [136, 156, 159], 'score': np.float64(0.4507820342261383), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 31sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 15sRunning iteration 1071/1500... Est. remaining: 2m 12sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,298,440,389
Annual Return: 48.18%
Sharpe Ratio: 1.58075
Sortino Ratio: 1.546
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.584
Lookback periods: [140, 154, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.5838671861906005), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.5838671861906005), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [140, 154, 157], 'score': np.float64(0.5838671861906005), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,975,150,256
Annual Return: 48.51%
Sharpe Ratio: 1.58699
Sortino Ratio: 1.551
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.613
Lookback periods: [139, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [139, 154, 156], 'score': np.float64(0.6129182512829134), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 0.61
best_combination: {'lookbacks': [139, 154, 156], 'score': np.float64(0.6129182512829134), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 154, 156] (score: 0.6129)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 154, 156] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 112 selections (26.9%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,975,150,256.00
Average Annualized Gain: 48.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Mon Aug 25 14:02:53 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,986,312,531
Annual Return: 42.19%
Sharpe Ratio: 1.39896
Sortino Ratio: 1.344
Max Drawdown: -63.9%
Avg Drawdown: -13.1%
Normalized Score: -0.521
Lookback periods: [107, 134, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,433,490,699
Annual Return: 44.45%
Sharpe Ratio: 1.49326
Sortino Ratio: 1.448
Max Drawdown: -63.4%
Avg Drawdown: -12.6%
Normalized Score: -0.031
Lookback periods: [118, 138, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 16m 22sRunning iteration 21/1500... Est. remaining: 11m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,314,677,841
Annual Return: 46.28%
Sharpe Ratio: 1.52288
Sortino Ratio: 1.480
Max Drawdown: -63.4%
Avg Drawdown: -12.9%
Normalized Score: 0.107
Lookback periods: [135, 153, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 10m 13sRunning iteration 41/1500... Est. remaining: 9m 11sRunning iteration 51/1500... Est. remaining: 8m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,306,193,508
Annual Return: 45.40%
Sharpe Ratio: 1.47150
Sortino Ratio: 1.431
Max Drawdown: -59.9%
Avg Drawdown: -11.7%
Normalized Score: 0.208
Lookback periods: [175, 192, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 8m 22sRunning iteration 71/1500... Est. remaining: 8m 4sRunning iteration 81/1500... Est. remaining: 7m 54sRunning iteration 91/1500... Est. remaining: 7m 46sRunning iteration 101/1500... Est. remaining: 7m 39sbest_combination: {'lookbacks': [175, 192, 200], 'score': np.float64(0.20760768057168613), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 32sRunning iteration 121/1500... Est. remaining: 7m 26sRunning iteration 131/1500... Est. remaining: 7m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,990,108,581
Annual Return: 42.20%
Sharpe Ratio: 1.45938
Sortino Ratio: 1.371
Max Drawdown: -52.3%
Avg Drawdown: -10.7%
Normalized Score: 0.310
Lookback periods: [89, 95, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 7m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,618,700,793
Annual Return: 46.52%
Sharpe Ratio: 1.51949
Sortino Ratio: 1.473
Max Drawdown: -59.2%
Avg Drawdown: -11.8%
Normalized Score: 0.391
Lookback periods: [148, 159, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 7m 24sRunning iteration 161/1500... Est. remaining: 7m 19sRunning iteration 171/1500... Est. remaining: 7m 14sRunning iteration 181/1500... Est. remaining: 7m 9sRunning iteration 191/1500... Est. remaining: 7m 4sRunning iteration 201/1500... Est. remaining: 7m 0sbest_combination: {'lookbacks': [148, 159, 191], 'score': np.float64(0.390926131632093), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,229,410,012
Annual Return: 48.63%
Sharpe Ratio: 1.58616
Sortino Ratio: 1.551
Max Drawdown: -59.0%
Avg Drawdown: -10.4%
Normalized Score: 0.928
Lookback periods: [156, 158, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/1500... Est. remaining: 7m 1sRunning iteration 221/1500... Est. remaining: 6m 56sRunning iteration 231/1500... Est. remaining: 6m 52sRunning iteration 241/1500... Est. remaining: 6m 48sRunning iteration 251/1500... Est. remaining: 6m 43sRunning iteration 261/1500... Est. remaining: 6m 39sRunning iteration 271/1500... Est. remaining: 6m 35sRunning iteration 281/1500... Est. remaining: 6m 31sRunning iteration 291/1500... Est. remaining: 6m 27sRunning iteration 301/1500... Est. remaining: 6m 24sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(0.9278108835936114), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 20sRunning iteration 321/1500... Est. remaining: 6m 16sRunning iteration 331/1500... Est. remaining: 6m 12sRunning iteration 341/1500... Est. remaining: 6m 9sRunning iteration 351/1500... Est. remaining: 6m 5sRunning iteration 361/1500... Est. remaining: 6m 2sRunning iteration 371/1500... Est. remaining: 5m 58sRunning iteration 381/1500... Est. remaining: 5m 55sRunning iteration 391/1500... Est. remaining: 5m 51sRunning iteration 401/1500... Est. remaining: 5m 47sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(0.9278108835936114), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 44sRunning iteration 421/1500... Est. remaining: 5m 40sRunning iteration 431/1500... Est. remaining: 5m 37sRunning iteration 441/1500... Est. remaining: 5m 34sRunning iteration 451/1500... Est. remaining: 5m 30sRunning iteration 461/1500... Est. remaining: 5m 27sRunning iteration 471/1500... Est. remaining: 5m 23sRunning iteration 481/1500... Est. remaining: 5m 20sRunning iteration 491/1500... Est. remaining: 5m 17sRunning iteration 501/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(0.9278108835936114), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 10sRunning iteration 521/1500... Est. remaining: 5m 7sRunning iteration 531/1500... Est. remaining: 5m 3sRunning iteration 541/1500... Est. remaining: 5m 0sRunning iteration 551/1500... Est. remaining: 4m 57sRunning iteration 561/1500... Est. remaining: 4m 54sRunning iteration 571/1500... Est. remaining: 4m 51sRunning iteration 581/1500... Est. remaining: 4m 47sRunning iteration 591/1500... Est. remaining: 4m 44sRunning iteration 601/1500... Est. remaining: 4m 41sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(0.9278108835936114), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 38sRunning iteration 621/1500... Est. remaining: 4m 35sRunning iteration 631/1500... Est. remaining: 4m 31sRunning iteration 641/1500... Est. remaining: 4m 28sRunning iteration 651/1500... Est. remaining: 4m 25sRunning iteration 661/1500... Est. remaining: 4m 22sRunning iteration 671/1500... Est. remaining: 4m 19sRunning iteration 681/1500... Est. remaining: 4m 15sRunning iteration 691/1500... Est. remaining: 4m 12sRunning iteration 701/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(0.9278108835936114), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 6sRunning iteration 721/1500... Est. remaining: 4m 2sRunning iteration 731/1500... Est. remaining: 3m 59sRunning iteration 741/1500... Est. remaining: 3m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,762,261,239
Annual Return: 48.41%
Sharpe Ratio: 1.57534
Sortino Ratio: 1.541
Max Drawdown: -55.0%
Avg Drawdown: -10.8%
Normalized Score: 0.940
Lookback periods: [156, 162, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 3m 54sRunning iteration 761/1500... Est. remaining: 3m 50sRunning iteration 771/1500... Est. remaining: 3m 47sRunning iteration 781/1500... Est. remaining: 3m 44sRunning iteration 791/1500... Est. remaining: 3m 41sRunning iteration 801/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(0.9401450090382795), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 34sRunning iteration 821/1500... Est. remaining: 3m 31sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 18sRunning iteration 871/1500... Est. remaining: 3m 15sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(0.9401450090382795), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 2sRunning iteration 921/1500... Est. remaining: 2m 59sRunning iteration 931/1500... Est. remaining: 2m 56sRunning iteration 941/1500... Est. remaining: 2m 53sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 40sRunning iteration 991/1500... Est. remaining: 2m 37sRunning iteration 1001/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(0.9401450090382795), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 31sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 12sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(0.9401450090382795), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(0.9401450090382795), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(0.9401450090382795), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(0.9401450090382795), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 0.94
best_combination: {'lookbacks': [156, 162, 173], 'score': np.float64(0.9401450090382795), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 162, 173] (score: 0.9401)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 162, 173] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 112 selections (26.9%)
2. sp500_hma: 107 selections (25.7%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 80 selections (19.2%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,762,261,239.28
Average Annualized Gain: 48.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Mon Aug 25 14:10:41 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $468,456,324
Annual Return: 36.38%
Sharpe Ratio: 1.29004
Sortino Ratio: 1.189
Max Drawdown: -52.3%
Avg Drawdown: -11.8%
Normalized Score: -0.327
Lookback periods: [62, 85, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,216,099,137
Annual Return: 40.19%
Sharpe Ratio: 1.36381
Sortino Ratio: 1.294
Max Drawdown: -56.3%
Avg Drawdown: -12.8%
Normalized Score: -0.300
Lookback periods: [114, 118, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,475,679,282
Annual Return: 40.97%
Sharpe Ratio: 1.38986
Sortino Ratio: 1.300
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: 0.070
Lookback periods: [50, 99, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,127,073,009
Annual Return: 42.47%
Sharpe Ratio: 1.44535
Sortino Ratio: 1.354
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: 0.169
Lookback periods: [50, 106, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 14m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,648,039,475
Annual Return: 45.72%
Sharpe Ratio: 1.49910
Sortino Ratio: 1.464
Max Drawdown: -59.0%
Avg Drawdown: -12.0%
Normalized Score: 0.290
Lookback periods: [141, 171, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 12m 33sRunning iteration 41/1500... Est. remaining: 10m 58sRunning iteration 51/1500... Est. remaining: 10m 4sRunning iteration 61/1500... Est. remaining: 9m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,025,681,712
Annual Return: 46.81%
Sharpe Ratio: 1.51357
Sortino Ratio: 1.465
Max Drawdown: -59.5%
Avg Drawdown: -11.7%
Normalized Score: 0.361
Lookback periods: [178, 192, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 9m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,882,723,324
Annual Return: 46.71%
Sharpe Ratio: 1.54281
Sortino Ratio: 1.488
Max Drawdown: -56.8%
Avg Drawdown: -11.7%
Normalized Score: 0.537
Lookback periods: [135, 157, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 9m 25sRunning iteration 91/1500... Est. remaining: 9m 9sRunning iteration 101/1500... Est. remaining: 8m 54sbest_combination: {'lookbacks': [135, 157, 180], 'score': np.float64(0.5371541976892421), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 40sRunning iteration 121/1500... Est. remaining: 8m 28sRunning iteration 131/1500... Est. remaining: 8m 17sRunning iteration 141/1500... Est. remaining: 8m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $521,909,870
Annual Return: 36.81%
Sharpe Ratio: 1.30488
Sortino Ratio: 1.214
Max Drawdown: -34.7%
Avg Drawdown: -10.1%
Normalized Score: 0.709
Lookback periods: [53, 63, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 8m 6sRunning iteration 161/1500... Est. remaining: 7m 59sRunning iteration 171/1500... Est. remaining: 7m 51sRunning iteration 181/1500... Est. remaining: 7m 44sRunning iteration 191/1500... Est. remaining: 7m 37sRunning iteration 201/1500... Est. remaining: 7m 31sbest_combination: {'lookbacks': [53, 63, 83], 'score': np.float64(0.7094731104992353), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 25sRunning iteration 221/1500... Est. remaining: 7m 19sRunning iteration 231/1500... Est. remaining: 7m 14sRunning iteration 241/1500... Est. remaining: 7m 8sRunning iteration 251/1500... Est. remaining: 7m 3sRunning iteration 261/1500... Est. remaining: 6m 58sRunning iteration 271/1500... Est. remaining: 6m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,923,654,495
Annual Return: 43.78%
Sharpe Ratio: 1.50725
Sortino Ratio: 1.443
Max Drawdown: -52.3%
Avg Drawdown: -10.2%
Normalized Score: 0.748
Lookback periods: [94, 110, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/1500... Est. remaining: 6m 52sRunning iteration 291/1500... Est. remaining: 6m 47sRunning iteration 301/1500... Est. remaining: 6m 42sbest_combination: {'lookbacks': [94, 110, 146], 'score': np.float64(0.7475943735966272), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 37sRunning iteration 321/1500... Est. remaining: 6m 32sRunning iteration 331/1500... Est. remaining: 6m 28sRunning iteration 341/1500... Est. remaining: 6m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $948,288,295
Annual Return: 39.19%
Sharpe Ratio: 1.41544
Sortino Ratio: 1.306
Max Drawdown: -38.1%
Avg Drawdown: -10.2%
Normalized Score: 0.883
Lookback periods: [50, 56, 79] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 351/1500... Est. remaining: 6m 22sRunning iteration 361/1500... Est. remaining: 6m 18sRunning iteration 371/1500... Est. remaining: 6m 14sRunning iteration 381/1500... Est. remaining: 6m 9sRunning iteration 391/1500... Est. remaining: 6m 5sRunning iteration 401/1500... Est. remaining: 6m 1sbest_combination: {'lookbacks': [50, 56, 79], 'score': np.float64(0.8830567135453963), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 57sRunning iteration 421/1500... Est. remaining: 5m 53sRunning iteration 431/1500... Est. remaining: 5m 49sRunning iteration 441/1500... Est. remaining: 5m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,688,549,468
Annual Return: 41.52%
Sharpe Ratio: 1.49460
Sortino Ratio: 1.390
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 1.432
Lookback periods: [50, 57, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 5m 43sRunning iteration 461/1500... Est. remaining: 5m 39sRunning iteration 471/1500... Est. remaining: 5m 35sRunning iteration 481/1500... Est. remaining: 5m 31sRunning iteration 491/1500... Est. remaining: 5m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,421,397,372
Annual Return: 43.00%
Sharpe Ratio: 1.52981
Sortino Ratio: 1.443
Max Drawdown: -35.6%
Avg Drawdown: -9.4%
Normalized Score: 1.535
Lookback periods: [50, 53, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 5m 25sbest_combination: {'lookbacks': [50, 53, 90], 'score': np.float64(1.5350404604305217), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 21sRunning iteration 521/1500... Est. remaining: 5m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,582,693,160
Annual Return: 44.63%
Sharpe Ratio: 1.59347
Sortino Ratio: 1.511
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.872
Lookback periods: [50, 53, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 5m 15sRunning iteration 541/1500... Est. remaining: 5m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,014,039,551
Annual Return: 43.91%
Sharpe Ratio: 1.59069
Sortino Ratio: 1.496
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.899
Lookback periods: [50, 51, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.979
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 5m 10sRunning iteration 561/1500... Est. remaining: 5m 7sRunning iteration 571/1500... Est. remaining: 5m 3sRunning iteration 581/1500... Est. remaining: 4m 59sRunning iteration 591/1500... Est. remaining: 4m 56sRunning iteration 601/1500... Est. remaining: 4m 52sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.9787728716388813), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.059
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 4m 45sRunning iteration 631/1500... Est. remaining: 4m 42sRunning iteration 641/1500... Est. remaining: 4m 38sRunning iteration 651/1500... Est. remaining: 4m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 2.087
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 4m 32sRunning iteration 671/1500... Est. remaining: 4m 29sRunning iteration 681/1500... Est. remaining: 4m 25sRunning iteration 691/1500... Est. remaining: 4m 21sRunning iteration 701/1500... Est. remaining: 4m 18sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(2.08654352654971), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 14sRunning iteration 721/1500... Est. remaining: 4m 11sRunning iteration 731/1500... Est. remaining: 4m 7sRunning iteration 741/1500... Est. remaining: 4m 4sRunning iteration 751/1500... Est. remaining: 4m 0sRunning iteration 761/1500... Est. remaining: 3m 57sRunning iteration 771/1500... Est. remaining: 3m 54sRunning iteration 781/1500... Est. remaining: 3m 50sRunning iteration 791/1500... Est. remaining: 3m 47sRunning iteration 801/1500... Est. remaining: 3m 43sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(2.08654352654971), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 40sRunning iteration 821/1500... Est. remaining: 3m 37sRunning iteration 831/1500... Est. remaining: 3m 33sRunning iteration 841/1500... Est. remaining: 3m 30sRunning iteration 851/1500... Est. remaining: 3m 27sRunning iteration 861/1500... Est. remaining: 3m 23sRunning iteration 871/1500... Est. remaining: 3m 20sRunning iteration 881/1500... Est. remaining: 3m 17sRunning iteration 891/1500... Est. remaining: 3m 13sRunning iteration 901/1500... Est. remaining: 3m 10sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(2.08654352654971), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.198
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 3m 7sRunning iteration 921/1500... Est. remaining: 3m 4sRunning iteration 931/1500... Est. remaining: 3m 1sRunning iteration 941/1500... Est. remaining: 2m 57sRunning iteration 951/1500... Est. remaining: 2m 54sRunning iteration 961/1500... Est. remaining: 2m 51sRunning iteration 971/1500... Est. remaining: 2m 47sRunning iteration 981/1500... Est. remaining: 2m 44sRunning iteration 991/1500... Est. remaining: 2m 41sRunning iteration 1001/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.197866804376689), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 34sRunning iteration 1021/1500... Est. remaining: 2m 31sRunning iteration 1031/1500... Est. remaining: 2m 28sRunning iteration 1041/1500... Est. remaining: 2m 25sRunning iteration 1051/1500... Est. remaining: 2m 22sRunning iteration 1061/1500... Est. remaining: 2m 18sRunning iteration 1071/1500... Est. remaining: 2m 15sRunning iteration 1081/1500... Est. remaining: 2m 12sRunning iteration 1091/1500... Est. remaining: 2m 9sRunning iteration 1101/1500... Est. remaining: 2m 5sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.197866804376689), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 2sRunning iteration 1121/1500... Est. remaining: 1m 59sRunning iteration 1131/1500... Est. remaining: 1m 56sRunning iteration 1141/1500... Est. remaining: 1m 53sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 46sRunning iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 40sRunning iteration 1191/1500... Est. remaining: 1m 37sRunning iteration 1201/1500... Est. remaining: 1m 34sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.197866804376689), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 18sRunning iteration 1261/1500... Est. remaining: 1m 15sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.197866804376689), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.197866804376689), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 2.20
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.197866804376689), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.1979)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Mon Aug 25 14:18:34 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $214,954,395
Annual Return: 33.35%
Sharpe Ratio: 1.16601
Sortino Ratio: 1.084
Max Drawdown: -52.3%
Avg Drawdown: -12.0%
Normalized Score: -1.334
Lookback periods: [79, 101, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $606,496,475
Annual Return: 37.40%
Sharpe Ratio: 1.28430
Sortino Ratio: 1.193
Max Drawdown: -55.0%
Avg Drawdown: -13.0%
Normalized Score: -1.028
Lookback periods: [74, 159, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,285,870,570
Annual Return: 42.77%
Sharpe Ratio: 1.40591
Sortino Ratio: 1.355
Max Drawdown: -61.1%
Avg Drawdown: -13.8%
Normalized Score: -0.640
Lookback periods: [122, 131, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,452,298,601
Annual Return: 40.91%
Sharpe Ratio: 1.37615
Sortino Ratio: 1.318
Max Drawdown: -52.3%
Avg Drawdown: -12.8%
Normalized Score: -0.428
Lookback periods: [102, 119, 121] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,448,112,498
Annual Return: 44.47%
Sharpe Ratio: 1.46133
Sortino Ratio: 1.423
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.017
Lookback periods: [156, 169, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 18m 7sRunning iteration 21/1500... Est. remaining: 12m 17sRunning iteration 31/1500... Est. remaining: 10m 14sRunning iteration 41/1500... Est. remaining: 9m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,632,283,168
Annual Return: 45.70%
Sharpe Ratio: 1.48846
Sortino Ratio: 1.449
Max Drawdown: -60.2%
Avg Drawdown: -11.8%
Normalized Score: 0.097
Lookback periods: [158, 188, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,836,235,023
Annual Return: 43.66%
Sharpe Ratio: 1.49169
Sortino Ratio: 1.426
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: 0.360
Lookback periods: [90, 126, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 9m 32sRunning iteration 61/1500... Est. remaining: 9m 5sRunning iteration 71/1500... Est. remaining: 8m 45sRunning iteration 81/1500... Est. remaining: 8m 30sRunning iteration 91/1500... Est. remaining: 8m 17sRunning iteration 101/1500... Est. remaining: 8m 7sbest_combination: {'lookbacks': [90, 126, 146], 'score': np.float64(0.35998167993344127), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,738,028,063
Annual Return: 41.64%
Sharpe Ratio: 1.49782
Sortino Ratio: 1.414
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.000
Lookback periods: [50, 63, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 7m 58sRunning iteration 131/1500... Est. remaining: 7m 51sRunning iteration 141/1500... Est. remaining: 7m 44sRunning iteration 151/1500... Est. remaining: 7m 38sRunning iteration 161/1500... Est. remaining: 7m 32sRunning iteration 171/1500... Est. remaining: 7m 26sRunning iteration 181/1500... Est. remaining: 7m 20sRunning iteration 191/1500... Est. remaining: 7m 15sRunning iteration 201/1500... Est. remaining: 7m 10sbest_combination: {'lookbacks': [50, 63, 96], 'score': np.float64(1.0002615377424948), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 5sRunning iteration 221/1500... Est. remaining: 7m 0sRunning iteration 231/1500... Est. remaining: 6m 55sRunning iteration 241/1500... Est. remaining: 6m 51sRunning iteration 251/1500... Est. remaining: 6m 47sRunning iteration 261/1500... Est. remaining: 6m 42sRunning iteration 271/1500... Est. remaining: 6m 38sRunning iteration 281/1500... Est. remaining: 6m 34sRunning iteration 291/1500... Est. remaining: 6m 30sRunning iteration 301/1500... Est. remaining: 6m 26sbest_combination: {'lookbacks': [50, 63, 96], 'score': np.float64(1.0002615377424948), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 22sRunning iteration 321/1500... Est. remaining: 6m 18sRunning iteration 331/1500... Est. remaining: 6m 15sRunning iteration 341/1500... Est. remaining: 6m 11sRunning iteration 351/1500... Est. remaining: 6m 7sRunning iteration 361/1500... Est. remaining: 6m 3sRunning iteration 371/1500... Est. remaining: 6m 0sRunning iteration 381/1500... Est. remaining: 5m 56sRunning iteration 391/1500... Est. remaining: 5m 52sRunning iteration 401/1500... Est. remaining: 5m 49sbest_combination: {'lookbacks': [50, 63, 96], 'score': np.float64(1.0002615377424948), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 45sRunning iteration 421/1500... Est. remaining: 5m 42sRunning iteration 431/1500... Est. remaining: 5m 38sRunning iteration 441/1500... Est. remaining: 5m 34sRunning iteration 451/1500... Est. remaining: 5m 31sRunning iteration 461/1500... Est. remaining: 5m 28sRunning iteration 471/1500... Est. remaining: 5m 24sRunning iteration 481/1500... Est. remaining: 5m 21sRunning iteration 491/1500... Est. remaining: 5m 18sRunning iteration 501/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [50, 63, 96], 'score': np.float64(1.0002615377424948), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 11sRunning iteration 521/1500... Est. remaining: 5m 8sRunning iteration 531/1500... Est. remaining: 5m 4sRunning iteration 541/1500... Est. remaining: 5m 1sRunning iteration 551/1500... Est. remaining: 4m 57sRunning iteration 561/1500... Est. remaining: 4m 54sRunning iteration 571/1500... Est. remaining: 4m 51sRunning iteration 581/1500... Est. remaining: 4m 47sRunning iteration 591/1500... Est. remaining: 4m 44sRunning iteration 601/1500... Est. remaining: 4m 41sbest_combination: {'lookbacks': [50, 63, 96], 'score': np.float64(1.0002615377424948), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 38sRunning iteration 621/1500... Est. remaining: 4m 34sRunning iteration 631/1500... Est. remaining: 4m 31sRunning iteration 641/1500... Est. remaining: 4m 28sRunning iteration 651/1500... Est. remaining: 4m 25sRunning iteration 661/1500... Est. remaining: 4m 21sRunning iteration 671/1500... Est. remaining: 4m 18sRunning iteration 681/1500... Est. remaining: 4m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,005,635,845
Annual Return: 42.23%
Sharpe Ratio: 1.54851
Sortino Ratio: 1.453
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.277
Lookback periods: [50, 58, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 4m 12sRunning iteration 701/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [50, 58, 97], 'score': np.float64(1.2766756653547546), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 6sRunning iteration 721/1500... Est. remaining: 4m 3sRunning iteration 731/1500... Est. remaining: 3m 59sRunning iteration 741/1500... Est. remaining: 3m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,899,750,931
Annual Return: 43.75%
Sharpe Ratio: 1.57135
Sortino Ratio: 1.477
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.381
Lookback periods: [50, 52, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 3m 54sRunning iteration 761/1500... Est. remaining: 3m 51sRunning iteration 771/1500... Est. remaining: 3m 47sRunning iteration 781/1500... Est. remaining: 3m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,734,383,559
Annual Return: 44.80%
Sharpe Ratio: 1.61116
Sortino Ratio: 1.516
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.510
Lookback periods: [50, 54, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 3m 42sRunning iteration 801/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [50, 54, 98], 'score': np.float64(1.5096628004035346), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 32sRunning iteration 831/1500... Est. remaining: 3m 29sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.607
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 13sRunning iteration 891/1500... Est. remaining: 3m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.668
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 901/1500... Est. remaining: 3m 7sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6678877718178768), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 4sRunning iteration 921/1500... Est. remaining: 3m 1sRunning iteration 931/1500... Est. remaining: 2m 58sRunning iteration 941/1500... Est. remaining: 2m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.819
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 2m 52sRunning iteration 961/1500... Est. remaining: 2m 48sRunning iteration 971/1500... Est. remaining: 2m 45sRunning iteration 981/1500... Est. remaining: 2m 42sRunning iteration 991/1500... Est. remaining: 2m 39sRunning iteration 1001/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.818713041633351), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 33sRunning iteration 1021/1500... Est. remaining: 2m 29sRunning iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 23sRunning iteration 1051/1500... Est. remaining: 2m 20sRunning iteration 1061/1500... Est. remaining: 2m 17sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.818713041633351), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 58sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.818713041633351), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.818713041633351), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.818713041633351), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.877
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.88
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.8766045337921071), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 1.8766)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Mon Aug 25 14:26:22 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $849,863,714
Annual Return: 38.75%
Sharpe Ratio: 1.34779
Sortino Ratio: 1.259
Max Drawdown: -52.3%
Avg Drawdown: -11.5%
Normalized Score: -0.360
Lookback periods: [78, 90, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,548,377,405
Annual Return: 41.17%
Sharpe Ratio: 1.40600
Sortino Ratio: 1.336
Max Drawdown: -55.0%
Avg Drawdown: -12.6%
Normalized Score: -0.284
Lookback periods: [86, 126, 139] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 14m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,276,381,481
Annual Return: 40.39%
Sharpe Ratio: 1.39034
Sortino Ratio: 1.309
Max Drawdown: -52.3%
Avg Drawdown: -12.3%
Normalized Score: -0.255
Lookback periods: [87, 102, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 11m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $702,924,130
Annual Return: 37.99%
Sharpe Ratio: 1.34631
Sortino Ratio: 1.258
Max Drawdown: -44.8%
Avg Drawdown: -10.9%
Normalized Score: -0.073
Lookback periods: [50, 79, 119] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 9m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,420,414,902
Annual Return: 47.08%
Sharpe Ratio: 1.53303
Sortino Ratio: 1.491
Max Drawdown: -57.9%
Avg Drawdown: -12.1%
Normalized Score: 0.370
Lookback periods: [147, 155, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 9m 34sRunning iteration 51/1500... Est. remaining: 9m 1sRunning iteration 61/1500... Est. remaining: 8m 39sRunning iteration 71/1500... Est. remaining: 8m 23sRunning iteration 81/1500... Est. remaining: 8m 11sRunning iteration 91/1500... Est. remaining: 8m 0sRunning iteration 101/1500... Est. remaining: 7m 50sbest_combination: {'lookbacks': [147, 155, 200], 'score': np.float64(0.36996640474819786), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 42sRunning iteration 121/1500... Est. remaining: 7m 35sRunning iteration 131/1500... Est. remaining: 7m 29sRunning iteration 141/1500... Est. remaining: 7m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,075,707,913
Annual Return: 46.85%
Sharpe Ratio: 1.52352
Sortino Ratio: 1.482
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.443
Lookback periods: [156, 158, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 7m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,250,851,932
Annual Return: 42.70%
Sharpe Ratio: 1.52447
Sortino Ratio: 1.441
Max Drawdown: -38.7%
Avg Drawdown: -9.4%
Normalized Score: 1.052
Lookback periods: [51, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 7m 25sRunning iteration 171/1500... Est. remaining: 7m 19sRunning iteration 181/1500... Est. remaining: 7m 14sRunning iteration 191/1500... Est. remaining: 7m 9sRunning iteration 201/1500... Est. remaining: 7m 3sbest_combination: {'lookbacks': [51, 54, 90], 'score': np.float64(1.051584338248683), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 59sRunning iteration 221/1500... Est. remaining: 6m 54sRunning iteration 231/1500... Est. remaining: 6m 50sRunning iteration 241/1500... Est. remaining: 6m 45sRunning iteration 251/1500... Est. remaining: 6m 41sRunning iteration 261/1500... Est. remaining: 6m 37sRunning iteration 271/1500... Est. remaining: 6m 33sRunning iteration 281/1500... Est. remaining: 6m 29sRunning iteration 291/1500... Est. remaining: 6m 25sRunning iteration 301/1500... Est. remaining: 6m 21sbest_combination: {'lookbacks': [51, 54, 90], 'score': np.float64(1.051584338248683), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 17sRunning iteration 321/1500... Est. remaining: 6m 13sRunning iteration 331/1500... Est. remaining: 6m 10sRunning iteration 341/1500... Est. remaining: 6m 6sRunning iteration 351/1500... Est. remaining: 6m 2sRunning iteration 361/1500... Est. remaining: 5m 59sRunning iteration 371/1500... Est. remaining: 5m 55sRunning iteration 381/1500... Est. remaining: 5m 51sRunning iteration 391/1500... Est. remaining: 5m 48sRunning iteration 401/1500... Est. remaining: 5m 44sbest_combination: {'lookbacks': [51, 54, 90], 'score': np.float64(1.051584338248683), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,111,011,038
Annual Return: 42.44%
Sharpe Ratio: 1.53033
Sortino Ratio: 1.427
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.137
Lookback periods: [50, 55, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 5m 39sRunning iteration 431/1500... Est. remaining: 5m 36sRunning iteration 441/1500... Est. remaining: 5m 32sRunning iteration 451/1500... Est. remaining: 5m 29sRunning iteration 461/1500... Est. remaining: 5m 25sRunning iteration 471/1500... Est. remaining: 5m 22sRunning iteration 481/1500... Est. remaining: 5m 19sRunning iteration 491/1500... Est. remaining: 5m 15sRunning iteration 501/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [50, 55, 89], 'score': np.float64(1.1365011617091425), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 9sRunning iteration 521/1500... Est. remaining: 5m 6sRunning iteration 531/1500... Est. remaining: 5m 3sRunning iteration 541/1500... Est. remaining: 4m 59sRunning iteration 551/1500... Est. remaining: 4m 56sRunning iteration 561/1500... Est. remaining: 4m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,916,377,953
Annual Return: 45.00%
Sharpe Ratio: 1.61386
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.623
Lookback periods: [50, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 4m 51sRunning iteration 581/1500... Est. remaining: 4m 48sRunning iteration 591/1500... Est. remaining: 4m 44sRunning iteration 601/1500... Est. remaining: 4m 41sbest_combination: {'lookbacks': [50, 54, 95], 'score': np.float64(1.6231468636995416), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 38sRunning iteration 621/1500... Est. remaining: 4m 35sRunning iteration 631/1500... Est. remaining: 4m 31sRunning iteration 641/1500... Est. remaining: 4m 28sRunning iteration 651/1500... Est. remaining: 4m 25sRunning iteration 661/1500... Est. remaining: 4m 22sRunning iteration 671/1500... Est. remaining: 4m 18sRunning iteration 681/1500... Est. remaining: 4m 15sRunning iteration 691/1500... Est. remaining: 4m 12sRunning iteration 701/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [50, 54, 95], 'score': np.float64(1.6231468636995416), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.723
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 4m 3sRunning iteration 731/1500... Est. remaining: 4m 0sRunning iteration 741/1500... Est. remaining: 3m 57sRunning iteration 751/1500... Est. remaining: 3m 54sRunning iteration 761/1500... Est. remaining: 3m 51sRunning iteration 771/1500... Est. remaining: 3m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.877
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 781/1500... Est. remaining: 3m 45sRunning iteration 791/1500... Est. remaining: 3m 42sRunning iteration 801/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8771978493007446), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 32sRunning iteration 831/1500... Est. remaining: 3m 29sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8771978493007446), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 3sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 56sRunning iteration 941/1500... Est. remaining: 2m 53sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 37sRunning iteration 1001/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8771978493007446), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 31sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 18sRunning iteration 1061/1500... Est. remaining: 2m 15sRunning iteration 1071/1500... Est. remaining: 2m 12sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8771978493007446), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 53sRunning iteration 1141/1500... Est. remaining: 1m 50sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8771978493007446), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8771978493007446), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8771978493007446), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 1.88
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8771978493007446), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.8772)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Mon Aug 25 14:34:05 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-25T14:34:06.773683
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.6549
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $340,353,516
Annual Return: 35.13%
Sharpe Ratio: 1.23456
Sortino Ratio: 1.141
Max Drawdown: -52.3%
Avg Drawdown: -12.6%
Normalized Score: -1.410
Lookback periods: [78, 84, 129] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,305,641,986
Annual Return: 40.48%
Sharpe Ratio: 1.33481
Sortino Ratio: 1.283
Max Drawdown: -69.3%
Avg Drawdown: -13.0%
Normalized Score: -1.316
Lookback periods: [97, 191, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $442,875,294
Annual Return: 36.16%
Sharpe Ratio: 1.25365
Sortino Ratio: 1.165
Max Drawdown: -52.3%
Avg Drawdown: -11.8%
Normalized Score: -1.168
Lookback periods: [81, 107, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,611,522,278
Annual Return: 45.69%
Sharpe Ratio: 1.49824
Sortino Ratio: 1.459
Max Drawdown: -61.0%
Avg Drawdown: -12.7%
Normalized Score: -0.162
Lookback periods: [136, 179, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 17m 40sRunning iteration 21/1500... Est. remaining: 12m 1sRunning iteration 31/1500... Est. remaining: 10m 2sRunning iteration 41/1500... Est. remaining: 9m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,852,076,397
Annual Return: 45.90%
Sharpe Ratio: 1.50331
Sortino Ratio: 1.457
Max Drawdown: -59.7%
Avg Drawdown: -12.2%
Normalized Score: -0.028
Lookback periods: [151, 159, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 9m 2sRunning iteration 61/1500... Est. remaining: 8m 41sRunning iteration 71/1500... Est. remaining: 8m 26sRunning iteration 81/1500... Est. remaining: 8m 12sRunning iteration 91/1500... Est. remaining: 8m 2sRunning iteration 101/1500... Est. remaining: 7m 53sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 44sRunning iteration 121/1500... Est. remaining: 7m 37sRunning iteration 131/1500... Est. remaining: 7m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,866,837,343
Annual Return: 44.95%
Sharpe Ratio: 1.48689
Sortino Ratio: 1.442
Max Drawdown: -55.0%
Avg Drawdown: -12.5%
Normalized Score: -0.025
Lookback periods: [138, 139, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 7m 32sRunning iteration 151/1500... Est. remaining: 7m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,361,306,260
Annual Return: 46.32%
Sharpe Ratio: 1.50371
Sortino Ratio: 1.458
Max Drawdown: -60.7%
Avg Drawdown: -11.4%
Normalized Score: 0.063
Lookback periods: [183, 183, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 7m 26sRunning iteration 171/1500... Est. remaining: 7m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,631,262,302
Annual Return: 44.68%
Sharpe Ratio: 1.52804
Sortino Ratio: 1.454
Max Drawdown: -52.3%
Avg Drawdown: -10.5%
Normalized Score: 0.377
Lookback periods: [94, 126, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/1500... Est. remaining: 7m 21sRunning iteration 191/1500... Est. remaining: 7m 15sRunning iteration 201/1500... Est. remaining: 7m 10sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 5sRunning iteration 221/1500... Est. remaining: 7m 0sRunning iteration 231/1500... Est. remaining: 6m 56sRunning iteration 241/1500... Est. remaining: 6m 51sRunning iteration 251/1500... Est. remaining: 6m 47sRunning iteration 261/1500... Est. remaining: 6m 42sRunning iteration 271/1500... Est. remaining: 6m 38sRunning iteration 281/1500... Est. remaining: 6m 34sRunning iteration 291/1500... Est. remaining: 6m 30sRunning iteration 301/1500... Est. remaining: 6m 25sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 21sRunning iteration 321/1500... Est. remaining: 6m 17sRunning iteration 331/1500... Est. remaining: 6m 14sRunning iteration 341/1500... Est. remaining: 6m 10sRunning iteration 351/1500... Est. remaining: 6m 6sRunning iteration 361/1500... Est. remaining: 6m 2sRunning iteration 371/1500... Est. remaining: 5m 59sRunning iteration 381/1500... Est. remaining: 5m 56sRunning iteration 391/1500... Est. remaining: 5m 52sRunning iteration 401/1500... Est. remaining: 5m 48sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 45sRunning iteration 421/1500... Est. remaining: 5m 41sRunning iteration 431/1500... Est. remaining: 5m 38sRunning iteration 441/1500... Est. remaining: 5m 34sRunning iteration 451/1500... Est. remaining: 5m 31sRunning iteration 461/1500... Est. remaining: 5m 27sRunning iteration 471/1500... Est. remaining: 5m 24sRunning iteration 481/1500... Est. remaining: 5m 20sRunning iteration 491/1500... Est. remaining: 5m 17sRunning iteration 501/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 10sRunning iteration 521/1500... Est. remaining: 5m 7sRunning iteration 531/1500... Est. remaining: 5m 3sRunning iteration 541/1500... Est. remaining: 5m 0sRunning iteration 551/1500... Est. remaining: 4m 57sRunning iteration 561/1500... Est. remaining: 4m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,966,330,428
Annual Return: 47.43%
Sharpe Ratio: 1.55084
Sortino Ratio: 1.507
Max Drawdown: -55.0%
Avg Drawdown: -10.8%
Normalized Score: 0.539
Lookback periods: [156, 159, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 4m 51sRunning iteration 581/1500... Est. remaining: 4m 48sRunning iteration 591/1500... Est. remaining: 4m 45sRunning iteration 601/1500... Est. remaining: 4m 41sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 38sRunning iteration 621/1500... Est. remaining: 4m 35sRunning iteration 631/1500... Est. remaining: 4m 32sRunning iteration 641/1500... Est. remaining: 4m 28sRunning iteration 651/1500... Est. remaining: 4m 25sRunning iteration 661/1500... Est. remaining: 4m 22sRunning iteration 671/1500... Est. remaining: 4m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,989,752,063
Annual Return: 42.20%
Sharpe Ratio: 1.52253
Sortino Ratio: 1.421
Max Drawdown: -35.6%
Avg Drawdown: -9.4%
Normalized Score: 0.852
Lookback periods: [50, 55, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 4m 16sRunning iteration 691/1500... Est. remaining: 4m 13sRunning iteration 701/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 7sRunning iteration 721/1500... Est. remaining: 4m 3sRunning iteration 731/1500... Est. remaining: 4m 0sRunning iteration 741/1500... Est. remaining: 3m 57sRunning iteration 751/1500... Est. remaining: 3m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,531,084,829
Annual Return: 44.57%
Sharpe Ratio: 1.59742
Sortino Ratio: 1.506
Max Drawdown: -37.2%
Avg Drawdown: -9.1%
Normalized Score: 1.226
Lookback periods: [51, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 3m 51sRunning iteration 771/1500... Est. remaining: 3m 48sRunning iteration 781/1500... Est. remaining: 3m 45sRunning iteration 791/1500... Est. remaining: 3m 41sRunning iteration 801/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 32sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 3sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,215,830,150
Annual Return: 45.31%
Sharpe Ratio: 1.62720
Sortino Ratio: 1.544
Max Drawdown: -36.6%
Avg Drawdown: -8.6%
Normalized Score: 1.458
Lookback periods: [52, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 2m 54sRunning iteration 951/1500... Est. remaining: 2m 51sRunning iteration 961/1500... Est. remaining: 2m 48sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 29sRunning iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.46
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6549361911953724), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [50, 52, 95] (score: 1.6549)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 96] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 105 selections (25.2%)
2. naz100_hma: 96 selections (23.1%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,215,830,150.33
Average Annualized Gain: 45.3%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 14:41:53 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-25T14:41:53.700000
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 0.8537
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,599,017,225
Annual Return: 43.30%
Sharpe Ratio: 1.42924
Sortino Ratio: 1.376
Max Drawdown: -66.7%
Avg Drawdown: -13.1%
Normalized Score: -0.541
Lookback periods: [103, 184, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $950,856,328
Annual Return: 39.20%
Sharpe Ratio: 1.38032
Sortino Ratio: 1.275
Max Drawdown: -55.0%
Avg Drawdown: -11.6%
Normalized Score: -0.509
Lookback periods: [52, 118, 141] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,510,444,994
Annual Return: 43.15%
Sharpe Ratio: 1.42789
Sortino Ratio: 1.387
Max Drawdown: -60.3%
Avg Drawdown: -12.2%
Normalized Score: -0.239
Lookback periods: [137, 168, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 15m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,570,303,959
Annual Return: 44.61%
Sharpe Ratio: 1.44060
Sortino Ratio: 1.396
Max Drawdown: -60.2%
Avg Drawdown: -11.9%
Normalized Score: -0.074
Lookback periods: [187, 191, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,814,584,567
Annual Return: 41.82%
Sharpe Ratio: 1.43631
Sortino Ratio: 1.364
Max Drawdown: -52.3%
Avg Drawdown: -11.1%
Normalized Score: 0.009
Lookback periods: [83, 130, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 12m 25sRunning iteration 31/1500... Est. remaining: 10m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,320,356,677
Annual Return: 46.29%
Sharpe Ratio: 1.54913
Sortino Ratio: 1.505
Max Drawdown: -65.0%
Avg Drawdown: -11.7%
Normalized Score: 0.218
Lookback periods: [116, 159, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 9m 51sRunning iteration 51/1500... Est. remaining: 9m 17sRunning iteration 61/1500... Est. remaining: 8m 50sRunning iteration 71/1500... Est. remaining: 8m 32sRunning iteration 81/1500... Est. remaining: 8m 18sRunning iteration 91/1500... Est. remaining: 8m 7sRunning iteration 101/1500... Est. remaining: 7m 57sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(0.8537217113851187), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 49sRunning iteration 121/1500... Est. remaining: 7m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,352,299,990
Annual Return: 45.44%
Sharpe Ratio: 1.49233
Sortino Ratio: 1.450
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.225
Lookback periods: [140, 157, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 7m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,439,032,529
Annual Return: 47.71%
Sharpe Ratio: 1.55209
Sortino Ratio: 1.515
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 0.538
Lookback periods: [155, 160, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 7m 42sRunning iteration 151/1500... Est. remaining: 7m 36sRunning iteration 161/1500... Est. remaining: 7m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,922,944,697
Annual Return: 47.40%
Sharpe Ratio: 1.56985
Sortino Ratio: 1.529
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.569
Lookback periods: [138, 159, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 7m 28sRunning iteration 181/1500... Est. remaining: 7m 22sRunning iteration 191/1500... Est. remaining: 7m 16sRunning iteration 201/1500... Est. remaining: 7m 11sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(0.8537217113851187), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 6sRunning iteration 221/1500... Est. remaining: 7m 1sRunning iteration 231/1500... Est. remaining: 6m 56sRunning iteration 241/1500... Est. remaining: 6m 51sRunning iteration 251/1500... Est. remaining: 6m 46sRunning iteration 261/1500... Est. remaining: 6m 42sRunning iteration 271/1500... Est. remaining: 6m 38sRunning iteration 281/1500... Est. remaining: 6m 33sRunning iteration 291/1500... Est. remaining: 6m 29sRunning iteration 301/1500... Est. remaining: 6m 25sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(0.8537217113851187), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 21sRunning iteration 321/1500... Est. remaining: 6m 17sRunning iteration 331/1500... Est. remaining: 6m 13sRunning iteration 341/1500... Est. remaining: 6m 9sRunning iteration 351/1500... Est. remaining: 6m 6sRunning iteration 361/1500... Est. remaining: 6m 2sRunning iteration 371/1500... Est. remaining: 5m 58sRunning iteration 381/1500... Est. remaining: 5m 54sRunning iteration 391/1500... Est. remaining: 5m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,110,975,514
Annual Return: 47.52%
Sharpe Ratio: 1.56110
Sortino Ratio: 1.516
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.590
Lookback periods: [136, 157, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 5m 49sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(0.8537217113851187), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 46sRunning iteration 421/1500... Est. remaining: 5m 42sRunning iteration 431/1500... Est. remaining: 5m 39sRunning iteration 441/1500... Est. remaining: 5m 35sRunning iteration 451/1500... Est. remaining: 5m 31sRunning iteration 461/1500... Est. remaining: 5m 28sRunning iteration 471/1500... Est. remaining: 5m 24sRunning iteration 481/1500... Est. remaining: 5m 21sRunning iteration 491/1500... Est. remaining: 5m 17sRunning iteration 501/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(0.8537217113851187), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 11sRunning iteration 521/1500... Est. remaining: 5m 7sRunning iteration 531/1500... Est. remaining: 5m 4sRunning iteration 541/1500... Est. remaining: 5m 0sRunning iteration 551/1500... Est. remaining: 4m 57sRunning iteration 561/1500... Est. remaining: 4m 54sRunning iteration 571/1500... Est. remaining: 4m 50sRunning iteration 581/1500... Est. remaining: 4m 47sRunning iteration 591/1500... Est. remaining: 4m 44sRunning iteration 601/1500... Est. remaining: 4m 41sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(0.8537217113851187), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 37sRunning iteration 621/1500... Est. remaining: 4m 34sRunning iteration 631/1500... Est. remaining: 4m 31sRunning iteration 641/1500... Est. remaining: 4m 27sRunning iteration 651/1500... Est. remaining: 4m 24sRunning iteration 661/1500... Est. remaining: 4m 21sRunning iteration 671/1500... Est. remaining: 4m 18sRunning iteration 681/1500... Est. remaining: 4m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,701,046,581
Annual Return: 47.86%
Sharpe Ratio: 1.58377
Sortino Ratio: 1.540
Max Drawdown: -57.2%
Avg Drawdown: -11.6%
Normalized Score: 0.657
Lookback periods: [136, 156, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 4m 12sRunning iteration 701/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(0.8537217113851187), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 6sRunning iteration 721/1500... Est. remaining: 4m 2sRunning iteration 731/1500... Est. remaining: 3m 59sRunning iteration 741/1500... Est. remaining: 3m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,176,923,860
Annual Return: 49.05%
Sharpe Ratio: 1.58085
Sortino Ratio: 1.539
Max Drawdown: -60.2%
Avg Drawdown: -11.2%
Normalized Score: 0.691
Lookback periods: [183, 189, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 3m 54sRunning iteration 761/1500... Est. remaining: 3m 50sRunning iteration 771/1500... Est. remaining: 3m 47sRunning iteration 781/1500... Est. remaining: 3m 44sRunning iteration 791/1500... Est. remaining: 3m 41sRunning iteration 801/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(0.8537217113851187), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 34sRunning iteration 821/1500... Est. remaining: 3m 31sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,089,475,450
Annual Return: 49.01%
Sharpe Ratio: 1.58813
Sortino Ratio: 1.545
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.741
Lookback periods: [178, 188, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 13sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(0.8537217113851187), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 3sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 57sRunning iteration 941/1500... Est. remaining: 2m 54sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [176, 184, 189], 'score': np.float64(0.8537217113851187), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,504,333,025
Annual Return: 49.94%
Sharpe Ratio: 1.60523
Sortino Ratio: 1.576
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.900
Lookback periods: [176, 188, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(0.9003699738204544), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(0.9003699738204544), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $14,200,892,471
Annual Return: 50.49%
Sharpe Ratio: 1.62552
Sortino Ratio: 1.594
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.978
Lookback periods: [176, 184, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [176, 184, 188], 'score': np.float64(0.9780202964093843), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [176, 184, 188], 'score': np.float64(0.9780202964093843), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 0.98
best_combination: {'lookbacks': [176, 184, 188], 'score': np.float64(0.9780202964093843), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [176, 184, 188] (score: 0.9780)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 184, 188] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 120 selections (28.8%)
2. sp500_hma: 100 selections (24.0%)
3. naz100_pine: 85 selections (20.4%)
4. naz100_pi: 72 selections (17.3%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $14,200,892,471.00
Average Annualized Gain: 50.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 14:49:42 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $293,417,312
Annual Return: 34.55%
Sharpe Ratio: 1.17555
Sortino Ratio: 1.101
Max Drawdown: -65.8%
Avg Drawdown: -14.2%
Normalized Score: -2.476
Lookback periods: [69, 99, 108] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $462,033,325
Annual Return: 36.33%
Sharpe Ratio: 1.27216
Sortino Ratio: 1.164
Max Drawdown: -68.6%
Avg Drawdown: -14.4%
Normalized Score: -2.194
Lookback periods: [57, 123, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $251,463,473
Annual Return: 33.96%
Sharpe Ratio: 1.18674
Sortino Ratio: 1.088
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: -1.736
Lookback periods: [53, 80, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,511,940,953
Annual Return: 41.07%
Sharpe Ratio: 1.38714
Sortino Ratio: 1.323
Max Drawdown: -55.0%
Avg Drawdown: -12.7%
Normalized Score: -0.616
Lookback periods: [85, 128, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,789,621,968
Annual Return: 43.59%
Sharpe Ratio: 1.47992
Sortino Ratio: 1.414
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: 0.273
Lookback periods: [94, 117, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 18m 4sRunning iteration 21/1500... Est. remaining: 12m 12sRunning iteration 31/1500... Est. remaining: 10m 15sRunning iteration 41/1500... Est. remaining: 9m 26sRunning iteration 51/1500... Est. remaining: 8m 56sRunning iteration 61/1500... Est. remaining: 8m 36sRunning iteration 71/1500... Est. remaining: 8m 21sRunning iteration 81/1500... Est. remaining: 8m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,596,748,839
Annual Return: 46.50%
Sharpe Ratio: 1.51263
Sortino Ratio: 1.484
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.607
Lookback periods: [156, 163, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 8m 11sRunning iteration 101/1500... Est. remaining: 8m 2sbest_combination: {'lookbacks': [156, 163, 172], 'score': np.float64(0.6068011502115628), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 54sRunning iteration 121/1500... Est. remaining: 7m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,376,110,300
Annual Return: 47.67%
Sharpe Ratio: 1.56057
Sortino Ratio: 1.521
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.689
Lookback periods: [137, 158, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 7m 48sRunning iteration 141/1500... Est. remaining: 7m 41sRunning iteration 151/1500... Est. remaining: 7m 35sRunning iteration 161/1500... Est. remaining: 7m 29sRunning iteration 171/1500... Est. remaining: 7m 23sRunning iteration 181/1500... Est. remaining: 7m 17sRunning iteration 191/1500... Est. remaining: 7m 12sRunning iteration 201/1500... Est. remaining: 7m 7sbest_combination: {'lookbacks': [137, 158, 188], 'score': np.float64(0.6889141009644331), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 2sRunning iteration 221/1500... Est. remaining: 6m 58sRunning iteration 231/1500... Est. remaining: 6m 53sRunning iteration 241/1500... Est. remaining: 6m 49sRunning iteration 251/1500... Est. remaining: 6m 45sRunning iteration 261/1500... Est. remaining: 6m 41sRunning iteration 271/1500... Est. remaining: 6m 37sRunning iteration 281/1500... Est. remaining: 6m 32sRunning iteration 291/1500... Est. remaining: 6m 28sRunning iteration 301/1500... Est. remaining: 6m 24sbest_combination: {'lookbacks': [137, 158, 188], 'score': np.float64(0.6889141009644331), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 21sRunning iteration 321/1500... Est. remaining: 6m 17sRunning iteration 331/1500... Est. remaining: 6m 13sRunning iteration 341/1500... Est. remaining: 6m 9sRunning iteration 351/1500... Est. remaining: 6m 5sRunning iteration 361/1500... Est. remaining: 6m 2sRunning iteration 371/1500... Est. remaining: 5m 58sRunning iteration 381/1500... Est. remaining: 5m 54sRunning iteration 391/1500... Est. remaining: 5m 51sRunning iteration 401/1500... Est. remaining: 5m 47sbest_combination: {'lookbacks': [137, 158, 188], 'score': np.float64(0.6889141009644331), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 44sRunning iteration 421/1500... Est. remaining: 5m 40sRunning iteration 431/1500... Est. remaining: 5m 37sRunning iteration 441/1500... Est. remaining: 5m 33sRunning iteration 451/1500... Est. remaining: 5m 30sRunning iteration 461/1500... Est. remaining: 5m 26sRunning iteration 471/1500... Est. remaining: 5m 23sRunning iteration 481/1500... Est. remaining: 5m 20sRunning iteration 491/1500... Est. remaining: 5m 16sRunning iteration 501/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [137, 158, 188], 'score': np.float64(0.6889141009644331), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 10sRunning iteration 521/1500... Est. remaining: 5m 6sRunning iteration 531/1500... Est. remaining: 5m 3sRunning iteration 541/1500... Est. remaining: 5m 0sRunning iteration 551/1500... Est. remaining: 4m 56sRunning iteration 561/1500... Est. remaining: 4m 53sRunning iteration 571/1500... Est. remaining: 4m 50sRunning iteration 581/1500... Est. remaining: 4m 47sRunning iteration 591/1500... Est. remaining: 4m 43sRunning iteration 601/1500... Est. remaining: 4m 40sbest_combination: {'lookbacks': [137, 158, 188], 'score': np.float64(0.6889141009644331), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 37sRunning iteration 621/1500... Est. remaining: 4m 34sRunning iteration 631/1500... Est. remaining: 4m 30sRunning iteration 641/1500... Est. remaining: 4m 27sRunning iteration 651/1500... Est. remaining: 4m 24sRunning iteration 661/1500... Est. remaining: 4m 21sRunning iteration 671/1500... Est. remaining: 4m 18sRunning iteration 681/1500... Est. remaining: 4m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,362,797,863
Annual Return: 48.69%
Sharpe Ratio: 1.60063
Sortino Ratio: 1.559
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 0.979
Lookback periods: [136, 158, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 4m 12sRunning iteration 701/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [136, 158, 179], 'score': np.float64(0.9793394041562198), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 6sRunning iteration 721/1500... Est. remaining: 4m 3sRunning iteration 731/1500... Est. remaining: 3m 59sRunning iteration 741/1500... Est. remaining: 3m 56sRunning iteration 751/1500... Est. remaining: 3m 53sRunning iteration 761/1500... Est. remaining: 3m 50sRunning iteration 771/1500... Est. remaining: 3m 47sRunning iteration 781/1500... Est. remaining: 3m 43sRunning iteration 791/1500... Est. remaining: 3m 40sRunning iteration 801/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [136, 158, 179], 'score': np.float64(0.9793394041562198), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 34sRunning iteration 821/1500... Est. remaining: 3m 31sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 24sRunning iteration 851/1500... Est. remaining: 3m 21sRunning iteration 861/1500... Est. remaining: 3m 18sRunning iteration 871/1500... Est. remaining: 3m 15sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 5sbest_combination: {'lookbacks': [136, 158, 179], 'score': np.float64(0.9793394041562198), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 2sRunning iteration 921/1500... Est. remaining: 2m 59sRunning iteration 931/1500... Est. remaining: 2m 56sRunning iteration 941/1500... Est. remaining: 2m 53sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 43sRunning iteration 981/1500... Est. remaining: 2m 40sRunning iteration 991/1500... Est. remaining: 2m 37sRunning iteration 1001/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [136, 158, 179], 'score': np.float64(0.9793394041562198), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 31sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 15sRunning iteration 1071/1500... Est. remaining: 2m 12sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [136, 158, 179], 'score': np.float64(0.9793394041562198), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [136, 158, 179], 'score': np.float64(0.9793394041562198), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [136, 158, 179], 'score': np.float64(0.9793394041562198), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [136, 158, 179], 'score': np.float64(0.9793394041562198), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 0.98
best_combination: {'lookbacks': [136, 158, 179], 'score': np.float64(0.9793394041562198), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 158, 179] (score: 0.9793)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 158, 179] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 42 selections (10.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,362,797,862.70
Average Annualized Gain: 48.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 14:57:29 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $405,926,987
Annual Return: 35.82%
Sharpe Ratio: 1.24270
Sortino Ratio: 1.154
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: -0.183
Lookback periods: [60, 79, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,502,705,632
Annual Return: 41.05%
Sharpe Ratio: 1.43600
Sortino Ratio: 1.333
Max Drawdown: -52.3%
Avg Drawdown: -9.7%
Normalized Score: 0.806
Lookback periods: [54, 99, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 13m 9sRunning iteration 21/1500... Est. remaining: 9m 41sRunning iteration 31/1500... Est. remaining: 8m 28sRunning iteration 41/1500... Est. remaining: 7m 52sRunning iteration 51/1500... Est. remaining: 7m 30sRunning iteration 61/1500... Est. remaining: 7m 22sRunning iteration 71/1500... Est. remaining: 7m 16sRunning iteration 81/1500... Est. remaining: 7m 12sRunning iteration 91/1500... Est. remaining: 7m 8sRunning iteration 101/1500... Est. remaining: 7m 5sbest_combination: {'lookbacks': [54, 99, 144], 'score': np.float64(0.8061726108948368), 'visits': 1}
Running iteration 111/1500... Est. remaining: 7m 2sRunning iteration 121/1500... Est. remaining: 6m 58sRunning iteration 131/1500... Est. remaining: 6m 55sRunning iteration 141/1500... Est. remaining: 6m 51sRunning iteration 151/1500... Est. remaining: 6m 48sRunning iteration 161/1500... Est. remaining: 6m 45sRunning iteration 171/1500... Est. remaining: 6m 41sRunning iteration 181/1500... Est. remaining: 6m 38sRunning iteration 191/1500... Est. remaining: 6m 35sRunning iteration 201/1500... Est. remaining: 6m 32sbest_combination: {'lookbacks': [54, 99, 144], 'score': np.float64(0.8061726108948368), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 29sRunning iteration 221/1500... Est. remaining: 6m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $792,889,990
Annual Return: 38.47%
Sharpe Ratio: 1.37048
Sortino Ratio: 1.280
Max Drawdown: -44.8%
Avg Drawdown: -9.8%
Normalized Score: 0.817
Lookback periods: [50, 78, 132] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 6m 27sRunning iteration 241/1500... Est. remaining: 6m 24sRunning iteration 251/1500... Est. remaining: 6m 21sRunning iteration 261/1500... Est. remaining: 6m 17sRunning iteration 271/1500... Est. remaining: 6m 14sRunning iteration 281/1500... Est. remaining: 6m 11sRunning iteration 291/1500... Est. remaining: 6m 8sRunning iteration 301/1500... Est. remaining: 6m 5sbest_combination: {'lookbacks': [50, 78, 132], 'score': np.float64(0.8170854722480332), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,184,386,447
Annual Return: 48.12%
Sharpe Ratio: 1.56629
Sortino Ratio: 1.520
Max Drawdown: -60.6%
Avg Drawdown: -11.5%
Normalized Score: 0.856
Lookback periods: [149, 186, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 6m 5sRunning iteration 321/1500... Est. remaining: 6m 1sRunning iteration 331/1500... Est. remaining: 5m 58sRunning iteration 341/1500... Est. remaining: 5m 55sRunning iteration 351/1500... Est. remaining: 5m 52sRunning iteration 361/1500... Est. remaining: 5m 48sRunning iteration 371/1500... Est. remaining: 5m 45sRunning iteration 381/1500... Est. remaining: 5m 42sRunning iteration 391/1500... Est. remaining: 5m 39sRunning iteration 401/1500... Est. remaining: 5m 36sbest_combination: {'lookbacks': [149, 186, 188], 'score': np.float64(0.8555205900279432), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 33sRunning iteration 421/1500... Est. remaining: 5m 30sRunning iteration 431/1500... Est. remaining: 5m 26sRunning iteration 441/1500... Est. remaining: 5m 23sRunning iteration 451/1500... Est. remaining: 5m 20sRunning iteration 461/1500... Est. remaining: 5m 17sRunning iteration 471/1500... Est. remaining: 5m 14sRunning iteration 481/1500... Est. remaining: 5m 11sRunning iteration 491/1500... Est. remaining: 5m 7sRunning iteration 501/1500... Est. remaining: 5m 4sbest_combination: {'lookbacks': [149, 186, 188], 'score': np.float64(0.8555205900279432), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 1sRunning iteration 521/1500... Est. remaining: 4m 58sRunning iteration 531/1500... Est. remaining: 4m 55sRunning iteration 541/1500... Est. remaining: 4m 52sRunning iteration 551/1500... Est. remaining: 4m 49sRunning iteration 561/1500... Est. remaining: 4m 46sRunning iteration 571/1500... Est. remaining: 4m 43sRunning iteration 581/1500... Est. remaining: 4m 39sRunning iteration 591/1500... Est. remaining: 4m 36sRunning iteration 601/1500... Est. remaining: 4m 33sbest_combination: {'lookbacks': [149, 186, 188], 'score': np.float64(0.8555205900279432), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 30sRunning iteration 621/1500... Est. remaining: 4m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,602,086,807
Annual Return: 43.30%
Sharpe Ratio: 1.48086
Sortino Ratio: 1.409
Max Drawdown: -52.3%
Avg Drawdown: -10.4%
Normalized Score: 0.930
Lookback periods: [87, 108, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 4m 25sRunning iteration 641/1500... Est. remaining: 4m 22sRunning iteration 651/1500... Est. remaining: 4m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,123,267,422
Annual Return: 44.06%
Sharpe Ratio: 1.50491
Sortino Ratio: 1.439
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: 0.998
Lookback periods: [90, 108, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 4m 17sRunning iteration 671/1500... Est. remaining: 4m 14sRunning iteration 681/1500... Est. remaining: 4m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,364,490,215
Annual Return: 40.66%
Sharpe Ratio: 1.47119
Sortino Ratio: 1.366
Max Drawdown: -37.8%
Avg Drawdown: -10.1%
Normalized Score: 1.388
Lookback periods: [51, 56, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 4m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,574,615,963
Annual Return: 41.24%
Sharpe Ratio: 1.49565
Sortino Ratio: 1.394
Max Drawdown: -37.2%
Avg Drawdown: -9.5%
Normalized Score: 1.617
Lookback periods: [50, 52, 92] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,804,623,064
Annual Return: 41.80%
Sharpe Ratio: 1.48446
Sortino Ratio: 1.392
Max Drawdown: -35.6%
Avg Drawdown: -9.4%
Normalized Score: 1.719
Lookback periods: [52, 53, 86] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/1500... Est. remaining: 4m 7sbest_combination: {'lookbacks': [52, 53, 86], 'score': np.float64(1.7186946785002841), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,185,983,091
Annual Return: 42.58%
Sharpe Ratio: 1.54336
Sortino Ratio: 1.445
Max Drawdown: -37.2%
Avg Drawdown: -9.5%
Normalized Score: 1.802
Lookback periods: [51, 52, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,686,695,618
Annual Return: 43.43%
Sharpe Ratio: 1.55041
Sortino Ratio: 1.458
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 2.035
Lookback periods: [50, 54, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 4m 2sRunning iteration 731/1500... Est. remaining: 3m 59sRunning iteration 741/1500... Est. remaining: 3m 56sRunning iteration 751/1500... Est. remaining: 3m 53sRunning iteration 761/1500... Est. remaining: 3m 49sRunning iteration 771/1500... Est. remaining: 3m 46sRunning iteration 781/1500... Est. remaining: 3m 43sRunning iteration 791/1500... Est. remaining: 3m 40sRunning iteration 801/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [50, 54, 88], 'score': np.float64(2.035382847742556), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,650,069,972
Annual Return: 43.38%
Sharpe Ratio: 1.54673
Sortino Ratio: 1.453
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 2.046
Lookback periods: [50, 54, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 811/1500... Est. remaining: 3m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,229,417,452
Annual Return: 44.20%
Sharpe Ratio: 1.57610
Sortino Ratio: 1.489
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 2.152
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,622,827,200
Annual Return: 44.68%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 2.440
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 821/1500... Est. remaining: 3m 32sRunning iteration 831/1500... Est. remaining: 3m 29sRunning iteration 841/1500... Est. remaining: 3m 26sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 13sRunning iteration 891/1500... Est. remaining: 3m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 2.553
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 901/1500... Est. remaining: 3m 7sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(2.5532596234969582), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 4sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 57sRunning iteration 941/1500... Est. remaining: 2m 54sRunning iteration 951/1500... Est. remaining: 2m 51sRunning iteration 961/1500... Est. remaining: 2m 48sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38sRunning iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(2.5532596234969582), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 29sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 13sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(2.5532596234969582), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.673
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.67274892490134), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.67274892490134), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.67274892490134), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 2.67
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.67274892490134), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.6727)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 15:05:15 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $455,426,552
Annual Return: 36.27%
Sharpe Ratio: 1.27856
Sortino Ratio: 1.186
Max Drawdown: -62.9%
Avg Drawdown: -13.3%
Normalized Score: -1.139
Lookback periods: [61, 91, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $195,453,066
Annual Return: 32.99%
Sharpe Ratio: 1.16607
Sortino Ratio: 1.076
Max Drawdown: -52.3%
Avg Drawdown: -12.5%
Normalized Score: -1.021
Lookback periods: [79, 93, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $618,635,168
Annual Return: 37.48%
Sharpe Ratio: 1.32509
Sortino Ratio: 1.228
Max Drawdown: -52.3%
Avg Drawdown: -12.0%
Normalized Score: -0.444
Lookback periods: [55, 91, 107] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,044,613,472
Annual Return: 43.95%
Sharpe Ratio: 1.45528
Sortino Ratio: 1.417
Max Drawdown: -63.2%
Avg Drawdown: -12.0%
Normalized Score: -0.226
Lookback periods: [135, 146, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 17m 29sRunning iteration 21/1500... Est. remaining: 11m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,140,453,414
Annual Return: 44.08%
Sharpe Ratio: 1.45159
Sortino Ratio: 1.406
Max Drawdown: -58.1%
Avg Drawdown: -12.8%
Normalized Score: -0.193
Lookback periods: [144, 151, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,299,488,464
Annual Return: 40.46%
Sharpe Ratio: 1.37141
Sortino Ratio: 1.302
Max Drawdown: -52.3%
Avg Drawdown: -11.5%
Normalized Score: -0.127
Lookback periods: [80, 117, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 11m 12sRunning iteration 41/1500... Est. remaining: 10m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,791,401,943
Annual Return: 43.59%
Sharpe Ratio: 1.43148
Sortino Ratio: 1.383
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: -0.087
Lookback periods: [166, 169, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 9m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,350,552,492
Annual Return: 44.35%
Sharpe Ratio: 1.45621
Sortino Ratio: 1.416
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.017
Lookback periods: [156, 173, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 9m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,057,625,119
Annual Return: 45.15%
Sharpe Ratio: 1.48573
Sortino Ratio: 1.446
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.161
Lookback periods: [162, 168, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,686,032,681
Annual Return: 45.75%
Sharpe Ratio: 1.50423
Sortino Ratio: 1.456
Max Drawdown: -56.8%
Avg Drawdown: -11.7%
Normalized Score: 0.194
Lookback periods: [139, 161, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 9m 50sRunning iteration 81/1500... Est. remaining: 9m 26sRunning iteration 91/1500... Est. remaining: 9m 6sRunning iteration 101/1500... Est. remaining: 8m 51sbest_combination: {'lookbacks': [139, 161, 178], 'score': np.float64(0.19372834431916108), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 37sRunning iteration 121/1500... Est. remaining: 8m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $860,806,833
Annual Return: 38.80%
Sharpe Ratio: 1.39448
Sortino Ratio: 1.316
Max Drawdown: -37.8%
Avg Drawdown: -10.0%
Normalized Score: 0.567
Lookback periods: [53, 63, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 8m 24sRunning iteration 141/1500... Est. remaining: 8m 15sRunning iteration 151/1500... Est. remaining: 8m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,591,731,127
Annual Return: 49.22%
Sharpe Ratio: 1.60733
Sortino Ratio: 1.568
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.589
Lookback periods: [138, 157, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 8m 4sRunning iteration 171/1500... Est. remaining: 7m 56sRunning iteration 181/1500... Est. remaining: 7m 48sRunning iteration 191/1500... Est. remaining: 7m 41sRunning iteration 201/1500... Est. remaining: 7m 34sbest_combination: {'lookbacks': [138, 157, 174], 'score': np.float64(0.5885361917638027), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 27sRunning iteration 221/1500... Est. remaining: 7m 21sRunning iteration 231/1500... Est. remaining: 7m 16sRunning iteration 241/1500... Est. remaining: 7m 10sRunning iteration 251/1500... Est. remaining: 7m 5sRunning iteration 261/1500... Est. remaining: 6m 59sRunning iteration 271/1500... Est. remaining: 6m 55sRunning iteration 281/1500... Est. remaining: 6m 49sRunning iteration 291/1500... Est. remaining: 6m 45sRunning iteration 301/1500... Est. remaining: 6m 40sbest_combination: {'lookbacks': [138, 157, 174], 'score': np.float64(0.5885361917638027), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,706,082,411
Annual Return: 49.27%
Sharpe Ratio: 1.62158
Sortino Ratio: 1.576
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.688
Lookback periods: [139, 156, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 6m 38sRunning iteration 321/1500... Est. remaining: 6m 34sRunning iteration 331/1500... Est. remaining: 6m 29sRunning iteration 341/1500... Est. remaining: 6m 25sRunning iteration 351/1500... Est. remaining: 6m 21sRunning iteration 361/1500... Est. remaining: 6m 16sRunning iteration 371/1500... Est. remaining: 6m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,687,966,149
Annual Return: 43.43%
Sharpe Ratio: 1.57296
Sortino Ratio: 1.472
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.442
Lookback periods: [50, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 6m 10sRunning iteration 391/1500... Est. remaining: 6m 6sRunning iteration 401/1500... Est. remaining: 6m 2sbest_combination: {'lookbacks': [50, 52, 97], 'score': np.float64(1.4422358412501777), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 58sRunning iteration 421/1500... Est. remaining: 5m 54sRunning iteration 431/1500... Est. remaining: 5m 50sRunning iteration 441/1500... Est. remaining: 5m 46sRunning iteration 451/1500... Est. remaining: 5m 42sRunning iteration 461/1500... Est. remaining: 5m 38sRunning iteration 471/1500... Est. remaining: 5m 35sRunning iteration 481/1500... Est. remaining: 5m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.696
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 5m 29sRunning iteration 501/1500... Est. remaining: 5m 25sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6955735448213054), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 21sRunning iteration 521/1500... Est. remaining: 5m 18sRunning iteration 531/1500... Est. remaining: 5m 14sRunning iteration 541/1500... Est. remaining: 5m 10sRunning iteration 551/1500... Est. remaining: 5m 6sRunning iteration 561/1500... Est. remaining: 5m 3sRunning iteration 571/1500... Est. remaining: 4m 59sRunning iteration 581/1500... Est. remaining: 4m 56sRunning iteration 591/1500... Est. remaining: 4m 52sRunning iteration 601/1500... Est. remaining: 4m 48sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.6955735448213054), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 45sRunning iteration 621/1500... Est. remaining: 4m 41sRunning iteration 631/1500... Est. remaining: 4m 38sRunning iteration 641/1500... Est. remaining: 4m 34sRunning iteration 651/1500... Est. remaining: 4m 31sRunning iteration 661/1500... Est. remaining: 4m 28sRunning iteration 671/1500... Est. remaining: 4m 24sRunning iteration 681/1500... Est. remaining: 4m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.796
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 4m 18sRunning iteration 701/1500... Est. remaining: 4m 15sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7961184417526812), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 11sRunning iteration 721/1500... Est. remaining: 4m 8sRunning iteration 731/1500... Est. remaining: 4m 4sRunning iteration 741/1500... Est. remaining: 4m 1sRunning iteration 751/1500... Est. remaining: 3m 58sRunning iteration 761/1500... Est. remaining: 3m 54sRunning iteration 771/1500... Est. remaining: 3m 51sRunning iteration 781/1500... Est. remaining: 3m 48sRunning iteration 791/1500... Est. remaining: 3m 44sRunning iteration 801/1500... Est. remaining: 3m 41sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7961184417526812), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 38sRunning iteration 821/1500... Est. remaining: 3m 34sRunning iteration 831/1500... Est. remaining: 3m 31sRunning iteration 841/1500... Est. remaining: 3m 28sRunning iteration 851/1500... Est. remaining: 3m 24sRunning iteration 861/1500... Est. remaining: 3m 21sRunning iteration 871/1500... Est. remaining: 3m 18sRunning iteration 881/1500... Est. remaining: 3m 15sRunning iteration 891/1500... Est. remaining: 3m 11sRunning iteration 901/1500... Est. remaining: 3m 8sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7961184417526812), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 5sRunning iteration 921/1500... Est. remaining: 3m 2sRunning iteration 931/1500... Est. remaining: 2m 58sRunning iteration 941/1500... Est. remaining: 2m 55sRunning iteration 951/1500... Est. remaining: 2m 52sRunning iteration 961/1500... Est. remaining: 2m 49sRunning iteration 971/1500... Est. remaining: 2m 45sRunning iteration 981/1500... Est. remaining: 2m 42sRunning iteration 991/1500... Est. remaining: 2m 39sRunning iteration 1001/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7961184417526812), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 33sRunning iteration 1021/1500... Est. remaining: 2m 30sRunning iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 23sRunning iteration 1051/1500... Est. remaining: 2m 20sRunning iteration 1061/1500... Est. remaining: 2m 17sRunning iteration 1071/1500... Est. remaining: 2m 14sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7961184417526812), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 58sRunning iteration 1131/1500... Est. remaining: 1m 55sRunning iteration 1141/1500... Est. remaining: 1m 52sRunning iteration 1151/1500... Est. remaining: 1m 48sRunning iteration 1161/1500... Est. remaining: 1m 45sRunning iteration 1171/1500... Est. remaining: 1m 42sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7961184417526812), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7961184417526812), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7961184417526812), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 1.80
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7961184417526812), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.7961)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 140m 47s
End time: Mon Aug 25 15:12:53 EDT 2025
Average time per successful run: 9m 23s
==============================================================
✓ All runs completed successfully!
