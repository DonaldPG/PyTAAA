Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Wed Aug 27 21:48:36 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Wed Aug 27 21:48:36 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $537,626,985
Annual Return: 36.93%
Sharpe Ratio: 1.22964
Sortino Ratio: 1.180
Max Drawdown: -71.6%
Avg Drawdown: -14.4%
Normalized Score: -1.423
Lookback periods: [113, 175, 238] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,479,618,769
Annual Return: 43.10%
Sharpe Ratio: 1.40930
Sortino Ratio: 1.374
Max Drawdown: -63.0%
Avg Drawdown: -12.9%
Normalized Score: -0.169
Lookback periods: [154, 176, 254] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 25sRunning iteration 21/1500... Est. remaining: 18m 7sRunning iteration 31/1500... Est. remaining: 15m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,882,984,903
Annual Return: 43.72%
Sharpe Ratio: 1.44683
Sortino Ratio: 1.405
Max Drawdown: -67.2%
Avg Drawdown: -13.5%
Normalized Score: -0.080
Lookback periods: [132, 142, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 15m 36sRunning iteration 51/1500... Est. remaining: 14m 47sRunning iteration 61/1500... Est. remaining: 14m 12sRunning iteration 71/1500... Est. remaining: 13m 45sRunning iteration 81/1500... Est. remaining: 13m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,693,425,632
Annual Return: 43.44%
Sharpe Ratio: 1.44413
Sortino Ratio: 1.402
Max Drawdown: -66.3%
Avg Drawdown: -12.2%
Normalized Score: -0.049
Lookback periods: [111, 130, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 13m 22sRunning iteration 101/1500... Est. remaining: 13m 5sbest_combination: {'lookbacks': [111, 130, 173], 'score': np.float64(-0.04896554401253259), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 51sRunning iteration 121/1500... Est. remaining: 12m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,110,468,631
Annual Return: 44.04%
Sharpe Ratio: 1.44263
Sortino Ratio: 1.394
Max Drawdown: -57.2%
Avg Drawdown: -12.9%
Normalized Score: 0.045
Lookback periods: [123, 156, 208] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,646,544,291
Annual Return: 46.54%
Sharpe Ratio: 1.52071
Sortino Ratio: 1.481
Max Drawdown: -65.2%
Avg Drawdown: -11.8%
Normalized Score: 0.493
Lookback periods: [124, 155, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 12m 50sRunning iteration 141/1500... Est. remaining: 12m 38sRunning iteration 151/1500... Est. remaining: 12m 27sRunning iteration 161/1500... Est. remaining: 12m 16sRunning iteration 171/1500... Est. remaining: 12m 6sRunning iteration 181/1500... Est. remaining: 11m 57sRunning iteration 191/1500... Est. remaining: 11m 48sRunning iteration 201/1500... Est. remaining: 11m 39sbest_combination: {'lookbacks': [124, 155, 158], 'score': np.float64(0.49276351029652954), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 30sRunning iteration 221/1500... Est. remaining: 11m 22sRunning iteration 231/1500... Est. remaining: 11m 14sRunning iteration 241/1500... Est. remaining: 11m 7sRunning iteration 251/1500... Est. remaining: 11m 0sRunning iteration 261/1500... Est. remaining: 10m 53sRunning iteration 271/1500... Est. remaining: 10m 45sRunning iteration 281/1500... Est. remaining: 10m 38sRunning iteration 291/1500... Est. remaining: 10m 32sRunning iteration 301/1500... Est. remaining: 10m 25sbest_combination: {'lookbacks': [124, 155, 158], 'score': np.float64(0.49276351029652954), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 19sRunning iteration 321/1500... Est. remaining: 10m 12sRunning iteration 331/1500... Est. remaining: 10m 6sRunning iteration 341/1500... Est. remaining: 9m 59sRunning iteration 351/1500... Est. remaining: 9m 53sRunning iteration 361/1500... Est. remaining: 9m 47sRunning iteration 371/1500... Est. remaining: 9m 41sRunning iteration 381/1500... Est. remaining: 9m 35sRunning iteration 391/1500... Est. remaining: 9m 29sRunning iteration 401/1500... Est. remaining: 9m 23sbest_combination: {'lookbacks': [124, 155, 158], 'score': np.float64(0.49276351029652954), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 17sRunning iteration 421/1500... Est. remaining: 9m 11sRunning iteration 431/1500... Est. remaining: 9m 6sRunning iteration 441/1500... Est. remaining: 9m 0sRunning iteration 451/1500... Est. remaining: 8m 54sRunning iteration 461/1500... Est. remaining: 8m 49sRunning iteration 471/1500... Est. remaining: 8m 43sRunning iteration 481/1500... Est. remaining: 8m 38sRunning iteration 491/1500... Est. remaining: 8m 32sRunning iteration 501/1500... Est. remaining: 8m 26sbest_combination: {'lookbacks': [124, 155, 158], 'score': np.float64(0.49276351029652954), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 21sRunning iteration 521/1500... Est. remaining: 8m 15sRunning iteration 531/1500... Est. remaining: 8m 10sRunning iteration 541/1500... Est. remaining: 8m 5sRunning iteration 551/1500... Est. remaining: 7m 59sRunning iteration 561/1500... Est. remaining: 7m 54sRunning iteration 571/1500... Est. remaining: 7m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,204,291,168
Annual Return: 46.20%
Sharpe Ratio: 1.51088
Sortino Ratio: 1.472
Max Drawdown: -56.9%
Avg Drawdown: -11.3%
Normalized Score: 0.529
Lookback periods: [157, 161, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 7m 45sRunning iteration 591/1500... Est. remaining: 7m 40sRunning iteration 601/1500... Est. remaining: 7m 35sbest_combination: {'lookbacks': [157, 161, 179], 'score': np.float64(0.5289510341284817), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,554,654,073
Annual Return: 47.17%
Sharpe Ratio: 1.53302
Sortino Ratio: 1.499
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 0.686
Lookback periods: [155, 161, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 7m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,320,582,173
Annual Return: 47.64%
Sharpe Ratio: 1.54456
Sortino Ratio: 1.498
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.736
Lookback periods: [184, 186, 204] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 7m 22sRunning iteration 641/1500... Est. remaining: 7m 17sRunning iteration 651/1500... Est. remaining: 7m 11sRunning iteration 661/1500... Est. remaining: 7m 6sRunning iteration 671/1500... Est. remaining: 7m 1sRunning iteration 681/1500... Est. remaining: 6m 55sRunning iteration 691/1500... Est. remaining: 6m 50sRunning iteration 701/1500... Est. remaining: 6m 45sbest_combination: {'lookbacks': [184, 186, 204], 'score': np.float64(0.7359501576709125), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 39sRunning iteration 721/1500... Est. remaining: 6m 34sRunning iteration 731/1500... Est. remaining: 6m 29sRunning iteration 741/1500... Est. remaining: 6m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,341,694,370
Annual Return: 48.20%
Sharpe Ratio: 1.55942
Sortino Ratio: 1.525
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.862
Lookback periods: [176, 189, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 751/1500... Est. remaining: 6m 20sRunning iteration 761/1500... Est. remaining: 6m 14sRunning iteration 771/1500... Est. remaining: 6m 9sRunning iteration 781/1500... Est. remaining: 6m 4sRunning iteration 791/1500... Est. remaining: 5m 59sRunning iteration 801/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [176, 189, 193], 'score': np.float64(0.8619822590861819), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 48sRunning iteration 821/1500... Est. remaining: 5m 43sRunning iteration 831/1500... Est. remaining: 5m 38sRunning iteration 841/1500... Est. remaining: 5m 33sRunning iteration 851/1500... Est. remaining: 5m 27sRunning iteration 861/1500... Est. remaining: 5m 22sRunning iteration 871/1500... Est. remaining: 5m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $13,050,184,761
Annual Return: 50.12%
Sharpe Ratio: 1.61464
Sortino Ratio: 1.575
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 1.187
Lookback periods: [178, 189, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 881/1500... Est. remaining: 5m 13sRunning iteration 891/1500... Est. remaining: 5m 8sRunning iteration 901/1500... Est. remaining: 5m 3sbest_combination: {'lookbacks': [178, 189, 190], 'score': np.float64(1.1869167527225046), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 57sRunning iteration 921/1500... Est. remaining: 4m 52sRunning iteration 931/1500... Est. remaining: 4m 47sRunning iteration 941/1500... Est. remaining: 4m 42sRunning iteration 951/1500... Est. remaining: 4m 37sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 26sRunning iteration 981/1500... Est. remaining: 4m 21sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [178, 189, 190], 'score': np.float64(1.1869167527225046), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [178, 189, 190], 'score': np.float64(1.1869167527225046), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [178, 189, 190], 'score': np.float64(1.1869167527225046), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [178, 189, 190], 'score': np.float64(1.1869167527225046), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [178, 189, 190], 'score': np.float64(1.1869167527225046), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 1.19
best_combination: {'lookbacks': [178, 189, 190], 'score': np.float64(1.1869167527225046), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [178, 189, 190] (score: 1.1869)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [178, 189, 190] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 123 selections (29.6%)
2. sp500_hma: 103 selections (24.8%)
3. naz100_pine: 83 selections (20.0%)
4. naz100_pi: 68 selections (16.3%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $13,050,184,761.00
Average Annualized Gain: 50.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Wed Aug 27 22:01:11 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $450,360,882
Annual Return: 36.23%
Sharpe Ratio: 1.22623
Sortino Ratio: 1.169
Max Drawdown: -63.4%
Avg Drawdown: -14.1%
Normalized Score: -1.032
Lookback periods: [115, 170, 285] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,000,976,891
Annual Return: 39.40%
Sharpe Ratio: 1.35389
Sortino Ratio: 1.256
Max Drawdown: -55.0%
Avg Drawdown: -12.0%
Normalized Score: -0.448
Lookback periods: [48, 114, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,654,333,672
Annual Return: 44.71%
Sharpe Ratio: 1.48808
Sortino Ratio: 1.445
Max Drawdown: -55.8%
Avg Drawdown: -12.0%
Normalized Score: 0.245
Lookback periods: [133, 134, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 23sRunning iteration 31/1500... Est. remaining: 16m 51sRunning iteration 41/1500... Est. remaining: 15m 33sRunning iteration 51/1500... Est. remaining: 14m 42sRunning iteration 61/1500... Est. remaining: 14m 8sRunning iteration 71/1500... Est. remaining: 13m 42sRunning iteration 81/1500... Est. remaining: 13m 22sRunning iteration 91/1500... Est. remaining: 13m 4sRunning iteration 101/1500... Est. remaining: 12m 48sbest_combination: {'lookbacks': [133, 134, 203], 'score': np.float64(0.24473148147532023), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 35sRunning iteration 121/1500... Est. remaining: 12m 23sRunning iteration 131/1500... Est. remaining: 12m 12sRunning iteration 141/1500... Est. remaining: 12m 2sRunning iteration 151/1500... Est. remaining: 11m 53sRunning iteration 161/1500... Est. remaining: 11m 44sRunning iteration 171/1500... Est. remaining: 11m 36sRunning iteration 181/1500... Est. remaining: 11m 28sRunning iteration 191/1500... Est. remaining: 11m 21sRunning iteration 201/1500... Est. remaining: 11m 14sbest_combination: {'lookbacks': [133, 134, 203], 'score': np.float64(0.24473148147532023), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 6sRunning iteration 221/1500... Est. remaining: 10m 59sRunning iteration 231/1500... Est. remaining: 10m 53sRunning iteration 241/1500... Est. remaining: 10m 46sRunning iteration 251/1500... Est. remaining: 10m 40sRunning iteration 261/1500... Est. remaining: 10m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,078,427,181
Annual Return: 47.50%
Sharpe Ratio: 1.54964
Sortino Ratio: 1.507
Max Drawdown: -58.5%
Avg Drawdown: -11.7%
Normalized Score: 0.538
Lookback periods: [139, 155, 201] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/1500... Est. remaining: 10m 33sRunning iteration 281/1500... Est. remaining: 10m 27sRunning iteration 291/1500... Est. remaining: 10m 21sRunning iteration 301/1500... Est. remaining: 10m 14sbest_combination: {'lookbacks': [139, 155, 201], 'score': np.float64(0.5376323416452682), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 9sRunning iteration 321/1500... Est. remaining: 10m 2sRunning iteration 331/1500... Est. remaining: 9m 57sRunning iteration 341/1500... Est. remaining: 9m 51sRunning iteration 351/1500... Est. remaining: 9m 45sRunning iteration 361/1500... Est. remaining: 9m 39sRunning iteration 371/1500... Est. remaining: 9m 33sRunning iteration 381/1500... Est. remaining: 9m 28sRunning iteration 391/1500... Est. remaining: 9m 22sRunning iteration 401/1500... Est. remaining: 9m 16sbest_combination: {'lookbacks': [139, 155, 201], 'score': np.float64(0.5376323416452682), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 10sRunning iteration 421/1500... Est. remaining: 9m 5sRunning iteration 431/1500... Est. remaining: 8m 59sRunning iteration 441/1500... Est. remaining: 8m 54sRunning iteration 451/1500... Est. remaining: 8m 48sRunning iteration 461/1500... Est. remaining: 8m 43sRunning iteration 471/1500... Est. remaining: 8m 37sRunning iteration 481/1500... Est. remaining: 8m 32sRunning iteration 491/1500... Est. remaining: 8m 27sRunning iteration 501/1500... Est. remaining: 8m 21sbest_combination: {'lookbacks': [139, 155, 201], 'score': np.float64(0.5376323416452682), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 16sRunning iteration 521/1500... Est. remaining: 8m 11sRunning iteration 531/1500... Est. remaining: 8m 5sRunning iteration 541/1500... Est. remaining: 8m 0sRunning iteration 551/1500... Est. remaining: 7m 55sRunning iteration 561/1500... Est. remaining: 7m 49sRunning iteration 571/1500... Est. remaining: 7m 44sRunning iteration 581/1500... Est. remaining: 7m 39sRunning iteration 591/1500... Est. remaining: 7m 33sRunning iteration 601/1500... Est. remaining: 7m 28sbest_combination: {'lookbacks': [139, 155, 201], 'score': np.float64(0.5376323416452682), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 23sRunning iteration 621/1500... Est. remaining: 7m 18sRunning iteration 631/1500... Est. remaining: 7m 13sRunning iteration 641/1500... Est. remaining: 7m 7sRunning iteration 651/1500... Est. remaining: 7m 2sRunning iteration 661/1500... Est. remaining: 6m 57sRunning iteration 671/1500... Est. remaining: 6m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,987,664,190
Annual Return: 48.01%
Sharpe Ratio: 1.55515
Sortino Ratio: 1.522
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.595
Lookback periods: [150, 159, 212] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 6m 48sRunning iteration 691/1500... Est. remaining: 6m 43sRunning iteration 701/1500... Est. remaining: 6m 38sbest_combination: {'lookbacks': [150, 159, 212], 'score': np.float64(0.5947063933006335), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 33sRunning iteration 721/1500... Est. remaining: 6m 28sRunning iteration 731/1500... Est. remaining: 6m 23sRunning iteration 741/1500... Est. remaining: 6m 18sRunning iteration 751/1500... Est. remaining: 6m 13sRunning iteration 761/1500... Est. remaining: 6m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,528,551,370
Annual Return: 47.76%
Sharpe Ratio: 1.56888
Sortino Ratio: 1.531
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.615
Lookback periods: [128, 156, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 771/1500... Est. remaining: 6m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,485,103,462
Annual Return: 49.57%
Sharpe Ratio: 1.63300
Sortino Ratio: 1.601
Max Drawdown: -58.5%
Avg Drawdown: -11.0%
Normalized Score: 0.911
Lookback periods: [135, 155, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 781/1500... Est. remaining: 6m 0sRunning iteration 791/1500... Est. remaining: 5m 55sRunning iteration 801/1500... Est. remaining: 5m 50sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.9107837989902314), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 44sRunning iteration 821/1500... Est. remaining: 5m 39sRunning iteration 831/1500... Est. remaining: 5m 34sRunning iteration 841/1500... Est. remaining: 5m 29sRunning iteration 851/1500... Est. remaining: 5m 24sRunning iteration 861/1500... Est. remaining: 5m 19sRunning iteration 871/1500... Est. remaining: 5m 14sRunning iteration 881/1500... Est. remaining: 5m 9sRunning iteration 891/1500... Est. remaining: 5m 4sRunning iteration 901/1500... Est. remaining: 4m 58sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.9107837989902314), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 53sRunning iteration 921/1500... Est. remaining: 4m 48sRunning iteration 931/1500... Est. remaining: 4m 43sRunning iteration 941/1500... Est. remaining: 4m 38sRunning iteration 951/1500... Est. remaining: 4m 33sRunning iteration 961/1500... Est. remaining: 4m 28sRunning iteration 971/1500... Est. remaining: 4m 23sRunning iteration 981/1500... Est. remaining: 4m 18sRunning iteration 991/1500... Est. remaining: 4m 13sRunning iteration 1001/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.9107837989902314), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 3sRunning iteration 1021/1500... Est. remaining: 3m 58sRunning iteration 1031/1500... Est. remaining: 3m 53sRunning iteration 1041/1500... Est. remaining: 3m 48sRunning iteration 1051/1500... Est. remaining: 3m 43sRunning iteration 1061/1500... Est. remaining: 3m 38sRunning iteration 1071/1500... Est. remaining: 3m 33sRunning iteration 1081/1500... Est. remaining: 3m 28sRunning iteration 1091/1500... Est. remaining: 3m 23sRunning iteration 1101/1500... Est. remaining: 3m 18sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.9107837989902314), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 13sRunning iteration 1121/1500... Est. remaining: 3m 8sRunning iteration 1131/1500... Est. remaining: 3m 3sRunning iteration 1141/1500... Est. remaining: 2m 58sRunning iteration 1151/1500... Est. remaining: 2m 53sRunning iteration 1161/1500... Est. remaining: 2m 48sRunning iteration 1171/1500... Est. remaining: 2m 43sRunning iteration 1181/1500... Est. remaining: 2m 38sRunning iteration 1191/1500... Est. remaining: 2m 33sRunning iteration 1201/1500... Est. remaining: 2m 28sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.9107837989902314), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 23sRunning iteration 1221/1500... Est. remaining: 2m 18sRunning iteration 1231/1500... Est. remaining: 2m 13sRunning iteration 1241/1500... Est. remaining: 2m 8sRunning iteration 1251/1500... Est. remaining: 2m 3sRunning iteration 1261/1500... Est. remaining: 1m 58sRunning iteration 1271/1500... Est. remaining: 1m 53sRunning iteration 1281/1500... Est. remaining: 1m 48sRunning iteration 1291/1500... Est. remaining: 1m 43sRunning iteration 1301/1500... Est. remaining: 1m 38sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.9107837989902314), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 2m 43sRunning iteration 1321/1500... Est. remaining: 2m 34sRunning iteration 1331/1500... Est. remaining: 2m 25sRunning iteration 1341/1500... Est. remaining: 2m 16sRunning iteration 1351/1500... Est. remaining: 2m 7sRunning iteration 1361/1500... Est. remaining: 1m 58sRunning iteration 1371/1500... Est. remaining: 1m 49sRunning iteration 1381/1500... Est. remaining: 1m 41sRunning iteration 1391/1500... Est. remaining: 1m 32sRunning iteration 1401/1500... Est. remaining: 1m 23sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.9107837989902314), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 15sRunning iteration 1421/1500... Est. remaining: 1m 6sRunning iteration 1431/1500... Est. remaining: 0m 58sRunning iteration 1441/1500... Est. remaining: 0m 49sRunning iteration 1451/1500... Est. remaining: 0m 41sRunning iteration 1461/1500... Est. remaining: 0m 32sRunning iteration 1471/1500... Est. remaining: 0m 24sRunning iteration 1481/1500... Est. remaining: 0m 16sRunning iteration 1491/1500... Est. remaining: 0m 8s
Monte Carlo simulation completed in 20.4 minutes
Best normalized score: 0.91
best_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.9107837989902314), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 155, 173] (score: 0.9108)

Monte Carlo simulation completed in 20.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 155, 173] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 113 selections (27.2%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,485,103,462.08
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Wed Aug 27 22:21:39 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,547,868,812
Annual Return: 43.21%
Sharpe Ratio: 1.40038
Sortino Ratio: 1.355
Max Drawdown: -63.6%
Avg Drawdown: -12.2%
Normalized Score: -0.364
Lookback periods: [190, 206, 218] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,546,977,098
Annual Return: 44.59%
Sharpe Ratio: 1.47053
Sortino Ratio: 1.435
Max Drawdown: -63.5%
Avg Drawdown: -12.5%
Normalized Score: 0.537
Lookback periods: [127, 131, 142] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 18m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,553,690,964
Annual Return: 47.17%
Sharpe Ratio: 1.54632
Sortino Ratio: 1.514
Max Drawdown: -63.5%
Avg Drawdown: -12.6%
Normalized Score: 1.816
Lookback periods: [134, 153, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 17m 3sRunning iteration 41/1500... Est. remaining: 15m 41sRunning iteration 51/1500... Est. remaining: 14m 46sRunning iteration 61/1500... Est. remaining: 14m 8sRunning iteration 71/1500... Est. remaining: 13m 40sRunning iteration 81/1500... Est. remaining: 13m 17sRunning iteration 91/1500... Est. remaining: 12m 59sRunning iteration 101/1500... Est. remaining: 12m 44sbest_combination: {'lookbacks': [134, 153, 174], 'score': np.float64(1.8156849013488745), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 31sRunning iteration 121/1500... Est. remaining: 12m 18sRunning iteration 131/1500... Est. remaining: 12m 8sRunning iteration 141/1500... Est. remaining: 11m 57sRunning iteration 151/1500... Est. remaining: 11m 49sRunning iteration 161/1500... Est. remaining: 11m 41sRunning iteration 171/1500... Est. remaining: 11m 33sRunning iteration 181/1500... Est. remaining: 11m 26sRunning iteration 191/1500... Est. remaining: 11m 18sRunning iteration 201/1500... Est. remaining: 11m 11sbest_combination: {'lookbacks': [134, 153, 174], 'score': np.float64(1.8156849013488745), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 5sRunning iteration 221/1500... Est. remaining: 10m 58sRunning iteration 231/1500... Est. remaining: 10m 51sRunning iteration 241/1500... Est. remaining: 10m 45sRunning iteration 251/1500... Est. remaining: 10m 39sRunning iteration 261/1500... Est. remaining: 10m 33sRunning iteration 271/1500... Est. remaining: 10m 26sRunning iteration 281/1500... Est. remaining: 10m 21sRunning iteration 291/1500... Est. remaining: 10m 15sRunning iteration 301/1500... Est. remaining: 10m 10sbest_combination: {'lookbacks': [134, 153, 174], 'score': np.float64(1.8156849013488745), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 4sRunning iteration 321/1500... Est. remaining: 9m 59sRunning iteration 331/1500... Est. remaining: 9m 54sRunning iteration 341/1500... Est. remaining: 9m 48sRunning iteration 351/1500... Est. remaining: 9m 43sRunning iteration 361/1500... Est. remaining: 9m 38sRunning iteration 371/1500... Est. remaining: 9m 32sRunning iteration 381/1500... Est. remaining: 9m 27sRunning iteration 391/1500... Est. remaining: 9m 21sRunning iteration 401/1500... Est. remaining: 9m 16sbest_combination: {'lookbacks': [134, 153, 174], 'score': np.float64(1.8156849013488745), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 11sRunning iteration 421/1500... Est. remaining: 9m 5sRunning iteration 431/1500... Est. remaining: 9m 0sRunning iteration 441/1500... Est. remaining: 8m 54sRunning iteration 451/1500... Est. remaining: 8m 49sRunning iteration 461/1500... Est. remaining: 8m 44sRunning iteration 471/1500... Est. remaining: 8m 38sRunning iteration 481/1500... Est. remaining: 8m 33sRunning iteration 491/1500... Est. remaining: 8m 28sRunning iteration 501/1500... Est. remaining: 8m 22sbest_combination: {'lookbacks': [134, 153, 174], 'score': np.float64(1.8156849013488745), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 17sRunning iteration 521/1500... Est. remaining: 8m 12sRunning iteration 531/1500... Est. remaining: 8m 7sRunning iteration 541/1500... Est. remaining: 8m 2sRunning iteration 551/1500... Est. remaining: 7m 56sRunning iteration 561/1500... Est. remaining: 7m 51sRunning iteration 571/1500... Est. remaining: 7m 46sRunning iteration 581/1500... Est. remaining: 7m 41sRunning iteration 591/1500... Est. remaining: 7m 36sRunning iteration 601/1500... Est. remaining: 7m 30sbest_combination: {'lookbacks': [134, 153, 174], 'score': np.float64(1.8156849013488745), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 25sRunning iteration 621/1500... Est. remaining: 7m 20sRunning iteration 631/1500... Est. remaining: 7m 15sRunning iteration 641/1500... Est. remaining: 7m 10sRunning iteration 651/1500... Est. remaining: 7m 5sRunning iteration 661/1500... Est. remaining: 7m 0sRunning iteration 671/1500... Est. remaining: 6m 55sRunning iteration 681/1500... Est. remaining: 6m 49sRunning iteration 691/1500... Est. remaining: 6m 44sRunning iteration 701/1500... Est. remaining: 6m 39sbest_combination: {'lookbacks': [134, 153, 174], 'score': np.float64(1.8156849013488745), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 34sRunning iteration 721/1500... Est. remaining: 6m 29sRunning iteration 731/1500... Est. remaining: 6m 24sRunning iteration 741/1500... Est. remaining: 6m 19sRunning iteration 751/1500... Est. remaining: 6m 14sRunning iteration 761/1500... Est. remaining: 6m 9sRunning iteration 771/1500... Est. remaining: 6m 4sRunning iteration 781/1500... Est. remaining: 5m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,114,855,800
Annual Return: 47.52%
Sharpe Ratio: 1.56763
Sortino Ratio: 1.522
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 2.115
Lookback periods: [137, 158, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 791/1500... Est. remaining: 5m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,152,638,107
Annual Return: 48.10%
Sharpe Ratio: 1.57826
Sortino Ratio: 1.537
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 2.366
Lookback periods: [140, 155, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 801/1500... Est. remaining: 5m 51sbest_combination: {'lookbacks': [140, 155, 157], 'score': np.float64(2.36640037540089), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 45sRunning iteration 821/1500... Est. remaining: 5m 40sRunning iteration 831/1500... Est. remaining: 5m 35sRunning iteration 841/1500... Est. remaining: 5m 30sRunning iteration 851/1500... Est. remaining: 5m 25sRunning iteration 861/1500... Est. remaining: 5m 20sRunning iteration 871/1500... Est. remaining: 5m 15sRunning iteration 881/1500... Est. remaining: 5m 10sRunning iteration 891/1500... Est. remaining: 5m 5sRunning iteration 901/1500... Est. remaining: 5m 0sbest_combination: {'lookbacks': [140, 155, 157], 'score': np.float64(2.36640037540089), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 55sRunning iteration 921/1500... Est. remaining: 4m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,500,828,934
Annual Return: 48.28%
Sharpe Ratio: 1.57705
Sortino Ratio: 1.540
Max Drawdown: -58.5%
Avg Drawdown: -11.3%
Normalized Score: 2.410
Lookback periods: [144, 155, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 4m 45sRunning iteration 941/1500... Est. remaining: 4m 40sRunning iteration 951/1500... Est. remaining: 4m 35sRunning iteration 961/1500... Est. remaining: 4m 30sRunning iteration 971/1500... Est. remaining: 4m 25sRunning iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 15sRunning iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [144, 155, 171], 'score': np.float64(2.410405318068128), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 5sRunning iteration 1021/1500... Est. remaining: 4m 0sRunning iteration 1031/1500... Est. remaining: 3m 55sRunning iteration 1041/1500... Est. remaining: 3m 50sRunning iteration 1051/1500... Est. remaining: 3m 45sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [144, 155, 171], 'score': np.float64(2.410405318068128), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,727,193,217
Annual Return: 48.39%
Sharpe Ratio: 1.59454
Sortino Ratio: 1.558
Max Drawdown: -58.1%
Avg Drawdown: -11.4%
Normalized Score: 2.558
Lookback periods: [135, 153, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 50sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [135, 153, 178], 'score': np.float64(2.557755533071751), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [135, 153, 178], 'score': np.float64(2.557755533071751), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [135, 153, 178], 'score': np.float64(2.557755533071751), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,750,324,463
Annual Return: 48.87%
Sharpe Ratio: 1.61319
Sortino Ratio: 1.570
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 2.799
Lookback periods: [136, 157, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 2.80
best_combination: {'lookbacks': [136, 157, 168], 'score': np.float64(2.7987163835053024), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 157, 168] (score: 2.7987)

Monte Carlo simulation completed in 12.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 157, 168] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 120 selections (28.8%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pi: 74 selections (17.8%)
4. naz100_pine: 74 selections (17.8%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,750,324,463.03
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Wed Aug 27 22:34:14 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $425,237,201
Annual Return: 36.00%
Sharpe Ratio: 1.21030
Sortino Ratio: 1.150
Max Drawdown: -67.8%
Avg Drawdown: -13.7%
Normalized Score: -1.065
Lookback periods: [130, 228, 261] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $993,361,080
Annual Return: 39.37%
Sharpe Ratio: 1.33242
Sortino Ratio: 1.263
Max Drawdown: -62.7%
Avg Drawdown: -13.5%
Normalized Score: -0.549
Lookback periods: [128, 156, 284] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,440,226,568
Annual Return: 40.88%
Sharpe Ratio: 1.45345
Sortino Ratio: 1.354
Max Drawdown: -52.1%
Avg Drawdown: -10.4%
Normalized Score: -0.050
Lookback periods: [47, 49, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,694,403,270
Annual Return: 43.44%
Sharpe Ratio: 1.44568
Sortino Ratio: 1.408
Max Drawdown: -60.8%
Avg Drawdown: -12.3%
Normalized Score: 0.027
Lookback periods: [177, 256, 273] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 2sRunning iteration 41/1500... Est. remaining: 16m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,265,119,609
Annual Return: 44.24%
Sharpe Ratio: 1.45334
Sortino Ratio: 1.412
Max Drawdown: -63.5%
Avg Drawdown: -12.7%
Normalized Score: 0.052
Lookback periods: [139, 151, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 16m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,271,512,511
Annual Return: 47.61%
Sharpe Ratio: 1.54812
Sortino Ratio: 1.515
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.566
Lookback periods: [154, 161, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 15m 45sRunning iteration 71/1500... Est. remaining: 15m 6sRunning iteration 81/1500... Est. remaining: 14m 35sRunning iteration 91/1500... Est. remaining: 14m 10sRunning iteration 101/1500... Est. remaining: 13m 49sbest_combination: {'lookbacks': [154, 161, 173], 'score': np.float64(0.5664334930359487), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 32sRunning iteration 121/1500... Est. remaining: 13m 16sRunning iteration 131/1500... Est. remaining: 13m 1sRunning iteration 141/1500... Est. remaining: 12m 49sRunning iteration 151/1500... Est. remaining: 12m 37sRunning iteration 161/1500... Est. remaining: 12m 26sRunning iteration 171/1500... Est. remaining: 12m 16sRunning iteration 181/1500... Est. remaining: 12m 6sRunning iteration 191/1500... Est. remaining: 11m 57sRunning iteration 201/1500... Est. remaining: 11m 48sbest_combination: {'lookbacks': [154, 161, 173], 'score': np.float64(0.5664334930359487), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 39sRunning iteration 221/1500... Est. remaining: 11m 31sRunning iteration 231/1500... Est. remaining: 11m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,086,087,038
Annual Return: 49.01%
Sharpe Ratio: 1.61360
Sortino Ratio: 1.573
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.794
Lookback periods: [138, 156, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/1500... Est. remaining: 11m 22sRunning iteration 251/1500... Est. remaining: 11m 15sRunning iteration 261/1500... Est. remaining: 11m 7sRunning iteration 271/1500... Est. remaining: 10m 59sRunning iteration 281/1500... Est. remaining: 10m 52sRunning iteration 291/1500... Est. remaining: 10m 45sRunning iteration 301/1500... Est. remaining: 10m 38sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.7936304225059896), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 30sRunning iteration 321/1500... Est. remaining: 10m 23sRunning iteration 331/1500... Est. remaining: 10m 16sRunning iteration 341/1500... Est. remaining: 10m 10sRunning iteration 351/1500... Est. remaining: 10m 3sRunning iteration 361/1500... Est. remaining: 9m 57sRunning iteration 371/1500... Est. remaining: 9m 50sRunning iteration 381/1500... Est. remaining: 9m 44sRunning iteration 391/1500... Est. remaining: 9m 38sRunning iteration 401/1500... Est. remaining: 9m 32sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.7936304225059896), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 25sRunning iteration 421/1500... Est. remaining: 9m 19sRunning iteration 431/1500... Est. remaining: 9m 13sRunning iteration 441/1500... Est. remaining: 9m 7sRunning iteration 451/1500... Est. remaining: 9m 2sRunning iteration 461/1500... Est. remaining: 8m 56sRunning iteration 471/1500... Est. remaining: 8m 50sRunning iteration 481/1500... Est. remaining: 8m 44sRunning iteration 491/1500... Est. remaining: 8m 38sRunning iteration 501/1500... Est. remaining: 8m 33sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.7936304225059896), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 27sRunning iteration 521/1500... Est. remaining: 8m 21sRunning iteration 531/1500... Est. remaining: 8m 16sRunning iteration 541/1500... Est. remaining: 8m 10sRunning iteration 551/1500... Est. remaining: 8m 5sRunning iteration 561/1500... Est. remaining: 7m 59sRunning iteration 571/1500... Est. remaining: 7m 54sRunning iteration 581/1500... Est. remaining: 7m 48sRunning iteration 591/1500... Est. remaining: 7m 43sRunning iteration 601/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.7936304225059896), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 32sRunning iteration 621/1500... Est. remaining: 7m 27sRunning iteration 631/1500... Est. remaining: 7m 21sRunning iteration 641/1500... Est. remaining: 7m 16sRunning iteration 651/1500... Est. remaining: 7m 10sRunning iteration 661/1500... Est. remaining: 7m 5sRunning iteration 671/1500... Est. remaining: 7m 0sRunning iteration 681/1500... Est. remaining: 6m 55sRunning iteration 691/1500... Est. remaining: 6m 49sRunning iteration 701/1500... Est. remaining: 6m 44sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.7936304225059896), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 39sRunning iteration 721/1500... Est. remaining: 13m 52sRunning iteration 731/1500... Est. remaining: 14m 57sRunning iteration 741/1500... Est. remaining: 14m 39sRunning iteration 751/1500... Est. remaining: 14m 51sRunning iteration 761/1500... Est. remaining: 14m 32sRunning iteration 771/1500... Est. remaining: 14m 14sRunning iteration 781/1500... Est. remaining: 28m 18sRunning iteration 791/1500... Est. remaining: 27m 38sRunning iteration 801/1500... Est. remaining: 27m 1sbest_combination: {'lookbacks': [138, 156, 173], 'score': np.float64(0.7936304225059896), 'visits': 1}
Running iteration 811/1500... Est. remaining: 26m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,485,103,462
Annual Return: 49.57%
Sharpe Ratio: 1.63300
Sortino Ratio: 1.601
Max Drawdown: -58.5%
Avg Drawdown: -11.0%
Normalized Score: 0.874
Lookback periods: [135, 155, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 821/1500... Est. remaining: 25m 45sRunning iteration 831/1500... Est. remaining: 25m 8sRunning iteration 841/1500... Est. remaining: 24m 32sRunning iteration 851/1500... Est. remaining: 23m 56sRunning iteration 861/1500... Est. remaining: 23m 21sRunning iteration 871/1500... Est. remaining: 22m 47sRunning iteration 881/1500... Est. remaining: 22m 13sRunning iteration 891/1500... Est. remaining: 21m 40sRunning iteration 901/1500... Est. remaining: 21m 8sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.8738396329114206), 'visits': 1}
Running iteration 911/1500... Est. remaining: 20m 36sRunning iteration 921/1500... Est. remaining: 20m 5sRunning iteration 931/1500... Est. remaining: 19m 34sRunning iteration 941/1500... Est. remaining: 19m 4sRunning iteration 951/1500... Est. remaining: 18m 35sRunning iteration 961/1500... Est. remaining: 18m 6sRunning iteration 971/1500... Est. remaining: 17m 38sRunning iteration 981/1500... Est. remaining: 17m 10sRunning iteration 991/1500... Est. remaining: 16m 42sRunning iteration 1001/1500... Est. remaining: 16m 15sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.8738396329114206), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 15m 48sRunning iteration 1021/1500... Est. remaining: 15m 22sRunning iteration 1031/1500... Est. remaining: 14m 56sRunning iteration 1041/1500... Est. remaining: 14m 31sRunning iteration 1051/1500... Est. remaining: 14m 6sRunning iteration 1061/1500... Est. remaining: 13m 41sRunning iteration 1071/1500... Est. remaining: 13m 17sRunning iteration 1081/1500... Est. remaining: 12m 53sRunning iteration 1091/1500... Est. remaining: 12m 30sRunning iteration 1101/1500... Est. remaining: 12m 7sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.8738396329114206), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 11m 44sRunning iteration 1121/1500... Est. remaining: 11m 21sRunning iteration 1131/1500... Est. remaining: 10m 59sRunning iteration 1141/1500... Est. remaining: 10m 37sRunning iteration 1151/1500... Est. remaining: 10m 16sRunning iteration 1161/1500... Est. remaining: 9m 54sRunning iteration 1171/1500... Est. remaining: 9m 33sRunning iteration 1181/1500... Est. remaining: 9m 12sRunning iteration 1191/1500... Est. remaining: 8m 52sRunning iteration 1201/1500... Est. remaining: 8m 32sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.8738396329114206), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 8m 12sRunning iteration 1221/1500... Est. remaining: 7m 52sRunning iteration 1231/1500... Est. remaining: 7m 32sRunning iteration 1241/1500... Est. remaining: 7m 13sRunning iteration 1251/1500... Est. remaining: 6m 54sRunning iteration 1261/1500... Est. remaining: 6m 35sRunning iteration 1271/1500... Est. remaining: 6m 17sRunning iteration 1281/1500... Est. remaining: 5m 58sRunning iteration 1291/1500... Est. remaining: 5m 40sRunning iteration 1301/1500... Est. remaining: 5m 22sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.8738396329114206), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 5m 4sRunning iteration 1321/1500... Est. remaining: 4m 47sRunning iteration 1331/1500... Est. remaining: 4m 29sRunning iteration 1341/1500... Est. remaining: 4m 12sRunning iteration 1351/1500... Est. remaining: 3m 55sRunning iteration 1361/1500... Est. remaining: 3m 38sRunning iteration 1371/1500... Est. remaining: 3m 22sRunning iteration 1381/1500... Est. remaining: 3m 5sRunning iteration 1391/1500... Est. remaining: 2m 49sRunning iteration 1401/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.8738396329114206), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 2m 17sRunning iteration 1421/1500... Est. remaining: 2m 1sRunning iteration 1431/1500... Est. remaining: 1m 45sRunning iteration 1441/1500... Est. remaining: 1m 30sRunning iteration 1451/1500... Est. remaining: 1m 14sRunning iteration 1461/1500... Est. remaining: 0m 59sRunning iteration 1471/1500... Est. remaining: 0m 44sRunning iteration 1481/1500... Est. remaining: 0m 29sRunning iteration 1491/1500... Est. remaining: 0m 14s
Monte Carlo simulation completed in 36.6 minutes
Best normalized score: 0.87
best_combination: {'lookbacks': [135, 155, 173], 'score': np.float64(0.8738396329114206), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [135, 155, 173] (score: 0.8738)

Monte Carlo simulation completed in 36.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [135, 155, 173] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 113 selections (27.2%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,485,103,462.08
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Wed Aug 27 23:10:56 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,112,506,941
Annual Return: 42.44%
Sharpe Ratio: 1.41579
Sortino Ratio: 1.374
Max Drawdown: -66.6%
Avg Drawdown: -12.9%
Normalized Score: -0.019
Lookback periods: [115, 163, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,707,014,360
Annual Return: 43.46%
Sharpe Ratio: 1.43809
Sortino Ratio: 1.387
Max Drawdown: -66.6%
Avg Drawdown: -12.2%
Normalized Score: 0.214
Lookback periods: [210, 247, 297] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,144,095,294
Annual Return: 45.24%
Sharpe Ratio: 1.50103
Sortino Ratio: 1.466
Max Drawdown: -60.8%
Avg Drawdown: -12.1%
Normalized Score: 0.956
Lookback periods: [176, 249, 270] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 44sRunning iteration 31/1500... Est. remaining: 17m 0sRunning iteration 41/1500... Est. remaining: 15m 38sRunning iteration 51/1500... Est. remaining: 14m 45sRunning iteration 61/1500... Est. remaining: 14m 8sRunning iteration 71/1500... Est. remaining: 13m 40sRunning iteration 81/1500... Est. remaining: 13m 18sRunning iteration 91/1500... Est. remaining: 13m 0sRunning iteration 101/1500... Est. remaining: 12m 45sbest_combination: {'lookbacks': [176, 249, 270], 'score': np.float64(0.9556672038285011), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 31sRunning iteration 121/1500... Est. remaining: 12m 20sRunning iteration 131/1500... Est. remaining: 12m 10sRunning iteration 141/1500... Est. remaining: 12m 1sRunning iteration 151/1500... Est. remaining: 11m 52sRunning iteration 161/1500... Est. remaining: 11m 44sRunning iteration 171/1500... Est. remaining: 11m 36sRunning iteration 181/1500... Est. remaining: 11m 28sRunning iteration 191/1500... Est. remaining: 11m 21sRunning iteration 201/1500... Est. remaining: 11m 14sbest_combination: {'lookbacks': [176, 249, 270], 'score': np.float64(0.9556672038285011), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 7sRunning iteration 221/1500... Est. remaining: 11m 1sRunning iteration 231/1500... Est. remaining: 10m 54sRunning iteration 241/1500... Est. remaining: 10m 48sRunning iteration 251/1500... Est. remaining: 10m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,078,038,085
Annual Return: 39.70%
Sharpe Ratio: 1.44580
Sortino Ratio: 1.338
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.079
Lookback periods: [41, 45, 116] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 10m 42sRunning iteration 271/1500... Est. remaining: 10m 36sRunning iteration 281/1500... Est. remaining: 10m 30sRunning iteration 291/1500... Est. remaining: 10m 23sRunning iteration 301/1500... Est. remaining: 10m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,563,236,051
Annual Return: 41.21%
Sharpe Ratio: 1.52293
Sortino Ratio: 1.408
Max Drawdown: -43.9%
Avg Drawdown: -10.0%
Normalized Score: 1.243
Lookback periods: [38, 49, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [38, 49, 88], 'score': np.float64(1.2428146642610371), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 15sRunning iteration 321/1500... Est. remaining: 10m 9sRunning iteration 331/1500... Est. remaining: 10m 3sRunning iteration 341/1500... Est. remaining: 9m 56sRunning iteration 351/1500... Est. remaining: 9m 50sRunning iteration 361/1500... Est. remaining: 9m 44sRunning iteration 371/1500... Est. remaining: 9m 38sRunning iteration 381/1500... Est. remaining: 9m 32sRunning iteration 391/1500... Est. remaining: 9m 26sRunning iteration 401/1500... Est. remaining: 9m 20sbest_combination: {'lookbacks': [38, 49, 88], 'score': np.float64(1.2428146642610371), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,202,829,374
Annual Return: 42.61%
Sharpe Ratio: 1.56200
Sortino Ratio: 1.453
Max Drawdown: -35.2%
Avg Drawdown: -9.5%
Normalized Score: 1.887
Lookback periods: [36, 49, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 9m 17sRunning iteration 421/1500... Est. remaining: 9m 11sRunning iteration 431/1500... Est. remaining: 9m 6sRunning iteration 441/1500... Est. remaining: 9m 0sRunning iteration 451/1500... Est. remaining: 8m 54sRunning iteration 461/1500... Est. remaining: 8m 48sRunning iteration 471/1500... Est. remaining: 8m 43sRunning iteration 481/1500... Est. remaining: 8m 37sRunning iteration 491/1500... Est. remaining: 8m 31sRunning iteration 501/1500... Est. remaining: 8m 26sbest_combination: {'lookbacks': [36, 49, 96], 'score': np.float64(1.887370987500954), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 21sRunning iteration 521/1500... Est. remaining: 8m 16sRunning iteration 531/1500... Est. remaining: 8m 10sRunning iteration 541/1500... Est. remaining: 8m 5sRunning iteration 551/1500... Est. remaining: 8m 0sRunning iteration 561/1500... Est. remaining: 7m 54sRunning iteration 571/1500... Est. remaining: 7m 49sRunning iteration 581/1500... Est. remaining: 7m 44sRunning iteration 591/1500... Est. remaining: 7m 39sRunning iteration 601/1500... Est. remaining: 7m 34sbest_combination: {'lookbacks': [36, 49, 96], 'score': np.float64(1.887370987500954), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 28sRunning iteration 621/1500... Est. remaining: 7m 23sRunning iteration 631/1500... Est. remaining: 7m 18sRunning iteration 641/1500... Est. remaining: 7m 13sRunning iteration 651/1500... Est. remaining: 7m 7sRunning iteration 661/1500... Est. remaining: 7m 2sRunning iteration 671/1500... Est. remaining: 6m 57sRunning iteration 681/1500... Est. remaining: 6m 51sRunning iteration 691/1500... Est. remaining: 6m 46sRunning iteration 701/1500... Est. remaining: 6m 41sbest_combination: {'lookbacks': [36, 49, 96], 'score': np.float64(1.887370987500954), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 36sRunning iteration 721/1500... Est. remaining: 6m 31sRunning iteration 731/1500... Est. remaining: 6m 26sRunning iteration 741/1500... Est. remaining: 6m 21sRunning iteration 751/1500... Est. remaining: 6m 16sRunning iteration 761/1500... Est. remaining: 6m 10sRunning iteration 771/1500... Est. remaining: 6m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,075,254,151
Annual Return: 42.37%
Sharpe Ratio: 1.55541
Sortino Ratio: 1.457
Max Drawdown: -35.2%
Avg Drawdown: -9.3%
Normalized Score: 1.921
Lookback periods: [38, 48, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 781/1500... Est. remaining: 6m 1sRunning iteration 791/1500... Est. remaining: 5m 56sRunning iteration 801/1500... Est. remaining: 5m 51sbest_combination: {'lookbacks': [38, 48, 99], 'score': np.float64(1.9209022629484331), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 46sRunning iteration 821/1500... Est. remaining: 5m 41sRunning iteration 831/1500... Est. remaining: 5m 35sRunning iteration 841/1500... Est. remaining: 5m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,584,980,362
Annual Return: 44.63%
Sharpe Ratio: 1.60474
Sortino Ratio: 1.512
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 2.439
Lookback periods: [36, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 5m 26sRunning iteration 861/1500... Est. remaining: 5m 21sRunning iteration 871/1500... Est. remaining: 5m 16sRunning iteration 881/1500... Est. remaining: 5m 11sRunning iteration 891/1500... Est. remaining: 5m 6sRunning iteration 901/1500... Est. remaining: 5m 1sbest_combination: {'lookbacks': [36, 52, 95], 'score': np.float64(2.4392219672833027), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 55sRunning iteration 921/1500... Est. remaining: 4m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,520,669,940
Annual Return: 44.56%
Sharpe Ratio: 1.61893
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 2.515
Lookback periods: [36, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 4m 46sRunning iteration 941/1500... Est. remaining: 4m 41sRunning iteration 951/1500... Est. remaining: 4m 36sRunning iteration 961/1500... Est. remaining: 4m 31sRunning iteration 971/1500... Est. remaining: 4m 26sRunning iteration 981/1500... Est. remaining: 4m 21sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [36, 52, 96], 'score': np.float64(2.5153128557748703), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 5sRunning iteration 1021/1500... Est. remaining: 4m 0sRunning iteration 1031/1500... Est. remaining: 3m 55sRunning iteration 1041/1500... Est. remaining: 3m 50sRunning iteration 1051/1500... Est. remaining: 3m 45sRunning iteration 1061/1500... Est. remaining: 3m 40sRunning iteration 1071/1500... Est. remaining: 3m 35sRunning iteration 1081/1500... Est. remaining: 3m 30sRunning iteration 1091/1500... Est. remaining: 3m 25sRunning iteration 1101/1500... Est. remaining: 3m 20sbest_combination: {'lookbacks': [36, 52, 96], 'score': np.float64(2.5153128557748703), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 15sRunning iteration 1121/1500... Est. remaining: 3m 10sRunning iteration 1131/1500... Est. remaining: 3m 5sRunning iteration 1141/1500... Est. remaining: 3m 0sRunning iteration 1151/1500... Est. remaining: 2m 55sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [36, 52, 96], 'score': np.float64(2.5153128557748703), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [36, 52, 96], 'score': np.float64(2.5153128557748703), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [36, 52, 96], 'score': np.float64(2.5153128557748703), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 2.52
best_combination: {'lookbacks': [36, 52, 96], 'score': np.float64(2.5153128557748703), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [36, 52, 96] (score: 2.5153)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [36, 52, 96] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 104 selections (25.0%)
2. naz100_hma: 95 selections (22.8%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 64 selections (15.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,520,669,940.08
Average Annualized Gain: 44.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Wed Aug 27 23:23:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $321,883,272
Annual Return: 34.91%
Sharpe Ratio: 1.25707
Sortino Ratio: 1.156
Max Drawdown: -56.2%
Avg Drawdown: -12.7%
Normalized Score: -0.736
Lookback periods: [64, 64, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,810,663,283
Annual Return: 41.81%
Sharpe Ratio: 1.35951
Sortino Ratio: 1.315
Max Drawdown: -68.2%
Avg Drawdown: -13.3%
Normalized Score: -0.183
Lookback periods: [111, 190, 208] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $876,788,149
Annual Return: 38.87%
Sharpe Ratio: 1.38599
Sortino Ratio: 1.286
Max Drawdown: -52.1%
Avg Drawdown: -10.6%
Normalized Score: -0.119
Lookback periods: [41, 82, 107] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,611,782,967
Annual Return: 44.66%
Sharpe Ratio: 1.45039
Sortino Ratio: 1.413
Max Drawdown: -60.0%
Avg Drawdown: -12.5%
Normalized Score: 0.284
Lookback periods: [147, 188, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 44sRunning iteration 21/1500... Est. remaining: 21m 21sRunning iteration 31/1500... Est. remaining: 18m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,756,036,628
Annual Return: 44.83%
Sharpe Ratio: 1.44749
Sortino Ratio: 1.410
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.315
Lookback periods: [176, 204, 214] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 9sRunning iteration 51/1500... Est. remaining: 15m 58sRunning iteration 61/1500... Est. remaining: 15m 13sRunning iteration 71/1500... Est. remaining: 14m 38sRunning iteration 81/1500... Est. remaining: 14m 12sRunning iteration 91/1500... Est. remaining: 13m 50sRunning iteration 101/1500... Est. remaining: 13m 31sbest_combination: {'lookbacks': [176, 204, 214], 'score': np.float64(0.3154227119001284), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 15sRunning iteration 121/1500... Est. remaining: 13m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,483,322,288
Annual Return: 47.12%
Sharpe Ratio: 1.55711
Sortino Ratio: 1.523
Max Drawdown: -63.5%
Avg Drawdown: -11.8%
Normalized Score: 0.681
Lookback periods: [132, 152, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 0sRunning iteration 141/1500... Est. remaining: 12m 47sRunning iteration 151/1500... Est. remaining: 12m 35sRunning iteration 161/1500... Est. remaining: 12m 24sRunning iteration 171/1500... Est. remaining: 12m 14sRunning iteration 181/1500... Est. remaining: 12m 4sRunning iteration 191/1500... Est. remaining: 11m 55sRunning iteration 201/1500... Est. remaining: 11m 46sbest_combination: {'lookbacks': [132, 152, 172], 'score': np.float64(0.6806816767862374), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 38sRunning iteration 221/1500... Est. remaining: 11m 30sRunning iteration 231/1500... Est. remaining: 11m 22sRunning iteration 241/1500... Est. remaining: 11m 14sRunning iteration 251/1500... Est. remaining: 11m 7sRunning iteration 261/1500... Est. remaining: 11m 0sRunning iteration 271/1500... Est. remaining: 10m 53sRunning iteration 281/1500... Est. remaining: 10m 46sRunning iteration 291/1500... Est. remaining: 10m 39sRunning iteration 301/1500... Est. remaining: 10m 32sbest_combination: {'lookbacks': [132, 152, 172], 'score': np.float64(0.6806816767862374), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 25sRunning iteration 321/1500... Est. remaining: 10m 18sRunning iteration 331/1500... Est. remaining: 10m 11sRunning iteration 341/1500... Est. remaining: 10m 4sRunning iteration 351/1500... Est. remaining: 9m 58sRunning iteration 361/1500... Est. remaining: 9m 51sRunning iteration 371/1500... Est. remaining: 9m 45sRunning iteration 381/1500... Est. remaining: 9m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,219,071,658
Annual Return: 46.95%
Sharpe Ratio: 1.55663
Sortino Ratio: 1.515
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.709
Lookback periods: [140, 149, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 9m 36sRunning iteration 401/1500... Est. remaining: 9m 30sbest_combination: {'lookbacks': [140, 149, 156], 'score': np.float64(0.7090434701671465), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,418,388,908
Annual Return: 47.08%
Sharpe Ratio: 1.57598
Sortino Ratio: 1.529
Max Drawdown: -58.5%
Avg Drawdown: -11.7%
Normalized Score: 0.753
Lookback periods: [140, 152, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 9m 27sRunning iteration 421/1500... Est. remaining: 9m 21sRunning iteration 431/1500... Est. remaining: 9m 15sRunning iteration 441/1500... Est. remaining: 9m 8sRunning iteration 451/1500... Est. remaining: 9m 2sRunning iteration 461/1500... Est. remaining: 8m 56sRunning iteration 471/1500... Est. remaining: 8m 50sRunning iteration 481/1500... Est. remaining: 8m 44sRunning iteration 491/1500... Est. remaining: 8m 39sRunning iteration 501/1500... Est. remaining: 8m 33sbest_combination: {'lookbacks': [140, 152, 152], 'score': np.float64(0.7533958750085128), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 27sRunning iteration 521/1500... Est. remaining: 8m 21sRunning iteration 531/1500... Est. remaining: 8m 16sRunning iteration 541/1500... Est. remaining: 8m 10sRunning iteration 551/1500... Est. remaining: 8m 4sRunning iteration 561/1500... Est. remaining: 7m 59sRunning iteration 571/1500... Est. remaining: 7m 53sRunning iteration 581/1500... Est. remaining: 7m 48sRunning iteration 591/1500... Est. remaining: 7m 42sRunning iteration 601/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [140, 152, 152], 'score': np.float64(0.7533958750085128), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 31sRunning iteration 621/1500... Est. remaining: 7m 26sRunning iteration 631/1500... Est. remaining: 7m 20sRunning iteration 641/1500... Est. remaining: 7m 15sRunning iteration 651/1500... Est. remaining: 7m 9sRunning iteration 661/1500... Est. remaining: 7m 4sRunning iteration 671/1500... Est. remaining: 6m 59sRunning iteration 681/1500... Est. remaining: 6m 53sRunning iteration 691/1500... Est. remaining: 6m 48sRunning iteration 701/1500... Est. remaining: 6m 43sbest_combination: {'lookbacks': [140, 152, 152], 'score': np.float64(0.7533958750085128), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 37sRunning iteration 721/1500... Est. remaining: 6m 32sRunning iteration 731/1500... Est. remaining: 6m 27sRunning iteration 741/1500... Est. remaining: 6m 22sRunning iteration 751/1500... Est. remaining: 6m 16sRunning iteration 761/1500... Est. remaining: 6m 11sRunning iteration 771/1500... Est. remaining: 6m 6sRunning iteration 781/1500... Est. remaining: 6m 1sRunning iteration 791/1500... Est. remaining: 5m 55sRunning iteration 801/1500... Est. remaining: 5m 50sbest_combination: {'lookbacks': [140, 152, 152], 'score': np.float64(0.7533958750085128), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 45sRunning iteration 821/1500... Est. remaining: 5m 40sRunning iteration 831/1500... Est. remaining: 5m 35sRunning iteration 841/1500... Est. remaining: 5m 30sRunning iteration 851/1500... Est. remaining: 5m 24sRunning iteration 861/1500... Est. remaining: 5m 19sRunning iteration 871/1500... Est. remaining: 5m 14sRunning iteration 881/1500... Est. remaining: 5m 9sRunning iteration 891/1500... Est. remaining: 5m 4sRunning iteration 901/1500... Est. remaining: 4m 59sbest_combination: {'lookbacks': [140, 152, 152], 'score': np.float64(0.7533958750085128), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 54sRunning iteration 921/1500... Est. remaining: 4m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,822,922,508
Annual Return: 47.92%
Sharpe Ratio: 1.55726
Sortino Ratio: 1.527
Max Drawdown: -58.5%
Avg Drawdown: -12.0%
Normalized Score: 0.755
Lookback periods: [152, 154, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 4m 44sRunning iteration 941/1500... Est. remaining: 4m 39sRunning iteration 951/1500... Est. remaining: 4m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,387,694,410
Annual Return: 47.68%
Sharpe Ratio: 1.56621
Sortino Ratio: 1.522
Max Drawdown: -56.0%
Avg Drawdown: -12.1%
Normalized Score: 0.766
Lookback periods: [138, 157, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 961/1500... Est. remaining: 4m 30sRunning iteration 971/1500... Est. remaining: 4m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,614,936,708
Annual Return: 48.34%
Sharpe Ratio: 1.57130
Sortino Ratio: 1.536
Max Drawdown: -58.5%
Avg Drawdown: -11.7%
Normalized Score: 0.812
Lookback periods: [150, 159, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 981/1500... Est. remaining: 4m 20sRunning iteration 991/1500... Est. remaining: 4m 15sRunning iteration 1001/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [150, 159, 200], 'score': np.float64(0.8115809741393489), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 5sRunning iteration 1021/1500... Est. remaining: 4m 0sRunning iteration 1031/1500... Est. remaining: 3m 55sRunning iteration 1041/1500... Est. remaining: 3m 49sRunning iteration 1051/1500... Est. remaining: 3m 44sRunning iteration 1061/1500... Est. remaining: 3m 39sRunning iteration 1071/1500... Est. remaining: 3m 34sRunning iteration 1081/1500... Est. remaining: 3m 29sRunning iteration 1091/1500... Est. remaining: 3m 24sRunning iteration 1101/1500... Est. remaining: 3m 19sbest_combination: {'lookbacks': [150, 159, 200], 'score': np.float64(0.8115809741393489), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 14sRunning iteration 1121/1500... Est. remaining: 3m 9sRunning iteration 1131/1500... Est. remaining: 3m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,527,649,583
Annual Return: 48.77%
Sharpe Ratio: 1.59188
Sortino Ratio: 1.554
Max Drawdown: -59.8%
Avg Drawdown: -11.6%
Normalized Score: 0.876
Lookback periods: [140, 158, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1141/1500... Est. remaining: 2m 59sRunning iteration 1151/1500... Est. remaining: 2m 54sRunning iteration 1161/1500... Est. remaining: 2m 49sRunning iteration 1171/1500... Est. remaining: 2m 44sRunning iteration 1181/1500... Est. remaining: 2m 39sRunning iteration 1191/1500... Est. remaining: 2m 34sRunning iteration 1201/1500... Est. remaining: 2m 29sbest_combination: {'lookbacks': [140, 158, 189], 'score': np.float64(0.87622151636328), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 24sRunning iteration 1221/1500... Est. remaining: 2m 19sRunning iteration 1231/1500... Est. remaining: 2m 14sRunning iteration 1241/1500... Est. remaining: 2m 9sRunning iteration 1251/1500... Est. remaining: 2m 4sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 39sbest_combination: {'lookbacks': [140, 158, 189], 'score': np.float64(0.87622151636328), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 34sRunning iteration 1321/1500... Est. remaining: 1m 29sRunning iteration 1331/1500... Est. remaining: 1m 24sRunning iteration 1341/1500... Est. remaining: 1m 19sRunning iteration 1351/1500... Est. remaining: 1m 14sRunning iteration 1361/1500... Est. remaining: 1m 9sRunning iteration 1371/1500... Est. remaining: 1m 4sRunning iteration 1381/1500... Est. remaining: 0m 59sRunning iteration 1391/1500... Est. remaining: 0m 54sRunning iteration 1401/1500... Est. remaining: 0m 49sbest_combination: {'lookbacks': [140, 158, 189], 'score': np.float64(0.87622151636328), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 44sRunning iteration 1421/1500... Est. remaining: 0m 39sRunning iteration 1431/1500... Est. remaining: 0m 34sRunning iteration 1441/1500... Est. remaining: 0m 29sRunning iteration 1451/1500... Est. remaining: 0m 24sRunning iteration 1461/1500... Est. remaining: 0m 19sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 12.4 minutes
Best normalized score: 0.88
best_combination: {'lookbacks': [140, 158, 189], 'score': np.float64(0.87622151636328), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [140, 158, 189] (score: 0.8762)

Monte Carlo simulation completed in 12.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [140, 158, 189] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 113 selections (27.2%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 73 selections (17.5%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,527,649,583.37
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Wed Aug 27 23:36:00 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $787,968,715
Annual Return: 38.45%
Sharpe Ratio: 1.27566
Sortino Ratio: 1.229
Max Drawdown: -69.6%
Avg Drawdown: -13.1%
Normalized Score: -0.742
Lookback periods: [234, 261, 291] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,458,044,512
Annual Return: 40.93%
Sharpe Ratio: 1.40155
Sortino Ratio: 1.326
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: -0.126
Lookback periods: [88, 99, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 8sRunning iteration 21/1500... Est. remaining: 18m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,574,947,734
Annual Return: 41.24%
Sharpe Ratio: 1.46242
Sortino Ratio: 1.370
Max Drawdown: -51.1%
Avg Drawdown: -10.1%
Normalized Score: 0.079
Lookback periods: [47, 53, 121] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 17m 7sRunning iteration 41/1500... Est. remaining: 15m 42sRunning iteration 51/1500... Est. remaining: 14m 49sRunning iteration 61/1500... Est. remaining: 14m 14sRunning iteration 71/1500... Est. remaining: 13m 46sRunning iteration 81/1500... Est. remaining: 13m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $987,642,085
Annual Return: 39.35%
Sharpe Ratio: 1.44517
Sortino Ratio: 1.335
Max Drawdown: -35.2%
Avg Drawdown: -9.3%
Normalized Score: 0.079
Lookback periods: [37, 43, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 13m 23sRunning iteration 101/1500... Est. remaining: 13m 5sbest_combination: {'lookbacks': [37, 43, 94], 'score': np.float64(0.07893510454981109), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 49sRunning iteration 121/1500... Est. remaining: 12m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,933,391,429
Annual Return: 43.80%
Sharpe Ratio: 1.45553
Sortino Ratio: 1.412
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.103
Lookback periods: [156, 242, 266] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 12m 37sRunning iteration 141/1500... Est. remaining: 12m 27sRunning iteration 151/1500... Est. remaining: 12m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,162,761,653
Annual Return: 45.26%
Sharpe Ratio: 1.48522
Sortino Ratio: 1.439
Max Drawdown: -60.1%
Avg Drawdown: -13.2%
Normalized Score: 0.155
Lookback periods: [131, 158, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 12m 15sRunning iteration 171/1500... Est. remaining: 12m 4sRunning iteration 181/1500... Est. remaining: 11m 55sRunning iteration 191/1500... Est. remaining: 11m 46sRunning iteration 201/1500... Est. remaining: 11m 37sbest_combination: {'lookbacks': [131, 158, 198], 'score': np.float64(0.15494645424323916), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 28sRunning iteration 221/1500... Est. remaining: 11m 20sRunning iteration 231/1500... Est. remaining: 11m 12sRunning iteration 241/1500... Est. remaining: 11m 5sRunning iteration 251/1500... Est. remaining: 10m 57sRunning iteration 261/1500... Est. remaining: 10m 50sRunning iteration 271/1500... Est. remaining: 10m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,733,321,455
Annual Return: 44.80%
Sharpe Ratio: 1.48910
Sortino Ratio: 1.442
Max Drawdown: -57.1%
Avg Drawdown: -12.0%
Normalized Score: 0.220
Lookback periods: [107, 139, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/1500... Est. remaining: 10m 41sRunning iteration 291/1500... Est. remaining: 10m 34sRunning iteration 301/1500... Est. remaining: 10m 28sbest_combination: {'lookbacks': [107, 139, 168], 'score': np.float64(0.22007198279664567), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 22sRunning iteration 321/1500... Est. remaining: 10m 15sRunning iteration 331/1500... Est. remaining: 10m 8sRunning iteration 341/1500... Est. remaining: 10m 2sRunning iteration 351/1500... Est. remaining: 9m 56sRunning iteration 361/1500... Est. remaining: 9m 50sRunning iteration 371/1500... Est. remaining: 9m 44sRunning iteration 381/1500... Est. remaining: 9m 38sRunning iteration 391/1500... Est. remaining: 9m 32sRunning iteration 401/1500... Est. remaining: 9m 26sbest_combination: {'lookbacks': [107, 139, 168], 'score': np.float64(0.22007198279664567), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 20sRunning iteration 421/1500... Est. remaining: 9m 14sRunning iteration 431/1500... Est. remaining: 9m 8sRunning iteration 441/1500... Est. remaining: 9m 2sRunning iteration 451/1500... Est. remaining: 8m 56sRunning iteration 461/1500... Est. remaining: 8m 50sRunning iteration 471/1500... Est. remaining: 8m 45sRunning iteration 481/1500... Est. remaining: 8m 39sRunning iteration 491/1500... Est. remaining: 8m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,068,816,853
Annual Return: 46.08%
Sharpe Ratio: 1.51249
Sortino Ratio: 1.474
Max Drawdown: -66.9%
Avg Drawdown: -11.7%
Normalized Score: 0.293
Lookback periods: [133, 186, 207] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 8m 30sbest_combination: {'lookbacks': [133, 186, 207], 'score': np.float64(0.29315975411061157), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 25sRunning iteration 521/1500... Est. remaining: 8m 19sRunning iteration 531/1500... Est. remaining: 8m 13sRunning iteration 541/1500... Est. remaining: 8m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,683,606,257
Annual Return: 46.57%
Sharpe Ratio: 1.58727
Sortino Ratio: 1.497
Max Drawdown: -56.4%
Avg Drawdown: -11.5%
Normalized Score: 0.531
Lookback periods: [56, 152, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 5sRunning iteration 561/1500... Est. remaining: 8m 0sRunning iteration 571/1500... Est. remaining: 7m 54sRunning iteration 581/1500... Est. remaining: 7m 49sRunning iteration 591/1500... Est. remaining: 7m 44sRunning iteration 601/1500... Est. remaining: 7m 38sbest_combination: {'lookbacks': [56, 152, 157], 'score': np.float64(0.5305859890348276), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 33sRunning iteration 621/1500... Est. remaining: 7m 28sRunning iteration 631/1500... Est. remaining: 7m 23sRunning iteration 641/1500... Est. remaining: 7m 17sRunning iteration 651/1500... Est. remaining: 7m 12sRunning iteration 661/1500... Est. remaining: 7m 7sRunning iteration 671/1500... Est. remaining: 7m 1sRunning iteration 681/1500... Est. remaining: 6m 56sRunning iteration 691/1500... Est. remaining: 6m 51sRunning iteration 701/1500... Est. remaining: 6m 46sbest_combination: {'lookbacks': [56, 152, 157], 'score': np.float64(0.5305859890348276), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 41sRunning iteration 721/1500... Est. remaining: 6m 35sRunning iteration 731/1500... Est. remaining: 6m 30sRunning iteration 741/1500... Est. remaining: 6m 25sRunning iteration 751/1500... Est. remaining: 6m 20sRunning iteration 761/1500... Est. remaining: 6m 15sRunning iteration 771/1500... Est. remaining: 6m 10sRunning iteration 781/1500... Est. remaining: 6m 4sRunning iteration 791/1500... Est. remaining: 5m 59sRunning iteration 801/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [56, 152, 157], 'score': np.float64(0.5305859890348276), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 49sRunning iteration 821/1500... Est. remaining: 5m 44sRunning iteration 831/1500... Est. remaining: 5m 39sRunning iteration 841/1500... Est. remaining: 5m 34sRunning iteration 851/1500... Est. remaining: 5m 28sRunning iteration 861/1500... Est. remaining: 5m 23sRunning iteration 871/1500... Est. remaining: 5m 18sRunning iteration 881/1500... Est. remaining: 5m 13sRunning iteration 891/1500... Est. remaining: 5m 8sRunning iteration 901/1500... Est. remaining: 5m 3sbest_combination: {'lookbacks': [56, 152, 157], 'score': np.float64(0.5305859890348276), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 58sRunning iteration 921/1500... Est. remaining: 4m 53sRunning iteration 931/1500... Est. remaining: 4m 48sRunning iteration 941/1500... Est. remaining: 4m 42sRunning iteration 951/1500... Est. remaining: 4m 37sRunning iteration 961/1500... Est. remaining: 4m 32sRunning iteration 971/1500... Est. remaining: 4m 27sRunning iteration 981/1500... Est. remaining: 4m 22sRunning iteration 991/1500... Est. remaining: 4m 17sRunning iteration 1001/1500... Est. remaining: 4m 12sbest_combination: {'lookbacks': [56, 152, 157], 'score': np.float64(0.5305859890348276), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 7sRunning iteration 1021/1500... Est. remaining: 4m 2sRunning iteration 1031/1500... Est. remaining: 3m 57sRunning iteration 1041/1500... Est. remaining: 3m 52sRunning iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 21sbest_combination: {'lookbacks': [56, 152, 157], 'score': np.float64(0.5305859890348276), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 16sRunning iteration 1121/1500... Est. remaining: 3m 11sRunning iteration 1131/1500... Est. remaining: 3m 6sRunning iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 56sRunning iteration 1161/1500... Est. remaining: 2m 51sRunning iteration 1171/1500... Est. remaining: 2m 46sRunning iteration 1181/1500... Est. remaining: 2m 41sRunning iteration 1191/1500... Est. remaining: 2m 36sRunning iteration 1201/1500... Est. remaining: 2m 31sbest_combination: {'lookbacks': [56, 152, 157], 'score': np.float64(0.5305859890348276), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20sRunning iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [56, 152, 157], 'score': np.float64(0.5305859890348276), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [56, 152, 157], 'score': np.float64(0.5305859890348276), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.5 minutes
Best normalized score: 0.53
best_combination: {'lookbacks': [56, 152, 157], 'score': np.float64(0.5305859890348276), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [56, 152, 157] (score: 0.5306)

Monte Carlo simulation completed in 12.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [56, 152, 157] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 118 selections (28.4%)
2. naz100_hma: 104 selections (25.0%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 67 selections (16.1%)
5. cash: 48 selections (11.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,683,606,256.92
Average Annualized Gain: 46.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Wed Aug 27 23:48:40 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $66,258,321
Annual Return: 28.90%
Sharpe Ratio: 1.08670
Sortino Ratio: 0.961
Max Drawdown: -59.3%
Avg Drawdown: -15.1%
Normalized Score: -5.711
Lookback periods: [27, 68, 249] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $97,551,081
Annual Return: 30.35%
Sharpe Ratio: 1.06286
Sortino Ratio: 0.963
Max Drawdown: -55.0%
Avg Drawdown: -14.4%
Normalized Score: -5.237
Lookback periods: [43, 126, 290] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $948,617,117
Annual Return: 39.19%
Sharpe Ratio: 1.33144
Sortino Ratio: 1.264
Max Drawdown: -58.2%
Avg Drawdown: -13.5%
Normalized Score: -1.814
Lookback periods: [82, 153, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,126,883,279
Annual Return: 39.88%
Sharpe Ratio: 1.31516
Sortino Ratio: 1.267
Max Drawdown: -63.1%
Avg Drawdown: -13.1%
Normalized Score: -1.644
Lookback periods: [190, 234, 282] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,960,898,051
Annual Return: 42.14%
Sharpe Ratio: 1.40336
Sortino Ratio: 1.350
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: -0.655
Lookback periods: [195, 262, 291] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,548,746,252
Annual Return: 43.21%
Sharpe Ratio: 1.41318
Sortino Ratio: 1.374
Max Drawdown: -67.1%
Avg Drawdown: -13.1%
Normalized Score: -0.404
Lookback periods: [184, 223, 276] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,522,929,267
Annual Return: 44.56%
Sharpe Ratio: 1.46811
Sortino Ratio: 1.429
Max Drawdown: -65.6%
Avg Drawdown: -12.3%
Normalized Score: 0.185
Lookback periods: [173, 252, 260] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 19m 9sRunning iteration 51/1500... Est. remaining: 17m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,408,467,109
Annual Return: 47.08%
Sharpe Ratio: 1.52274
Sortino Ratio: 1.481
Max Drawdown: -59.0%
Avg Drawdown: -12.0%
Normalized Score: 1.153
Lookback periods: [178, 184, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 17m 2sRunning iteration 71/1500... Est. remaining: 16m 14sRunning iteration 81/1500... Est. remaining: 15m 36sRunning iteration 91/1500... Est. remaining: 15m 5sRunning iteration 101/1500... Est. remaining: 14m 40sbest_combination: {'lookbacks': [178, 184, 198], 'score': np.float64(1.1528318771717752), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 16sRunning iteration 121/1500... Est. remaining: 13m 55sRunning iteration 131/1500... Est. remaining: 13m 38sRunning iteration 141/1500... Est. remaining: 13m 21sRunning iteration 151/1500... Est. remaining: 13m 7sRunning iteration 161/1500... Est. remaining: 16m 49sRunning iteration 171/1500... Est. remaining: 16m 21sRunning iteration 181/1500... Est. remaining: 22m 6sRunning iteration 191/1500... Est. remaining: 21m 21sRunning iteration 201/1500... Est. remaining: 41m 6sbest_combination: {'lookbacks': [178, 184, 198], 'score': np.float64(1.1528318771717752), 'visits': 1}
Running iteration 211/1500... Est. remaining: 39m 21sRunning iteration 221/1500... Est. remaining: 40m 25sRunning iteration 231/1500... Est. remaining: 38m 49sRunning iteration 241/1500... Est. remaining: 46m 50sRunning iteration 251/1500... Est. remaining: 70m 23sRunning iteration 261/1500... Est. remaining: 67m 32sRunning iteration 271/1500... Est. remaining: 64m 53sRunning iteration 281/1500... Est. remaining: 62m 25sRunning iteration 291/1500... Est. remaining: 60m 7sRunning iteration 301/1500... Est. remaining: 57m 57sbest_combination: {'lookbacks': [178, 184, 198], 'score': np.float64(1.1528318771717752), 'visits': 1}
Running iteration 311/1500... Est. remaining: 55m 56sRunning iteration 321/1500... Est. remaining: 54m 2sRunning iteration 331/1500... Est. remaining: 52m 14sRunning iteration 341/1500... Est. remaining: 50m 33sRunning iteration 351/1500... Est. remaining: 48m 57sRunning iteration 361/1500... Est. remaining: 47m 26sRunning iteration 371/1500... Est. remaining: 46m 0sRunning iteration 381/1500... Est. remaining: 44m 38sRunning iteration 391/1500... Est. remaining: 43m 20sRunning iteration 401/1500... Est. remaining: 42m 6sbest_combination: {'lookbacks': [178, 184, 198], 'score': np.float64(1.1528318771717752), 'visits': 1}
Running iteration 411/1500... Est. remaining: 40m 55sRunning iteration 421/1500... Est. remaining: 39m 47sRunning iteration 431/1500... Est. remaining: 38m 43sRunning iteration 441/1500... Est. remaining: 37m 40sRunning iteration 451/1500... Est. remaining: 36m 41sRunning iteration 461/1500... Est. remaining: 35m 44sRunning iteration 471/1500... Est. remaining: 34m 49sRunning iteration 481/1500... Est. remaining: 33m 56sRunning iteration 491/1500... Est. remaining: 33m 5sRunning iteration 501/1500... Est. remaining: 32m 16sbest_combination: {'lookbacks': [178, 184, 198], 'score': np.float64(1.1528318771717752), 'visits': 1}
Running iteration 511/1500... Est. remaining: 31m 29sRunning iteration 521/1500... Est. remaining: 30m 43sRunning iteration 531/1500... Est. remaining: 29m 59sRunning iteration 541/1500... Est. remaining: 29m 16sRunning iteration 551/1500... Est. remaining: 28m 35sRunning iteration 561/1500... Est. remaining: 27m 55sRunning iteration 571/1500... Est. remaining: 27m 16sRunning iteration 581/1500... Est. remaining: 26m 38sRunning iteration 591/1500... Est. remaining: 26m 2sRunning iteration 601/1500... Est. remaining: 25m 26sbest_combination: {'lookbacks': [178, 184, 198], 'score': np.float64(1.1528318771717752), 'visits': 1}
Running iteration 611/1500... Est. remaining: 24m 52sRunning iteration 621/1500... Est. remaining: 24m 18sRunning iteration 631/1500... Est. remaining: 23m 45sRunning iteration 641/1500... Est. remaining: 23m 13sRunning iteration 651/1500... Est. remaining: 22m 42sRunning iteration 661/1500... Est. remaining: 22m 12sRunning iteration 671/1500... Est. remaining: 21m 43sRunning iteration 681/1500... Est. remaining: 21m 14sRunning iteration 691/1500... Est. remaining: 20m 46sRunning iteration 701/1500... Est. remaining: 20m 18sbest_combination: {'lookbacks': [178, 184, 198], 'score': np.float64(1.1528318771717752), 'visits': 1}
Running iteration 711/1500... Est. remaining: 19m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,416,312,771
Annual Return: 48.72%
Sharpe Ratio: 1.59288
Sortino Ratio: 1.554
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 1.877
Lookback periods: [128, 156, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 19m 27sRunning iteration 731/1500... Est. remaining: 19m 1sRunning iteration 741/1500... Est. remaining: 18m 36sRunning iteration 751/1500... Est. remaining: 18m 12sRunning iteration 761/1500... Est. remaining: 17m 48sRunning iteration 771/1500... Est. remaining: 17m 24sRunning iteration 781/1500... Est. remaining: 17m 1sRunning iteration 791/1500... Est. remaining: 16m 39sRunning iteration 801/1500... Est. remaining: 16m 16sbest_combination: {'lookbacks': [128, 156, 156], 'score': np.float64(1.8768380415071164), 'visits': 1}
Running iteration 811/1500... Est. remaining: 15m 55sRunning iteration 821/1500... Est. remaining: 15m 33sRunning iteration 831/1500... Est. remaining: 15m 13sRunning iteration 841/1500... Est. remaining: 14m 52sRunning iteration 851/1500... Est. remaining: 14m 32sRunning iteration 861/1500... Est. remaining: 14m 12sRunning iteration 871/1500... Est. remaining: 13m 53sRunning iteration 881/1500... Est. remaining: 13m 33sRunning iteration 891/1500... Est. remaining: 13m 15sRunning iteration 901/1500... Est. remaining: 12m 56sbest_combination: {'lookbacks': [128, 156, 156], 'score': np.float64(1.8768380415071164), 'visits': 1}
Running iteration 911/1500... Est. remaining: 12m 38sRunning iteration 921/1500... Est. remaining: 12m 20sRunning iteration 931/1500... Est. remaining: 12m 2sRunning iteration 941/1500... Est. remaining: 11m 45sRunning iteration 951/1500... Est. remaining: 11m 28sRunning iteration 961/1500... Est. remaining: 11m 11sRunning iteration 971/1500... Est. remaining: 10m 55sRunning iteration 981/1500... Est. remaining: 10m 38sRunning iteration 991/1500... Est. remaining: 10m 22sRunning iteration 1001/1500... Est. remaining: 10m 6sbest_combination: {'lookbacks': [128, 156, 156], 'score': np.float64(1.8768380415071164), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 9m 51sRunning iteration 1021/1500... Est. remaining: 9m 35sRunning iteration 1031/1500... Est. remaining: 9m 20sRunning iteration 1041/1500... Est. remaining: 9m 5sRunning iteration 1051/1500... Est. remaining: 8m 50sRunning iteration 1061/1500... Est. remaining: 8m 35sRunning iteration 1071/1500... Est. remaining: 8m 21sRunning iteration 1081/1500... Est. remaining: 8m 7sRunning iteration 1091/1500... Est. remaining: 7m 53sRunning iteration 1101/1500... Est. remaining: 7m 39sbest_combination: {'lookbacks': [128, 156, 156], 'score': np.float64(1.8768380415071164), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 7m 25sRunning iteration 1121/1500... Est. remaining: 7m 11sRunning iteration 1131/1500... Est. remaining: 6m 58sRunning iteration 1141/1500... Est. remaining: 6m 45sRunning iteration 1151/1500... Est. remaining: 6m 31sRunning iteration 1161/1500... Est. remaining: 6m 18sRunning iteration 1171/1500... Est. remaining: 6m 5sRunning iteration 1181/1500... Est. remaining: 5m 53sRunning iteration 1191/1500... Est. remaining: 5m 40sRunning iteration 1201/1500... Est. remaining: 5m 28sbest_combination: {'lookbacks': [128, 156, 156], 'score': np.float64(1.8768380415071164), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 5m 15sRunning iteration 1221/1500... Est. remaining: 5m 3sRunning iteration 1231/1500... Est. remaining: 4m 51sRunning iteration 1241/1500... Est. remaining: 4m 39sRunning iteration 1251/1500... Est. remaining: 4m 27sRunning iteration 1261/1500... Est. remaining: 4m 15sRunning iteration 1271/1500... Est. remaining: 4m 3sRunning iteration 1281/1500... Est. remaining: 3m 52sRunning iteration 1291/1500... Est. remaining: 3m 40sRunning iteration 1301/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [128, 156, 156], 'score': np.float64(1.8768380415071164), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 3m 18sRunning iteration 1321/1500... Est. remaining: 3m 6sRunning iteration 1331/1500... Est. remaining: 2m 55sRunning iteration 1341/1500... Est. remaining: 2m 44sRunning iteration 1351/1500... Est. remaining: 2m 33sRunning iteration 1361/1500... Est. remaining: 2m 23sRunning iteration 1371/1500... Est. remaining: 2m 12sRunning iteration 1381/1500... Est. remaining: 2m 1sRunning iteration 1391/1500... Est. remaining: 1m 51sRunning iteration 1401/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [128, 156, 156], 'score': np.float64(1.8768380415071164), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 1m 30sRunning iteration 1421/1500... Est. remaining: 1m 19sRunning iteration 1431/1500... Est. remaining: 1m 9sRunning iteration 1441/1500... Est. remaining: 0m 59sRunning iteration 1451/1500... Est. remaining: 0m 49sRunning iteration 1461/1500... Est. remaining: 0m 39sRunning iteration 1471/1500... Est. remaining: 0m 29sRunning iteration 1481/1500... Est. remaining: 0m 19sRunning iteration 1491/1500... Est. remaining: 0m 9s
Monte Carlo simulation completed in 24.3 minutes
Best normalized score: 1.88
best_combination: {'lookbacks': [128, 156, 156], 'score': np.float64(1.8768380415071164), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [128, 156, 156] (score: 1.8768)

Monte Carlo simulation completed in 24.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [128, 156, 156] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,416,312,771.01
Average Annualized Gain: 48.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Thu Aug 28 00:13:07 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $207,530,377
Annual Return: 33.22%
Sharpe Ratio: 1.22373
Sortino Ratio: 1.114
Max Drawdown: -55.5%
Avg Drawdown: -12.5%
Normalized Score: -1.573
Lookback periods: [25, 261, 267] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,077,623,122
Annual Return: 39.70%
Sharpe Ratio: 1.30986
Sortino Ratio: 1.255
Max Drawdown: -68.2%
Avg Drawdown: -13.6%
Normalized Score: -1.251
Lookback periods: [150, 213, 292] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $780,248,066
Annual Return: 38.41%
Sharpe Ratio: 1.38019
Sortino Ratio: 1.276
Max Drawdown: -51.1%
Avg Drawdown: -11.0%
Normalized Score: -0.711
Lookback periods: [46, 57, 138] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 20m 15sRunning iteration 31/1500... Est. remaining: 17m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,071,356,399
Annual Return: 45.16%
Sharpe Ratio: 1.45992
Sortino Ratio: 1.425
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: -0.221
Lookback periods: [172, 199, 203] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 16m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,768,679,179
Annual Return: 45.83%
Sharpe Ratio: 1.49833
Sortino Ratio: 1.457
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: -0.081
Lookback periods: [159, 162, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 16m 20sRunning iteration 61/1500... Est. remaining: 15m 28sRunning iteration 71/1500... Est. remaining: 14m 50sRunning iteration 81/1500... Est. remaining: 14m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,948,414,150
Annual Return: 47.42%
Sharpe Ratio: 1.55297
Sortino Ratio: 1.512
Max Drawdown: -56.0%
Avg Drawdown: -11.3%
Normalized Score: 0.220
Lookback periods: [135, 157, 207] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 14sRunning iteration 101/1500... Est. remaining: 13m 54sbest_combination: {'lookbacks': [135, 157, 207], 'score': np.float64(0.22027559840652278), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,485,391,228
Annual Return: 43.11%
Sharpe Ratio: 1.57386
Sortino Ratio: 1.463
Max Drawdown: -36.6%
Avg Drawdown: -8.4%
Normalized Score: 0.491
Lookback periods: [33, 94, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 33sRunning iteration 131/1500... Est. remaining: 13m 17sRunning iteration 141/1500... Est. remaining: 13m 3sRunning iteration 151/1500... Est. remaining: 12m 49sRunning iteration 161/1500... Est. remaining: 12m 36sRunning iteration 171/1500... Est. remaining: 12m 26sRunning iteration 181/1500... Est. remaining: 12m 15sRunning iteration 191/1500... Est. remaining: 12m 5sRunning iteration 201/1500... Est. remaining: 11m 55sbest_combination: {'lookbacks': [33, 94, 97], 'score': np.float64(0.4907892039132079), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 47sRunning iteration 221/1500... Est. remaining: 11m 38sRunning iteration 231/1500... Est. remaining: 11m 30sRunning iteration 241/1500... Est. remaining: 11m 22sRunning iteration 251/1500... Est. remaining: 11m 14sRunning iteration 261/1500... Est. remaining: 11m 7sRunning iteration 271/1500... Est. remaining: 10m 59sRunning iteration 281/1500... Est. remaining: 10m 52sRunning iteration 291/1500... Est. remaining: 10m 45sRunning iteration 301/1500... Est. remaining: 10m 38sbest_combination: {'lookbacks': [33, 94, 97], 'score': np.float64(0.4907892039132079), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 31sRunning iteration 321/1500... Est. remaining: 10m 24sRunning iteration 331/1500... Est. remaining: 10m 18sRunning iteration 341/1500... Est. remaining: 10m 11sRunning iteration 351/1500... Est. remaining: 10m 4sRunning iteration 361/1500... Est. remaining: 9m 57sRunning iteration 371/1500... Est. remaining: 9m 51sRunning iteration 381/1500... Est. remaining: 9m 44sRunning iteration 391/1500... Est. remaining: 9m 38sRunning iteration 401/1500... Est. remaining: 9m 31sbest_combination: {'lookbacks': [33, 94, 97], 'score': np.float64(0.4907892039132079), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 25sRunning iteration 421/1500... Est. remaining: 9m 19sRunning iteration 431/1500... Est. remaining: 9m 13sRunning iteration 441/1500... Est. remaining: 9m 7sRunning iteration 451/1500... Est. remaining: 9m 1sRunning iteration 461/1500... Est. remaining: 8m 54sRunning iteration 471/1500... Est. remaining: 8m 48sRunning iteration 481/1500... Est. remaining: 8m 43sRunning iteration 491/1500... Est. remaining: 8m 37sRunning iteration 501/1500... Est. remaining: 8m 31sbest_combination: {'lookbacks': [33, 94, 97], 'score': np.float64(0.4907892039132079), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 25sRunning iteration 521/1500... Est. remaining: 8m 19sRunning iteration 531/1500... Est. remaining: 8m 14sRunning iteration 541/1500... Est. remaining: 8m 8sRunning iteration 551/1500... Est. remaining: 8m 2sRunning iteration 561/1500... Est. remaining: 7m 57sRunning iteration 571/1500... Est. remaining: 7m 51sRunning iteration 581/1500... Est. remaining: 7m 45sRunning iteration 591/1500... Est. remaining: 7m 40sRunning iteration 601/1500... Est. remaining: 7m 34sbest_combination: {'lookbacks': [33, 94, 97], 'score': np.float64(0.4907892039132079), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 29sRunning iteration 621/1500... Est. remaining: 7m 23sRunning iteration 631/1500... Est. remaining: 7m 18sRunning iteration 641/1500... Est. remaining: 7m 12sRunning iteration 651/1500... Est. remaining: 7m 7sRunning iteration 661/1500... Est. remaining: 7m 2sRunning iteration 671/1500... Est. remaining: 6m 56sRunning iteration 681/1500... Est. remaining: 6m 51sRunning iteration 691/1500... Est. remaining: 6m 46sRunning iteration 701/1500... Est. remaining: 6m 40sbest_combination: {'lookbacks': [33, 94, 97], 'score': np.float64(0.4907892039132079), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 35sRunning iteration 721/1500... Est. remaining: 6m 30sRunning iteration 731/1500... Est. remaining: 6m 24sRunning iteration 741/1500... Est. remaining: 6m 19sRunning iteration 751/1500... Est. remaining: 6m 14sRunning iteration 761/1500... Est. remaining: 6m 9sRunning iteration 771/1500... Est. remaining: 6m 4sRunning iteration 781/1500... Est. remaining: 5m 58sRunning iteration 791/1500... Est. remaining: 5m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,588,512,240
Annual Return: 45.66%
Sharpe Ratio: 1.65561
Sortino Ratio: 1.555
Max Drawdown: -38.1%
Avg Drawdown: -8.6%
Normalized Score: 0.811
Lookback periods: [36, 96, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 801/1500... Est. remaining: 5m 49sbest_combination: {'lookbacks': [36, 96, 97], 'score': np.float64(0.8107053908007984), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 44sRunning iteration 821/1500... Est. remaining: 5m 39sRunning iteration 831/1500... Est. remaining: 5m 34sRunning iteration 841/1500... Est. remaining: 5m 28sRunning iteration 851/1500... Est. remaining: 5m 23sRunning iteration 861/1500... Est. remaining: 5m 18sRunning iteration 871/1500... Est. remaining: 5m 13sRunning iteration 881/1500... Est. remaining: 5m 8sRunning iteration 891/1500... Est. remaining: 5m 3sRunning iteration 901/1500... Est. remaining: 4m 58sbest_combination: {'lookbacks': [36, 96, 97], 'score': np.float64(0.8107053908007984), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 52sRunning iteration 921/1500... Est. remaining: 4m 47sRunning iteration 931/1500... Est. remaining: 4m 42sRunning iteration 941/1500... Est. remaining: 4m 37sRunning iteration 951/1500... Est. remaining: 4m 32sRunning iteration 961/1500... Est. remaining: 4m 27sRunning iteration 971/1500... Est. remaining: 4m 22sRunning iteration 981/1500... Est. remaining: 4m 17sRunning iteration 991/1500... Est. remaining: 4m 12sRunning iteration 1001/1500... Est. remaining: 4m 7sbest_combination: {'lookbacks': [36, 96, 97], 'score': np.float64(0.8107053908007984), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 2sRunning iteration 1021/1500... Est. remaining: 3m 57sRunning iteration 1031/1500... Est. remaining: 3m 52sRunning iteration 1041/1500... Est. remaining: 3m 47sRunning iteration 1051/1500... Est. remaining: 3m 42sRunning iteration 1061/1500... Est. remaining: 3m 37sRunning iteration 1071/1500... Est. remaining: 3m 32sRunning iteration 1081/1500... Est. remaining: 3m 27sRunning iteration 1091/1500... Est. remaining: 3m 22sRunning iteration 1101/1500... Est. remaining: 3m 17sbest_combination: {'lookbacks': [36, 96, 97], 'score': np.float64(0.8107053908007984), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 12sRunning iteration 1121/1500... Est. remaining: 3m 7sRunning iteration 1131/1500... Est. remaining: 3m 2sRunning iteration 1141/1500... Est. remaining: 2m 57sRunning iteration 1151/1500... Est. remaining: 2m 52sRunning iteration 1161/1500... Est. remaining: 2m 47sRunning iteration 1171/1500... Est. remaining: 2m 42sRunning iteration 1181/1500... Est. remaining: 2m 38sRunning iteration 1191/1500... Est. remaining: 2m 33sRunning iteration 1201/1500... Est. remaining: 2m 28sbest_combination: {'lookbacks': [36, 96, 97], 'score': np.float64(0.8107053908007984), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 23sRunning iteration 1221/1500... Est. remaining: 2m 18sRunning iteration 1231/1500... Est. remaining: 2m 17sRunning iteration 1241/1500... Est. remaining: 20m 34sRunning iteration 1251/1500... Est. remaining: 19m 38sRunning iteration 1261/1500... Est. remaining: 21m 50sRunning iteration 1271/1500... Est. remaining: 22m 50sRunning iteration 1281/1500... Est. remaining: 21m 41sRunning iteration 1291/1500... Est. remaining: 34m 49sRunning iteration 1301/1500... Est. remaining: 46m 24sbest_combination: {'lookbacks': [36, 96, 97], 'score': np.float64(0.8107053908007984), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 43m 45sRunning iteration 1321/1500... Est. remaining: 47m 26sRunning iteration 1331/1500... Est. remaining: 55m 39sRunning iteration 1341/1500... Est. remaining: 52m 0sRunning iteration 1351/1500... Est. remaining: 50m 13sRunning iteration 1361/1500... Est. remaining: 48m 16sRunning iteration 1371/1500... Est. remaining: 44m 30sRunning iteration 1381/1500... Est. remaining: 43m 26sRunning iteration 1391/1500... Est. remaining: 39m 32sRunning iteration 1401/1500... Est. remaining: 37m 50sbest_combination: {'lookbacks': [36, 96, 97], 'score': np.float64(0.8107053908007984), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 33m 49sRunning iteration 1421/1500... Est. remaining: 32m 3sRunning iteration 1431/1500... Est. remaining: 27m 51sRunning iteration 1441/1500... Est. remaining: 23m 45sRunning iteration 1451/1500... Est. remaining: 19m 39sRunning iteration 1461/1500... Est. remaining: 15m 52sRunning iteration 1471/1500... Est. remaining: 11m 49sRunning iteration 1481/1500... Est. remaining: 7m 49sRunning iteration 1491/1500... Est. remaining: 3m 54s
Monte Carlo simulation completed in 589.2 minutes
Best normalized score: 0.81
best_combination: {'lookbacks': [36, 96, 97], 'score': np.float64(0.8107053908007984), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [36, 96, 97] (score: 0.8107)

Monte Carlo simulation completed in 589.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [36, 96, 97] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 91 selections (21.9%)
3. naz100_pi: 83 selections (20.0%)
4. naz100_pine: 72 selections (17.3%)
5. cash: 61 selections (14.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,588,512,240.11
Average Annualized Gain: 45.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Thu Aug 28 10:02:28 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $47,269,517
Annual Return: 27.65%
Sharpe Ratio: 0.97046
Sortino Ratio: 0.878
Max Drawdown: -63.4%
Avg Drawdown: -16.1%
Normalized Score: -3.477
Lookback periods: [69, 105, 272] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $222,213,219
Annual Return: 33.48%
Sharpe Ratio: 1.15766
Sortino Ratio: 1.073
Max Drawdown: -60.2%
Avg Drawdown: -14.1%
Normalized Score: -2.217
Lookback periods: [99, 128, 257] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $872,564,773
Annual Return: 38.85%
Sharpe Ratio: 1.30739
Sortino Ratio: 1.243
Max Drawdown: -59.0%
Avg Drawdown: -13.2%
Normalized Score: -1.143
Lookback periods: [123, 182, 298] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $614,262,021
Annual Return: 37.45%
Sharpe Ratio: 1.31048
Sortino Ratio: 1.214
Max Drawdown: -43.0%
Avg Drawdown: -10.5%
Normalized Score: -1.121
Lookback periods: [49, 51, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,287,878,790
Annual Return: 40.42%
Sharpe Ratio: 1.34377
Sortino Ratio: 1.298
Max Drawdown: -74.6%
Avg Drawdown: -13.4%
Normalized Score: -0.983
Lookback periods: [135, 170, 260] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,476,374,615
Annual Return: 40.98%
Sharpe Ratio: 1.37667
Sortino Ratio: 1.317
Max Drawdown: -60.5%
Avg Drawdown: -13.3%
Normalized Score: -0.720
Lookback periods: [108, 126, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,888,000,599
Annual Return: 43.73%
Sharpe Ratio: 1.46788
Sortino Ratio: 1.420
Max Drawdown: -65.6%
Avg Drawdown: -12.6%
Normalized Score: -0.167
Lookback periods: [108, 159, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 21m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,650,096,415
Annual Return: 44.71%
Sharpe Ratio: 1.44403
Sortino Ratio: 1.393
Max Drawdown: -61.1%
Avg Drawdown: -11.8%
Normalized Score: -0.089
Lookback periods: [189, 203, 228] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 20m 2sRunning iteration 51/1500... Est. remaining: 18m 24sRunning iteration 61/1500... Est. remaining: 17m 14sRunning iteration 71/1500... Est. remaining: 16m 22sRunning iteration 81/1500... Est. remaining: 15m 41sRunning iteration 91/1500... Est. remaining: 15m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,953,882,012
Annual Return: 43.83%
Sharpe Ratio: 1.46887
Sortino Ratio: 1.417
Max Drawdown: -57.3%
Avg Drawdown: -12.4%
Normalized Score: -0.082
Lookback periods: [107, 134, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 15m 1sbest_combination: {'lookbacks': [107, 134, 154], 'score': np.float64(-0.08202416776435269), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 37sRunning iteration 121/1500... Est. remaining: 14m 16sRunning iteration 131/1500... Est. remaining: 13m 57sRunning iteration 141/1500... Est. remaining: 13m 41sRunning iteration 151/1500... Est. remaining: 13m 26sRunning iteration 161/1500... Est. remaining: 13m 12sRunning iteration 171/1500... Est. remaining: 12m 59sRunning iteration 181/1500... Est. remaining: 12m 48sRunning iteration 191/1500... Est. remaining: 12m 37sRunning iteration 201/1500... Est. remaining: 12m 27sbest_combination: {'lookbacks': [107, 134, 154], 'score': np.float64(-0.08202416776435269), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 17sRunning iteration 221/1500... Est. remaining: 12m 7sRunning iteration 231/1500... Est. remaining: 11m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,958,761,749
Annual Return: 45.99%
Sharpe Ratio: 1.52966
Sortino Ratio: 1.486
Max Drawdown: -65.0%
Avg Drawdown: -11.7%
Normalized Score: 0.287
Lookback periods: [116, 159, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/1500... Est. remaining: 11m 56sRunning iteration 251/1500... Est. remaining: 11m 48sRunning iteration 261/1500... Est. remaining: 11m 40sRunning iteration 271/1500... Est. remaining: 11m 31sRunning iteration 281/1500... Est. remaining: 11m 23sRunning iteration 291/1500... Est. remaining: 11m 15sRunning iteration 301/1500... Est. remaining: 11m 7sbest_combination: {'lookbacks': [116, 159, 164], 'score': np.float64(0.28727739430986016), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 0sRunning iteration 321/1500... Est. remaining: 10m 53sRunning iteration 331/1500... Est. remaining: 10m 45sRunning iteration 341/1500... Est. remaining: 10m 38sRunning iteration 351/1500... Est. remaining: 10m 31sRunning iteration 361/1500... Est. remaining: 10m 24sRunning iteration 371/1500... Est. remaining: 10m 17sRunning iteration 381/1500... Est. remaining: 10m 11sRunning iteration 391/1500... Est. remaining: 10m 4sRunning iteration 401/1500... Est. remaining: 9m 58sbest_combination: {'lookbacks': [116, 159, 164], 'score': np.float64(0.28727739430986016), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 51sRunning iteration 421/1500... Est. remaining: 9m 45sRunning iteration 431/1500... Est. remaining: 9m 38sRunning iteration 441/1500... Est. remaining: 9m 32sRunning iteration 451/1500... Est. remaining: 9m 25sRunning iteration 461/1500... Est. remaining: 9m 18sRunning iteration 471/1500... Est. remaining: 9m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,325,283,994
Annual Return: 46.29%
Sharpe Ratio: 1.52348
Sortino Ratio: 1.488
Max Drawdown: -60.7%
Avg Drawdown: -12.3%
Normalized Score: 0.336
Lookback periods: [125, 153, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 9m 8sRunning iteration 491/1500... Est. remaining: 9m 2sRunning iteration 501/1500... Est. remaining: 8m 55sbest_combination: {'lookbacks': [125, 153, 154], 'score': np.float64(0.33575806801528835), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,228,898,326
Annual Return: 47.59%
Sharpe Ratio: 1.56496
Sortino Ratio: 1.526
Max Drawdown: -62.4%
Avg Drawdown: -11.0%
Normalized Score: 0.605
Lookback periods: [137, 158, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 46sRunning iteration 531/1500... Est. remaining: 8m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,144,320,284
Annual Return: 47.54%
Sharpe Ratio: 1.56080
Sortino Ratio: 1.525
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 0.612
Lookback periods: [130, 155, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 8m 36sRunning iteration 551/1500... Est. remaining: 8m 30sRunning iteration 561/1500... Est. remaining: 8m 24sRunning iteration 571/1500... Est. remaining: 8m 18sRunning iteration 581/1500... Est. remaining: 8m 12sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 1sbest_combination: {'lookbacks': [130, 155, 179], 'score': np.float64(0.6116399022014124), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 55sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 43sRunning iteration 641/1500... Est. remaining: 7m 38sRunning iteration 651/1500... Est. remaining: 7m 32sRunning iteration 661/1500... Est. remaining: 7m 26sRunning iteration 671/1500... Est. remaining: 7m 20sRunning iteration 681/1500... Est. remaining: 7m 15sRunning iteration 691/1500... Est. remaining: 7m 9sRunning iteration 701/1500... Est. remaining: 7m 3sbest_combination: {'lookbacks': [130, 155, 179], 'score': np.float64(0.6116399022014124), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 58sRunning iteration 721/1500... Est. remaining: 6m 52sRunning iteration 731/1500... Est. remaining: 6m 47sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 36sRunning iteration 761/1500... Est. remaining: 6m 30sRunning iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 14sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [130, 155, 179], 'score': np.float64(0.6116399022014124), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 46sRunning iteration 851/1500... Est. remaining: 5m 41sRunning iteration 861/1500... Est. remaining: 5m 35sRunning iteration 871/1500... Est. remaining: 5m 30sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 19sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [130, 155, 179], 'score': np.float64(0.6116399022014124), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,885,068,835
Annual Return: 48.47%
Sharpe Ratio: 1.59572
Sortino Ratio: 1.554
Max Drawdown: -58.5%
Avg Drawdown: -11.3%
Normalized Score: 0.814
Lookback periods: [137, 155, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 37sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 21sbest_combination: {'lookbacks': [137, 155, 178], 'score': np.float64(0.8138021116439493), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 4m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,114,063,483
Annual Return: 49.02%
Sharpe Ratio: 1.59165
Sortino Ratio: 1.557
Max Drawdown: -59.7%
Avg Drawdown: -11.5%
Normalized Score: 0.852
Lookback periods: [149, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [149, 155, 172], 'score': np.float64(0.8520825529725029), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [149, 155, 172], 'score': np.float64(0.8520825529725029), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [149, 155, 172], 'score': np.float64(0.8520825529725029), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,521,210,522
Annual Return: 49.19%
Sharpe Ratio: 1.61838
Sortino Ratio: 1.585
Max Drawdown: -58.5%
Avg Drawdown: -11.1%
Normalized Score: 0.976
Lookback periods: [136, 155, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [136, 155, 173], 'score': np.float64(0.9760261998650538), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 0.98
best_combination: {'lookbacks': [136, 155, 173], 'score': np.float64(0.9760261998650538), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 155, 173] (score: 0.9760)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 155, 173] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 115 selections (27.6%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,521,210,522.07
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Thu Aug 28 10:15:29 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $198,639,877
Annual Return: 33.05%
Sharpe Ratio: 1.14161
Sortino Ratio: 1.062
Max Drawdown: -67.2%
Avg Drawdown: -14.1%
Normalized Score: -2.732
Lookback periods: [86, 219, 238] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $526,941,032
Annual Return: 36.85%
Sharpe Ratio: 1.27126
Sortino Ratio: 1.192
Max Drawdown: -64.2%
Avg Drawdown: -13.5%
Normalized Score: -1.760
Lookback periods: [90, 150, 288] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,496,828,176
Annual Return: 46.43%
Sharpe Ratio: 1.52030
Sortino Ratio: 1.487
Max Drawdown: -62.5%
Avg Drawdown: -11.4%
Normalized Score: 0.411
Lookback periods: [158, 168, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 26sRunning iteration 21/1500... Est. remaining: 20m 22sRunning iteration 31/1500... Est. remaining: 17m 32sRunning iteration 41/1500... Est. remaining: 16m 9sRunning iteration 51/1500... Est. remaining: 15m 13sRunning iteration 61/1500... Est. remaining: 14m 34sRunning iteration 71/1500... Est. remaining: 14m 3sRunning iteration 81/1500... Est. remaining: 13m 40sRunning iteration 91/1500... Est. remaining: 13m 19sRunning iteration 101/1500... Est. remaining: 13m 2sbest_combination: {'lookbacks': [158, 168, 172], 'score': np.float64(0.4105396718244377), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 47sRunning iteration 121/1500... Est. remaining: 12m 33sRunning iteration 131/1500... Est. remaining: 12m 22sRunning iteration 141/1500... Est. remaining: 12m 11sRunning iteration 151/1500... Est. remaining: 12m 2sRunning iteration 161/1500... Est. remaining: 11m 53sRunning iteration 171/1500... Est. remaining: 11m 44sRunning iteration 181/1500... Est. remaining: 11m 36sRunning iteration 191/1500... Est. remaining: 11m 27sRunning iteration 201/1500... Est. remaining: 11m 20sbest_combination: {'lookbacks': [158, 168, 172], 'score': np.float64(0.4105396718244377), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 13sRunning iteration 221/1500... Est. remaining: 11m 6sRunning iteration 231/1500... Est. remaining: 10m 59sRunning iteration 241/1500... Est. remaining: 10m 52sRunning iteration 251/1500... Est. remaining: 10m 46sRunning iteration 261/1500... Est. remaining: 10m 40sRunning iteration 271/1500... Est. remaining: 10m 34sRunning iteration 281/1500... Est. remaining: 10m 28sRunning iteration 291/1500... Est. remaining: 10m 22sRunning iteration 301/1500... Est. remaining: 10m 16sbest_combination: {'lookbacks': [158, 168, 172], 'score': np.float64(0.4105396718244377), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 11sRunning iteration 321/1500... Est. remaining: 10m 5sRunning iteration 331/1500... Est. remaining: 9m 59sRunning iteration 341/1500... Est. remaining: 9m 53sRunning iteration 351/1500... Est. remaining: 9m 48sRunning iteration 361/1500... Est. remaining: 9m 42sRunning iteration 371/1500... Est. remaining: 9m 37sRunning iteration 381/1500... Est. remaining: 9m 31sRunning iteration 391/1500... Est. remaining: 9m 26sRunning iteration 401/1500... Est. remaining: 9m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,192,831,943
Annual Return: 46.93%
Sharpe Ratio: 1.52306
Sortino Ratio: 1.487
Max Drawdown: -62.7%
Avg Drawdown: -12.0%
Normalized Score: 0.419
Lookback periods: [154, 160, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [154, 160, 183], 'score': np.float64(0.4186645225494507), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 18sRunning iteration 421/1500... Est. remaining: 9m 13sRunning iteration 431/1500... Est. remaining: 9m 8sRunning iteration 441/1500... Est. remaining: 9m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,055,610,823
Annual Return: 47.48%
Sharpe Ratio: 1.55388
Sortino Ratio: 1.509
Max Drawdown: -59.1%
Avg Drawdown: -12.0%
Normalized Score: 0.613
Lookback periods: [146, 157, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 0sRunning iteration 461/1500... Est. remaining: 8m 54sRunning iteration 471/1500... Est. remaining: 8m 49sRunning iteration 481/1500... Est. remaining: 8m 43sRunning iteration 491/1500... Est. remaining: 8m 38sRunning iteration 501/1500... Est. remaining: 8m 33sbest_combination: {'lookbacks': [146, 157, 184], 'score': np.float64(0.6128987841148907), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 27sRunning iteration 521/1500... Est. remaining: 8m 22sRunning iteration 531/1500... Est. remaining: 8m 16sRunning iteration 541/1500... Est. remaining: 8m 10sRunning iteration 551/1500... Est. remaining: 8m 5sRunning iteration 561/1500... Est. remaining: 7m 59sRunning iteration 571/1500... Est. remaining: 7m 54sRunning iteration 581/1500... Est. remaining: 7m 48sRunning iteration 591/1500... Est. remaining: 7m 43sRunning iteration 601/1500... Est. remaining: 7m 37sbest_combination: {'lookbacks': [146, 157, 184], 'score': np.float64(0.6128987841148907), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 32sRunning iteration 621/1500... Est. remaining: 7m 26sRunning iteration 631/1500... Est. remaining: 7m 21sRunning iteration 641/1500... Est. remaining: 7m 16sRunning iteration 651/1500... Est. remaining: 7m 10sRunning iteration 661/1500... Est. remaining: 7m 5sRunning iteration 671/1500... Est. remaining: 7m 0sRunning iteration 681/1500... Est. remaining: 6m 54sRunning iteration 691/1500... Est. remaining: 6m 49sRunning iteration 701/1500... Est. remaining: 6m 44sbest_combination: {'lookbacks': [146, 157, 184], 'score': np.float64(0.6128987841148907), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 38sRunning iteration 721/1500... Est. remaining: 6m 33sRunning iteration 731/1500... Est. remaining: 6m 28sRunning iteration 741/1500... Est. remaining: 6m 23sRunning iteration 751/1500... Est. remaining: 6m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,968,271,725
Annual Return: 47.43%
Sharpe Ratio: 1.55439
Sortino Ratio: 1.520
Max Drawdown: -59.7%
Avg Drawdown: -11.4%
Normalized Score: 0.673
Lookback periods: [150, 158, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 6m 13sRunning iteration 771/1500... Est. remaining: 6m 8sRunning iteration 781/1500... Est. remaining: 6m 3sRunning iteration 791/1500... Est. remaining: 5m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,147,361,865
Annual Return: 48.10%
Sharpe Ratio: 1.56971
Sortino Ratio: 1.537
Max Drawdown: -56.9%
Avg Drawdown: -10.9%
Normalized Score: 0.837
Lookback periods: [156, 161, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 801/1500... Est. remaining: 5m 54sbest_combination: {'lookbacks': [156, 161, 167], 'score': np.float64(0.837037952773388), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 48sRunning iteration 821/1500... Est. remaining: 5m 43sRunning iteration 831/1500... Est. remaining: 5m 38sRunning iteration 841/1500... Est. remaining: 5m 33sRunning iteration 851/1500... Est. remaining: 10m 59sRunning iteration 861/1500... Est. remaining: 10m 45sRunning iteration 871/1500... Est. remaining: 11m 29sRunning iteration 881/1500... Est. remaining: 11m 13sRunning iteration 891/1500... Est. remaining: 18m 7sRunning iteration 901/1500... Est. remaining: 17m 57sbest_combination: {'lookbacks': [156, 161, 167], 'score': np.float64(0.837037952773388), 'visits': 1}
Running iteration 911/1500... Est. remaining: 17m 31sRunning iteration 921/1500... Est. remaining: 23m 10sRunning iteration 931/1500... Est. remaining: 22m 34sRunning iteration 941/1500... Est. remaining: 32m 3sRunning iteration 951/1500... Est. remaining: 31m 43sRunning iteration 961/1500... Est. remaining: 30m 52sRunning iteration 971/1500... Est. remaining: 31m 14sRunning iteration 981/1500... Est. remaining: 31m 13sRunning iteration 991/1500... Est. remaining: 30m 21sRunning iteration 1001/1500... Est. remaining: 30m 46sbest_combination: {'lookbacks': [156, 161, 167], 'score': np.float64(0.837037952773388), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 31m 26sRunning iteration 1021/1500... Est. remaining: 30m 32sRunning iteration 1031/1500... Est. remaining: 29m 56sRunning iteration 1041/1500... Est. remaining: 38m 33sRunning iteration 1051/1500... Est. remaining: 37m 23sRunning iteration 1061/1500... Est. remaining: 36m 24sRunning iteration 1071/1500... Est. remaining: 35m 21sRunning iteration 1081/1500... Est. remaining: 34m 15sRunning iteration 1091/1500... Est. remaining: 33m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,860,492,530
Annual Return: 47.94%
Sharpe Ratio: 1.57578
Sortino Ratio: 1.539
Max Drawdown: -55.0%
Avg Drawdown: -11.1%
Normalized Score: 0.862
Lookback periods: [159, 160, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1101/1500... Est. remaining: 39m 2sbest_combination: {'lookbacks': [159, 160, 168], 'score': np.float64(0.8621346704321686), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 37m 45sRunning iteration 1121/1500... Est. remaining: 40m 1sRunning iteration 1131/1500... Est. remaining: 38m 39sRunning iteration 1141/1500... Est. remaining: 38m 3sRunning iteration 1151/1500... Est. remaining: 38m 13sRunning iteration 1161/1500... Est. remaining: 36m 49sRunning iteration 1171/1500... Est. remaining: 36m 36sRunning iteration 1181/1500... Est. remaining: 35m 15sRunning iteration 1191/1500... Est. remaining: 33m 53sRunning iteration 1201/1500... Est. remaining: 35m 55sbest_combination: {'lookbacks': [159, 160, 168], 'score': np.float64(0.8621346704321686), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 34m 27sRunning iteration 1221/1500... Est. remaining: 35m 10sRunning iteration 1231/1500... Est. remaining: 33m 40sRunning iteration 1241/1500... Est. remaining: 32m 10sRunning iteration 1251/1500... Est. remaining: 30m 42sRunning iteration 1261/1500... Est. remaining: 29m 15sRunning iteration 1271/1500... Est. remaining: 27m 50sRunning iteration 1281/1500... Est. remaining: 26m 25sRunning iteration 1291/1500... Est. remaining: 25m 2sRunning iteration 1301/1500... Est. remaining: 23m 41sbest_combination: {'lookbacks': [159, 160, 168], 'score': np.float64(0.8621346704321686), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 22m 20sRunning iteration 1321/1500... Est. remaining: 21m 0sRunning iteration 1331/1500... Est. remaining: 19m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,106,068,908
Annual Return: 49.80%
Sharpe Ratio: 1.61256
Sortino Ratio: 1.577
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 1.142
Lookback periods: [154, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1341/1500... Est. remaining: 18m 25sRunning iteration 1351/1500... Est. remaining: 17m 9sRunning iteration 1361/1500... Est. remaining: 15m 53sRunning iteration 1371/1500... Est. remaining: 14m 39sRunning iteration 1381/1500... Est. remaining: 13m 26sRunning iteration 1391/1500... Est. remaining: 12m 14sRunning iteration 1401/1500... Est. remaining: 11m 3sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.141552682041523), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 9m 53sRunning iteration 1421/1500... Est. remaining: 8m 43sRunning iteration 1431/1500... Est. remaining: 7m 35sRunning iteration 1441/1500... Est. remaining: 6m 27sRunning iteration 1451/1500... Est. remaining: 5m 21sRunning iteration 1461/1500... Est. remaining: 4m 15sRunning iteration 1471/1500... Est. remaining: 3m 10sRunning iteration 1481/1500... Est. remaining: 2m 6sRunning iteration 1491/1500... Est. remaining: 1m 2s
Monte Carlo simulation completed in 155.6 minutes
Best normalized score: 1.14
best_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.141552682041523), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [154, 155, 156] (score: 1.1416)

Monte Carlo simulation completed in 155.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 155, 156] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,106,068,907.74
Average Annualized Gain: 49.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Thu Aug 28 12:51:13 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $616,888,818
Annual Return: 37.47%
Sharpe Ratio: 1.26293
Sortino Ratio: 1.186
Max Drawdown: -62.8%
Avg Drawdown: -14.7%
Normalized Score: -1.166
Lookback periods: [104, 124, 202] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,045,995,452
Annual Return: 39.58%
Sharpe Ratio: 1.32268
Sortino Ratio: 1.281
Max Drawdown: -63.2%
Avg Drawdown: -12.8%
Normalized Score: -0.757
Lookback periods: [181, 271, 275] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,538,503,415
Annual Return: 41.14%
Sharpe Ratio: 1.40099
Sortino Ratio: 1.311
Max Drawdown: -56.4%
Avg Drawdown: -11.8%
Normalized Score: -0.420
Lookback periods: [58, 125, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,574,061,520
Annual Return: 43.26%
Sharpe Ratio: 1.42207
Sortino Ratio: 1.386
Max Drawdown: -65.6%
Avg Drawdown: -12.7%
Normalized Score: -0.244
Lookback periods: [173, 244, 252] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,838,519,547
Annual Return: 43.66%
Sharpe Ratio: 1.42869
Sortino Ratio: 1.382
Max Drawdown: -60.0%
Avg Drawdown: -12.7%
Normalized Score: -0.177
Lookback periods: [140, 188, 214] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 17sRunning iteration 31/1500... Est. remaining: 19m 32sRunning iteration 41/1500... Est. remaining: 17m 38sRunning iteration 51/1500... Est. remaining: 16m 26sRunning iteration 61/1500... Est. remaining: 15m 36sRunning iteration 71/1500... Est. remaining: 14m 57sRunning iteration 81/1500... Est. remaining: 14m 28sRunning iteration 91/1500... Est. remaining: 14m 4sRunning iteration 101/1500... Est. remaining: 13m 44sbest_combination: {'lookbacks': [140, 188, 214], 'score': np.float64(-0.17676961685176215), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,853,293,064
Annual Return: 43.68%
Sharpe Ratio: 1.44257
Sortino Ratio: 1.403
Max Drawdown: -63.8%
Avg Drawdown: -12.9%
Normalized Score: -0.160
Lookback periods: [132, 169, 207] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 13m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,401,529,276
Annual Return: 44.41%
Sharpe Ratio: 1.44985
Sortino Ratio: 1.415
Max Drawdown: -65.6%
Avg Drawdown: -12.8%
Normalized Score: -0.093
Lookback periods: [145, 181, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 40sRunning iteration 131/1500... Est. remaining: 13m 25sRunning iteration 141/1500... Est. remaining: 13m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,422,600,250
Annual Return: 43.01%
Sharpe Ratio: 1.48349
Sortino Ratio: 1.404
Max Drawdown: -52.3%
Avg Drawdown: -11.5%
Normalized Score: -0.021
Lookback periods: [88, 90, 126] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 13m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,241,180,992
Annual Return: 44.21%
Sharpe Ratio: 1.47027
Sortino Ratio: 1.426
Max Drawdown: -58.7%
Avg Drawdown: -12.2%
Normalized Score: 0.003
Lookback periods: [106, 130, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 13m 7sRunning iteration 171/1500... Est. remaining: 12m 55sRunning iteration 181/1500... Est. remaining: 12m 43sRunning iteration 191/1500... Est. remaining: 12m 32sRunning iteration 201/1500... Est. remaining: 12m 21sbest_combination: {'lookbacks': [106, 130, 147], 'score': np.float64(0.00286250731358077), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 11sRunning iteration 221/1500... Est. remaining: 12m 1sRunning iteration 231/1500... Est. remaining: 11m 52sRunning iteration 241/1500... Est. remaining: 11m 42sRunning iteration 251/1500... Est. remaining: 11m 34sRunning iteration 261/1500... Est. remaining: 11m 25sRunning iteration 271/1500... Est. remaining: 11m 16sRunning iteration 281/1500... Est. remaining: 11m 8sRunning iteration 291/1500... Est. remaining: 11m 0sRunning iteration 301/1500... Est. remaining: 10m 52sbest_combination: {'lookbacks': [106, 130, 147], 'score': np.float64(0.00286250731358077), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 45sRunning iteration 321/1500... Est. remaining: 10m 38sRunning iteration 331/1500... Est. remaining: 10m 31sRunning iteration 341/1500... Est. remaining: 10m 23sRunning iteration 351/1500... Est. remaining: 10m 16sRunning iteration 361/1500... Est. remaining: 10m 9sRunning iteration 371/1500... Est. remaining: 10m 3sRunning iteration 381/1500... Est. remaining: 9m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,361,701,251
Annual Return: 44.36%
Sharpe Ratio: 1.49264
Sortino Ratio: 1.447
Max Drawdown: -58.7%
Avg Drawdown: -12.4%
Normalized Score: 0.065
Lookback periods: [107, 134, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 9m 53sRunning iteration 401/1500... Est. remaining: 9m 47sbest_combination: {'lookbacks': [107, 134, 152], 'score': np.float64(0.06462327819843616), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 41sRunning iteration 421/1500... Est. remaining: 9m 35sRunning iteration 431/1500... Est. remaining: 9m 28sRunning iteration 441/1500... Est. remaining: 9m 23sRunning iteration 451/1500... Est. remaining: 9m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,248,063,360
Annual Return: 46.23%
Sharpe Ratio: 1.49520
Sortino Ratio: 1.462
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.247
Lookback periods: [176, 205, 208] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 9m 13sRunning iteration 471/1500... Est. remaining: 9m 7sRunning iteration 481/1500... Est. remaining: 9m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,029,145,169
Annual Return: 46.82%
Sharpe Ratio: 1.53623
Sortino Ratio: 1.501
Max Drawdown: -57.2%
Avg Drawdown: -12.0%
Normalized Score: 0.384
Lookback periods: [138, 140, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 8m 57sRunning iteration 501/1500... Est. remaining: 8m 51sbest_combination: {'lookbacks': [138, 140, 171], 'score': np.float64(0.3843863188639797), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 45sRunning iteration 521/1500... Est. remaining: 8m 39sRunning iteration 531/1500... Est. remaining: 8m 33sRunning iteration 541/1500... Est. remaining: 8m 27sRunning iteration 551/1500... Est. remaining: 8m 21sRunning iteration 561/1500... Est. remaining: 8m 15sRunning iteration 571/1500... Est. remaining: 8m 9sRunning iteration 581/1500... Est. remaining: 8m 3sRunning iteration 591/1500... Est. remaining: 7m 57sRunning iteration 601/1500... Est. remaining: 7m 51sbest_combination: {'lookbacks': [138, 140, 171], 'score': np.float64(0.3843863188639797), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 46sRunning iteration 621/1500... Est. remaining: 7m 40sRunning iteration 631/1500... Est. remaining: 7m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,028,006,628
Annual Return: 46.82%
Sharpe Ratio: 1.54777
Sortino Ratio: 1.510
Max Drawdown: -58.5%
Avg Drawdown: -12.1%
Normalized Score: 0.401
Lookback periods: [136, 153, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 7m 31sRunning iteration 651/1500... Est. remaining: 7m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,854,346,451
Annual Return: 48.91%
Sharpe Ratio: 1.61640
Sortino Ratio: 1.575
Max Drawdown: -57.2%
Avg Drawdown: -10.5%
Normalized Score: 0.785
Lookback periods: [135, 157, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 21sRunning iteration 671/1500... Est. remaining: 7m 16sRunning iteration 681/1500... Est. remaining: 7m 10sRunning iteration 691/1500... Est. remaining: 7m 5sRunning iteration 701/1500... Est. remaining: 6m 59sbest_combination: {'lookbacks': [135, 157, 173], 'score': np.float64(0.7846534381479718), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,585,481,996
Annual Return: 49.22%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.572
Max Drawdown: -57.2%
Avg Drawdown: -10.7%
Normalized Score: 0.794
Lookback periods: [138, 157, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 711/1500... Est. remaining: 6m 55sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 44sRunning iteration 741/1500... Est. remaining: 6m 38sRunning iteration 751/1500... Est. remaining: 6m 33sRunning iteration 761/1500... Est. remaining: 6m 27sRunning iteration 771/1500... Est. remaining: 6m 22sRunning iteration 781/1500... Est. remaining: 6m 16sRunning iteration 791/1500... Est. remaining: 6m 10sRunning iteration 801/1500... Est. remaining: 6m 5sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(0.7942901522096204), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 59sRunning iteration 821/1500... Est. remaining: 5m 54sRunning iteration 831/1500... Est. remaining: 5m 48sRunning iteration 841/1500... Est. remaining: 5m 43sRunning iteration 851/1500... Est. remaining: 5m 37sRunning iteration 861/1500... Est. remaining: 5m 32sRunning iteration 871/1500... Est. remaining: 5m 26sRunning iteration 881/1500... Est. remaining: 5m 21sRunning iteration 891/1500... Est. remaining: 5m 16sRunning iteration 901/1500... Est. remaining: 5m 10sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(0.7942901522096204), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 5sRunning iteration 921/1500... Est. remaining: 5m 0sRunning iteration 931/1500... Est. remaining: 4m 54sRunning iteration 941/1500... Est. remaining: 4m 49sRunning iteration 951/1500... Est. remaining: 4m 44sRunning iteration 961/1500... Est. remaining: 4m 38sRunning iteration 971/1500... Est. remaining: 4m 33sRunning iteration 981/1500... Est. remaining: 4m 28sRunning iteration 991/1500... Est. remaining: 4m 22sRunning iteration 1001/1500... Est. remaining: 4m 17sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(0.7942901522096204), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 12sRunning iteration 1021/1500... Est. remaining: 4m 6sRunning iteration 1031/1500... Est. remaining: 4m 1sRunning iteration 1041/1500... Est. remaining: 3m 56sRunning iteration 1051/1500... Est. remaining: 3m 51sRunning iteration 1061/1500... Est. remaining: 3m 46sRunning iteration 1071/1500... Est. remaining: 3m 40sRunning iteration 1081/1500... Est. remaining: 3m 35sRunning iteration 1091/1500... Est. remaining: 3m 30sRunning iteration 1101/1500... Est. remaining: 3m 25sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(0.7942901522096204), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 19sRunning iteration 1121/1500... Est. remaining: 3m 14sRunning iteration 1131/1500... Est. remaining: 3m 9sRunning iteration 1141/1500... Est. remaining: 3m 4sRunning iteration 1151/1500... Est. remaining: 2m 59sRunning iteration 1161/1500... Est. remaining: 2m 53sRunning iteration 1171/1500... Est. remaining: 2m 48sRunning iteration 1181/1500... Est. remaining: 2m 43sRunning iteration 1191/1500... Est. remaining: 2m 38sRunning iteration 1201/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(0.7942901522096204), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 28sRunning iteration 1221/1500... Est. remaining: 2m 22sRunning iteration 1231/1500... Est. remaining: 2m 17sRunning iteration 1241/1500... Est. remaining: 2m 12sRunning iteration 1251/1500... Est. remaining: 2m 7sRunning iteration 1261/1500... Est. remaining: 2m 2sRunning iteration 1271/1500... Est. remaining: 1m 57sRunning iteration 1281/1500... Est. remaining: 1m 52sRunning iteration 1291/1500... Est. remaining: 1m 46sRunning iteration 1301/1500... Est. remaining: 1m 41sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(0.7942901522096204), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 36sRunning iteration 1321/1500... Est. remaining: 1m 31sRunning iteration 1331/1500... Est. remaining: 1m 26sRunning iteration 1341/1500... Est. remaining: 1m 21sRunning iteration 1351/1500... Est. remaining: 1m 16sRunning iteration 1361/1500... Est. remaining: 1m 11sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(0.7942901522096204), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 45sRunning iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.7 minutes
Best normalized score: 0.79
best_combination: {'lookbacks': [138, 157, 171], 'score': np.float64(0.7942901522096204), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [138, 157, 171] (score: 0.7943)

Monte Carlo simulation completed in 12.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [138, 157, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,585,481,995.89
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Thu Aug 28 13:04:02 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $670,484,224
Annual Return: 37.80%
Sharpe Ratio: 1.33583
Sortino Ratio: 1.242
Max Drawdown: -52.3%
Avg Drawdown: -10.4%
Normalized Score: -0.388
Lookback periods: [42, 95, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,639,605,223
Annual Return: 41.40%
Sharpe Ratio: 1.38525
Sortino Ratio: 1.324
Max Drawdown: -64.3%
Avg Drawdown: -12.9%
Normalized Score: -0.243
Lookback periods: [149, 245, 281] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,076,745,109
Annual Return: 39.70%
Sharpe Ratio: 1.37488
Sortino Ratio: 1.289
Max Drawdown: -52.3%
Avg Drawdown: -11.1%
Normalized Score: -0.215
Lookback periods: [84, 88, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 19m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,976,990,819
Annual Return: 42.17%
Sharpe Ratio: 1.43010
Sortino Ratio: 1.344
Max Drawdown: -55.0%
Avg Drawdown: -11.4%
Normalized Score: 0.004
Lookback periods: [48, 109, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,012,840,888
Annual Return: 43.91%
Sharpe Ratio: 1.42924
Sortino Ratio: 1.396
Max Drawdown: -59.0%
Avg Drawdown: -12.4%
Normalized Score: 0.073
Lookback periods: [149, 166, 226] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 18m 56sRunning iteration 41/1500... Est. remaining: 17m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,558,394,967
Annual Return: 41.20%
Sharpe Ratio: 1.47473
Sortino Ratio: 1.377
Max Drawdown: -53.3%
Avg Drawdown: -11.3%
Normalized Score: 0.089
Lookback periods: [45, 46, 66] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 16m 28sRunning iteration 61/1500... Est. remaining: 15m 33sRunning iteration 71/1500... Est. remaining: 14m 53sRunning iteration 81/1500... Est. remaining: 14m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,006,977,664
Annual Return: 47.46%
Sharpe Ratio: 1.53747
Sortino Ratio: 1.491
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.516
Lookback periods: [178, 194, 202] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 14sRunning iteration 101/1500... Est. remaining: 13m 51sbest_combination: {'lookbacks': [178, 194, 202], 'score': np.float64(0.516460020711681), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 31sRunning iteration 121/1500... Est. remaining: 13m 14sRunning iteration 131/1500... Est. remaining: 13m 0sRunning iteration 141/1500... Est. remaining: 12m 48sRunning iteration 151/1500... Est. remaining: 12m 37sRunning iteration 161/1500... Est. remaining: 12m 26sRunning iteration 171/1500... Est. remaining: 12m 16sRunning iteration 181/1500... Est. remaining: 12m 6sRunning iteration 191/1500... Est. remaining: 11m 56sRunning iteration 201/1500... Est. remaining: 11m 47sbest_combination: {'lookbacks': [178, 194, 202], 'score': np.float64(0.516460020711681), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 38sRunning iteration 221/1500... Est. remaining: 11m 29sRunning iteration 231/1500... Est. remaining: 11m 21sRunning iteration 241/1500... Est. remaining: 11m 13sRunning iteration 251/1500... Est. remaining: 11m 5sRunning iteration 261/1500... Est. remaining: 10m 58sRunning iteration 271/1500... Est. remaining: 10m 50sRunning iteration 281/1500... Est. remaining: 10m 43sRunning iteration 291/1500... Est. remaining: 10m 37sRunning iteration 301/1500... Est. remaining: 10m 30sbest_combination: {'lookbacks': [178, 194, 202], 'score': np.float64(0.516460020711681), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 24sRunning iteration 321/1500... Est. remaining: 10m 17sRunning iteration 331/1500... Est. remaining: 10m 11sRunning iteration 341/1500... Est. remaining: 10m 5sRunning iteration 351/1500... Est. remaining: 9m 59sRunning iteration 361/1500... Est. remaining: 9m 53sRunning iteration 371/1500... Est. remaining: 9m 47sRunning iteration 381/1500... Est. remaining: 9m 41sRunning iteration 391/1500... Est. remaining: 9m 34sRunning iteration 401/1500... Est. remaining: 9m 28sbest_combination: {'lookbacks': [178, 194, 202], 'score': np.float64(0.516460020711681), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,203,167,091
Annual Return: 47.57%
Sharpe Ratio: 1.53733
Sortino Ratio: 1.491
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.537
Lookback periods: [184, 191, 206] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 19sRunning iteration 431/1500... Est. remaining: 9m 13sRunning iteration 441/1500... Est. remaining: 9m 8sRunning iteration 451/1500... Est. remaining: 9m 2sRunning iteration 461/1500... Est. remaining: 8m 56sRunning iteration 471/1500... Est. remaining: 8m 50sRunning iteration 481/1500... Est. remaining: 8m 45sRunning iteration 491/1500... Est. remaining: 8m 39sRunning iteration 501/1500... Est. remaining: 8m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,247,875,493
Annual Return: 46.97%
Sharpe Ratio: 1.54704
Sortino Ratio: 1.516
Max Drawdown: -58.1%
Avg Drawdown: -11.8%
Normalized Score: 0.543
Lookback periods: [142, 152, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [142, 152, 179], 'score': np.float64(0.5432476841177749), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 30sRunning iteration 521/1500... Est. remaining: 8m 25sRunning iteration 531/1500... Est. remaining: 8m 19sRunning iteration 541/1500... Est. remaining: 8m 14sRunning iteration 551/1500... Est. remaining: 8m 8sRunning iteration 561/1500... Est. remaining: 8m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,001,536,383
Annual Return: 48.02%
Sharpe Ratio: 1.54790
Sortino Ratio: 1.504
Max Drawdown: -59.5%
Avg Drawdown: -11.8%
Normalized Score: 0.560
Lookback periods: [181, 193, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 7m 59sRunning iteration 581/1500... Est. remaining: 7m 54sRunning iteration 591/1500... Est. remaining: 7m 48sRunning iteration 601/1500... Est. remaining: 7m 43sbest_combination: {'lookbacks': [181, 193, 198], 'score': np.float64(0.5596083567204441), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,476,062,947
Annual Return: 48.27%
Sharpe Ratio: 1.55858
Sortino Ratio: 1.515
Max Drawdown: -59.6%
Avg Drawdown: -11.4%
Normalized Score: 0.611
Lookback periods: [184, 188, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 7m 34sRunning iteration 631/1500... Est. remaining: 7m 28sRunning iteration 641/1500... Est. remaining: 8m 42sRunning iteration 651/1500... Est. remaining: 8m 34sRunning iteration 661/1500... Est. remaining: 10m 5sRunning iteration 671/1500... Est. remaining: 9m 55sRunning iteration 681/1500... Est. remaining: 24m 5sRunning iteration 691/1500... Est. remaining: 24m 41sRunning iteration 701/1500... Est. remaining: 24m 8sbest_combination: {'lookbacks': [184, 188, 190], 'score': np.float64(0.6106471263983437), 'visits': 1}
Running iteration 711/1500... Est. remaining: 25m 37sRunning iteration 721/1500... Est. remaining: 25m 2sRunning iteration 731/1500... Est. remaining: 28m 37sRunning iteration 741/1500... Est. remaining: 35m 18sRunning iteration 751/1500... Est. remaining: 42m 15sRunning iteration 761/1500... Est. remaining: 41m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,504,899,998
Annual Return: 49.19%
Sharpe Ratio: 1.58270
Sortino Ratio: 1.555
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.742
Lookback periods: [176, 184, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 771/1500... Est. remaining: 41m 57sRunning iteration 781/1500... Est. remaining: 40m 55sRunning iteration 791/1500... Est. remaining: 48m 15sRunning iteration 801/1500... Est. remaining: 49m 11sbest_combination: {'lookbacks': [176, 184, 197], 'score': np.float64(0.7417004376664764), 'visits': 1}
Running iteration 811/1500... Est. remaining: 50m 15sRunning iteration 821/1500... Est. remaining: 48m 59sRunning iteration 831/1500... Est. remaining: 57m 5sRunning iteration 841/1500... Est. remaining: 56m 40sRunning iteration 851/1500... Est. remaining: 55m 13sRunning iteration 861/1500... Est. remaining: 56m 1sRunning iteration 871/1500... Est. remaining: 55m 8sRunning iteration 881/1500... Est. remaining: 53m 42sRunning iteration 891/1500... Est. remaining: 61m 21sRunning iteration 901/1500... Est. remaining: 65m 14sbest_combination: {'lookbacks': [176, 184, 197], 'score': np.float64(0.7417004376664764), 'visits': 1}
Running iteration 911/1500... Est. remaining: 63m 29sRunning iteration 921/1500... Est. remaining: 62m 41sRunning iteration 931/1500... Est. remaining: 61m 57sRunning iteration 941/1500... Est. remaining: 66m 22sRunning iteration 951/1500... Est. remaining: 64m 33sRunning iteration 961/1500... Est. remaining: 62m 45sRunning iteration 971/1500... Est. remaining: 61m 0sRunning iteration 981/1500... Est. remaining: 59m 17sRunning iteration 991/1500... Est. remaining: 57m 36sRunning iteration 1001/1500... Est. remaining: 55m 57sbest_combination: {'lookbacks': [176, 184, 197], 'score': np.float64(0.7417004376664764), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 54m 20sRunning iteration 1021/1500... Est. remaining: 52m 44sRunning iteration 1031/1500... Est. remaining: 51m 10sRunning iteration 1041/1500... Est. remaining: 49m 38sRunning iteration 1051/1500... Est. remaining: 48m 8sRunning iteration 1061/1500... Est. remaining: 46m 39sRunning iteration 1071/1500... Est. remaining: 45m 12sRunning iteration 1081/1500... Est. remaining: 43m 46sRunning iteration 1091/1500... Est. remaining: 42m 22sRunning iteration 1101/1500... Est. remaining: 40m 59sbest_combination: {'lookbacks': [176, 184, 197], 'score': np.float64(0.7417004376664764), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 39m 38sRunning iteration 1121/1500... Est. remaining: 38m 18sRunning iteration 1131/1500... Est. remaining: 36m 59sRunning iteration 1141/1500... Est. remaining: 35m 42sRunning iteration 1151/1500... Est. remaining: 34m 26sRunning iteration 1161/1500... Est. remaining: 33m 11sRunning iteration 1171/1500... Est. remaining: 31m 57sRunning iteration 1181/1500... Est. remaining: 30m 44sRunning iteration 1191/1500... Est. remaining: 29m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,785,742,608
Annual Return: 49.68%
Sharpe Ratio: 1.60840
Sortino Ratio: 1.567
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.819
Lookback periods: [178, 189, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 28m 23sbest_combination: {'lookbacks': [178, 189, 191], 'score': np.float64(0.8193628402055187), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 27m 14sRunning iteration 1221/1500... Est. remaining: 26m 6sRunning iteration 1231/1500... Est. remaining: 24m 59sRunning iteration 1241/1500... Est. remaining: 23m 52sRunning iteration 1251/1500... Est. remaining: 22m 47sRunning iteration 1261/1500... Est. remaining: 21m 43sRunning iteration 1271/1500... Est. remaining: 20m 40sRunning iteration 1281/1500... Est. remaining: 19m 38sRunning iteration 1291/1500... Est. remaining: 18m 36sRunning iteration 1301/1500... Est. remaining: 17m 36sbest_combination: {'lookbacks': [178, 189, 191], 'score': np.float64(0.8193628402055187), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 16m 36sRunning iteration 1321/1500... Est. remaining: 15m 37sRunning iteration 1331/1500... Est. remaining: 14m 39sRunning iteration 1341/1500... Est. remaining: 13m 42sRunning iteration 1351/1500... Est. remaining: 12m 45sRunning iteration 1361/1500... Est. remaining: 11m 49sRunning iteration 1371/1500... Est. remaining: 10m 54sRunning iteration 1381/1500... Est. remaining: 10m 0sRunning iteration 1391/1500... Est. remaining: 9m 6sRunning iteration 1401/1500... Est. remaining: 8m 13sbest_combination: {'lookbacks': [178, 189, 191], 'score': np.float64(0.8193628402055187), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 7m 21sRunning iteration 1421/1500... Est. remaining: 6m 30sRunning iteration 1431/1500... Est. remaining: 5m 39sRunning iteration 1441/1500... Est. remaining: 4m 48sRunning iteration 1451/1500... Est. remaining: 3m 59sRunning iteration 1461/1500... Est. remaining: 3m 10sRunning iteration 1471/1500... Est. remaining: 2m 21sRunning iteration 1481/1500... Est. remaining: 1m 33sRunning iteration 1491/1500... Est. remaining: 0m 46s
Monte Carlo simulation completed in 116.1 minutes
Best normalized score: 0.82
best_combination: {'lookbacks': [178, 189, 191], 'score': np.float64(0.8193628402055187), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [178, 189, 191] (score: 0.8194)

Monte Carlo simulation completed in 116.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [178, 189, 191] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 122 selections (29.3%)
2. sp500_hma: 102 selections (24.5%)
3. naz100_pine: 83 selections (20.0%)
4. naz100_pi: 68 selections (16.3%)
5. cash: 41 selections (9.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,785,742,608.22
Average Annualized Gain: 49.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Thu Aug 28 15:00:14 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $414,830,201
Annual Return: 35.91%
Sharpe Ratio: 1.21796
Sortino Ratio: 1.158
Max Drawdown: -66.6%
Avg Drawdown: -13.5%
Normalized Score: -1.940
Lookback periods: [122, 247, 282] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,551,923,403
Annual Return: 41.18%
Sharpe Ratio: 1.35519
Sortino Ratio: 1.307
Max Drawdown: -64.1%
Avg Drawdown: -12.6%
Normalized Score: -0.544
Lookback periods: [206, 233, 255] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,671,918,193
Annual Return: 43.41%
Sharpe Ratio: 1.42925
Sortino Ratio: 1.380
Max Drawdown: -66.7%
Avg Drawdown: -12.7%
Normalized Score: 0.005
Lookback periods: [179, 246, 296] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,880,721,159
Annual Return: 46.71%
Sharpe Ratio: 1.50383
Sortino Ratio: 1.478
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 1.061
Lookback periods: [172, 184, 202] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 38sRunning iteration 31/1500... Est. remaining: 18m 12sRunning iteration 41/1500... Est. remaining: 16m 30sRunning iteration 51/1500... Est. remaining: 15m 25sRunning iteration 61/1500... Est. remaining: 14m 42sRunning iteration 71/1500... Est. remaining: 14m 8sRunning iteration 81/1500... Est. remaining: 13m 44sRunning iteration 91/1500... Est. remaining: 13m 23sRunning iteration 101/1500... Est. remaining: 13m 5sbest_combination: {'lookbacks': [172, 184, 202], 'score': np.float64(1.0611775308365465), 'visits': 1}
Running iteration 111/1500... Est. remaining: 12m 50sRunning iteration 121/1500... Est. remaining: 12m 36sRunning iteration 131/1500... Est. remaining: 12m 24sRunning iteration 141/1500... Est. remaining: 12m 12sRunning iteration 151/1500... Est. remaining: 12m 2sRunning iteration 161/1500... Est. remaining: 11m 51sRunning iteration 171/1500... Est. remaining: 11m 43sRunning iteration 181/1500... Est. remaining: 11m 34sRunning iteration 191/1500... Est. remaining: 11m 26sRunning iteration 201/1500... Est. remaining: 11m 18sbest_combination: {'lookbacks': [172, 184, 202], 'score': np.float64(1.0611775308365465), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 11sRunning iteration 221/1500... Est. remaining: 11m 4sRunning iteration 231/1500... Est. remaining: 10m 57sRunning iteration 241/1500... Est. remaining: 10m 50sRunning iteration 251/1500... Est. remaining: 10m 44sRunning iteration 261/1500... Est. remaining: 10m 38sRunning iteration 271/1500... Est. remaining: 10m 32sRunning iteration 281/1500... Est. remaining: 10m 26sRunning iteration 291/1500... Est. remaining: 10m 20sRunning iteration 301/1500... Est. remaining: 10m 14sbest_combination: {'lookbacks': [172, 184, 202], 'score': np.float64(1.0611775308365465), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 7sRunning iteration 321/1500... Est. remaining: 10m 1sRunning iteration 331/1500... Est. remaining: 9m 55sRunning iteration 341/1500... Est. remaining: 9m 49sRunning iteration 351/1500... Est. remaining: 9m 43sRunning iteration 361/1500... Est. remaining: 9m 37sRunning iteration 371/1500... Est. remaining: 9m 31sRunning iteration 381/1500... Est. remaining: 9m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,940,278,347
Annual Return: 46.75%
Sharpe Ratio: 1.51612
Sortino Ratio: 1.479
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 1.103
Lookback periods: [174, 184, 208] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 9m 23sRunning iteration 401/1500... Est. remaining: 9m 17sbest_combination: {'lookbacks': [174, 184, 208], 'score': np.float64(1.1027781274042021), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,871,435,975
Annual Return: 47.37%
Sharpe Ratio: 1.53992
Sortino Ratio: 1.507
Max Drawdown: -62.5%
Avg Drawdown: -12.6%
Normalized Score: 1.185
Lookback periods: [149, 153, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,664,831,048
Annual Return: 47.84%
Sharpe Ratio: 1.55177
Sortino Ratio: 1.521
Max Drawdown: -62.5%
Avg Drawdown: -12.5%
Normalized Score: 1.306
Lookback periods: [152, 153, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/1500... Est. remaining: 9m 7sRunning iteration 441/1500... Est. remaining: 9m 1sRunning iteration 451/1500... Est. remaining: 8m 56sRunning iteration 461/1500... Est. remaining: 8m 50sRunning iteration 471/1500... Est. remaining: 8m 45sRunning iteration 481/1500... Est. remaining: 8m 39sRunning iteration 491/1500... Est. remaining: 8m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,767,652,821
Annual Return: 47.89%
Sharpe Ratio: 1.56519
Sortino Ratio: 1.536
Max Drawdown: -56.9%
Avg Drawdown: -10.9%
Normalized Score: 1.610
Lookback periods: [159, 161, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 8m 31sbest_combination: {'lookbacks': [159, 161, 162], 'score': np.float64(1.6095667249596821), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,565,213,072
Annual Return: 48.79%
Sharpe Ratio: 1.58700
Sortino Ratio: 1.555
Max Drawdown: -62.5%
Avg Drawdown: -11.4%
Normalized Score: 1.628
Lookback periods: [146, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 22sRunning iteration 531/1500... Est. remaining: 8m 16sRunning iteration 541/1500... Est. remaining: 8m 11sRunning iteration 551/1500... Est. remaining: 8m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,259,931,415
Annual Return: 48.16%
Sharpe Ratio: 1.57611
Sortino Ratio: 1.533
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 1.679
Lookback periods: [156, 159, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 8m 1sRunning iteration 571/1500... Est. remaining: 7m 56sRunning iteration 581/1500... Est. remaining: 7m 50sRunning iteration 591/1500... Est. remaining: 7m 45sRunning iteration 601/1500... Est. remaining: 7m 39sbest_combination: {'lookbacks': [156, 159, 169], 'score': np.float64(1.6792651123067976), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 34sRunning iteration 621/1500... Est. remaining: 7m 28sRunning iteration 631/1500... Est. remaining: 7m 23sRunning iteration 641/1500... Est. remaining: 7m 17sRunning iteration 651/1500... Est. remaining: 7m 12sRunning iteration 661/1500... Est. remaining: 7m 7sRunning iteration 671/1500... Est. remaining: 7m 1sRunning iteration 681/1500... Est. remaining: 6m 56sRunning iteration 691/1500... Est. remaining: 6m 50sRunning iteration 701/1500... Est. remaining: 6m 45sbest_combination: {'lookbacks': [156, 159, 169], 'score': np.float64(1.6792651123067976), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 40sRunning iteration 721/1500... Est. remaining: 6m 34sRunning iteration 731/1500... Est. remaining: 6m 29sRunning iteration 741/1500... Est. remaining: 6m 24sRunning iteration 751/1500... Est. remaining: 6m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,128,541,387
Annual Return: 48.58%
Sharpe Ratio: 1.60204
Sortino Ratio: 1.570
Max Drawdown: -63.5%
Avg Drawdown: -11.3%
Normalized Score: 1.691
Lookback periods: [135, 152, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 6m 14sRunning iteration 771/1500... Est. remaining: 6m 9sRunning iteration 781/1500... Est. remaining: 6m 4sRunning iteration 791/1500... Est. remaining: 5m 59sRunning iteration 801/1500... Est. remaining: 5m 53sbest_combination: {'lookbacks': [135, 152, 173], 'score': np.float64(1.6909614572604248), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 48sRunning iteration 821/1500... Est. remaining: 5m 43sRunning iteration 831/1500... Est. remaining: 5m 38sRunning iteration 841/1500... Est. remaining: 5m 32sRunning iteration 851/1500... Est. remaining: 5m 27sRunning iteration 861/1500... Est. remaining: 5m 22sRunning iteration 871/1500... Est. remaining: 5m 17sRunning iteration 881/1500... Est. remaining: 5m 12sRunning iteration 891/1500... Est. remaining: 5m 7sRunning iteration 901/1500... Est. remaining: 5m 2sbest_combination: {'lookbacks': [135, 152, 173], 'score': np.float64(1.6909614572604248), 'visits': 1}
Running iteration 911/1500... Est. remaining: 4m 57sRunning iteration 921/1500... Est. remaining: 4m 52sRunning iteration 931/1500... Est. remaining: 4m 46sRunning iteration 941/1500... Est. remaining: 4m 41sRunning iteration 951/1500... Est. remaining: 4m 36sRunning iteration 961/1500... Est. remaining: 4m 31sRunning iteration 971/1500... Est. remaining: 4m 26sRunning iteration 981/1500... Est. remaining: 4m 21sRunning iteration 991/1500... Est. remaining: 4m 16sRunning iteration 1001/1500... Est. remaining: 4m 11sbest_combination: {'lookbacks': [135, 152, 173], 'score': np.float64(1.6909614572604248), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 6sRunning iteration 1021/1500... Est. remaining: 4m 1sRunning iteration 1031/1500... Est. remaining: 3m 56sRunning iteration 1041/1500... Est. remaining: 3m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,135,548,002
Annual Return: 48.09%
Sharpe Ratio: 1.59220
Sortino Ratio: 1.540
Max Drawdown: -56.8%
Avg Drawdown: -10.5%
Normalized Score: 1.701
Lookback periods: [139, 157, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1051/1500... Est. remaining: 3m 46sRunning iteration 1061/1500... Est. remaining: 3m 41sRunning iteration 1071/1500... Est. remaining: 3m 36sRunning iteration 1081/1500... Est. remaining: 3m 31sRunning iteration 1091/1500... Est. remaining: 3m 26sRunning iteration 1101/1500... Est. remaining: 3m 21sbest_combination: {'lookbacks': [139, 157, 179], 'score': np.float64(1.7012504588820943), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 16sRunning iteration 1121/1500... Est. remaining: 3m 11sRunning iteration 1131/1500... Est. remaining: 3m 6sRunning iteration 1141/1500... Est. remaining: 3m 1sRunning iteration 1151/1500... Est. remaining: 2m 56sRunning iteration 1161/1500... Est. remaining: 2m 51sRunning iteration 1171/1500... Est. remaining: 2m 45sRunning iteration 1181/1500... Est. remaining: 2m 40sRunning iteration 1191/1500... Est. remaining: 2m 35sRunning iteration 1201/1500... Est. remaining: 2m 30sbest_combination: {'lookbacks': [139, 157, 179], 'score': np.float64(1.7012504588820943), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 25sRunning iteration 1221/1500... Est. remaining: 2m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,193,681,200
Annual Return: 48.62%
Sharpe Ratio: 1.58964
Sortino Ratio: 1.556
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 1.729
Lookback periods: [135, 155, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1231/1500... Est. remaining: 2m 15sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 2m 0sRunning iteration 1271/1500... Est. remaining: 1m 55sRunning iteration 1281/1500... Est. remaining: 1m 50sRunning iteration 1291/1500... Est. remaining: 1m 45sRunning iteration 1301/1500... Est. remaining: 1m 40sbest_combination: {'lookbacks': [135, 155, 176], 'score': np.float64(1.7286815394853832), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 35sRunning iteration 1321/1500... Est. remaining: 1m 30sRunning iteration 1331/1500... Est. remaining: 1m 25sRunning iteration 1341/1500... Est. remaining: 1m 20sRunning iteration 1351/1500... Est. remaining: 1m 15sRunning iteration 1361/1500... Est. remaining: 1m 10sRunning iteration 1371/1500... Est. remaining: 1m 5sRunning iteration 1381/1500... Est. remaining: 1m 0sRunning iteration 1391/1500... Est. remaining: 0m 55sRunning iteration 1401/1500... Est. remaining: 0m 50sbest_combination: {'lookbacks': [135, 155, 176], 'score': np.float64(1.7286815394853832), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,561,689,807
Annual Return: 49.21%
Sharpe Ratio: 1.60652
Sortino Ratio: 1.576
Max Drawdown: -57.3%
Avg Drawdown: -11.7%
Normalized Score: 1.920
Lookback periods: [137, 153, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1411/1500... Est. remaining: 0m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,464,789,527
Annual Return: 49.17%
Sharpe Ratio: 1.62149
Sortino Ratio: 1.577
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 1.973
Lookback periods: [136, 157, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1421/1500... Est. remaining: 0m 40sRunning iteration 1431/1500... Est. remaining: 0m 35sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.6 minutes
Best normalized score: 1.97
best_combination: {'lookbacks': [136, 157, 178], 'score': np.float64(1.9726126096367735), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 157, 178] (score: 1.9726)

Monte Carlo simulation completed in 12.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 157, 178] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 114 selections (27.4%)
3. naz100_pine: 74 selections (17.8%)
4. naz100_pi: 72 selections (17.3%)
5. cash: 41 selections (9.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,464,789,527.34
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Thu Aug 28 15:12:57 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $300,722,687
Annual Return: 34.65%
Sharpe Ratio: 1.20896
Sortino Ratio: 1.120
Max Drawdown: -59.5%
Avg Drawdown: -13.9%
Normalized Score: -1.012
Lookback periods: [96, 144, 284] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $915,786,337
Annual Return: 39.05%
Sharpe Ratio: 1.30167
Sortino Ratio: 1.243
Max Drawdown: -59.0%
Avg Drawdown: -12.7%
Normalized Score: -0.490
Lookback periods: [124, 244, 292] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,363,629,182
Annual Return: 42.90%
Sharpe Ratio: 1.40385
Sortino Ratio: 1.363
Max Drawdown: -64.4%
Avg Drawdown: -13.1%
Normalized Score: -0.097
Lookback periods: [137, 181, 224] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,002,314,538
Annual Return: 45.09%
Sharpe Ratio: 1.49203
Sortino Ratio: 1.443
Max Drawdown: -60.9%
Avg Drawdown: -12.5%
Normalized Score: 0.254
Lookback periods: [145, 145, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 35sRunning iteration 21/1500... Est. remaining: 21m 11sRunning iteration 31/1500... Est. remaining: 18m 2sRunning iteration 41/1500... Est. remaining: 16m 21sRunning iteration 51/1500... Est. remaining: 15m 18sRunning iteration 61/1500... Est. remaining: 14m 36sRunning iteration 71/1500... Est. remaining: 14m 5sRunning iteration 81/1500... Est. remaining: 13m 39sRunning iteration 91/1500... Est. remaining: 13m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,319,006,083
Annual Return: 45.41%
Sharpe Ratio: 1.50239
Sortino Ratio: 1.456
Max Drawdown: -59.7%
Avg Drawdown: -12.6%
Normalized Score: 0.300
Lookback periods: [136, 151, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 13m 18sbest_combination: {'lookbacks': [136, 151, 153], 'score': np.float64(0.29991669519528763), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,227,851,194
Annual Return: 46.21%
Sharpe Ratio: 1.52587
Sortino Ratio: 1.491
Max Drawdown: -61.4%
Avg Drawdown: -11.2%
Normalized Score: 0.458
Lookback periods: [139, 172, 205] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 13m 17sRunning iteration 121/1500... Est. remaining: 13m 4sRunning iteration 131/1500... Est. remaining: 12m 51sRunning iteration 141/1500... Est. remaining: 12m 39sRunning iteration 151/1500... Est. remaining: 12m 29sRunning iteration 161/1500... Est. remaining: 12m 19sRunning iteration 171/1500... Est. remaining: 12m 9sRunning iteration 181/1500... Est. remaining: 12m 0sRunning iteration 191/1500... Est. remaining: 11m 52sRunning iteration 201/1500... Est. remaining: 11m 43sbest_combination: {'lookbacks': [139, 172, 205], 'score': np.float64(0.45806557348907145), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 36sRunning iteration 221/1500... Est. remaining: 11m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,699,200,051
Annual Return: 48.38%
Sharpe Ratio: 1.57444
Sortino Ratio: 1.534
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.658
Lookback periods: [159, 178, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 11m 27sRunning iteration 241/1500... Est. remaining: 11m 20sRunning iteration 251/1500... Est. remaining: 11m 12sRunning iteration 261/1500... Est. remaining: 11m 4sRunning iteration 271/1500... Est. remaining: 10m 57sRunning iteration 281/1500... Est. remaining: 10m 49sRunning iteration 291/1500... Est. remaining: 10m 43sRunning iteration 301/1500... Est. remaining: 10m 36sbest_combination: {'lookbacks': [159, 178, 184], 'score': np.float64(0.6575286917937873), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 30sRunning iteration 321/1500... Est. remaining: 10m 23sRunning iteration 331/1500... Est. remaining: 10m 16sRunning iteration 341/1500... Est. remaining: 10m 10sRunning iteration 351/1500... Est. remaining: 10m 3sRunning iteration 361/1500... Est. remaining: 9m 57sRunning iteration 371/1500... Est. remaining: 9m 51sRunning iteration 381/1500... Est. remaining: 9m 45sRunning iteration 391/1500... Est. remaining: 9m 39sRunning iteration 401/1500... Est. remaining: 9m 33sbest_combination: {'lookbacks': [159, 178, 184], 'score': np.float64(0.6575286917937873), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 27sRunning iteration 421/1500... Est. remaining: 9m 21sRunning iteration 431/1500... Est. remaining: 9m 15sRunning iteration 441/1500... Est. remaining: 9m 9sRunning iteration 451/1500... Est. remaining: 9m 3sRunning iteration 461/1500... Est. remaining: 8m 57sRunning iteration 471/1500... Est. remaining: 8m 51sRunning iteration 481/1500... Est. remaining: 8m 45sRunning iteration 491/1500... Est. remaining: 8m 39sRunning iteration 501/1500... Est. remaining: 8m 33sbest_combination: {'lookbacks': [159, 178, 184], 'score': np.float64(0.6575286917937873), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 27sRunning iteration 521/1500... Est. remaining: 8m 22sRunning iteration 531/1500... Est. remaining: 8m 16sRunning iteration 541/1500... Est. remaining: 8m 11sRunning iteration 551/1500... Est. remaining: 12m 22sRunning iteration 561/1500... Est. remaining: 12m 10sRunning iteration 571/1500... Est. remaining: 11m 57sRunning iteration 581/1500... Est. remaining: 12m 2sRunning iteration 591/1500... Est. remaining: 11m 50sRunning iteration 601/1500... Est. remaining: 11m 38sbest_combination: {'lookbacks': [159, 178, 184], 'score': np.float64(0.6575286917937873), 'visits': 1}
Running iteration 611/1500... Est. remaining: 11m 26sRunning iteration 621/1500... Est. remaining: 11m 14sRunning iteration 631/1500... Est. remaining: 15m 25sRunning iteration 641/1500... Est. remaining: 15m 7sRunning iteration 651/1500... Est. remaining: 14m 49sRunning iteration 661/1500... Est. remaining: 14m 32sRunning iteration 671/1500... Est. remaining: 14m 14sRunning iteration 681/1500... Est. remaining: 14m 41sRunning iteration 691/1500... Est. remaining: 14m 24sRunning iteration 701/1500... Est. remaining: 14m 6sbest_combination: {'lookbacks': [159, 178, 184], 'score': np.float64(0.6575286917937873), 'visits': 1}
Running iteration 711/1500... Est. remaining: 13m 49sRunning iteration 721/1500... Est. remaining: 13m 33sRunning iteration 731/1500... Est. remaining: 20m 40sRunning iteration 741/1500... Est. remaining: 20m 12sRunning iteration 751/1500... Est. remaining: 20m 25sRunning iteration 761/1500... Est. remaining: 19m 58sRunning iteration 771/1500... Est. remaining: 19m 31sRunning iteration 781/1500... Est. remaining: 19m 4sRunning iteration 791/1500... Est. remaining: 18m 38sRunning iteration 801/1500... Est. remaining: 18m 13sbest_combination: {'lookbacks': [159, 178, 184], 'score': np.float64(0.6575286917937873), 'visits': 1}
Running iteration 811/1500... Est. remaining: 20m 30sRunning iteration 821/1500... Est. remaining: 23m 44sRunning iteration 831/1500... Est. remaining: 23m 10sRunning iteration 841/1500... Est. remaining: 22m 39sRunning iteration 851/1500... Est. remaining: 22m 40sRunning iteration 861/1500... Est. remaining: 22m 7sRunning iteration 871/1500... Est. remaining: 22m 37sRunning iteration 881/1500... Est. remaining: 23m 10sRunning iteration 891/1500... Est. remaining: 22m 36sRunning iteration 901/1500... Est. remaining: 22m 7sbest_combination: {'lookbacks': [159, 178, 184], 'score': np.float64(0.6575286917937873), 'visits': 1}
Running iteration 911/1500... Est. remaining: 21m 54sRunning iteration 921/1500... Est. remaining: 21m 20sRunning iteration 931/1500... Est. remaining: 22m 20sRunning iteration 941/1500... Est. remaining: 28m 35sRunning iteration 951/1500... Est. remaining: 27m 50sRunning iteration 961/1500... Est. remaining: 39m 7sRunning iteration 971/1500... Est. remaining: 40m 29sRunning iteration 981/1500... Est. remaining: 39m 22sRunning iteration 991/1500... Est. remaining: 39m 13sRunning iteration 1001/1500... Est. remaining: 45m 47sbest_combination: {'lookbacks': [159, 178, 184], 'score': np.float64(0.6575286917937873), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 44m 28sRunning iteration 1021/1500... Est. remaining: 52m 39sRunning iteration 1031/1500... Est. remaining: 54m 6sRunning iteration 1041/1500... Est. remaining: 52m 28sRunning iteration 1051/1500... Est. remaining: 53m 14sRunning iteration 1061/1500... Est. remaining: 51m 35sRunning iteration 1071/1500... Est. remaining: 49m 59sRunning iteration 1081/1500... Est. remaining: 48m 24sRunning iteration 1091/1500... Est. remaining: 46m 50sRunning iteration 1101/1500... Est. remaining: 45m 18sbest_combination: {'lookbacks': [159, 178, 184], 'score': np.float64(0.6575286917937873), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 43m 48sRunning iteration 1121/1500... Est. remaining: 42m 20sRunning iteration 1131/1500... Est. remaining: 40m 53sRunning iteration 1141/1500... Est. remaining: 39m 27sRunning iteration 1151/1500... Est. remaining: 38m 3sRunning iteration 1161/1500... Est. remaining: 36m 40sRunning iteration 1171/1500... Est. remaining: 35m 18sRunning iteration 1181/1500... Est. remaining: 33m 58sRunning iteration 1191/1500... Est. remaining: 32m 39sRunning iteration 1201/1500... Est. remaining: 31m 21sbest_combination: {'lookbacks': [159, 178, 184], 'score': np.float64(0.6575286917937873), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 30m 4sRunning iteration 1221/1500... Est. remaining: 28m 49sRunning iteration 1231/1500... Est. remaining: 27m 35sRunning iteration 1241/1500... Est. remaining: 26m 21sRunning iteration 1251/1500... Est. remaining: 25m 9sRunning iteration 1261/1500... Est. remaining: 23m 58sRunning iteration 1271/1500... Est. remaining: 22m 49sRunning iteration 1281/1500... Est. remaining: 21m 40sRunning iteration 1291/1500... Est. remaining: 20m 32sRunning iteration 1301/1500... Est. remaining: 19m 25sbest_combination: {'lookbacks': [159, 178, 184], 'score': np.float64(0.6575286917937873), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 18m 19sRunning iteration 1321/1500... Est. remaining: 17m 14sRunning iteration 1331/1500... Est. remaining: 16m 9sRunning iteration 1341/1500... Est. remaining: 15m 6sRunning iteration 1351/1500... Est. remaining: 14m 4sRunning iteration 1361/1500... Est. remaining: 13m 2sRunning iteration 1371/1500... Est. remaining: 12m 1sRunning iteration 1381/1500... Est. remaining: 11m 1sRunning iteration 1391/1500... Est. remaining: 10m 2sRunning iteration 1401/1500... Est. remaining: 9m 4sbest_combination: {'lookbacks': [159, 178, 184], 'score': np.float64(0.6575286917937873), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 8m 6sRunning iteration 1421/1500... Est. remaining: 7m 9sRunning iteration 1431/1500... Est. remaining: 6m 13sRunning iteration 1441/1500... Est. remaining: 5m 18sRunning iteration 1451/1500... Est. remaining: 4m 23sRunning iteration 1461/1500... Est. remaining: 3m 29sRunning iteration 1471/1500... Est. remaining: 2m 36sRunning iteration 1481/1500... Est. remaining: 1m 43sRunning iteration 1491/1500... Est. remaining: 0m 51s
Monte Carlo simulation completed in 127.9 minutes
Best normalized score: 0.66
best_combination: {'lookbacks': [159, 178, 184], 'score': np.float64(0.6575286917937873), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [159, 178, 184] (score: 0.6575)

Monte Carlo simulation completed in 127.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [159, 178, 184] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 117 selections (28.1%)
2. sp500_hma: 103 selections (24.8%)
3. naz100_pine: 82 selections (19.7%)
4. naz100_pi: 72 selections (17.3%)
5. cash: 42 selections (10.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,699,200,051.05
Average Annualized Gain: 48.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 1172m 15s
End time: Thu Aug 28 17:20:51 EDT 2025
Average time per successful run: 78m 9s
==============================================================
✓ All runs completed successfully!
