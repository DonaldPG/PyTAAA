Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Start time: Sun Aug 24 21:41:27 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Sun Aug 24 21:41:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $933,412,626
Annual Return: 39.12%
Sharpe Ratio: 1.29805
Sortino Ratio: 1.217
Max Drawdown: -68.2%
Avg Drawdown: -14.1%
Normalized Score: -1.694
Lookback periods: [75, 112, 132] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $978,419,370
Annual Return: 39.31%
Sharpe Ratio: 1.31680
Sortino Ratio: 1.241
Max Drawdown: -67.0%
Avg Drawdown: -13.7%
Normalized Score: -1.526
Lookback periods: [83, 149, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,006,666,317
Annual Return: 39.43%
Sharpe Ratio: 1.32723
Sortino Ratio: 1.254
Max Drawdown: -52.3%
Avg Drawdown: -11.4%
Normalized Score: -0.643
Lookback periods: [83, 143, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,372,066,801
Annual Return: 48.70%
Sharpe Ratio: 1.58643
Sortino Ratio: 1.569
Max Drawdown: -56.9%
Avg Drawdown: -11.3%
Normalized Score: 0.892
Lookback periods: [135, 159, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 12sRunning iteration 21/1500... Est. remaining: 21m 42sRunning iteration 31/1500... Est. remaining: 18m 23sRunning iteration 41/1500... Est. remaining: 16m 46sRunning iteration 51/1500... Est. remaining: 15m 46sRunning iteration 61/1500... Est. remaining: 15m 5sRunning iteration 71/1500... Est. remaining: 14m 33sRunning iteration 81/1500... Est. remaining: 14m 10sRunning iteration 91/1500... Est. remaining: 13m 50sRunning iteration 101/1500... Est. remaining: 13m 33sbest_combination: {'lookbacks': [135, 159, 161], 'score': np.float64(0.8924930266276577), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 18sRunning iteration 121/1500... Est. remaining: 13m 7sRunning iteration 131/1500... Est. remaining: 12m 58sRunning iteration 141/1500... Est. remaining: 12m 48sRunning iteration 151/1500... Est. remaining: 12m 37sRunning iteration 161/1500... Est. remaining: 12m 27sRunning iteration 171/1500... Est. remaining: 12m 18sRunning iteration 181/1500... Est. remaining: 12m 9sRunning iteration 191/1500... Est. remaining: 12m 1sRunning iteration 201/1500... Est. remaining: 11m 54sbest_combination: {'lookbacks': [135, 159, 161], 'score': np.float64(0.8924930266276577), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 46sRunning iteration 221/1500... Est. remaining: 11m 38sRunning iteration 231/1500... Est. remaining: 11m 30sRunning iteration 241/1500... Est. remaining: 11m 23sRunning iteration 251/1500... Est. remaining: 11m 16sRunning iteration 261/1500... Est. remaining: 11m 9sRunning iteration 271/1500... Est. remaining: 11m 2sRunning iteration 281/1500... Est. remaining: 10m 55sRunning iteration 291/1500... Est. remaining: 10m 49sRunning iteration 301/1500... Est. remaining: 10m 42sbest_combination: {'lookbacks': [135, 159, 161], 'score': np.float64(0.8924930266276577), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 37sRunning iteration 321/1500... Est. remaining: 10m 31sRunning iteration 331/1500... Est. remaining: 10m 25sRunning iteration 341/1500... Est. remaining: 10m 18sRunning iteration 351/1500... Est. remaining: 10m 13sRunning iteration 361/1500... Est. remaining: 10m 7sRunning iteration 371/1500... Est. remaining: 10m 2sRunning iteration 381/1500... Est. remaining: 9m 56sRunning iteration 391/1500... Est. remaining: 9m 51sRunning iteration 401/1500... Est. remaining: 9m 45sbest_combination: {'lookbacks': [135, 159, 161], 'score': np.float64(0.8924930266276577), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 39sRunning iteration 421/1500... Est. remaining: 9m 33sRunning iteration 431/1500... Est. remaining: 9m 27sRunning iteration 441/1500... Est. remaining: 9m 22sRunning iteration 451/1500... Est. remaining: 9m 16sRunning iteration 461/1500... Est. remaining: 9m 10sRunning iteration 471/1500... Est. remaining: 9m 4sRunning iteration 481/1500... Est. remaining: 8m 58sRunning iteration 491/1500... Est. remaining: 8m 52sRunning iteration 501/1500... Est. remaining: 8m 47sbest_combination: {'lookbacks': [135, 159, 161], 'score': np.float64(0.8924930266276577), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 42sRunning iteration 521/1500... Est. remaining: 8m 37sRunning iteration 531/1500... Est. remaining: 8m 31sRunning iteration 541/1500... Est. remaining: 8m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,779,945,823
Annual Return: 48.88%
Sharpe Ratio: 1.57994
Sortino Ratio: 1.562
Max Drawdown: -55.0%
Avg Drawdown: -11.4%
Normalized Score: 0.939
Lookback periods: [146, 159, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 23sRunning iteration 561/1500... Est. remaining: 8m 17sRunning iteration 571/1500... Est. remaining: 8m 12sRunning iteration 581/1500... Est. remaining: 8m 6sRunning iteration 591/1500... Est. remaining: 8m 1sRunning iteration 601/1500... Est. remaining: 7m 55sbest_combination: {'lookbacks': [146, 159, 173], 'score': np.float64(0.9388126747535475), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 50sRunning iteration 621/1500... Est. remaining: 7m 44sRunning iteration 631/1500... Est. remaining: 7m 38sRunning iteration 641/1500... Est. remaining: 7m 33sRunning iteration 651/1500... Est. remaining: 7m 28sRunning iteration 661/1500... Est. remaining: 7m 22sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 12sRunning iteration 691/1500... Est. remaining: 7m 7sRunning iteration 701/1500... Est. remaining: 7m 2sbest_combination: {'lookbacks': [146, 159, 173], 'score': np.float64(0.9388126747535475), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 57sRunning iteration 721/1500... Est. remaining: 6m 52sRunning iteration 731/1500... Est. remaining: 6m 46sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 36sRunning iteration 761/1500... Est. remaining: 6m 30sRunning iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 20sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [146, 159, 173], 'score': np.float64(0.9388126747535475), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 4sRunning iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 53sRunning iteration 841/1500... Est. remaining: 5m 48sRunning iteration 851/1500... Est. remaining: 5m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,125,122,681
Annual Return: 49.81%
Sharpe Ratio: 1.62194
Sortino Ratio: 1.605
Max Drawdown: -58.2%
Avg Drawdown: -11.1%
Normalized Score: 1.084
Lookback periods: [146, 159, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 33sRunning iteration 881/1500... Est. remaining: 5m 28sRunning iteration 891/1500... Est. remaining: 5m 23sRunning iteration 901/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [146, 159, 163], 'score': np.float64(1.0835361617412507), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 12sRunning iteration 921/1500... Est. remaining: 5m 7sRunning iteration 931/1500... Est. remaining: 5m 2sRunning iteration 941/1500... Est. remaining: 4m 56sRunning iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 40sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 30sRunning iteration 1001/1500... Est. remaining: 4m 25sbest_combination: {'lookbacks': [146, 159, 163], 'score': np.float64(1.0835361617412507), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 14sRunning iteration 1031/1500... Est. remaining: 4m 9sRunning iteration 1041/1500... Est. remaining: 4m 3sRunning iteration 1051/1500... Est. remaining: 3m 58sRunning iteration 1061/1500... Est. remaining: 3m 53sRunning iteration 1071/1500... Est. remaining: 3m 47sRunning iteration 1081/1500... Est. remaining: 3m 42sRunning iteration 1091/1500... Est. remaining: 3m 37sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [146, 159, 163], 'score': np.float64(1.0835361617412507), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 27sRunning iteration 1121/1500... Est. remaining: 3m 21sRunning iteration 1131/1500... Est. remaining: 3m 16sRunning iteration 1141/1500... Est. remaining: 3m 11sRunning iteration 1151/1500... Est. remaining: 3m 6sRunning iteration 1161/1500... Est. remaining: 3m 1sRunning iteration 1171/1500... Est. remaining: 2m 55sRunning iteration 1181/1500... Est. remaining: 2m 50sRunning iteration 1191/1500... Est. remaining: 2m 45sRunning iteration 1201/1500... Est. remaining: 2m 40sbest_combination: {'lookbacks': [146, 159, 163], 'score': np.float64(1.0835361617412507), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 35sRunning iteration 1221/1500... Est. remaining: 2m 29sRunning iteration 1231/1500... Est. remaining: 2m 24sRunning iteration 1241/1500... Est. remaining: 2m 19sRunning iteration 1251/1500... Est. remaining: 2m 13sRunning iteration 1261/1500... Est. remaining: 2m 8sRunning iteration 1271/1500... Est. remaining: 2m 2sRunning iteration 1281/1500... Est. remaining: 1m 57sRunning iteration 1291/1500... Est. remaining: 1m 52sRunning iteration 1301/1500... Est. remaining: 1m 46sbest_combination: {'lookbacks': [146, 159, 163], 'score': np.float64(1.0835361617412507), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 41sRunning iteration 1321/1500... Est. remaining: 1m 36sRunning iteration 1331/1500... Est. remaining: 1m 30sRunning iteration 1341/1500... Est. remaining: 1m 25sRunning iteration 1351/1500... Est. remaining: 1m 20sRunning iteration 1361/1500... Est. remaining: 1m 14sRunning iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 4sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [146, 159, 163], 'score': np.float64(1.0835361617412507), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.3 minutes
Best normalized score: 1.08
best_combination: {'lookbacks': [146, 159, 163], 'score': np.float64(1.0835361617412507), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [146, 159, 163] (score: 1.0835)

Monte Carlo simulation completed in 13.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [146, 159, 163] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 126 selections (30.3%)
2. naz100_hma: 108 selections (26.0%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 34 selections (8.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,125,122,681.24
Average Annualized Gain: 49.8%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Sun Aug 24 21:54:54 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $860,897,782
Annual Return: 38.80%
Sharpe Ratio: 1.31216
Sortino Ratio: 1.230
Max Drawdown: -71.5%
Avg Drawdown: -14.5%
Normalized Score: -1.862
Lookback periods: [97, 114, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $543,492,674
Annual Return: 36.97%
Sharpe Ratio: 1.30341
Sortino Ratio: 1.197
Max Drawdown: -63.5%
Avg Drawdown: -13.7%
Normalized Score: -1.721
Lookback periods: [84, 121, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,262,507,123
Annual Return: 40.34%
Sharpe Ratio: 1.39042
Sortino Ratio: 1.303
Max Drawdown: -67.0%
Avg Drawdown: -13.4%
Normalized Score: -1.202
Lookback periods: [135, 139, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $889,264,967
Annual Return: 38.93%
Sharpe Ratio: 1.35682
Sortino Ratio: 1.262
Max Drawdown: -52.3%
Avg Drawdown: -12.6%
Normalized Score: -0.827
Lookback periods: [89, 115, 116] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 28sRunning iteration 31/1500... Est. remaining: 18m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,316,120,098
Annual Return: 40.51%
Sharpe Ratio: 1.40368
Sortino Ratio: 1.293
Max Drawdown: -58.0%
Avg Drawdown: -12.8%
Normalized Score: -0.798
Lookback periods: [61, 114, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 21sRunning iteration 51/1500... Est. remaining: 16m 11sRunning iteration 61/1500... Est. remaining: 15m 22sRunning iteration 71/1500... Est. remaining: 14m 47sRunning iteration 81/1500... Est. remaining: 14m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,177,430,300
Annual Return: 40.06%
Sharpe Ratio: 1.42589
Sortino Ratio: 1.308
Max Drawdown: -53.8%
Avg Drawdown: -11.8%
Normalized Score: -0.506
Lookback periods: [65, 83, 118] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 29sRunning iteration 101/1500... Est. remaining: 14m 14sbest_combination: {'lookbacks': [65, 83, 118], 'score': np.float64(-0.5057808504385876), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 0sRunning iteration 121/1500... Est. remaining: 13m 41sRunning iteration 131/1500... Est. remaining: 13m 26sRunning iteration 141/1500... Est. remaining: 13m 14sRunning iteration 151/1500... Est. remaining: 13m 1sRunning iteration 161/1500... Est. remaining: 12m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,540,037,711
Annual Return: 41.15%
Sharpe Ratio: 1.45765
Sortino Ratio: 1.340
Max Drawdown: -53.9%
Avg Drawdown: -11.7%
Normalized Score: -0.298
Lookback periods: [56, 97, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 12m 49sRunning iteration 181/1500... Est. remaining: 12m 38sRunning iteration 191/1500... Est. remaining: 12m 28sRunning iteration 201/1500... Est. remaining: 12m 18sbest_combination: {'lookbacks': [56, 97, 110], 'score': np.float64(-0.2982873674740233), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 10sRunning iteration 221/1500... Est. remaining: 12m 1sRunning iteration 231/1500... Est. remaining: 11m 52sRunning iteration 241/1500... Est. remaining: 11m 43sRunning iteration 251/1500... Est. remaining: 11m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,798,609,253
Annual Return: 43.60%
Sharpe Ratio: 1.45418
Sortino Ratio: 1.396
Max Drawdown: -59.0%
Avg Drawdown: -12.4%
Normalized Score: -0.252
Lookback periods: [173, 190, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 11m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,508,013,788
Annual Return: 43.15%
Sharpe Ratio: 1.48236
Sortino Ratio: 1.399
Max Drawdown: -52.3%
Avg Drawdown: -11.4%
Normalized Score: 0.116
Lookback periods: [102, 114, 118] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/1500... Est. remaining: 11m 31sRunning iteration 281/1500... Est. remaining: 11m 22sRunning iteration 291/1500... Est. remaining: 11m 14sRunning iteration 301/1500... Est. remaining: 11m 6sbest_combination: {'lookbacks': [102, 114, 118], 'score': np.float64(0.11634389014548208), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 59sRunning iteration 321/1500... Est. remaining: 10m 51sRunning iteration 331/1500... Est. remaining: 10m 44sRunning iteration 341/1500... Est. remaining: 10m 36sRunning iteration 351/1500... Est. remaining: 10m 29sRunning iteration 361/1500... Est. remaining: 10m 22sRunning iteration 371/1500... Est. remaining: 10m 15sRunning iteration 381/1500... Est. remaining: 10m 9sRunning iteration 391/1500... Est. remaining: 10m 2sRunning iteration 401/1500... Est. remaining: 9m 55sbest_combination: {'lookbacks': [102, 114, 118], 'score': np.float64(0.11634389014548208), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 49sRunning iteration 421/1500... Est. remaining: 9m 42sRunning iteration 431/1500... Est. remaining: 9m 36sRunning iteration 441/1500... Est. remaining: 9m 30sRunning iteration 451/1500... Est. remaining: 9m 23sRunning iteration 461/1500... Est. remaining: 9m 17sRunning iteration 471/1500... Est. remaining: 9m 11sRunning iteration 481/1500... Est. remaining: 9m 5sRunning iteration 491/1500... Est. remaining: 8m 59sRunning iteration 501/1500... Est. remaining: 8m 53sbest_combination: {'lookbacks': [102, 114, 118], 'score': np.float64(0.11634389014548208), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 47sRunning iteration 521/1500... Est. remaining: 8m 41sRunning iteration 531/1500... Est. remaining: 8m 35sRunning iteration 541/1500... Est. remaining: 8m 30sRunning iteration 551/1500... Est. remaining: 8m 24sRunning iteration 561/1500... Est. remaining: 8m 18sRunning iteration 571/1500... Est. remaining: 8m 12sRunning iteration 581/1500... Est. remaining: 8m 6sRunning iteration 591/1500... Est. remaining: 8m 1sRunning iteration 601/1500... Est. remaining: 7m 55sbest_combination: {'lookbacks': [102, 114, 118], 'score': np.float64(0.11634389014548208), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 49sRunning iteration 621/1500... Est. remaining: 7m 44sRunning iteration 631/1500... Est. remaining: 7m 38sRunning iteration 641/1500... Est. remaining: 7m 32sRunning iteration 651/1500... Est. remaining: 7m 27sRunning iteration 661/1500... Est. remaining: 7m 21sRunning iteration 671/1500... Est. remaining: 7m 15sRunning iteration 681/1500... Est. remaining: 7m 10sRunning iteration 691/1500... Est. remaining: 7m 5sRunning iteration 701/1500... Est. remaining: 6m 59sbest_combination: {'lookbacks': [102, 114, 118], 'score': np.float64(0.11634389014548208), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 54sRunning iteration 721/1500... Est. remaining: 6m 48sRunning iteration 731/1500... Est. remaining: 6m 43sRunning iteration 741/1500... Est. remaining: 6m 37sRunning iteration 751/1500... Est. remaining: 6m 32sRunning iteration 761/1500... Est. remaining: 6m 26sRunning iteration 771/1500... Est. remaining: 6m 21sRunning iteration 781/1500... Est. remaining: 6m 16sRunning iteration 791/1500... Est. remaining: 6m 10sRunning iteration 801/1500... Est. remaining: 6m 5sbest_combination: {'lookbacks': [102, 114, 118], 'score': np.float64(0.11634389014548208), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 0sRunning iteration 821/1500... Est. remaining: 5m 54sRunning iteration 831/1500... Est. remaining: 5m 49sRunning iteration 841/1500... Est. remaining: 5m 44sRunning iteration 851/1500... Est. remaining: 5m 38sRunning iteration 861/1500... Est. remaining: 5m 33sRunning iteration 871/1500... Est. remaining: 5m 27sRunning iteration 881/1500... Est. remaining: 5m 22sRunning iteration 891/1500... Est. remaining: 5m 17sRunning iteration 901/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [102, 114, 118], 'score': np.float64(0.11634389014548208), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 6sRunning iteration 921/1500... Est. remaining: 5m 1sRunning iteration 931/1500... Est. remaining: 4m 56sRunning iteration 941/1500... Est. remaining: 4m 50sRunning iteration 951/1500... Est. remaining: 4m 45sRunning iteration 961/1500... Est. remaining: 4m 40sRunning iteration 971/1500... Est. remaining: 4m 34sRunning iteration 981/1500... Est. remaining: 4m 29sRunning iteration 991/1500... Est. remaining: 4m 24sRunning iteration 1001/1500... Est. remaining: 4m 19sbest_combination: {'lookbacks': [102, 114, 118], 'score': np.float64(0.11634389014548208), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,068,297,716
Annual Return: 43.98%
Sharpe Ratio: 1.51411
Sortino Ratio: 1.435
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: 0.347
Lookback periods: [102, 110, 121] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 4m 14sRunning iteration 1021/1500... Est. remaining: 4m 9sRunning iteration 1031/1500... Est. remaining: 4m 3sRunning iteration 1041/1500... Est. remaining: 3m 58sRunning iteration 1051/1500... Est. remaining: 3m 53sRunning iteration 1061/1500... Est. remaining: 3m 48sRunning iteration 1071/1500... Est. remaining: 3m 42sRunning iteration 1081/1500... Est. remaining: 3m 37sRunning iteration 1091/1500... Est. remaining: 3m 32sRunning iteration 1101/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [102, 110, 121], 'score': np.float64(0.3468759724757742), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 22sRunning iteration 1121/1500... Est. remaining: 3m 16sRunning iteration 1131/1500... Est. remaining: 3m 11sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 55sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,461,995,963
Annual Return: 44.49%
Sharpe Ratio: 1.53130
Sortino Ratio: 1.449
Max Drawdown: -52.3%
Avg Drawdown: -10.8%
Normalized Score: 0.462
Lookback periods: [102, 110, 115] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [102, 110, 115], 'score': np.float64(0.46161529227346837), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [102, 110, 115], 'score': np.float64(0.46161529227346837), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [102, 110, 115], 'score': np.float64(0.46161529227346837), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 0.46
best_combination: {'lookbacks': [102, 110, 115], 'score': np.float64(0.46161529227346837), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [102, 110, 115] (score: 0.4616)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [102, 110, 115] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 126 selections (30.3%)
2. naz100_pi: 85 selections (20.4%)
3. naz100_pine: 85 selections (20.4%)
4. naz100_hma: 78 selections (18.8%)
5. cash: 42 selections (10.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,461,995,963.04
Average Annualized Gain: 44.5%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Sun Aug 24 22:07:54 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $255,198,743
Annual Return: 34.01%
Sharpe Ratio: 1.19336
Sortino Ratio: 1.109
Max Drawdown: -62.9%
Avg Drawdown: -13.8%
Normalized Score: -2.255
Lookback periods: [66, 68, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $420,904,902
Annual Return: 35.96%
Sharpe Ratio: 1.27786
Sortino Ratio: 1.168
Max Drawdown: -59.0%
Avg Drawdown: -12.5%
Normalized Score: -1.545
Lookback periods: [55, 56, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,389,236,753
Annual Return: 40.73%
Sharpe Ratio: 1.36586
Sortino Ratio: 1.307
Max Drawdown: -65.7%
Avg Drawdown: -13.5%
Normalized Score: -1.159
Lookback periods: [85, 170, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $500,696,658
Annual Return: 36.65%
Sharpe Ratio: 1.29299
Sortino Ratio: 1.195
Max Drawdown: -52.3%
Avg Drawdown: -11.8%
Normalized Score: -1.099
Lookback periods: [53, 85, 123] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $934,801,327
Annual Return: 39.13%
Sharpe Ratio: 1.32976
Sortino Ratio: 1.243
Max Drawdown: -57.2%
Avg Drawdown: -12.7%
Normalized Score: -1.048
Lookback periods: [61, 125, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,771,518,070
Annual Return: 43.56%
Sharpe Ratio: 1.46447
Sortino Ratio: 1.411
Max Drawdown: -60.4%
Avg Drawdown: -12.8%
Normalized Score: -0.331
Lookback periods: [107, 133, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,779,988,374
Annual Return: 44.85%
Sharpe Ratio: 1.48098
Sortino Ratio: 1.431
Max Drawdown: -55.0%
Avg Drawdown: -12.3%
Normalized Score: 0.094
Lookback periods: [129, 134, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 26m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,302,415,195
Annual Return: 46.27%
Sharpe Ratio: 1.50824
Sortino Ratio: 1.477
Max Drawdown: -61.4%
Avg Drawdown: -11.9%
Normalized Score: 0.191
Lookback periods: [148, 170, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,480,767,725
Annual Return: 47.12%
Sharpe Ratio: 1.51230
Sortino Ratio: 1.467
Max Drawdown: -60.2%
Avg Drawdown: -11.6%
Normalized Score: 0.353
Lookback periods: [185, 189, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,298,374,191
Annual Return: 46.27%
Sharpe Ratio: 1.51714
Sortino Ratio: 1.467
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: 0.500
Lookback periods: [157, 159, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 24m 28sRunning iteration 41/1500... Est. remaining: 21m 15sRunning iteration 51/1500... Est. remaining: 19m 19sRunning iteration 61/1500... Est. remaining: 18m 3sRunning iteration 71/1500... Est. remaining: 17m 8sRunning iteration 81/1500... Est. remaining: 16m 24sRunning iteration 91/1500... Est. remaining: 15m 47sRunning iteration 101/1500... Est. remaining: 15m 17sbest_combination: {'lookbacks': [157, 159, 181], 'score': np.float64(0.5000460058228405), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 52sRunning iteration 121/1500... Est. remaining: 14m 30sRunning iteration 131/1500... Est. remaining: 14m 11sRunning iteration 141/1500... Est. remaining: 13m 54sRunning iteration 151/1500... Est. remaining: 13m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,883,480,342
Annual Return: 46.71%
Sharpe Ratio: 1.53939
Sortino Ratio: 1.494
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.508
Lookback periods: [135, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 13m 34sRunning iteration 171/1500... Est. remaining: 13m 20sRunning iteration 181/1500... Est. remaining: 13m 7sRunning iteration 191/1500... Est. remaining: 12m 55sRunning iteration 201/1500... Est. remaining: 12m 44sbest_combination: {'lookbacks': [135, 155, 156], 'score': np.float64(0.5083655619512097), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 33sRunning iteration 221/1500... Est. remaining: 12m 23sRunning iteration 231/1500... Est. remaining: 12m 14sRunning iteration 241/1500... Est. remaining: 12m 5sRunning iteration 251/1500... Est. remaining: 11m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,898,204,607
Annual Return: 42.00%
Sharpe Ratio: 1.50900
Sortino Ratio: 1.406
Max Drawdown: -35.6%
Avg Drawdown: -9.5%
Normalized Score: 0.895
Lookback periods: [52, 56, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/1500... Est. remaining: 11m 53sRunning iteration 271/1500... Est. remaining: 11m 45sRunning iteration 281/1500... Est. remaining: 11m 36sRunning iteration 291/1500... Est. remaining: 11m 29sRunning iteration 301/1500... Est. remaining: 11m 21sbest_combination: {'lookbacks': [52, 56, 83], 'score': np.float64(0.8946905930355156), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 13sRunning iteration 321/1500... Est. remaining: 11m 5sRunning iteration 331/1500... Est. remaining: 10m 57sRunning iteration 341/1500... Est. remaining: 10m 50sRunning iteration 351/1500... Est. remaining: 10m 43sRunning iteration 361/1500... Est. remaining: 10m 36sRunning iteration 371/1500... Est. remaining: 10m 29sRunning iteration 381/1500... Est. remaining: 10m 21sRunning iteration 391/1500... Est. remaining: 10m 14sRunning iteration 401/1500... Est. remaining: 10m 8sbest_combination: {'lookbacks': [52, 56, 83], 'score': np.float64(0.8946905930355156), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,880,876,859
Annual Return: 41.96%
Sharpe Ratio: 1.50549
Sortino Ratio: 1.404
Max Drawdown: -35.6%
Avg Drawdown: -9.2%
Normalized Score: 0.919
Lookback periods: [50, 52, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,163,910,399
Annual Return: 42.54%
Sharpe Ratio: 1.52658
Sortino Ratio: 1.431
Max Drawdown: -35.7%
Avg Drawdown: -9.6%
Normalized Score: 0.976
Lookback periods: [50, 52, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 10m 1sRunning iteration 431/1500... Est. remaining: 9m 55sRunning iteration 441/1500... Est. remaining: 9m 48sRunning iteration 451/1500... Est. remaining: 9m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,026,692,080
Annual Return: 43.93%
Sharpe Ratio: 1.55621
Sortino Ratio: 1.456
Max Drawdown: -38.3%
Avg Drawdown: -9.7%
Normalized Score: 1.092
Lookback periods: [50, 53, 75] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 9m 37sRunning iteration 471/1500... Est. remaining: 9m 31sRunning iteration 481/1500... Est. remaining: 9m 25sRunning iteration 491/1500... Est. remaining: 9m 18sRunning iteration 501/1500... Est. remaining: 9m 12sbest_combination: {'lookbacks': [50, 53, 75], 'score': np.float64(1.092474778082841), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 5sRunning iteration 521/1500... Est. remaining: 8m 59sRunning iteration 531/1500... Est. remaining: 8m 52sRunning iteration 541/1500... Est. remaining: 8m 46sRunning iteration 551/1500... Est. remaining: 8m 40sRunning iteration 561/1500... Est. remaining: 8m 34sRunning iteration 571/1500... Est. remaining: 8m 27sRunning iteration 581/1500... Est. remaining: 8m 21sRunning iteration 591/1500... Est. remaining: 8m 15sRunning iteration 601/1500... Est. remaining: 8m 9sbest_combination: {'lookbacks': [50, 53, 75], 'score': np.float64(1.092474778082841), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 4sRunning iteration 621/1500... Est. remaining: 7m 58sRunning iteration 631/1500... Est. remaining: 7m 52sRunning iteration 641/1500... Est. remaining: 7m 47sRunning iteration 651/1500... Est. remaining: 7m 41sRunning iteration 661/1500... Est. remaining: 7m 35sRunning iteration 671/1500... Est. remaining: 7m 29sRunning iteration 681/1500... Est. remaining: 7m 23sRunning iteration 691/1500... Est. remaining: 7m 18sRunning iteration 701/1500... Est. remaining: 7m 13sbest_combination: {'lookbacks': [50, 53, 75], 'score': np.float64(1.092474778082841), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 7sRunning iteration 721/1500... Est. remaining: 7m 1sRunning iteration 731/1500... Est. remaining: 6m 55sRunning iteration 741/1500... Est. remaining: 6m 50sRunning iteration 751/1500... Est. remaining: 6m 44sRunning iteration 761/1500... Est. remaining: 6m 38sRunning iteration 771/1500... Est. remaining: 6m 33sRunning iteration 781/1500... Est. remaining: 6m 27sRunning iteration 791/1500... Est. remaining: 6m 22sRunning iteration 801/1500... Est. remaining: 6m 16sbest_combination: {'lookbacks': [50, 53, 75], 'score': np.float64(1.092474778082841), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 10sRunning iteration 821/1500... Est. remaining: 6m 5sRunning iteration 831/1500... Est. remaining: 5m 59sRunning iteration 841/1500... Est. remaining: 5m 54sRunning iteration 851/1500... Est. remaining: 5m 48sRunning iteration 861/1500... Est. remaining: 5m 43sRunning iteration 871/1500... Est. remaining: 5m 37sRunning iteration 881/1500... Est. remaining: 5m 32sRunning iteration 891/1500... Est. remaining: 5m 26sRunning iteration 901/1500... Est. remaining: 5m 21sbest_combination: {'lookbacks': [50, 53, 75], 'score': np.float64(1.092474778082841), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,717,671,171
Annual Return: 43.48%
Sharpe Ratio: 1.53971
Sortino Ratio: 1.451
Max Drawdown: -36.3%
Avg Drawdown: -9.4%
Normalized Score: 1.121
Lookback periods: [50, 53, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 5m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,510,295,094
Annual Return: 43.15%
Sharpe Ratio: 1.52599
Sortino Ratio: 1.434
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.170
Lookback periods: [52, 54, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,779,940,917
Annual Return: 43.57%
Sharpe Ratio: 1.56839
Sortino Ratio: 1.467
Max Drawdown: -37.2%
Avg Drawdown: -9.3%
Normalized Score: 1.181
Lookback periods: [50, 52, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 921/1500... Est. remaining: 5m 12sRunning iteration 931/1500... Est. remaining: 5m 6sRunning iteration 941/1500... Est. remaining: 5m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,867,527,084
Annual Return: 43.70%
Sharpe Ratio: 1.56367
Sortino Ratio: 1.465
Max Drawdown: -36.7%
Avg Drawdown: -9.4%
Normalized Score: 1.184
Lookback periods: [50, 52, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,037,914,546
Annual Return: 43.94%
Sharpe Ratio: 1.57274
Sortino Ratio: 1.474
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.332
Lookback periods: [50, 54, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 4m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.546
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 961/1500... Est. remaining: 4m 52sRunning iteration 971/1500... Est. remaining: 4m 46sRunning iteration 981/1500... Est. remaining: 4m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.747
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 991/1500... Est. remaining: 4m 36sRunning iteration 1001/1500... Est. remaining: 4m 30sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 25sRunning iteration 1021/1500... Est. remaining: 4m 19sRunning iteration 1031/1500... Est. remaining: 4m 13sRunning iteration 1041/1500... Est. remaining: 4m 8sRunning iteration 1051/1500... Est. remaining: 4m 2sRunning iteration 1061/1500... Est. remaining: 3m 57sRunning iteration 1071/1500... Est. remaining: 3m 51sRunning iteration 1081/1500... Est. remaining: 3m 46sRunning iteration 1091/1500... Est. remaining: 3m 40sRunning iteration 1101/1500... Est. remaining: 3m 35sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 29sRunning iteration 1121/1500... Est. remaining: 3m 24sRunning iteration 1131/1500... Est. remaining: 3m 18sRunning iteration 1141/1500... Est. remaining: 3m 13sRunning iteration 1151/1500... Est. remaining: 3m 8sRunning iteration 1161/1500... Est. remaining: 3m 2sRunning iteration 1171/1500... Est. remaining: 2m 57sRunning iteration 1181/1500... Est. remaining: 2m 51sRunning iteration 1191/1500... Est. remaining: 2m 46sRunning iteration 1201/1500... Est. remaining: 2m 40sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 35sRunning iteration 1221/1500... Est. remaining: 2m 29sRunning iteration 1231/1500... Est. remaining: 2m 24sRunning iteration 1241/1500... Est. remaining: 2m 19sRunning iteration 1251/1500... Est. remaining: 2m 13sRunning iteration 1261/1500... Est. remaining: 2m 8sRunning iteration 1271/1500... Est. remaining: 2m 2sRunning iteration 1281/1500... Est. remaining: 1m 57sRunning iteration 1291/1500... Est. remaining: 1m 52sRunning iteration 1301/1500... Est. remaining: 1m 46sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 41sRunning iteration 1321/1500... Est. remaining: 1m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1331/1500... Est. remaining: 1m 30sRunning iteration 1341/1500... Est. remaining: 1m 25sRunning iteration 1351/1500... Est. remaining: 1m 20sRunning iteration 1361/1500... Est. remaining: 1m 14sRunning iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.3 minutes
Best normalized score: 1.94
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9365)

Monte Carlo simulation completed in 13.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Sun Aug 24 22:21:18 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-24T22:21:18.588707
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 0.9420
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,646,280,924
Annual Return: 41.42%
Sharpe Ratio: 1.40703
Sortino Ratio: 1.332
Max Drawdown: -55.0%
Avg Drawdown: -12.8%
Normalized Score: -0.543
Lookback periods: [90, 150, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,372,963,368
Annual Return: 42.92%
Sharpe Ratio: 1.42866
Sortino Ratio: 1.375
Max Drawdown: -57.2%
Avg Drawdown: -12.7%
Normalized Score: -0.362
Lookback periods: [127, 141, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 26m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,270,668,395
Annual Return: 47.61%
Sharpe Ratio: 1.57510
Sortino Ratio: 1.533
Max Drawdown: -58.5%
Avg Drawdown: -11.1%
Normalized Score: 0.694
Lookback periods: [139, 155, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 20m 41sRunning iteration 31/1500... Est. remaining: 17m 46sRunning iteration 41/1500... Est. remaining: 16m 15sRunning iteration 51/1500... Est. remaining: 15m 25sRunning iteration 61/1500... Est. remaining: 14m 59sRunning iteration 71/1500... Est. remaining: 14m 30sRunning iteration 81/1500... Est. remaining: 14m 8sRunning iteration 91/1500... Est. remaining: 13m 50sRunning iteration 101/1500... Est. remaining: 13m 35sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 20sRunning iteration 121/1500... Est. remaining: 13m 7sRunning iteration 131/1500... Est. remaining: 12m 55sRunning iteration 141/1500... Est. remaining: 12m 43sRunning iteration 151/1500... Est. remaining: 12m 32sRunning iteration 161/1500... Est. remaining: 12m 23sRunning iteration 171/1500... Est. remaining: 12m 13sRunning iteration 181/1500... Est. remaining: 12m 4sRunning iteration 191/1500... Est. remaining: 11m 56sRunning iteration 201/1500... Est. remaining: 11m 48sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 41sRunning iteration 221/1500... Est. remaining: 11m 33sRunning iteration 231/1500... Est. remaining: 11m 26sRunning iteration 241/1500... Est. remaining: 11m 19sRunning iteration 251/1500... Est. remaining: 11m 12sRunning iteration 261/1500... Est. remaining: 11m 4sRunning iteration 271/1500... Est. remaining: 10m 58sRunning iteration 281/1500... Est. remaining: 10m 51sRunning iteration 291/1500... Est. remaining: 10m 44sRunning iteration 301/1500... Est. remaining: 10m 38sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 32sRunning iteration 321/1500... Est. remaining: 10m 25sRunning iteration 331/1500... Est. remaining: 10m 19sRunning iteration 341/1500... Est. remaining: 10m 13sRunning iteration 351/1500... Est. remaining: 10m 7sRunning iteration 361/1500... Est. remaining: 10m 1sRunning iteration 371/1500... Est. remaining: 9m 55sRunning iteration 381/1500... Est. remaining: 9m 49sRunning iteration 391/1500... Est. remaining: 9m 44sRunning iteration 401/1500... Est. remaining: 9m 39sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 33sRunning iteration 421/1500... Est. remaining: 9m 27sRunning iteration 431/1500... Est. remaining: 9m 22sRunning iteration 441/1500... Est. remaining: 9m 16sRunning iteration 451/1500... Est. remaining: 9m 11sRunning iteration 461/1500... Est. remaining: 9m 5sRunning iteration 471/1500... Est. remaining: 8m 59sRunning iteration 481/1500... Est. remaining: 8m 54sRunning iteration 491/1500... Est. remaining: 8m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,636,308,972
Annual Return: 47.22%
Sharpe Ratio: 1.54250
Sortino Ratio: 1.510
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.717
Lookback periods: [160, 161, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 8m 45sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 40sRunning iteration 521/1500... Est. remaining: 8m 34sRunning iteration 531/1500... Est. remaining: 8m 28sRunning iteration 541/1500... Est. remaining: 8m 23sRunning iteration 551/1500... Est. remaining: 8m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,460,598,380
Annual Return: 48.74%
Sharpe Ratio: 1.58012
Sortino Ratio: 1.554
Max Drawdown: -58.5%
Avg Drawdown: -11.9%
Normalized Score: 0.721
Lookback periods: [142, 155, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 8m 14sRunning iteration 571/1500... Est. remaining: 8m 9sRunning iteration 581/1500... Est. remaining: 8m 3sRunning iteration 591/1500... Est. remaining: 7m 57sRunning iteration 601/1500... Est. remaining: 7m 52sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 46sRunning iteration 621/1500... Est. remaining: 7m 41sRunning iteration 631/1500... Est. remaining: 7m 35sRunning iteration 641/1500... Est. remaining: 7m 30sRunning iteration 651/1500... Est. remaining: 7m 25sRunning iteration 661/1500... Est. remaining: 7m 20sRunning iteration 671/1500... Est. remaining: 7m 15sRunning iteration 681/1500... Est. remaining: 7m 9sRunning iteration 691/1500... Est. remaining: 7m 4sRunning iteration 701/1500... Est. remaining: 6m 59sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 54sRunning iteration 721/1500... Est. remaining: 6m 49sRunning iteration 731/1500... Est. remaining: 6m 44sRunning iteration 741/1500... Est. remaining: 6m 38sRunning iteration 751/1500... Est. remaining: 6m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,259,931,415
Annual Return: 48.16%
Sharpe Ratio: 1.57611
Sortino Ratio: 1.533
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.899
Lookback periods: [156, 159, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 6m 29sRunning iteration 771/1500... Est. remaining: 6m 24sRunning iteration 781/1500... Est. remaining: 6m 18sRunning iteration 791/1500... Est. remaining: 6m 13sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 2sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 46sRunning iteration 851/1500... Est. remaining: 5m 41sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 30sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,101,733,499
Annual Return: 48.57%
Sharpe Ratio: 1.58790
Sortino Ratio: 1.554
Max Drawdown: -59.0%
Avg Drawdown: -10.4%
Normalized Score: 0.928
Lookback periods: [158, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 27sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [156, 162, 168], 'score': np.float64(0.9419670661538622), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,907,454,513
Annual Return: 48.94%
Sharpe Ratio: 1.59606
Sortino Ratio: 1.568
Max Drawdown: -59.0%
Avg Drawdown: -10.4%
Normalized Score: 0.986
Lookback periods: [158, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 0.99
best_combination: {'lookbacks': [158, 162, 169], 'score': np.float64(0.9858481030061285), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [158, 162, 169] (score: 0.9858)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [158, 162, 169] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 78 selections (18.8%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,907,454,512.91
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Sun Aug 24 22:34:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $207,063,174
Annual Return: 33.21%
Sharpe Ratio: 1.14305
Sortino Ratio: 1.067
Max Drawdown: -59.4%
Avg Drawdown: -14.4%
Normalized Score: -2.432
Lookback periods: [68, 113, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $458,248,539
Annual Return: 36.30%
Sharpe Ratio: 1.28508
Sortino Ratio: 1.181
Max Drawdown: -59.1%
Avg Drawdown: -12.7%
Normalized Score: -1.534
Lookback periods: [56, 58, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,784,774,217
Annual Return: 41.75%
Sharpe Ratio: 1.38811
Sortino Ratio: 1.343
Max Drawdown: -64.6%
Avg Drawdown: -13.8%
Normalized Score: -0.990
Lookback periods: [119, 135, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,830,172,174
Annual Return: 41.85%
Sharpe Ratio: 1.40070
Sortino Ratio: 1.351
Max Drawdown: -59.3%
Avg Drawdown: -13.1%
Normalized Score: -0.673
Lookback periods: [98, 149, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,983,595,660
Annual Return: 43.87%
Sharpe Ratio: 1.44975
Sortino Ratio: 1.401
Max Drawdown: -67.4%
Avg Drawdown: -13.0%
Normalized Score: -0.595
Lookback periods: [137, 138, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,474,152,111
Annual Return: 40.97%
Sharpe Ratio: 1.40115
Sortino Ratio: 1.324
Max Drawdown: -52.3%
Avg Drawdown: -11.3%
Normalized Score: -0.286
Lookback periods: [81, 130, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 26sRunning iteration 31/1500... Est. remaining: 20m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,819,391,569
Annual Return: 44.90%
Sharpe Ratio: 1.46444
Sortino Ratio: 1.424
Max Drawdown: -60.2%
Avg Drawdown: -11.4%
Normalized Score: 0.036
Lookback periods: [151, 168, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,400,068,311
Annual Return: 45.49%
Sharpe Ratio: 1.47877
Sortino Ratio: 1.439
Max Drawdown: -60.2%
Avg Drawdown: -11.6%
Normalized Score: 0.109
Lookback periods: [167, 189, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 19m 49sRunning iteration 51/1500... Est. remaining: 18m 15sRunning iteration 61/1500... Est. remaining: 17m 11sRunning iteration 71/1500... Est. remaining: 16m 27sRunning iteration 81/1500... Est. remaining: 15m 50sRunning iteration 91/1500... Est. remaining: 15m 20sRunning iteration 101/1500... Est. remaining: 14m 53sbest_combination: {'lookbacks': [167, 189, 191], 'score': np.float64(0.10863436149531094), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,134,894,648
Annual Return: 45.23%
Sharpe Ratio: 1.47718
Sortino Ratio: 1.433
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.117
Lookback periods: [168, 194, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 46sRunning iteration 121/1500... Est. remaining: 14m 26sRunning iteration 131/1500... Est. remaining: 14m 8sRunning iteration 141/1500... Est. remaining: 13m 51sRunning iteration 151/1500... Est. remaining: 13m 35sRunning iteration 161/1500... Est. remaining: 13m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,681,606,488
Annual Return: 46.57%
Sharpe Ratio: 1.52369
Sortino Ratio: 1.484
Max Drawdown: -59.0%
Avg Drawdown: -12.1%
Normalized Score: 0.297
Lookback periods: [147, 181, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 13m 19sRunning iteration 181/1500... Est. remaining: 13m 8sRunning iteration 191/1500... Est. remaining: 12m 57sRunning iteration 201/1500... Est. remaining: 12m 46sbest_combination: {'lookbacks': [147, 181, 193], 'score': np.float64(0.29736854648980293), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,637,982,064
Annual Return: 47.23%
Sharpe Ratio: 1.54592
Sortino Ratio: 1.512
Max Drawdown: -59.7%
Avg Drawdown: -11.5%
Normalized Score: 0.492
Lookback periods: [151, 159, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/1500... Est. remaining: 12m 44sRunning iteration 221/1500... Est. remaining: 12m 34sRunning iteration 231/1500... Est. remaining: 12m 24sRunning iteration 241/1500... Est. remaining: 12m 14sRunning iteration 251/1500... Est. remaining: 12m 7sRunning iteration 261/1500... Est. remaining: 11m 59sRunning iteration 271/1500... Est. remaining: 11m 52sRunning iteration 281/1500... Est. remaining: 11m 44sRunning iteration 291/1500... Est. remaining: 11m 40sRunning iteration 301/1500... Est. remaining: 11m 31sbest_combination: {'lookbacks': [151, 159, 163], 'score': np.float64(0.4919175763237524), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,423,559,361
Annual Return: 47.09%
Sharpe Ratio: 1.54217
Sortino Ratio: 1.509
Max Drawdown: -56.9%
Avg Drawdown: -11.3%
Normalized Score: 0.598
Lookback periods: [157, 160, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 11m 28sRunning iteration 321/1500... Est. remaining: 11m 20sRunning iteration 331/1500... Est. remaining: 11m 12sRunning iteration 341/1500... Est. remaining: 11m 4sRunning iteration 351/1500... Est. remaining: 10m 56sRunning iteration 361/1500... Est. remaining: 10m 48sRunning iteration 371/1500... Est. remaining: 10m 40sRunning iteration 381/1500... Est. remaining: 10m 33sRunning iteration 391/1500... Est. remaining: 10m 25sRunning iteration 401/1500... Est. remaining: 10m 19sbest_combination: {'lookbacks': [157, 160, 163], 'score': np.float64(0.598084687438293), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 12sRunning iteration 421/1500... Est. remaining: 10m 5sRunning iteration 431/1500... Est. remaining: 9m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,144,524,102
Annual Return: 39.94%
Sharpe Ratio: 1.45546
Sortino Ratio: 1.359
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.602
Lookback periods: [50, 60, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 54sRunning iteration 451/1500... Est. remaining: 9m 48sRunning iteration 461/1500... Est. remaining: 9m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,270,915,299
Annual Return: 40.37%
Sharpe Ratio: 1.46784
Sortino Ratio: 1.373
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 0.668
Lookback periods: [50, 59, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 9m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,229,417,452
Annual Return: 44.20%
Sharpe Ratio: 1.57610
Sortino Ratio: 1.489
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.382
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 9m 33sRunning iteration 491/1500... Est. remaining: 9m 27sRunning iteration 501/1500... Est. remaining: 9m 21sbest_combination: {'lookbacks': [50, 54, 90], 'score': np.float64(1.3821593928772842), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 15sRunning iteration 521/1500... Est. remaining: 9m 8sRunning iteration 531/1500... Est. remaining: 9m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.670
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 8m 58sRunning iteration 551/1500... Est. remaining: 8m 52sRunning iteration 561/1500... Est. remaining: 8m 45sRunning iteration 571/1500... Est. remaining: 8m 39sRunning iteration 581/1500... Est. remaining: 8m 33sRunning iteration 591/1500... Est. remaining: 8m 27sRunning iteration 601/1500... Est. remaining: 8m 20sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.6699565789556323), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 14sRunning iteration 621/1500... Est. remaining: 8m 8sRunning iteration 631/1500... Est. remaining: 8m 2sRunning iteration 641/1500... Est. remaining: 7m 57sRunning iteration 651/1500... Est. remaining: 7m 51sRunning iteration 661/1500... Est. remaining: 7m 45sRunning iteration 671/1500... Est. remaining: 7m 39sRunning iteration 681/1500... Est. remaining: 7m 33sRunning iteration 691/1500... Est. remaining: 7m 27sRunning iteration 701/1500... Est. remaining: 7m 21sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.6699565789556323), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 15sRunning iteration 721/1500... Est. remaining: 7m 9sRunning iteration 731/1500... Est. remaining: 7m 3sRunning iteration 741/1500... Est. remaining: 6m 58sRunning iteration 751/1500... Est. remaining: 6m 52sRunning iteration 761/1500... Est. remaining: 6m 46sRunning iteration 771/1500... Est. remaining: 6m 40sRunning iteration 781/1500... Est. remaining: 6m 34sRunning iteration 791/1500... Est. remaining: 6m 28sRunning iteration 801/1500... Est. remaining: 6m 23sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.6699565789556323), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.747
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 821/1500... Est. remaining: 6m 12sRunning iteration 831/1500... Est. remaining: 6m 6sRunning iteration 841/1500... Est. remaining: 6m 0sRunning iteration 851/1500... Est. remaining: 5m 55sRunning iteration 861/1500... Est. remaining: 5m 49sRunning iteration 871/1500... Est. remaining: 5m 43sRunning iteration 881/1500... Est. remaining: 5m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,673,528,425
Annual Return: 46.56%
Sharpe Ratio: 1.66674
Sortino Ratio: 1.588
Max Drawdown: -36.6%
Avg Drawdown: -8.1%
Normalized Score: 1.961
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 5m 33sRunning iteration 901/1500... Est. remaining: 5m 27sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 21sRunning iteration 921/1500... Est. remaining: 5m 15sRunning iteration 931/1500... Est. remaining: 5m 10sRunning iteration 941/1500... Est. remaining: 5m 4sRunning iteration 951/1500... Est. remaining: 4m 58sRunning iteration 961/1500... Est. remaining: 4m 53sRunning iteration 971/1500... Est. remaining: 4m 47sRunning iteration 981/1500... Est. remaining: 4m 41sRunning iteration 991/1500... Est. remaining: 4m 36sRunning iteration 1001/1500... Est. remaining: 4m 30sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 25sRunning iteration 1021/1500... Est. remaining: 4m 19sRunning iteration 1031/1500... Est. remaining: 4m 13sRunning iteration 1041/1500... Est. remaining: 4m 8sRunning iteration 1051/1500... Est. remaining: 4m 2sRunning iteration 1061/1500... Est. remaining: 3m 57sRunning iteration 1071/1500... Est. remaining: 3m 51sRunning iteration 1081/1500... Est. remaining: 3m 46sRunning iteration 1091/1500... Est. remaining: 3m 40sRunning iteration 1101/1500... Est. remaining: 3m 35sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 29sRunning iteration 1121/1500... Est. remaining: 3m 24sRunning iteration 1131/1500... Est. remaining: 3m 18sRunning iteration 1141/1500... Est. remaining: 3m 13sRunning iteration 1151/1500... Est. remaining: 3m 7sRunning iteration 1161/1500... Est. remaining: 3m 2sRunning iteration 1171/1500... Est. remaining: 2m 56sRunning iteration 1181/1500... Est. remaining: 2m 51sRunning iteration 1191/1500... Est. remaining: 2m 45sRunning iteration 1201/1500... Est. remaining: 2m 40sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 35sRunning iteration 1221/1500... Est. remaining: 2m 29sRunning iteration 1231/1500... Est. remaining: 2m 24sRunning iteration 1241/1500... Est. remaining: 2m 18sRunning iteration 1251/1500... Est. remaining: 2m 13sRunning iteration 1261/1500... Est. remaining: 2m 8sRunning iteration 1271/1500... Est. remaining: 2m 2sRunning iteration 1281/1500... Est. remaining: 1m 57sRunning iteration 1291/1500... Est. remaining: 1m 51sRunning iteration 1301/1500... Est. remaining: 1m 46sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 41sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 30sRunning iteration 1341/1500... Est. remaining: 1m 25sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 14sRunning iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.2 minutes
Best normalized score: 1.96
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.96055863863467), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 95] (score: 1.9606)

Monte Carlo simulation completed in 13.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 103 selections (24.8%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,673,528,425.50
Average Annualized Gain: 46.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Sun Aug 24 22:47:48 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,700,866,607
Annual Return: 43.45%
Sharpe Ratio: 1.44885
Sortino Ratio: 1.400
Max Drawdown: -70.4%
Avg Drawdown: -13.0%
Normalized Score: -0.743
Lookback periods: [105, 177, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,134,388,516
Annual Return: 44.07%
Sharpe Ratio: 1.46612
Sortino Ratio: 1.416
Max Drawdown: -58.5%
Avg Drawdown: -12.5%
Normalized Score: -0.156
Lookback periods: [135, 151, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 26m 48sRunning iteration 21/1500... Est. remaining: 19m 57sRunning iteration 31/1500... Est. remaining: 17m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,784,131,619
Annual Return: 44.86%
Sharpe Ratio: 1.48603
Sortino Ratio: 1.443
Max Drawdown: -61.7%
Avg Drawdown: -12.5%
Normalized Score: -0.137
Lookback periods: [127, 135, 140] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,765,097,142
Annual Return: 44.84%
Sharpe Ratio: 1.48649
Sortino Ratio: 1.436
Max Drawdown: -56.0%
Avg Drawdown: -12.5%
Normalized Score: 0.047
Lookback periods: [137, 138, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 33sRunning iteration 51/1500... Est. remaining: 16m 30sRunning iteration 61/1500... Est. remaining: 15m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,304,950,825
Annual Return: 45.40%
Sharpe Ratio: 1.47905
Sortino Ratio: 1.442
Max Drawdown: -60.6%
Avg Drawdown: -11.8%
Normalized Score: 0.062
Lookback periods: [159, 187, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 34sRunning iteration 81/1500... Est. remaining: 15m 8sRunning iteration 91/1500... Est. remaining: 14m 41sRunning iteration 101/1500... Est. remaining: 14m 18sbest_combination: {'lookbacks': [159, 187, 197], 'score': np.float64(0.0624871407553627), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,015,578,647
Annual Return: 46.04%
Sharpe Ratio: 1.52467
Sortino Ratio: 1.470
Max Drawdown: -58.8%
Avg Drawdown: -12.1%
Normalized Score: 0.228
Lookback periods: [146, 148, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,125,785,894
Annual Return: 45.22%
Sharpe Ratio: 1.50801
Sortino Ratio: 1.466
Max Drawdown: -55.0%
Avg Drawdown: -11.7%
Normalized Score: 0.312
Lookback periods: [110, 136, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,206,546,541
Annual Return: 47.57%
Sharpe Ratio: 1.57430
Sortino Ratio: 1.535
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.625
Lookback periods: [138, 151, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 14m 25sRunning iteration 131/1500... Est. remaining: 14m 6sRunning iteration 141/1500... Est. remaining: 13m 49sRunning iteration 151/1500... Est. remaining: 13m 34sRunning iteration 161/1500... Est. remaining: 13m 19sRunning iteration 171/1500... Est. remaining: 13m 6sRunning iteration 181/1500... Est. remaining: 12m 54sRunning iteration 191/1500... Est. remaining: 12m 43sRunning iteration 201/1500... Est. remaining: 12m 33sbest_combination: {'lookbacks': [138, 151, 156], 'score': np.float64(0.6245070097370454), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 24sRunning iteration 221/1500... Est. remaining: 12m 15sRunning iteration 231/1500... Est. remaining: 12m 7sRunning iteration 241/1500... Est. remaining: 11m 58sRunning iteration 251/1500... Est. remaining: 11m 49sRunning iteration 261/1500... Est. remaining: 11m 41sRunning iteration 271/1500... Est. remaining: 11m 32sRunning iteration 281/1500... Est. remaining: 11m 24sRunning iteration 291/1500... Est. remaining: 11m 16sRunning iteration 301/1500... Est. remaining: 11m 9sbest_combination: {'lookbacks': [138, 151, 156], 'score': np.float64(0.6245070097370454), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 1sRunning iteration 321/1500... Est. remaining: 10m 54sRunning iteration 331/1500... Est. remaining: 10m 47sRunning iteration 341/1500... Est. remaining: 10m 40sRunning iteration 351/1500... Est. remaining: 10m 33sRunning iteration 361/1500... Est. remaining: 10m 26sRunning iteration 371/1500... Est. remaining: 10m 20sRunning iteration 381/1500... Est. remaining: 10m 14sRunning iteration 391/1500... Est. remaining: 10m 9sRunning iteration 401/1500... Est. remaining: 10m 3sbest_combination: {'lookbacks': [138, 151, 156], 'score': np.float64(0.6245070097370454), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,733,787,347
Annual Return: 48.86%
Sharpe Ratio: 1.59705
Sortino Ratio: 1.566
Max Drawdown: -57.8%
Avg Drawdown: -12.2%
Normalized Score: 0.747
Lookback periods: [130, 131, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 54sRunning iteration 431/1500... Est. remaining: 9m 47sRunning iteration 441/1500... Est. remaining: 9m 41sRunning iteration 451/1500... Est. remaining: 9m 35sRunning iteration 461/1500... Est. remaining: 9m 29sRunning iteration 471/1500... Est. remaining: 9m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,677,941,807
Annual Return: 44.74%
Sharpe Ratio: 1.60567
Sortino Ratio: 1.525
Max Drawdown: -36.6%
Avg Drawdown: -8.6%
Normalized Score: 1.538
Lookback periods: [52, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 9m 19sRunning iteration 491/1500... Est. remaining: 9m 13sRunning iteration 501/1500... Est. remaining: 9m 7sbest_combination: {'lookbacks': [52, 52, 97], 'score': np.float64(1.5377549277159666), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 1sRunning iteration 521/1500... Est. remaining: 8m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.747
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 8m 51sRunning iteration 541/1500... Est. remaining: 8m 46sRunning iteration 551/1500... Est. remaining: 8m 39sRunning iteration 561/1500... Est. remaining: 8m 33sRunning iteration 571/1500... Est. remaining: 8m 27sRunning iteration 581/1500... Est. remaining: 8m 21sRunning iteration 591/1500... Est. remaining: 8m 15sRunning iteration 601/1500... Est. remaining: 8m 9sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 3sRunning iteration 621/1500... Est. remaining: 7m 57sRunning iteration 631/1500... Est. remaining: 7m 51sRunning iteration 641/1500... Est. remaining: 7m 45sRunning iteration 651/1500... Est. remaining: 7m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 35sRunning iteration 671/1500... Est. remaining: 7m 29sRunning iteration 681/1500... Est. remaining: 7m 24sRunning iteration 691/1500... Est. remaining: 7m 18sRunning iteration 701/1500... Est. remaining: 7m 12sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 6sRunning iteration 721/1500... Est. remaining: 7m 1sRunning iteration 731/1500... Est. remaining: 6m 55sRunning iteration 741/1500... Est. remaining: 6m 49sRunning iteration 751/1500... Est. remaining: 6m 44sRunning iteration 761/1500... Est. remaining: 6m 38sRunning iteration 771/1500... Est. remaining: 6m 33sRunning iteration 781/1500... Est. remaining: 6m 27sRunning iteration 791/1500... Est. remaining: 6m 22sRunning iteration 801/1500... Est. remaining: 6m 16sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 10sRunning iteration 821/1500... Est. remaining: 6m 5sRunning iteration 831/1500... Est. remaining: 5m 59sRunning iteration 841/1500... Est. remaining: 5m 54sRunning iteration 851/1500... Est. remaining: 5m 48sRunning iteration 861/1500... Est. remaining: 5m 42sRunning iteration 871/1500... Est. remaining: 5m 37sRunning iteration 881/1500... Est. remaining: 5m 31sRunning iteration 891/1500... Est. remaining: 5m 26sRunning iteration 901/1500... Est. remaining: 5m 20sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 15sRunning iteration 921/1500... Est. remaining: 5m 9sRunning iteration 931/1500... Est. remaining: 5m 4sRunning iteration 941/1500... Est. remaining: 4m 58sRunning iteration 951/1500... Est. remaining: 4m 53sRunning iteration 961/1500... Est. remaining: 4m 47sRunning iteration 971/1500... Est. remaining: 4m 42sRunning iteration 981/1500... Est. remaining: 4m 36sRunning iteration 991/1500... Est. remaining: 4m 31sRunning iteration 1001/1500... Est. remaining: 4m 25sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 20sRunning iteration 1021/1500... Est. remaining: 4m 15sRunning iteration 1031/1500... Est. remaining: 4m 9sRunning iteration 1041/1500... Est. remaining: 4m 4sRunning iteration 1051/1500... Est. remaining: 3m 58sRunning iteration 1061/1500... Est. remaining: 3m 53sRunning iteration 1071/1500... Est. remaining: 3m 48sRunning iteration 1081/1500... Est. remaining: 3m 42sRunning iteration 1091/1500... Est. remaining: 3m 37sRunning iteration 1101/1500... Est. remaining: 3m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 26sRunning iteration 1121/1500... Est. remaining: 3m 21sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 10sRunning iteration 1151/1500... Est. remaining: 3m 5sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 54sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 33sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.94
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9365)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Sun Aug 24 23:01:01 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $856,657,488
Annual Return: 38.78%
Sharpe Ratio: 1.31897
Sortino Ratio: 1.240
Max Drawdown: -62.8%
Avg Drawdown: -12.4%
Normalized Score: -1.235
Lookback periods: [50, 151, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,146,225,259
Annual Return: 44.09%
Sharpe Ratio: 1.45110
Sortino Ratio: 1.410
Max Drawdown: -61.4%
Avg Drawdown: -12.6%
Normalized Score: -0.296
Lookback periods: [126, 169, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,279,576,451
Annual Return: 44.26%
Sharpe Ratio: 1.46062
Sortino Ratio: 1.424
Max Drawdown: -61.4%
Avg Drawdown: -12.5%
Normalized Score: -0.232
Lookback periods: [127, 138, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 18sRunning iteration 31/1500... Est. remaining: 18m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,496,935,288
Annual Return: 43.13%
Sharpe Ratio: 1.45426
Sortino Ratio: 1.390
Max Drawdown: -56.9%
Avg Drawdown: -12.4%
Normalized Score: -0.232
Lookback periods: [94, 130, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 17m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,057,533,707
Annual Return: 42.33%
Sharpe Ratio: 1.46279
Sortino Ratio: 1.370
Max Drawdown: -56.4%
Avg Drawdown: -11.4%
Normalized Score: -0.171
Lookback periods: [61, 131, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 16m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,050,107,319
Annual Return: 42.32%
Sharpe Ratio: 1.45142
Sortino Ratio: 1.378
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: 0.038
Lookback periods: [86, 92, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,036,475,884
Annual Return: 45.13%
Sharpe Ratio: 1.47555
Sortino Ratio: 1.440
Max Drawdown: -56.9%
Avg Drawdown: -12.0%
Normalized Score: 0.122
Lookback periods: [147, 157, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,530,488,387
Annual Return: 47.16%
Sharpe Ratio: 1.53983
Sortino Ratio: 1.503
Max Drawdown: -58.5%
Avg Drawdown: -12.4%
Normalized Score: 0.374
Lookback periods: [141, 155, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 16m 47sRunning iteration 81/1500... Est. remaining: 16m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,088,707,297
Annual Return: 46.10%
Sharpe Ratio: 1.52367
Sortino Ratio: 1.477
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.420
Lookback periods: [138, 156, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 15m 51sRunning iteration 101/1500... Est. remaining: 15m 21sbest_combination: {'lookbacks': [138, 156, 161], 'score': np.float64(0.42004128474008606), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 56sRunning iteration 121/1500... Est. remaining: 14m 34sRunning iteration 131/1500... Est. remaining: 14m 15sRunning iteration 141/1500... Est. remaining: 14m 0sRunning iteration 151/1500... Est. remaining: 13m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,519,280,504
Annual Return: 49.19%
Sharpe Ratio: 1.58091
Sortino Ratio: 1.546
Max Drawdown: -60.2%
Avg Drawdown: -11.2%
Normalized Score: 0.801
Lookback periods: [183, 189, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/1500... Est. remaining: 13m 40sRunning iteration 171/1500... Est. remaining: 13m 26sRunning iteration 181/1500... Est. remaining: 13m 13sRunning iteration 191/1500... Est. remaining: 13m 0sRunning iteration 201/1500... Est. remaining: 12m 48sbest_combination: {'lookbacks': [183, 189, 196], 'score': np.float64(0.8006126591115537), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 37sRunning iteration 221/1500... Est. remaining: 12m 26sRunning iteration 231/1500... Est. remaining: 12m 16sRunning iteration 241/1500... Est. remaining: 12m 7sRunning iteration 251/1500... Est. remaining: 11m 57sRunning iteration 261/1500... Est. remaining: 11m 48sRunning iteration 271/1500... Est. remaining: 11m 39sRunning iteration 281/1500... Est. remaining: 11m 31sRunning iteration 291/1500... Est. remaining: 11m 23sRunning iteration 301/1500... Est. remaining: 11m 15sbest_combination: {'lookbacks': [183, 189, 196], 'score': np.float64(0.8006126591115537), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 8sRunning iteration 321/1500... Est. remaining: 11m 0sRunning iteration 331/1500... Est. remaining: 10m 52sRunning iteration 341/1500... Est. remaining: 10m 44sRunning iteration 351/1500... Est. remaining: 10m 37sRunning iteration 361/1500... Est. remaining: 10m 30sRunning iteration 371/1500... Est. remaining: 10m 23sRunning iteration 381/1500... Est. remaining: 10m 16sRunning iteration 391/1500... Est. remaining: 10m 9sRunning iteration 401/1500... Est. remaining: 10m 2sbest_combination: {'lookbacks': [183, 189, 196], 'score': np.float64(0.8006126591115537), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 56sRunning iteration 421/1500... Est. remaining: 9m 49sRunning iteration 431/1500... Est. remaining: 9m 42sRunning iteration 441/1500... Est. remaining: 9m 36sRunning iteration 451/1500... Est. remaining: 9m 29sRunning iteration 461/1500... Est. remaining: 9m 23sRunning iteration 471/1500... Est. remaining: 9m 17sRunning iteration 481/1500... Est. remaining: 9m 10sRunning iteration 491/1500... Est. remaining: 9m 4sRunning iteration 501/1500... Est. remaining: 8m 58sbest_combination: {'lookbacks': [183, 189, 196], 'score': np.float64(0.8006126591115537), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 52sRunning iteration 521/1500... Est. remaining: 8m 46sRunning iteration 531/1500... Est. remaining: 8m 40sRunning iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 29sRunning iteration 561/1500... Est. remaining: 8m 23sRunning iteration 571/1500... Est. remaining: 8m 17sRunning iteration 581/1500... Est. remaining: 8m 12sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 0sbest_combination: {'lookbacks': [183, 189, 196], 'score': np.float64(0.8006126591115537), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 54sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 43sRunning iteration 641/1500... Est. remaining: 7m 37sRunning iteration 651/1500... Est. remaining: 7m 32sRunning iteration 661/1500... Est. remaining: 7m 26sRunning iteration 671/1500... Est. remaining: 7m 20sRunning iteration 681/1500... Est. remaining: 7m 15sRunning iteration 691/1500... Est. remaining: 7m 9sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [183, 189, 196], 'score': np.float64(0.8006126591115537), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 58sRunning iteration 721/1500... Est. remaining: 6m 52sRunning iteration 731/1500... Est. remaining: 6m 47sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 36sRunning iteration 761/1500... Est. remaining: 6m 30sRunning iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 14sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [183, 189, 196], 'score': np.float64(0.8006126591115537), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,353,589,006
Annual Return: 49.52%
Sharpe Ratio: 1.60492
Sortino Ratio: 1.562
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.889
Lookback periods: [181, 190, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 841/1500... Est. remaining: 5m 48sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 37sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [181, 190, 197], 'score': np.float64(0.8886670459593526), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 27sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [181, 190, 197], 'score': np.float64(0.8886670459593526), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [181, 190, 197], 'score': np.float64(0.8886670459593526), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [181, 190, 197], 'score': np.float64(0.8886670459593526), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,890,149,913
Annual Return: 50.07%
Sharpe Ratio: 1.61380
Sortino Ratio: 1.581
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.979
Lookback periods: [181, 189, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.9789098125295336), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.9789098125295336), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 0.98
best_combination: {'lookbacks': [181, 189, 196], 'score': np.float64(0.9789098125295336), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [181, 189, 196] (score: 0.9789)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [181, 189, 196] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 122 selections (29.3%)
2. sp500_hma: 99 selections (23.8%)
3. naz100_pine: 84 selections (20.2%)
4. naz100_pi: 72 selections (17.3%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,890,149,913.25
Average Annualized Gain: 50.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Sun Aug 24 23:14:13 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $219,062,572
Annual Return: 33.43%
Sharpe Ratio: 1.15114
Sortino Ratio: 1.069
Max Drawdown: -62.2%
Avg Drawdown: -14.5%
Normalized Score: -2.499
Lookback periods: [70, 74, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,328,965,925
Annual Return: 42.84%
Sharpe Ratio: 1.42531
Sortino Ratio: 1.377
Max Drawdown: -66.9%
Avg Drawdown: -13.2%
Normalized Score: -0.766
Lookback periods: [127, 135, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,452,578,518
Annual Return: 40.91%
Sharpe Ratio: 1.39203
Sortino Ratio: 1.313
Max Drawdown: -55.6%
Avg Drawdown: -11.8%
Normalized Score: -0.498
Lookback periods: [64, 114, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,102,717,829
Annual Return: 45.20%
Sharpe Ratio: 1.48082
Sortino Ratio: 1.439
Max Drawdown: -59.2%
Avg Drawdown: -13.1%
Normalized Score: -0.117
Lookback periods: [148, 152, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,241,447,251
Annual Return: 45.33%
Sharpe Ratio: 1.48761
Sortino Ratio: 1.450
Max Drawdown: -64.6%
Avg Drawdown: -11.8%
Normalized Score: -0.061
Lookback periods: [146, 159, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,774,021,432
Annual Return: 46.63%
Sharpe Ratio: 1.53584
Sortino Ratio: 1.491
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 0.563
Lookback periods: [140, 156, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 21m 10sRunning iteration 41/1500... Est. remaining: 18m 53sRunning iteration 51/1500... Est. remaining: 17m 35sRunning iteration 61/1500... Est. remaining: 16m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,620,465,095
Annual Return: 47.81%
Sharpe Ratio: 1.55810
Sortino Ratio: 1.520
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.808
Lookback periods: [156, 160, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 16m 22sRunning iteration 81/1500... Est. remaining: 15m 45sRunning iteration 91/1500... Est. remaining: 15m 13sRunning iteration 101/1500... Est. remaining: 14m 48sbest_combination: {'lookbacks': [156, 160, 172], 'score': np.float64(0.8083236022676553), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 26sRunning iteration 121/1500... Est. remaining: 14m 7sRunning iteration 131/1500... Est. remaining: 13m 49sRunning iteration 141/1500... Est. remaining: 13m 34sRunning iteration 151/1500... Est. remaining: 13m 20sRunning iteration 161/1500... Est. remaining: 13m 8sRunning iteration 171/1500... Est. remaining: 12m 56sRunning iteration 181/1500... Est. remaining: 12m 45sRunning iteration 191/1500... Est. remaining: 12m 34sRunning iteration 201/1500... Est. remaining: 12m 25sbest_combination: {'lookbacks': [156, 160, 172], 'score': np.float64(0.8083236022676553), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 15sRunning iteration 221/1500... Est. remaining: 12m 6sRunning iteration 231/1500... Est. remaining: 11m 58sRunning iteration 241/1500... Est. remaining: 11m 49sRunning iteration 251/1500... Est. remaining: 11m 41sRunning iteration 261/1500... Est. remaining: 11m 32sRunning iteration 271/1500... Est. remaining: 11m 25sRunning iteration 281/1500... Est. remaining: 11m 17sRunning iteration 291/1500... Est. remaining: 11m 9sRunning iteration 301/1500... Est. remaining: 11m 2sbest_combination: {'lookbacks': [156, 160, 172], 'score': np.float64(0.8083236022676553), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 55sRunning iteration 321/1500... Est. remaining: 10m 48sRunning iteration 331/1500... Est. remaining: 10m 42sRunning iteration 341/1500... Est. remaining: 10m 35sRunning iteration 351/1500... Est. remaining: 10m 29sRunning iteration 361/1500... Est. remaining: 10m 23sRunning iteration 371/1500... Est. remaining: 10m 16sRunning iteration 381/1500... Est. remaining: 10m 10sRunning iteration 391/1500... Est. remaining: 10m 5sRunning iteration 401/1500... Est. remaining: 10m 0sbest_combination: {'lookbacks': [156, 160, 172], 'score': np.float64(0.8083236022676553), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 54sRunning iteration 421/1500... Est. remaining: 9m 48sRunning iteration 431/1500... Est. remaining: 9m 41sRunning iteration 441/1500... Est. remaining: 9m 35sRunning iteration 451/1500... Est. remaining: 9m 29sRunning iteration 461/1500... Est. remaining: 9m 23sRunning iteration 471/1500... Est. remaining: 9m 17sRunning iteration 481/1500... Est. remaining: 9m 10sRunning iteration 491/1500... Est. remaining: 9m 4sRunning iteration 501/1500... Est. remaining: 8m 58sbest_combination: {'lookbacks': [156, 160, 172], 'score': np.float64(0.8083236022676553), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 52sRunning iteration 521/1500... Est. remaining: 8m 46sRunning iteration 531/1500... Est. remaining: 8m 41sRunning iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 29sRunning iteration 561/1500... Est. remaining: 8m 23sRunning iteration 571/1500... Est. remaining: 8m 17sRunning iteration 581/1500... Est. remaining: 8m 12sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 0sbest_combination: {'lookbacks': [156, 160, 172], 'score': np.float64(0.8083236022676553), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 54sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 43sRunning iteration 641/1500... Est. remaining: 7m 38sRunning iteration 651/1500... Est. remaining: 7m 32sRunning iteration 661/1500... Est. remaining: 7m 26sRunning iteration 671/1500... Est. remaining: 7m 21sRunning iteration 681/1500... Est. remaining: 7m 15sRunning iteration 691/1500... Est. remaining: 7m 10sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [156, 160, 172], 'score': np.float64(0.8083236022676553), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 59sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 48sRunning iteration 741/1500... Est. remaining: 6m 43sRunning iteration 751/1500... Est. remaining: 6m 37sRunning iteration 761/1500... Est. remaining: 6m 32sRunning iteration 771/1500... Est. remaining: 6m 27sRunning iteration 781/1500... Est. remaining: 6m 21sRunning iteration 791/1500... Est. remaining: 6m 16sRunning iteration 801/1500... Est. remaining: 6m 11sbest_combination: {'lookbacks': [156, 160, 172], 'score': np.float64(0.8083236022676553), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 5sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 55sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 44sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 33sRunning iteration 881/1500... Est. remaining: 5m 28sRunning iteration 891/1500... Est. remaining: 5m 22sRunning iteration 901/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [156, 160, 172], 'score': np.float64(0.8083236022676553), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 12sRunning iteration 921/1500... Est. remaining: 5m 7sRunning iteration 931/1500... Est. remaining: 5m 1sRunning iteration 941/1500... Est. remaining: 4m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,647,640,961
Annual Return: 43.37%
Sharpe Ratio: 1.54990
Sortino Ratio: 1.433
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 1.147
Lookback periods: [51, 52, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,044,945,767
Annual Return: 43.95%
Sharpe Ratio: 1.57562
Sortino Ratio: 1.473
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.284
Lookback periods: [50, 52, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 971/1500... Est. remaining: 4m 41sRunning iteration 981/1500... Est. remaining: 4m 36sRunning iteration 991/1500... Est. remaining: 4m 30sRunning iteration 1001/1500... Est. remaining: 4m 25sbest_combination: {'lookbacks': [50, 52, 83], 'score': np.float64(1.2841070692364784), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 14sRunning iteration 1031/1500... Est. remaining: 4m 9sRunning iteration 1041/1500... Est. remaining: 4m 3sRunning iteration 1051/1500... Est. remaining: 3m 58sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,229,417,452
Annual Return: 44.20%
Sharpe Ratio: 1.57610
Sortino Ratio: 1.489
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.382
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,916,377,953
Annual Return: 45.00%
Sharpe Ratio: 1.61386
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.628
Lookback periods: [50, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1081/1500... Est. remaining: 3m 42sRunning iteration 1091/1500... Est. remaining: 3m 37sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [50, 54, 95], 'score': np.float64(1.6281486266472367), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 26sRunning iteration 1121/1500... Est. remaining: 3m 21sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.670
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.673
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1151/1500... Est. remaining: 3m 5sRunning iteration 1161/1500... Est. remaining: 3m 0sRunning iteration 1171/1500... Est. remaining: 2m 55sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 44sRunning iteration 1201/1500... Est. remaining: 2m 39sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.6729045491906427), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 33sRunning iteration 1221/1500... Est. remaining: 2m 28sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.747
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1261/1500... Est. remaining: 2m 7sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 51sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.94
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9365)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Sun Aug 24 23:27:29 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $219,358,329
Annual Return: 33.43%
Sharpe Ratio: 1.17207
Sortino Ratio: 1.082
Max Drawdown: -66.1%
Avg Drawdown: -14.2%
Normalized Score: -2.549
Lookback periods: [68, 95, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $331,698,382
Annual Return: 35.03%
Sharpe Ratio: 1.21162
Sortino Ratio: 1.122
Max Drawdown: -62.1%
Avg Drawdown: -13.7%
Normalized Score: -2.079
Lookback periods: [74, 169, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,224,096,244
Annual Return: 44.19%
Sharpe Ratio: 1.45281
Sortino Ratio: 1.413
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: -0.086
Lookback periods: [145, 167, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,230,693,757
Annual Return: 46.22%
Sharpe Ratio: 1.50886
Sortino Ratio: 1.468
Max Drawdown: -58.5%
Avg Drawdown: -12.1%
Normalized Score: 0.231
Lookback periods: [136, 155, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,640,289,588
Annual Return: 46.53%
Sharpe Ratio: 1.50155
Sortino Ratio: 1.468
Max Drawdown: -62.5%
Avg Drawdown: -11.4%
Normalized Score: 0.240
Lookback periods: [176, 191, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 20m 10sRunning iteration 41/1500... Est. remaining: 18m 10sRunning iteration 51/1500... Est. remaining: 16m 55sRunning iteration 61/1500... Est. remaining: 16m 3sRunning iteration 71/1500... Est. remaining: 15m 27sRunning iteration 81/1500... Est. remaining: 14m 56sRunning iteration 91/1500... Est. remaining: 14m 32sRunning iteration 101/1500... Est. remaining: 14m 13sbest_combination: {'lookbacks': [176, 191, 192], 'score': np.float64(0.23961929253256234), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 55sRunning iteration 121/1500... Est. remaining: 13m 40sRunning iteration 131/1500... Est. remaining: 13m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,851,850,614
Annual Return: 48.45%
Sharpe Ratio: 1.57552
Sortino Ratio: 1.539
Max Drawdown: -60.2%
Avg Drawdown: -11.1%
Normalized Score: 0.731
Lookback periods: [183, 189, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 13m 25sRunning iteration 151/1500... Est. remaining: 13m 13sRunning iteration 161/1500... Est. remaining: 13m 1sRunning iteration 171/1500... Est. remaining: 12m 50sRunning iteration 181/1500... Est. remaining: 12m 40sRunning iteration 191/1500... Est. remaining: 12m 29sRunning iteration 201/1500... Est. remaining: 12m 20sbest_combination: {'lookbacks': [183, 189, 192], 'score': np.float64(0.7312921698904478), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 11sRunning iteration 221/1500... Est. remaining: 12m 3sRunning iteration 231/1500... Est. remaining: 11m 55sRunning iteration 241/1500... Est. remaining: 11m 48sRunning iteration 251/1500... Est. remaining: 11m 40sRunning iteration 261/1500... Est. remaining: 11m 32sRunning iteration 271/1500... Est. remaining: 11m 25sRunning iteration 281/1500... Est. remaining: 11m 18sRunning iteration 291/1500... Est. remaining: 11m 11sRunning iteration 301/1500... Est. remaining: 11m 3sbest_combination: {'lookbacks': [183, 189, 192], 'score': np.float64(0.7312921698904478), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 57sRunning iteration 321/1500... Est. remaining: 10m 50sRunning iteration 331/1500... Est. remaining: 10m 43sRunning iteration 341/1500... Est. remaining: 10m 36sRunning iteration 351/1500... Est. remaining: 10m 30sRunning iteration 361/1500... Est. remaining: 10m 24sRunning iteration 371/1500... Est. remaining: 10m 17sRunning iteration 381/1500... Est. remaining: 10m 11sRunning iteration 391/1500... Est. remaining: 10m 4sRunning iteration 401/1500... Est. remaining: 9m 58sbest_combination: {'lookbacks': [183, 189, 192], 'score': np.float64(0.7312921698904478), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 52sRunning iteration 421/1500... Est. remaining: 9m 46sRunning iteration 431/1500... Est. remaining: 9m 40sRunning iteration 441/1500... Est. remaining: 9m 34sRunning iteration 451/1500... Est. remaining: 9m 28sRunning iteration 461/1500... Est. remaining: 9m 22sRunning iteration 471/1500... Est. remaining: 9m 16sRunning iteration 481/1500... Est. remaining: 9m 10sRunning iteration 491/1500... Est. remaining: 9m 4sRunning iteration 501/1500... Est. remaining: 8m 58sbest_combination: {'lookbacks': [183, 189, 192], 'score': np.float64(0.7312921698904478), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 52sRunning iteration 521/1500... Est. remaining: 8m 46sRunning iteration 531/1500... Est. remaining: 8m 40sRunning iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 29sRunning iteration 561/1500... Est. remaining: 8m 24sRunning iteration 571/1500... Est. remaining: 8m 18sRunning iteration 581/1500... Est. remaining: 8m 13sRunning iteration 591/1500... Est. remaining: 8m 7sRunning iteration 601/1500... Est. remaining: 8m 1sbest_combination: {'lookbacks': [183, 189, 192], 'score': np.float64(0.7312921698904478), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 56sRunning iteration 621/1500... Est. remaining: 7m 50sRunning iteration 631/1500... Est. remaining: 7m 44sRunning iteration 641/1500... Est. remaining: 7m 39sRunning iteration 651/1500... Est. remaining: 7m 33sRunning iteration 661/1500... Est. remaining: 7m 28sRunning iteration 671/1500... Est. remaining: 7m 22sRunning iteration 681/1500... Est. remaining: 7m 17sRunning iteration 691/1500... Est. remaining: 7m 11sRunning iteration 701/1500... Est. remaining: 7m 6sbest_combination: {'lookbacks': [183, 189, 192], 'score': np.float64(0.7312921698904478), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 0sRunning iteration 721/1500... Est. remaining: 6m 55sRunning iteration 731/1500... Est. remaining: 6m 49sRunning iteration 741/1500... Est. remaining: 6m 44sRunning iteration 751/1500... Est. remaining: 6m 39sRunning iteration 761/1500... Est. remaining: 6m 33sRunning iteration 771/1500... Est. remaining: 6m 28sRunning iteration 781/1500... Est. remaining: 6m 23sRunning iteration 791/1500... Est. remaining: 6m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,609,438,875
Annual Return: 49.62%
Sharpe Ratio: 1.60306
Sortino Ratio: 1.568
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.911
Lookback periods: [177, 184, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 801/1500... Est. remaining: 6m 13sbest_combination: {'lookbacks': [177, 184, 189], 'score': np.float64(0.9108749373411975), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 8sRunning iteration 821/1500... Est. remaining: 6m 2sRunning iteration 831/1500... Est. remaining: 5m 57sRunning iteration 841/1500... Est. remaining: 5m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,504,333,025
Annual Return: 49.94%
Sharpe Ratio: 1.60523
Sortino Ratio: 1.576
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 1.027
Lookback periods: [176, 188, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 851/1500... Est. remaining: 5m 47sRunning iteration 861/1500... Est. remaining: 5m 41sRunning iteration 871/1500... Est. remaining: 5m 36sRunning iteration 881/1500... Est. remaining: 5m 30sRunning iteration 891/1500... Est. remaining: 5m 25sRunning iteration 901/1500... Est. remaining: 5m 20sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(1.0265783556014618), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 14sRunning iteration 921/1500... Est. remaining: 5m 9sRunning iteration 931/1500... Est. remaining: 5m 3sRunning iteration 941/1500... Est. remaining: 4m 58sRunning iteration 951/1500... Est. remaining: 4m 52sRunning iteration 961/1500... Est. remaining: 4m 47sRunning iteration 971/1500... Est. remaining: 4m 42sRunning iteration 981/1500... Est. remaining: 4m 36sRunning iteration 991/1500... Est. remaining: 4m 31sRunning iteration 1001/1500... Est. remaining: 4m 25sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(1.0265783556014618), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 20sRunning iteration 1021/1500... Est. remaining: 4m 15sRunning iteration 1031/1500... Est. remaining: 4m 9sRunning iteration 1041/1500... Est. remaining: 4m 4sRunning iteration 1051/1500... Est. remaining: 3m 59sRunning iteration 1061/1500... Est. remaining: 3m 53sRunning iteration 1071/1500... Est. remaining: 3m 48sRunning iteration 1081/1500... Est. remaining: 3m 42sRunning iteration 1091/1500... Est. remaining: 3m 37sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(1.0265783556014618), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 26sRunning iteration 1121/1500... Est. remaining: 3m 21sRunning iteration 1131/1500... Est. remaining: 3m 16sRunning iteration 1141/1500... Est. remaining: 3m 10sRunning iteration 1151/1500... Est. remaining: 3m 5sRunning iteration 1161/1500... Est. remaining: 3m 0sRunning iteration 1171/1500... Est. remaining: 2m 54sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 44sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(1.0265783556014618), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 33sRunning iteration 1221/1500... Est. remaining: 2m 28sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 51sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(1.0265783556014618), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(1.0265783556014618), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.2 minutes
Best normalized score: 1.03
best_combination: {'lookbacks': [176, 188, 197], 'score': np.float64(1.0265783556014618), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [176, 188, 197] (score: 1.0266)

Monte Carlo simulation completed in 13.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 188, 197] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 119 selections (28.6%)
2. sp500_hma: 104 selections (25.0%)
3. naz100_pine: 86 selections (20.7%)
4. naz100_pi: 69 selections (16.6%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,504,333,025.16
Average Annualized Gain: 49.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Sun Aug 24 23:40:47 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $639,721,983
Annual Return: 37.62%
Sharpe Ratio: 1.30754
Sortino Ratio: 1.207
Max Drawdown: -55.0%
Avg Drawdown: -12.3%
Normalized Score: -1.140
Lookback periods: [56, 118, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,857,052,659
Annual Return: 43.69%
Sharpe Ratio: 1.43549
Sortino Ratio: 1.396
Max Drawdown: -67.0%
Avg Drawdown: -13.0%
Normalized Score: -0.625
Lookback periods: [145, 195, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,756,799,143
Annual Return: 41.69%
Sharpe Ratio: 1.41912
Sortino Ratio: 1.350
Max Drawdown: -52.3%
Avg Drawdown: -11.1%
Normalized Score: -0.119
Lookback periods: [87, 107, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,243,733,246
Annual Return: 48.15%
Sharpe Ratio: 1.55803
Sortino Ratio: 1.517
Max Drawdown: -61.7%
Avg Drawdown: -11.7%
Normalized Score: 0.506
Lookback periods: [149, 184, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 58sRunning iteration 21/1500... Est. remaining: 23m 16sRunning iteration 31/1500... Est. remaining: 19m 40sRunning iteration 41/1500... Est. remaining: 17m 48sRunning iteration 51/1500... Est. remaining: 16m 42sRunning iteration 61/1500... Est. remaining: 15m 53sRunning iteration 71/1500... Est. remaining: 15m 14sRunning iteration 81/1500... Est. remaining: 14m 43sRunning iteration 91/1500... Est. remaining: 14m 18sRunning iteration 101/1500... Est. remaining: 13m 57sbest_combination: {'lookbacks': [149, 184, 190], 'score': np.float64(0.5059622853588421), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 39sRunning iteration 121/1500... Est. remaining: 13m 24sRunning iteration 131/1500... Est. remaining: 13m 9sRunning iteration 141/1500... Est. remaining: 12m 57sRunning iteration 151/1500... Est. remaining: 12m 46sRunning iteration 161/1500... Est. remaining: 12m 37sRunning iteration 171/1500... Est. remaining: 12m 27sRunning iteration 181/1500... Est. remaining: 12m 18sRunning iteration 191/1500... Est. remaining: 12m 9sRunning iteration 201/1500... Est. remaining: 12m 1sbest_combination: {'lookbacks': [149, 184, 190], 'score': np.float64(0.5059622853588421), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,970,401,963
Annual Return: 46.78%
Sharpe Ratio: 1.55388
Sortino Ratio: 1.507
Max Drawdown: -56.4%
Avg Drawdown: -11.8%
Normalized Score: 0.506
Lookback periods: [134, 134, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 11m 53sRunning iteration 231/1500... Est. remaining: 11m 45sRunning iteration 241/1500... Est. remaining: 11m 38sRunning iteration 251/1500... Est. remaining: 11m 30sRunning iteration 261/1500... Est. remaining: 11m 22sRunning iteration 271/1500... Est. remaining: 11m 15sRunning iteration 281/1500... Est. remaining: 11m 8sRunning iteration 291/1500... Est. remaining: 11m 2sRunning iteration 301/1500... Est. remaining: 10m 54sbest_combination: {'lookbacks': [134, 134, 148], 'score': np.float64(0.506253219843296), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 49sRunning iteration 321/1500... Est. remaining: 10m 42sRunning iteration 331/1500... Est. remaining: 10m 36sRunning iteration 341/1500... Est. remaining: 10m 30sRunning iteration 351/1500... Est. remaining: 10m 24sRunning iteration 361/1500... Est. remaining: 10m 17sRunning iteration 371/1500... Est. remaining: 10m 11sRunning iteration 381/1500... Est. remaining: 10m 5sRunning iteration 391/1500... Est. remaining: 9m 59sRunning iteration 401/1500... Est. remaining: 9m 52sbest_combination: {'lookbacks': [134, 134, 148], 'score': np.float64(0.506253219843296), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 46sRunning iteration 421/1500... Est. remaining: 9m 40sRunning iteration 431/1500... Est. remaining: 9m 34sRunning iteration 441/1500... Est. remaining: 9m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,024,082,183
Annual Return: 47.47%
Sharpe Ratio: 1.53274
Sortino Ratio: 1.493
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.529
Lookback periods: [179, 190, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/1500... Est. remaining: 9m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,140,018,104
Annual Return: 42.49%
Sharpe Ratio: 1.51116
Sortino Ratio: 1.433
Max Drawdown: -41.5%
Avg Drawdown: -10.4%
Normalized Score: 0.647
Lookback periods: [53, 53, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 9m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,293,289,579
Annual Return: 44.28%
Sharpe Ratio: 1.58522
Sortino Ratio: 1.495
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.466
Lookback periods: [50, 53, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 9m 19sRunning iteration 481/1500... Est. remaining: 9m 13sRunning iteration 491/1500... Est. remaining: 9m 7sRunning iteration 501/1500... Est. remaining: 9m 1sbest_combination: {'lookbacks': [50, 53, 98], 'score': np.float64(1.4660767146385432), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 56sRunning iteration 521/1500... Est. remaining: 8m 50sRunning iteration 531/1500... Est. remaining: 8m 44sRunning iteration 541/1500... Est. remaining: 8m 38sRunning iteration 551/1500... Est. remaining: 8m 32sRunning iteration 561/1500... Est. remaining: 8m 27sRunning iteration 571/1500... Est. remaining: 8m 21sRunning iteration 581/1500... Est. remaining: 8m 15sRunning iteration 591/1500... Est. remaining: 8m 10sRunning iteration 601/1500... Est. remaining: 8m 4sbest_combination: {'lookbacks': [50, 53, 98], 'score': np.float64(1.4660767146385432), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 59sRunning iteration 621/1500... Est. remaining: 7m 53sRunning iteration 631/1500... Est. remaining: 7m 48sRunning iteration 641/1500... Est. remaining: 7m 42sRunning iteration 651/1500... Est. remaining: 7m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,916,377,953
Annual Return: 45.00%
Sharpe Ratio: 1.61386
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.628
Lookback periods: [50, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,622,827,200
Annual Return: 44.68%
Sharpe Ratio: 1.61655
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.652
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 35sRunning iteration 671/1500... Est. remaining: 7m 29sRunning iteration 681/1500... Est. remaining: 7m 24sRunning iteration 691/1500... Est. remaining: 7m 18sRunning iteration 701/1500... Est. remaining: 7m 12sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.6521134029296847), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 6sRunning iteration 721/1500... Est. remaining: 7m 1sRunning iteration 731/1500... Est. remaining: 6m 55sRunning iteration 741/1500... Est. remaining: 6m 49sRunning iteration 751/1500... Est. remaining: 6m 44sRunning iteration 761/1500... Est. remaining: 6m 38sRunning iteration 771/1500... Est. remaining: 6m 32sRunning iteration 781/1500... Est. remaining: 6m 27sRunning iteration 791/1500... Est. remaining: 6m 21sRunning iteration 801/1500... Est. remaining: 6m 16sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(1.6521134029296847), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 10sRunning iteration 821/1500... Est. remaining: 6m 4sRunning iteration 831/1500... Est. remaining: 5m 59sRunning iteration 841/1500... Est. remaining: 5m 53sRunning iteration 851/1500... Est. remaining: 5m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 5m 43sRunning iteration 871/1500... Est. remaining: 5m 37sRunning iteration 881/1500... Est. remaining: 5m 32sRunning iteration 891/1500... Est. remaining: 5m 26sRunning iteration 901/1500... Est. remaining: 5m 21sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 15sRunning iteration 921/1500... Est. remaining: 5m 9sRunning iteration 931/1500... Est. remaining: 5m 4sRunning iteration 941/1500... Est. remaining: 4m 58sRunning iteration 951/1500... Est. remaining: 4m 53sRunning iteration 961/1500... Est. remaining: 4m 47sRunning iteration 971/1500... Est. remaining: 4m 42sRunning iteration 981/1500... Est. remaining: 4m 36sRunning iteration 991/1500... Est. remaining: 4m 31sRunning iteration 1001/1500... Est. remaining: 4m 25sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 20sRunning iteration 1021/1500... Est. remaining: 4m 15sRunning iteration 1031/1500... Est. remaining: 4m 9sRunning iteration 1041/1500... Est. remaining: 4m 4sRunning iteration 1051/1500... Est. remaining: 3m 58sRunning iteration 1061/1500... Est. remaining: 3m 53sRunning iteration 1071/1500... Est. remaining: 3m 47sRunning iteration 1081/1500... Est. remaining: 3m 42sRunning iteration 1091/1500... Est. remaining: 3m 37sRunning iteration 1101/1500... Est. remaining: 3m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 26sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 10sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 54sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.94
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9365)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Sun Aug 24 23:53:58 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,726,813,963
Annual Return: 41.61%
Sharpe Ratio: 1.39124
Sortino Ratio: 1.337
Max Drawdown: -68.1%
Avg Drawdown: -13.7%
Normalized Score: -1.107
Lookback periods: [122, 136, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,293,929,311
Annual Return: 40.44%
Sharpe Ratio: 1.38449
Sortino Ratio: 1.297
Max Drawdown: -55.0%
Avg Drawdown: -11.7%
Normalized Score: -0.547
Lookback periods: [50, 118, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,583,362,867
Annual Return: 46.49%
Sharpe Ratio: 1.51670
Sortino Ratio: 1.481
Max Drawdown: -62.5%
Avg Drawdown: -11.9%
Normalized Score: 0.179
Lookback periods: [149, 170, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,371,584,031
Annual Return: 46.33%
Sharpe Ratio: 1.54465
Sortino Ratio: 1.499
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 0.403
Lookback periods: [135, 152, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 22sRunning iteration 41/1500... Est. remaining: 17m 35sRunning iteration 51/1500... Est. remaining: 16m 28sRunning iteration 61/1500... Est. remaining: 15m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,111,247,573
Annual Return: 46.87%
Sharpe Ratio: 1.52418
Sortino Ratio: 1.487
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 0.479
Lookback periods: [155, 162, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 29sRunning iteration 81/1500... Est. remaining: 14m 59sRunning iteration 91/1500... Est. remaining: 14m 35sRunning iteration 101/1500... Est. remaining: 14m 15sbest_combination: {'lookbacks': [155, 162, 170], 'score': np.float64(0.47868384611645476), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 58sRunning iteration 121/1500... Est. remaining: 13m 43sRunning iteration 131/1500... Est. remaining: 13m 29sRunning iteration 141/1500... Est. remaining: 13m 14sRunning iteration 151/1500... Est. remaining: 13m 2sRunning iteration 161/1500... Est. remaining: 12m 50sRunning iteration 171/1500... Est. remaining: 12m 41sRunning iteration 181/1500... Est. remaining: 12m 31sRunning iteration 191/1500... Est. remaining: 12m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,845,743,844
Annual Return: 48.45%
Sharpe Ratio: 1.55970
Sortino Ratio: 1.516
Max Drawdown: -60.2%
Avg Drawdown: -11.1%
Normalized Score: 0.683
Lookback periods: [189, 189, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 12m 21sbest_combination: {'lookbacks': [189, 189, 199], 'score': np.float64(0.6829072792580761), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 12sRunning iteration 221/1500... Est. remaining: 12m 3sRunning iteration 231/1500... Est. remaining: 11m 54sRunning iteration 241/1500... Est. remaining: 11m 46sRunning iteration 251/1500... Est. remaining: 11m 38sRunning iteration 261/1500... Est. remaining: 11m 31sRunning iteration 271/1500... Est. remaining: 11m 23sRunning iteration 281/1500... Est. remaining: 11m 15sRunning iteration 291/1500... Est. remaining: 11m 8sRunning iteration 301/1500... Est. remaining: 11m 1sbest_combination: {'lookbacks': [189, 189, 199], 'score': np.float64(0.6829072792580761), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,991,025,978
Annual Return: 47.45%
Sharpe Ratio: 1.54993
Sortino Ratio: 1.509
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.747
Lookback periods: [156, 162, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/1500... Est. remaining: 10m 58sRunning iteration 321/1500... Est. remaining: 10m 51sRunning iteration 331/1500... Est. remaining: 10m 45sRunning iteration 341/1500... Est. remaining: 10m 38sRunning iteration 351/1500... Est. remaining: 10m 31sRunning iteration 361/1500... Est. remaining: 10m 24sRunning iteration 371/1500... Est. remaining: 10m 18sRunning iteration 381/1500... Est. remaining: 10m 11sRunning iteration 391/1500... Est. remaining: 10m 5sRunning iteration 401/1500... Est. remaining: 9m 58sbest_combination: {'lookbacks': [156, 162, 174], 'score': np.float64(0.7466647521558359), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 52sRunning iteration 421/1500... Est. remaining: 9m 45sRunning iteration 431/1500... Est. remaining: 9m 39sRunning iteration 441/1500... Est. remaining: 9m 33sRunning iteration 451/1500... Est. remaining: 9m 27sRunning iteration 461/1500... Est. remaining: 9m 22sRunning iteration 471/1500... Est. remaining: 9m 16sRunning iteration 481/1500... Est. remaining: 9m 10sRunning iteration 491/1500... Est. remaining: 9m 4sRunning iteration 501/1500... Est. remaining: 8m 58sbest_combination: {'lookbacks': [156, 162, 174], 'score': np.float64(0.7466647521558359), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 53sRunning iteration 521/1500... Est. remaining: 8m 47sRunning iteration 531/1500... Est. remaining: 8m 41sRunning iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 29sRunning iteration 561/1500... Est. remaining: 8m 23sRunning iteration 571/1500... Est. remaining: 8m 17sRunning iteration 581/1500... Est. remaining: 8m 11sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 0sbest_combination: {'lookbacks': [156, 162, 174], 'score': np.float64(0.7466647521558359), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 54sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,954,435,532
Annual Return: 43.83%
Sharpe Ratio: 1.55829
Sortino Ratio: 1.459
Max Drawdown: -38.0%
Avg Drawdown: -9.5%
Normalized Score: 1.116
Lookback periods: [51, 54, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 7m 40sRunning iteration 651/1500... Est. remaining: 7m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,706,662,664
Annual Return: 43.46%
Sharpe Ratio: 1.54505
Sortino Ratio: 1.456
Max Drawdown: -35.6%
Avg Drawdown: -9.1%
Normalized Score: 1.203
Lookback periods: [50, 53, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 30sRunning iteration 671/1500... Est. remaining: 7m 24sRunning iteration 681/1500... Est. remaining: 7m 19sRunning iteration 691/1500... Est. remaining: 7m 13sRunning iteration 701/1500... Est. remaining: 7m 7sbest_combination: {'lookbacks': [50, 53, 87], 'score': np.float64(1.2027727603410845), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,916,377,953
Annual Return: 45.00%
Sharpe Ratio: 1.61386
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.628
Lookback periods: [50, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 6m 57sRunning iteration 731/1500... Est. remaining: 6m 52sRunning iteration 741/1500... Est. remaining: 6m 46sRunning iteration 751/1500... Est. remaining: 6m 40sRunning iteration 761/1500... Est. remaining: 6m 35sRunning iteration 771/1500... Est. remaining: 6m 29sRunning iteration 781/1500... Est. remaining: 6m 23sRunning iteration 791/1500... Est. remaining: 6m 18sRunning iteration 801/1500... Est. remaining: 6m 12sbest_combination: {'lookbacks': [50, 54, 95], 'score': np.float64(1.6281486266472367), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 7sRunning iteration 821/1500... Est. remaining: 6m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.716
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 831/1500... Est. remaining: 5m 57sRunning iteration 841/1500... Est. remaining: 5m 51sRunning iteration 851/1500... Est. remaining: 5m 46sRunning iteration 861/1500... Est. remaining: 5m 40sRunning iteration 871/1500... Est. remaining: 5m 35sRunning iteration 881/1500... Est. remaining: 5m 29sRunning iteration 891/1500... Est. remaining: 5m 24sRunning iteration 901/1500... Est. remaining: 5m 18sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.716229926850809), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.747
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 921/1500... Est. remaining: 5m 8sRunning iteration 931/1500... Est. remaining: 5m 3sRunning iteration 941/1500... Est. remaining: 4m 57sRunning iteration 951/1500... Est. remaining: 4m 52sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 41sRunning iteration 981/1500... Est. remaining: 4m 36sRunning iteration 991/1500... Est. remaining: 4m 30sRunning iteration 1001/1500... Est. remaining: 4m 25sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1021/1500... Est. remaining: 4m 15sRunning iteration 1031/1500... Est. remaining: 4m 9sRunning iteration 1041/1500... Est. remaining: 4m 4sRunning iteration 1051/1500... Est. remaining: 3m 59sRunning iteration 1061/1500... Est. remaining: 3m 53sRunning iteration 1071/1500... Est. remaining: 3m 48sRunning iteration 1081/1500... Est. remaining: 3m 42sRunning iteration 1091/1500... Est. remaining: 3m 37sRunning iteration 1101/1500... Est. remaining: 3m 32sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 26sRunning iteration 1121/1500... Est. remaining: 3m 21sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 10sRunning iteration 1151/1500... Est. remaining: 3m 5sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 54sRunning iteration 1181/1500... Est. remaining: 2m 49sRunning iteration 1191/1500... Est. remaining: 2m 44sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 33sRunning iteration 1221/1500... Est. remaining: 2m 28sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 12sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 56sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.94
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9365)

Monte Carlo simulation completed in 13.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 00:07:15 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,079,084,554
Annual Return: 42.38%
Sharpe Ratio: 1.41400
Sortino Ratio: 1.365
Max Drawdown: -67.5%
Avg Drawdown: -13.7%
Normalized Score: -0.953
Lookback periods: [109, 143, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,240,981,358
Annual Return: 40.27%
Sharpe Ratio: 1.45275
Sortino Ratio: 1.340
Max Drawdown: -38.3%
Avg Drawdown: -9.9%
Normalized Score: 0.405
Lookback periods: [51, 52, 77] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 0sRunning iteration 21/1500... Est. remaining: 19m 44sRunning iteration 31/1500... Est. remaining: 17m 10sRunning iteration 41/1500... Est. remaining: 15m 52sRunning iteration 51/1500... Est. remaining: 15m 3sRunning iteration 61/1500... Est. remaining: 14m 29sRunning iteration 71/1500... Est. remaining: 14m 3sRunning iteration 81/1500... Est. remaining: 13m 43sRunning iteration 91/1500... Est. remaining: 13m 27sRunning iteration 101/1500... Est. remaining: 13m 13sbest_combination: {'lookbacks': [51, 52, 77], 'score': np.float64(0.4053754964598749), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 1sRunning iteration 121/1500... Est. remaining: 12m 51sRunning iteration 131/1500... Est. remaining: 12m 39sRunning iteration 141/1500... Est. remaining: 12m 29sRunning iteration 151/1500... Est. remaining: 12m 20sRunning iteration 161/1500... Est. remaining: 12m 11sRunning iteration 171/1500... Est. remaining: 12m 4sRunning iteration 181/1500... Est. remaining: 11m 56sRunning iteration 191/1500... Est. remaining: 11m 49sRunning iteration 201/1500... Est. remaining: 11m 42sbest_combination: {'lookbacks': [51, 52, 77], 'score': np.float64(0.4053754964598749), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 34sRunning iteration 221/1500... Est. remaining: 11m 28sRunning iteration 231/1500... Est. remaining: 11m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,594,365,550
Annual Return: 47.20%
Sharpe Ratio: 1.55330
Sortino Ratio: 1.510
Max Drawdown: -57.2%
Avg Drawdown: -12.5%
Normalized Score: 0.421
Lookback periods: [128, 149, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/1500... Est. remaining: 11m 23sRunning iteration 251/1500... Est. remaining: 11m 16sRunning iteration 261/1500... Est. remaining: 11m 9sRunning iteration 271/1500... Est. remaining: 11m 2sRunning iteration 281/1500... Est. remaining: 10m 55sRunning iteration 291/1500... Est. remaining: 10m 49sRunning iteration 301/1500... Est. remaining: 10m 42sbest_combination: {'lookbacks': [128, 149, 193], 'score': np.float64(0.42069601247677585), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 36sRunning iteration 321/1500... Est. remaining: 10m 30sRunning iteration 331/1500... Est. remaining: 10m 23sRunning iteration 341/1500... Est. remaining: 10m 18sRunning iteration 351/1500... Est. remaining: 10m 12sRunning iteration 361/1500... Est. remaining: 10m 6sRunning iteration 371/1500... Est. remaining: 10m 0sRunning iteration 381/1500... Est. remaining: 9m 54sRunning iteration 391/1500... Est. remaining: 9m 48sRunning iteration 401/1500... Est. remaining: 9m 42sbest_combination: {'lookbacks': [128, 149, 193], 'score': np.float64(0.42069601247677585), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $15,569,439,293
Annual Return: 50.89%
Sharpe Ratio: 1.65679
Sortino Ratio: 1.631
Max Drawdown: -55.0%
Avg Drawdown: -11.5%
Normalized Score: 1.309
Lookback periods: [127, 129, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 33sRunning iteration 431/1500... Est. remaining: 9m 27sRunning iteration 441/1500... Est. remaining: 9m 22sRunning iteration 451/1500... Est. remaining: 9m 16sRunning iteration 461/1500... Est. remaining: 9m 10sRunning iteration 471/1500... Est. remaining: 9m 4sRunning iteration 481/1500... Est. remaining: 8m 58sRunning iteration 491/1500... Est. remaining: 8m 53sRunning iteration 501/1500... Est. remaining: 8m 47sbest_combination: {'lookbacks': [127, 129, 130], 'score': np.float64(1.3090400007434713), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 41sRunning iteration 521/1500... Est. remaining: 8m 36sRunning iteration 531/1500... Est. remaining: 8m 31sRunning iteration 541/1500... Est. remaining: 8m 25sRunning iteration 551/1500... Est. remaining: 8m 20sRunning iteration 561/1500... Est. remaining: 8m 14sRunning iteration 571/1500... Est. remaining: 8m 9sRunning iteration 581/1500... Est. remaining: 8m 3sRunning iteration 591/1500... Est. remaining: 7m 57sRunning iteration 601/1500... Est. remaining: 7m 52sbest_combination: {'lookbacks': [127, 129, 130], 'score': np.float64(1.3090400007434713), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 47sRunning iteration 621/1500... Est. remaining: 7m 41sRunning iteration 631/1500... Est. remaining: 7m 36sRunning iteration 641/1500... Est. remaining: 7m 30sRunning iteration 651/1500... Est. remaining: 7m 25sRunning iteration 661/1500... Est. remaining: 7m 19sRunning iteration 671/1500... Est. remaining: 7m 14sRunning iteration 681/1500... Est. remaining: 7m 9sRunning iteration 691/1500... Est. remaining: 7m 3sRunning iteration 701/1500... Est. remaining: 6m 58sbest_combination: {'lookbacks': [127, 129, 130], 'score': np.float64(1.3090400007434713), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 53sRunning iteration 721/1500... Est. remaining: 6m 48sRunning iteration 731/1500... Est. remaining: 6m 42sRunning iteration 741/1500... Est. remaining: 6m 37sRunning iteration 751/1500... Est. remaining: 6m 32sRunning iteration 761/1500... Est. remaining: 6m 26sRunning iteration 771/1500... Est. remaining: 6m 21sRunning iteration 781/1500... Est. remaining: 6m 15sRunning iteration 791/1500... Est. remaining: 6m 10sRunning iteration 801/1500... Est. remaining: 6m 5sbest_combination: {'lookbacks': [127, 129, 130], 'score': np.float64(1.3090400007434713), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 0sRunning iteration 821/1500... Est. remaining: 5m 54sRunning iteration 831/1500... Est. remaining: 5m 49sRunning iteration 841/1500... Est. remaining: 5m 44sRunning iteration 851/1500... Est. remaining: 5m 39sRunning iteration 861/1500... Est. remaining: 5m 33sRunning iteration 871/1500... Est. remaining: 5m 28sRunning iteration 881/1500... Est. remaining: 5m 23sRunning iteration 891/1500... Est. remaining: 5m 18sRunning iteration 901/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [127, 129, 130], 'score': np.float64(1.3090400007434713), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 7sRunning iteration 921/1500... Est. remaining: 5m 2sRunning iteration 931/1500... Est. remaining: 4m 57sRunning iteration 941/1500... Est. remaining: 4m 51sRunning iteration 951/1500... Est. remaining: 4m 46sRunning iteration 961/1500... Est. remaining: 4m 41sRunning iteration 971/1500... Est. remaining: 4m 36sRunning iteration 981/1500... Est. remaining: 4m 30sRunning iteration 991/1500... Est. remaining: 4m 25sRunning iteration 1001/1500... Est. remaining: 4m 20sbest_combination: {'lookbacks': [127, 129, 130], 'score': np.float64(1.3090400007434713), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 9sRunning iteration 1031/1500... Est. remaining: 4m 4sRunning iteration 1041/1500... Est. remaining: 3m 59sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 44sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [127, 129, 130], 'score': np.float64(1.3090400007434713), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [127, 129, 130], 'score': np.float64(1.3090400007434713), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [127, 129, 130], 'score': np.float64(1.3090400007434713), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [127, 129, 130], 'score': np.float64(1.3090400007434713), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.31
best_combination: {'lookbacks': [127, 129, 130], 'score': np.float64(1.3090400007434713), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [127, 129, 130] (score: 1.3090)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [127, 129, 130] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 104 selections (25.0%)
3. naz100_pi: 88 selections (21.2%)
4. naz100_pine: 79 selections (19.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $15,569,439,292.74
Average Annualized Gain: 50.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 00:20:21 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $310,993,849
Annual Return: 34.78%
Sharpe Ratio: 1.19451
Sortino Ratio: 1.115
Max Drawdown: -62.2%
Avg Drawdown: -14.0%
Normalized Score: -2.172
Lookback periods: [69, 70, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,240,359,576
Annual Return: 42.68%
Sharpe Ratio: 1.40076
Sortino Ratio: 1.357
Max Drawdown: -61.0%
Avg Drawdown: -12.3%
Normalized Score: -0.514
Lookback periods: [140, 171, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,907,074,116
Annual Return: 43.76%
Sharpe Ratio: 1.43878
Sortino Ratio: 1.391
Max Drawdown: -60.1%
Avg Drawdown: -13.4%
Normalized Score: -0.444
Lookback periods: [123, 157, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,832,680,092
Annual Return: 49.70%
Sharpe Ratio: 1.62875
Sortino Ratio: 1.593
Max Drawdown: -57.2%
Avg Drawdown: -10.6%
Normalized Score: 1.166
Lookback periods: [139, 154, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 55sRunning iteration 31/1500... Est. remaining: 19m 20sRunning iteration 41/1500... Est. remaining: 17m 26sRunning iteration 51/1500... Est. remaining: 16m 16sRunning iteration 61/1500... Est. remaining: 15m 28sRunning iteration 71/1500... Est. remaining: 14m 55sRunning iteration 81/1500... Est. remaining: 14m 28sRunning iteration 91/1500... Est. remaining: 14m 6sRunning iteration 101/1500... Est. remaining: 13m 47sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 30sRunning iteration 121/1500... Est. remaining: 13m 16sRunning iteration 131/1500... Est. remaining: 13m 2sRunning iteration 141/1500... Est. remaining: 12m 50sRunning iteration 151/1500... Est. remaining: 12m 39sRunning iteration 161/1500... Est. remaining: 12m 28sRunning iteration 171/1500... Est. remaining: 12m 19sRunning iteration 181/1500... Est. remaining: 12m 13sRunning iteration 191/1500... Est. remaining: 12m 4sRunning iteration 201/1500... Est. remaining: 11m 56sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 48sRunning iteration 221/1500... Est. remaining: 11m 40sRunning iteration 231/1500... Est. remaining: 11m 32sRunning iteration 241/1500... Est. remaining: 11m 25sRunning iteration 251/1500... Est. remaining: 11m 17sRunning iteration 261/1500... Est. remaining: 11m 11sRunning iteration 271/1500... Est. remaining: 11m 4sRunning iteration 281/1500... Est. remaining: 10m 57sRunning iteration 291/1500... Est. remaining: 10m 51sRunning iteration 301/1500... Est. remaining: 10m 45sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 38sRunning iteration 321/1500... Est. remaining: 10m 32sRunning iteration 331/1500... Est. remaining: 10m 26sRunning iteration 341/1500... Est. remaining: 10m 20sRunning iteration 351/1500... Est. remaining: 10m 13sRunning iteration 361/1500... Est. remaining: 10m 7sRunning iteration 371/1500... Est. remaining: 10m 0sRunning iteration 381/1500... Est. remaining: 9m 54sRunning iteration 391/1500... Est. remaining: 9m 48sRunning iteration 401/1500... Est. remaining: 9m 42sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 36sRunning iteration 421/1500... Est. remaining: 9m 30sRunning iteration 431/1500... Est. remaining: 9m 24sRunning iteration 441/1500... Est. remaining: 9m 19sRunning iteration 451/1500... Est. remaining: 9m 13sRunning iteration 461/1500... Est. remaining: 9m 7sRunning iteration 471/1500... Est. remaining: 9m 2sRunning iteration 481/1500... Est. remaining: 8m 56sRunning iteration 491/1500... Est. remaining: 8m 51sRunning iteration 501/1500... Est. remaining: 8m 46sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 41sRunning iteration 521/1500... Est. remaining: 8m 36sRunning iteration 531/1500... Est. remaining: 8m 31sRunning iteration 541/1500... Est. remaining: 8m 25sRunning iteration 551/1500... Est. remaining: 8m 20sRunning iteration 561/1500... Est. remaining: 8m 15sRunning iteration 571/1500... Est. remaining: 8m 9sRunning iteration 581/1500... Est. remaining: 8m 4sRunning iteration 591/1500... Est. remaining: 7m 59sRunning iteration 601/1500... Est. remaining: 7m 53sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 48sRunning iteration 621/1500... Est. remaining: 7m 43sRunning iteration 631/1500... Est. remaining: 7m 38sRunning iteration 641/1500... Est. remaining: 7m 32sRunning iteration 651/1500... Est. remaining: 7m 27sRunning iteration 661/1500... Est. remaining: 7m 21sRunning iteration 671/1500... Est. remaining: 7m 16sRunning iteration 681/1500... Est. remaining: 7m 11sRunning iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 56sRunning iteration 721/1500... Est. remaining: 6m 51sRunning iteration 731/1500... Est. remaining: 6m 46sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 36sRunning iteration 761/1500... Est. remaining: 6m 31sRunning iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 20sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 5sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 55sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 44sRunning iteration 861/1500... Est. remaining: 5m 39sRunning iteration 871/1500... Est. remaining: 5m 34sRunning iteration 881/1500... Est. remaining: 5m 30sRunning iteration 891/1500... Est. remaining: 5m 25sRunning iteration 901/1500... Est. remaining: 5m 19sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 14sRunning iteration 921/1500... Est. remaining: 5m 8sRunning iteration 931/1500... Est. remaining: 5m 3sRunning iteration 941/1500... Est. remaining: 4m 58sRunning iteration 951/1500... Est. remaining: 4m 52sRunning iteration 961/1500... Est. remaining: 4m 47sRunning iteration 971/1500... Est. remaining: 4m 41sRunning iteration 981/1500... Est. remaining: 4m 36sRunning iteration 991/1500... Est. remaining: 4m 30sRunning iteration 1001/1500... Est. remaining: 4m 25sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 14sRunning iteration 1031/1500... Est. remaining: 4m 9sRunning iteration 1041/1500... Est. remaining: 4m 3sRunning iteration 1051/1500... Est. remaining: 3m 58sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 47sRunning iteration 1081/1500... Est. remaining: 3m 42sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 31sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 26sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 10sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 54sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.17
best_combination: {'lookbacks': [139, 154, 171], 'score': np.float64(1.1663499109841675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 154, 171] (score: 1.1663)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 154, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 112 selections (26.9%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,832,680,091.79
Average Annualized Gain: 49.7%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 00:33:35 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $378,070,054
Annual Return: 35.54%
Sharpe Ratio: 1.24317
Sortino Ratio: 1.149
Max Drawdown: -64.6%
Avg Drawdown: -13.8%
Normalized Score: -2.054
Lookback periods: [56, 60, 138] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,118,093,693
Annual Return: 42.45%
Sharpe Ratio: 1.41166
Sortino Ratio: 1.364
Max Drawdown: -58.6%
Avg Drawdown: -12.1%
Normalized Score: -0.400
Lookback periods: [111, 128, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,378,919,844
Annual Return: 45.47%
Sharpe Ratio: 1.47498
Sortino Ratio: 1.448
Max Drawdown: -61.3%
Avg Drawdown: -13.0%
Normalized Score: -0.133
Lookback periods: [153, 154, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 30m 40sRunning iteration 21/1500... Est. remaining: 21m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,875,401,809
Annual Return: 46.71%
Sharpe Ratio: 1.51287
Sortino Ratio: 1.478
Max Drawdown: -63.0%
Avg Drawdown: -12.0%
Normalized Score: 0.163
Lookback periods: [155, 189, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 29sRunning iteration 41/1500... Est. remaining: 17m 39sRunning iteration 51/1500... Est. remaining: 16m 30sRunning iteration 61/1500... Est. remaining: 15m 43sRunning iteration 71/1500... Est. remaining: 15m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,965,056,812
Annual Return: 46.77%
Sharpe Ratio: 1.51612
Sortino Ratio: 1.480
Max Drawdown: -60.2%
Avg Drawdown: -11.3%
Normalized Score: 0.375
Lookback periods: [183, 191, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 15m 1sRunning iteration 91/1500... Est. remaining: 14m 35sRunning iteration 101/1500... Est. remaining: 14m 15sbest_combination: {'lookbacks': [183, 191, 193], 'score': np.float64(0.37474353457194715), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 56sRunning iteration 121/1500... Est. remaining: 13m 39sRunning iteration 131/1500... Est. remaining: 13m 23sRunning iteration 141/1500... Est. remaining: 13m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,171,212,009
Annual Return: 48.60%
Sharpe Ratio: 1.58733
Sortino Ratio: 1.552
Max Drawdown: -60.1%
Avg Drawdown: -11.5%
Normalized Score: 0.719
Lookback periods: [128, 156, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 13m 9sRunning iteration 161/1500... Est. remaining: 12m 56sRunning iteration 171/1500... Est. remaining: 12m 45sRunning iteration 181/1500... Est. remaining: 12m 35sRunning iteration 191/1500... Est. remaining: 12m 25sRunning iteration 201/1500... Est. remaining: 12m 15sbest_combination: {'lookbacks': [128, 156, 157], 'score': np.float64(0.71882821031788), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 6sRunning iteration 221/1500... Est. remaining: 11m 57sRunning iteration 231/1500... Est. remaining: 11m 49sRunning iteration 241/1500... Est. remaining: 11m 41sRunning iteration 251/1500... Est. remaining: 11m 33sRunning iteration 261/1500... Est. remaining: 11m 25sRunning iteration 271/1500... Est. remaining: 11m 18sRunning iteration 281/1500... Est. remaining: 11m 11sRunning iteration 291/1500... Est. remaining: 11m 4sRunning iteration 301/1500... Est. remaining: 10m 57sbest_combination: {'lookbacks': [128, 156, 157], 'score': np.float64(0.71882821031788), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 50sRunning iteration 321/1500... Est. remaining: 10m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,819,321,576
Annual Return: 41.83%
Sharpe Ratio: 1.54653
Sortino Ratio: 1.440
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.194
Lookback periods: [50, 58, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 331/1500... Est. remaining: 10m 40sRunning iteration 341/1500... Est. remaining: 10m 33sRunning iteration 351/1500... Est. remaining: 10m 27sRunning iteration 361/1500... Est. remaining: 10m 20sRunning iteration 371/1500... Est. remaining: 10m 14sRunning iteration 381/1500... Est. remaining: 10m 7sRunning iteration 391/1500... Est. remaining: 10m 0sRunning iteration 401/1500... Est. remaining: 9m 54sbest_combination: {'lookbacks': [50, 58, 98], 'score': np.float64(1.1937860329053027), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 49sRunning iteration 421/1500... Est. remaining: 9m 44sRunning iteration 431/1500... Est. remaining: 9m 38sRunning iteration 441/1500... Est. remaining: 9m 32sRunning iteration 451/1500... Est. remaining: 9m 26sRunning iteration 461/1500... Est. remaining: 9m 20sRunning iteration 471/1500... Est. remaining: 9m 14sRunning iteration 481/1500... Est. remaining: 9m 8sRunning iteration 491/1500... Est. remaining: 9m 2sRunning iteration 501/1500... Est. remaining: 8m 56sbest_combination: {'lookbacks': [50, 58, 98], 'score': np.float64(1.1937860329053027), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 50sRunning iteration 521/1500... Est. remaining: 8m 45sRunning iteration 531/1500... Est. remaining: 8m 40sRunning iteration 541/1500... Est. remaining: 8m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,607,229,048
Annual Return: 43.31%
Sharpe Ratio: 1.53728
Sortino Ratio: 1.445
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.254
Lookback periods: [50, 53, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,876,156,727
Annual Return: 43.71%
Sharpe Ratio: 1.55454
Sortino Ratio: 1.465
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.294
Lookback periods: [50, 53, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,293,289,579
Annual Return: 44.28%
Sharpe Ratio: 1.58522
Sortino Ratio: 1.495
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.466
Lookback periods: [50, 53, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.747
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 8m 31sRunning iteration 571/1500... Est. remaining: 8m 25sRunning iteration 581/1500... Est. remaining: 8m 19sRunning iteration 591/1500... Est. remaining: 8m 13sRunning iteration 601/1500... Est. remaining: 8m 7sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 1sRunning iteration 621/1500... Est. remaining: 7m 55sRunning iteration 631/1500... Est. remaining: 7m 49sRunning iteration 641/1500... Est. remaining: 7m 43sRunning iteration 651/1500... Est. remaining: 7m 38sRunning iteration 661/1500... Est. remaining: 7m 32sRunning iteration 671/1500... Est. remaining: 7m 26sRunning iteration 681/1500... Est. remaining: 7m 20sRunning iteration 691/1500... Est. remaining: 7m 14sRunning iteration 701/1500... Est. remaining: 7m 9sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 3sRunning iteration 721/1500... Est. remaining: 6m 57sRunning iteration 731/1500... Est. remaining: 6m 51sRunning iteration 741/1500... Est. remaining: 6m 46sRunning iteration 751/1500... Est. remaining: 6m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 6m 36sRunning iteration 771/1500... Est. remaining: 6m 30sRunning iteration 781/1500... Est. remaining: 6m 25sRunning iteration 791/1500... Est. remaining: 6m 19sRunning iteration 801/1500... Est. remaining: 6m 13sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 8sRunning iteration 821/1500... Est. remaining: 6m 2sRunning iteration 831/1500... Est. remaining: 5m 57sRunning iteration 841/1500... Est. remaining: 5m 52sRunning iteration 851/1500... Est. remaining: 5m 46sRunning iteration 861/1500... Est. remaining: 5m 41sRunning iteration 871/1500... Est. remaining: 5m 35sRunning iteration 881/1500... Est. remaining: 5m 30sRunning iteration 891/1500... Est. remaining: 5m 24sRunning iteration 901/1500... Est. remaining: 5m 19sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 13sRunning iteration 921/1500... Est. remaining: 5m 8sRunning iteration 931/1500... Est. remaining: 5m 2sRunning iteration 941/1500... Est. remaining: 4m 57sRunning iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 41sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 30sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 3sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 47sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 1.94
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9365)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
State file monte_carlo_state.pkl does not exist.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 00:46:45 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $492,694,706
Annual Return: 36.58%
Sharpe Ratio: 1.26633
Sortino Ratio: 1.183
Max Drawdown: -62.2%
Avg Drawdown: -13.7%
Normalized Score: -1.772
Lookback periods: [67, 74, 104] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $683,414,181
Annual Return: 37.88%
Sharpe Ratio: 1.31057
Sortino Ratio: 1.224
Max Drawdown: -52.3%
Avg Drawdown: -12.4%
Normalized Score: -1.005
Lookback periods: [79, 92, 106] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,518,450,943
Annual Return: 43.17%
Sharpe Ratio: 1.41470
Sortino Ratio: 1.377
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: -0.197
Lookback periods: [161, 171, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 29m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,688,764,358
Annual Return: 41.52%
Sharpe Ratio: 1.42148
Sortino Ratio: 1.353
Max Drawdown: -52.3%
Avg Drawdown: -11.1%
Normalized Score: -0.132
Lookback periods: [86, 125, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 45sRunning iteration 31/1500... Est. remaining: 19m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,038,361,860
Annual Return: 42.29%
Sharpe Ratio: 1.45692
Sortino Ratio: 1.383
Max Drawdown: -52.3%
Avg Drawdown: -11.6%
Normalized Score: -0.050
Lookback periods: [87, 92, 135] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 18sRunning iteration 51/1500... Est. remaining: 17m 0sRunning iteration 61/1500... Est. remaining: 16m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,756,745,979
Annual Return: 47.89%
Sharpe Ratio: 1.55917
Sortino Ratio: 1.518
Max Drawdown: -59.0%
Avg Drawdown: -10.3%
Normalized Score: 0.796
Lookback periods: [156, 158, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 56sRunning iteration 81/1500... Est. remaining: 15m 25sRunning iteration 91/1500... Est. remaining: 14m 59sRunning iteration 101/1500... Est. remaining: 14m 34sbest_combination: {'lookbacks': [156, 158, 170], 'score': np.float64(0.7959195634365829), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 12sRunning iteration 121/1500... Est. remaining: 13m 53sRunning iteration 131/1500... Est. remaining: 13m 37sRunning iteration 141/1500... Est. remaining: 13m 23sRunning iteration 151/1500... Est. remaining: 13m 14sRunning iteration 161/1500... Est. remaining: 13m 7sRunning iteration 171/1500... Est. remaining: 12m 54sRunning iteration 181/1500... Est. remaining: 12m 43sRunning iteration 191/1500... Est. remaining: 12m 32sRunning iteration 201/1500... Est. remaining: 12m 22sbest_combination: {'lookbacks': [156, 158, 170], 'score': np.float64(0.7959195634365829), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 12sRunning iteration 221/1500... Est. remaining: 12m 3sRunning iteration 231/1500... Est. remaining: 11m 54sRunning iteration 241/1500... Est. remaining: 11m 46sRunning iteration 251/1500... Est. remaining: 11m 38sRunning iteration 261/1500... Est. remaining: 11m 30sRunning iteration 271/1500... Est. remaining: 11m 25sRunning iteration 281/1500... Est. remaining: 11m 17sRunning iteration 291/1500... Est. remaining: 11m 9sRunning iteration 301/1500... Est. remaining: 11m 3sbest_combination: {'lookbacks': [156, 158, 170], 'score': np.float64(0.7959195634365829), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 56sRunning iteration 321/1500... Est. remaining: 10m 49sRunning iteration 331/1500... Est. remaining: 10m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,845,719,417
Annual Return: 49.33%
Sharpe Ratio: 1.59109
Sortino Ratio: 1.554
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.883
Lookback periods: [178, 188, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 341/1500... Est. remaining: 10m 39sRunning iteration 351/1500... Est. remaining: 10m 32sRunning iteration 361/1500... Est. remaining: 10m 25sRunning iteration 371/1500... Est. remaining: 10m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,899,750,931
Annual Return: 43.75%
Sharpe Ratio: 1.57135
Sortino Ratio: 1.477
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.421
Lookback periods: [50, 52, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 10m 15sRunning iteration 391/1500... Est. remaining: 10m 8sRunning iteration 401/1500... Est. remaining: 10m 1sbest_combination: {'lookbacks': [50, 52, 101], 'score': np.float64(1.4210263107899608), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 55sRunning iteration 421/1500... Est. remaining: 9m 48sRunning iteration 431/1500... Est. remaining: 9m 42sRunning iteration 441/1500... Est. remaining: 9m 35sRunning iteration 451/1500... Est. remaining: 9m 29sRunning iteration 461/1500... Est. remaining: 9m 23sRunning iteration 471/1500... Est. remaining: 9m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,929,534,714
Annual Return: 43.79%
Sharpe Ratio: 1.57927
Sortino Ratio: 1.479
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.453
Lookback periods: [50, 52, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 9m 13sRunning iteration 491/1500... Est. remaining: 9m 7sRunning iteration 501/1500... Est. remaining: 9m 2sbest_combination: {'lookbacks': [50, 52, 99], 'score': np.float64(1.453264191842836), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 56sRunning iteration 521/1500... Est. remaining: 8m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.546
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 8m 46sRunning iteration 541/1500... Est. remaining: 8m 40sRunning iteration 551/1500... Est. remaining: 8m 34sRunning iteration 561/1500... Est. remaining: 8m 28sRunning iteration 571/1500... Est. remaining: 8m 22sRunning iteration 581/1500... Est. remaining: 8m 16sRunning iteration 591/1500... Est. remaining: 8m 10sRunning iteration 601/1500... Est. remaining: 8m 4sbest_combination: {'lookbacks': [50, 50, 96], 'score': np.float64(1.5459674796611218), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 58sRunning iteration 621/1500... Est. remaining: 7m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.716
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/1500... Est. remaining: 7m 48sRunning iteration 641/1500... Est. remaining: 7m 42sRunning iteration 651/1500... Est. remaining: 7m 36sRunning iteration 661/1500... Est. remaining: 7m 31sRunning iteration 671/1500... Est. remaining: 7m 25sRunning iteration 681/1500... Est. remaining: 7m 19sRunning iteration 691/1500... Est. remaining: 7m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.747
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/1500... Est. remaining: 7m 10sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 4sRunning iteration 721/1500... Est. remaining: 6m 59sRunning iteration 731/1500... Est. remaining: 6m 53sRunning iteration 741/1500... Est. remaining: 6m 47sRunning iteration 751/1500... Est. remaining: 6m 42sRunning iteration 761/1500... Est. remaining: 6m 36sRunning iteration 771/1500... Est. remaining: 6m 30sRunning iteration 781/1500... Est. remaining: 6m 25sRunning iteration 791/1500... Est. remaining: 6m 19sRunning iteration 801/1500... Est. remaining: 6m 14sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 8sRunning iteration 821/1500... Est. remaining: 6m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.016
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 831/1500... Est. remaining: 5m 58sRunning iteration 841/1500... Est. remaining: 5m 53sRunning iteration 851/1500... Est. remaining: 5m 47sRunning iteration 861/1500... Est. remaining: 5m 42sRunning iteration 871/1500... Est. remaining: 5m 36sRunning iteration 881/1500... Est. remaining: 5m 31sRunning iteration 891/1500... Est. remaining: 5m 25sRunning iteration 901/1500... Est. remaining: 5m 19sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 14sRunning iteration 921/1500... Est. remaining: 5m 8sRunning iteration 931/1500... Est. remaining: 5m 3sRunning iteration 941/1500... Est. remaining: 4m 57sRunning iteration 951/1500... Est. remaining: 4m 52sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 41sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 30sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 14sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 3sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 31sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 2.02
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 2.0164)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 198m 19s
End time: Mon Aug 25 00:59:46 EDT 2025
Average time per successful run: 13m 13s
==============================================================
✓ All runs completed successfully!
