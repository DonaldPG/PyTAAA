Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: none
Start time: Sun Aug 24 00:46:13 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Sun Aug 24 00:46:13 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $238,873,313
Annual Return: 33.76%
Sharpe Ratio: 1.15597
Sortino Ratio: 1.075
Max Drawdown: -71.6%
Avg Drawdown: -15.3%
Normalized Score: -2.293
Lookback periods: [64, 103, 123] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $213,699,635
Annual Return: 33.33%
Sharpe Ratio: 1.16048
Sortino Ratio: 1.065
Max Drawdown: -52.3%
Avg Drawdown: -12.3%
Normalized Score: -0.959
Lookback periods: [60, 81, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,669,401,009
Annual Return: 43.41%
Sharpe Ratio: 1.42125
Sortino Ratio: 1.379
Max Drawdown: -61.4%
Avg Drawdown: -13.5%
Normalized Score: -0.425
Lookback periods: [138, 180, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,934,006,931
Annual Return: 45.02%
Sharpe Ratio: 1.46250
Sortino Ratio: 1.423
Max Drawdown: -62.2%
Avg Drawdown: -13.0%
Normalized Score: -0.190
Lookback periods: [138, 154, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 14m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,674,681,351
Annual Return: 44.73%
Sharpe Ratio: 1.44959
Sortino Ratio: 1.413
Max Drawdown: -59.0%
Avg Drawdown: -12.1%
Normalized Score: 0.084
Lookback periods: [177, 182, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,294,740,395
Annual Return: 47.63%
Sharpe Ratio: 1.54434
Sortino Ratio: 1.514
Max Drawdown: -61.3%
Avg Drawdown: -12.2%
Normalized Score: 0.328
Lookback periods: [152, 159, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 11m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,671,634,318
Annual Return: 46.56%
Sharpe Ratio: 1.51349
Sortino Ratio: 1.482
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.488
Lookback periods: [152, 170, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 10m 12sRunning iteration 41/750... Est. remaining: 9m 0sRunning iteration 51/750... Est. remaining: 8m 15sRunning iteration 61/750... Est. remaining: 7m 43sRunning iteration 71/750... Est. remaining: 7m 18sRunning iteration 81/750... Est. remaining: 6m 59sRunning iteration 91/750... Est. remaining: 6m 42sRunning iteration 101/750... Est. remaining: 6m 27sbest_combination: {'lookbacks': [152, 170, 198], 'score': np.float64(0.48786049200311316), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,601,305,420
Annual Return: 47.20%
Sharpe Ratio: 1.53712
Sortino Ratio: 1.507
Max Drawdown: -58.5%
Avg Drawdown: -11.4%
Normalized Score: 0.578
Lookback periods: [152, 154, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/750... Est. remaining: 6m 21sRunning iteration 121/750... Est. remaining: 6m 10sRunning iteration 131/750... Est. remaining: 6m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,406,881,070
Annual Return: 47.07%
Sharpe Ratio: 1.54977
Sortino Ratio: 1.507
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.715
Lookback periods: [139, 156, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/750... Est. remaining: 5m 55sRunning iteration 151/750... Est. remaining: 5m 46sRunning iteration 161/750... Est. remaining: 5m 38sRunning iteration 171/750... Est. remaining: 5m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,655,314,368
Annual Return: 48.83%
Sharpe Ratio: 1.59767
Sortino Ratio: 1.566
Max Drawdown: -58.5%
Avg Drawdown: -10.8%
Normalized Score: 0.906
Lookback periods: [152, 159, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/750... Est. remaining: 5m 25sRunning iteration 191/750... Est. remaining: 5m 17sRunning iteration 201/750... Est. remaining: 5m 9sbest_combination: {'lookbacks': [152, 159, 168], 'score': np.float64(0.9062323869124664), 'visits': 1}
Running iteration 211/750... Est. remaining: 5m 2sRunning iteration 221/750... Est. remaining: 4m 54sRunning iteration 231/750... Est. remaining: 4m 47sRunning iteration 241/750... Est. remaining: 4m 40sRunning iteration 251/750... Est. remaining: 4m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $974,490,557
Annual Return: 39.30%
Sharpe Ratio: 1.42475
Sortino Ratio: 1.331
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 1.248
Lookback periods: [50, 62, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,064,046,167
Annual Return: 39.65%
Sharpe Ratio: 1.44432
Sortino Ratio: 1.349
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 1.333
Lookback periods: [50, 60, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/750... Est. remaining: 4m 30s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,531,122,326
Annual Return: 41.12%
Sharpe Ratio: 1.49534
Sortino Ratio: 1.403
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 1.685
Lookback periods: [50, 61, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/750... Est. remaining: 4m 26sRunning iteration 281/750... Est. remaining: 4m 19sRunning iteration 291/750... Est. remaining: 4m 12sRunning iteration 301/750... Est. remaining: 4m 6sbest_combination: {'lookbacks': [50, 61, 96], 'score': np.float64(1.685326164368631), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 59sRunning iteration 321/750... Est. remaining: 3m 53sRunning iteration 331/750... Est. remaining: 3m 47sRunning iteration 341/750... Est. remaining: 3m 41sRunning iteration 351/750... Est. remaining: 3m 35sRunning iteration 361/750... Est. remaining: 3m 29sRunning iteration 371/750... Est. remaining: 3m 23sRunning iteration 381/750... Est. remaining: 3m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,173,652,742
Annual Return: 42.56%
Sharpe Ratio: 1.55536
Sortino Ratio: 1.457
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.896
Lookback periods: [50, 57, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/750... Est. remaining: 3m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,774,718,571
Annual Return: 44.85%
Sharpe Ratio: 1.62561
Sortino Ratio: 1.530
Max Drawdown: -37.5%
Avg Drawdown: -8.3%
Normalized Score: 2.107
Lookback periods: [52, 52, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,613,763,997
Annual Return: 44.66%
Sharpe Ratio: 1.61575
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 2.183
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/750... Est. remaining: 3m 9sbest_combination: {'lookbacks': [50, 52, 96], 'score': np.float64(2.183314442725648), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.275
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/750... Est. remaining: 3m 4sRunning iteration 421/750... Est. remaining: 2m 58sRunning iteration 431/750... Est. remaining: 2m 52sRunning iteration 441/750... Est. remaining: 2m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,188,708,617
Annual Return: 46.93%
Sharpe Ratio: 1.68323
Sortino Ratio: 1.602
Max Drawdown: -36.6%
Avg Drawdown: -7.9%
Normalized Score: 2.466
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/750... Est. remaining: 2m 41sRunning iteration 461/750... Est. remaining: 2m 36sRunning iteration 471/750... Est. remaining: 2m 30sRunning iteration 481/750... Est. remaining: 2m 24sRunning iteration 491/750... Est. remaining: 2m 18sRunning iteration 501/750... Est. remaining: 2m 13sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.4661028108583594), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 7sRunning iteration 521/750... Est. remaining: 2m 2sRunning iteration 531/750... Est. remaining: 1m 56sRunning iteration 541/750... Est. remaining: 1m 51sRunning iteration 551/750... Est. remaining: 1m 45sRunning iteration 561/750... Est. remaining: 1m 40sRunning iteration 571/750... Est. remaining: 1m 34sRunning iteration 581/750... Est. remaining: 1m 29sRunning iteration 591/750... Est. remaining: 1m 24sRunning iteration 601/750... Est. remaining: 1m 18sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.4661028108583594), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 13sRunning iteration 621/750... Est. remaining: 1m 8sRunning iteration 631/750... Est. remaining: 1m 2sRunning iteration 641/750... Est. remaining: 0m 57sRunning iteration 651/750... Est. remaining: 0m 52sRunning iteration 661/750... Est. remaining: 0m 46sRunning iteration 671/750... Est. remaining: 0m 41sRunning iteration 681/750... Est. remaining: 0m 36sRunning iteration 691/750... Est. remaining: 0m 31sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(2.4661028108583594), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.503
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.5 minutes
Best normalized score: 2.50
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.50289537565849), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 52, 95] (score: 2.5029)

Monte Carlo simulation completed in 6.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Sun Aug 24 00:52:48 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $418,816,274
Annual Return: 35.94%
Sharpe Ratio: 1.25687
Sortino Ratio: 1.169
Max Drawdown: -65.7%
Avg Drawdown: -13.6%
Normalized Score: -1.340
Lookback periods: [54, 68, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,675,401,900
Annual Return: 43.42%
Sharpe Ratio: 1.44318
Sortino Ratio: 1.390
Max Drawdown: -55.7%
Avg Drawdown: -13.4%
Normalized Score: -0.003
Lookback periods: [122, 136, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 12m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,000,519,114
Annual Return: 45.09%
Sharpe Ratio: 1.48031
Sortino Ratio: 1.435
Max Drawdown: -55.0%
Avg Drawdown: -12.1%
Normalized Score: 0.394
Lookback periods: [147, 157, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,025,165,621
Annual Return: 46.81%
Sharpe Ratio: 1.54286
Sortino Ratio: 1.502
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 0.655
Lookback periods: [137, 155, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 10m 27sRunning iteration 31/750... Est. remaining: 8m 49sRunning iteration 41/750... Est. remaining: 7m 56sRunning iteration 51/750... Est. remaining: 7m 23sRunning iteration 61/750... Est. remaining: 7m 0sRunning iteration 71/750... Est. remaining: 6m 42sRunning iteration 81/750... Est. remaining: 6m 27sRunning iteration 91/750... Est. remaining: 6m 13sRunning iteration 101/750... Est. remaining: 6m 2sbest_combination: {'lookbacks': [137, 155, 179], 'score': np.float64(0.6554431597810264), 'visits': 1}
Running iteration 111/750... Est. remaining: 5m 53sRunning iteration 121/750... Est. remaining: 5m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,970,380,397
Annual Return: 46.78%
Sharpe Ratio: 1.54715
Sortino Ratio: 1.501
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.688
Lookback periods: [139, 156, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/750... Est. remaining: 5m 42sRunning iteration 141/750... Est. remaining: 5m 33sRunning iteration 151/750... Est. remaining: 5m 25sRunning iteration 161/750... Est. remaining: 5m 18sRunning iteration 171/750... Est. remaining: 5m 11sRunning iteration 181/750... Est. remaining: 5m 4sRunning iteration 191/750... Est. remaining: 4m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,889,594,733
Annual Return: 47.38%
Sharpe Ratio: 1.54914
Sortino Ratio: 1.510
Max Drawdown: -56.6%
Avg Drawdown: -11.6%
Normalized Score: 0.731
Lookback periods: [147, 154, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/750... Est. remaining: 4m 54sbest_combination: {'lookbacks': [147, 154, 159], 'score': np.float64(0.730900966540368), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 48sRunning iteration 221/750... Est. remaining: 4m 41sRunning iteration 231/750... Est. remaining: 4m 35sRunning iteration 241/750... Est. remaining: 4m 29sRunning iteration 251/750... Est. remaining: 4m 23sRunning iteration 261/750... Est. remaining: 4m 17sRunning iteration 271/750... Est. remaining: 4m 11sRunning iteration 281/750... Est. remaining: 4m 5sRunning iteration 291/750... Est. remaining: 3m 59sRunning iteration 301/750... Est. remaining: 3m 53sbest_combination: {'lookbacks': [147, 154, 159], 'score': np.float64(0.730900966540368), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,365,193,239
Annual Return: 48.21%
Sharpe Ratio: 1.57538
Sortino Ratio: 1.548
Max Drawdown: -61.3%
Avg Drawdown: -11.1%
Normalized Score: 0.767
Lookback periods: [152, 159, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/750... Est. remaining: 3m 44sRunning iteration 331/750... Est. remaining: 3m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,597,902,871
Annual Return: 48.80%
Sharpe Ratio: 1.60703
Sortino Ratio: 1.571
Max Drawdown: -58.5%
Avg Drawdown: -11.6%
Normalized Score: 0.904
Lookback periods: [139, 155, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 341/750... Est. remaining: 3m 34sRunning iteration 351/750... Est. remaining: 3m 28sRunning iteration 361/750... Est. remaining: 3m 23sRunning iteration 371/750... Est. remaining: 3m 18sRunning iteration 381/750... Est. remaining: 3m 12sRunning iteration 391/750... Est. remaining: 3m 7sRunning iteration 401/750... Est. remaining: 3m 2sbest_combination: {'lookbacks': [139, 155, 168], 'score': np.float64(0.9035151750488817), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 56sRunning iteration 421/750... Est. remaining: 2m 51sRunning iteration 431/750... Est. remaining: 2m 45sRunning iteration 441/750... Est. remaining: 2m 40sRunning iteration 451/750... Est. remaining: 2m 35sRunning iteration 461/750... Est. remaining: 2m 29sRunning iteration 471/750... Est. remaining: 2m 24sRunning iteration 481/750... Est. remaining: 2m 19sRunning iteration 491/750... Est. remaining: 2m 14sRunning iteration 501/750... Est. remaining: 2m 8sbest_combination: {'lookbacks': [139, 155, 168], 'score': np.float64(0.9035151750488817), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 3sRunning iteration 521/750... Est. remaining: 1m 58sRunning iteration 531/750... Est. remaining: 1m 53sRunning iteration 541/750... Est. remaining: 1m 47sRunning iteration 551/750... Est. remaining: 1m 42sRunning iteration 561/750... Est. remaining: 1m 37sRunning iteration 571/750... Est. remaining: 1m 32sRunning iteration 581/750... Est. remaining: 1m 26sRunning iteration 591/750... Est. remaining: 1m 21sRunning iteration 601/750... Est. remaining: 1m 16sbest_combination: {'lookbacks': [139, 155, 168], 'score': np.float64(0.9035151750488817), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 1sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [139, 155, 168], 'score': np.float64(0.9035151750488817), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 0.90
best_combination: {'lookbacks': [139, 155, 168], 'score': np.float64(0.9035151750488817), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [139, 155, 168] (score: 0.9035)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 155, 168] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 118 selections (28.4%)
2. naz100_hma: 108 selections (26.0%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 75 selections (18.0%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,597,902,871.29
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Sun Aug 24 00:59:15 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,705,389,001
Annual Return: 45.77%
Sharpe Ratio: 1.48548
Sortino Ratio: 1.445
Max Drawdown: -62.6%
Avg Drawdown: -11.7%
Normalized Score: 0.085
Lookback periods: [166, 198, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 10m 46sRunning iteration 21/750... Est. remaining: 8m 19sRunning iteration 31/750... Est. remaining: 7m 26sRunning iteration 41/750... Est. remaining: 6m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,138,436,899
Annual Return: 47.53%
Sharpe Ratio: 1.55010
Sortino Ratio: 1.518
Max Drawdown: -58.0%
Avg Drawdown: -12.0%
Normalized Score: 0.464
Lookback periods: [151, 153, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/750... Est. remaining: 6m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,885,786,401
Annual Return: 47.96%
Sharpe Ratio: 1.56510
Sortino Ratio: 1.540
Max Drawdown: -56.9%
Avg Drawdown: -10.9%
Normalized Score: 0.710
Lookback periods: [159, 161, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/750... Est. remaining: 6m 48sRunning iteration 71/750... Est. remaining: 6m 32sRunning iteration 81/750... Est. remaining: 6m 19sRunning iteration 91/750... Est. remaining: 6m 8sRunning iteration 101/750... Est. remaining: 5m 57sbest_combination: {'lookbacks': [159, 161, 164], 'score': np.float64(0.7100199961780442), 'visits': 1}
Running iteration 111/750... Est. remaining: 5m 47sRunning iteration 121/750... Est. remaining: 5m 38sRunning iteration 131/750... Est. remaining: 5m 30sRunning iteration 141/750... Est. remaining: 5m 23sRunning iteration 151/750... Est. remaining: 5m 17sRunning iteration 161/750... Est. remaining: 5m 10sRunning iteration 171/750... Est. remaining: 5m 4sRunning iteration 181/750... Est. remaining: 4m 58sRunning iteration 191/750... Est. remaining: 4m 52sRunning iteration 201/750... Est. remaining: 4m 46sbest_combination: {'lookbacks': [159, 161, 164], 'score': np.float64(0.7100199961780442), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 40sRunning iteration 221/750... Est. remaining: 4m 34sRunning iteration 231/750... Est. remaining: 4m 28sRunning iteration 241/750... Est. remaining: 4m 22sRunning iteration 251/750... Est. remaining: 4m 17sRunning iteration 261/750... Est. remaining: 4m 11sRunning iteration 271/750... Est. remaining: 4m 5sRunning iteration 281/750... Est. remaining: 4m 0sRunning iteration 291/750... Est. remaining: 3m 54sRunning iteration 301/750... Est. remaining: 3m 49sbest_combination: {'lookbacks': [159, 161, 164], 'score': np.float64(0.7100199961780442), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,118,365,977
Annual Return: 48.08%
Sharpe Ratio: 1.56314
Sortino Ratio: 1.536
Max Drawdown: -56.9%
Avg Drawdown: -10.8%
Normalized Score: 0.721
Lookback periods: [156, 158, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/750... Est. remaining: 3m 40sRunning iteration 331/750... Est. remaining: 3m 34sRunning iteration 341/750... Est. remaining: 3m 29sRunning iteration 351/750... Est. remaining: 3m 24sRunning iteration 361/750... Est. remaining: 3m 18sRunning iteration 371/750... Est. remaining: 3m 13sRunning iteration 381/750... Est. remaining: 3m 8sRunning iteration 391/750... Est. remaining: 3m 3sRunning iteration 401/750... Est. remaining: 2m 57sbest_combination: {'lookbacks': [156, 158, 165], 'score': np.float64(0.7210490878217305), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 52sRunning iteration 421/750... Est. remaining: 2m 47sRunning iteration 431/750... Est. remaining: 2m 42sRunning iteration 441/750... Est. remaining: 2m 37sRunning iteration 451/750... Est. remaining: 2m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,907,209,044
Annual Return: 48.48%
Sharpe Ratio: 1.57522
Sortino Ratio: 1.536
Max Drawdown: -59.0%
Avg Drawdown: -10.0%
Normalized Score: 0.772
Lookback periods: [156, 158, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/750... Est. remaining: 2m 27sRunning iteration 471/750... Est. remaining: 2m 22sRunning iteration 481/750... Est. remaining: 2m 17sRunning iteration 491/750... Est. remaining: 2m 12sRunning iteration 501/750... Est. remaining: 2m 6sbest_combination: {'lookbacks': [156, 158, 170], 'score': np.float64(0.7722073369609632), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 1sRunning iteration 521/750... Est. remaining: 1m 56sRunning iteration 531/750... Est. remaining: 1m 51sRunning iteration 541/750... Est. remaining: 1m 46sRunning iteration 551/750... Est. remaining: 1m 41sRunning iteration 561/750... Est. remaining: 1m 36sRunning iteration 571/750... Est. remaining: 1m 31sRunning iteration 581/750... Est. remaining: 1m 25sRunning iteration 591/750... Est. remaining: 1m 20sRunning iteration 601/750... Est. remaining: 1m 15sbest_combination: {'lookbacks': [156, 158, 170], 'score': np.float64(0.7722073369609632), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 10sRunning iteration 621/750... Est. remaining: 1m 5sRunning iteration 631/750... Est. remaining: 1m 0sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [156, 158, 170], 'score': np.float64(0.7722073369609632), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,950,313,522
Annual Return: 48.50%
Sharpe Ratio: 1.58018
Sortino Ratio: 1.552
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 0.872
Lookback periods: [159, 161, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,205,595,751
Annual Return: 48.62%
Sharpe Ratio: 1.58493
Sortino Ratio: 1.552
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 0.898
Lookback periods: [156, 160, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv

Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 0.90
best_combination: {'lookbacks': [156, 160, 169], 'score': np.float64(0.8981473440229509), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [156, 160, 169] (score: 0.8981)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 160, 169] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 112 selections (26.9%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,205,595,750.85
Average Annualized Gain: 48.6%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Sun Aug 24 01:05:43 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $622,426,268
Annual Return: 37.51%
Sharpe Ratio: 1.29039
Sortino Ratio: 1.207
Max Drawdown: -52.3%
Avg Drawdown: -11.6%
Normalized Score: -0.410
Lookback periods: [76, 100, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 10m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,789,555,430
Annual Return: 41.76%
Sharpe Ratio: 1.40909
Sortino Ratio: 1.357
Max Drawdown: -58.3%
Avg Drawdown: -12.8%
Normalized Score: -0.156
Lookback periods: [117, 135, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,126,629,053
Annual Return: 39.88%
Sharpe Ratio: 1.39619
Sortino Ratio: 1.301
Max Drawdown: -52.3%
Avg Drawdown: -11.7%
Normalized Score: -0.044
Lookback periods: [53, 101, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,507,205,930
Annual Return: 41.06%
Sharpe Ratio: 1.41175
Sortino Ratio: 1.326
Max Drawdown: -55.9%
Avg Drawdown: -11.3%
Normalized Score: 0.018
Lookback periods: [51, 108, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 10m 18sRunning iteration 31/750... Est. remaining: 8m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,774,323,346
Annual Return: 41.73%
Sharpe Ratio: 1.43863
Sortino Ratio: 1.368
Max Drawdown: -52.3%
Avg Drawdown: -11.7%
Normalized Score: 0.195
Lookback periods: [91, 91, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,665,932,769
Annual Return: 45.74%
Sharpe Ratio: 1.52520
Sortino Ratio: 1.466
Max Drawdown: -62.0%
Avg Drawdown: -11.4%
Normalized Score: 0.401
Lookback periods: [104, 158, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 8m 31sRunning iteration 51/750... Est. remaining: 7m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,132,129,070
Annual Return: 48.09%
Sharpe Ratio: 1.53736
Sortino Ratio: 1.499
Max Drawdown: -60.2%
Avg Drawdown: -11.3%
Normalized Score: 0.640
Lookback periods: [189, 190, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/750... Est. remaining: 7m 37sRunning iteration 71/750... Est. remaining: 7m 15sRunning iteration 81/750... Est. remaining: 6m 55sRunning iteration 91/750... Est. remaining: 6m 40sRunning iteration 101/750... Est. remaining: 6m 25sbest_combination: {'lookbacks': [189, 190, 198], 'score': np.float64(0.6400191004021597), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 13sRunning iteration 121/750... Est. remaining: 6m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,992,490,410
Annual Return: 48.02%
Sharpe Ratio: 1.54396
Sortino Ratio: 1.513
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.761
Lookback periods: [176, 193, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/750... Est. remaining: 5m 57sRunning iteration 141/750... Est. remaining: 5m 47sRunning iteration 151/750... Est. remaining: 5m 39sRunning iteration 161/750... Est. remaining: 5m 30sRunning iteration 171/750... Est. remaining: 5m 22sRunning iteration 181/750... Est. remaining: 5m 15sRunning iteration 191/750... Est. remaining: 5m 7sRunning iteration 201/750... Est. remaining: 5m 0sbest_combination: {'lookbacks': [176, 193, 197], 'score': np.float64(0.7606496610405611), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 53sRunning iteration 221/750... Est. remaining: 4m 46sRunning iteration 231/750... Est. remaining: 4m 40sRunning iteration 241/750... Est. remaining: 4m 33sRunning iteration 251/750... Est. remaining: 4m 27sRunning iteration 261/750... Est. remaining: 4m 21sRunning iteration 271/750... Est. remaining: 4m 15sRunning iteration 281/750... Est. remaining: 4m 9sRunning iteration 291/750... Est. remaining: 4m 3sRunning iteration 301/750... Est. remaining: 3m 57sbest_combination: {'lookbacks': [176, 193, 197], 'score': np.float64(0.7606496610405611), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 51sRunning iteration 321/750... Est. remaining: 3m 45sRunning iteration 331/750... Est. remaining: 3m 39sRunning iteration 341/750... Est. remaining: 3m 34sRunning iteration 351/750... Est. remaining: 3m 28sRunning iteration 361/750... Est. remaining: 3m 22sRunning iteration 371/750... Est. remaining: 3m 17sRunning iteration 381/750... Est. remaining: 3m 11sRunning iteration 391/750... Est. remaining: 3m 6sRunning iteration 401/750... Est. remaining: 3m 0sbest_combination: {'lookbacks': [176, 193, 197], 'score': np.float64(0.7606496610405611), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 55sRunning iteration 421/750... Est. remaining: 2m 49sRunning iteration 431/750... Est. remaining: 2m 44sRunning iteration 441/750... Est. remaining: 2m 38sRunning iteration 451/750... Est. remaining: 2m 33sRunning iteration 461/750... Est. remaining: 2m 28sRunning iteration 471/750... Est. remaining: 2m 23sRunning iteration 481/750... Est. remaining: 2m 17sRunning iteration 491/750... Est. remaining: 2m 12sRunning iteration 501/750... Est. remaining: 2m 7sbest_combination: {'lookbacks': [176, 193, 197], 'score': np.float64(0.7606496610405611), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 2sRunning iteration 521/750... Est. remaining: 1m 57sRunning iteration 531/750... Est. remaining: 1m 51sRunning iteration 541/750... Est. remaining: 1m 46sRunning iteration 551/750... Est. remaining: 1m 41sRunning iteration 561/750... Est. remaining: 1m 36sRunning iteration 571/750... Est. remaining: 1m 31sRunning iteration 581/750... Est. remaining: 1m 26sRunning iteration 591/750... Est. remaining: 1m 20sRunning iteration 601/750... Est. remaining: 1m 15sbest_combination: {'lookbacks': [176, 193, 197], 'score': np.float64(0.7606496610405611), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 10sRunning iteration 621/750... Est. remaining: 1m 5sRunning iteration 631/750... Est. remaining: 1m 0sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [176, 193, 197], 'score': np.float64(0.7606496610405611), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 0.76
best_combination: {'lookbacks': [176, 193, 197], 'score': np.float64(0.7606496610405611), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [176, 193, 197] (score: 0.7606)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 193, 197] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 120 selections (28.8%)
2. sp500_hma: 104 selections (25.0%)
3. naz100_pine: 86 selections (20.7%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $7,992,490,410.32
Average Annualized Gain: 48.0%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Sun Aug 24 01:12:08 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $257,839,571
Annual Return: 34.05%
Sharpe Ratio: 1.19405
Sortino Ratio: 1.111
Max Drawdown: -56.2%
Avg Drawdown: -13.1%
Normalized Score: -0.976
Lookback periods: [50, 69, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $463,255,164
Annual Return: 36.34%
Sharpe Ratio: 1.28715
Sortino Ratio: 1.184
Max Drawdown: -52.3%
Avg Drawdown: -11.8%
Normalized Score: -0.258
Lookback periods: [52, 72, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,096,388,070
Annual Return: 39.77%
Sharpe Ratio: 1.35552
Sortino Ratio: 1.289
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: 0.065
Lookback periods: [92, 100, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 13m 26sRunning iteration 21/750... Est. remaining: 9m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,978,809,503
Annual Return: 42.17%
Sharpe Ratio: 1.50632
Sortino Ratio: 1.420
Max Drawdown: -53.1%
Avg Drawdown: -10.1%
Normalized Score: 0.816
Lookback periods: [50, 52, 55] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 8m 42sRunning iteration 41/750... Est. remaining: 7m 53sRunning iteration 51/750... Est. remaining: 7m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,250,655,285
Annual Return: 48.15%
Sharpe Ratio: 1.56803
Sortino Ratio: 1.532
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 1.084
Lookback periods: [157, 161, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/750... Est. remaining: 7m 13sRunning iteration 71/750... Est. remaining: 6m 53sRunning iteration 81/750... Est. remaining: 6m 37sRunning iteration 91/750... Est. remaining: 6m 24sRunning iteration 101/750... Est. remaining: 6m 12sbest_combination: {'lookbacks': [157, 161, 175], 'score': np.float64(1.0840503628164393), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 2sRunning iteration 121/750... Est. remaining: 5m 53sRunning iteration 131/750... Est. remaining: 5m 44sRunning iteration 141/750... Est. remaining: 5m 35sRunning iteration 151/750... Est. remaining: 5m 28sRunning iteration 161/750... Est. remaining: 5m 20sRunning iteration 171/750... Est. remaining: 5m 13sRunning iteration 181/750... Est. remaining: 5m 6sRunning iteration 191/750... Est. remaining: 4m 59sRunning iteration 201/750... Est. remaining: 4m 53sbest_combination: {'lookbacks': [157, 161, 175], 'score': np.float64(1.0840503628164393), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,027,866,795
Annual Return: 48.99%
Sharpe Ratio: 1.59225
Sortino Ratio: 1.558
Max Drawdown: -59.0%
Avg Drawdown: -10.0%
Normalized Score: 1.129
Lookback periods: [156, 158, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/750... Est. remaining: 4m 50sRunning iteration 221/750... Est. remaining: 4m 43sRunning iteration 231/750... Est. remaining: 4m 37sRunning iteration 241/750... Est. remaining: 4m 31sRunning iteration 251/750... Est. remaining: 4m 25sRunning iteration 261/750... Est. remaining: 4m 19sRunning iteration 271/750... Est. remaining: 4m 13sRunning iteration 281/750... Est. remaining: 4m 7sRunning iteration 291/750... Est. remaining: 4m 1sRunning iteration 301/750... Est. remaining: 3m 55sbest_combination: {'lookbacks': [156, 158, 169], 'score': np.float64(1.12909904785782), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 50sRunning iteration 321/750... Est. remaining: 3m 44sRunning iteration 331/750... Est. remaining: 3m 38sRunning iteration 341/750... Est. remaining: 3m 33sRunning iteration 351/750... Est. remaining: 3m 27sRunning iteration 361/750... Est. remaining: 3m 22sRunning iteration 371/750... Est. remaining: 3m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,171,723,662
Annual Return: 48.60%
Sharpe Ratio: 1.58554
Sortino Ratio: 1.550
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.156
Lookback periods: [157, 160, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/750... Est. remaining: 3m 12sRunning iteration 391/750... Est. remaining: 3m 6sRunning iteration 401/750... Est. remaining: 3m 1sbest_combination: {'lookbacks': [157, 160, 169], 'score': np.float64(1.1564934241333125), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 56sRunning iteration 421/750... Est. remaining: 2m 50sRunning iteration 431/750... Est. remaining: 2m 45sRunning iteration 441/750... Est. remaining: 2m 39sRunning iteration 451/750... Est. remaining: 2m 34sRunning iteration 461/750... Est. remaining: 2m 29sRunning iteration 471/750... Est. remaining: 2m 23sRunning iteration 481/750... Est. remaining: 2m 18sRunning iteration 491/750... Est. remaining: 2m 13sRunning iteration 501/750... Est. remaining: 2m 8sbest_combination: {'lookbacks': [157, 160, 169], 'score': np.float64(1.1564934241333125), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 2sRunning iteration 521/750... Est. remaining: 1m 57sRunning iteration 531/750... Est. remaining: 1m 52sRunning iteration 541/750... Est. remaining: 1m 47sRunning iteration 551/750... Est. remaining: 1m 42sRunning iteration 561/750... Est. remaining: 1m 36sRunning iteration 571/750... Est. remaining: 1m 31sRunning iteration 581/750... Est. remaining: 1m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,552,905,790
Annual Return: 48.78%
Sharpe Ratio: 1.59349
Sortino Ratio: 1.566
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 1.171
Lookback periods: [159, 162, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/750... Est. remaining: 1m 21sRunning iteration 601/750... Est. remaining: 1m 16sbest_combination: {'lookbacks': [159, 162, 168], 'score': np.float64(1.1711687415608563), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 1sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [159, 162, 168], 'score': np.float64(1.1711687415608563), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 1.17
best_combination: {'lookbacks': [159, 162, 168], 'score': np.float64(1.1711687415608563), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [159, 162, 168] (score: 1.1712)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [159, 162, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 114 selections (27.4%)
2. sp500_hma: 107 selections (25.7%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 79 selections (19.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,552,905,790.44
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Sun Aug 24 01:18:35 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $905,912,726
Annual Return: 39.00%
Sharpe Ratio: 1.34180
Sortino Ratio: 1.256
Max Drawdown: -55.0%
Avg Drawdown: -12.5%
Normalized Score: -0.380
Lookback periods: [65, 111, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,343,598,640
Annual Return: 40.59%
Sharpe Ratio: 1.37329
Sortino Ratio: 1.303
Max Drawdown: -56.6%
Avg Drawdown: -12.9%
Normalized Score: -0.298
Lookback periods: [90, 156, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,634,751,930
Annual Return: 46.53%
Sharpe Ratio: 1.52075
Sortino Ratio: 1.484
Max Drawdown: -58.5%
Avg Drawdown: -11.4%
Normalized Score: 0.543
Lookback periods: [144, 158, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 13m 31sRunning iteration 21/750... Est. remaining: 9m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,164,120,567
Annual Return: 46.16%
Sharpe Ratio: 1.53120
Sortino Ratio: 1.483
Max Drawdown: -57.2%
Avg Drawdown: -11.7%
Normalized Score: 0.551
Lookback periods: [137, 156, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 8m 35sRunning iteration 41/750... Est. remaining: 7m 45sRunning iteration 51/750... Est. remaining: 7m 15sRunning iteration 61/750... Est. remaining: 6m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,119,386,354
Annual Return: 48.08%
Sharpe Ratio: 1.57115
Sortino Ratio: 1.538
Max Drawdown: -58.5%
Avg Drawdown: -11.8%
Normalized Score: 0.714
Lookback periods: [147, 154, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/750... Est. remaining: 6m 47sRunning iteration 81/750... Est. remaining: 6m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,754,030,361
Annual Return: 48.41%
Sharpe Ratio: 1.58415
Sortino Ratio: 1.550
Max Drawdown: -56.9%
Avg Drawdown: -10.7%
Normalized Score: 0.944
Lookback periods: [156, 159, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/750... Est. remaining: 6m 26sRunning iteration 101/750... Est. remaining: 6m 13sbest_combination: {'lookbacks': [156, 159, 161], 'score': np.float64(0.9441280002194216), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 1sRunning iteration 121/750... Est. remaining: 5m 51sRunning iteration 131/750... Est. remaining: 5m 43sRunning iteration 141/750... Est. remaining: 5m 35sRunning iteration 151/750... Est. remaining: 5m 27sRunning iteration 161/750... Est. remaining: 5m 19sRunning iteration 171/750... Est. remaining: 5m 12sRunning iteration 181/750... Est. remaining: 5m 5sRunning iteration 191/750... Est. remaining: 4m 59sRunning iteration 201/750... Est. remaining: 4m 52sbest_combination: {'lookbacks': [156, 159, 161], 'score': np.float64(0.9441280002194216), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 46sRunning iteration 221/750... Est. remaining: 4m 39sRunning iteration 231/750... Est. remaining: 4m 33sRunning iteration 241/750... Est. remaining: 4m 27sRunning iteration 251/750... Est. remaining: 4m 21sRunning iteration 261/750... Est. remaining: 4m 15sRunning iteration 271/750... Est. remaining: 4m 9sRunning iteration 281/750... Est. remaining: 4m 3sRunning iteration 291/750... Est. remaining: 3m 58sRunning iteration 301/750... Est. remaining: 3m 52sbest_combination: {'lookbacks': [156, 159, 161], 'score': np.float64(0.9441280002194216), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 46sRunning iteration 321/750... Est. remaining: 3m 41sRunning iteration 331/750... Est. remaining: 3m 35sRunning iteration 341/750... Est. remaining: 3m 29sRunning iteration 351/750... Est. remaining: 3m 24sRunning iteration 361/750... Est. remaining: 3m 18sRunning iteration 371/750... Est. remaining: 3m 13sRunning iteration 381/750... Est. remaining: 3m 8sRunning iteration 391/750... Est. remaining: 3m 2sRunning iteration 401/750... Est. remaining: 2m 57sbest_combination: {'lookbacks': [156, 159, 161], 'score': np.float64(0.9441280002194216), 'visits': 1}
Running iteration 411/750... Est. remaining: 15m 38sRunning iteration 421/750... Est. remaining: 14m 53sRunning iteration 431/750... Est. remaining: 25m 54sRunning iteration 441/750... Est. remaining: 24m 38sRunning iteration 451/750... Est. remaining: 23m 22sRunning iteration 461/750... Est. remaining: 68m 51sRunning iteration 471/750... Est. remaining: 98m 19sRunning iteration 481/750... Est. remaining: 142m 2sRunning iteration 491/750... Est. remaining: 134m 2sRunning iteration 501/750... Est. remaining: 141m 13sbest_combination: {'lookbacks': [156, 159, 161], 'score': np.float64(0.9441280002194216), 'visits': 1}
Running iteration 511/750... Est. remaining: 142m 7sRunning iteration 521/750... Est. remaining: 133m 37sRunning iteration 531/750... Est. remaining: 161m 42sRunning iteration 541/750... Est. remaining: 151m 32sRunning iteration 551/750... Est. remaining: 141m 43sRunning iteration 561/750... Est. remaining: 136m 53sRunning iteration 571/750... Est. remaining: 127m 26sRunning iteration 581/750... Est. remaining: 136m 8sRunning iteration 591/750... Est. remaining: 134m 33sRunning iteration 601/750... Est. remaining: 124m 3sbest_combination: {'lookbacks': [156, 159, 161], 'score': np.float64(0.9441280002194216), 'visits': 1}
Running iteration 611/750... Est. remaining: 120m 35sRunning iteration 621/750... Est. remaining: 110m 11sRunning iteration 631/750... Est. remaining: 101m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,004,691,432
Annual Return: 48.98%
Sharpe Ratio: 1.58549
Sortino Ratio: 1.560
Max Drawdown: -55.3%
Avg Drawdown: -11.5%
Normalized Score: 0.970
Lookback periods: [153, 154, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/750... Est. remaining: 93m 18sRunning iteration 651/750... Est. remaining: 83m 31sRunning iteration 661/750... Est. remaining: 74m 2sRunning iteration 671/750... Est. remaining: 65m 2sRunning iteration 681/750... Est. remaining: 56m 25sRunning iteration 691/750... Est. remaining: 47m 39sRunning iteration 701/750... Est. remaining: 39m 27sbest_combination: {'lookbacks': [153, 154, 154], 'score': np.float64(0.9703175393330502), 'visits': 1}
Running iteration 711/750... Est. remaining: 31m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,396,005,065
Annual Return: 48.71%
Sharpe Ratio: 1.59710
Sortino Ratio: 1.562
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 1.051
Lookback periods: [146, 156, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/750... Est. remaining: 23m 33sRunning iteration 731/750... Est. remaining: 15m 30sRunning iteration 741/750... Est. remaining: 7m 38s
Monte Carlo simulation completed in 566.2 minutes
Best normalized score: 1.05
best_combination: {'lookbacks': [146, 156, 168], 'score': np.float64(1.0514022402447352), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [146, 156, 168] (score: 1.0514)

Monte Carlo simulation completed in 566.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [146, 156, 168] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 111 selections (26.7%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,396,005,065.23
Average Annualized Gain: 48.7%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Sun Aug 24 10:44:55 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $773,332,144
Annual Return: 38.37%
Sharpe Ratio: 1.27140
Sortino Ratio: 1.207
Max Drawdown: -59.0%
Avg Drawdown: -12.7%
Normalized Score: -1.113
Lookback periods: [79, 187, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $725,877,683
Annual Return: 38.12%
Sharpe Ratio: 1.31565
Sortino Ratio: 1.246
Max Drawdown: -52.3%
Avg Drawdown: -12.4%
Normalized Score: -0.759
Lookback periods: [94, 114, 128] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,789,695,514
Annual Return: 44.86%
Sharpe Ratio: 1.47457
Sortino Ratio: 1.444
Max Drawdown: -58.5%
Avg Drawdown: -12.5%
Normalized Score: -0.183
Lookback periods: [136, 164, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 602m 10sRunning iteration 21/750... Est. remaining: 333m 40sRunning iteration 31/750... Est. remaining: 221m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,024,345,892
Annual Return: 46.05%
Sharpe Ratio: 1.52344
Sortino Ratio: 1.490
Max Drawdown: -63.5%
Avg Drawdown: -11.3%
Normalized Score: -0.035
Lookback periods: [137, 152, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 199m 12sRunning iteration 51/750... Est. remaining: 194m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,998,848,509
Annual Return: 46.03%
Sharpe Ratio: 1.51190
Sortino Ratio: 1.476
Max Drawdown: -59.7%
Avg Drawdown: -11.9%
Normalized Score: -0.016
Lookback periods: [134, 150, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/750... Est. remaining: 160m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,073,372,835
Annual Return: 46.85%
Sharpe Ratio: 1.52758
Sortino Ratio: 1.494
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.185
Lookback periods: [156, 168, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/750... Est. remaining: 195m 24sRunning iteration 81/750... Est. remaining: 224m 48sRunning iteration 91/750... Est. remaining: 197m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,695,296,600
Annual Return: 48.38%
Sharpe Ratio: 1.57197
Sortino Ratio: 1.537
Max Drawdown: -60.1%
Avg Drawdown: -10.7%
Normalized Score: 0.366
Lookback periods: [156, 158, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/750... Est. remaining: 190m 9sbest_combination: {'lookbacks': [156, 158, 159], 'score': np.float64(0.3662454620778067), 'visits': 1}
Running iteration 111/750... Est. remaining: 170m 41sRunning iteration 121/750... Est. remaining: 156m 40sRunning iteration 131/750... Est. remaining: 142m 43sRunning iteration 141/750... Est. remaining: 151m 47sRunning iteration 151/750... Est. remaining: 146m 9sRunning iteration 161/750... Est. remaining: 135m 2sRunning iteration 171/750... Est. remaining: 160m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,822,761,274
Annual Return: 48.44%
Sharpe Ratio: 1.58434
Sortino Ratio: 1.557
Max Drawdown: -56.9%
Avg Drawdown: -10.7%
Normalized Score: 0.530
Lookback periods: [157, 160, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/750... Est. remaining: 153m 27sRunning iteration 191/750... Est. remaining: 143m 3sRunning iteration 201/750... Est. remaining: 135m 47sbest_combination: {'lookbacks': [157, 160, 163], 'score': np.float64(0.5302982635229674), 'visits': 1}
Running iteration 211/750... Est. remaining: 150m 34sRunning iteration 221/750... Est. remaining: 141m 15sRunning iteration 231/750... Est. remaining: 132m 45sRunning iteration 241/750... Est. remaining: 124m 58sRunning iteration 251/750... Est. remaining: 146m 24sRunning iteration 261/750... Est. remaining: 138m 6sRunning iteration 271/750... Est. remaining: 140m 38sRunning iteration 281/750... Est. remaining: 136m 5sRunning iteration 291/750... Est. remaining: 128m 43sRunning iteration 301/750... Est. remaining: 125m 18sbest_combination: {'lookbacks': [157, 160, 163], 'score': np.float64(0.5302982635229674), 'visits': 1}
Running iteration 311/750... Est. remaining: 140m 18sRunning iteration 321/750... Est. remaining: 179m 46sRunning iteration 331/750... Est. remaining: 170m 23sRunning iteration 341/750... Est. remaining: 161m 31sRunning iteration 351/750... Est. remaining: 154m 49sRunning iteration 361/750... Est. remaining: 146m 50sRunning iteration 371/750... Est. remaining: 139m 21sRunning iteration 381/750... Est. remaining: 132m 11sRunning iteration 391/750... Est. remaining: 127m 0sRunning iteration 401/750... Est. remaining: 121m 3sbest_combination: {'lookbacks': [157, 160, 163], 'score': np.float64(0.5302982635229674), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,794,821,425
Annual Return: 48.43%
Sharpe Ratio: 1.57554
Sortino Ratio: 1.548
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 0.588
Lookback periods: [157, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/750... Est. remaining: 117m 48sRunning iteration 421/750... Est. remaining: 111m 41sRunning iteration 431/750... Est. remaining: 106m 29sRunning iteration 441/750... Est. remaining: 100m 52sRunning iteration 451/750... Est. remaining: 97m 15sRunning iteration 461/750... Est. remaining: 94m 48sRunning iteration 471/750... Est. remaining: 89m 38sRunning iteration 481/750... Est. remaining: 84m 41sRunning iteration 491/750... Est. remaining: 79m 55sRunning iteration 501/750... Est. remaining: 75m 21sbest_combination: {'lookbacks': [157, 162, 169], 'score': np.float64(0.5876004165034401), 'visits': 1}
Running iteration 511/750... Est. remaining: 70m 57sRunning iteration 521/750... Est. remaining: 66m 44sRunning iteration 531/750... Est. remaining: 62m 39sRunning iteration 541/750... Est. remaining: 58m 44sRunning iteration 551/750... Est. remaining: 54m 57sRunning iteration 561/750... Est. remaining: 51m 18sRunning iteration 571/750... Est. remaining: 47m 46sRunning iteration 581/750... Est. remaining: 44m 22sRunning iteration 591/750... Est. remaining: 41m 4sRunning iteration 601/750... Est. remaining: 37m 53sbest_combination: {'lookbacks': [157, 162, 169], 'score': np.float64(0.5876004165034401), 'visits': 1}
Running iteration 611/750... Est. remaining: 34m 47sRunning iteration 621/750... Est. remaining: 31m 48sRunning iteration 631/750... Est. remaining: 28m 54sRunning iteration 641/750... Est. remaining: 26m 6sRunning iteration 651/750... Est. remaining: 23m 22sRunning iteration 661/750... Est. remaining: 20m 43sRunning iteration 671/750... Est. remaining: 18m 9sRunning iteration 681/750... Est. remaining: 15m 40sRunning iteration 691/750... Est. remaining: 13m 14sRunning iteration 701/750... Est. remaining: 10m 52sbest_combination: {'lookbacks': [157, 162, 169], 'score': np.float64(0.5876004165034401), 'visits': 1}
Running iteration 711/750... Est. remaining: 8m 35sRunning iteration 721/750... Est. remaining: 6m 21sRunning iteration 731/750... Est. remaining: 4m 10sRunning iteration 741/750... Est. remaining: 2m 3s
Monte Carlo simulation completed in 152.8 minutes
Best normalized score: 0.59
best_combination: {'lookbacks': [157, 162, 169], 'score': np.float64(0.5876004165034401), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [157, 162, 169] (score: 0.5876)

Monte Carlo simulation completed in 152.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [157, 162, 169] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,794,821,425.09
Average Annualized Gain: 48.4%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Sun Aug 24 13:17:48 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,173,440,122
Annual Return: 40.05%
Sharpe Ratio: 1.34163
Sortino Ratio: 1.279
Max Drawdown: -57.7%
Avg Drawdown: -13.5%
Normalized Score: -0.521
Lookback periods: [101, 128, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,370,978,602
Annual Return: 40.68%
Sharpe Ratio: 1.37344
Sortino Ratio: 1.309
Max Drawdown: -61.3%
Avg Drawdown: -12.6%
Normalized Score: -0.418
Lookback periods: [108, 111, 137] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $872,951,079
Annual Return: 38.85%
Sharpe Ratio: 1.36599
Sortino Ratio: 1.283
Max Drawdown: -52.3%
Avg Drawdown: -11.3%
Normalized Score: -0.182
Lookback periods: [54, 78, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,361,926,175
Annual Return: 46.32%
Sharpe Ratio: 1.49206
Sortino Ratio: 1.460
Max Drawdown: -60.2%
Avg Drawdown: -11.4%
Normalized Score: 0.430
Lookback periods: [184, 191, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 15m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,495,537,850
Annual Return: 47.13%
Sharpe Ratio: 1.54628
Sortino Ratio: 1.514
Max Drawdown: -63.5%
Avg Drawdown: -11.9%
Normalized Score: 0.454
Lookback periods: [138, 148, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,222,491,861
Annual Return: 46.95%
Sharpe Ratio: 1.55036
Sortino Ratio: 1.513
Max Drawdown: -57.2%
Avg Drawdown: -12.1%
Normalized Score: 0.609
Lookback periods: [139, 147, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,152,991,135
Annual Return: 48.60%
Sharpe Ratio: 1.59085
Sortino Ratio: 1.553
Max Drawdown: -59.2%
Avg Drawdown: -11.2%
Normalized Score: 0.849
Lookback periods: [149, 158, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 12m 42sRunning iteration 31/750... Est. remaining: 10m 22sRunning iteration 41/750... Est. remaining: 9m 6sRunning iteration 51/750... Est. remaining: 8m 19sRunning iteration 61/750... Est. remaining: 7m 45sRunning iteration 71/750... Est. remaining: 7m 20sRunning iteration 81/750... Est. remaining: 7m 1sRunning iteration 91/750... Est. remaining: 6m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,884,210,579
Annual Return: 41.97%
Sharpe Ratio: 1.49840
Sortino Ratio: 1.401
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 1.013
Lookback periods: [51, 53, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/750... Est. remaining: 6m 37sbest_combination: {'lookbacks': [51, 53, 87], 'score': np.float64(1.013193183149848), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,936,337,278
Annual Return: 42.08%
Sharpe Ratio: 1.49673
Sortino Ratio: 1.405
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.039
Lookback periods: [51, 53, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/750... Est. remaining: 6m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,381,445,267
Annual Return: 42.93%
Sharpe Ratio: 1.54842
Sortino Ratio: 1.452
Max Drawdown: -37.2%
Avg Drawdown: -9.3%
Normalized Score: 1.129
Lookback periods: [50, 52, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/750... Est. remaining: 6m 13sRunning iteration 141/750... Est. remaining: 6m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,049,338,469
Annual Return: 42.32%
Sharpe Ratio: 1.52822
Sortino Ratio: 1.430
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.173
Lookback periods: [50, 50, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/750... Est. remaining: 5m 57sRunning iteration 161/750... Est. remaining: 5m 48sRunning iteration 171/750... Est. remaining: 5m 39sRunning iteration 181/750... Est. remaining: 5m 31sRunning iteration 191/750... Est. remaining: 5m 22sRunning iteration 201/750... Est. remaining: 5m 14sbest_combination: {'lookbacks': [50, 50, 83], 'score': np.float64(1.173092456650806), 'visits': 1}
Running iteration 211/750... Est. remaining: 5m 6sRunning iteration 221/750... Est. remaining: 4m 59sRunning iteration 231/750... Est. remaining: 4m 52sRunning iteration 241/750... Est. remaining: 4m 45sRunning iteration 251/750... Est. remaining: 4m 38sRunning iteration 261/750... Est. remaining: 4m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,682,377,903
Annual Return: 43.43%
Sharpe Ratio: 1.54975
Sortino Ratio: 1.457
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.250
Lookback periods: [50, 54, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/750... Est. remaining: 4m 26sRunning iteration 281/750... Est. remaining: 4m 20sRunning iteration 291/750... Est. remaining: 4m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,525,950,064
Annual Return: 43.18%
Sharpe Ratio: 1.55179
Sortino Ratio: 1.460
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.347
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 301/750... Est. remaining: 4m 8sbest_combination: {'lookbacks': [50, 50, 96], 'score': np.float64(1.3467186701793028), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,090,622,705
Annual Return: 44.01%
Sharpe Ratio: 1.57961
Sortino Ratio: 1.488
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.495
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/750... Est. remaining: 4m 4sRunning iteration 321/750... Est. remaining: 3m 57sRunning iteration 331/750... Est. remaining: 3m 51sRunning iteration 341/750... Est. remaining: 3m 45sRunning iteration 351/750... Est. remaining: 3m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,613,763,997
Annual Return: 44.66%
Sharpe Ratio: 1.61575
Sortino Ratio: 1.520
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.571
Lookback periods: [50, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 361/750... Est. remaining: 3m 34sRunning iteration 371/750... Est. remaining: 3m 27sRunning iteration 381/750... Est. remaining: 3m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,912,007
Annual Return: 45.27%
Sharpe Ratio: 1.61355
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.587
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/750... Est. remaining: 3m 16sRunning iteration 401/750... Est. remaining: 3m 11sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.5868150767032159), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 5sRunning iteration 421/750... Est. remaining: 2m 59sRunning iteration 431/750... Est. remaining: 2m 53sRunning iteration 441/750... Est. remaining: 2m 47sRunning iteration 451/750... Est. remaining: 2m 41sRunning iteration 461/750... Est. remaining: 2m 35sRunning iteration 471/750... Est. remaining: 2m 30sRunning iteration 481/750... Est. remaining: 2m 24sRunning iteration 491/750... Est. remaining: 2m 18sRunning iteration 501/750... Est. remaining: 2m 13sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.5868150767032159), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 7sRunning iteration 521/750... Est. remaining: 2m 2sRunning iteration 531/750... Est. remaining: 1m 56sRunning iteration 541/750... Est. remaining: 1m 51sRunning iteration 551/750... Est. remaining: 1m 45sRunning iteration 561/750... Est. remaining: 1m 40sRunning iteration 571/750... Est. remaining: 1m 34sRunning iteration 581/750... Est. remaining: 1m 29sRunning iteration 591/750... Est. remaining: 1m 24sRunning iteration 601/750... Est. remaining: 1m 18sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.5868150767032159), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 13sRunning iteration 621/750... Est. remaining: 1m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.872
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 631/750... Est. remaining: 1m 2sRunning iteration 641/750... Est. remaining: 0m 57sRunning iteration 651/750... Est. remaining: 0m 52sRunning iteration 661/750... Est. remaining: 0m 47sRunning iteration 671/750... Est. remaining: 0m 41sRunning iteration 681/750... Est. remaining: 0m 36sRunning iteration 691/750... Est. remaining: 0m 31sRunning iteration 701/750... Est. remaining: 0m 26sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8724783793167386), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.5 minutes
Best normalized score: 1.87
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8724783793167386), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 52, 95] (score: 1.8725)

Monte Carlo simulation completed in 6.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Sun Aug 24 13:24:25 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $977,644,147
Annual Return: 39.31%
Sharpe Ratio: 1.35501
Sortino Ratio: 1.272
Max Drawdown: -52.3%
Avg Drawdown: -13.1%
Normalized Score: -0.264
Lookback periods: [95, 97, 103] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,274,559,002
Annual Return: 44.25%
Sharpe Ratio: 1.46696
Sortino Ratio: 1.420
Max Drawdown: -56.4%
Avg Drawdown: -12.9%
Normalized Score: 0.125
Lookback periods: [122, 148, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 12m 4sRunning iteration 21/750... Est. remaining: 9m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,641,153,046
Annual Return: 45.71%
Sharpe Ratio: 1.51073
Sortino Ratio: 1.470
Max Drawdown: -56.8%
Avg Drawdown: -11.9%
Normalized Score: 0.389
Lookback periods: [135, 139, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 8m 20sRunning iteration 41/750... Est. remaining: 7m 36sRunning iteration 51/750... Est. remaining: 7m 8sRunning iteration 61/750... Est. remaining: 6m 47sRunning iteration 71/750... Est. remaining: 6m 30sRunning iteration 81/750... Est. remaining: 6m 17sRunning iteration 91/750... Est. remaining: 6m 6sRunning iteration 101/750... Est. remaining: 5m 56sbest_combination: {'lookbacks': [135, 139, 171], 'score': np.float64(0.3894455182210511), 'visits': 1}
Running iteration 111/750... Est. remaining: 5m 47sRunning iteration 121/750... Est. remaining: 5m 38sRunning iteration 131/750... Est. remaining: 5m 29sRunning iteration 141/750... Est. remaining: 5m 22sRunning iteration 151/750... Est. remaining: 5m 14sRunning iteration 161/750... Est. remaining: 5m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,819,686,082
Annual Return: 43.63%
Sharpe Ratio: 1.49077
Sortino Ratio: 1.417
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: 0.457
Lookback periods: [90, 98, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/750... Est. remaining: 5m 5sRunning iteration 181/750... Est. remaining: 4m 59sRunning iteration 191/750... Est. remaining: 4m 52sRunning iteration 201/750... Est. remaining: 4m 46sbest_combination: {'lookbacks': [90, 98, 136], 'score': np.float64(0.45689970172419725), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,759,893,226
Annual Return: 47.89%
Sharpe Ratio: 1.55842
Sortino Ratio: 1.516
Max Drawdown: -59.0%
Avg Drawdown: -10.7%
Normalized Score: 0.631
Lookback periods: [157, 160, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/750... Est. remaining: 4m 37sRunning iteration 231/750... Est. remaining: 4m 31sRunning iteration 241/750... Est. remaining: 4m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,639,149,839
Annual Return: 49.63%
Sharpe Ratio: 1.60884
Sortino Ratio: 1.575
Max Drawdown: -58.5%
Avg Drawdown: -11.1%
Normalized Score: 0.803
Lookback periods: [154, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/750... Est. remaining: 4m 21sRunning iteration 261/750... Est. remaining: 4m 16sRunning iteration 271/750... Est. remaining: 4m 10sRunning iteration 281/750... Est. remaining: 4m 4sRunning iteration 291/750... Est. remaining: 3m 58sRunning iteration 301/750... Est. remaining: 3m 52sbest_combination: {'lookbacks': [154, 155, 172], 'score': np.float64(0.8033235304622233), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 47sRunning iteration 321/750... Est. remaining: 3m 42sRunning iteration 331/750... Est. remaining: 3m 36sRunning iteration 341/750... Est. remaining: 3m 31sRunning iteration 351/750... Est. remaining: 3m 26sRunning iteration 361/750... Est. remaining: 3m 21sRunning iteration 371/750... Est. remaining: 3m 15sRunning iteration 381/750... Est. remaining: 3m 10sRunning iteration 391/750... Est. remaining: 3m 5sRunning iteration 401/750... Est. remaining: 3m 0sbest_combination: {'lookbacks': [154, 155, 172], 'score': np.float64(0.8033235304622233), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 55sRunning iteration 421/750... Est. remaining: 2m 50sRunning iteration 431/750... Est. remaining: 2m 45sRunning iteration 441/750... Est. remaining: 2m 40sRunning iteration 451/750... Est. remaining: 2m 34sRunning iteration 461/750... Est. remaining: 2m 29sRunning iteration 471/750... Est. remaining: 2m 24sRunning iteration 481/750... Est. remaining: 2m 19sRunning iteration 491/750... Est. remaining: 2m 14sRunning iteration 501/750... Est. remaining: 2m 9sbest_combination: {'lookbacks': [154, 155, 172], 'score': np.float64(0.8033235304622233), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 4sRunning iteration 521/750... Est. remaining: 1m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,000,942,361
Annual Return: 48.98%
Sharpe Ratio: 1.59174
Sortino Ratio: 1.563
Max Drawdown: -59.0%
Avg Drawdown: -10.1%
Normalized Score: 0.833
Lookback periods: [158, 162, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/750... Est. remaining: 1m 55sRunning iteration 541/750... Est. remaining: 1m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,628,434,128
Annual Return: 41.38%
Sharpe Ratio: 1.49259
Sortino Ratio: 1.399
Max Drawdown: -38.3%
Avg Drawdown: -9.7%
Normalized Score: 0.886
Lookback periods: [52, 52, 93] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,263,726,202
Annual Return: 42.73%
Sharpe Ratio: 1.50787
Sortino Ratio: 1.427
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.272
Lookback periods: [50, 50, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.606
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/750... Est. remaining: 1m 48sRunning iteration 561/750... Est. remaining: 1m 43sRunning iteration 571/750... Est. remaining: 1m 37sRunning iteration 581/750... Est. remaining: 1m 32sRunning iteration 591/750... Est. remaining: 1m 27sRunning iteration 601/750... Est. remaining: 1m 22sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.605855808090959), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.806
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/750... Est. remaining: 1m 12sRunning iteration 631/750... Est. remaining: 1m 6sRunning iteration 641/750... Est. remaining: 1m 1sRunning iteration 651/750... Est. remaining: 0m 55sRunning iteration 661/750... Est. remaining: 0m 50sRunning iteration 671/750... Est. remaining: 0m 44sRunning iteration 681/750... Est. remaining: 0m 39sRunning iteration 691/750... Est. remaining: 0m 33sRunning iteration 701/750... Est. remaining: 0m 28sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8056146190534794), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 22sRunning iteration 721/750... Est. remaining: 0m 17sRunning iteration 731/750... Est. remaining: 0m 11sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 7.1 minutes
Best normalized score: 1.81
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.8056146190534794), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 52, 95] (score: 1.8056)

Monte Carlo simulation completed in 7.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Sun Aug 24 13:31:41 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,134,781,752
Annual Return: 39.91%
Sharpe Ratio: 1.33083
Sortino Ratio: 1.273
Max Drawdown: -66.2%
Avg Drawdown: -13.5%
Normalized Score: -1.097
Lookback periods: [116, 118, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,331,508,789
Annual Return: 40.56%
Sharpe Ratio: 1.33243
Sortino Ratio: 1.286
Max Drawdown: -67.3%
Avg Drawdown: -13.3%
Normalized Score: -1.054
Lookback periods: [122, 188, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,003,584,708
Annual Return: 47.45%
Sharpe Ratio: 1.55017
Sortino Ratio: 1.517
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.575
Lookback periods: [152, 167, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 19m 18sRunning iteration 21/750... Est. remaining: 13m 32sRunning iteration 31/750... Est. remaining: 11m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,658,742,515
Annual Return: 49.25%
Sharpe Ratio: 1.58564
Sortino Ratio: 1.550
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.697
Lookback periods: [178, 184, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 10m 54sRunning iteration 51/750... Est. remaining: 10m 6sRunning iteration 61/750... Est. remaining: 9m 33sRunning iteration 71/750... Est. remaining: 9m 7sRunning iteration 81/750... Est. remaining: 8m 47sRunning iteration 91/750... Est. remaining: 8m 28sRunning iteration 101/750... Est. remaining: 8m 13sbest_combination: {'lookbacks': [178, 184, 188], 'score': np.float64(0.6966440186615128), 'visits': 1}
Running iteration 111/750... Est. remaining: 7m 59sRunning iteration 121/750... Est. remaining: 7m 48sRunning iteration 131/750... Est. remaining: 7m 36sRunning iteration 141/750... Est. remaining: 7m 26sRunning iteration 151/750... Est. remaining: 7m 15sRunning iteration 161/750... Est. remaining: 7m 5sRunning iteration 171/750... Est. remaining: 6m 56sRunning iteration 181/750... Est. remaining: 6m 47sRunning iteration 191/750... Est. remaining: 6m 38sRunning iteration 201/750... Est. remaining: 6m 29sbest_combination: {'lookbacks': [178, 184, 188], 'score': np.float64(0.6966440186615128), 'visits': 1}
Running iteration 211/750... Est. remaining: 6m 21sRunning iteration 221/750... Est. remaining: 6m 12sRunning iteration 231/750... Est. remaining: 6m 4sRunning iteration 241/750... Est. remaining: 5m 56sRunning iteration 251/750... Est. remaining: 5m 48sRunning iteration 261/750... Est. remaining: 5m 40sRunning iteration 271/750... Est. remaining: 5m 33sRunning iteration 281/750... Est. remaining: 5m 25sRunning iteration 291/750... Est. remaining: 5m 17sRunning iteration 301/750... Est. remaining: 5m 10sbest_combination: {'lookbacks': [178, 184, 188], 'score': np.float64(0.6966440186615128), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,778,714,933
Annual Return: 49.68%
Sharpe Ratio: 1.59323
Sortino Ratio: 1.559
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.793
Lookback periods: [178, 189, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/750... Est. remaining: 5m 5sRunning iteration 321/750... Est. remaining: 4m 57sRunning iteration 331/750... Est. remaining: 4m 50sRunning iteration 341/750... Est. remaining: 4m 43sRunning iteration 351/750... Est. remaining: 4m 35sRunning iteration 361/750... Est. remaining: 4m 28sRunning iteration 371/750... Est. remaining: 4m 21sRunning iteration 381/750... Est. remaining: 4m 14sRunning iteration 391/750... Est. remaining: 4m 6sRunning iteration 401/750... Est. remaining: 3m 59sbest_combination: {'lookbacks': [178, 189, 190], 'score': np.float64(0.7930291338602399), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 52sRunning iteration 421/750... Est. remaining: 3m 45sRunning iteration 431/750... Est. remaining: 3m 38sRunning iteration 441/750... Est. remaining: 3m 31sRunning iteration 451/750... Est. remaining: 3m 24sRunning iteration 461/750... Est. remaining: 3m 17sRunning iteration 471/750... Est. remaining: 3m 10sRunning iteration 481/750... Est. remaining: 3m 3sRunning iteration 491/750... Est. remaining: 2m 56sRunning iteration 501/750... Est. remaining: 2m 50sbest_combination: {'lookbacks': [178, 189, 190], 'score': np.float64(0.7930291338602399), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 43sRunning iteration 521/750... Est. remaining: 2m 36sRunning iteration 531/750... Est. remaining: 2m 29sRunning iteration 541/750... Est. remaining: 2m 22sRunning iteration 551/750... Est. remaining: 2m 15sRunning iteration 561/750... Est. remaining: 2m 9sRunning iteration 571/750... Est. remaining: 2m 2sRunning iteration 581/750... Est. remaining: 1m 55sRunning iteration 591/750... Est. remaining: 1m 48sRunning iteration 601/750... Est. remaining: 1m 41sbest_combination: {'lookbacks': [178, 189, 190], 'score': np.float64(0.7930291338602399), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 35sRunning iteration 621/750... Est. remaining: 1m 28sRunning iteration 631/750... Est. remaining: 1m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,300,689,962
Annual Return: 49.10%
Sharpe Ratio: 1.57972
Sortino Ratio: 1.553
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.808
Lookback periods: [176, 185, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/750... Est. remaining: 1m 15sRunning iteration 651/750... Est. remaining: 1m 8sRunning iteration 661/750... Est. remaining: 1m 1sRunning iteration 671/750... Est. remaining: 0m 54sRunning iteration 681/750... Est. remaining: 0m 47sRunning iteration 691/750... Est. remaining: 0m 40sRunning iteration 701/750... Est. remaining: 0m 34sbest_combination: {'lookbacks': [176, 185, 188], 'score': np.float64(0.8083864090733455), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 27sRunning iteration 721/750... Est. remaining: 0m 20sRunning iteration 731/750... Est. remaining: 0m 13sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 8.4 minutes
Best normalized score: 0.81
best_combination: {'lookbacks': [176, 185, 188], 'score': np.float64(0.8083864090733455), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [176, 185, 188] (score: 0.8084)

Monte Carlo simulation completed in 8.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 185, 188] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 121 selections (29.1%)
2. sp500_hma: 102 selections (24.5%)
3. naz100_pine: 88 selections (21.2%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 34 selections (8.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,300,689,961.99
Average Annualized Gain: 49.1%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Sun Aug 24 13:40:16 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,462,097,359
Annual Return: 40.94%
Sharpe Ratio: 1.38557
Sortino Ratio: 1.315
Max Drawdown: -56.1%
Avg Drawdown: -12.6%
Normalized Score: -0.577
Lookback periods: [99, 110, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,234,875,443
Annual Return: 40.25%
Sharpe Ratio: 1.38587
Sortino Ratio: 1.293
Max Drawdown: -52.3%
Avg Drawdown: -10.5%
Normalized Score: -0.055
Lookback periods: [50, 96, 140] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 16m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,466,831,148
Annual Return: 46.40%
Sharpe Ratio: 1.52015
Sortino Ratio: 1.474
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.006
Lookback periods: [141, 158, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 12m 37sRunning iteration 31/750... Est. remaining: 10m 40sRunning iteration 41/750... Est. remaining: 9m 49sRunning iteration 51/750... Est. remaining: 9m 14sRunning iteration 61/750... Est. remaining: 8m 47sRunning iteration 71/750... Est. remaining: 8m 26sRunning iteration 81/750... Est. remaining: 8m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,180,287,916
Annual Return: 45.27%
Sharpe Ratio: 1.47015
Sortino Ratio: 1.447
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.209
Lookback periods: [164, 165, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/750... Est. remaining: 8m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,118,478,755
Annual Return: 47.52%
Sharpe Ratio: 1.55436
Sortino Ratio: 1.520
Max Drawdown: -60.1%
Avg Drawdown: -11.2%
Normalized Score: 0.234
Lookback periods: [153, 159, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/750... Est. remaining: 8m 1sbest_combination: {'lookbacks': [153, 159, 161], 'score': np.float64(0.23392264858630435), 'visits': 1}
Running iteration 111/750... Est. remaining: 7m 48sRunning iteration 121/750... Est. remaining: 7m 35sRunning iteration 131/750... Est. remaining: 7m 23sRunning iteration 141/750... Est. remaining: 7m 13sRunning iteration 151/750... Est. remaining: 7m 2sRunning iteration 161/750... Est. remaining: 6m 52sRunning iteration 171/750... Est. remaining: 6m 43sRunning iteration 181/750... Est. remaining: 6m 33sRunning iteration 191/750... Est. remaining: 6m 24sRunning iteration 201/750... Est. remaining: 6m 16sbest_combination: {'lookbacks': [153, 159, 161], 'score': np.float64(0.23392264858630435), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,790,993,707
Annual Return: 47.32%
Sharpe Ratio: 1.53486
Sortino Ratio: 1.510
Max Drawdown: -58.5%
Avg Drawdown: -11.0%
Normalized Score: 0.295
Lookback periods: [155, 163, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/750... Est. remaining: 6m 12sRunning iteration 221/750... Est. remaining: 6m 3sRunning iteration 231/750... Est. remaining: 5m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,442,554,137
Annual Return: 48.25%
Sharpe Ratio: 1.57678
Sortino Ratio: 1.544
Max Drawdown: -58.4%
Avg Drawdown: -11.0%
Normalized Score: 0.420
Lookback periods: [159, 160, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/750... Est. remaining: 5m 50sRunning iteration 251/750... Est. remaining: 5m 42sRunning iteration 261/750... Est. remaining: 5m 34sRunning iteration 271/750... Est. remaining: 5m 26sRunning iteration 281/750... Est. remaining: 5m 18sRunning iteration 291/750... Est. remaining: 5m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,925,353,787
Annual Return: 48.49%
Sharpe Ratio: 1.58296
Sortino Ratio: 1.559
Max Drawdown: -56.9%
Avg Drawdown: -10.8%
Normalized Score: 0.541
Lookback periods: [159, 161, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 301/750... Est. remaining: 5m 7sbest_combination: {'lookbacks': [159, 161, 166], 'score': np.float64(0.5411039706512216), 'visits': 1}
Running iteration 311/750... Est. remaining: 5m 0sRunning iteration 321/750... Est. remaining: 4m 52sRunning iteration 331/750... Est. remaining: 4m 45sRunning iteration 341/750... Est. remaining: 4m 38sRunning iteration 351/750... Est. remaining: 4m 32sRunning iteration 361/750... Est. remaining: 4m 25sRunning iteration 371/750... Est. remaining: 4m 18sRunning iteration 381/750... Est. remaining: 4m 11sRunning iteration 391/750... Est. remaining: 4m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,418,495,431
Annual Return: 48.24%
Sharpe Ratio: 1.57495
Sortino Ratio: 1.530
Max Drawdown: -55.0%
Avg Drawdown: -10.8%
Normalized Score: 0.563
Lookback periods: [156, 159, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/750... Est. remaining: 3m 58sbest_combination: {'lookbacks': [156, 159, 175], 'score': np.float64(0.5631960397103798), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,957,477,440
Annual Return: 48.00%
Sharpe Ratio: 1.56448
Sortino Ratio: 1.532
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 0.619
Lookback periods: [157, 163, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/750... Est. remaining: 3m 53sRunning iteration 421/750... Est. remaining: 3m 46sRunning iteration 431/750... Est. remaining: 3m 39sRunning iteration 441/750... Est. remaining: 3m 32sRunning iteration 451/750... Est. remaining: 3m 24sRunning iteration 461/750... Est. remaining: 3m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,761,984,053
Annual Return: 48.87%
Sharpe Ratio: 1.59975
Sortino Ratio: 1.567
Max Drawdown: -59.0%
Avg Drawdown: -10.1%
Normalized Score: 0.645
Lookback periods: [158, 160, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/750... Est. remaining: 3m 11sRunning iteration 481/750... Est. remaining: 3m 4sRunning iteration 491/750... Est. remaining: 2m 57sRunning iteration 501/750... Est. remaining: 2m 50sbest_combination: {'lookbacks': [158, 160, 168], 'score': np.float64(0.6450750619300099), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 43sRunning iteration 521/750... Est. remaining: 2m 35sRunning iteration 531/750... Est. remaining: 2m 28sRunning iteration 541/750... Est. remaining: 2m 22sRunning iteration 551/750... Est. remaining: 2m 15sRunning iteration 561/750... Est. remaining: 2m 8sRunning iteration 571/750... Est. remaining: 2m 1sRunning iteration 581/750... Est. remaining: 1m 54sRunning iteration 591/750... Est. remaining: 1m 47sRunning iteration 601/750... Est. remaining: 1m 40sbest_combination: {'lookbacks': [158, 160, 168], 'score': np.float64(0.6450750619300099), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 33sRunning iteration 621/750... Est. remaining: 1m 26sRunning iteration 631/750... Est. remaining: 1m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,659,905,685
Annual Return: 48.83%
Sharpe Ratio: 1.59465
Sortino Ratio: 1.565
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 0.700
Lookback periods: [159, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/750... Est. remaining: 1m 13sRunning iteration 651/750... Est. remaining: 1m 6sRunning iteration 661/750... Est. remaining: 1m 0sRunning iteration 671/750... Est. remaining: 0m 53sRunning iteration 681/750... Est. remaining: 0m 46sRunning iteration 691/750... Est. remaining: 0m 39sRunning iteration 701/750... Est. remaining: 0m 33sbest_combination: {'lookbacks': [159, 161, 168], 'score': np.float64(0.699678886525794), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 26sRunning iteration 721/750... Est. remaining: 0m 19sRunning iteration 731/750... Est. remaining: 0m 13sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 8.3 minutes
Best normalized score: 0.70
best_combination: {'lookbacks': [159, 161, 168], 'score': np.float64(0.699678886525794), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [159, 161, 168] (score: 0.6997)

Monte Carlo simulation completed in 8.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [159, 161, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 107 selections (25.7%)
3. naz100_pi: 80 selections (19.2%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,659,905,685.08
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Sun Aug 24 13:48:44 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $192,739,671
Annual Return: 32.93%
Sharpe Ratio: 1.12076
Sortino Ratio: 1.051
Max Drawdown: -68.4%
Avg Drawdown: -15.7%
Normalized Score: -2.143
Lookback periods: [69, 104, 112] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $211,556,177
Annual Return: 33.29%
Sharpe Ratio: 1.17837
Sortino Ratio: 1.090
Max Drawdown: -65.8%
Avg Drawdown: -14.9%
Normalized Score: -1.808
Lookback periods: [58, 64, 120] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $801,507,098
Annual Return: 38.51%
Sharpe Ratio: 1.34109
Sortino Ratio: 1.237
Max Drawdown: -55.0%
Avg Drawdown: -12.3%
Normalized Score: -0.462
Lookback periods: [51, 139, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,944,453,077
Annual Return: 43.81%
Sharpe Ratio: 1.45239
Sortino Ratio: 1.412
Max Drawdown: -60.0%
Avg Drawdown: -12.8%
Normalized Score: 0.030
Lookback periods: [130, 135, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 20m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,697,055,706
Annual Return: 43.45%
Sharpe Ratio: 1.42240
Sortino Ratio: 1.382
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.089
Lookback periods: [170, 195, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 14m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,405,568,756
Annual Return: 42.98%
Sharpe Ratio: 1.46013
Sortino Ratio: 1.388
Max Drawdown: -55.0%
Avg Drawdown: -11.7%
Normalized Score: 0.246
Lookback periods: [84, 133, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $646,121,982
Annual Return: 37.65%
Sharpe Ratio: 1.35639
Sortino Ratio: 1.262
Max Drawdown: -34.7%
Avg Drawdown: -9.9%
Normalized Score: 0.452
Lookback periods: [50, 73, 93] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 13m 26sRunning iteration 41/750... Est. remaining: 11m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,108,308,518
Annual Return: 44.04%
Sharpe Ratio: 1.50948
Sortino Ratio: 1.428
Max Drawdown: -52.3%
Avg Drawdown: -11.5%
Normalized Score: 0.527
Lookback periods: [90, 93, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/750... Est. remaining: 11m 11sRunning iteration 61/750... Est. remaining: 10m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,133,000,887
Annual Return: 44.07%
Sharpe Ratio: 1.48735
Sortino Ratio: 1.429
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: 0.578
Lookback periods: [102, 108, 112] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/750... Est. remaining: 10m 5sRunning iteration 81/750... Est. remaining: 9m 36sRunning iteration 91/750... Est. remaining: 9m 10sRunning iteration 101/750... Est. remaining: 8m 49sbest_combination: {'lookbacks': [102, 108, 112], 'score': np.float64(0.5781524791872709), 'visits': 1}
Running iteration 111/750... Est. remaining: 8m 32sRunning iteration 121/750... Est. remaining: 8m 18sRunning iteration 131/750... Est. remaining: 8m 2sRunning iteration 141/750... Est. remaining: 7m 49sRunning iteration 151/750... Est. remaining: 7m 39sRunning iteration 161/750... Est. remaining: 7m 28sRunning iteration 171/750... Est. remaining: 7m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,101,467,868
Annual Return: 44.03%
Sharpe Ratio: 1.48760
Sortino Ratio: 1.410
Max Drawdown: -52.3%
Avg Drawdown: -10.5%
Normalized Score: 0.588
Lookback periods: [96, 109, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/750... Est. remaining: 7m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,521,270,210
Annual Return: 47.15%
Sharpe Ratio: 1.53393
Sortino Ratio: 1.506
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 0.881
Lookback periods: [157, 164, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/750... Est. remaining: 7m 10sRunning iteration 201/750... Est. remaining: 6m 59sbest_combination: {'lookbacks': [157, 164, 169], 'score': np.float64(0.8814403979392231), 'visits': 1}
Running iteration 211/750... Est. remaining: 6m 48sRunning iteration 221/750... Est. remaining: 6m 36sRunning iteration 231/750... Est. remaining: 6m 25sRunning iteration 241/750... Est. remaining: 6m 15sRunning iteration 251/750... Est. remaining: 6m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,587,112,534
Annual Return: 48.79%
Sharpe Ratio: 1.58396
Sortino Ratio: 1.560
Max Drawdown: -58.5%
Avg Drawdown: -10.8%
Normalized Score: 0.985
Lookback periods: [155, 162, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/750... Est. remaining: 5m 58sRunning iteration 271/750... Est. remaining: 5m 49sRunning iteration 281/750... Est. remaining: 5m 40sRunning iteration 291/750... Est. remaining: 5m 31sRunning iteration 301/750... Est. remaining: 5m 22sbest_combination: {'lookbacks': [155, 162, 168], 'score': np.float64(0.9846603357653156), 'visits': 1}
Running iteration 311/750... Est. remaining: 5m 13sRunning iteration 321/750... Est. remaining: 5m 5sRunning iteration 331/750... Est. remaining: 4m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,077,781,686
Annual Return: 48.06%
Sharpe Ratio: 1.57992
Sortino Ratio: 1.542
Max Drawdown: -56.9%
Avg Drawdown: -10.6%
Normalized Score: 0.989
Lookback periods: [146, 156, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 341/750... Est. remaining: 4m 51sRunning iteration 351/750... Est. remaining: 4m 43sRunning iteration 361/750... Est. remaining: 4m 36sRunning iteration 371/750... Est. remaining: 4m 28sRunning iteration 381/750... Est. remaining: 4m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,599,776,726
Annual Return: 48.80%
Sharpe Ratio: 1.59565
Sortino Ratio: 1.556
Max Drawdown: -55.0%
Avg Drawdown: -10.4%
Normalized Score: 1.147
Lookback periods: [157, 159, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/750... Est. remaining: 4m 14sRunning iteration 401/750... Est. remaining: 4m 6sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(1.1470086732009819), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 59sRunning iteration 421/750... Est. remaining: 3m 51sRunning iteration 431/750... Est. remaining: 3m 43sRunning iteration 441/750... Est. remaining: 3m 36sRunning iteration 451/750... Est. remaining: 3m 28sRunning iteration 461/750... Est. remaining: 3m 21sRunning iteration 471/750... Est. remaining: 3m 14sRunning iteration 481/750... Est. remaining: 3m 7sRunning iteration 491/750... Est. remaining: 3m 0sRunning iteration 501/750... Est. remaining: 2m 53sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(1.1470086732009819), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 46sRunning iteration 521/750... Est. remaining: 2m 39sRunning iteration 531/750... Est. remaining: 2m 31sRunning iteration 541/750... Est. remaining: 2m 24sRunning iteration 551/750... Est. remaining: 2m 17sRunning iteration 561/750... Est. remaining: 2m 10sRunning iteration 571/750... Est. remaining: 2m 3sRunning iteration 581/750... Est. remaining: 1m 56sRunning iteration 591/750... Est. remaining: 1m 49sRunning iteration 601/750... Est. remaining: 1m 42sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(1.1470086732009819), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 35sRunning iteration 621/750... Est. remaining: 1m 29sRunning iteration 631/750... Est. remaining: 1m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,298,617,541
Annual Return: 49.50%
Sharpe Ratio: 1.60605
Sortino Ratio: 1.570
Max Drawdown: -59.0%
Avg Drawdown: -9.9%
Normalized Score: 1.161
Lookback periods: [156, 158, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/750... Est. remaining: 1m 15sRunning iteration 651/750... Est. remaining: 1m 8sRunning iteration 661/750... Est. remaining: 1m 1sRunning iteration 671/750... Est. remaining: 0m 54sRunning iteration 681/750... Est. remaining: 0m 48sRunning iteration 691/750... Est. remaining: 0m 41sRunning iteration 701/750... Est. remaining: 0m 34sbest_combination: {'lookbacks': [156, 158, 172], 'score': np.float64(1.1608970223021151), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 27sRunning iteration 721/750... Est. remaining: 0m 20sRunning iteration 731/750... Est. remaining: 0m 13sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 8.6 minutes
Best normalized score: 1.16
best_combination: {'lookbacks': [156, 158, 172], 'score': np.float64(1.1608970223021151), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [156, 158, 172] (score: 1.1609)

Monte Carlo simulation completed in 8.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 158, 172] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 116 selections (27.9%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 77 selections (18.5%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,298,617,541.35
Average Annualized Gain: 49.5%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Sun Aug 24 13:57:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,436,890,640
Annual Return: 44.46%
Sharpe Ratio: 1.47539
Sortino Ratio: 1.424
Max Drawdown: -64.1%
Avg Drawdown: -12.6%
Normalized Score: -0.260
Lookback periods: [125, 149, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,272,008,165
Annual Return: 44.25%
Sharpe Ratio: 1.45711
Sortino Ratio: 1.423
Max Drawdown: -61.0%
Avg Drawdown: -12.0%
Normalized Score: -0.106
Lookback periods: [127, 128, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 18m 21sRunning iteration 21/750... Est. remaining: 12m 58sRunning iteration 31/750... Est. remaining: 11m 14sRunning iteration 41/750... Est. remaining: 10m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,291,017,277
Annual Return: 45.38%
Sharpe Ratio: 1.48084
Sortino Ratio: 1.447
Max Drawdown: -61.4%
Avg Drawdown: -11.8%
Normalized Score: 0.115
Lookback periods: [147, 174, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/750... Est. remaining: 10m 1sRunning iteration 61/750... Est. remaining: 9m 29sRunning iteration 71/750... Est. remaining: 9m 4sRunning iteration 81/750... Est. remaining: 8m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,805,029,134
Annual Return: 46.66%
Sharpe Ratio: 1.52326
Sortino Ratio: 1.495
Max Drawdown: -58.2%
Avg Drawdown: -10.8%
Normalized Score: 0.651
Lookback periods: [157, 165, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/750... Est. remaining: 8m 36sRunning iteration 101/750... Est. remaining: 8m 20sbest_combination: {'lookbacks': [157, 165, 167], 'score': np.float64(0.6506615357460114), 'visits': 1}
Running iteration 111/750... Est. remaining: 8m 5sRunning iteration 121/750... Est. remaining: 7m 50sRunning iteration 131/750... Est. remaining: 7m 36sRunning iteration 141/750... Est. remaining: 7m 23sRunning iteration 151/750... Est. remaining: 7m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,776,347,634
Annual Return: 47.31%
Sharpe Ratio: 1.54811
Sortino Ratio: 1.518
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.837
Lookback periods: [161, 162, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/750... Est. remaining: 7m 7sRunning iteration 171/750... Est. remaining: 6m 56sRunning iteration 181/750... Est. remaining: 6m 47sRunning iteration 191/750... Est. remaining: 6m 38sRunning iteration 201/750... Est. remaining: 6m 28sbest_combination: {'lookbacks': [161, 162, 168], 'score': np.float64(0.8371623070401732), 'visits': 1}
Running iteration 211/750... Est. remaining: 6m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,995,505,984
Annual Return: 48.02%
Sharpe Ratio: 1.55568
Sortino Ratio: 1.521
Max Drawdown: -58.5%
Avg Drawdown: -10.9%
Normalized Score: 0.846
Lookback periods: [155, 161, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/750... Est. remaining: 6m 13sRunning iteration 231/750... Est. remaining: 6m 4sRunning iteration 241/750... Est. remaining: 5m 54sRunning iteration 251/750... Est. remaining: 5m 46sRunning iteration 261/750... Est. remaining: 5m 38sRunning iteration 271/750... Est. remaining: 5m 30sRunning iteration 281/750... Est. remaining: 5m 22sRunning iteration 291/750... Est. remaining: 5m 14sRunning iteration 301/750... Est. remaining: 5m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,639,149,839
Annual Return: 49.63%
Sharpe Ratio: 1.60884
Sortino Ratio: 1.575
Max Drawdown: -58.5%
Avg Drawdown: -11.1%
Normalized Score: 1.112
Lookback periods: [154, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [154, 155, 172], 'score': np.float64(1.1116855761552447), 'visits': 1}
Running iteration 311/750... Est. remaining: 5m 0sRunning iteration 321/750... Est. remaining: 4m 52sRunning iteration 331/750... Est. remaining: 4m 44sRunning iteration 341/750... Est. remaining: 4m 37sRunning iteration 351/750... Est. remaining: 4m 30sRunning iteration 361/750... Est. remaining: 4m 22sRunning iteration 371/750... Est. remaining: 4m 15sRunning iteration 381/750... Est. remaining: 4m 7sRunning iteration 391/750... Est. remaining: 3m 59sRunning iteration 401/750... Est. remaining: 3m 52sbest_combination: {'lookbacks': [154, 155, 172], 'score': np.float64(1.1116855761552447), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 45sRunning iteration 421/750... Est. remaining: 3m 38sRunning iteration 431/750... Est. remaining: 3m 31sRunning iteration 441/750... Est. remaining: 3m 24sRunning iteration 451/750... Est. remaining: 3m 17sRunning iteration 461/750... Est. remaining: 3m 10sRunning iteration 471/750... Est. remaining: 3m 3sRunning iteration 481/750... Est. remaining: 2m 56sRunning iteration 491/750... Est. remaining: 2m 49sRunning iteration 501/750... Est. remaining: 2m 42sbest_combination: {'lookbacks': [154, 155, 172], 'score': np.float64(1.1116855761552447), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,787,460,186
Annual Return: 49.30%
Sharpe Ratio: 1.61007
Sortino Ratio: 1.577
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 1.252
Lookback periods: [154, 159, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/750... Est. remaining: 2m 36sRunning iteration 521/750... Est. remaining: 2m 30sRunning iteration 531/750... Est. remaining: 2m 23sRunning iteration 541/750... Est. remaining: 2m 16sRunning iteration 551/750... Est. remaining: 2m 9sRunning iteration 561/750... Est. remaining: 2m 3sRunning iteration 571/750... Est. remaining: 1m 56sRunning iteration 581/750... Est. remaining: 1m 50sRunning iteration 591/750... Est. remaining: 1m 43sRunning iteration 601/750... Est. remaining: 1m 36sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.2519237679668511), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 30sRunning iteration 621/750... Est. remaining: 1m 23sRunning iteration 631/750... Est. remaining: 1m 17sRunning iteration 641/750... Est. remaining: 1m 10sRunning iteration 651/750... Est. remaining: 1m 4sRunning iteration 661/750... Est. remaining: 0m 57sRunning iteration 671/750... Est. remaining: 0m 51sRunning iteration 681/750... Est. remaining: 0m 44sRunning iteration 691/750... Est. remaining: 0m 38sRunning iteration 701/750... Est. remaining: 0m 31sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.2519237679668511), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 25sRunning iteration 721/750... Est. remaining: 0m 19sRunning iteration 731/750... Est. remaining: 0m 12sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 8.0 minutes
Best normalized score: 1.25
best_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(1.2519237679668511), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [154, 159, 166] (score: 1.2519)

Monte Carlo simulation completed in 8.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 159, 166] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,787,460,185.92
Average Annualized Gain: 49.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Sun Aug 24 14:05:34 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,132,560,381
Annual Return: 39.90%
Sharpe Ratio: 1.32597
Sortino Ratio: 1.279
Max Drawdown: -68.5%
Avg Drawdown: -13.3%
Normalized Score: -1.198
Lookback periods: [127, 142, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,643,079,300
Annual Return: 43.36%
Sharpe Ratio: 1.41922
Sortino Ratio: 1.387
Max Drawdown: -65.1%
Avg Drawdown: -12.7%
Normalized Score: -0.530
Lookback periods: [138, 172, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,168,645,432
Annual Return: 42.55%
Sharpe Ratio: 1.46061
Sortino Ratio: 1.384
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.094
Lookback periods: [62, 111, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 17m 53sRunning iteration 21/750... Est. remaining: 12m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,118,478,755
Annual Return: 47.52%
Sharpe Ratio: 1.55436
Sortino Ratio: 1.520
Max Drawdown: -60.1%
Avg Drawdown: -11.2%
Normalized Score: 0.447
Lookback periods: [153, 159, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 11m 8sRunning iteration 41/750... Est. remaining: 10m 1sRunning iteration 51/750... Est. remaining: 9m 19sRunning iteration 61/750... Est. remaining: 8m 47sRunning iteration 71/750... Est. remaining: 8m 24sRunning iteration 81/750... Est. remaining: 8m 4sRunning iteration 91/750... Est. remaining: 7m 49sRunning iteration 101/750... Est. remaining: 7m 37sbest_combination: {'lookbacks': [153, 159, 161], 'score': np.float64(0.44693335189091454), 'visits': 1}
Running iteration 111/750... Est. remaining: 7m 25sRunning iteration 121/750... Est. remaining: 7m 13sRunning iteration 131/750... Est. remaining: 7m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,791,159,255
Annual Return: 48.89%
Sharpe Ratio: 1.57426
Sortino Ratio: 1.549
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.650
Lookback periods: [176, 185, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/750... Est. remaining: 6m 58sRunning iteration 151/750... Est. remaining: 6m 48sRunning iteration 161/750... Est. remaining: 6m 38sRunning iteration 171/750... Est. remaining: 6m 29sRunning iteration 181/750... Est. remaining: 6m 20sRunning iteration 191/750... Est. remaining: 6m 11sRunning iteration 201/750... Est. remaining: 6m 2sbest_combination: {'lookbacks': [176, 185, 189], 'score': np.float64(0.6500094250647445), 'visits': 1}
Running iteration 211/750... Est. remaining: 5m 54sRunning iteration 221/750... Est. remaining: 5m 46sRunning iteration 231/750... Est. remaining: 5m 38sRunning iteration 241/750... Est. remaining: 5m 31sRunning iteration 251/750... Est. remaining: 5m 23sRunning iteration 261/750... Est. remaining: 5m 16sRunning iteration 271/750... Est. remaining: 5m 9sRunning iteration 281/750... Est. remaining: 5m 2sRunning iteration 291/750... Est. remaining: 4m 54sRunning iteration 301/750... Est. remaining: 4m 47sbest_combination: {'lookbacks': [176, 185, 189], 'score': np.float64(0.6500094250647445), 'visits': 1}
Running iteration 311/750... Est. remaining: 4m 40sRunning iteration 321/750... Est. remaining: 4m 34sRunning iteration 331/750... Est. remaining: 4m 27sRunning iteration 341/750... Est. remaining: 4m 20sRunning iteration 351/750... Est. remaining: 4m 13sRunning iteration 361/750... Est. remaining: 4m 7sRunning iteration 371/750... Est. remaining: 4m 0sRunning iteration 381/750... Est. remaining: 3m 53sRunning iteration 391/750... Est. remaining: 3m 46sRunning iteration 401/750... Est. remaining: 3m 40sbest_combination: {'lookbacks': [176, 185, 189], 'score': np.float64(0.6500094250647445), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 33sRunning iteration 421/750... Est. remaining: 3m 27sRunning iteration 431/750... Est. remaining: 3m 20sRunning iteration 441/750... Est. remaining: 3m 14sRunning iteration 451/750... Est. remaining: 3m 8sRunning iteration 461/750... Est. remaining: 3m 1sRunning iteration 471/750... Est. remaining: 2m 55sRunning iteration 481/750... Est. remaining: 2m 48sRunning iteration 491/750... Est. remaining: 2m 42sRunning iteration 501/750... Est. remaining: 2m 36sbest_combination: {'lookbacks': [176, 185, 189], 'score': np.float64(0.6500094250647445), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 29sRunning iteration 521/750... Est. remaining: 2m 23sRunning iteration 531/750... Est. remaining: 2m 17sRunning iteration 541/750... Est. remaining: 2m 10sRunning iteration 551/750... Est. remaining: 2m 4sRunning iteration 561/750... Est. remaining: 1m 58sRunning iteration 571/750... Est. remaining: 1m 51sRunning iteration 581/750... Est. remaining: 1m 45sRunning iteration 591/750... Est. remaining: 1m 39sRunning iteration 601/750... Est. remaining: 1m 33sbest_combination: {'lookbacks': [176, 185, 189], 'score': np.float64(0.6500094250647445), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 26sRunning iteration 621/750... Est. remaining: 1m 20sRunning iteration 631/750... Est. remaining: 1m 14sRunning iteration 641/750... Est. remaining: 1m 8sRunning iteration 651/750... Est. remaining: 1m 1sRunning iteration 661/750... Est. remaining: 0m 55sRunning iteration 671/750... Est. remaining: 0m 49sRunning iteration 681/750... Est. remaining: 0m 43sRunning iteration 691/750... Est. remaining: 0m 37sRunning iteration 701/750... Est. remaining: 0m 30sbest_combination: {'lookbacks': [176, 185, 189], 'score': np.float64(0.6500094250647445), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 24sRunning iteration 721/750... Est. remaining: 0m 18sRunning iteration 731/750... Est. remaining: 0m 12sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 0.65
best_combination: {'lookbacks': [176, 185, 189], 'score': np.float64(0.6500094250647445), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [176, 185, 189] (score: 0.6500)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 185, 189] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 122 selections (29.3%)
2. sp500_hma: 104 selections (25.0%)
3. naz100_pine: 87 selections (20.9%)
4. naz100_pi: 70 selections (16.8%)
5. cash: 33 selections (7.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,791,159,254.54
Average Annualized Gain: 48.9%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Sun Aug 24 14:13:26 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,168,445,209
Annual Return: 40.03%
Sharpe Ratio: 1.32508
Sortino Ratio: 1.277
Max Drawdown: -70.8%
Avg Drawdown: -13.5%
Normalized Score: -1.294
Lookback periods: [99, 183, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,812,961,337
Annual Return: 45.87%
Sharpe Ratio: 1.49464
Sortino Ratio: 1.462
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.378
Lookback periods: [158, 172, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 16m 22sRunning iteration 21/750... Est. remaining: 11m 45sRunning iteration 31/750... Est. remaining: 10m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,449,565,220
Annual Return: 45.54%
Sharpe Ratio: 1.51358
Sortino Ratio: 1.469
Max Drawdown: -56.4%
Avg Drawdown: -12.2%
Normalized Score: 0.389
Lookback periods: [132, 135, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 9m 37sRunning iteration 51/750... Est. remaining: 9m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,222,516,351
Annual Return: 46.21%
Sharpe Ratio: 1.53242
Sortino Ratio: 1.483
Max Drawdown: -56.8%
Avg Drawdown: -12.1%
Normalized Score: 0.492
Lookback periods: [134, 136, 137] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/750... Est. remaining: 8m 50sRunning iteration 71/750... Est. remaining: 8m 27sRunning iteration 81/750... Est. remaining: 8m 8sRunning iteration 91/750... Est. remaining: 7m 51sRunning iteration 101/750... Est. remaining: 7m 37sbest_combination: {'lookbacks': [134, 136, 137], 'score': np.float64(0.49222108487819904), 'visits': 1}
Running iteration 111/750... Est. remaining: 7m 24sRunning iteration 121/750... Est. remaining: 7m 11sRunning iteration 131/750... Est. remaining: 7m 0sRunning iteration 141/750... Est. remaining: 6m 50sRunning iteration 151/750... Est. remaining: 6m 41sRunning iteration 161/750... Est. remaining: 6m 32sRunning iteration 171/750... Est. remaining: 6m 23sRunning iteration 181/750... Est. remaining: 6m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,348,018,963
Annual Return: 48.20%
Sharpe Ratio: 1.56848
Sortino Ratio: 1.531
Max Drawdown: -55.0%
Avg Drawdown: -10.7%
Normalized Score: 1.013
Lookback periods: [157, 160, 175] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/750... Est. remaining: 6m 11sRunning iteration 201/750... Est. remaining: 6m 3sbest_combination: {'lookbacks': [157, 160, 175], 'score': np.float64(1.0131586509464883), 'visits': 1}
Running iteration 211/750... Est. remaining: 5m 53sRunning iteration 221/750... Est. remaining: 5m 44sRunning iteration 231/750... Est. remaining: 5m 36sRunning iteration 241/750... Est. remaining: 5m 27sRunning iteration 251/750... Est. remaining: 5m 19sRunning iteration 261/750... Est. remaining: 5m 11sRunning iteration 271/750... Est. remaining: 5m 4sRunning iteration 281/750... Est. remaining: 4m 56sRunning iteration 291/750... Est. remaining: 4m 49sRunning iteration 301/750... Est. remaining: 4m 42sbest_combination: {'lookbacks': [157, 160, 175], 'score': np.float64(1.0131586509464883), 'visits': 1}
Running iteration 311/750... Est. remaining: 4m 34sRunning iteration 321/750... Est. remaining: 4m 28sRunning iteration 331/750... Est. remaining: 4m 20sRunning iteration 341/750... Est. remaining: 4m 13sRunning iteration 351/750... Est. remaining: 4m 6sRunning iteration 361/750... Est. remaining: 3m 59sRunning iteration 371/750... Est. remaining: 3m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,794,821,425
Annual Return: 48.43%
Sharpe Ratio: 1.57554
Sortino Ratio: 1.548
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 1.096
Lookback periods: [157, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/750... Est. remaining: 3m 47sRunning iteration 391/750... Est. remaining: 3m 40sRunning iteration 401/750... Est. remaining: 3m 34sbest_combination: {'lookbacks': [157, 162, 169], 'score': np.float64(1.096243539118891), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 27sRunning iteration 421/750... Est. remaining: 3m 21sRunning iteration 431/750... Est. remaining: 3m 14sRunning iteration 441/750... Est. remaining: 3m 8sRunning iteration 451/750... Est. remaining: 3m 2sRunning iteration 461/750... Est. remaining: 2m 55sRunning iteration 471/750... Est. remaining: 2m 49sRunning iteration 481/750... Est. remaining: 2m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,493,875,943
Annual Return: 48.75%
Sharpe Ratio: 1.59095
Sortino Ratio: 1.564
Max Drawdown: -56.9%
Avg Drawdown: -10.5%
Normalized Score: 1.108
Lookback periods: [156, 158, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/750... Est. remaining: 2m 37sRunning iteration 501/750... Est. remaining: 2m 31sbest_combination: {'lookbacks': [156, 158, 162], 'score': np.float64(1.108132930054527), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 25sRunning iteration 521/750... Est. remaining: 2m 19sRunning iteration 531/750... Est. remaining: 2m 12sRunning iteration 541/750... Est. remaining: 2m 6sRunning iteration 551/750... Est. remaining: 2m 0sRunning iteration 561/750... Est. remaining: 1m 54sRunning iteration 571/750... Est. remaining: 1m 48sRunning iteration 581/750... Est. remaining: 1m 42sRunning iteration 591/750... Est. remaining: 1m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,630,677,174
Annual Return: 49.24%
Sharpe Ratio: 1.60105
Sortino Ratio: 1.581
Max Drawdown: -59.0%
Avg Drawdown: -10.2%
Normalized Score: 1.158
Lookback periods: [158, 161, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/750... Est. remaining: 1m 30sbest_combination: {'lookbacks': [158, 161, 166], 'score': np.float64(1.1579565327793346), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,316,632,444
Annual Return: 49.51%
Sharpe Ratio: 1.61266
Sortino Ratio: 1.584
Max Drawdown: -59.0%
Avg Drawdown: -9.9%
Normalized Score: 1.230
Lookback periods: [158, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/750... Est. remaining: 1m 24sRunning iteration 621/750... Est. remaining: 1m 18sRunning iteration 631/750... Est. remaining: 1m 12sRunning iteration 641/750... Est. remaining: 1m 6sRunning iteration 651/750... Est. remaining: 1m 0sRunning iteration 661/750... Est. remaining: 0m 54sRunning iteration 671/750... Est. remaining: 0m 48sRunning iteration 681/750... Est. remaining: 0m 42sRunning iteration 691/750... Est. remaining: 0m 35sRunning iteration 701/750... Est. remaining: 0m 29sbest_combination: {'lookbacks': [158, 161, 168], 'score': np.float64(1.229842041783871), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 23sRunning iteration 721/750... Est. remaining: 0m 17sRunning iteration 731/750... Est. remaining: 0m 11sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 7.5 minutes
Best normalized score: 1.23
best_combination: {'lookbacks': [158, 161, 168], 'score': np.float64(1.229842041783871), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [158, 161, 168] (score: 1.2298)

Monte Carlo simulation completed in 7.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [158, 161, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 116 selections (27.9%)
2. sp500_hma: 107 selections (25.7%)
3. naz100_pine: 81 selections (19.5%)
4. naz100_pi: 77 selections (18.5%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,316,632,444.29
Average Annualized Gain: 49.5%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)
