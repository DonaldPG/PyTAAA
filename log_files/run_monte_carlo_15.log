Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Start time: Sun Aug 24 21:41:44 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Sun Aug 24 21:41:44 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,881,718,786
Annual Return: 41.97%
Sharpe Ratio: 1.38462
Sortino Ratio: 1.352
Max Drawdown: -64.5%
Avg Drawdown: -13.8%
Normalized Score: -0.953
Lookback periods: [111, 156, 164] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,945,915,553
Annual Return: 42.10%
Sharpe Ratio: 1.38777
Sortino Ratio: 1.308
Max Drawdown: -53.7%
Avg Drawdown: -12.7%
Normalized Score: -0.471
Lookback periods: [85, 93, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 26m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,031,228,950
Annual Return: 43.93%
Sharpe Ratio: 1.45964
Sortino Ratio: 1.414
Max Drawdown: -63.7%
Avg Drawdown: -12.9%
Normalized Score: -0.414
Lookback periods: [84, 156, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,740,348,713
Annual Return: 45.80%
Sharpe Ratio: 1.49007
Sortino Ratio: 1.443
Max Drawdown: -62.6%
Avg Drawdown: -12.2%
Normalized Score: -0.017
Lookback periods: [127, 144, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,615,753,639
Annual Return: 44.67%
Sharpe Ratio: 1.47846
Sortino Ratio: 1.396
Max Drawdown: -55.9%
Avg Drawdown: -12.4%
Normalized Score: -0.012
Lookback periods: [89, 93, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 23m 48sRunning iteration 31/1500... Est. remaining: 19m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,407,594,624
Annual Return: 46.36%
Sharpe Ratio: 1.49877
Sortino Ratio: 1.466
Max Drawdown: -59.0%
Avg Drawdown: -12.5%
Normalized Score: 0.163
Lookback periods: [163, 190, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 18m 40sRunning iteration 51/1500... Est. remaining: 17m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,595,026,797
Annual Return: 47.20%
Sharpe Ratio: 1.54103
Sortino Ratio: 1.516
Max Drawdown: -58.2%
Avg Drawdown: -13.1%
Normalized Score: 0.287
Lookback periods: [131, 180, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 47sRunning iteration 71/1500... Est. remaining: 16m 0sRunning iteration 81/1500... Est. remaining: 15m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,959,703,076
Annual Return: 46.77%
Sharpe Ratio: 1.51700
Sortino Ratio: 1.499
Max Drawdown: -57.7%
Avg Drawdown: -12.2%
Normalized Score: 0.355
Lookback periods: [148, 159, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 15m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,708,107,002
Annual Return: 48.38%
Sharpe Ratio: 1.56502
Sortino Ratio: 1.533
Max Drawdown: -62.1%
Avg Drawdown: -12.8%
Normalized Score: 0.383
Lookback periods: [135, 186, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 15m 13sbest_combination: {'lookbacks': [135, 186, 199], 'score': np.float64(0.383430727057487), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,348,973,801
Annual Return: 47.04%
Sharpe Ratio: 1.53646
Sortino Ratio: 1.508
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: 0.575
Lookback periods: [140, 152, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 14m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,373,365,236
Annual Return: 49.13%
Sharpe Ratio: 1.57431
Sortino Ratio: 1.553
Max Drawdown: -60.0%
Avg Drawdown: -12.6%
Normalized Score: 0.595
Lookback periods: [155, 189, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 14m 35sRunning iteration 141/1500... Est. remaining: 14m 16sRunning iteration 151/1500... Est. remaining: 13m 58sRunning iteration 161/1500... Est. remaining: 13m 43sRunning iteration 171/1500... Est. remaining: 13m 28sRunning iteration 181/1500... Est. remaining: 13m 14sRunning iteration 191/1500... Est. remaining: 13m 0sRunning iteration 201/1500... Est. remaining: 12m 49sbest_combination: {'lookbacks': [155, 189, 191], 'score': np.float64(0.594683706676495), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 37sRunning iteration 221/1500... Est. remaining: 12m 26sRunning iteration 231/1500... Est. remaining: 12m 16sRunning iteration 241/1500... Est. remaining: 12m 6sRunning iteration 251/1500... Est. remaining: 11m 57sRunning iteration 261/1500... Est. remaining: 11m 50sRunning iteration 271/1500... Est. remaining: 11m 41sRunning iteration 281/1500... Est. remaining: 11m 32sRunning iteration 291/1500... Est. remaining: 11m 24sRunning iteration 301/1500... Est. remaining: 11m 16sbest_combination: {'lookbacks': [155, 189, 191], 'score': np.float64(0.594683706676495), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,198,527,315
Annual Return: 47.57%
Sharpe Ratio: 1.55338
Sortino Ratio: 1.524
Max Drawdown: -55.0%
Avg Drawdown: -11.9%
Normalized Score: 0.649
Lookback periods: [134, 152, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/1500... Est. remaining: 11m 7sRunning iteration 331/1500... Est. remaining: 11m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,004,887,772
Annual Return: 47.45%
Sharpe Ratio: 1.55360
Sortino Ratio: 1.485
Max Drawdown: -52.3%
Avg Drawdown: -10.1%
Normalized Score: 0.950
Lookback periods: [94, 129, 133] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 341/1500... Est. remaining: 10m 56sRunning iteration 351/1500... Est. remaining: 10m 49sRunning iteration 361/1500... Est. remaining: 10m 41sRunning iteration 371/1500... Est. remaining: 10m 34sRunning iteration 381/1500... Est. remaining: 10m 27sRunning iteration 391/1500... Est. remaining: 10m 20sRunning iteration 401/1500... Est. remaining: 10m 13sbest_combination: {'lookbacks': [94, 129, 133], 'score': np.float64(0.9501238044391123), 'visits': 1}
Running iteration 411/1500... Est. remaining: 10m 6sRunning iteration 421/1500... Est. remaining: 9m 59sRunning iteration 431/1500... Est. remaining: 9m 52sRunning iteration 441/1500... Est. remaining: 9m 46sRunning iteration 451/1500... Est. remaining: 9m 40sRunning iteration 461/1500... Est. remaining: 9m 33sRunning iteration 471/1500... Est. remaining: 9m 27sRunning iteration 481/1500... Est. remaining: 9m 20sRunning iteration 491/1500... Est. remaining: 9m 14sRunning iteration 501/1500... Est. remaining: 9m 8sbest_combination: {'lookbacks': [94, 129, 133], 'score': np.float64(0.9501238044391123), 'visits': 1}
Running iteration 511/1500... Est. remaining: 9m 2sRunning iteration 521/1500... Est. remaining: 8m 55sRunning iteration 531/1500... Est. remaining: 8m 49sRunning iteration 541/1500... Est. remaining: 8m 43sRunning iteration 551/1500... Est. remaining: 8m 37sRunning iteration 561/1500... Est. remaining: 8m 30sRunning iteration 571/1500... Est. remaining: 8m 24sRunning iteration 581/1500... Est. remaining: 8m 18sRunning iteration 591/1500... Est. remaining: 8m 12sRunning iteration 601/1500... Est. remaining: 8m 6sbest_combination: {'lookbacks': [94, 129, 133], 'score': np.float64(0.9501238044391123), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 1sRunning iteration 621/1500... Est. remaining: 7m 55sRunning iteration 631/1500... Est. remaining: 7m 49sRunning iteration 641/1500... Est. remaining: 7m 45sRunning iteration 651/1500... Est. remaining: 7m 39sRunning iteration 661/1500... Est. remaining: 7m 34sRunning iteration 671/1500... Est. remaining: 7m 28sRunning iteration 681/1500... Est. remaining: 7m 22sRunning iteration 691/1500... Est. remaining: 7m 17sRunning iteration 701/1500... Est. remaining: 7m 11sbest_combination: {'lookbacks': [94, 129, 133], 'score': np.float64(0.9501238044391123), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 5sRunning iteration 721/1500... Est. remaining: 7m 0sRunning iteration 731/1500... Est. remaining: 6m 55sRunning iteration 741/1500... Est. remaining: 6m 49sRunning iteration 751/1500... Est. remaining: 6m 43sRunning iteration 761/1500... Est. remaining: 6m 38sRunning iteration 771/1500... Est. remaining: 6m 32sRunning iteration 781/1500... Est. remaining: 6m 26sRunning iteration 791/1500... Est. remaining: 6m 21sRunning iteration 801/1500... Est. remaining: 6m 15sbest_combination: {'lookbacks': [94, 129, 133], 'score': np.float64(0.9501238044391123), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 10sRunning iteration 821/1500... Est. remaining: 6m 4sRunning iteration 831/1500... Est. remaining: 5m 59sRunning iteration 841/1500... Est. remaining: 5m 53sRunning iteration 851/1500... Est. remaining: 5m 48sRunning iteration 861/1500... Est. remaining: 5m 43sRunning iteration 871/1500... Est. remaining: 5m 37sRunning iteration 881/1500... Est. remaining: 5m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,099,633,155
Annual Return: 46.87%
Sharpe Ratio: 1.54789
Sortino Ratio: 1.479
Max Drawdown: -52.3%
Avg Drawdown: -9.5%
Normalized Score: 0.965
Lookback periods: [96, 128, 138] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 5m 27sRunning iteration 901/1500... Est. remaining: 5m 22sbest_combination: {'lookbacks': [96, 128, 138], 'score': np.float64(0.9647415471511291), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 17sRunning iteration 921/1500... Est. remaining: 5m 11sRunning iteration 931/1500... Est. remaining: 5m 6sRunning iteration 941/1500... Est. remaining: 5m 0sRunning iteration 951/1500... Est. remaining: 4m 55sRunning iteration 961/1500... Est. remaining: 4m 49sRunning iteration 971/1500... Est. remaining: 4m 44sRunning iteration 981/1500... Est. remaining: 4m 39sRunning iteration 991/1500... Est. remaining: 4m 33sRunning iteration 1001/1500... Est. remaining: 4m 28sbest_combination: {'lookbacks': [96, 128, 138], 'score': np.float64(0.9647415471511291), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 22sRunning iteration 1021/1500... Est. remaining: 4m 17sRunning iteration 1031/1500... Est. remaining: 4m 11sRunning iteration 1041/1500... Est. remaining: 4m 6sRunning iteration 1051/1500... Est. remaining: 4m 1sRunning iteration 1061/1500... Est. remaining: 3m 56sRunning iteration 1071/1500... Est. remaining: 3m 50sRunning iteration 1081/1500... Est. remaining: 3m 45sRunning iteration 1091/1500... Est. remaining: 3m 40sRunning iteration 1101/1500... Est. remaining: 3m 35sbest_combination: {'lookbacks': [96, 128, 138], 'score': np.float64(0.9647415471511291), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 30sRunning iteration 1121/1500... Est. remaining: 3m 24sRunning iteration 1131/1500... Est. remaining: 3m 19sRunning iteration 1141/1500... Est. remaining: 3m 13sRunning iteration 1151/1500... Est. remaining: 3m 8sRunning iteration 1161/1500... Est. remaining: 3m 3sRunning iteration 1171/1500... Est. remaining: 2m 58sRunning iteration 1181/1500... Est. remaining: 2m 52sRunning iteration 1191/1500... Est. remaining: 2m 47sRunning iteration 1201/1500... Est. remaining: 2m 41sbest_combination: {'lookbacks': [96, 128, 138], 'score': np.float64(0.9647415471511291), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $13,762,405,623
Annual Return: 50.36%
Sharpe Ratio: 1.61635
Sortino Ratio: 1.596
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 1.032
Lookback periods: [178, 189, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1211/1500... Est. remaining: 2m 36sRunning iteration 1221/1500... Est. remaining: 2m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $14,590,272,258
Annual Return: 50.61%
Sharpe Ratio: 1.61947
Sortino Ratio: 1.600
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 1.048
Lookback periods: [175, 200, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1231/1500... Est. remaining: 2m 26sRunning iteration 1241/1500... Est. remaining: 2m 20sRunning iteration 1251/1500... Est. remaining: 2m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $19,641,594,719
Annual Return: 51.91%
Sharpe Ratio: 1.66457
Sortino Ratio: 1.643
Max Drawdown: -59.3%
Avg Drawdown: -10.8%
Normalized Score: 1.395
Lookback periods: [192, 200, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1261/1500... Est. remaining: 2m 10sRunning iteration 1271/1500... Est. remaining: 2m 4sRunning iteration 1281/1500... Est. remaining: 1m 59sRunning iteration 1291/1500... Est. remaining: 1m 53sRunning iteration 1301/1500... Est. remaining: 1m 48sbest_combination: {'lookbacks': [192, 200, 200], 'score': np.float64(1.3953893979924485), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 42sRunning iteration 1321/1500... Est. remaining: 1m 37sRunning iteration 1331/1500... Est. remaining: 1m 31sRunning iteration 1341/1500... Est. remaining: 1m 26sRunning iteration 1351/1500... Est. remaining: 1m 21sRunning iteration 1361/1500... Est. remaining: 1m 15sRunning iteration 1371/1500... Est. remaining: 1m 10sRunning iteration 1381/1500... Est. remaining: 1m 4sRunning iteration 1391/1500... Est. remaining: 0m 59sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [192, 200, 200], 'score': np.float64(1.3953893979924485), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 43sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.4 minutes
Best normalized score: 1.40
best_combination: {'lookbacks': [192, 200, 200], 'score': np.float64(1.3953893979924485), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [192, 200, 200] (score: 1.3954)

Monte Carlo simulation completed in 13.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [192, 200, 200] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 123 selections (29.6%)
2. naz100_hma: 118 selections (28.4%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 65 selections (15.6%)
5. cash: 31 selections (7.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $19,641,594,719.43
Average Annualized Gain: 51.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Sun Aug 24 21:55:19 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,278,647,028
Annual Return: 45.37%
Sharpe Ratio: 1.50301
Sortino Ratio: 1.459
Max Drawdown: -58.1%
Avg Drawdown: -12.5%
Normalized Score: 0.081
Lookback periods: [145, 149, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 47sRunning iteration 21/1500... Est. remaining: 18m 38sRunning iteration 31/1500... Est. remaining: 16m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,501,922,275
Annual Return: 45.58%
Sharpe Ratio: 1.48457
Sortino Ratio: 1.439
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.191
Lookback periods: [154, 156, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 16m 30sRunning iteration 51/1500... Est. remaining: 15m 54sRunning iteration 61/1500... Est. remaining: 15m 26sRunning iteration 71/1500... Est. remaining: 14m 53sRunning iteration 81/1500... Est. remaining: 14m 25sRunning iteration 91/1500... Est. remaining: 14m 9sRunning iteration 101/1500... Est. remaining: 13m 51sbest_combination: {'lookbacks': [154, 156, 191], 'score': np.float64(0.19120872470677996), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 34sRunning iteration 121/1500... Est. remaining: 13m 20sRunning iteration 131/1500... Est. remaining: 13m 7sRunning iteration 141/1500... Est. remaining: 12m 55sRunning iteration 151/1500... Est. remaining: 12m 44sRunning iteration 161/1500... Est. remaining: 12m 34sRunning iteration 171/1500... Est. remaining: 12m 26sRunning iteration 181/1500... Est. remaining: 12m 16sRunning iteration 191/1500... Est. remaining: 12m 7sRunning iteration 201/1500... Est. remaining: 11m 58sbest_combination: {'lookbacks': [154, 156, 191], 'score': np.float64(0.19120872470677996), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,741,164,415
Annual Return: 48.40%
Sharpe Ratio: 1.57400
Sortino Ratio: 1.544
Max Drawdown: -62.4%
Avg Drawdown: -11.8%
Normalized Score: 0.547
Lookback periods: [139, 154, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/1500... Est. remaining: 11m 58sRunning iteration 221/1500... Est. remaining: 11m 50sRunning iteration 231/1500... Est. remaining: 11m 41sRunning iteration 241/1500... Est. remaining: 11m 33sRunning iteration 251/1500... Est. remaining: 11m 26sRunning iteration 261/1500... Est. remaining: 11m 18sRunning iteration 271/1500... Est. remaining: 11m 10sRunning iteration 281/1500... Est. remaining: 11m 3sRunning iteration 291/1500... Est. remaining: 10m 56sRunning iteration 301/1500... Est. remaining: 10m 49sbest_combination: {'lookbacks': [139, 154, 174], 'score': np.float64(0.5467183306846829), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,950,371,092
Annual Return: 47.99%
Sharpe Ratio: 1.55352
Sortino Ratio: 1.514
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.646
Lookback periods: [180, 188, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/1500... Est. remaining: 10m 40sRunning iteration 331/1500... Est. remaining: 10m 33sRunning iteration 341/1500... Est. remaining: 10m 27sRunning iteration 351/1500... Est. remaining: 10m 20sRunning iteration 361/1500... Est. remaining: 10m 13s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,389,240,683
Annual Return: 48.22%
Sharpe Ratio: 1.56093
Sortino Ratio: 1.518
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.699
Lookback periods: [179, 188, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 371/1500... Est. remaining: 10m 11sRunning iteration 381/1500... Est. remaining: 10m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,112,778,760
Annual Return: 48.58%
Sharpe Ratio: 1.59073
Sortino Ratio: 1.558
Max Drawdown: -55.0%
Avg Drawdown: -12.2%
Normalized Score: 0.794
Lookback periods: [128, 131, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 10m 2sRunning iteration 401/1500... Est. remaining: 9m 55sbest_combination: {'lookbacks': [128, 131, 131], 'score': np.float64(0.7937519293804105), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 49sRunning iteration 421/1500... Est. remaining: 9m 43sRunning iteration 431/1500... Est. remaining: 9m 37sRunning iteration 441/1500... Est. remaining: 9m 31sRunning iteration 451/1500... Est. remaining: 9m 25sRunning iteration 461/1500... Est. remaining: 9m 19sRunning iteration 471/1500... Est. remaining: 9m 13sRunning iteration 481/1500... Est. remaining: 9m 7sRunning iteration 491/1500... Est. remaining: 9m 1sRunning iteration 501/1500... Est. remaining: 8m 55sbest_combination: {'lookbacks': [128, 131, 131], 'score': np.float64(0.7937519293804105), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 49sRunning iteration 521/1500... Est. remaining: 8m 44sRunning iteration 531/1500... Est. remaining: 8m 38sRunning iteration 541/1500... Est. remaining: 8m 32sRunning iteration 551/1500... Est. remaining: 8m 26sRunning iteration 561/1500... Est. remaining: 8m 20sRunning iteration 571/1500... Est. remaining: 8m 15sRunning iteration 581/1500... Est. remaining: 8m 9sRunning iteration 591/1500... Est. remaining: 8m 3sRunning iteration 601/1500... Est. remaining: 7m 57sbest_combination: {'lookbacks': [128, 131, 131], 'score': np.float64(0.7937519293804105), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 52sRunning iteration 621/1500... Est. remaining: 7m 46sRunning iteration 631/1500... Est. remaining: 7m 41sRunning iteration 641/1500... Est. remaining: 7m 35sRunning iteration 651/1500... Est. remaining: 7m 30sRunning iteration 661/1500... Est. remaining: 7m 24sRunning iteration 671/1500... Est. remaining: 7m 19sRunning iteration 681/1500... Est. remaining: 7m 13sRunning iteration 691/1500... Est. remaining: 7m 8sRunning iteration 701/1500... Est. remaining: 7m 2sbest_combination: {'lookbacks': [128, 131, 131], 'score': np.float64(0.7937519293804105), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 57sRunning iteration 721/1500... Est. remaining: 6m 52sRunning iteration 731/1500... Est. remaining: 6m 46sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 35sRunning iteration 761/1500... Est. remaining: 6m 30sRunning iteration 771/1500... Est. remaining: 6m 24sRunning iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 13sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [128, 131, 131], 'score': np.float64(0.7937519293804105), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 46sRunning iteration 851/1500... Est. remaining: 5m 41sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 30sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [128, 131, 131], 'score': np.float64(0.7937519293804105), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,143,271,760
Annual Return: 49.04%
Sharpe Ratio: 1.60292
Sortino Ratio: 1.575
Max Drawdown: -55.0%
Avg Drawdown: -12.0%
Normalized Score: 0.903
Lookback periods: [128, 130, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 27sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 0.90
best_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [128, 130, 131] (score: 0.9031)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [128, 130, 131] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 108 selections (26.0%)
3. naz100_pi: 85 selections (20.4%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,143,271,760.20
Average Annualized Gain: 49.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Sun Aug 24 22:08:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,568,995,591
Annual Return: 43.25%
Sharpe Ratio: 1.41277
Sortino Ratio: 1.372
Max Drawdown: -59.0%
Avg Drawdown: -12.0%
Normalized Score: -0.308
Lookback periods: [167, 181, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,870,920,202
Annual Return: 44.95%
Sharpe Ratio: 1.50828
Sortino Ratio: 1.453
Max Drawdown: -61.0%
Avg Drawdown: -11.9%
Normalized Score: 0.029
Lookback periods: [109, 149, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,923,033,474
Annual Return: 46.74%
Sharpe Ratio: 1.52680
Sortino Ratio: 1.482
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.355
Lookback periods: [140, 158, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 8sRunning iteration 21/1500... Est. remaining: 21m 57sRunning iteration 31/1500... Est. remaining: 18m 38sRunning iteration 41/1500... Est. remaining: 16m 57sRunning iteration 51/1500... Est. remaining: 15m 54sRunning iteration 61/1500... Est. remaining: 15m 10sRunning iteration 71/1500... Est. remaining: 14m 37sRunning iteration 81/1500... Est. remaining: 14m 13sRunning iteration 91/1500... Est. remaining: 13m 53sRunning iteration 101/1500... Est. remaining: 13m 35sbest_combination: {'lookbacks': [140, 158, 183], 'score': np.float64(0.3545216353653817), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,604,819,007
Annual Return: 47.20%
Sharpe Ratio: 1.55732
Sortino Ratio: 1.513
Max Drawdown: -62.4%
Avg Drawdown: -11.5%
Normalized Score: 0.414
Lookback periods: [129, 158, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 21sRunning iteration 131/1500... Est. remaining: 13m 7sRunning iteration 141/1500... Est. remaining: 12m 54sRunning iteration 151/1500... Est. remaining: 12m 43sRunning iteration 161/1500... Est. remaining: 12m 33sRunning iteration 171/1500... Est. remaining: 12m 24sRunning iteration 181/1500... Est. remaining: 12m 15sRunning iteration 191/1500... Est. remaining: 12m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,397,039,001
Annual Return: 47.07%
Sharpe Ratio: 1.55162
Sortino Ratio: 1.501
Max Drawdown: -56.1%
Avg Drawdown: -12.3%
Normalized Score: 0.465
Lookback periods: [135, 154, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 12m 7sbest_combination: {'lookbacks': [135, 154, 181], 'score': np.float64(0.46473186649181397), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 59sRunning iteration 221/1500... Est. remaining: 11m 51sRunning iteration 231/1500... Est. remaining: 11m 43sRunning iteration 241/1500... Est. remaining: 11m 35sRunning iteration 251/1500... Est. remaining: 11m 28sRunning iteration 261/1500... Est. remaining: 11m 21sRunning iteration 271/1500... Est. remaining: 11m 14sRunning iteration 281/1500... Est. remaining: 11m 7sRunning iteration 291/1500... Est. remaining: 11m 0sRunning iteration 301/1500... Est. remaining: 10m 53sbest_combination: {'lookbacks': [135, 154, 181], 'score': np.float64(0.46473186649181397), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 47sRunning iteration 321/1500... Est. remaining: 10m 40sRunning iteration 331/1500... Est. remaining: 10m 33sRunning iteration 341/1500... Est. remaining: 10m 26sRunning iteration 351/1500... Est. remaining: 10m 20sRunning iteration 361/1500... Est. remaining: 10m 13sRunning iteration 371/1500... Est. remaining: 10m 7sRunning iteration 381/1500... Est. remaining: 10m 2sRunning iteration 391/1500... Est. remaining: 9m 56sRunning iteration 401/1500... Est. remaining: 9m 49sbest_combination: {'lookbacks': [135, 154, 181], 'score': np.float64(0.46473186649181397), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 43sRunning iteration 421/1500... Est. remaining: 9m 37sRunning iteration 431/1500... Est. remaining: 9m 31sRunning iteration 441/1500... Est. remaining: 9m 25sRunning iteration 451/1500... Est. remaining: 9m 19sRunning iteration 461/1500... Est. remaining: 9m 13sRunning iteration 471/1500... Est. remaining: 9m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,774,803,752
Annual Return: 46.63%
Sharpe Ratio: 1.54985
Sortino Ratio: 1.504
Max Drawdown: -58.1%
Avg Drawdown: -11.5%
Normalized Score: 0.476
Lookback periods: [139, 152, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 9m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,164,842,490
Annual Return: 46.91%
Sharpe Ratio: 1.54170
Sortino Ratio: 1.500
Max Drawdown: -57.2%
Avg Drawdown: -11.7%
Normalized Score: 0.487
Lookback periods: [131, 156, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 9m 0sRunning iteration 501/1500... Est. remaining: 8m 54sbest_combination: {'lookbacks': [131, 156, 178], 'score': np.float64(0.487084630422726), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 48sRunning iteration 521/1500... Est. remaining: 8m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,469,065,238
Annual Return: 48.26%
Sharpe Ratio: 1.58259
Sortino Ratio: 1.547
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 0.815
Lookback periods: [140, 154, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 8m 39sRunning iteration 541/1500... Est. remaining: 8m 33sRunning iteration 551/1500... Est. remaining: 8m 27sRunning iteration 561/1500... Est. remaining: 8m 22sRunning iteration 571/1500... Est. remaining: 8m 16sRunning iteration 581/1500... Est. remaining: 8m 11sRunning iteration 591/1500... Est. remaining: 8m 5sRunning iteration 601/1500... Est. remaining: 7m 59sbest_combination: {'lookbacks': [140, 154, 171], 'score': np.float64(0.8150533145161244), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 54sRunning iteration 621/1500... Est. remaining: 7m 48sRunning iteration 631/1500... Est. remaining: 7m 42sRunning iteration 641/1500... Est. remaining: 7m 37sRunning iteration 651/1500... Est. remaining: 7m 32sRunning iteration 661/1500... Est. remaining: 7m 26sRunning iteration 671/1500... Est. remaining: 7m 21sRunning iteration 681/1500... Est. remaining: 7m 15sRunning iteration 691/1500... Est. remaining: 7m 10sRunning iteration 701/1500... Est. remaining: 7m 4sbest_combination: {'lookbacks': [140, 154, 171], 'score': np.float64(0.8150533145161244), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 59sRunning iteration 721/1500... Est. remaining: 6m 53sRunning iteration 731/1500... Est. remaining: 6m 48sRunning iteration 741/1500... Est. remaining: 6m 43sRunning iteration 751/1500... Est. remaining: 6m 37sRunning iteration 761/1500... Est. remaining: 6m 32sRunning iteration 771/1500... Est. remaining: 6m 26sRunning iteration 781/1500... Est. remaining: 6m 21sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [140, 154, 171], 'score': np.float64(0.8150533145161244), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 5sRunning iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 54sRunning iteration 841/1500... Est. remaining: 5m 48sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 27sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [140, 154, 171], 'score': np.float64(0.8150533145161244), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 44sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [140, 154, 171], 'score': np.float64(0.8150533145161244), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [140, 154, 171], 'score': np.float64(0.8150533145161244), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [140, 154, 171], 'score': np.float64(0.8150533145161244), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,542,596,978
Annual Return: 47.77%
Sharpe Ratio: 1.58294
Sortino Ratio: 1.533
Max Drawdown: -56.8%
Avg Drawdown: -10.7%
Normalized Score: 0.844
Lookback periods: [135, 157, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [135, 157, 179], 'score': np.float64(0.8439844960545606), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,155,799,392
Annual Return: 48.10%
Sharpe Ratio: 1.58002
Sortino Ratio: 1.531
Max Drawdown: -56.0%
Avg Drawdown: -11.0%
Normalized Score: 0.846
Lookback periods: [138, 156, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [138, 156, 191], 'score': np.float64(0.8456016817905093), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 0.85
best_combination: {'lookbacks': [138, 156, 191], 'score': np.float64(0.8456016817905093), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [138, 156, 191] (score: 0.8456)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [138, 156, 191] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 112 selections (26.9%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 41 selections (9.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,155,799,391.65
Average Annualized Gain: 48.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Sun Aug 24 22:21:39 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $219,336,985
Annual Return: 33.43%
Sharpe Ratio: 1.18697
Sortino Ratio: 1.078
Max Drawdown: -62.2%
Avg Drawdown: -13.5%
Normalized Score: -2.298
Lookback periods: [55, 84, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,604,272,151
Annual Return: 44.65%
Sharpe Ratio: 1.47300
Sortino Ratio: 1.438
Max Drawdown: -55.6%
Avg Drawdown: -12.3%
Normalized Score: 0.058
Lookback periods: [134, 135, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,224,795,867
Annual Return: 46.21%
Sharpe Ratio: 1.51248
Sortino Ratio: 1.484
Max Drawdown: -60.3%
Avg Drawdown: -11.4%
Normalized Score: 0.303
Lookback periods: [136, 171, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,982,128,483
Annual Return: 47.44%
Sharpe Ratio: 1.53801
Sortino Ratio: 1.501
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.564
Lookback periods: [175, 189, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 19m 41sRunning iteration 41/1500... Est. remaining: 17m 48sRunning iteration 51/1500... Est. remaining: 16m 43sRunning iteration 61/1500... Est. remaining: 15m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,620,133,996
Annual Return: 41.35%
Sharpe Ratio: 1.48917
Sortino Ratio: 1.381
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.772
Lookback periods: [50, 57, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 42sRunning iteration 81/1500... Est. remaining: 15m 10sRunning iteration 91/1500... Est. remaining: 14m 43sRunning iteration 101/1500... Est. remaining: 14m 19sbest_combination: {'lookbacks': [50, 57, 88], 'score': np.float64(0.7724388945318343), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 0sRunning iteration 121/1500... Est. remaining: 13m 42sRunning iteration 131/1500... Est. remaining: 13m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,254,804,803
Annual Return: 48.15%
Sharpe Ratio: 1.58909
Sortino Ratio: 1.542
Max Drawdown: -56.8%
Avg Drawdown: -10.8%
Normalized Score: 0.883
Lookback periods: [141, 158, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 13m 24sRunning iteration 151/1500... Est. remaining: 13m 11sRunning iteration 161/1500... Est. remaining: 12m 59sRunning iteration 171/1500... Est. remaining: 12m 47sRunning iteration 181/1500... Est. remaining: 12m 36sRunning iteration 191/1500... Est. remaining: 12m 26sRunning iteration 201/1500... Est. remaining: 12m 16sbest_combination: {'lookbacks': [141, 158, 178], 'score': np.float64(0.8828252560375207), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 7sRunning iteration 221/1500... Est. remaining: 11m 58sRunning iteration 231/1500... Est. remaining: 11m 49sRunning iteration 241/1500... Est. remaining: 11m 41sRunning iteration 251/1500... Est. remaining: 11m 32sRunning iteration 261/1500... Est. remaining: 11m 25sRunning iteration 271/1500... Est. remaining: 11m 17sRunning iteration 281/1500... Est. remaining: 11m 10sRunning iteration 291/1500... Est. remaining: 11m 2sRunning iteration 301/1500... Est. remaining: 10m 55sbest_combination: {'lookbacks': [141, 158, 178], 'score': np.float64(0.8828252560375207), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 48sRunning iteration 321/1500... Est. remaining: 10m 41sRunning iteration 331/1500... Est. remaining: 10m 34sRunning iteration 341/1500... Est. remaining: 10m 27sRunning iteration 351/1500... Est. remaining: 10m 21sRunning iteration 361/1500... Est. remaining: 10m 15sRunning iteration 371/1500... Est. remaining: 10m 8sRunning iteration 381/1500... Est. remaining: 10m 2sRunning iteration 391/1500... Est. remaining: 9m 55sRunning iteration 401/1500... Est. remaining: 9m 49sbest_combination: {'lookbacks': [141, 158, 178], 'score': np.float64(0.8828252560375207), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 43sRunning iteration 421/1500... Est. remaining: 9m 37sRunning iteration 431/1500... Est. remaining: 9m 31sRunning iteration 441/1500... Est. remaining: 9m 25sRunning iteration 451/1500... Est. remaining: 9m 19sRunning iteration 461/1500... Est. remaining: 9m 13sRunning iteration 471/1500... Est. remaining: 9m 7sRunning iteration 481/1500... Est. remaining: 9m 1sRunning iteration 491/1500... Est. remaining: 8m 55sRunning iteration 501/1500... Est. remaining: 8m 49sbest_combination: {'lookbacks': [141, 158, 178], 'score': np.float64(0.8828252560375207), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 44sRunning iteration 521/1500... Est. remaining: 8m 38sRunning iteration 531/1500... Est. remaining: 8m 32sRunning iteration 541/1500... Est. remaining: 8m 27sRunning iteration 551/1500... Est. remaining: 8m 21sRunning iteration 561/1500... Est. remaining: 8m 15sRunning iteration 571/1500... Est. remaining: 8m 10sRunning iteration 581/1500... Est. remaining: 8m 4sRunning iteration 591/1500... Est. remaining: 7m 59sRunning iteration 601/1500... Est. remaining: 7m 54sbest_combination: {'lookbacks': [141, 158, 178], 'score': np.float64(0.8828252560375207), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 48sRunning iteration 621/1500... Est. remaining: 7m 43sRunning iteration 631/1500... Est. remaining: 7m 37sRunning iteration 641/1500... Est. remaining: 7m 32sRunning iteration 651/1500... Est. remaining: 7m 27sRunning iteration 661/1500... Est. remaining: 7m 21sRunning iteration 671/1500... Est. remaining: 7m 17sRunning iteration 681/1500... Est. remaining: 7m 11sRunning iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 1sbest_combination: {'lookbacks': [141, 158, 178], 'score': np.float64(0.8828252560375207), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 55sRunning iteration 721/1500... Est. remaining: 6m 50sRunning iteration 731/1500... Est. remaining: 6m 44sRunning iteration 741/1500... Est. remaining: 6m 39sRunning iteration 751/1500... Est. remaining: 6m 33sRunning iteration 761/1500... Est. remaining: 6m 28sRunning iteration 771/1500... Est. remaining: 6m 23sRunning iteration 781/1500... Est. remaining: 6m 17sRunning iteration 791/1500... Est. remaining: 6m 12sRunning iteration 801/1500... Est. remaining: 6m 6sbest_combination: {'lookbacks': [141, 158, 178], 'score': np.float64(0.8828252560375207), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 1sRunning iteration 821/1500... Est. remaining: 5m 56sRunning iteration 831/1500... Est. remaining: 5m 50sRunning iteration 841/1500... Est. remaining: 5m 45sRunning iteration 851/1500... Est. remaining: 5m 40sRunning iteration 861/1500... Est. remaining: 5m 34sRunning iteration 871/1500... Est. remaining: 5m 29sRunning iteration 881/1500... Est. remaining: 5m 24sRunning iteration 891/1500... Est. remaining: 5m 18sRunning iteration 901/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [141, 158, 178], 'score': np.float64(0.8828252560375207), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 8sRunning iteration 921/1500... Est. remaining: 5m 2sRunning iteration 931/1500... Est. remaining: 4m 57sRunning iteration 941/1500... Est. remaining: 4m 52sRunning iteration 951/1500... Est. remaining: 4m 46sRunning iteration 961/1500... Est. remaining: 4m 41sRunning iteration 971/1500... Est. remaining: 4m 36sRunning iteration 981/1500... Est. remaining: 4m 30sRunning iteration 991/1500... Est. remaining: 4m 25sRunning iteration 1001/1500... Est. remaining: 4m 20sbest_combination: {'lookbacks': [141, 158, 178], 'score': np.float64(0.8828252560375207), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 9sRunning iteration 1031/1500... Est. remaining: 4m 4sRunning iteration 1041/1500... Est. remaining: 3m 59sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 48sRunning iteration 1071/1500... Est. remaining: 3m 43sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [141, 158, 178], 'score': np.float64(0.8828252560375207), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 22sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,483,501,917
Annual Return: 49.57%
Sharpe Ratio: 1.62943
Sortino Ratio: 1.594
Max Drawdown: -58.5%
Avg Drawdown: -10.8%
Normalized Score: 1.083
Lookback periods: [139, 155, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 36sbest_combination: {'lookbacks': [139, 155, 179], 'score': np.float64(1.0830782582631366), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 15sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [139, 155, 179], 'score': np.float64(1.0830782582631366), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [139, 155, 179], 'score': np.float64(1.0830782582631366), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 1.08
best_combination: {'lookbacks': [139, 155, 179], 'score': np.float64(1.0830782582631366), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [139, 155, 179] (score: 1.0831)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 155, 179] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 111 selections (26.7%)
2. naz100_hma: 110 selections (26.4%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,483,501,916.65
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Sun Aug 24 22:34:43 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,367,070,434
Annual Return: 42.91%
Sharpe Ratio: 1.40784
Sortino Ratio: 1.372
Max Drawdown: -66.1%
Avg Drawdown: -12.8%
Normalized Score: -0.706
Lookback periods: [144, 175, 177] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,845,743,169
Annual Return: 44.92%
Sharpe Ratio: 1.49274
Sortino Ratio: 1.451
Max Drawdown: -58.5%
Avg Drawdown: -12.0%
Normalized Score: 0.079
Lookback periods: [138, 150, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 26m 42sRunning iteration 21/1500... Est. remaining: 19m 40sRunning iteration 31/1500... Est. remaining: 17m 14sRunning iteration 41/1500... Est. remaining: 16m 1sRunning iteration 51/1500... Est. remaining: 15m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,287,260,029
Annual Return: 49.10%
Sharpe Ratio: 1.58617
Sortino Ratio: 1.546
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.818
Lookback periods: [178, 189, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 15m 11sRunning iteration 71/1500... Est. remaining: 14m 42sRunning iteration 81/1500... Est. remaining: 14m 18sRunning iteration 91/1500... Est. remaining: 13m 57sRunning iteration 101/1500... Est. remaining: 13m 38sbest_combination: {'lookbacks': [178, 189, 193], 'score': np.float64(0.8182034870224696), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 22sRunning iteration 121/1500... Est. remaining: 13m 8sRunning iteration 131/1500... Est. remaining: 12m 56sRunning iteration 141/1500... Est. remaining: 12m 45sRunning iteration 151/1500... Est. remaining: 12m 35sRunning iteration 161/1500... Est. remaining: 12m 26sRunning iteration 171/1500... Est. remaining: 12m 17sRunning iteration 181/1500... Est. remaining: 12m 9sRunning iteration 191/1500... Est. remaining: 12m 1sRunning iteration 201/1500... Est. remaining: 11m 53sbest_combination: {'lookbacks': [178, 189, 193], 'score': np.float64(0.8182034870224696), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 45sRunning iteration 221/1500... Est. remaining: 11m 38sRunning iteration 231/1500... Est. remaining: 11m 31sRunning iteration 241/1500... Est. remaining: 11m 26sRunning iteration 251/1500... Est. remaining: 11m 20sRunning iteration 261/1500... Est. remaining: 11m 16sRunning iteration 271/1500... Est. remaining: 11m 9sRunning iteration 281/1500... Est. remaining: 11m 6sRunning iteration 291/1500... Est. remaining: 10m 59sRunning iteration 301/1500... Est. remaining: 10m 52sbest_combination: {'lookbacks': [178, 189, 193], 'score': np.float64(0.8182034870224696), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 46sRunning iteration 321/1500... Est. remaining: 10m 38sRunning iteration 331/1500... Est. remaining: 10m 32sRunning iteration 341/1500... Est. remaining: 10m 25sRunning iteration 351/1500... Est. remaining: 10m 19sRunning iteration 361/1500... Est. remaining: 10m 12sRunning iteration 371/1500... Est. remaining: 10m 6sRunning iteration 381/1500... Est. remaining: 9m 59sRunning iteration 391/1500... Est. remaining: 9m 53sRunning iteration 401/1500... Est. remaining: 9m 47sbest_combination: {'lookbacks': [178, 189, 193], 'score': np.float64(0.8182034870224696), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 41sRunning iteration 421/1500... Est. remaining: 9m 35sRunning iteration 431/1500... Est. remaining: 9m 29sRunning iteration 441/1500... Est. remaining: 9m 23sRunning iteration 451/1500... Est. remaining: 9m 18sRunning iteration 461/1500... Est. remaining: 9m 12sRunning iteration 471/1500... Est. remaining: 9m 6sRunning iteration 481/1500... Est. remaining: 9m 0sRunning iteration 491/1500... Est. remaining: 8m 55sRunning iteration 501/1500... Est. remaining: 8m 49sbest_combination: {'lookbacks': [178, 189, 193], 'score': np.float64(0.8182034870224696), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 45sRunning iteration 521/1500... Est. remaining: 8m 39sRunning iteration 531/1500... Est. remaining: 8m 34sRunning iteration 541/1500... Est. remaining: 8m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,143,271,760
Annual Return: 49.04%
Sharpe Ratio: 1.60292
Sortino Ratio: 1.575
Max Drawdown: -55.0%
Avg Drawdown: -12.0%
Normalized Score: 0.903
Lookback periods: [128, 130, 131] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 8m 25sRunning iteration 561/1500... Est. remaining: 8m 20sRunning iteration 571/1500... Est. remaining: 8m 14sRunning iteration 581/1500... Est. remaining: 8m 8sRunning iteration 591/1500... Est. remaining: 8m 2sRunning iteration 601/1500... Est. remaining: 7m 57sbest_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 51sRunning iteration 621/1500... Est. remaining: 7m 45sRunning iteration 631/1500... Est. remaining: 7m 40sRunning iteration 641/1500... Est. remaining: 7m 35sRunning iteration 651/1500... Est. remaining: 7m 29sRunning iteration 661/1500... Est. remaining: 7m 24sRunning iteration 671/1500... Est. remaining: 7m 19sRunning iteration 681/1500... Est. remaining: 7m 13sRunning iteration 691/1500... Est. remaining: 7m 8sRunning iteration 701/1500... Est. remaining: 7m 2sbest_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 57sRunning iteration 721/1500... Est. remaining: 6m 51sRunning iteration 731/1500... Est. remaining: 6m 46sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 35sRunning iteration 761/1500... Est. remaining: 6m 30sRunning iteration 771/1500... Est. remaining: 6m 24sRunning iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 13sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 2sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 51sRunning iteration 841/1500... Est. remaining: 5m 46sRunning iteration 851/1500... Est. remaining: 5m 41sRunning iteration 861/1500... Est. remaining: 5m 35sRunning iteration 871/1500... Est. remaining: 5m 30sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 19sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 8sRunning iteration 921/1500... Est. remaining: 5m 3sRunning iteration 931/1500... Est. remaining: 4m 58sRunning iteration 941/1500... Est. remaining: 4m 52sRunning iteration 951/1500... Est. remaining: 4m 47sRunning iteration 961/1500... Est. remaining: 4m 42sRunning iteration 971/1500... Est. remaining: 4m 36sRunning iteration 981/1500... Est. remaining: 4m 31sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 20sbest_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 4sRunning iteration 1041/1500... Est. remaining: 3m 59sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 43sRunning iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 22sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 0.90
best_combination: {'lookbacks': [128, 130, 131], 'score': np.float64(0.903148034776866), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [128, 130, 131] (score: 0.9031)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [128, 130, 131] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 108 selections (26.0%)
3. naz100_pi: 85 selections (20.4%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,143,271,760.20
Average Annualized Gain: 49.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Sun Aug 24 22:47:44 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $976,804,499
Annual Return: 39.31%
Sharpe Ratio: 1.33525
Sortino Ratio: 1.264
Max Drawdown: -63.0%
Avg Drawdown: -13.8%
Normalized Score: -1.351
Lookback periods: [112, 114, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,095,356,170
Annual Return: 46.11%
Sharpe Ratio: 1.49997
Sortino Ratio: 1.465
Max Drawdown: -62.5%
Avg Drawdown: -11.9%
Normalized Score: 0.101
Lookback periods: [151, 157, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 5sRunning iteration 21/1500... Est. remaining: 18m 40sRunning iteration 31/1500... Est. remaining: 16m 49sRunning iteration 41/1500... Est. remaining: 15m 34sRunning iteration 51/1500... Est. remaining: 14m 52sRunning iteration 61/1500... Est. remaining: 14m 20sRunning iteration 71/1500... Est. remaining: 14m 1sRunning iteration 81/1500... Est. remaining: 13m 41sRunning iteration 91/1500... Est. remaining: 13m 28sRunning iteration 101/1500... Est. remaining: 13m 17sbest_combination: {'lookbacks': [151, 157, 162], 'score': np.float64(0.10074781486458832), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,375,636,466
Annual Return: 46.33%
Sharpe Ratio: 1.52778
Sortino Ratio: 1.491
Max Drawdown: -57.9%
Avg Drawdown: -11.5%
Normalized Score: 0.418
Lookback periods: [134, 147, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,370,940,782
Annual Return: 46.33%
Sharpe Ratio: 1.51382
Sortino Ratio: 1.469
Max Drawdown: -55.0%
Avg Drawdown: -11.3%
Normalized Score: 0.499
Lookback periods: [156, 161, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 7sRunning iteration 141/1500... Est. remaining: 12m 54sRunning iteration 151/1500... Est. remaining: 12m 43sRunning iteration 161/1500... Est. remaining: 12m 33sRunning iteration 171/1500... Est. remaining: 12m 23sRunning iteration 181/1500... Est. remaining: 12m 13sRunning iteration 191/1500... Est. remaining: 12m 4sRunning iteration 201/1500... Est. remaining: 11m 56sbest_combination: {'lookbacks': [156, 161, 181], 'score': np.float64(0.49888359842653907), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 49sRunning iteration 221/1500... Est. remaining: 11m 42sRunning iteration 231/1500... Est. remaining: 11m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,788,173,323
Annual Return: 47.91%
Sharpe Ratio: 1.57660
Sortino Ratio: 1.540
Max Drawdown: -60.1%
Avg Drawdown: -11.7%
Normalized Score: 0.593
Lookback periods: [138, 153, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/1500... Est. remaining: 11m 34sRunning iteration 251/1500... Est. remaining: 11m 27sRunning iteration 261/1500... Est. remaining: 11m 20sRunning iteration 271/1500... Est. remaining: 11m 12sRunning iteration 281/1500... Est. remaining: 11m 5sRunning iteration 291/1500... Est. remaining: 10m 58sRunning iteration 301/1500... Est. remaining: 10m 51sbest_combination: {'lookbacks': [138, 153, 157], 'score': np.float64(0.5932981892411167), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 44sRunning iteration 321/1500... Est. remaining: 10m 37sRunning iteration 331/1500... Est. remaining: 10m 31sRunning iteration 341/1500... Est. remaining: 10m 24sRunning iteration 351/1500... Est. remaining: 10m 18sRunning iteration 361/1500... Est. remaining: 10m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,446,188,654
Annual Return: 48.25%
Sharpe Ratio: 1.55784
Sortino Ratio: 1.531
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.744
Lookback periods: [176, 190, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 371/1500... Est. remaining: 10m 9sRunning iteration 381/1500... Est. remaining: 10m 3sRunning iteration 391/1500... Est. remaining: 9m 59sRunning iteration 401/1500... Est. remaining: 9m 53sbest_combination: {'lookbacks': [176, 190, 196], 'score': np.float64(0.7442389197955392), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,332,524,774
Annual Return: 49.88%
Sharpe Ratio: 1.60199
Sortino Ratio: 1.569
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 1.028
Lookback periods: [176, 189, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 411/1500... Est. remaining: 9m 52sRunning iteration 421/1500... Est. remaining: 9m 46sRunning iteration 431/1500... Est. remaining: 9m 40sRunning iteration 441/1500... Est. remaining: 9m 34sRunning iteration 451/1500... Est. remaining: 9m 28sRunning iteration 461/1500... Est. remaining: 9m 22sRunning iteration 471/1500... Est. remaining: 9m 16sRunning iteration 481/1500... Est. remaining: 9m 10sRunning iteration 491/1500... Est. remaining: 9m 4sRunning iteration 501/1500... Est. remaining: 8m 58sbest_combination: {'lookbacks': [176, 189, 189], 'score': np.float64(1.0281643593981502), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 52sRunning iteration 521/1500... Est. remaining: 8m 46sRunning iteration 531/1500... Est. remaining: 8m 41sRunning iteration 541/1500... Est. remaining: 8m 35sRunning iteration 551/1500... Est. remaining: 8m 29sRunning iteration 561/1500... Est. remaining: 8m 24sRunning iteration 571/1500... Est. remaining: 8m 18sRunning iteration 581/1500... Est. remaining: 8m 12sRunning iteration 591/1500... Est. remaining: 8m 6sRunning iteration 601/1500... Est. remaining: 8m 1sbest_combination: {'lookbacks': [176, 189, 189], 'score': np.float64(1.0281643593981502), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 55sRunning iteration 621/1500... Est. remaining: 7m 49sRunning iteration 631/1500... Est. remaining: 7m 44sRunning iteration 641/1500... Est. remaining: 7m 38sRunning iteration 651/1500... Est. remaining: 7m 33sRunning iteration 661/1500... Est. remaining: 7m 27sRunning iteration 671/1500... Est. remaining: 7m 21sRunning iteration 681/1500... Est. remaining: 7m 16sRunning iteration 691/1500... Est. remaining: 7m 10sRunning iteration 701/1500... Est. remaining: 7m 5sbest_combination: {'lookbacks': [176, 189, 189], 'score': np.float64(1.0281643593981502), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 59sRunning iteration 721/1500... Est. remaining: 6m 54sRunning iteration 731/1500... Est. remaining: 6m 48sRunning iteration 741/1500... Est. remaining: 6m 43sRunning iteration 751/1500... Est. remaining: 6m 37sRunning iteration 761/1500... Est. remaining: 6m 32sRunning iteration 771/1500... Est. remaining: 6m 26sRunning iteration 781/1500... Est. remaining: 6m 22sRunning iteration 791/1500... Est. remaining: 6m 16sRunning iteration 801/1500... Est. remaining: 6m 11sbest_combination: {'lookbacks': [176, 189, 189], 'score': np.float64(1.0281643593981502), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 6sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 55sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 44sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 33sRunning iteration 881/1500... Est. remaining: 5m 27sRunning iteration 891/1500... Est. remaining: 5m 22sRunning iteration 901/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [176, 189, 189], 'score': np.float64(1.0281643593981502), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 11sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 55sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 44sRunning iteration 971/1500... Est. remaining: 4m 39sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [176, 189, 189], 'score': np.float64(1.0281643593981502), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [176, 189, 189], 'score': np.float64(1.0281643593981502), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [176, 189, 189], 'score': np.float64(1.0281643593981502), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [176, 189, 189], 'score': np.float64(1.0281643593981502), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [176, 189, 189], 'score': np.float64(1.0281643593981502), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.03
best_combination: {'lookbacks': [176, 189, 189], 'score': np.float64(1.0281643593981502), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [176, 189, 189] (score: 1.0282)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [176, 189, 189] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 123 selections (29.6%)
2. sp500_hma: 101 selections (24.3%)
3. naz100_pine: 85 selections (20.4%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $12,332,524,773.74
Average Annualized Gain: 49.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Sun Aug 24 23:00:56 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $570,234,668
Annual Return: 37.16%
Sharpe Ratio: 1.27952
Sortino Ratio: 1.200
Max Drawdown: -52.3%
Avg Drawdown: -11.7%
Normalized Score: -1.048
Lookback periods: [80, 111, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $975,870,344
Annual Return: 39.30%
Sharpe Ratio: 1.35002
Sortino Ratio: 1.273
Max Drawdown: -52.3%
Avg Drawdown: -12.2%
Normalized Score: -0.729
Lookback periods: [78, 102, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,775,790,541
Annual Return: 44.85%
Sharpe Ratio: 1.50133
Sortino Ratio: 1.455
Max Drawdown: -62.4%
Avg Drawdown: -12.5%
Normalized Score: -0.121
Lookback periods: [130, 141, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 37sRunning iteration 21/1500... Est. remaining: 20m 13sRunning iteration 31/1500... Est. remaining: 17m 31sRunning iteration 41/1500... Est. remaining: 16m 9sRunning iteration 51/1500... Est. remaining: 15m 16sRunning iteration 61/1500... Est. remaining: 14m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,210,400,261
Annual Return: 45.30%
Sharpe Ratio: 1.49589
Sortino Ratio: 1.446
Max Drawdown: -63.6%
Avg Drawdown: -11.8%
Normalized Score: -0.033
Lookback periods: [125, 156, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,954,870,594
Annual Return: 45.99%
Sharpe Ratio: 1.49704
Sortino Ratio: 1.460
Max Drawdown: -61.6%
Avg Drawdown: -12.2%
Normalized Score: 0.076
Lookback periods: [159, 183, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 5sRunning iteration 81/1500... Est. remaining: 14m 42sRunning iteration 91/1500... Est. remaining: 14m 18sRunning iteration 101/1500... Est. remaining: 13m 58sbest_combination: {'lookbacks': [159, 183, 200], 'score': np.float64(0.07610495988499197), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,958,471,241
Annual Return: 45.99%
Sharpe Ratio: 1.48758
Sortino Ratio: 1.450
Max Drawdown: -62.5%
Avg Drawdown: -11.6%
Normalized Score: 0.110
Lookback periods: [174, 191, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/1500... Est. remaining: 13m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,465,484,906
Annual Return: 46.40%
Sharpe Ratio: 1.51371
Sortino Ratio: 1.483
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.380
Lookback periods: [146, 171, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/1500... Est. remaining: 13m 39sRunning iteration 141/1500... Est. remaining: 13m 25sRunning iteration 151/1500... Est. remaining: 13m 13sRunning iteration 161/1500... Est. remaining: 13m 3sRunning iteration 171/1500... Est. remaining: 12m 51sRunning iteration 181/1500... Est. remaining: 12m 40sRunning iteration 191/1500... Est. remaining: 12m 30sRunning iteration 201/1500... Est. remaining: 12m 19sbest_combination: {'lookbacks': [146, 171, 199], 'score': np.float64(0.38016875586755206), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,729,203,430
Annual Return: 46.60%
Sharpe Ratio: 1.54585
Sortino Ratio: 1.497
Max Drawdown: -55.0%
Avg Drawdown: -11.7%
Normalized Score: 0.534
Lookback periods: [139, 139, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/1500... Est. remaining: 12m 18sRunning iteration 221/1500... Est. remaining: 12m 8sRunning iteration 231/1500... Est. remaining: 11m 59sRunning iteration 241/1500... Est. remaining: 11m 50sRunning iteration 251/1500... Est. remaining: 11m 42sRunning iteration 261/1500... Est. remaining: 11m 33sRunning iteration 271/1500... Est. remaining: 11m 25sRunning iteration 281/1500... Est. remaining: 11m 17sRunning iteration 291/1500... Est. remaining: 11m 10sRunning iteration 301/1500... Est. remaining: 11m 2sbest_combination: {'lookbacks': [139, 139, 145], 'score': np.float64(0.533549668322532), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 55sRunning iteration 321/1500... Est. remaining: 10m 48sRunning iteration 331/1500... Est. remaining: 10m 41sRunning iteration 341/1500... Est. remaining: 10m 34sRunning iteration 351/1500... Est. remaining: 10m 27sRunning iteration 361/1500... Est. remaining: 10m 21sRunning iteration 371/1500... Est. remaining: 10m 14sRunning iteration 381/1500... Est. remaining: 10m 7sRunning iteration 391/1500... Est. remaining: 10m 1sRunning iteration 401/1500... Est. remaining: 9m 55sbest_combination: {'lookbacks': [139, 139, 145], 'score': np.float64(0.533549668322532), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 48sRunning iteration 421/1500... Est. remaining: 9m 42sRunning iteration 431/1500... Est. remaining: 9m 36sRunning iteration 441/1500... Est. remaining: 9m 29sRunning iteration 451/1500... Est. remaining: 9m 23sRunning iteration 461/1500... Est. remaining: 9m 17sRunning iteration 471/1500... Est. remaining: 9m 11sRunning iteration 481/1500... Est. remaining: 9m 5sRunning iteration 491/1500... Est. remaining: 8m 59sRunning iteration 501/1500... Est. remaining: 8m 53sbest_combination: {'lookbacks': [139, 139, 145], 'score': np.float64(0.533549668322532), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 47sRunning iteration 521/1500... Est. remaining: 8m 42sRunning iteration 531/1500... Est. remaining: 8m 36sRunning iteration 541/1500... Est. remaining: 8m 30sRunning iteration 551/1500... Est. remaining: 8m 25sRunning iteration 561/1500... Est. remaining: 8m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,999,168,239
Annual Return: 46.80%
Sharpe Ratio: 1.55352
Sortino Ratio: 1.499
Max Drawdown: -55.0%
Avg Drawdown: -11.5%
Normalized Score: 0.594
Lookback periods: [107, 136, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 8m 16sRunning iteration 581/1500... Est. remaining: 8m 10sRunning iteration 591/1500... Est. remaining: 8m 4sRunning iteration 601/1500... Est. remaining: 7m 59sbest_combination: {'lookbacks': [107, 136, 144], 'score': np.float64(0.5938573687795453), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 53sRunning iteration 621/1500... Est. remaining: 7m 48sRunning iteration 631/1500... Est. remaining: 7m 42sRunning iteration 641/1500... Est. remaining: 7m 36sRunning iteration 651/1500... Est. remaining: 7m 31sRunning iteration 661/1500... Est. remaining: 7m 25sRunning iteration 671/1500... Est. remaining: 7m 20sRunning iteration 681/1500... Est. remaining: 7m 14sRunning iteration 691/1500... Est. remaining: 7m 9sRunning iteration 701/1500... Est. remaining: 7m 3sbest_combination: {'lookbacks': [107, 136, 144], 'score': np.float64(0.5938573687795453), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 58sRunning iteration 721/1500... Est. remaining: 6m 52sRunning iteration 731/1500... Est. remaining: 6m 47sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 36sRunning iteration 761/1500... Est. remaining: 6m 30sRunning iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 14sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [107, 136, 144], 'score': np.float64(0.5938573687795453), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [107, 136, 144], 'score': np.float64(0.5938573687795453), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,626,079,011
Annual Return: 47.82%
Sharpe Ratio: 1.55443
Sortino Ratio: 1.514
Max Drawdown: -57.2%
Avg Drawdown: -11.6%
Normalized Score: 0.627
Lookback periods: [154, 156, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 27sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [154, 156, 178], 'score': np.float64(0.6270244827424809), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,909,838,758
Annual Return: 47.97%
Sharpe Ratio: 1.55718
Sortino Ratio: 1.519
Max Drawdown: -58.0%
Avg Drawdown: -11.3%
Normalized Score: 0.679
Lookback periods: [156, 157, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,101,733,499
Annual Return: 48.57%
Sharpe Ratio: 1.58790
Sortino Ratio: 1.554
Max Drawdown: -59.0%
Avg Drawdown: -10.4%
Normalized Score: 0.928
Lookback periods: [158, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [158, 161, 168], 'score': np.float64(0.9275664418198547), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,989,941,669
Annual Return: 48.97%
Sharpe Ratio: 1.59907
Sortino Ratio: 1.568
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 1.093
Lookback periods: [156, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.09
best_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(1.0934777670648477), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 161, 168] (score: 1.0935)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 161, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 108 selections (26.0%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,989,941,669.30
Average Annualized Gain: 49.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Sun Aug 24 23:14:11 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,053,713,208
Annual Return: 47.48%
Sharpe Ratio: 1.55850
Sortino Ratio: 1.524
Max Drawdown: -63.4%
Avg Drawdown: -12.7%
Normalized Score: 0.235
Lookback periods: [135, 153, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 25m 41sRunning iteration 21/1500... Est. remaining: 19m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,047,435,161
Annual Return: 46.83%
Sharpe Ratio: 1.52669
Sortino Ratio: 1.481
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.490
Lookback periods: [154, 159, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 17m 57sRunning iteration 41/1500... Est. remaining: 16m 29sRunning iteration 51/1500... Est. remaining: 15m 33sRunning iteration 61/1500... Est. remaining: 14m 55sRunning iteration 71/1500... Est. remaining: 14m 27sRunning iteration 81/1500... Est. remaining: 14m 4sRunning iteration 91/1500... Est. remaining: 13m 44sRunning iteration 101/1500... Est. remaining: 13m 26sbest_combination: {'lookbacks': [154, 159, 193], 'score': np.float64(0.48982218150791246), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 12sRunning iteration 121/1500... Est. remaining: 12m 58sRunning iteration 131/1500... Est. remaining: 12m 46sRunning iteration 141/1500... Est. remaining: 12m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,254,252,536
Annual Return: 42.71%
Sharpe Ratio: 1.53570
Sortino Ratio: 1.437
Max Drawdown: -42.0%
Avg Drawdown: -9.8%
Normalized Score: 0.775
Lookback periods: [51, 54, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 12m 35sRunning iteration 161/1500... Est. remaining: 12m 25sRunning iteration 171/1500... Est. remaining: 12m 15sRunning iteration 181/1500... Est. remaining: 12m 7sRunning iteration 191/1500... Est. remaining: 11m 58sRunning iteration 201/1500... Est. remaining: 11m 50sbest_combination: {'lookbacks': [51, 54, 102], 'score': np.float64(0.7745527380390638), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 42sRunning iteration 221/1500... Est. remaining: 11m 35sRunning iteration 231/1500... Est. remaining: 11m 28sRunning iteration 241/1500... Est. remaining: 11m 20sRunning iteration 251/1500... Est. remaining: 11m 14sRunning iteration 261/1500... Est. remaining: 11m 7sRunning iteration 271/1500... Est. remaining: 11m 0sRunning iteration 281/1500... Est. remaining: 10m 53sRunning iteration 291/1500... Est. remaining: 10m 46sRunning iteration 301/1500... Est. remaining: 10m 40sbest_combination: {'lookbacks': [51, 54, 102], 'score': np.float64(0.7745527380390638), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 33sRunning iteration 321/1500... Est. remaining: 10m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,580,153,508
Annual Return: 43.27%
Sharpe Ratio: 1.54243
Sortino Ratio: 1.460
Max Drawdown: -39.9%
Avg Drawdown: -10.1%
Normalized Score: 0.903
Lookback periods: [51, 53, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 331/1500... Est. remaining: 10m 25sRunning iteration 341/1500... Est. remaining: 10m 19sRunning iteration 351/1500... Est. remaining: 10m 13sRunning iteration 361/1500... Est. remaining: 10m 7sRunning iteration 371/1500... Est. remaining: 10m 2sRunning iteration 381/1500... Est. remaining: 9m 56sRunning iteration 391/1500... Est. remaining: 9m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,005,011
Annual Return: 43.90%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.535
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 9m 49sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.5346297552910149), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 44sRunning iteration 421/1500... Est. remaining: 9m 38sRunning iteration 431/1500... Est. remaining: 9m 32sRunning iteration 441/1500... Est. remaining: 9m 26sRunning iteration 451/1500... Est. remaining: 9m 20sRunning iteration 461/1500... Est. remaining: 9m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 9m 10sRunning iteration 481/1500... Est. remaining: 9m 4sRunning iteration 491/1500... Est. remaining: 8m 58sRunning iteration 501/1500... Est. remaining: 8m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 46sRunning iteration 521/1500... Est. remaining: 8m 41sRunning iteration 531/1500... Est. remaining: 8m 35sRunning iteration 541/1500... Est. remaining: 8m 29sRunning iteration 551/1500... Est. remaining: 8m 23sRunning iteration 561/1500... Est. remaining: 8m 17sRunning iteration 571/1500... Est. remaining: 8m 11sRunning iteration 581/1500... Est. remaining: 8m 6sRunning iteration 591/1500... Est. remaining: 8m 0sRunning iteration 601/1500... Est. remaining: 7m 55sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 49sRunning iteration 621/1500... Est. remaining: 7m 43sRunning iteration 631/1500... Est. remaining: 7m 38sRunning iteration 641/1500... Est. remaining: 7m 32sRunning iteration 651/1500... Est. remaining: 7m 26sRunning iteration 661/1500... Est. remaining: 7m 21sRunning iteration 671/1500... Est. remaining: 7m 15sRunning iteration 681/1500... Est. remaining: 7m 10sRunning iteration 691/1500... Est. remaining: 7m 4sRunning iteration 701/1500... Est. remaining: 6m 59sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 53sRunning iteration 721/1500... Est. remaining: 6m 48sRunning iteration 731/1500... Est. remaining: 6m 42sRunning iteration 741/1500... Est. remaining: 6m 37sRunning iteration 751/1500... Est. remaining: 6m 32sRunning iteration 761/1500... Est. remaining: 6m 27sRunning iteration 771/1500... Est. remaining: 6m 21sRunning iteration 781/1500... Est. remaining: 6m 16sRunning iteration 791/1500... Est. remaining: 6m 11sRunning iteration 801/1500... Est. remaining: 6m 5sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 0sRunning iteration 821/1500... Est. remaining: 5m 55sRunning iteration 831/1500... Est. remaining: 5m 49sRunning iteration 841/1500... Est. remaining: 5m 44sRunning iteration 851/1500... Est. remaining: 5m 39sRunning iteration 861/1500... Est. remaining: 5m 34sRunning iteration 871/1500... Est. remaining: 5m 28sRunning iteration 881/1500... Est. remaining: 5m 23sRunning iteration 891/1500... Est. remaining: 5m 17sRunning iteration 901/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 7sRunning iteration 921/1500... Est. remaining: 5m 2sRunning iteration 931/1500... Est. remaining: 4m 57sRunning iteration 941/1500... Est. remaining: 4m 51sRunning iteration 951/1500... Est. remaining: 4m 46sRunning iteration 961/1500... Est. remaining: 4m 41sRunning iteration 971/1500... Est. remaining: 4m 35sRunning iteration 981/1500... Est. remaining: 4m 30sRunning iteration 991/1500... Est. remaining: 4m 25sRunning iteration 1001/1500... Est. remaining: 4m 20sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 14sRunning iteration 1021/1500... Est. remaining: 4m 9sRunning iteration 1031/1500... Est. remaining: 4m 4sRunning iteration 1041/1500... Est. remaining: 3m 58sRunning iteration 1051/1500... Est. remaining: 3m 53sRunning iteration 1061/1500... Est. remaining: 3m 48sRunning iteration 1071/1500... Est. remaining: 3m 43sRunning iteration 1081/1500... Est. remaining: 3m 37sRunning iteration 1091/1500... Est. remaining: 3m 32sRunning iteration 1101/1500... Est. remaining: 3m 27sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 22sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 11sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 1.94
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9365)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Sun Aug 24 23:27:08 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-24T23:27:09.130673
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.9365
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $338,228,022
Annual Return: 35.11%
Sharpe Ratio: 1.23363
Sortino Ratio: 1.145
Max Drawdown: -52.3%
Avg Drawdown: -12.8%
Normalized Score: -1.547
Lookback periods: [76, 91, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,761,837,128
Annual Return: 43.55%
Sharpe Ratio: 1.44206
Sortino Ratio: 1.401
Max Drawdown: -66.1%
Avg Drawdown: -12.1%
Normalized Score: -0.448
Lookback periods: [129, 179, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,378,372,627
Annual Return: 45.47%
Sharpe Ratio: 1.47363
Sortino Ratio: 1.426
Max Drawdown: -59.6%
Avg Drawdown: -11.3%
Normalized Score: 0.148
Lookback periods: [188, 194, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 27m 40sRunning iteration 21/1500... Est. remaining: 19m 58sRunning iteration 31/1500... Est. remaining: 17m 8sRunning iteration 41/1500... Est. remaining: 15m 46sRunning iteration 51/1500... Est. remaining: 14m 57sRunning iteration 61/1500... Est. remaining: 14m 23sRunning iteration 71/1500... Est. remaining: 13m 56sRunning iteration 81/1500... Est. remaining: 13m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,147,436,626
Annual Return: 46.90%
Sharpe Ratio: 1.52467
Sortino Ratio: 1.480
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.469
Lookback periods: [155, 159, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 13m 37sRunning iteration 101/1500... Est. remaining: 13m 22sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 7sRunning iteration 121/1500... Est. remaining: 12m 55sRunning iteration 131/1500... Est. remaining: 12m 43sRunning iteration 141/1500... Est. remaining: 12m 33sRunning iteration 151/1500... Est. remaining: 12m 22sRunning iteration 161/1500... Est. remaining: 12m 13sRunning iteration 171/1500... Est. remaining: 12m 4sRunning iteration 181/1500... Est. remaining: 11m 55sRunning iteration 191/1500... Est. remaining: 11m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,526,309,422
Annual Return: 47.15%
Sharpe Ratio: 1.55270
Sortino Ratio: 1.513
Max Drawdown: -57.3%
Avg Drawdown: -11.5%
Normalized Score: 0.568
Lookback periods: [138, 152, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 11m 48sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 39sRunning iteration 221/1500... Est. remaining: 11m 32sRunning iteration 231/1500... Est. remaining: 11m 25sRunning iteration 241/1500... Est. remaining: 11m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,757,258,274
Annual Return: 41.69%
Sharpe Ratio: 1.49806
Sortino Ratio: 1.398
Max Drawdown: -35.6%
Avg Drawdown: -9.5%
Normalized Score: 0.833
Lookback periods: [50, 55, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/1500... Est. remaining: 11m 17sRunning iteration 261/1500... Est. remaining: 11m 10sRunning iteration 271/1500... Est. remaining: 11m 3sRunning iteration 281/1500... Est. remaining: 10m 56sRunning iteration 291/1500... Est. remaining: 10m 50sRunning iteration 301/1500... Est. remaining: 10m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 36sRunning iteration 321/1500... Est. remaining: 10m 31sRunning iteration 331/1500... Est. remaining: 10m 24sRunning iteration 341/1500... Est. remaining: 10m 18sRunning iteration 351/1500... Est. remaining: 10m 12sRunning iteration 361/1500... Est. remaining: 10m 5sRunning iteration 371/1500... Est. remaining: 9m 59sRunning iteration 381/1500... Est. remaining: 9m 53sRunning iteration 391/1500... Est. remaining: 9m 47sRunning iteration 401/1500... Est. remaining: 9m 42sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 36sRunning iteration 421/1500... Est. remaining: 9m 30sRunning iteration 431/1500... Est. remaining: 9m 24sRunning iteration 441/1500... Est. remaining: 9m 18sRunning iteration 451/1500... Est. remaining: 9m 12sRunning iteration 461/1500... Est. remaining: 9m 6sRunning iteration 471/1500... Est. remaining: 9m 1sRunning iteration 481/1500... Est. remaining: 8m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,395,494,535
Annual Return: 42.96%
Sharpe Ratio: 1.54322
Sortino Ratio: 1.444
Max Drawdown: -37.2%
Avg Drawdown: -9.2%
Normalized Score: 1.070
Lookback periods: [51, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 8m 52sRunning iteration 501/1500... Est. remaining: 8m 47sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 41sRunning iteration 521/1500... Est. remaining: 8m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,460,491,708
Annual Return: 44.48%
Sharpe Ratio: 1.60922
Sortino Ratio: 1.516
Max Drawdown: -37.5%
Avg Drawdown: -8.5%
Normalized Score: 1.500
Lookback periods: [52, 52, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 531/1500... Est. remaining: 8m 32sRunning iteration 541/1500... Est. remaining: 8m 26sRunning iteration 551/1500... Est. remaining: 8m 20sRunning iteration 561/1500... Est. remaining: 8m 15sRunning iteration 571/1500... Est. remaining: 8m 9sRunning iteration 581/1500... Est. remaining: 8m 3sRunning iteration 591/1500... Est. remaining: 7m 58sRunning iteration 601/1500... Est. remaining: 7m 53sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 48sRunning iteration 621/1500... Est. remaining: 7m 42sRunning iteration 631/1500... Est. remaining: 7m 37sRunning iteration 641/1500... Est. remaining: 7m 31sRunning iteration 651/1500... Est. remaining: 7m 26sRunning iteration 661/1500... Est. remaining: 7m 20sRunning iteration 671/1500... Est. remaining: 7m 14sRunning iteration 681/1500... Est. remaining: 7m 9sRunning iteration 691/1500... Est. remaining: 7m 3sRunning iteration 701/1500... Est. remaining: 6m 58sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 52sRunning iteration 721/1500... Est. remaining: 6m 47sRunning iteration 731/1500... Est. remaining: 6m 42sRunning iteration 741/1500... Est. remaining: 6m 36sRunning iteration 751/1500... Est. remaining: 6m 31sRunning iteration 761/1500... Est. remaining: 6m 26sRunning iteration 771/1500... Est. remaining: 6m 20sRunning iteration 781/1500... Est. remaining: 6m 15sRunning iteration 791/1500... Est. remaining: 6m 10sRunning iteration 801/1500... Est. remaining: 6m 5sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 59sRunning iteration 821/1500... Est. remaining: 5m 54sRunning iteration 831/1500... Est. remaining: 5m 49sRunning iteration 841/1500... Est. remaining: 5m 44sRunning iteration 851/1500... Est. remaining: 5m 38sRunning iteration 861/1500... Est. remaining: 5m 33sRunning iteration 871/1500... Est. remaining: 5m 28sRunning iteration 881/1500... Est. remaining: 5m 22sRunning iteration 891/1500... Est. remaining: 5m 17sRunning iteration 901/1500... Est. remaining: 5m 12sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 7sRunning iteration 921/1500... Est. remaining: 5m 1sRunning iteration 931/1500... Est. remaining: 4m 56sRunning iteration 941/1500... Est. remaining: 4m 51sRunning iteration 951/1500... Est. remaining: 4m 45sRunning iteration 961/1500... Est. remaining: 4m 40sRunning iteration 971/1500... Est. remaining: 4m 35sRunning iteration 981/1500... Est. remaining: 4m 29sRunning iteration 991/1500... Est. remaining: 4m 24sRunning iteration 1001/1500... Est. remaining: 4m 19sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 14sRunning iteration 1021/1500... Est. remaining: 4m 8sRunning iteration 1031/1500... Est. remaining: 4m 3sRunning iteration 1041/1500... Est. remaining: 3m 58sRunning iteration 1051/1500... Est. remaining: 3m 53sRunning iteration 1061/1500... Est. remaining: 3m 47sRunning iteration 1071/1500... Est. remaining: 3m 42sRunning iteration 1081/1500... Est. remaining: 3m 37sRunning iteration 1091/1500... Est. remaining: 3m 32sRunning iteration 1101/1500... Est. remaining: 3m 26sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 21sRunning iteration 1121/1500... Est. remaining: 3m 16sRunning iteration 1131/1500... Est. remaining: 3m 11sRunning iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 0sRunning iteration 1161/1500... Est. remaining: 2m 55sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 39sRunning iteration 1201/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 8sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 42sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 37sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.016
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 6sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 2.02
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [52, 52, 98] (score: 2.0164)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Sun Aug 24 23:40:07 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $101,553,471
Annual Return: 30.50%
Sharpe Ratio: 1.06204
Sortino Ratio: 0.967
Max Drawdown: -62.2%
Avg Drawdown: -15.5%
Normalized Score: -3.201
Lookback periods: [71, 78, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,190,791,366
Annual Return: 40.10%
Sharpe Ratio: 1.36882
Sortino Ratio: 1.295
Max Drawdown: -57.2%
Avg Drawdown: -13.0%
Normalized Score: -0.871
Lookback periods: [93, 112, 133] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,635,599,217
Annual Return: 46.53%
Sharpe Ratio: 1.53826
Sortino Ratio: 1.493
Max Drawdown: -63.5%
Avg Drawdown: -11.8%
Normalized Score: 0.222
Lookback periods: [129, 153, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,632,604,566
Annual Return: 46.53%
Sharpe Ratio: 1.53948
Sortino Ratio: 1.491
Max Drawdown: -56.8%
Avg Drawdown: -11.3%
Normalized Score: 0.521
Lookback periods: [139, 157, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 31m 59sRunning iteration 21/1500... Est. remaining: 21m 59sRunning iteration 31/1500... Est. remaining: 18m 33sRunning iteration 41/1500... Est. remaining: 16m 59sRunning iteration 51/1500... Est. remaining: 15m 59sRunning iteration 61/1500... Est. remaining: 15m 12sRunning iteration 71/1500... Est. remaining: 14m 36sRunning iteration 81/1500... Est. remaining: 14m 11sRunning iteration 91/1500... Est. remaining: 13m 52sRunning iteration 101/1500... Est. remaining: 13m 36sbest_combination: {'lookbacks': [139, 157, 166], 'score': np.float64(0.5210538196430018), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 22sRunning iteration 121/1500... Est. remaining: 13m 10sRunning iteration 131/1500... Est. remaining: 12m 59sRunning iteration 141/1500... Est. remaining: 12m 48sRunning iteration 151/1500... Est. remaining: 12m 37sRunning iteration 161/1500... Est. remaining: 12m 27sRunning iteration 171/1500... Est. remaining: 12m 17sRunning iteration 181/1500... Est. remaining: 12m 8sRunning iteration 191/1500... Est. remaining: 11m 59sRunning iteration 201/1500... Est. remaining: 11m 51sbest_combination: {'lookbacks': [139, 157, 166], 'score': np.float64(0.5210538196430018), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 43sRunning iteration 221/1500... Est. remaining: 11m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,378,017,214
Annual Return: 48.22%
Sharpe Ratio: 1.56127
Sortino Ratio: 1.517
Max Drawdown: -60.2%
Avg Drawdown: -11.2%
Normalized Score: 0.641
Lookback periods: [184, 189, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 11m 35sRunning iteration 241/1500... Est. remaining: 11m 28sRunning iteration 251/1500... Est. remaining: 11m 21sRunning iteration 261/1500... Est. remaining: 11m 14sRunning iteration 271/1500... Est. remaining: 11m 7sRunning iteration 281/1500... Est. remaining: 11m 0sRunning iteration 291/1500... Est. remaining: 10m 54sRunning iteration 301/1500... Est. remaining: 10m 47sbest_combination: {'lookbacks': [184, 189, 197], 'score': np.float64(0.6412978111539724), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 40sRunning iteration 321/1500... Est. remaining: 10m 34sRunning iteration 331/1500... Est. remaining: 10m 28sRunning iteration 341/1500... Est. remaining: 10m 22sRunning iteration 351/1500... Est. remaining: 10m 15sRunning iteration 361/1500... Est. remaining: 10m 9sRunning iteration 371/1500... Est. remaining: 10m 4sRunning iteration 381/1500... Est. remaining: 9m 58sRunning iteration 391/1500... Est. remaining: 9m 52sRunning iteration 401/1500... Est. remaining: 9m 46sbest_combination: {'lookbacks': [184, 189, 197], 'score': np.float64(0.6412978111539724), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,767,869,681
Annual Return: 48.41%
Sharpe Ratio: 1.59819
Sortino Ratio: 1.558
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: 0.849
Lookback periods: [130, 132, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 9m 39sRunning iteration 431/1500... Est. remaining: 9m 33sRunning iteration 441/1500... Est. remaining: 9m 27sRunning iteration 451/1500... Est. remaining: 9m 21sRunning iteration 461/1500... Est. remaining: 9m 15sRunning iteration 471/1500... Est. remaining: 9m 9sRunning iteration 481/1500... Est. remaining: 9m 3sRunning iteration 491/1500... Est. remaining: 8m 58sRunning iteration 501/1500... Est. remaining: 8m 52sbest_combination: {'lookbacks': [130, 132, 134], 'score': np.float64(0.8488003747472843), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 46sRunning iteration 521/1500... Est. remaining: 8m 41sRunning iteration 531/1500... Est. remaining: 8m 35sRunning iteration 541/1500... Est. remaining: 8m 30sRunning iteration 551/1500... Est. remaining: 8m 24sRunning iteration 561/1500... Est. remaining: 8m 18sRunning iteration 571/1500... Est. remaining: 8m 13sRunning iteration 581/1500... Est. remaining: 8m 7sRunning iteration 591/1500... Est. remaining: 8m 2sRunning iteration 601/1500... Est. remaining: 7m 57sbest_combination: {'lookbacks': [130, 132, 134], 'score': np.float64(0.8488003747472843), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 52sRunning iteration 621/1500... Est. remaining: 7m 46sRunning iteration 631/1500... Est. remaining: 7m 41sRunning iteration 641/1500... Est. remaining: 7m 35sRunning iteration 651/1500... Est. remaining: 7m 30sRunning iteration 661/1500... Est. remaining: 7m 25sRunning iteration 671/1500... Est. remaining: 7m 19sRunning iteration 681/1500... Est. remaining: 7m 14sRunning iteration 691/1500... Est. remaining: 7m 8sRunning iteration 701/1500... Est. remaining: 7m 3sbest_combination: {'lookbacks': [130, 132, 134], 'score': np.float64(0.8488003747472843), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 58sRunning iteration 721/1500... Est. remaining: 6m 52sRunning iteration 731/1500... Est. remaining: 6m 47sRunning iteration 741/1500... Est. remaining: 6m 42sRunning iteration 751/1500... Est. remaining: 6m 37sRunning iteration 761/1500... Est. remaining: 6m 31sRunning iteration 771/1500... Est. remaining: 6m 26sRunning iteration 781/1500... Est. remaining: 6m 21sRunning iteration 791/1500... Est. remaining: 6m 15sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [130, 132, 134], 'score': np.float64(0.8488003747472843), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 5sRunning iteration 821/1500... Est. remaining: 5m 59sRunning iteration 831/1500... Est. remaining: 5m 54sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 27sRunning iteration 891/1500... Est. remaining: 5m 22sRunning iteration 901/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [130, 132, 134], 'score': np.float64(0.8488003747472843), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 11sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 55sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 44sRunning iteration 971/1500... Est. remaining: 4m 39sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [130, 132, 134], 'score': np.float64(0.8488003747472843), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 40sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [130, 132, 134], 'score': np.float64(0.8488003747472843), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 8sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 57sRunning iteration 1171/1500... Est. remaining: 2m 52sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,077,303,633
Annual Return: 49.01%
Sharpe Ratio: 1.60306
Sortino Ratio: 1.570
Max Drawdown: -55.0%
Avg Drawdown: -11.9%
Normalized Score: 0.904
Lookback periods: [130, 131, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [130, 131, 136], 'score': np.float64(0.9037027463126277), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 31sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [130, 131, 136], 'score': np.float64(0.9037027463126277), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [130, 131, 136], 'score': np.float64(0.9037027463126277), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 0.90
best_combination: {'lookbacks': [130, 131, 136], 'score': np.float64(0.9037027463126277), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [130, 131, 136] (score: 0.9037)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [130, 131, 136] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 110 selections (26.4%)
2. naz100_hma: 102 selections (24.5%)
3. naz100_pi: 88 selections (21.2%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,077,303,633.06
Average Annualized Gain: 49.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Sun Aug 24 23:53:17 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $540,691,966
Annual Return: 36.95%
Sharpe Ratio: 1.28952
Sortino Ratio: 1.198
Max Drawdown: -52.3%
Avg Drawdown: -12.0%
Normalized Score: -1.101
Lookback periods: [83, 91, 141] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,613,792,987
Annual Return: 43.32%
Sharpe Ratio: 1.44480
Sortino Ratio: 1.397
Max Drawdown: -67.1%
Avg Drawdown: -12.5%
Normalized Score: -0.575
Lookback periods: [116, 167, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,669,710,836
Annual Return: 43.41%
Sharpe Ratio: 1.44119
Sortino Ratio: 1.397
Max Drawdown: -60.4%
Avg Drawdown: -12.4%
Normalized Score: -0.334
Lookback periods: [113, 134, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,028,003,621
Annual Return: 45.12%
Sharpe Ratio: 1.46571
Sortino Ratio: 1.438
Max Drawdown: -62.5%
Avg Drawdown: -12.8%
Normalized Score: -0.202
Lookback periods: [150, 153, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,344,300,695
Annual Return: 44.34%
Sharpe Ratio: 1.45293
Sortino Ratio: 1.407
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: -0.030
Lookback periods: [166, 168, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 24m 11sRunning iteration 31/1500... Est. remaining: 20m 6sRunning iteration 41/1500... Est. remaining: 18m 8sRunning iteration 51/1500... Est. remaining: 16m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,565,256,679
Annual Return: 45.64%
Sharpe Ratio: 1.48571
Sortino Ratio: 1.441
Max Drawdown: -61.3%
Avg Drawdown: -11.9%
Normalized Score: 0.044
Lookback periods: [155, 157, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,852,914,847
Annual Return: 41.90%
Sharpe Ratio: 1.44986
Sortino Ratio: 1.375
Max Drawdown: -52.3%
Avg Drawdown: -10.2%
Normalized Score: 0.105
Lookback periods: [85, 88, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 16m 6sRunning iteration 81/1500... Est. remaining: 15m 31sRunning iteration 91/1500... Est. remaining: 15m 3sRunning iteration 101/1500... Est. remaining: 14m 40sbest_combination: {'lookbacks': [85, 88, 146], 'score': np.float64(0.10461116877079317), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,821,862,271
Annual Return: 46.67%
Sharpe Ratio: 1.53307
Sortino Ratio: 1.488
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 0.520
Lookback periods: [139, 156, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 35sRunning iteration 121/1500... Est. remaining: 14m 16sRunning iteration 131/1500... Est. remaining: 13m 59sRunning iteration 141/1500... Est. remaining: 13m 43sRunning iteration 151/1500... Est. remaining: 13m 29sRunning iteration 161/1500... Est. remaining: 13m 16sRunning iteration 171/1500... Est. remaining: 13m 4sRunning iteration 181/1500... Est. remaining: 12m 53sRunning iteration 191/1500... Est. remaining: 12m 44sRunning iteration 201/1500... Est. remaining: 12m 33sbest_combination: {'lookbacks': [139, 156, 159], 'score': np.float64(0.5203247860953005), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 24sRunning iteration 221/1500... Est. remaining: 12m 14sRunning iteration 231/1500... Est. remaining: 12m 5sRunning iteration 241/1500... Est. remaining: 11m 57sRunning iteration 251/1500... Est. remaining: 11m 49sRunning iteration 261/1500... Est. remaining: 11m 41sRunning iteration 271/1500... Est. remaining: 11m 32sRunning iteration 281/1500... Est. remaining: 11m 25sRunning iteration 291/1500... Est. remaining: 11m 17sRunning iteration 301/1500... Est. remaining: 11m 10sbest_combination: {'lookbacks': [139, 156, 159], 'score': np.float64(0.5203247860953005), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 2sRunning iteration 321/1500... Est. remaining: 10m 55sRunning iteration 331/1500... Est. remaining: 10m 48sRunning iteration 341/1500... Est. remaining: 10m 41sRunning iteration 351/1500... Est. remaining: 10m 34sRunning iteration 361/1500... Est. remaining: 10m 28sRunning iteration 371/1500... Est. remaining: 10m 21sRunning iteration 381/1500... Est. remaining: 10m 14sRunning iteration 391/1500... Est. remaining: 10m 8sRunning iteration 401/1500... Est. remaining: 10m 1sbest_combination: {'lookbacks': [139, 156, 159], 'score': np.float64(0.5203247860953005), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 55sRunning iteration 421/1500... Est. remaining: 9m 48sRunning iteration 431/1500... Est. remaining: 9m 42sRunning iteration 441/1500... Est. remaining: 9m 36sRunning iteration 451/1500... Est. remaining: 9m 30sRunning iteration 461/1500... Est. remaining: 9m 24sRunning iteration 471/1500... Est. remaining: 9m 18sRunning iteration 481/1500... Est. remaining: 9m 12sRunning iteration 491/1500... Est. remaining: 9m 6sRunning iteration 501/1500... Est. remaining: 9m 0sbest_combination: {'lookbacks': [139, 156, 159], 'score': np.float64(0.5203247860953005), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 54sRunning iteration 521/1500... Est. remaining: 8m 48sRunning iteration 531/1500... Est. remaining: 8m 43sRunning iteration 541/1500... Est. remaining: 8m 37sRunning iteration 551/1500... Est. remaining: 8m 31sRunning iteration 561/1500... Est. remaining: 8m 26sRunning iteration 571/1500... Est. remaining: 8m 20sRunning iteration 581/1500... Est. remaining: 8m 15sRunning iteration 591/1500... Est. remaining: 8m 9sRunning iteration 601/1500... Est. remaining: 8m 3sbest_combination: {'lookbacks': [139, 156, 159], 'score': np.float64(0.5203247860953005), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 58sRunning iteration 621/1500... Est. remaining: 7m 52sRunning iteration 631/1500... Est. remaining: 7m 46sRunning iteration 641/1500... Est. remaining: 7m 40sRunning iteration 651/1500... Est. remaining: 7m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,621,769,496
Annual Return: 48.34%
Sharpe Ratio: 1.58311
Sortino Ratio: 1.543
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.771
Lookback periods: [135, 156, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/1500... Est. remaining: 7m 30sRunning iteration 671/1500... Est. remaining: 7m 25sRunning iteration 681/1500... Est. remaining: 7m 19sRunning iteration 691/1500... Est. remaining: 7m 14sRunning iteration 701/1500... Est. remaining: 7m 8sbest_combination: {'lookbacks': [135, 156, 199], 'score': np.float64(0.7705654437338405), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 3sRunning iteration 721/1500... Est. remaining: 6m 58sRunning iteration 731/1500... Est. remaining: 6m 52sRunning iteration 741/1500... Est. remaining: 6m 46sRunning iteration 751/1500... Est. remaining: 6m 41sRunning iteration 761/1500... Est. remaining: 6m 35sRunning iteration 771/1500... Est. remaining: 6m 30sRunning iteration 781/1500... Est. remaining: 6m 24sRunning iteration 791/1500... Est. remaining: 6m 19sRunning iteration 801/1500... Est. remaining: 6m 13sbest_combination: {'lookbacks': [135, 156, 199], 'score': np.float64(0.7705654437338405), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,353,222,145
Annual Return: 48.20%
Sharpe Ratio: 1.56658
Sortino Ratio: 1.532
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.891
Lookback periods: [156, 161, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,555,796,559
Annual Return: 41.19%
Sharpe Ratio: 1.50546
Sortino Ratio: 1.406
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.010
Lookback periods: [50, 58, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 811/1500... Est. remaining: 6m 9sRunning iteration 821/1500... Est. remaining: 6m 4sRunning iteration 831/1500... Est. remaining: 5m 58sRunning iteration 841/1500... Est. remaining: 5m 53sRunning iteration 851/1500... Est. remaining: 5m 47sRunning iteration 861/1500... Est. remaining: 5m 42sRunning iteration 871/1500... Est. remaining: 5m 36sRunning iteration 881/1500... Est. remaining: 5m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,613,029,033
Annual Return: 43.32%
Sharpe Ratio: 1.58577
Sortino Ratio: 1.485
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.415
Lookback periods: [50, 57, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 5m 26sRunning iteration 901/1500... Est. remaining: 5m 21sbest_combination: {'lookbacks': [50, 57, 96], 'score': np.float64(1.4153394253918807), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,293,289,579
Annual Return: 44.28%
Sharpe Ratio: 1.58522
Sortino Ratio: 1.495
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.466
Lookback periods: [50, 53, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.673
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 921/1500... Est. remaining: 5m 11sRunning iteration 931/1500... Est. remaining: 5m 6sRunning iteration 941/1500... Est. remaining: 5m 0sRunning iteration 951/1500... Est. remaining: 4m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.747
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 961/1500... Est. remaining: 4m 50sRunning iteration 971/1500... Est. remaining: 4m 44sRunning iteration 981/1500... Est. remaining: 4m 39sRunning iteration 991/1500... Est. remaining: 4m 33sRunning iteration 1001/1500... Est. remaining: 4m 28sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 22sRunning iteration 1021/1500... Est. remaining: 4m 17sRunning iteration 1031/1500... Est. remaining: 4m 11sRunning iteration 1041/1500... Est. remaining: 4m 6sRunning iteration 1051/1500... Est. remaining: 4m 1sRunning iteration 1061/1500... Est. remaining: 3m 55sRunning iteration 1071/1500... Est. remaining: 3m 50sRunning iteration 1081/1500... Est. remaining: 3m 44sRunning iteration 1091/1500... Est. remaining: 3m 39sRunning iteration 1101/1500... Est. remaining: 3m 33sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 28sRunning iteration 1121/1500... Est. remaining: 3m 23sRunning iteration 1131/1500... Est. remaining: 3m 17sRunning iteration 1141/1500... Est. remaining: 3m 12sRunning iteration 1151/1500... Est. remaining: 3m 6sRunning iteration 1161/1500... Est. remaining: 3m 1sRunning iteration 1171/1500... Est. remaining: 2m 55sRunning iteration 1181/1500... Est. remaining: 2m 50sRunning iteration 1191/1500... Est. remaining: 2m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1201/1500... Est. remaining: 2m 40sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 34sRunning iteration 1221/1500... Est. remaining: 2m 29sRunning iteration 1231/1500... Est. remaining: 2m 23sRunning iteration 1241/1500... Est. remaining: 2m 18sRunning iteration 1251/1500... Est. remaining: 2m 13sRunning iteration 1261/1500... Est. remaining: 2m 8sRunning iteration 1271/1500... Est. remaining: 2m 2sRunning iteration 1281/1500... Est. remaining: 1m 57sRunning iteration 1291/1500... Est. remaining: 1m 51sRunning iteration 1301/1500... Est. remaining: 1m 46sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 41sRunning iteration 1321/1500... Est. remaining: 1m 35sRunning iteration 1331/1500... Est. remaining: 1m 30sRunning iteration 1341/1500... Est. remaining: 1m 25sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 14sRunning iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.3 minutes
Best normalized score: 1.94
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9365)

Monte Carlo simulation completed in 13.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 00:06:41 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $581,578,608
Annual Return: 37.24%
Sharpe Ratio: 1.29521
Sortino Ratio: 1.209
Max Drawdown: -52.3%
Avg Drawdown: -13.5%
Normalized Score: -1.282
Lookback periods: [86, 91, 120] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,889,547,899
Annual Return: 43.73%
Sharpe Ratio: 1.42578
Sortino Ratio: 1.388
Max Drawdown: -61.6%
Avg Drawdown: -12.1%
Normalized Score: -0.326
Lookback periods: [156, 183, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 26m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,015,149,814
Annual Return: 46.81%
Sharpe Ratio: 1.53615
Sortino Ratio: 1.503
Max Drawdown: -56.6%
Avg Drawdown: -12.2%
Normalized Score: 0.422
Lookback periods: [128, 129, 133] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 20m 40sRunning iteration 31/1500... Est. remaining: 17m 59sRunning iteration 41/1500... Est. remaining: 16m 32sRunning iteration 51/1500... Est. remaining: 15m 29sRunning iteration 61/1500... Est. remaining: 14m 50sRunning iteration 71/1500... Est. remaining: 14m 20sRunning iteration 81/1500... Est. remaining: 13m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,561,636,729
Annual Return: 47.18%
Sharpe Ratio: 1.53902
Sortino Ratio: 1.505
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.721
Lookback periods: [156, 163, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 13m 58sRunning iteration 101/1500... Est. remaining: 13m 42sbest_combination: {'lookbacks': [156, 163, 173], 'score': np.float64(0.7210082022402255), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 27sRunning iteration 121/1500... Est. remaining: 13m 12sRunning iteration 131/1500... Est. remaining: 13m 0sRunning iteration 141/1500... Est. remaining: 12m 49sRunning iteration 151/1500... Est. remaining: 12m 39sRunning iteration 161/1500... Est. remaining: 12m 30sRunning iteration 171/1500... Est. remaining: 12m 22sRunning iteration 181/1500... Est. remaining: 12m 13sRunning iteration 191/1500... Est. remaining: 12m 4sRunning iteration 201/1500... Est. remaining: 11m 56sbest_combination: {'lookbacks': [156, 163, 173], 'score': np.float64(0.7210082022402255), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 48sRunning iteration 221/1500... Est. remaining: 11m 41sRunning iteration 231/1500... Est. remaining: 11m 34sRunning iteration 241/1500... Est. remaining: 11m 27sRunning iteration 251/1500... Est. remaining: 11m 20sRunning iteration 261/1500... Est. remaining: 11m 13sRunning iteration 271/1500... Est. remaining: 11m 6sRunning iteration 281/1500... Est. remaining: 11m 0sRunning iteration 291/1500... Est. remaining: 10m 54sRunning iteration 301/1500... Est. remaining: 10m 48sbest_combination: {'lookbacks': [156, 163, 173], 'score': np.float64(0.7210082022402255), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 42sRunning iteration 321/1500... Est. remaining: 10m 36sRunning iteration 331/1500... Est. remaining: 10m 29sRunning iteration 341/1500... Est. remaining: 10m 23sRunning iteration 351/1500... Est. remaining: 10m 17sRunning iteration 361/1500... Est. remaining: 10m 10sRunning iteration 371/1500... Est. remaining: 10m 4sRunning iteration 381/1500... Est. remaining: 9m 58sRunning iteration 391/1500... Est. remaining: 9m 52sRunning iteration 401/1500... Est. remaining: 9m 47sbest_combination: {'lookbacks': [156, 163, 173], 'score': np.float64(0.7210082022402255), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 41sRunning iteration 421/1500... Est. remaining: 9m 35sRunning iteration 431/1500... Est. remaining: 9m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,127,404,353
Annual Return: 49.44%
Sharpe Ratio: 1.62901
Sortino Ratio: 1.584
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 1.087
Lookback periods: [136, 157, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 27sRunning iteration 451/1500... Est. remaining: 9m 21sRunning iteration 461/1500... Est. remaining: 9m 15sRunning iteration 471/1500... Est. remaining: 9m 9sRunning iteration 481/1500... Est. remaining: 9m 4sRunning iteration 491/1500... Est. remaining: 8m 58sRunning iteration 501/1500... Est. remaining: 8m 52sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0869008159981495), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 46sRunning iteration 521/1500... Est. remaining: 8m 41sRunning iteration 531/1500... Est. remaining: 8m 35sRunning iteration 541/1500... Est. remaining: 8m 30sRunning iteration 551/1500... Est. remaining: 8m 24sRunning iteration 561/1500... Est. remaining: 8m 18sRunning iteration 571/1500... Est. remaining: 8m 13sRunning iteration 581/1500... Est. remaining: 8m 7sRunning iteration 591/1500... Est. remaining: 8m 2sRunning iteration 601/1500... Est. remaining: 7m 57sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0869008159981495), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 51sRunning iteration 621/1500... Est. remaining: 7m 46sRunning iteration 631/1500... Est. remaining: 7m 40sRunning iteration 641/1500... Est. remaining: 7m 35sRunning iteration 651/1500... Est. remaining: 7m 29sRunning iteration 661/1500... Est. remaining: 7m 24sRunning iteration 671/1500... Est. remaining: 7m 18sRunning iteration 681/1500... Est. remaining: 7m 13sRunning iteration 691/1500... Est. remaining: 7m 7sRunning iteration 701/1500... Est. remaining: 7m 2sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0869008159981495), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 57sRunning iteration 721/1500... Est. remaining: 6m 51sRunning iteration 731/1500... Est. remaining: 6m 46sRunning iteration 741/1500... Est. remaining: 6m 40sRunning iteration 751/1500... Est. remaining: 6m 35sRunning iteration 761/1500... Est. remaining: 6m 30sRunning iteration 771/1500... Est. remaining: 6m 24sRunning iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 14sRunning iteration 801/1500... Est. remaining: 6m 9sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0869008159981495), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 42sRunning iteration 861/1500... Est. remaining: 5m 37sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 26sRunning iteration 891/1500... Est. remaining: 5m 21sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0869008159981495), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 10sRunning iteration 921/1500... Est. remaining: 5m 5sRunning iteration 931/1500... Est. remaining: 5m 0sRunning iteration 941/1500... Est. remaining: 4m 54sRunning iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 44sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 33sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0869008159981495), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 17sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0869008159981495), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 15sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 59sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0869008159981495), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 22sRunning iteration 1241/1500... Est. remaining: 2m 17sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 1sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 45sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0869008159981495), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 40sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 24sRunning iteration 1351/1500... Est. remaining: 1m 19sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 3sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0869008159981495), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.2 minutes
Best normalized score: 1.09
best_combination: {'lookbacks': [136, 157, 179], 'score': np.float64(1.0869008159981495), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 157, 179] (score: 1.0869)

Monte Carlo simulation completed in 13.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 157, 179] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 41 selections (9.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,127,404,352.86
Average Annualized Gain: 49.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 00:19:58 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $227,668,960
Annual Return: 33.57%
Sharpe Ratio: 1.14905
Sortino Ratio: 1.064
Max Drawdown: -55.0%
Avg Drawdown: -15.5%
Normalized Score: -2.411
Lookback periods: [72, 125, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $900,380,033
Annual Return: 38.98%
Sharpe Ratio: 1.32365
Sortino Ratio: 1.248
Max Drawdown: -56.1%
Avg Drawdown: -12.5%
Normalized Score: -0.995
Lookback periods: [104, 112, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,532,673,142
Annual Return: 41.13%
Sharpe Ratio: 1.38670
Sortino Ratio: 1.308
Max Drawdown: -63.2%
Avg Drawdown: -11.3%
Normalized Score: -0.679
Lookback periods: [50, 158, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,781,638,091
Annual Return: 44.85%
Sharpe Ratio: 1.45524
Sortino Ratio: 1.428
Max Drawdown: -59.0%
Avg Drawdown: -11.2%
Normalized Score: 0.101
Lookback periods: [153, 170, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,139,901,777
Annual Return: 42.49%
Sharpe Ratio: 1.51797
Sortino Ratio: 1.422
Max Drawdown: -39.7%
Avg Drawdown: -9.5%
Normalized Score: 0.826
Lookback periods: [50, 52, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 35m 23sRunning iteration 21/1500... Est. remaining: 23m 52sRunning iteration 31/1500... Est. remaining: 19m 53sRunning iteration 41/1500... Est. remaining: 17m 53sRunning iteration 51/1500... Est. remaining: 16m 40sRunning iteration 61/1500... Est. remaining: 15m 50sRunning iteration 71/1500... Est. remaining: 15m 12sRunning iteration 81/1500... Est. remaining: 14m 43sRunning iteration 91/1500... Est. remaining: 14m 19sRunning iteration 101/1500... Est. remaining: 13m 59sbest_combination: {'lookbacks': [50, 52, 87], 'score': np.float64(0.8262821524263156), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 42sRunning iteration 121/1500... Est. remaining: 13m 28sRunning iteration 131/1500... Est. remaining: 13m 14sRunning iteration 141/1500... Est. remaining: 13m 3sRunning iteration 151/1500... Est. remaining: 12m 51sRunning iteration 161/1500... Est. remaining: 12m 40sRunning iteration 171/1500... Est. remaining: 12m 30sRunning iteration 181/1500... Est. remaining: 12m 20sRunning iteration 191/1500... Est. remaining: 12m 11sRunning iteration 201/1500... Est. remaining: 12m 3sbest_combination: {'lookbacks': [50, 52, 87], 'score': np.float64(0.8262821524263156), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 55sRunning iteration 221/1500... Est. remaining: 11m 49sRunning iteration 231/1500... Est. remaining: 11m 42sRunning iteration 241/1500... Est. remaining: 11m 35sRunning iteration 251/1500... Est. remaining: 11m 28sRunning iteration 261/1500... Est. remaining: 11m 21sRunning iteration 271/1500... Est. remaining: 11m 14sRunning iteration 281/1500... Est. remaining: 11m 7sRunning iteration 291/1500... Est. remaining: 10m 59sRunning iteration 301/1500... Est. remaining: 10m 54sbest_combination: {'lookbacks': [50, 52, 87], 'score': np.float64(0.8262821524263156), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 47sRunning iteration 321/1500... Est. remaining: 10m 41sRunning iteration 331/1500... Est. remaining: 10m 34sRunning iteration 341/1500... Est. remaining: 10m 29sRunning iteration 351/1500... Est. remaining: 10m 23sRunning iteration 361/1500... Est. remaining: 10m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,443,425,144
Annual Return: 43.04%
Sharpe Ratio: 1.53798
Sortino Ratio: 1.441
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 1.140
Lookback periods: [51, 53, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 371/1500... Est. remaining: 10m 14sRunning iteration 381/1500... Est. remaining: 10m 8sRunning iteration 391/1500... Est. remaining: 10m 2sRunning iteration 401/1500... Est. remaining: 9m 56sbest_combination: {'lookbacks': [51, 53, 101], 'score': np.float64(1.1400261602580744), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 50sRunning iteration 421/1500... Est. remaining: 9m 44sRunning iteration 431/1500... Est. remaining: 9m 38sRunning iteration 441/1500... Est. remaining: 9m 31sRunning iteration 451/1500... Est. remaining: 9m 26sRunning iteration 461/1500... Est. remaining: 9m 20sRunning iteration 471/1500... Est. remaining: 9m 14sRunning iteration 481/1500... Est. remaining: 9m 8sRunning iteration 491/1500... Est. remaining: 9m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,899,750,931
Annual Return: 43.75%
Sharpe Ratio: 1.57135
Sortino Ratio: 1.477
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.421
Lookback periods: [50, 52, 101] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 8m 59sbest_combination: {'lookbacks': [50, 52, 101], 'score': np.float64(1.4210263107899608), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 53sRunning iteration 521/1500... Est. remaining: 8m 48sRunning iteration 531/1500... Est. remaining: 8m 43sRunning iteration 541/1500... Est. remaining: 8m 38sRunning iteration 551/1500... Est. remaining: 8m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.747
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 8m 29sRunning iteration 571/1500... Est. remaining: 8m 23sRunning iteration 581/1500... Est. remaining: 8m 18sRunning iteration 591/1500... Est. remaining: 8m 12sRunning iteration 601/1500... Est. remaining: 8m 6sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 611/1500... Est. remaining: 8m 1sRunning iteration 621/1500... Est. remaining: 7m 55sRunning iteration 631/1500... Est. remaining: 7m 49sRunning iteration 641/1500... Est. remaining: 7m 44sRunning iteration 651/1500... Est. remaining: 7m 38sRunning iteration 661/1500... Est. remaining: 7m 33sRunning iteration 671/1500... Est. remaining: 7m 27sRunning iteration 681/1500... Est. remaining: 7m 22sRunning iteration 691/1500... Est. remaining: 7m 16sRunning iteration 701/1500... Est. remaining: 7m 11sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 5sRunning iteration 721/1500... Est. remaining: 7m 0sRunning iteration 731/1500... Est. remaining: 6m 55sRunning iteration 741/1500... Est. remaining: 6m 50sRunning iteration 751/1500... Est. remaining: 6m 44sRunning iteration 761/1500... Est. remaining: 6m 39sRunning iteration 771/1500... Est. remaining: 6m 34sRunning iteration 781/1500... Est. remaining: 6m 28sRunning iteration 791/1500... Est. remaining: 6m 23sRunning iteration 801/1500... Est. remaining: 6m 18sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 13sRunning iteration 821/1500... Est. remaining: 6m 7sRunning iteration 831/1500... Est. remaining: 6m 2sRunning iteration 841/1500... Est. remaining: 5m 57sRunning iteration 851/1500... Est. remaining: 5m 51sRunning iteration 861/1500... Est. remaining: 5m 46sRunning iteration 871/1500... Est. remaining: 5m 41sRunning iteration 881/1500... Est. remaining: 5m 35sRunning iteration 891/1500... Est. remaining: 5m 30sRunning iteration 901/1500... Est. remaining: 5m 25sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 20sRunning iteration 921/1500... Est. remaining: 5m 15sRunning iteration 931/1500... Est. remaining: 5m 9sRunning iteration 941/1500... Est. remaining: 5m 4sRunning iteration 951/1500... Est. remaining: 4m 58sRunning iteration 961/1500... Est. remaining: 4m 53sRunning iteration 971/1500... Est. remaining: 4m 47sRunning iteration 981/1500... Est. remaining: 4m 41sRunning iteration 991/1500... Est. remaining: 4m 36sRunning iteration 1001/1500... Est. remaining: 4m 30sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 25sRunning iteration 1021/1500... Est. remaining: 4m 19sRunning iteration 1031/1500... Est. remaining: 4m 14sRunning iteration 1041/1500... Est. remaining: 4m 8sRunning iteration 1051/1500... Est. remaining: 4m 3sRunning iteration 1061/1500... Est. remaining: 3m 57sRunning iteration 1071/1500... Est. remaining: 3m 52sRunning iteration 1081/1500... Est. remaining: 3m 46sRunning iteration 1091/1500... Est. remaining: 3m 41sRunning iteration 1101/1500... Est. remaining: 3m 35sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 30sRunning iteration 1121/1500... Est. remaining: 3m 24sRunning iteration 1131/1500... Est. remaining: 3m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.937
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1141/1500... Est. remaining: 3m 13sRunning iteration 1151/1500... Est. remaining: 3m 8sRunning iteration 1161/1500... Est. remaining: 3m 3sRunning iteration 1171/1500... Est. remaining: 2m 57sRunning iteration 1181/1500... Est. remaining: 2m 52sRunning iteration 1191/1500... Est. remaining: 2m 46sRunning iteration 1201/1500... Est. remaining: 2m 41sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.936507611009675), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 35sRunning iteration 1221/1500... Est. remaining: 2m 30sRunning iteration 1231/1500... Est. remaining: 2m 24sRunning iteration 1241/1500... Est. remaining: 2m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.016
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1251/1500... Est. remaining: 2m 14sRunning iteration 1261/1500... Est. remaining: 2m 9sRunning iteration 1271/1500... Est. remaining: 2m 3sRunning iteration 1281/1500... Est. remaining: 1m 58sRunning iteration 1291/1500... Est. remaining: 1m 52sRunning iteration 1301/1500... Est. remaining: 1m 47sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 42sRunning iteration 1321/1500... Est. remaining: 1m 36sRunning iteration 1331/1500... Est. remaining: 1m 31sRunning iteration 1341/1500... Est. remaining: 1m 25sRunning iteration 1351/1500... Est. remaining: 1m 20sRunning iteration 1361/1500... Est. remaining: 1m 15sRunning iteration 1371/1500... Est. remaining: 1m 9sRunning iteration 1381/1500... Est. remaining: 1m 4sRunning iteration 1391/1500... Est. remaining: 0m 58sRunning iteration 1401/1500... Est. remaining: 0m 53sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 48sRunning iteration 1421/1500... Est. remaining: 0m 42sRunning iteration 1431/1500... Est. remaining: 0m 37sRunning iteration 1441/1500... Est. remaining: 0m 32sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 21sRunning iteration 1471/1500... Est. remaining: 0m 16sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.4 minutes
Best normalized score: 2.02
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 2.0164)

Monte Carlo simulation completed in 13.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 00:33:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $104,810,269
Annual Return: 30.62%
Sharpe Ratio: 1.06954
Sortino Ratio: 0.981
Max Drawdown: -62.9%
Avg Drawdown: -15.3%
Normalized Score: -3.149
Lookback periods: [51, 72, 151] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $144,001,792
Annual Return: 31.82%
Sharpe Ratio: 1.13325
Sortino Ratio: 1.029
Max Drawdown: -58.5%
Avg Drawdown: -13.7%
Normalized Score: -2.490
Lookback periods: [76, 85, 137] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $961,179,427
Annual Return: 39.24%
Sharpe Ratio: 1.31794
Sortino Ratio: 1.247
Max Drawdown: -55.0%
Avg Drawdown: -13.6%
Normalized Score: -1.106
Lookback periods: [74, 116, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,349,174,718
Annual Return: 44.35%
Sharpe Ratio: 1.45390
Sortino Ratio: 1.410
Max Drawdown: -59.9%
Avg Drawdown: -11.2%
Normalized Score: -0.003
Lookback periods: [135, 190, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,587,293,052
Annual Return: 47.19%
Sharpe Ratio: 1.54428
Sortino Ratio: 1.501
Max Drawdown: -57.9%
Avg Drawdown: -11.3%
Normalized Score: 0.569
Lookback periods: [149, 159, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 34m 36sRunning iteration 21/1500... Est. remaining: 24m 3sRunning iteration 31/1500... Est. remaining: 20m 12sRunning iteration 41/1500... Est. remaining: 18m 8sRunning iteration 51/1500... Est. remaining: 16m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,334,994,528
Annual Return: 40.57%
Sharpe Ratio: 1.46466
Sortino Ratio: 1.366
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.692
Lookback periods: [50, 55, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 30sRunning iteration 71/1500... Est. remaining: 15m 48sRunning iteration 81/1500... Est. remaining: 15m 16sRunning iteration 91/1500... Est. remaining: 14m 48sRunning iteration 101/1500... Est. remaining: 14m 25sbest_combination: {'lookbacks': [50, 55, 102], 'score': np.float64(0.6917287253473434), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 5sRunning iteration 121/1500... Est. remaining: 13m 49sRunning iteration 131/1500... Est. remaining: 13m 33sRunning iteration 141/1500... Est. remaining: 13m 19sRunning iteration 151/1500... Est. remaining: 13m 7sRunning iteration 161/1500... Est. remaining: 12m 55sRunning iteration 171/1500... Est. remaining: 12m 44sRunning iteration 181/1500... Est. remaining: 12m 33sRunning iteration 191/1500... Est. remaining: 12m 24sRunning iteration 201/1500... Est. remaining: 12m 15sbest_combination: {'lookbacks': [50, 55, 102], 'score': np.float64(0.6917287253473434), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 6sRunning iteration 221/1500... Est. remaining: 11m 57sRunning iteration 231/1500... Est. remaining: 11m 49sRunning iteration 241/1500... Est. remaining: 11m 40sRunning iteration 251/1500... Est. remaining: 11m 33sRunning iteration 261/1500... Est. remaining: 11m 25sRunning iteration 271/1500... Est. remaining: 11m 17sRunning iteration 281/1500... Est. remaining: 11m 10sRunning iteration 291/1500... Est. remaining: 11m 4sRunning iteration 301/1500... Est. remaining: 10m 57sbest_combination: {'lookbacks': [50, 55, 102], 'score': np.float64(0.6917287253473434), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 50sRunning iteration 321/1500... Est. remaining: 10m 43sRunning iteration 331/1500... Est. remaining: 10m 36sRunning iteration 341/1500... Est. remaining: 10m 29sRunning iteration 351/1500... Est. remaining: 10m 23sRunning iteration 361/1500... Est. remaining: 10m 16sRunning iteration 371/1500... Est. remaining: 10m 10sRunning iteration 381/1500... Est. remaining: 10m 3sRunning iteration 391/1500... Est. remaining: 9m 57sRunning iteration 401/1500... Est. remaining: 9m 51sbest_combination: {'lookbacks': [50, 55, 102], 'score': np.float64(0.6917287253473434), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 45sRunning iteration 421/1500... Est. remaining: 9m 39sRunning iteration 431/1500... Est. remaining: 9m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,484,646,580
Annual Return: 41.00%
Sharpe Ratio: 1.47714
Sortino Ratio: 1.376
Max Drawdown: -36.1%
Avg Drawdown: -9.4%
Normalized Score: 0.709
Lookback periods: [51, 51, 102] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 9m 31sRunning iteration 451/1500... Est. remaining: 9m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,179,851,876
Annual Return: 42.57%
Sharpe Ratio: 1.50350
Sortino Ratio: 1.422
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.221
Lookback periods: [50, 50, 100] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/1500... Est. remaining: 9m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,215,830,150
Annual Return: 45.31%
Sharpe Ratio: 1.62720
Sortino Ratio: 1.544
Max Drawdown: -36.6%
Avg Drawdown: -8.6%
Normalized Score: 1.656
Lookback periods: [52, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 471/1500... Est. remaining: 9m 19sRunning iteration 481/1500... Est. remaining: 9m 14sRunning iteration 491/1500... Est. remaining: 9m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.747
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/1500... Est. remaining: 9m 4sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 58sRunning iteration 521/1500... Est. remaining: 8m 52sRunning iteration 531/1500... Est. remaining: 8m 46sRunning iteration 541/1500... Est. remaining: 8m 41sRunning iteration 551/1500... Est. remaining: 8m 35sRunning iteration 561/1500... Est. remaining: 8m 29sRunning iteration 571/1500... Est. remaining: 8m 23sRunning iteration 581/1500... Est. remaining: 8m 17sRunning iteration 591/1500... Est. remaining: 8m 11sRunning iteration 601/1500... Est. remaining: 8m 5sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 59sRunning iteration 621/1500... Est. remaining: 7m 53sRunning iteration 631/1500... Est. remaining: 7m 47sRunning iteration 641/1500... Est. remaining: 7m 41sRunning iteration 651/1500... Est. remaining: 7m 35sRunning iteration 661/1500... Est. remaining: 7m 30sRunning iteration 671/1500... Est. remaining: 7m 24sRunning iteration 681/1500... Est. remaining: 7m 18sRunning iteration 691/1500... Est. remaining: 7m 13sRunning iteration 701/1500... Est. remaining: 7m 7sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 1sRunning iteration 721/1500... Est. remaining: 6m 56sRunning iteration 731/1500... Est. remaining: 6m 50sRunning iteration 741/1500... Est. remaining: 6m 44sRunning iteration 751/1500... Est. remaining: 6m 39sRunning iteration 761/1500... Est. remaining: 6m 33sRunning iteration 771/1500... Est. remaining: 6m 28sRunning iteration 781/1500... Est. remaining: 6m 22sRunning iteration 791/1500... Est. remaining: 6m 17sRunning iteration 801/1500... Est. remaining: 6m 11sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 6sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 55sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 44sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 33sRunning iteration 881/1500... Est. remaining: 5m 28sRunning iteration 891/1500... Est. remaining: 5m 22sRunning iteration 901/1500... Est. remaining: 5m 17sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 12sRunning iteration 921/1500... Est. remaining: 5m 6sRunning iteration 931/1500... Est. remaining: 5m 1sRunning iteration 941/1500... Est. remaining: 4m 55sRunning iteration 951/1500... Est. remaining: 4m 50sRunning iteration 961/1500... Est. remaining: 4m 44sRunning iteration 971/1500... Est. remaining: 4m 39sRunning iteration 981/1500... Est. remaining: 4m 34sRunning iteration 991/1500... Est. remaining: 4m 28sRunning iteration 1001/1500... Est. remaining: 4m 23sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7470616103065049), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 18sRunning iteration 1021/1500... Est. remaining: 4m 12sRunning iteration 1031/1500... Est. remaining: 4m 7sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 56sRunning iteration 1061/1500... Est. remaining: 3m 51sRunning iteration 1071/1500... Est. remaining: 3m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.016
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 35sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 19sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 2.02
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.0164101823338956), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 2.0164)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 00:46:35 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!
Applied JSON normalization values to Monte Carlo instance

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-25T00:46:36.560422
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.1046
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $221,999,543
Annual Return: 33.48%
Sharpe Ratio: 1.15974
Sortino Ratio: 1.065
Max Drawdown: -62.2%
Avg Drawdown: -13.7%
Normalized Score: -2.375
Lookback periods: [71, 76, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,862,363,567
Annual Return: 44.94%
Sharpe Ratio: 1.45833
Sortino Ratio: 1.428
Max Drawdown: -63.3%
Avg Drawdown: -12.2%
Normalized Score: -0.179
Lookback periods: [150, 174, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,647,034,403
Annual Return: 45.72%
Sharpe Ratio: 1.48342
Sortino Ratio: 1.451
Max Drawdown: -62.5%
Avg Drawdown: -11.6%
Normalized Score: 0.080
Lookback periods: [172, 186, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,564,903,424
Annual Return: 46.48%
Sharpe Ratio: 1.53151
Sortino Ratio: 1.492
Max Drawdown: -63.8%
Avg Drawdown: -11.9%
Normalized Score: 0.176
Lookback periods: [136, 152, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 22m 2sRunning iteration 31/1500... Est. remaining: 18m 46sRunning iteration 41/1500... Est. remaining: 17m 4sRunning iteration 51/1500... Est. remaining: 16m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,003,532,236
Annual Return: 46.03%
Sharpe Ratio: 1.50353
Sortino Ratio: 1.459
Max Drawdown: -55.0%
Avg Drawdown: -11.3%
Normalized Score: 0.435
Lookback periods: [159, 161, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,323,558,428
Annual Return: 46.29%
Sharpe Ratio: 1.51364
Sortino Ratio: 1.484
Max Drawdown: -59.0%
Avg Drawdown: -10.8%
Normalized Score: 0.449
Lookback periods: [163, 166, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 16m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,967,563,166
Annual Return: 48.96%
Sharpe Ratio: 1.58602
Sortino Ratio: 1.557
Max Drawdown: -60.1%
Avg Drawdown: -11.7%
Normalized Score: 0.728
Lookback periods: [153, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 16m 9sRunning iteration 81/1500... Est. remaining: 15m 36sRunning iteration 91/1500... Est. remaining: 15m 8sRunning iteration 101/1500... Est. remaining: 14m 46sbest_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 25sRunning iteration 121/1500... Est. remaining: 14m 6sRunning iteration 131/1500... Est. remaining: 13m 48sRunning iteration 141/1500... Est. remaining: 13m 32sRunning iteration 151/1500... Est. remaining: 13m 18sRunning iteration 161/1500... Est. remaining: 13m 5sRunning iteration 171/1500... Est. remaining: 13m 0sRunning iteration 181/1500... Est. remaining: 12m 50sRunning iteration 191/1500... Est. remaining: 12m 38sRunning iteration 201/1500... Est. remaining: 12m 28sbest_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 18sRunning iteration 221/1500... Est. remaining: 12m 8sRunning iteration 231/1500... Est. remaining: 11m 59sRunning iteration 241/1500... Est. remaining: 11m 51sRunning iteration 251/1500... Est. remaining: 11m 43sRunning iteration 261/1500... Est. remaining: 11m 35sRunning iteration 271/1500... Est. remaining: 11m 26sRunning iteration 281/1500... Est. remaining: 11m 20sRunning iteration 291/1500... Est. remaining: 11m 14sRunning iteration 301/1500... Est. remaining: 11m 7sbest_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 59sRunning iteration 321/1500... Est. remaining: 10m 53sRunning iteration 331/1500... Est. remaining: 10m 46sRunning iteration 341/1500... Est. remaining: 10m 39sRunning iteration 351/1500... Est. remaining: 10m 32sRunning iteration 361/1500... Est. remaining: 10m 25sRunning iteration 371/1500... Est. remaining: 10m 18sRunning iteration 381/1500... Est. remaining: 10m 11sRunning iteration 391/1500... Est. remaining: 10m 4sRunning iteration 401/1500... Est. remaining: 9m 58sbest_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 52sRunning iteration 421/1500... Est. remaining: 9m 45sRunning iteration 431/1500... Est. remaining: 9m 39sRunning iteration 441/1500... Est. remaining: 9m 33sRunning iteration 451/1500... Est. remaining: 9m 27sRunning iteration 461/1500... Est. remaining: 9m 21sRunning iteration 471/1500... Est. remaining: 9m 15sRunning iteration 481/1500... Est. remaining: 9m 9sRunning iteration 491/1500... Est. remaining: 9m 3sRunning iteration 501/1500... Est. remaining: 8m 57sbest_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,707,065,015
Annual Return: 41.57%
Sharpe Ratio: 1.49491
Sortino Ratio: 1.393
Max Drawdown: -35.6%
Avg Drawdown: -9.5%
Normalized Score: 0.806
Lookback periods: [51, 55, 86] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 8m 54sRunning iteration 521/1500... Est. remaining: 8m 49sRunning iteration 531/1500... Est. remaining: 8m 43sRunning iteration 541/1500... Est. remaining: 8m 38sRunning iteration 551/1500... Est. remaining: 8m 32sRunning iteration 561/1500... Est. remaining: 8m 26sRunning iteration 571/1500... Est. remaining: 8m 20sRunning iteration 581/1500... Est. remaining: 8m 14sRunning iteration 591/1500... Est. remaining: 8m 8sRunning iteration 601/1500... Est. remaining: 8m 2sbest_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 57sRunning iteration 621/1500... Est. remaining: 7m 51sRunning iteration 631/1500... Est. remaining: 7m 45sRunning iteration 641/1500... Est. remaining: 7m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,686,478,281
Annual Return: 43.43%
Sharpe Ratio: 1.54701
Sortino Ratio: 1.467
Max Drawdown: -41.5%
Avg Drawdown: -10.2%
Normalized Score: 0.859
Lookback periods: [53, 53, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 7m 36sRunning iteration 661/1500... Est. remaining: 7m 30sRunning iteration 671/1500... Est. remaining: 7m 24sRunning iteration 681/1500... Est. remaining: 7m 19sRunning iteration 691/1500... Est. remaining: 7m 13sRunning iteration 701/1500... Est. remaining: 7m 7sbest_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 2sRunning iteration 721/1500... Est. remaining: 6m 57sRunning iteration 731/1500... Est. remaining: 6m 51sRunning iteration 741/1500... Est. remaining: 6m 45sRunning iteration 751/1500... Est. remaining: 6m 40sRunning iteration 761/1500... Est. remaining: 6m 35sRunning iteration 771/1500... Est. remaining: 6m 29sRunning iteration 781/1500... Est. remaining: 6m 24sRunning iteration 791/1500... Est. remaining: 6m 18sRunning iteration 801/1500... Est. remaining: 6m 12sbest_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 7sRunning iteration 821/1500... Est. remaining: 6m 2sRunning iteration 831/1500... Est. remaining: 5m 56sRunning iteration 841/1500... Est. remaining: 5m 51sRunning iteration 851/1500... Est. remaining: 5m 45sRunning iteration 861/1500... Est. remaining: 5m 40sRunning iteration 871/1500... Est. remaining: 5m 34sRunning iteration 881/1500... Est. remaining: 5m 29sRunning iteration 891/1500... Est. remaining: 5m 24sRunning iteration 901/1500... Est. remaining: 5m 18sbest_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 13sRunning iteration 921/1500... Est. remaining: 5m 7sRunning iteration 931/1500... Est. remaining: 5m 2sRunning iteration 941/1500... Est. remaining: 4m 56sRunning iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 46sRunning iteration 971/1500... Est. remaining: 4m 40sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 29sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,162,347,809
Annual Return: 49.45%
Sharpe Ratio: 1.60382
Sortino Ratio: 1.574
Max Drawdown: -59.0%
Avg Drawdown: -11.1%
Normalized Score: 0.959
Lookback periods: [144, 158, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 0.96
best_combination: {'lookbacks': [135, 158, 188], 'score': np.float64(1.1045543681498866), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [135, 158, 188] (score: 1.1046)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [144, 158, 188] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 117 selections (28.1%)
2. sp500_hma: 111 selections (26.7%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,162,347,808.58
Average Annualized Gain: 49.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 197m 59s
End time: Mon Aug 25 00:59:43 EDT 2025
Average time per successful run: 13m 11s
==============================================================
✓ All runs completed successfully!
