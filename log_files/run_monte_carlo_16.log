Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: --json=abacus_combined_PyTAAA_status.params.json
Randomize normalization: --randomize
Start time: Mon Aug 25 12:49:42 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Mon Aug 25 12:49:42 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
Monte Carlo state loaded from monte_carlo_state.pkl
  Saved: 2025-08-25T12:34:50.600826
  Restored: 1500 combinations
  Total visits: 1500
  Best previous score: 1.0504
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,800,820,086
Annual Return: 41.79%
Sharpe Ratio: 1.38353
Sortino Ratio: 1.334
Max Drawdown: -67.6%
Avg Drawdown: -12.7%
Normalized Score: -0.530
Lookback periods: [126, 137, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $534,464,776
Annual Return: 36.90%
Sharpe Ratio: 1.27794
Sortino Ratio: 1.191
Max Drawdown: -52.3%
Avg Drawdown: -11.9%
Normalized Score: -0.511
Lookback periods: [82, 124, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $702,924,359
Annual Return: 37.99%
Sharpe Ratio: 1.31251
Sortino Ratio: 1.225
Max Drawdown: -52.3%
Avg Drawdown: -12.1%
Normalized Score: -0.363
Lookback periods: [69, 84, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 28m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,300,485,191
Annual Return: 44.29%
Sharpe Ratio: 1.42523
Sortino Ratio: 1.376
Max Drawdown: -61.2%
Avg Drawdown: -11.6%
Normalized Score: 0.116
Lookback periods: [190, 191, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 41sRunning iteration 31/1500... Est. remaining: 18m 23sRunning iteration 41/1500... Est. remaining: 16m 39sRunning iteration 51/1500... Est. remaining: 15m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,783,035,186
Annual Return: 43.58%
Sharpe Ratio: 1.43056
Sortino Ratio: 1.390
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.170
Lookback periods: [165, 168, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 15m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,272,384,745
Annual Return: 44.25%
Sharpe Ratio: 1.46061
Sortino Ratio: 1.424
Max Drawdown: -57.0%
Avg Drawdown: -13.3%
Normalized Score: 0.226
Lookback periods: [131, 147, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 15m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,063,905,837
Annual Return: 46.08%
Sharpe Ratio: 1.49430
Sortino Ratio: 1.457
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.527
Lookback periods: [176, 180, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 14m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,251,554,572
Annual Return: 46.23%
Sharpe Ratio: 1.52998
Sortino Ratio: 1.484
Max Drawdown: -56.8%
Avg Drawdown: -11.6%
Normalized Score: 0.725
Lookback periods: [142, 159, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 14m 40sRunning iteration 101/1500... Est. remaining: 14m 14sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(1.0503670883816576), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,498,272,883
Annual Return: 47.13%
Sharpe Ratio: 1.53790
Sortino Ratio: 1.505
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.809
Lookback periods: [155, 174, 180] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/1500... Est. remaining: 14m 5sRunning iteration 121/1500... Est. remaining: 13m 46sRunning iteration 131/1500... Est. remaining: 13m 28sRunning iteration 141/1500... Est. remaining: 13m 11sRunning iteration 151/1500... Est. remaining: 12m 57sRunning iteration 161/1500... Est. remaining: 12m 43sRunning iteration 171/1500... Est. remaining: 12m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,627,817,354
Annual Return: 49.24%
Sharpe Ratio: 1.59350
Sortino Ratio: 1.556
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 1.051
Lookback periods: [180, 188, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,582,419,979
Annual Return: 48.32%
Sharpe Ratio: 1.58304
Sortino Ratio: 1.546
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 1.065
Lookback periods: [144, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/1500... Est. remaining: 12m 36sRunning iteration 191/1500... Est. remaining: 12m 24sRunning iteration 201/1500... Est. remaining: 12m 13sbest_combination: {'lookbacks': [144, 154, 156], 'score': np.float64(1.0653960473612918), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 2sRunning iteration 221/1500... Est. remaining: 11m 51sRunning iteration 231/1500... Est. remaining: 11m 42sRunning iteration 241/1500... Est. remaining: 11m 32sRunning iteration 251/1500... Est. remaining: 11m 23sRunning iteration 261/1500... Est. remaining: 11m 15sRunning iteration 271/1500... Est. remaining: 11m 7sRunning iteration 281/1500... Est. remaining: 10m 59sRunning iteration 291/1500... Est. remaining: 10m 51sRunning iteration 301/1500... Est. remaining: 10m 44sbest_combination: {'lookbacks': [144, 154, 156], 'score': np.float64(1.0653960473612918), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 37sRunning iteration 321/1500... Est. remaining: 10m 30sRunning iteration 331/1500... Est. remaining: 10m 24sRunning iteration 341/1500... Est. remaining: 10m 17sRunning iteration 351/1500... Est. remaining: 10m 11sRunning iteration 361/1500... Est. remaining: 10m 5sRunning iteration 371/1500... Est. remaining: 9m 59sRunning iteration 381/1500... Est. remaining: 9m 53sRunning iteration 391/1500... Est. remaining: 9m 46sRunning iteration 401/1500... Est. remaining: 9m 40sbest_combination: {'lookbacks': [144, 154, 156], 'score': np.float64(1.0653960473612918), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 34sRunning iteration 421/1500... Est. remaining: 9m 28sRunning iteration 431/1500... Est. remaining: 9m 22sRunning iteration 441/1500... Est. remaining: 9m 17sRunning iteration 451/1500... Est. remaining: 9m 11sRunning iteration 461/1500... Est. remaining: 9m 5sRunning iteration 471/1500... Est. remaining: 8m 59sRunning iteration 481/1500... Est. remaining: 8m 53sRunning iteration 491/1500... Est. remaining: 8m 48sRunning iteration 501/1500... Est. remaining: 8m 42sbest_combination: {'lookbacks': [144, 154, 156], 'score': np.float64(1.0653960473612918), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 36sRunning iteration 521/1500... Est. remaining: 8m 31sRunning iteration 531/1500... Est. remaining: 8m 25sRunning iteration 541/1500... Est. remaining: 8m 20sRunning iteration 551/1500... Est. remaining: 8m 14sRunning iteration 561/1500... Est. remaining: 8m 9sRunning iteration 571/1500... Est. remaining: 8m 3sRunning iteration 581/1500... Est. remaining: 7m 58sRunning iteration 591/1500... Est. remaining: 7m 52sRunning iteration 601/1500... Est. remaining: 7m 47sbest_combination: {'lookbacks': [144, 154, 156], 'score': np.float64(1.0653960473612918), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 41sRunning iteration 621/1500... Est. remaining: 7m 36sRunning iteration 631/1500... Est. remaining: 7m 30sRunning iteration 641/1500... Est. remaining: 7m 25sRunning iteration 651/1500... Est. remaining: 7m 20sRunning iteration 661/1500... Est. remaining: 7m 14sRunning iteration 671/1500... Est. remaining: 7m 9sRunning iteration 681/1500... Est. remaining: 7m 3sRunning iteration 691/1500... Est. remaining: 6m 58sRunning iteration 701/1500... Est. remaining: 6m 53sbest_combination: {'lookbacks': [144, 154, 156], 'score': np.float64(1.0653960473612918), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 48sRunning iteration 721/1500... Est. remaining: 6m 42sRunning iteration 731/1500... Est. remaining: 6m 37sRunning iteration 741/1500... Est. remaining: 6m 32sRunning iteration 751/1500... Est. remaining: 6m 26sRunning iteration 761/1500... Est. remaining: 6m 21sRunning iteration 771/1500... Est. remaining: 6m 16sRunning iteration 781/1500... Est. remaining: 6m 10sRunning iteration 791/1500... Est. remaining: 6m 5sRunning iteration 801/1500... Est. remaining: 6m 0sbest_combination: {'lookbacks': [144, 154, 156], 'score': np.float64(1.0653960473612918), 'visits': 1}
Running iteration 811/1500... Est. remaining: 5m 55sRunning iteration 821/1500... Est. remaining: 5m 49sRunning iteration 831/1500... Est. remaining: 5m 44sRunning iteration 841/1500... Est. remaining: 5m 39sRunning iteration 851/1500... Est. remaining: 5m 34sRunning iteration 861/1500... Est. remaining: 5m 28sRunning iteration 871/1500... Est. remaining: 5m 23sRunning iteration 881/1500... Est. remaining: 5m 18sRunning iteration 891/1500... Est. remaining: 5m 13sRunning iteration 901/1500... Est. remaining: 5m 8sbest_combination: {'lookbacks': [144, 154, 156], 'score': np.float64(1.0653960473612918), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 2sRunning iteration 921/1500... Est. remaining: 4m 57sRunning iteration 931/1500... Est. remaining: 4m 52sRunning iteration 941/1500... Est. remaining: 4m 47sRunning iteration 951/1500... Est. remaining: 4m 42sRunning iteration 961/1500... Est. remaining: 4m 37sRunning iteration 971/1500... Est. remaining: 4m 31sRunning iteration 981/1500... Est. remaining: 4m 27sRunning iteration 991/1500... Est. remaining: 4m 21sRunning iteration 1001/1500... Est. remaining: 4m 16sbest_combination: {'lookbacks': [144, 154, 156], 'score': np.float64(1.0653960473612918), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 11sRunning iteration 1021/1500... Est. remaining: 4m 6sRunning iteration 1031/1500... Est. remaining: 4m 1sRunning iteration 1041/1500... Est. remaining: 3m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,651,913,426
Annual Return: 43.38%
Sharpe Ratio: 1.54970
Sortino Ratio: 1.460
Max Drawdown: -36.1%
Avg Drawdown: -9.6%
Normalized Score: 1.559
Lookback periods: [51, 53, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,194,625,661
Annual Return: 42.60%
Sharpe Ratio: 1.54908
Sortino Ratio: 1.443
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.656
Lookback periods: [50, 51, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,090,291,433
Annual Return: 44.01%
Sharpe Ratio: 1.56952
Sortino Ratio: 1.484
Max Drawdown: -36.1%
Avg Drawdown: -9.4%
Normalized Score: 1.684
Lookback periods: [51, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 2.034
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1051/1500... Est. remaining: 3m 52sRunning iteration 1061/1500... Est. remaining: 3m 47sRunning iteration 1071/1500... Est. remaining: 3m 42sRunning iteration 1081/1500... Est. remaining: 3m 37sRunning iteration 1091/1500... Est. remaining: 3m 32sRunning iteration 1101/1500... Est. remaining: 3m 26sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(2.033574072771553), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 21sRunning iteration 1121/1500... Est. remaining: 3m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 2.076
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1131/1500... Est. remaining: 3m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.256
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1141/1500... Est. remaining: 3m 6sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 45sRunning iteration 1191/1500... Est. remaining: 2m 40sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.255913160984731), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 29sRunning iteration 1221/1500... Est. remaining: 2m 24sRunning iteration 1231/1500... Est. remaining: 2m 19sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 3sRunning iteration 1271/1500... Est. remaining: 1m 58sRunning iteration 1281/1500... Est. remaining: 1m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.319
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.3187994632278026), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 32sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 1sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.3187994632278026), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 30sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.8 minutes
Best normalized score: 2.32
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(2.3187994632278026), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 3000
  Theoretical efficiency improvement: 0.002
  Best performing lookbacks: [52, 52, 98] (score: 2.3188)

Monte Carlo simulation completed in 12.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Mon Aug 25 13:02:41 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,849,395,674
Annual Return: 43.68%
Sharpe Ratio: 1.43568
Sortino Ratio: 1.398
Max Drawdown: -71.1%
Avg Drawdown: -13.9%
Normalized Score: -0.779
Lookback periods: [130, 152, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,088,500,683
Annual Return: 42.39%
Sharpe Ratio: 1.42868
Sortino Ratio: 1.347
Max Drawdown: -55.0%
Avg Drawdown: -10.7%
Normalized Score: -0.131
Lookback periods: [50, 107, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,704,398,369
Annual Return: 45.77%
Sharpe Ratio: 1.51374
Sortino Ratio: 1.473
Max Drawdown: -55.0%
Avg Drawdown: -11.3%
Normalized Score: 0.416
Lookback periods: [128, 128, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 21m 27sRunning iteration 31/1500... Est. remaining: 18m 19sRunning iteration 41/1500... Est. remaining: 16m 42sRunning iteration 51/1500... Est. remaining: 15m 42sRunning iteration 61/1500... Est. remaining: 15m 0sRunning iteration 71/1500... Est. remaining: 14m 29sRunning iteration 81/1500... Est. remaining: 14m 4sRunning iteration 91/1500... Est. remaining: 13m 44sRunning iteration 101/1500... Est. remaining: 13m 27sbest_combination: {'lookbacks': [128, 128, 155], 'score': np.float64(0.41565989813587956), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 12sRunning iteration 121/1500... Est. remaining: 12m 58sRunning iteration 131/1500... Est. remaining: 12m 47sRunning iteration 141/1500... Est. remaining: 12m 35sRunning iteration 151/1500... Est. remaining: 12m 26sRunning iteration 161/1500... Est. remaining: 12m 16sRunning iteration 171/1500... Est. remaining: 12m 7sRunning iteration 181/1500... Est. remaining: 11m 58sRunning iteration 191/1500... Est. remaining: 11m 50sRunning iteration 201/1500... Est. remaining: 11m 42sbest_combination: {'lookbacks': [128, 128, 155], 'score': np.float64(0.41565989813587956), 'visits': 1}
Running iteration 211/1500... Est. remaining: 11m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,572,360,241
Annual Return: 47.79%
Sharpe Ratio: 1.58202
Sortino Ratio: 1.532
Max Drawdown: -56.8%
Avg Drawdown: -10.7%
Normalized Score: 0.822
Lookback periods: [135, 158, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/1500... Est. remaining: 11m 35sRunning iteration 231/1500... Est. remaining: 11m 28sRunning iteration 241/1500... Est. remaining: 11m 20sRunning iteration 251/1500... Est. remaining: 11m 13sRunning iteration 261/1500... Est. remaining: 11m 5sRunning iteration 271/1500... Est. remaining: 10m 58sRunning iteration 281/1500... Est. remaining: 10m 50sRunning iteration 291/1500... Est. remaining: 10m 43sRunning iteration 301/1500... Est. remaining: 10m 36sbest_combination: {'lookbacks': [135, 158, 179], 'score': np.float64(0.8216250887897454), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 30sRunning iteration 321/1500... Est. remaining: 10m 24sRunning iteration 331/1500... Est. remaining: 10m 18sRunning iteration 341/1500... Est. remaining: 10m 12sRunning iteration 351/1500... Est. remaining: 10m 6sRunning iteration 361/1500... Est. remaining: 10m 0sRunning iteration 371/1500... Est. remaining: 9m 54sRunning iteration 381/1500... Est. remaining: 9m 49sRunning iteration 391/1500... Est. remaining: 9m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,206,322,414
Annual Return: 44.17%
Sharpe Ratio: 1.58573
Sortino Ratio: 1.493
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.257
Lookback periods: [50, 54, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 9m 40sbest_combination: {'lookbacks': [50, 54, 96], 'score': np.float64(1.2568003735264968), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 35sRunning iteration 421/1500... Est. remaining: 9m 29sRunning iteration 431/1500... Est. remaining: 9m 23sRunning iteration 441/1500... Est. remaining: 9m 17sRunning iteration 451/1500... Est. remaining: 9m 12sRunning iteration 461/1500... Est. remaining: 9m 6sRunning iteration 471/1500... Est. remaining: 9m 0sRunning iteration 481/1500... Est. remaining: 8m 54sRunning iteration 491/1500... Est. remaining: 8m 49sRunning iteration 501/1500... Est. remaining: 8m 43sbest_combination: {'lookbacks': [50, 54, 96], 'score': np.float64(1.2568003735264968), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 37sRunning iteration 521/1500... Est. remaining: 8m 32sRunning iteration 531/1500... Est. remaining: 8m 26sRunning iteration 541/1500... Est. remaining: 8m 21sRunning iteration 551/1500... Est. remaining: 8m 16sRunning iteration 561/1500... Est. remaining: 8m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,929,534,714
Annual Return: 43.79%
Sharpe Ratio: 1.57927
Sortino Ratio: 1.479
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.265
Lookback periods: [50, 52, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/1500... Est. remaining: 8m 7sRunning iteration 581/1500... Est. remaining: 8m 2sRunning iteration 591/1500... Est. remaining: 7m 56sRunning iteration 601/1500... Est. remaining: 7m 51sbest_combination: {'lookbacks': [50, 52, 99], 'score': np.float64(1.2646994883784983), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,796,731,139
Annual Return: 43.60%
Sharpe Ratio: 1.56916
Sortino Ratio: 1.470
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.265
Lookback periods: [50, 50, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 7m 42sRunning iteration 631/1500... Est. remaining: 7m 36sRunning iteration 641/1500... Est. remaining: 7m 31sRunning iteration 651/1500... Est. remaining: 7m 25sRunning iteration 661/1500... Est. remaining: 7m 20sRunning iteration 671/1500... Est. remaining: 7m 14sRunning iteration 681/1500... Est. remaining: 7m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,833,624,762
Annual Return: 43.65%
Sharpe Ratio: 1.57405
Sortino Ratio: 1.478
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.310
Lookback periods: [50, 50, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,063,046,665
Annual Return: 43.98%
Sharpe Ratio: 1.58327
Sortino Ratio: 1.490
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.348
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 7m 6sRunning iteration 701/1500... Est. remaining: 7m 0sbest_combination: {'lookbacks': [50, 50, 96], 'score': np.float64(1.3482113676639311), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.528
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 6m 51sRunning iteration 731/1500... Est. remaining: 6m 45sRunning iteration 741/1500... Est. remaining: 6m 40sRunning iteration 751/1500... Est. remaining: 6m 34sRunning iteration 761/1500... Est. remaining: 6m 29sRunning iteration 771/1500... Est. remaining: 6m 23sRunning iteration 781/1500... Est. remaining: 6m 18sRunning iteration 791/1500... Est. remaining: 6m 12sRunning iteration 801/1500... Est. remaining: 6m 7sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.52843355022588), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 1sRunning iteration 821/1500... Est. remaining: 5m 56sRunning iteration 831/1500... Est. remaining: 5m 51sRunning iteration 841/1500... Est. remaining: 5m 45sRunning iteration 851/1500... Est. remaining: 5m 40sRunning iteration 861/1500... Est. remaining: 5m 34sRunning iteration 871/1500... Est. remaining: 5m 29sRunning iteration 881/1500... Est. remaining: 5m 24sRunning iteration 891/1500... Est. remaining: 5m 18sRunning iteration 901/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.52843355022588), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 8sRunning iteration 921/1500... Est. remaining: 5m 2sRunning iteration 931/1500... Est. remaining: 4m 57sRunning iteration 941/1500... Est. remaining: 4m 52sRunning iteration 951/1500... Est. remaining: 4m 46sRunning iteration 961/1500... Est. remaining: 4m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.547
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 971/1500... Est. remaining: 4m 36sRunning iteration 981/1500... Est. remaining: 4m 31sRunning iteration 991/1500... Est. remaining: 4m 26sRunning iteration 1001/1500... Est. remaining: 4m 20sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.5468389755696528), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 15sRunning iteration 1021/1500... Est. remaining: 4m 10sRunning iteration 1031/1500... Est. remaining: 4m 5sRunning iteration 1041/1500... Est. remaining: 3m 59sRunning iteration 1051/1500... Est. remaining: 3m 54sRunning iteration 1061/1500... Est. remaining: 3m 49sRunning iteration 1071/1500... Est. remaining: 3m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.757
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1081/1500... Est. remaining: 3m 38sRunning iteration 1091/1500... Est. remaining: 3m 33sRunning iteration 1101/1500... Est. remaining: 3m 28sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7569895268941607), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 23sRunning iteration 1121/1500... Est. remaining: 3m 17sRunning iteration 1131/1500... Est. remaining: 3m 12sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 2sRunning iteration 1161/1500... Est. remaining: 2m 56sRunning iteration 1171/1500... Est. remaining: 2m 51sRunning iteration 1181/1500... Est. remaining: 2m 46sRunning iteration 1191/1500... Est. remaining: 2m 41sRunning iteration 1201/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7569895268941607), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 30sRunning iteration 1221/1500... Est. remaining: 2m 25sRunning iteration 1231/1500... Est. remaining: 2m 20sRunning iteration 1241/1500... Est. remaining: 2m 14sRunning iteration 1251/1500... Est. remaining: 2m 9sRunning iteration 1261/1500... Est. remaining: 2m 4sRunning iteration 1271/1500... Est. remaining: 1m 59sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 48sRunning iteration 1301/1500... Est. remaining: 1m 43sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7569895268941607), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 38sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 27sRunning iteration 1341/1500... Est. remaining: 1m 22sRunning iteration 1351/1500... Est. remaining: 1m 17sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,673,528,425
Annual Return: 46.56%
Sharpe Ratio: 1.66674
Sortino Ratio: 1.588
Max Drawdown: -36.6%
Avg Drawdown: -8.1%
Normalized Score: 1.793
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 56sRunning iteration 1401/1500... Est. remaining: 0m 51sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.7927206577439965), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 25sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 12.9 minutes
Best normalized score: 1.79
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.7927206577439965), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 95] (score: 1.7927)

Monte Carlo simulation completed in 12.9 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 103 selections (24.8%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,673,528,425.50
Average Annualized Gain: 46.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Mon Aug 25 13:15:44 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $902,756,090
Annual Return: 38.99%
Sharpe Ratio: 1.31484
Sortino Ratio: 1.245
Max Drawdown: -69.2%
Avg Drawdown: -14.1%
Normalized Score: -1.331
Lookback periods: [90, 154, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $535,016,964
Annual Return: 36.91%
Sharpe Ratio: 1.25569
Sortino Ratio: 1.180
Max Drawdown: -55.0%
Avg Drawdown: -14.1%
Normalized Score: -1.048
Lookback periods: [69, 147, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $605,755,370
Annual Return: 37.40%
Sharpe Ratio: 1.29573
Sortino Ratio: 1.212
Max Drawdown: -52.3%
Avg Drawdown: -11.4%
Normalized Score: -0.479
Lookback periods: [81, 100, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,397,447,968
Annual Return: 44.41%
Sharpe Ratio: 1.46281
Sortino Ratio: 1.419
Max Drawdown: -57.2%
Avg Drawdown: -13.2%
Normalized Score: -0.015
Lookback periods: [138, 140, 150] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,878,029,199
Annual Return: 41.96%
Sharpe Ratio: 1.44048
Sortino Ratio: 1.352
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: 0.195
Lookback periods: [83, 129, 134] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,799,451,190
Annual Return: 44.87%
Sharpe Ratio: 1.47162
Sortino Ratio: 1.429
Max Drawdown: -59.0%
Avg Drawdown: -10.9%
Normalized Score: 0.249
Lookback periods: [157, 170, 199] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 26m 3sRunning iteration 31/1500... Est. remaining: 21m 24sRunning iteration 41/1500... Est. remaining: 18m 59sRunning iteration 51/1500... Est. remaining: 17m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,509,429,234
Annual Return: 44.54%
Sharpe Ratio: 1.52901
Sortino Ratio: 1.443
Max Drawdown: -57.2%
Avg Drawdown: -11.4%
Normalized Score: 0.335
Lookback periods: [52, 148, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 17m 2sRunning iteration 71/1500... Est. remaining: 16m 14sRunning iteration 81/1500... Est. remaining: 15m 36sRunning iteration 91/1500... Est. remaining: 15m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,537,177,863
Annual Return: 47.77%
Sharpe Ratio: 1.56228
Sortino Ratio: 1.529
Max Drawdown: -62.5%
Avg Drawdown: -12.2%
Normalized Score: 0.366
Lookback periods: [146, 153, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 14m 56sbest_combination: {'lookbacks': [146, 153, 156], 'score': np.float64(0.3660664631884396), 'visits': 1}
Running iteration 111/1500... Est. remaining: 14m 33sRunning iteration 121/1500... Est. remaining: 14m 12sRunning iteration 131/1500... Est. remaining: 13m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,305,617,240
Annual Return: 45.40%
Sharpe Ratio: 1.48681
Sortino Ratio: 1.453
Max Drawdown: -55.0%
Avg Drawdown: -11.2%
Normalized Score: 0.455
Lookback periods: [159, 165, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/1500... Est. remaining: 13m 49sRunning iteration 151/1500... Est. remaining: 13m 34sRunning iteration 161/1500... Est. remaining: 13m 20sRunning iteration 171/1500... Est. remaining: 13m 7sRunning iteration 181/1500... Est. remaining: 12m 55sRunning iteration 191/1500... Est. remaining: 12m 42sRunning iteration 201/1500... Est. remaining: 12m 32sbest_combination: {'lookbacks': [159, 165, 169], 'score': np.float64(0.45484950839967697), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 21sRunning iteration 221/1500... Est. remaining: 12m 11sRunning iteration 231/1500... Est. remaining: 12m 1sRunning iteration 241/1500... Est. remaining: 11m 51sRunning iteration 251/1500... Est. remaining: 11m 41sRunning iteration 261/1500... Est. remaining: 11m 32sRunning iteration 271/1500... Est. remaining: 11m 24sRunning iteration 281/1500... Est. remaining: 11m 15sRunning iteration 291/1500... Est. remaining: 11m 7sRunning iteration 301/1500... Est. remaining: 10m 59sbest_combination: {'lookbacks': [159, 165, 169], 'score': np.float64(0.45484950839967697), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 52sRunning iteration 321/1500... Est. remaining: 10m 45sRunning iteration 331/1500... Est. remaining: 10m 38sRunning iteration 341/1500... Est. remaining: 10m 31sRunning iteration 351/1500... Est. remaining: 10m 24sRunning iteration 361/1500... Est. remaining: 10m 17sRunning iteration 371/1500... Est. remaining: 10m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,088,707,297
Annual Return: 46.10%
Sharpe Ratio: 1.52367
Sortino Ratio: 1.477
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.474
Lookback periods: [138, 156, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 10m 8sRunning iteration 391/1500... Est. remaining: 10m 2sRunning iteration 401/1500... Est. remaining: 9m 55sbest_combination: {'lookbacks': [138, 156, 161], 'score': np.float64(0.4735523511868111), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 49sRunning iteration 421/1500... Est. remaining: 9m 43sRunning iteration 431/1500... Est. remaining: 9m 36sRunning iteration 441/1500... Est. remaining: 9m 30sRunning iteration 451/1500... Est. remaining: 9m 24sRunning iteration 461/1500... Est. remaining: 9m 18sRunning iteration 471/1500... Est. remaining: 9m 12sRunning iteration 481/1500... Est. remaining: 9m 6sRunning iteration 491/1500... Est. remaining: 9m 0sRunning iteration 501/1500... Est. remaining: 8m 54sbest_combination: {'lookbacks': [138, 156, 161], 'score': np.float64(0.4735523511868111), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,944,609,995
Annual Return: 47.99%
Sharpe Ratio: 1.57646
Sortino Ratio: 1.538
Max Drawdown: -57.2%
Avg Drawdown: -11.7%
Normalized Score: 0.678
Lookback periods: [136, 158, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 521/1500... Est. remaining: 8m 44sRunning iteration 531/1500... Est. remaining: 8m 38sRunning iteration 541/1500... Est. remaining: 8m 33sRunning iteration 551/1500... Est. remaining: 8m 27sRunning iteration 561/1500... Est. remaining: 8m 21sRunning iteration 571/1500... Est. remaining: 8m 15sRunning iteration 581/1500... Est. remaining: 8m 9sRunning iteration 591/1500... Est. remaining: 8m 4sRunning iteration 601/1500... Est. remaining: 7m 58sbest_combination: {'lookbacks': [136, 158, 169], 'score': np.float64(0.6776506289869191), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 52sRunning iteration 621/1500... Est. remaining: 7m 47sRunning iteration 631/1500... Est. remaining: 7m 41sRunning iteration 641/1500... Est. remaining: 7m 35sRunning iteration 651/1500... Est. remaining: 7m 30sRunning iteration 661/1500... Est. remaining: 7m 24sRunning iteration 671/1500... Est. remaining: 7m 19sRunning iteration 681/1500... Est. remaining: 7m 13sRunning iteration 691/1500... Est. remaining: 7m 7sRunning iteration 701/1500... Est. remaining: 7m 2sbest_combination: {'lookbacks': [136, 158, 169], 'score': np.float64(0.6776506289869191), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 56sRunning iteration 721/1500... Est. remaining: 6m 51sRunning iteration 731/1500... Est. remaining: 6m 45sRunning iteration 741/1500... Est. remaining: 6m 40sRunning iteration 751/1500... Est. remaining: 6m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,847,315,349
Annual Return: 48.45%
Sharpe Ratio: 1.58621
Sortino Ratio: 1.547
Max Drawdown: -57.2%
Avg Drawdown: -11.0%
Normalized Score: 0.817
Lookback periods: [139, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 6m 30sRunning iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 14sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [139, 155, 156], 'score': np.float64(0.8166395953552428), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 57sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 41sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 30sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [139, 155, 156], 'score': np.float64(0.8166395953552428), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 3sRunning iteration 931/1500... Est. remaining: 4m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,124,873,640
Annual Return: 42.47%
Sharpe Ratio: 1.53883
Sortino Ratio: 1.440
Max Drawdown: -37.8%
Avg Drawdown: -9.5%
Normalized Score: 1.245
Lookback periods: [51, 55, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,194,625,661
Annual Return: 42.60%
Sharpe Ratio: 1.54908
Sortino Ratio: 1.443
Max Drawdown: -34.7%
Avg Drawdown: -8.5%
Normalized Score: 1.519
Lookback periods: [50, 51, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 941/1500... Est. remaining: 4m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,796,731,139
Annual Return: 43.60%
Sharpe Ratio: 1.56916
Sortino Ratio: 1.470
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.699
Lookback periods: [50, 50, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 4m 49sRunning iteration 961/1500... Est. remaining: 4m 44s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,004,005,011
Annual Return: 43.90%
Sharpe Ratio: 1.59446
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.763
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 971/1500... Est. remaining: 4m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,916,377,953
Annual Return: 45.00%
Sharpe Ratio: 1.61386
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.823
Lookback periods: [50, 54, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.076
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.076402461017615), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 3sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.076402461017615), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 3sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 47sRunning iteration 1191/1500... Est. remaining: 2m 42sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.076402461017615), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 26sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 10sRunning iteration 1261/1500... Est. remaining: 2m 5sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 54sRunning iteration 1291/1500... Est. remaining: 1m 49sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.076402461017615), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 33sRunning iteration 1331/1500... Est. remaining: 1m 28sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 12sRunning iteration 1371/1500... Est. remaining: 1m 7sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.076402461017615), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 46sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.0 minutes
Best normalized score: 2.08
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.076402461017615), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.0764)

Monte Carlo simulation completed in 13.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Mon Aug 25 13:28:52 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $749,676,541
Annual Return: 38.25%
Sharpe Ratio: 1.28412
Sortino Ratio: 1.219
Max Drawdown: -57.0%
Avg Drawdown: -14.1%
Normalized Score: -0.949
Lookback periods: [99, 110, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $657,284,457
Annual Return: 37.72%
Sharpe Ratio: 1.29072
Sortino Ratio: 1.206
Max Drawdown: -55.0%
Avg Drawdown: -13.1%
Normalized Score: -0.788
Lookback periods: [77, 145, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $896,864,941
Annual Return: 38.96%
Sharpe Ratio: 1.35358
Sortino Ratio: 1.266
Max Drawdown: -53.2%
Avg Drawdown: -13.3%
Normalized Score: -0.474
Lookback periods: [84, 91, 111] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,032,223,271
Annual Return: 39.53%
Sharpe Ratio: 1.35433
Sortino Ratio: 1.264
Max Drawdown: -56.4%
Avg Drawdown: -12.7%
Normalized Score: -0.455
Lookback periods: [54, 123, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 33m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,494,578,607
Annual Return: 41.03%
Sharpe Ratio: 1.37090
Sortino Ratio: 1.316
Max Drawdown: -60.4%
Avg Drawdown: -13.0%
Normalized Score: -0.437
Lookback periods: [113, 126, 154] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,843,340,360
Annual Return: 44.92%
Sharpe Ratio: 1.45982
Sortino Ratio: 1.426
Max Drawdown: -63.2%
Avg Drawdown: -12.0%
Normalized Score: 0.219
Lookback periods: [154, 162, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 26m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,049,380,252
Annual Return: 43.96%
Sharpe Ratio: 1.47500
Sortino Ratio: 1.425
Max Drawdown: -58.7%
Avg Drawdown: -12.3%
Normalized Score: 0.284
Lookback periods: [112, 131, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 22m 28sRunning iteration 41/1500... Est. remaining: 19m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,887,840,624
Annual Return: 44.97%
Sharpe Ratio: 1.49205
Sortino Ratio: 1.449
Max Drawdown: -60.0%
Avg Drawdown: -12.6%
Normalized Score: 0.328
Lookback periods: [129, 138, 140] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,726,285,731
Annual Return: 43.49%
Sharpe Ratio: 1.48608
Sortino Ratio: 1.405
Max Drawdown: -55.9%
Avg Drawdown: -11.2%
Normalized Score: 0.493
Lookback periods: [50, 144, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 19m 26sRunning iteration 61/1500... Est. remaining: 18m 9sRunning iteration 71/1500... Est. remaining: 17m 9sRunning iteration 81/1500... Est. remaining: 16m 23s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,237,339,023
Annual Return: 45.33%
Sharpe Ratio: 1.48444
Sortino Ratio: 1.446
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.558
Lookback periods: [156, 168, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 16m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,383,546,358
Annual Return: 46.34%
Sharpe Ratio: 1.53521
Sortino Ratio: 1.487
Max Drawdown: -56.8%
Avg Drawdown: -11.5%
Normalized Score: 0.848
Lookback periods: [135, 157, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 15m 52sbest_combination: {'lookbacks': [135, 157, 168], 'score': np.float64(0.8484183229089222), 'visits': 1}
Running iteration 111/1500... Est. remaining: 15m 25sRunning iteration 121/1500... Est. remaining: 15m 0sRunning iteration 131/1500... Est. remaining: 14m 39sRunning iteration 141/1500... Est. remaining: 14m 19sRunning iteration 151/1500... Est. remaining: 14m 2sRunning iteration 161/1500... Est. remaining: 13m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,875,650,483
Annual Return: 48.92%
Sharpe Ratio: 1.57942
Sortino Ratio: 1.546
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 1.154
Lookback periods: [175, 189, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 171/1500... Est. remaining: 13m 42sRunning iteration 181/1500... Est. remaining: 13m 28sRunning iteration 191/1500... Est. remaining: 13m 15sRunning iteration 201/1500... Est. remaining: 13m 2sbest_combination: {'lookbacks': [175, 189, 197], 'score': np.float64(1.1544932051478776), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 51sRunning iteration 221/1500... Est. remaining: 12m 39sRunning iteration 231/1500... Est. remaining: 12m 27sRunning iteration 241/1500... Est. remaining: 12m 16sRunning iteration 251/1500... Est. remaining: 12m 6sRunning iteration 261/1500... Est. remaining: 11m 56sRunning iteration 271/1500... Est. remaining: 11m 46sRunning iteration 281/1500... Est. remaining: 11m 38sRunning iteration 291/1500... Est. remaining: 11m 28sRunning iteration 301/1500... Est. remaining: 11m 20sbest_combination: {'lookbacks': [175, 189, 197], 'score': np.float64(1.1544932051478776), 'visits': 1}
Running iteration 311/1500... Est. remaining: 11m 12sRunning iteration 321/1500... Est. remaining: 11m 4sRunning iteration 331/1500... Est. remaining: 10m 56sRunning iteration 341/1500... Est. remaining: 10m 48sRunning iteration 351/1500... Est. remaining: 10m 41sRunning iteration 361/1500... Est. remaining: 10m 34sRunning iteration 371/1500... Est. remaining: 10m 27sRunning iteration 381/1500... Est. remaining: 10m 20sRunning iteration 391/1500... Est. remaining: 10m 13sRunning iteration 401/1500... Est. remaining: 10m 6sbest_combination: {'lookbacks': [175, 189, 197], 'score': np.float64(1.1544932051478776), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 59sRunning iteration 421/1500... Est. remaining: 9m 53sRunning iteration 431/1500... Est. remaining: 9m 46sRunning iteration 441/1500... Est. remaining: 9m 40sRunning iteration 451/1500... Est. remaining: 9m 33sRunning iteration 461/1500... Est. remaining: 9m 27sRunning iteration 471/1500... Est. remaining: 9m 21sRunning iteration 481/1500... Est. remaining: 9m 14sRunning iteration 491/1500... Est. remaining: 9m 8sRunning iteration 501/1500... Est. remaining: 9m 2sbest_combination: {'lookbacks': [175, 189, 197], 'score': np.float64(1.1544932051478776), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 56sRunning iteration 521/1500... Est. remaining: 8m 50sRunning iteration 531/1500... Est. remaining: 8m 44sRunning iteration 541/1500... Est. remaining: 8m 38sRunning iteration 551/1500... Est. remaining: 8m 32sRunning iteration 561/1500... Est. remaining: 8m 26sRunning iteration 571/1500... Est. remaining: 8m 20sRunning iteration 581/1500... Est. remaining: 8m 14sRunning iteration 591/1500... Est. remaining: 8m 8sRunning iteration 601/1500... Est. remaining: 8m 3sbest_combination: {'lookbacks': [175, 189, 197], 'score': np.float64(1.1544932051478776), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 57sRunning iteration 621/1500... Est. remaining: 7m 51sRunning iteration 631/1500... Est. remaining: 7m 45sRunning iteration 641/1500... Est. remaining: 7m 40sRunning iteration 651/1500... Est. remaining: 7m 34sRunning iteration 661/1500... Est. remaining: 7m 28sRunning iteration 671/1500... Est. remaining: 7m 23sRunning iteration 681/1500... Est. remaining: 7m 17sRunning iteration 691/1500... Est. remaining: 7m 11sRunning iteration 701/1500... Est. remaining: 7m 6sbest_combination: {'lookbacks': [175, 189, 197], 'score': np.float64(1.1544932051478776), 'visits': 1}
Running iteration 711/1500... Est. remaining: 7m 0sRunning iteration 721/1500... Est. remaining: 6m 55sRunning iteration 731/1500... Est. remaining: 6m 49sRunning iteration 741/1500... Est. remaining: 6m 43sRunning iteration 751/1500... Est. remaining: 6m 38sRunning iteration 761/1500... Est. remaining: 6m 32sRunning iteration 771/1500... Est. remaining: 6m 27sRunning iteration 781/1500... Est. remaining: 6m 21sRunning iteration 791/1500... Est. remaining: 6m 16sRunning iteration 801/1500... Est. remaining: 6m 10sbest_combination: {'lookbacks': [175, 189, 197], 'score': np.float64(1.1544932051478776), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 5sRunning iteration 821/1500... Est. remaining: 6m 0sRunning iteration 831/1500... Est. remaining: 5m 54sRunning iteration 841/1500... Est. remaining: 5m 49sRunning iteration 851/1500... Est. remaining: 5m 43sRunning iteration 861/1500... Est. remaining: 5m 38sRunning iteration 871/1500... Est. remaining: 5m 32sRunning iteration 881/1500... Est. remaining: 5m 27sRunning iteration 891/1500... Est. remaining: 5m 22sRunning iteration 901/1500... Est. remaining: 5m 16sbest_combination: {'lookbacks': [175, 189, 197], 'score': np.float64(1.1544932051478776), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,759,019,060
Annual Return: 48.41%
Sharpe Ratio: 1.59901
Sortino Ratio: 1.567
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 1.211
Lookback periods: [140, 147, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 5m 12sRunning iteration 921/1500... Est. remaining: 5m 6sRunning iteration 931/1500... Est. remaining: 5m 1sRunning iteration 941/1500... Est. remaining: 4m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,137,908,961
Annual Return: 49.44%
Sharpe Ratio: 1.62711
Sortino Ratio: 1.589
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 1.454
Lookback periods: [136, 156, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 4m 51sRunning iteration 961/1500... Est. remaining: 4m 45sRunning iteration 971/1500... Est. remaining: 4m 40sRunning iteration 981/1500... Est. remaining: 4m 35sRunning iteration 991/1500... Est. remaining: 4m 29sRunning iteration 1001/1500... Est. remaining: 4m 24sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.45362519204436), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 19sRunning iteration 1021/1500... Est. remaining: 4m 13sRunning iteration 1031/1500... Est. remaining: 4m 8sRunning iteration 1041/1500... Est. remaining: 4m 2sRunning iteration 1051/1500... Est. remaining: 3m 57sRunning iteration 1061/1500... Est. remaining: 3m 52sRunning iteration 1071/1500... Est. remaining: 3m 46sRunning iteration 1081/1500... Est. remaining: 3m 41sRunning iteration 1091/1500... Est. remaining: 3m 36sRunning iteration 1101/1500... Est. remaining: 3m 30sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.45362519204436), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 25sRunning iteration 1121/1500... Est. remaining: 3m 20sRunning iteration 1131/1500... Est. remaining: 3m 14sRunning iteration 1141/1500... Est. remaining: 3m 9sRunning iteration 1151/1500... Est. remaining: 3m 4sRunning iteration 1161/1500... Est. remaining: 2m 58sRunning iteration 1171/1500... Est. remaining: 2m 53sRunning iteration 1181/1500... Est. remaining: 2m 48sRunning iteration 1191/1500... Est. remaining: 2m 43sRunning iteration 1201/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.45362519204436), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 32sRunning iteration 1221/1500... Est. remaining: 2m 27sRunning iteration 1231/1500... Est. remaining: 2m 21sRunning iteration 1241/1500... Est. remaining: 2m 16sRunning iteration 1251/1500... Est. remaining: 2m 11sRunning iteration 1261/1500... Est. remaining: 2m 6sRunning iteration 1271/1500... Est. remaining: 2m 0sRunning iteration 1281/1500... Est. remaining: 1m 55sRunning iteration 1291/1500... Est. remaining: 1m 50sRunning iteration 1301/1500... Est. remaining: 1m 44sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.45362519204436), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 39sRunning iteration 1321/1500... Est. remaining: 1m 34sRunning iteration 1331/1500... Est. remaining: 1m 29sRunning iteration 1341/1500... Est. remaining: 1m 23sRunning iteration 1351/1500... Est. remaining: 1m 18sRunning iteration 1361/1500... Est. remaining: 1m 13sRunning iteration 1371/1500... Est. remaining: 1m 8sRunning iteration 1381/1500... Est. remaining: 1m 2sRunning iteration 1391/1500... Est. remaining: 0m 57sRunning iteration 1401/1500... Est. remaining: 0m 52sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.45362519204436), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 47sRunning iteration 1421/1500... Est. remaining: 0m 41sRunning iteration 1431/1500... Est. remaining: 0m 36sRunning iteration 1441/1500... Est. remaining: 0m 31sRunning iteration 1451/1500... Est. remaining: 0m 26sRunning iteration 1461/1500... Est. remaining: 0m 20sRunning iteration 1471/1500... Est. remaining: 0m 15sRunning iteration 1481/1500... Est. remaining: 0m 10sRunning iteration 1491/1500... Est. remaining: 0m 5s
Monte Carlo simulation completed in 13.1 minutes
Best normalized score: 1.45
best_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.45362519204436), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 156, 173] (score: 1.4536)

Monte Carlo simulation completed in 13.1 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 156, 173] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,137,908,960.99
Average Annualized Gain: 49.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Mon Aug 25 13:42:07 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $783,168,875
Annual Return: 38.42%
Sharpe Ratio: 1.30814
Sortino Ratio: 1.238
Max Drawdown: -60.4%
Avg Drawdown: -13.4%
Normalized Score: -1.398
Lookback periods: [110, 122, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,087,503,003
Annual Return: 39.74%
Sharpe Ratio: 1.34208
Sortino Ratio: 1.272
Max Drawdown: -55.0%
Avg Drawdown: -13.1%
Normalized Score: -0.949
Lookback periods: [67, 110, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $701,164,760
Annual Return: 37.98%
Sharpe Ratio: 1.32973
Sortino Ratio: 1.249
Max Drawdown: -52.3%
Avg Drawdown: -11.7%
Normalized Score: -0.912
Lookback periods: [75, 92, 145] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,466,800,938
Annual Return: 43.08%
Sharpe Ratio: 1.41958
Sortino Ratio: 1.382
Max Drawdown: -66.0%
Avg Drawdown: -12.9%
Normalized Score: -0.682
Lookback periods: [109, 145, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,772,599,467
Annual Return: 46.63%
Sharpe Ratio: 1.51307
Sortino Ratio: 1.473
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.327
Lookback periods: [179, 180, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 36m 51sRunning iteration 21/1500... Est. remaining: 24m 45sRunning iteration 31/1500... Est. remaining: 20m 32sRunning iteration 41/1500... Est. remaining: 18m 26sRunning iteration 51/1500... Est. remaining: 17m 6sRunning iteration 61/1500... Est. remaining: 16m 13sRunning iteration 71/1500... Est. remaining: 15m 33sRunning iteration 81/1500... Est. remaining: 15m 1sRunning iteration 91/1500... Est. remaining: 14m 35sRunning iteration 101/1500... Est. remaining: 14m 14sbest_combination: {'lookbacks': [179, 180, 185], 'score': np.float64(0.3266582534929829), 'visits': 1}
Running iteration 111/1500... Est. remaining: 13m 55sRunning iteration 121/1500... Est. remaining: 13m 39sRunning iteration 131/1500... Est. remaining: 13m 25sRunning iteration 141/1500... Est. remaining: 13m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,465,271,301
Annual Return: 47.11%
Sharpe Ratio: 1.51748
Sortino Ratio: 1.489
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.398
Lookback periods: [175, 181, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 13m 11sRunning iteration 161/1500... Est. remaining: 12m 59sRunning iteration 171/1500... Est. remaining: 12m 48sRunning iteration 181/1500... Est. remaining: 12m 37sRunning iteration 191/1500... Est. remaining: 12m 27sRunning iteration 201/1500... Est. remaining: 12m 17sbest_combination: {'lookbacks': [175, 181, 188], 'score': np.float64(0.3978318861556141), 'visits': 1}
Running iteration 211/1500... Est. remaining: 12m 8sRunning iteration 221/1500... Est. remaining: 11m 58sRunning iteration 231/1500... Est. remaining: 11m 49sRunning iteration 241/1500... Est. remaining: 11m 40sRunning iteration 251/1500... Est. remaining: 11m 33sRunning iteration 261/1500... Est. remaining: 11m 24sRunning iteration 271/1500... Est. remaining: 11m 16sRunning iteration 281/1500... Est. remaining: 11m 9sRunning iteration 291/1500... Est. remaining: 11m 2sRunning iteration 301/1500... Est. remaining: 10m 54sbest_combination: {'lookbacks': [175, 181, 188], 'score': np.float64(0.3978318861556141), 'visits': 1}
Running iteration 311/1500... Est. remaining: 10m 47sRunning iteration 321/1500... Est. remaining: 10m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,521,131,645
Annual Return: 47.76%
Sharpe Ratio: 1.56269
Sortino Ratio: 1.519
Max Drawdown: -56.8%
Avg Drawdown: -11.9%
Normalized Score: 0.617
Lookback periods: [142, 159, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 331/1500... Est. remaining: 10m 38sRunning iteration 341/1500... Est. remaining: 10m 31sRunning iteration 351/1500... Est. remaining: 10m 25sRunning iteration 361/1500... Est. remaining: 10m 18sRunning iteration 371/1500... Est. remaining: 10m 12sRunning iteration 381/1500... Est. remaining: 10m 5sRunning iteration 391/1500... Est. remaining: 9m 59sRunning iteration 401/1500... Est. remaining: 9m 53sbest_combination: {'lookbacks': [142, 159, 178], 'score': np.float64(0.6174384519128736), 'visits': 1}
Running iteration 411/1500... Est. remaining: 9m 47sRunning iteration 421/1500... Est. remaining: 9m 41sRunning iteration 431/1500... Est. remaining: 9m 34sRunning iteration 441/1500... Est. remaining: 9m 28sRunning iteration 451/1500... Est. remaining: 9m 22sRunning iteration 461/1500... Est. remaining: 9m 17sRunning iteration 471/1500... Est. remaining: 9m 11sRunning iteration 481/1500... Est. remaining: 9m 5sRunning iteration 491/1500... Est. remaining: 8m 59sRunning iteration 501/1500... Est. remaining: 8m 53sbest_combination: {'lookbacks': [142, 159, 178], 'score': np.float64(0.6174384519128736), 'visits': 1}
Running iteration 511/1500... Est. remaining: 8m 47sRunning iteration 521/1500... Est. remaining: 8m 42sRunning iteration 531/1500... Est. remaining: 8m 36sRunning iteration 541/1500... Est. remaining: 8m 30sRunning iteration 551/1500... Est. remaining: 8m 24sRunning iteration 561/1500... Est. remaining: 8m 19sRunning iteration 571/1500... Est. remaining: 8m 13sRunning iteration 581/1500... Est. remaining: 8m 8sRunning iteration 591/1500... Est. remaining: 8m 2sRunning iteration 601/1500... Est. remaining: 7m 56sbest_combination: {'lookbacks': [142, 159, 178], 'score': np.float64(0.6174384519128736), 'visits': 1}
Running iteration 611/1500... Est. remaining: 7m 51sRunning iteration 621/1500... Est. remaining: 7m 45sRunning iteration 631/1500... Est. remaining: 7m 40sRunning iteration 641/1500... Est. remaining: 7m 34sRunning iteration 651/1500... Est. remaining: 7m 29sRunning iteration 661/1500... Est. remaining: 7m 23sRunning iteration 671/1500... Est. remaining: 7m 18sRunning iteration 681/1500... Est. remaining: 7m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,137,908,961
Annual Return: 49.44%
Sharpe Ratio: 1.62711
Sortino Ratio: 1.589
Max Drawdown: -57.2%
Avg Drawdown: -10.9%
Normalized Score: 1.093
Lookback periods: [136, 156, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 7m 8sRunning iteration 701/1500... Est. remaining: 7m 3sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.0934831303509183), 'visits': 1}
Running iteration 711/1500... Est. remaining: 6m 57sRunning iteration 721/1500... Est. remaining: 6m 52sRunning iteration 731/1500... Est. remaining: 6m 46sRunning iteration 741/1500... Est. remaining: 6m 41sRunning iteration 751/1500... Est. remaining: 6m 35sRunning iteration 761/1500... Est. remaining: 6m 30sRunning iteration 771/1500... Est. remaining: 6m 25sRunning iteration 781/1500... Est. remaining: 6m 19sRunning iteration 791/1500... Est. remaining: 6m 14sRunning iteration 801/1500... Est. remaining: 6m 8sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.0934831303509183), 'visits': 1}
Running iteration 811/1500... Est. remaining: 6m 3sRunning iteration 821/1500... Est. remaining: 5m 58sRunning iteration 831/1500... Est. remaining: 5m 52sRunning iteration 841/1500... Est. remaining: 5m 47sRunning iteration 851/1500... Est. remaining: 5m 41sRunning iteration 861/1500... Est. remaining: 5m 36sRunning iteration 871/1500... Est. remaining: 5m 31sRunning iteration 881/1500... Est. remaining: 5m 25sRunning iteration 891/1500... Est. remaining: 5m 20sRunning iteration 901/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.0934831303509183), 'visits': 1}
Running iteration 911/1500... Est. remaining: 5m 9sRunning iteration 921/1500... Est. remaining: 5m 4sRunning iteration 931/1500... Est. remaining: 4m 59sRunning iteration 941/1500... Est. remaining: 4m 53sRunning iteration 951/1500... Est. remaining: 4m 48sRunning iteration 961/1500... Est. remaining: 4m 43sRunning iteration 971/1500... Est. remaining: 4m 38sRunning iteration 981/1500... Est. remaining: 4m 32sRunning iteration 991/1500... Est. remaining: 4m 27sRunning iteration 1001/1500... Est. remaining: 4m 22sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.0934831303509183), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 4m 16sRunning iteration 1021/1500... Est. remaining: 4m 11sRunning iteration 1031/1500... Est. remaining: 4m 6sRunning iteration 1041/1500... Est. remaining: 4m 1sRunning iteration 1051/1500... Est. remaining: 3m 55sRunning iteration 1061/1500... Est. remaining: 3m 50sRunning iteration 1071/1500... Est. remaining: 3m 45sRunning iteration 1081/1500... Est. remaining: 3m 39sRunning iteration 1091/1500... Est. remaining: 3m 34sRunning iteration 1101/1500... Est. remaining: 3m 29sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.0934831303509183), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 3m 24sRunning iteration 1121/1500... Est. remaining: 3m 18sRunning iteration 1131/1500... Est. remaining: 3m 13sRunning iteration 1141/1500... Est. remaining: 3m 7sRunning iteration 1151/1500... Est. remaining: 3m 1sRunning iteration 1161/1500... Est. remaining: 2m 55sRunning iteration 1171/1500... Est. remaining: 2m 50sRunning iteration 1181/1500... Est. remaining: 2m 44sRunning iteration 1191/1500... Est. remaining: 2m 38sRunning iteration 1201/1500... Est. remaining: 2m 32sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.0934831303509183), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 2m 27sRunning iteration 1221/1500... Est. remaining: 2m 21sRunning iteration 1231/1500... Est. remaining: 2m 16sRunning iteration 1241/1500... Est. remaining: 2m 10sRunning iteration 1251/1500... Est. remaining: 2m 5sRunning iteration 1261/1500... Est. remaining: 1m 59sRunning iteration 1271/1500... Est. remaining: 1m 54sRunning iteration 1281/1500... Est. remaining: 1m 49sRunning iteration 1291/1500... Est. remaining: 1m 44sRunning iteration 1301/1500... Est. remaining: 1m 38sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.0934831303509183), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 1m 33sRunning iteration 1321/1500... Est. remaining: 1m 28sRunning iteration 1331/1500... Est. remaining: 1m 23sRunning iteration 1341/1500... Est. remaining: 1m 18sRunning iteration 1351/1500... Est. remaining: 1m 13sRunning iteration 1361/1500... Est. remaining: 1m 8sRunning iteration 1371/1500... Est. remaining: 1m 2sRunning iteration 1381/1500... Est. remaining: 0m 57sRunning iteration 1391/1500... Est. remaining: 0m 53sRunning iteration 1401/1500... Est. remaining: 0m 48sbest_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.0934831303509183), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 43sRunning iteration 1421/1500... Est. remaining: 0m 38sRunning iteration 1431/1500... Est. remaining: 0m 33sRunning iteration 1441/1500... Est. remaining: 0m 28sRunning iteration 1451/1500... Est. remaining: 0m 23sRunning iteration 1461/1500... Est. remaining: 0m 18sRunning iteration 1471/1500... Est. remaining: 0m 14sRunning iteration 1481/1500... Est. remaining: 0m 9sRunning iteration 1491/1500... Est. remaining: 0m 4s
Monte Carlo simulation completed in 11.7 minutes
Best normalized score: 1.09
best_combination: {'lookbacks': [136, 156, 173], 'score': np.float64(1.0934831303509183), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [136, 156, 173] (score: 1.0935)

Monte Carlo simulation completed in 11.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [136, 156, 173] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 39 selections (9.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,137,908,960.99
Average Annualized Gain: 49.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Mon Aug 25 13:53:58 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $356,238,004
Annual Return: 35.31%
Sharpe Ratio: 1.21857
Sortino Ratio: 1.133
Max Drawdown: -63.7%
Avg Drawdown: -14.3%
Normalized Score: -1.564
Lookback periods: [83, 140, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,929,130,818
Annual Return: 43.79%
Sharpe Ratio: 1.45880
Sortino Ratio: 1.410
Max Drawdown: -58.7%
Avg Drawdown: -12.7%
Normalized Score: -0.141
Lookback periods: [109, 139, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,003,463,243
Annual Return: 42.22%
Sharpe Ratio: 1.44224
Sortino Ratio: 1.380
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: 0.118
Lookback periods: [88, 112, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 15m 8sRunning iteration 31/1500... Est. remaining: 12m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,810,890,436
Annual Return: 45.86%
Sharpe Ratio: 1.49853
Sortino Ratio: 1.465
Max Drawdown: -55.0%
Avg Drawdown: -11.0%
Normalized Score: 0.385
Lookback periods: [157, 165, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 11m 35sRunning iteration 51/1500... Est. remaining: 10m 41sRunning iteration 61/1500... Est. remaining: 10m 3sRunning iteration 71/1500... Est. remaining: 9m 35sRunning iteration 81/1500... Est. remaining: 9m 13sRunning iteration 91/1500... Est. remaining: 8m 56sRunning iteration 101/1500... Est. remaining: 8m 40sbest_combination: {'lookbacks': [157, 165, 172], 'score': np.float64(0.38533266500664903), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 28sRunning iteration 121/1500... Est. remaining: 8m 17sRunning iteration 131/1500... Est. remaining: 8m 7sRunning iteration 141/1500... Est. remaining: 7m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,206,322,414
Annual Return: 44.17%
Sharpe Ratio: 1.58573
Sortino Ratio: 1.493
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.343
Lookback periods: [50, 54, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/1500... Est. remaining: 7m 56sRunning iteration 161/1500... Est. remaining: 7m 48sRunning iteration 171/1500... Est. remaining: 7m 41sRunning iteration 181/1500... Est. remaining: 7m 33sRunning iteration 191/1500... Est. remaining: 7m 24sRunning iteration 201/1500... Est. remaining: 7m 16sbest_combination: {'lookbacks': [50, 54, 96], 'score': np.float64(1.3428431555766314), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 9sRunning iteration 221/1500... Est. remaining: 7m 2sRunning iteration 231/1500... Est. remaining: 6m 56sRunning iteration 241/1500... Est. remaining: 6m 51sRunning iteration 251/1500... Est. remaining: 6m 45sRunning iteration 261/1500... Est. remaining: 6m 39sRunning iteration 271/1500... Est. remaining: 6m 33sRunning iteration 281/1500... Est. remaining: 6m 28sRunning iteration 291/1500... Est. remaining: 6m 23sRunning iteration 301/1500... Est. remaining: 6m 20sbest_combination: {'lookbacks': [50, 54, 96], 'score': np.float64(1.3428431555766314), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 16sRunning iteration 321/1500... Est. remaining: 6m 12sRunning iteration 331/1500... Est. remaining: 6m 9sRunning iteration 341/1500... Est. remaining: 6m 5sRunning iteration 351/1500... Est. remaining: 6m 2sRunning iteration 361/1500... Est. remaining: 5m 58sRunning iteration 371/1500... Est. remaining: 5m 55sRunning iteration 381/1500... Est. remaining: 5m 51sRunning iteration 391/1500... Est. remaining: 5m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,460,491,708
Annual Return: 44.48%
Sharpe Ratio: 1.60922
Sortino Ratio: 1.516
Max Drawdown: -37.5%
Avg Drawdown: -8.5%
Normalized Score: 1.377
Lookback periods: [52, 52, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/1500... Est. remaining: 5m 46sbest_combination: {'lookbacks': [52, 52, 94], 'score': np.float64(1.3773383650256694), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 43sRunning iteration 421/1500... Est. remaining: 5m 39sRunning iteration 431/1500... Est. remaining: 5m 36sRunning iteration 441/1500... Est. remaining: 5m 32sRunning iteration 451/1500... Est. remaining: 5m 29sRunning iteration 461/1500... Est. remaining: 5m 25sRunning iteration 471/1500... Est. remaining: 5m 22sRunning iteration 481/1500... Est. remaining: 5m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.518
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 5m 16sRunning iteration 501/1500... Est. remaining: 5m 13sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.5179583892430515), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 10sRunning iteration 521/1500... Est. remaining: 5m 6sRunning iteration 531/1500... Est. remaining: 5m 3sRunning iteration 541/1500... Est. remaining: 5m 0sRunning iteration 551/1500... Est. remaining: 4m 56sRunning iteration 561/1500... Est. remaining: 4m 53sRunning iteration 571/1500... Est. remaining: 4m 50sRunning iteration 581/1500... Est. remaining: 4m 46sRunning iteration 591/1500... Est. remaining: 4m 43sRunning iteration 601/1500... Est. remaining: 4m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.528
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.5280139833902764), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 38sRunning iteration 621/1500... Est. remaining: 4m 34sRunning iteration 631/1500... Est. remaining: 4m 31sRunning iteration 641/1500... Est. remaining: 4m 28sRunning iteration 651/1500... Est. remaining: 4m 25sRunning iteration 661/1500... Est. remaining: 4m 21sRunning iteration 671/1500... Est. remaining: 4m 18sRunning iteration 681/1500... Est. remaining: 4m 15sRunning iteration 691/1500... Est. remaining: 4m 12sRunning iteration 701/1500... Est. remaining: 4m 9sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.5280139833902764), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 5sRunning iteration 721/1500... Est. remaining: 4m 2sRunning iteration 731/1500... Est. remaining: 3m 59sRunning iteration 741/1500... Est. remaining: 3m 56sRunning iteration 751/1500... Est. remaining: 3m 52sRunning iteration 761/1500... Est. remaining: 3m 49sRunning iteration 771/1500... Est. remaining: 3m 46sRunning iteration 781/1500... Est. remaining: 3m 43sRunning iteration 791/1500... Est. remaining: 3m 40sRunning iteration 801/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.5280139833902764), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 33sRunning iteration 821/1500... Est. remaining: 3m 30sRunning iteration 831/1500... Est. remaining: 3m 27sRunning iteration 841/1500... Est. remaining: 3m 24sRunning iteration 851/1500... Est. remaining: 3m 21sRunning iteration 861/1500... Est. remaining: 3m 18sRunning iteration 871/1500... Est. remaining: 3m 14sRunning iteration 881/1500... Est. remaining: 3m 11sRunning iteration 891/1500... Est. remaining: 3m 8sRunning iteration 901/1500... Est. remaining: 3m 5sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.5280139833902764), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 2sRunning iteration 921/1500... Est. remaining: 2m 59sRunning iteration 931/1500... Est. remaining: 2m 56sRunning iteration 941/1500... Est. remaining: 2m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.571
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 40sRunning iteration 991/1500... Est. remaining: 2m 37sRunning iteration 1001/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.5713829517733378), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.723
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 25sRunning iteration 1041/1500... Est. remaining: 2m 22sRunning iteration 1051/1500... Est. remaining: 2m 19sRunning iteration 1061/1500... Est. remaining: 2m 16sRunning iteration 1071/1500... Est. remaining: 2m 12sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 3sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7232898732048199), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 0sRunning iteration 1121/1500... Est. remaining: 1m 57sRunning iteration 1131/1500... Est. remaining: 1m 54sRunning iteration 1141/1500... Est. remaining: 1m 51sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.7232898732048199), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 29sRunning iteration 1221/1500... Est. remaining: 1m 26sRunning iteration 1231/1500... Est. remaining: 1m 23sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,518,576,195
Annual Return: 46.44%
Sharpe Ratio: 1.66834
Sortino Ratio: 1.581
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.775
Lookback periods: [52, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.7754668047497784), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.7754668047497784), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.78
best_combination: {'lookbacks': [52, 52, 98], 'score': np.float64(1.7754668047497784), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 98] (score: 1.7755)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 97 selections (23.3%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 77 selections (18.5%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,518,576,194.88
Average Annualized Gain: 46.4%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Mon Aug 25 14:01:45 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,250,616,017
Annual Return: 42.70%
Sharpe Ratio: 1.40572
Sortino Ratio: 1.363
Max Drawdown: -65.6%
Avg Drawdown: -13.0%
Normalized Score: -0.834
Lookback periods: [142, 179, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,030,820,304
Annual Return: 39.52%
Sharpe Ratio: 1.35606
Sortino Ratio: 1.268
Max Drawdown: -58.8%
Avg Drawdown: -12.2%
Normalized Score: -0.748
Lookback periods: [50, 114, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,086,801,834
Annual Return: 42.39%
Sharpe Ratio: 1.41231
Sortino Ratio: 1.354
Max Drawdown: -59.4%
Avg Drawdown: -13.1%
Normalized Score: -0.642
Lookback periods: [99, 145, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,457,507,927
Annual Return: 40.92%
Sharpe Ratio: 1.40486
Sortino Ratio: 1.324
Max Drawdown: -52.3%
Avg Drawdown: -11.7%
Normalized Score: -0.183
Lookback periods: [91, 97, 126] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 47sRunning iteration 21/1500... Est. remaining: 15m 59sRunning iteration 31/1500... Est. remaining: 13m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,268,935,547
Annual Return: 45.36%
Sharpe Ratio: 1.47862
Sortino Ratio: 1.438
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: -0.042
Lookback periods: [169, 185, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 12m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,875,746,661
Annual Return: 44.96%
Sharpe Ratio: 1.50196
Sortino Ratio: 1.457
Max Drawdown: -58.5%
Avg Drawdown: -11.9%
Normalized Score: 0.011
Lookback periods: [139, 152, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/1500... Est. remaining: 11m 23sRunning iteration 61/1500... Est. remaining: 10m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,402,388,688
Annual Return: 45.49%
Sharpe Ratio: 1.50191
Sortino Ratio: 1.458
Max Drawdown: -55.7%
Avg Drawdown: -12.5%
Normalized Score: 0.028
Lookback periods: [130, 136, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 10m 21sRunning iteration 81/1500... Est. remaining: 9m 54sRunning iteration 91/1500... Est. remaining: 9m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,712,573,385
Annual Return: 46.59%
Sharpe Ratio: 1.53424
Sortino Ratio: 1.489
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 0.362
Lookback periods: [140, 156, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 9m 25sbest_combination: {'lookbacks': [140, 156, 171], 'score': np.float64(0.3619998582617133), 'visits': 1}
Running iteration 111/1500... Est. remaining: 9m 9sRunning iteration 121/1500... Est. remaining: 8m 54sRunning iteration 131/1500... Est. remaining: 8m 41sRunning iteration 141/1500... Est. remaining: 8m 30sRunning iteration 151/1500... Est. remaining: 8m 20sRunning iteration 161/1500... Est. remaining: 8m 10sRunning iteration 171/1500... Est. remaining: 8m 1sRunning iteration 181/1500... Est. remaining: 7m 50sRunning iteration 191/1500... Est. remaining: 7m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,453,574,853
Annual Return: 47.11%
Sharpe Ratio: 1.55927
Sortino Ratio: 1.510
Max Drawdown: -56.0%
Avg Drawdown: -11.2%
Normalized Score: 0.489
Lookback periods: [138, 157, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/1500... Est. remaining: 7m 36sbest_combination: {'lookbacks': [138, 157, 186], 'score': np.float64(0.48871090846166043), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 28sRunning iteration 221/1500... Est. remaining: 7m 20sRunning iteration 231/1500... Est. remaining: 7m 13sRunning iteration 241/1500... Est. remaining: 7m 5sRunning iteration 251/1500... Est. remaining: 6m 58sRunning iteration 261/1500... Est. remaining: 6m 52sRunning iteration 271/1500... Est. remaining: 6m 45sRunning iteration 281/1500... Est. remaining: 6m 40sRunning iteration 291/1500... Est. remaining: 6m 36sRunning iteration 301/1500... Est. remaining: 6m 31sbest_combination: {'lookbacks': [138, 157, 186], 'score': np.float64(0.48871090846166043), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,325,803,446
Annual Return: 48.19%
Sharpe Ratio: 1.57323
Sortino Ratio: 1.538
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.490
Lookback periods: [128, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/1500... Est. remaining: 6m 26sRunning iteration 331/1500... Est. remaining: 6m 22sRunning iteration 341/1500... Est. remaining: 6m 18sRunning iteration 351/1500... Est. remaining: 6m 14sRunning iteration 361/1500... Est. remaining: 6m 10sRunning iteration 371/1500... Est. remaining: 6m 6sRunning iteration 381/1500... Est. remaining: 6m 2sRunning iteration 391/1500... Est. remaining: 5m 58sRunning iteration 401/1500... Est. remaining: 5m 55sbest_combination: {'lookbacks': [128, 155, 156], 'score': np.float64(0.49005891098324456), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 51sRunning iteration 421/1500... Est. remaining: 5m 47sRunning iteration 431/1500... Est. remaining: 5m 44sRunning iteration 441/1500... Est. remaining: 5m 40sRunning iteration 451/1500... Est. remaining: 5m 36sRunning iteration 461/1500... Est. remaining: 5m 33sRunning iteration 471/1500... Est. remaining: 5m 29sRunning iteration 481/1500... Est. remaining: 5m 26sRunning iteration 491/1500... Est. remaining: 5m 22sRunning iteration 501/1500... Est. remaining: 5m 19sbest_combination: {'lookbacks': [128, 155, 156], 'score': np.float64(0.49005891098324456), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 15sRunning iteration 521/1500... Est. remaining: 5m 12sRunning iteration 531/1500... Est. remaining: 5m 8sRunning iteration 541/1500... Est. remaining: 5m 5sRunning iteration 551/1500... Est. remaining: 5m 2sRunning iteration 561/1500... Est. remaining: 4m 58sRunning iteration 571/1500... Est. remaining: 4m 55sRunning iteration 581/1500... Est. remaining: 4m 51sRunning iteration 591/1500... Est. remaining: 4m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,528,882,800
Annual Return: 41.12%
Sharpe Ratio: 1.48183
Sortino Ratio: 1.385
Max Drawdown: -37.2%
Avg Drawdown: -9.5%
Normalized Score: 1.084
Lookback periods: [50, 51, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,231,943,420
Annual Return: 40.24%
Sharpe Ratio: 1.47499
Sortino Ratio: 1.368
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.241
Lookback periods: [50, 50, 92] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,929,534,714
Annual Return: 43.79%
Sharpe Ratio: 1.57927
Sortino Ratio: 1.479
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.777
Lookback periods: [50, 52, 99] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/1500... Est. remaining: 4m 48sbest_combination: {'lookbacks': [50, 52, 99], 'score': np.float64(1.7774073706013351), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 44sRunning iteration 621/1500... Est. remaining: 4m 41sRunning iteration 631/1500... Est. remaining: 4m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,833,624,762
Annual Return: 43.65%
Sharpe Ratio: 1.57405
Sortino Ratio: 1.478
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.872
Lookback periods: [50, 50, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 641/1500... Est. remaining: 4m 35sRunning iteration 651/1500... Est. remaining: 4m 32sRunning iteration 661/1500... Est. remaining: 4m 28sRunning iteration 671/1500... Est. remaining: 4m 25sRunning iteration 681/1500... Est. remaining: 4m 21sRunning iteration 691/1500... Est. remaining: 4m 18sRunning iteration 701/1500... Est. remaining: 4m 14sbest_combination: {'lookbacks': [50, 50, 95], 'score': np.float64(1.872321333494482), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 11sRunning iteration 721/1500... Est. remaining: 4m 8sRunning iteration 731/1500... Est. remaining: 4m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.011
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 4m 2sRunning iteration 751/1500... Est. remaining: 3m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 2.049
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 761/1500... Est. remaining: 3m 56sRunning iteration 771/1500... Est. remaining: 3m 52sRunning iteration 781/1500... Est. remaining: 3m 49sRunning iteration 791/1500... Est. remaining: 3m 46sRunning iteration 801/1500... Est. remaining: 3m 43sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(2.049206497859445), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 39sRunning iteration 821/1500... Est. remaining: 3m 36sRunning iteration 831/1500... Est. remaining: 3m 33sRunning iteration 841/1500... Est. remaining: 3m 29sRunning iteration 851/1500... Est. remaining: 3m 26sRunning iteration 861/1500... Est. remaining: 3m 23sRunning iteration 871/1500... Est. remaining: 3m 20sRunning iteration 881/1500... Est. remaining: 3m 16sRunning iteration 891/1500... Est. remaining: 3m 13sRunning iteration 901/1500... Est. remaining: 3m 10sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(2.049206497859445), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 6sRunning iteration 921/1500... Est. remaining: 3m 3sRunning iteration 931/1500... Est. remaining: 3m 0sRunning iteration 941/1500... Est. remaining: 2m 57sRunning iteration 951/1500... Est. remaining: 2m 53sRunning iteration 961/1500... Est. remaining: 2m 50sRunning iteration 971/1500... Est. remaining: 2m 47sRunning iteration 981/1500... Est. remaining: 2m 44sRunning iteration 991/1500... Est. remaining: 2m 40sRunning iteration 1001/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(2.049206497859445), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 34sRunning iteration 1021/1500... Est. remaining: 2m 31sRunning iteration 1031/1500... Est. remaining: 2m 27sRunning iteration 1041/1500... Est. remaining: 2m 24sRunning iteration 1051/1500... Est. remaining: 2m 21sRunning iteration 1061/1500... Est. remaining: 2m 18sRunning iteration 1071/1500... Est. remaining: 2m 15sRunning iteration 1081/1500... Est. remaining: 2m 11sRunning iteration 1091/1500... Est. remaining: 2m 8sRunning iteration 1101/1500... Est. remaining: 2m 5sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(2.049206497859445), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 2sRunning iteration 1121/1500... Est. remaining: 1m 59sRunning iteration 1131/1500... Est. remaining: 1m 55sRunning iteration 1141/1500... Est. remaining: 1m 52sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 46sRunning iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 40sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(2.049206497859445), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 2.173
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 18sRunning iteration 1261/1500... Est. remaining: 1m 15sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.17255894006477), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 53sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.17255894006477), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 2.17
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.17255894006477), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 2.1726)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Mon Aug 25 14:09:39 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $399,363,016
Annual Return: 35.76%
Sharpe Ratio: 1.19113
Sortino Ratio: 1.121
Max Drawdown: -69.3%
Avg Drawdown: -14.4%
Normalized Score: -1.847
Lookback periods: [77, 185, 191] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $880,894,850
Annual Return: 38.89%
Sharpe Ratio: 1.37282
Sortino Ratio: 1.253
Max Drawdown: -55.0%
Avg Drawdown: -12.5%
Normalized Score: -0.609
Lookback periods: [55, 120, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,862,653,710
Annual Return: 45.91%
Sharpe Ratio: 1.51846
Sortino Ratio: 1.481
Max Drawdown: -67.0%
Avg Drawdown: -11.9%
Normalized Score: -0.166
Lookback periods: [118, 155, 158] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 21m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,532,261,516
Annual Return: 45.61%
Sharpe Ratio: 1.51091
Sortino Ratio: 1.465
Max Drawdown: -61.6%
Avg Drawdown: -12.5%
Normalized Score: -0.110
Lookback periods: [138, 138, 144] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 15m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,526,290,015
Annual Return: 45.61%
Sharpe Ratio: 1.48414
Sortino Ratio: 1.439
Max Drawdown: -59.0%
Avg Drawdown: -12.0%
Normalized Score: -0.019
Lookback periods: [179, 184, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 13m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,613,231,681
Annual Return: 45.69%
Sharpe Ratio: 1.48526
Sortino Ratio: 1.442
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 0.032
Lookback periods: [179, 179, 183] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 12m 15sRunning iteration 51/1500... Est. remaining: 11m 11sRunning iteration 61/1500... Est. remaining: 10m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,759,495,400
Annual Return: 41.69%
Sharpe Ratio: 1.45377
Sortino Ratio: 1.368
Max Drawdown: -52.3%
Avg Drawdown: -10.9%
Normalized Score: 0.041
Lookback periods: [53, 75, 107] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 10m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,996,343,327
Annual Return: 45.09%
Sharpe Ratio: 1.54278
Sortino Ratio: 1.452
Max Drawdown: -56.4%
Avg Drawdown: -11.4%
Normalized Score: 0.206
Lookback periods: [55, 151, 152] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 9m 57sRunning iteration 91/1500... Est. remaining: 9m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,209,476,672
Annual Return: 47.58%
Sharpe Ratio: 1.56283
Sortino Ratio: 1.515
Max Drawdown: -58.1%
Avg Drawdown: -12.0%
Normalized Score: 0.288
Lookback periods: [145, 159, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,261,415,422
Annual Return: 40.34%
Sharpe Ratio: 1.44830
Sortino Ratio: 1.338
Max Drawdown: -36.9%
Avg Drawdown: -10.0%
Normalized Score: 0.569
Lookback periods: [50, 54, 76] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 9m 35sbest_combination: {'lookbacks': [50, 54, 76], 'score': np.float64(0.5685826810467808), 'visits': 1}
Running iteration 111/1500... Est. remaining: 9m 19sRunning iteration 121/1500... Est. remaining: 9m 4sRunning iteration 131/1500... Est. remaining: 8m 53sRunning iteration 141/1500... Est. remaining: 8m 42sRunning iteration 151/1500... Est. remaining: 8m 29sRunning iteration 161/1500... Est. remaining: 8m 16sRunning iteration 171/1500... Est. remaining: 8m 4sRunning iteration 181/1500... Est. remaining: 7m 54sRunning iteration 191/1500... Est. remaining: 7m 45sRunning iteration 201/1500... Est. remaining: 7m 36sbest_combination: {'lookbacks': [50, 54, 76], 'score': np.float64(0.5685826810467808), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 27sRunning iteration 221/1500... Est. remaining: 7m 19sRunning iteration 231/1500... Est. remaining: 7m 11sRunning iteration 241/1500... Est. remaining: 7m 4sRunning iteration 251/1500... Est. remaining: 6m 59sRunning iteration 261/1500... Est. remaining: 6m 54sRunning iteration 271/1500... Est. remaining: 6m 50sRunning iteration 281/1500... Est. remaining: 6m 46sRunning iteration 291/1500... Est. remaining: 6m 42sRunning iteration 301/1500... Est. remaining: 6m 38sbest_combination: {'lookbacks': [50, 54, 76], 'score': np.float64(0.5685826810467808), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 34sRunning iteration 321/1500... Est. remaining: 6m 29sRunning iteration 331/1500... Est. remaining: 6m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,714,326,819
Annual Return: 41.59%
Sharpe Ratio: 1.47287
Sortino Ratio: 1.382
Max Drawdown: -35.6%
Avg Drawdown: -9.5%
Normalized Score: 0.806
Lookback periods: [51, 53, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 341/1500... Est. remaining: 6m 23sRunning iteration 351/1500... Est. remaining: 6m 19sRunning iteration 361/1500... Est. remaining: 6m 15sRunning iteration 371/1500... Est. remaining: 6m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,275,652,430
Annual Return: 42.75%
Sharpe Ratio: 1.51314
Sortino Ratio: 1.406
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.955
Lookback periods: [51, 52, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/1500... Est. remaining: 6m 9sRunning iteration 391/1500... Est. remaining: 6m 5sRunning iteration 401/1500... Est. remaining: 6m 2sbest_combination: {'lookbacks': [51, 52, 82], 'score': np.float64(0.9546118560765144), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,695,996,655
Annual Return: 43.45%
Sharpe Ratio: 1.54559
Sortino Ratio: 1.450
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.086
Lookback periods: [52, 55, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/1500... Est. remaining: 5m 55sRunning iteration 431/1500... Est. remaining: 5m 52sRunning iteration 441/1500... Est. remaining: 5m 48sRunning iteration 451/1500... Est. remaining: 5m 44sRunning iteration 461/1500... Est. remaining: 5m 40sRunning iteration 471/1500... Est. remaining: 5m 36sRunning iteration 481/1500... Est. remaining: 5m 32sRunning iteration 491/1500... Est. remaining: 5m 29sRunning iteration 501/1500... Est. remaining: 5m 25sbest_combination: {'lookbacks': [52, 55, 83], 'score': np.float64(1.0860193407181769), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 21sRunning iteration 521/1500... Est. remaining: 5m 17sRunning iteration 531/1500... Est. remaining: 5m 14sRunning iteration 541/1500... Est. remaining: 5m 10sRunning iteration 551/1500... Est. remaining: 5m 6sRunning iteration 561/1500... Est. remaining: 5m 3sRunning iteration 571/1500... Est. remaining: 4m 59sRunning iteration 581/1500... Est. remaining: 4m 55sRunning iteration 591/1500... Est. remaining: 4m 52sRunning iteration 601/1500... Est. remaining: 4m 48sbest_combination: {'lookbacks': [52, 55, 83], 'score': np.float64(1.0860193407181769), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 45sRunning iteration 621/1500... Est. remaining: 4m 41sRunning iteration 631/1500... Est. remaining: 4m 38sRunning iteration 641/1500... Est. remaining: 4m 34sRunning iteration 651/1500... Est. remaining: 4m 31sRunning iteration 661/1500... Est. remaining: 4m 27sRunning iteration 671/1500... Est. remaining: 4m 24sRunning iteration 681/1500... Est. remaining: 4m 20sRunning iteration 691/1500... Est. remaining: 4m 17sRunning iteration 701/1500... Est. remaining: 4m 13sbest_combination: {'lookbacks': [52, 55, 83], 'score': np.float64(1.0860193407181769), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 10sRunning iteration 721/1500... Est. remaining: 4m 7sRunning iteration 731/1500... Est. remaining: 4m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,779,940,917
Annual Return: 43.57%
Sharpe Ratio: 1.56839
Sortino Ratio: 1.467
Max Drawdown: -37.2%
Avg Drawdown: -9.3%
Normalized Score: 1.095
Lookback periods: [50, 52, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,796,731,139
Annual Return: 43.60%
Sharpe Ratio: 1.56916
Sortino Ratio: 1.470
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.343
Lookback periods: [50, 50, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.494
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 741/1500... Est. remaining: 4m 2sRunning iteration 751/1500... Est. remaining: 3m 59sRunning iteration 761/1500... Est. remaining: 3m 55sRunning iteration 771/1500... Est. remaining: 3m 52sRunning iteration 781/1500... Est. remaining: 3m 48sRunning iteration 791/1500... Est. remaining: 3m 45sRunning iteration 801/1500... Est. remaining: 3m 42sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.4942930468605162), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 38sRunning iteration 821/1500... Est. remaining: 3m 35sRunning iteration 831/1500... Est. remaining: 3m 32sRunning iteration 841/1500... Est. remaining: 3m 28sRunning iteration 851/1500... Est. remaining: 3m 25sRunning iteration 861/1500... Est. remaining: 3m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.543
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 871/1500... Est. remaining: 3m 19sRunning iteration 881/1500... Est. remaining: 3m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.676
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 3m 13sRunning iteration 901/1500... Est. remaining: 3m 10sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6759880314442845), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 6sRunning iteration 921/1500... Est. remaining: 3m 3sRunning iteration 931/1500... Est. remaining: 3m 0sRunning iteration 941/1500... Est. remaining: 2m 56sRunning iteration 951/1500... Est. remaining: 2m 53sRunning iteration 961/1500... Est. remaining: 2m 50sRunning iteration 971/1500... Est. remaining: 2m 47sRunning iteration 981/1500... Est. remaining: 2m 43sRunning iteration 991/1500... Est. remaining: 2m 40sRunning iteration 1001/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6759880314442845), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 34sRunning iteration 1021/1500... Est. remaining: 2m 30sRunning iteration 1031/1500... Est. remaining: 2m 27sRunning iteration 1041/1500... Est. remaining: 2m 24sRunning iteration 1051/1500... Est. remaining: 2m 21sRunning iteration 1061/1500... Est. remaining: 2m 18sRunning iteration 1071/1500... Est. remaining: 2m 14sRunning iteration 1081/1500... Est. remaining: 2m 11sRunning iteration 1091/1500... Est. remaining: 2m 8sRunning iteration 1101/1500... Est. remaining: 2m 5sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6759880314442845), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 2sRunning iteration 1121/1500... Est. remaining: 1m 58sRunning iteration 1131/1500... Est. remaining: 1m 55sRunning iteration 1141/1500... Est. remaining: 1m 52sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 46sRunning iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6759880314442845), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6759880314442845), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6759880314442845), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.68
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6759880314442845), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.6760)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Mon Aug 25 14:17:31 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,272,733,176
Annual Return: 40.37%
Sharpe Ratio: 1.37047
Sortino Ratio: 1.309
Max Drawdown: -64.4%
Avg Drawdown: -13.6%
Normalized Score: -0.566
Lookback periods: [87, 150, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,381,782,795
Annual Return: 40.71%
Sharpe Ratio: 1.38803
Sortino Ratio: 1.303
Max Drawdown: -59.4%
Avg Drawdown: -12.9%
Normalized Score: -0.276
Lookback periods: [56, 130, 186] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,302,783,608
Annual Return: 40.47%
Sharpe Ratio: 1.38614
Sortino Ratio: 1.316
Max Drawdown: -52.3%
Avg Drawdown: -11.1%
Normalized Score: 0.203
Lookback periods: [78, 127, 159] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 22m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,802,479,609
Annual Return: 43.61%
Sharpe Ratio: 1.44960
Sortino Ratio: 1.410
Max Drawdown: -60.4%
Avg Drawdown: -12.2%
Normalized Score: 0.205
Lookback periods: [111, 134, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 16m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,784,666,718
Annual Return: 44.86%
Sharpe Ratio: 1.46193
Sortino Ratio: 1.412
Max Drawdown: -60.0%
Avg Drawdown: -12.6%
Normalized Score: 0.227
Lookback periods: [136, 188, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,624,066,880
Annual Return: 44.68%
Sharpe Ratio: 1.44951
Sortino Ratio: 1.415
Max Drawdown: -61.6%
Avg Drawdown: -12.0%
Normalized Score: 0.256
Lookback periods: [156, 187, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 14m 22sRunning iteration 41/1500... Est. remaining: 12m 31sRunning iteration 51/1500... Est. remaining: 11m 24sRunning iteration 61/1500... Est. remaining: 10m 37sRunning iteration 71/1500... Est. remaining: 10m 3s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,948,108,936
Annual Return: 42.11%
Sharpe Ratio: 1.44251
Sortino Ratio: 1.355
Max Drawdown: -55.0%
Avg Drawdown: -10.8%
Normalized Score: 0.406
Lookback periods: [52, 108, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 9m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,753,039,097
Annual Return: 41.68%
Sharpe Ratio: 1.42865
Sortino Ratio: 1.357
Max Drawdown: -52.3%
Avg Drawdown: -10.4%
Normalized Score: 0.506
Lookback periods: [79, 116, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 9m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,386,456,371
Annual Return: 45.48%
Sharpe Ratio: 1.48576
Sortino Ratio: 1.450
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.556
Lookback periods: [140, 161, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 9m 34sbest_combination: {'lookbacks': [140, 161, 176], 'score': np.float64(0.5563283217676513), 'visits': 1}
Running iteration 111/1500... Est. remaining: 9m 17sRunning iteration 121/1500... Est. remaining: 9m 1sRunning iteration 131/1500... Est. remaining: 8m 49sRunning iteration 141/1500... Est. remaining: 8m 37sRunning iteration 151/1500... Est. remaining: 8m 26sRunning iteration 161/1500... Est. remaining: 8m 13sRunning iteration 171/1500... Est. remaining: 8m 1sRunning iteration 181/1500... Est. remaining: 7m 51sRunning iteration 191/1500... Est. remaining: 7m 40sRunning iteration 201/1500... Est. remaining: 7m 31sbest_combination: {'lookbacks': [140, 161, 176], 'score': np.float64(0.5563283217676513), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 22sRunning iteration 221/1500... Est. remaining: 7m 14s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,437,404,396
Annual Return: 45.52%
Sharpe Ratio: 1.50760
Sortino Ratio: 1.462
Max Drawdown: -55.0%
Avg Drawdown: -12.3%
Normalized Score: 0.600
Lookback periods: [134, 138, 140] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/1500... Est. remaining: 7m 11sRunning iteration 241/1500... Est. remaining: 7m 5sRunning iteration 251/1500... Est. remaining: 6m 59sRunning iteration 261/1500... Est. remaining: 6m 54sRunning iteration 271/1500... Est. remaining: 6m 49sRunning iteration 281/1500... Est. remaining: 6m 44sRunning iteration 291/1500... Est. remaining: 6m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $800,064,414
Annual Return: 38.51%
Sharpe Ratio: 1.37877
Sortino Ratio: 1.291
Max Drawdown: -36.1%
Avg Drawdown: -10.2%
Normalized Score: 0.678
Lookback periods: [52, 63, 88] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 301/1500... Est. remaining: 6m 38sbest_combination: {'lookbacks': [52, 63, 88], 'score': np.float64(0.6782982061293864), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 34sRunning iteration 321/1500... Est. remaining: 6m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,151,820,836
Annual Return: 47.54%
Sharpe Ratio: 1.53654
Sortino Ratio: 1.503
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.791
Lookback periods: [174, 184, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 331/1500... Est. remaining: 6m 28sRunning iteration 341/1500... Est. remaining: 6m 24sRunning iteration 351/1500... Est. remaining: 6m 20sRunning iteration 361/1500... Est. remaining: 6m 15sRunning iteration 371/1500... Est. remaining: 6m 11sRunning iteration 381/1500... Est. remaining: 6m 7sRunning iteration 391/1500... Est. remaining: 6m 3sRunning iteration 401/1500... Est. remaining: 5m 59sbest_combination: {'lookbacks': [174, 184, 189], 'score': np.float64(0.7911505128262654), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 55sRunning iteration 421/1500... Est. remaining: 5m 51sRunning iteration 431/1500... Est. remaining: 5m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,183,639,406
Annual Return: 46.18%
Sharpe Ratio: 1.52244
Sortino Ratio: 1.481
Max Drawdown: -55.0%
Avg Drawdown: -11.5%
Normalized Score: 0.801
Lookback periods: [127, 132, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 441/1500... Est. remaining: 5m 45sRunning iteration 451/1500... Est. remaining: 5m 41sRunning iteration 461/1500... Est. remaining: 5m 38sRunning iteration 471/1500... Est. remaining: 5m 34sRunning iteration 481/1500... Est. remaining: 5m 30sRunning iteration 491/1500... Est. remaining: 5m 26sRunning iteration 501/1500... Est. remaining: 5m 22sbest_combination: {'lookbacks': [127, 132, 171], 'score': np.float64(0.8008002282776436), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 19sRunning iteration 521/1500... Est. remaining: 5m 15sRunning iteration 531/1500... Est. remaining: 5m 11sRunning iteration 541/1500... Est. remaining: 5m 8sRunning iteration 551/1500... Est. remaining: 5m 4sRunning iteration 561/1500... Est. remaining: 5m 1sRunning iteration 571/1500... Est. remaining: 4m 57sRunning iteration 581/1500... Est. remaining: 4m 54sRunning iteration 591/1500... Est. remaining: 4m 50sRunning iteration 601/1500... Est. remaining: 4m 47sbest_combination: {'lookbacks': [127, 132, 171], 'score': np.float64(0.8008002282776436), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 43sRunning iteration 621/1500... Est. remaining: 4m 40sRunning iteration 631/1500... Est. remaining: 4m 36sRunning iteration 641/1500... Est. remaining: 4m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,771,920,394
Annual Return: 45.83%
Sharpe Ratio: 1.51995
Sortino Ratio: 1.477
Max Drawdown: -55.0%
Avg Drawdown: -11.3%
Normalized Score: 0.804
Lookback periods: [128, 130, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/1500... Est. remaining: 4m 30sRunning iteration 661/1500... Est. remaining: 4m 27sRunning iteration 671/1500... Est. remaining: 4m 24sRunning iteration 681/1500... Est. remaining: 4m 20sRunning iteration 691/1500... Est. remaining: 4m 17sRunning iteration 701/1500... Est. remaining: 4m 14sbest_combination: {'lookbacks': [128, 130, 155], 'score': np.float64(0.8042127750102503), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 10sRunning iteration 721/1500... Est. remaining: 4m 7sRunning iteration 731/1500... Est. remaining: 4m 3sRunning iteration 741/1500... Est. remaining: 4m 0sRunning iteration 751/1500... Est. remaining: 3m 57sRunning iteration 761/1500... Est. remaining: 3m 53sRunning iteration 771/1500... Est. remaining: 3m 50sRunning iteration 781/1500... Est. remaining: 3m 47sRunning iteration 791/1500... Est. remaining: 3m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $977,325,802
Annual Return: 39.31%
Sharpe Ratio: 1.41819
Sortino Ratio: 1.315
Max Drawdown: -34.7%
Avg Drawdown: -9.8%
Normalized Score: 0.898
Lookback periods: [50, 64, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,455,248,694
Annual Return: 40.92%
Sharpe Ratio: 1.47458
Sortino Ratio: 1.373
Max Drawdown: -34.7%
Avg Drawdown: -9.5%
Normalized Score: 1.210
Lookback periods: [50, 58, 87] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 801/1500... Est. remaining: 3m 41sbest_combination: {'lookbacks': [50, 58, 87], 'score': np.float64(1.2095531071116064), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 38sRunning iteration 821/1500... Est. remaining: 3m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,720,810,333
Annual Return: 41.60%
Sharpe Ratio: 1.47947
Sortino Ratio: 1.388
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 1.248
Lookback periods: [50, 55, 81] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,062,580,776
Annual Return: 42.34%
Sharpe Ratio: 1.52241
Sortino Ratio: 1.417
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 1.448
Lookback periods: [50, 51, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 831/1500... Est. remaining: 3m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,007,517,603
Annual Return: 45.10%
Sharpe Ratio: 1.59306
Sortino Ratio: 1.502
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.849
Lookback periods: [51, 54, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 841/1500... Est. remaining: 3m 30sRunning iteration 851/1500... Est. remaining: 3m 26sRunning iteration 861/1500... Est. remaining: 3m 23sRunning iteration 871/1500... Est. remaining: 3m 20sRunning iteration 881/1500... Est. remaining: 3m 16sRunning iteration 891/1500... Est. remaining: 3m 13sRunning iteration 901/1500... Est. remaining: 3m 10sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.8485063035110876), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 7sRunning iteration 921/1500... Est. remaining: 3m 3sRunning iteration 931/1500... Est. remaining: 3m 0sRunning iteration 941/1500... Est. remaining: 2m 57sRunning iteration 951/1500... Est. remaining: 2m 53sRunning iteration 961/1500... Est. remaining: 2m 50sRunning iteration 971/1500... Est. remaining: 2m 47sRunning iteration 981/1500... Est. remaining: 2m 44sRunning iteration 991/1500... Est. remaining: 2m 40sRunning iteration 1001/1500... Est. remaining: 2m 37sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.8485063035110876), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 34sRunning iteration 1021/1500... Est. remaining: 2m 31sRunning iteration 1031/1500... Est. remaining: 2m 27sRunning iteration 1041/1500... Est. remaining: 2m 24sRunning iteration 1051/1500... Est. remaining: 2m 21sRunning iteration 1061/1500... Est. remaining: 2m 18sRunning iteration 1071/1500... Est. remaining: 2m 14sRunning iteration 1081/1500... Est. remaining: 2m 11sRunning iteration 1091/1500... Est. remaining: 2m 8sRunning iteration 1101/1500... Est. remaining: 2m 5sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.8485063035110876), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 2sRunning iteration 1121/1500... Est. remaining: 1m 58sRunning iteration 1131/1500... Est. remaining: 1m 55sRunning iteration 1141/1500... Est. remaining: 1m 52sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 46sRunning iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 39sRunning iteration 1191/1500... Est. remaining: 1m 36sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.8485063035110876), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 20sRunning iteration 1251/1500... Est. remaining: 1m 17sRunning iteration 1261/1500... Est. remaining: 1m 14sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.8485063035110876), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 52sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.8485063035110876), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.7 minutes
Best normalized score: 1.85
best_combination: {'lookbacks': [51, 54, 83], 'score': np.float64(1.8485063035110876), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [51, 54, 83] (score: 1.8485)

Monte Carlo simulation completed in 7.7 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [51, 54, 83] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 76 selections (18.3%)
5. cash: 53 selections (12.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,007,517,603.28
Average Annualized Gain: 45.1%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Mon Aug 25 14:25:22 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $839,708,035
Annual Return: 38.70%
Sharpe Ratio: 1.29815
Sortino Ratio: 1.226
Max Drawdown: -59.6%
Avg Drawdown: -14.6%
Normalized Score: -1.381
Lookback periods: [101, 102, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,867,752,453
Annual Return: 41.94%
Sharpe Ratio: 1.44280
Sortino Ratio: 1.363
Max Drawdown: -52.3%
Avg Drawdown: -10.5%
Normalized Score: 0.022
Lookback periods: [82, 108, 132] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 20m 41sRunning iteration 21/1500... Est. remaining: 14m 0sRunning iteration 31/1500... Est. remaining: 11m 45sRunning iteration 41/1500... Est. remaining: 10m 35sRunning iteration 51/1500... Est. remaining: 9m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,026,733,159
Annual Return: 46.05%
Sharpe Ratio: 1.49232
Sortino Ratio: 1.453
Max Drawdown: -59.6%
Avg Drawdown: -12.0%
Normalized Score: 0.034
Lookback periods: [182, 187, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,672,082,595
Annual Return: 47.25%
Sharpe Ratio: 1.55600
Sortino Ratio: 1.521
Max Drawdown: -58.5%
Avg Drawdown: -12.2%
Normalized Score: 0.277
Lookback periods: [132, 155, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/1500... Est. remaining: 9m 58sRunning iteration 71/1500... Est. remaining: 9m 33sRunning iteration 81/1500... Est. remaining: 9m 12sRunning iteration 91/1500... Est. remaining: 8m 56sRunning iteration 101/1500... Est. remaining: 8m 41sbest_combination: {'lookbacks': [132, 155, 168], 'score': np.float64(0.27661955214083117), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 30sRunning iteration 121/1500... Est. remaining: 8m 19sRunning iteration 131/1500... Est. remaining: 8m 10sRunning iteration 141/1500... Est. remaining: 8m 1sRunning iteration 151/1500... Est. remaining: 7m 53sRunning iteration 161/1500... Est. remaining: 7m 44sRunning iteration 171/1500... Est. remaining: 7m 34sRunning iteration 181/1500... Est. remaining: 7m 24sRunning iteration 191/1500... Est. remaining: 7m 16sRunning iteration 201/1500... Est. remaining: 7m 8sbest_combination: {'lookbacks': [132, 155, 168], 'score': np.float64(0.27661955214083117), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 0sRunning iteration 221/1500... Est. remaining: 6m 53sRunning iteration 231/1500... Est. remaining: 6m 48sRunning iteration 241/1500... Est. remaining: 6m 43sRunning iteration 251/1500... Est. remaining: 6m 39sRunning iteration 261/1500... Est. remaining: 6m 35sRunning iteration 271/1500... Est. remaining: 6m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,087,256,646
Annual Return: 48.57%
Sharpe Ratio: 1.55741
Sortino Ratio: 1.527
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: 0.411
Lookback periods: [180, 184, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/1500... Est. remaining: 6m 31sRunning iteration 291/1500... Est. remaining: 6m 27sRunning iteration 301/1500... Est. remaining: 6m 24sbest_combination: {'lookbacks': [180, 184, 184], 'score': np.float64(0.41100467031057597), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 20sRunning iteration 321/1500... Est. remaining: 6m 16sRunning iteration 331/1500... Est. remaining: 6m 12sRunning iteration 341/1500... Est. remaining: 6m 8sRunning iteration 351/1500... Est. remaining: 6m 4sRunning iteration 361/1500... Est. remaining: 6m 1sRunning iteration 371/1500... Est. remaining: 5m 57sRunning iteration 381/1500... Est. remaining: 5m 53sRunning iteration 391/1500... Est. remaining: 5m 50sRunning iteration 401/1500... Est. remaining: 5m 47sbest_combination: {'lookbacks': [180, 184, 184], 'score': np.float64(0.41100467031057597), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 43sRunning iteration 421/1500... Est. remaining: 5m 40sRunning iteration 431/1500... Est. remaining: 5m 36sRunning iteration 441/1500... Est. remaining: 5m 33sRunning iteration 451/1500... Est. remaining: 5m 30sRunning iteration 461/1500... Est. remaining: 5m 26sRunning iteration 471/1500... Est. remaining: 5m 23sRunning iteration 481/1500... Est. remaining: 5m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,497,683,005
Annual Return: 43.13%
Sharpe Ratio: 1.52681
Sortino Ratio: 1.427
Max Drawdown: -38.3%
Avg Drawdown: -10.0%
Normalized Score: 0.763
Lookback periods: [51, 53, 75] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/1500... Est. remaining: 5m 18sRunning iteration 501/1500... Est. remaining: 5m 14sbest_combination: {'lookbacks': [51, 53, 75], 'score': np.float64(0.7627805659405784), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 11sRunning iteration 521/1500... Est. remaining: 5m 7sRunning iteration 531/1500... Est. remaining: 5m 4sRunning iteration 541/1500... Est. remaining: 5m 1s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,163,910,399
Annual Return: 42.54%
Sharpe Ratio: 1.52658
Sortino Ratio: 1.431
Max Drawdown: -35.7%
Avg Drawdown: -9.6%
Normalized Score: 0.860
Lookback periods: [50, 52, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 551/1500... Est. remaining: 4m 59sRunning iteration 561/1500... Est. remaining: 4m 55sRunning iteration 571/1500... Est. remaining: 4m 52sRunning iteration 581/1500... Est. remaining: 4m 49sRunning iteration 591/1500... Est. remaining: 4m 45sRunning iteration 601/1500... Est. remaining: 4m 42sbest_combination: {'lookbacks': [50, 52, 80], 'score': np.float64(0.8601391723140634), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,778,317,395
Annual Return: 41.74%
Sharpe Ratio: 1.51109
Sortino Ratio: 1.412
Max Drawdown: -34.7%
Avg Drawdown: -8.6%
Normalized Score: 0.954
Lookback periods: [50, 50, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 611/1500... Est. remaining: 4m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,650,069,972
Annual Return: 43.38%
Sharpe Ratio: 1.54673
Sortino Ratio: 1.453
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.081
Lookback periods: [50, 54, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 621/1500... Est. remaining: 4m 38sRunning iteration 631/1500... Est. remaining: 4m 34sRunning iteration 641/1500... Est. remaining: 4m 31sRunning iteration 651/1500... Est. remaining: 4m 27sRunning iteration 661/1500... Est. remaining: 4m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,229,417,452
Annual Return: 44.20%
Sharpe Ratio: 1.57610
Sortino Ratio: 1.489
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.201
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 671/1500... Est. remaining: 4m 22sRunning iteration 681/1500... Est. remaining: 4m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,357,528,316
Annual Return: 42.89%
Sharpe Ratio: 1.57054
Sortino Ratio: 1.463
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.214
Lookback periods: [50, 57, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/1500... Est. remaining: 4m 16sRunning iteration 701/1500... Est. remaining: 4m 13sbest_combination: {'lookbacks': [50, 57, 98], 'score': np.float64(1.214356556885447), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 9sRunning iteration 721/1500... Est. remaining: 4m 6sRunning iteration 731/1500... Est. remaining: 4m 3sRunning iteration 741/1500... Est. remaining: 4m 0sRunning iteration 751/1500... Est. remaining: 3m 56sRunning iteration 761/1500... Est. remaining: 3m 53sRunning iteration 771/1500... Est. remaining: 3m 50sRunning iteration 781/1500... Est. remaining: 3m 47sRunning iteration 791/1500... Est. remaining: 3m 44sRunning iteration 801/1500... Est. remaining: 3m 40sbest_combination: {'lookbacks': [50, 57, 98], 'score': np.float64(1.214356556885447), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 37sRunning iteration 821/1500... Est. remaining: 3m 34sRunning iteration 831/1500... Est. remaining: 3m 31sRunning iteration 841/1500... Est. remaining: 3m 28sRunning iteration 851/1500... Est. remaining: 3m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.452
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 861/1500... Est. remaining: 3m 22sRunning iteration 871/1500... Est. remaining: 3m 18sRunning iteration 881/1500... Est. remaining: 3m 15sRunning iteration 891/1500... Est. remaining: 3m 12sRunning iteration 901/1500... Est. remaining: 3m 9sbest_combination: {'lookbacks': [50, 53, 95], 'score': np.float64(1.45177284030167), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,710,118,475
Annual Return: 44.77%
Sharpe Ratio: 1.62478
Sortino Ratio: 1.524
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.515
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 911/1500... Est. remaining: 3m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.692
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 921/1500... Est. remaining: 3m 3sRunning iteration 931/1500... Est. remaining: 3m 0sRunning iteration 941/1500... Est. remaining: 2m 57sRunning iteration 951/1500... Est. remaining: 2m 54sRunning iteration 961/1500... Est. remaining: 2m 50sRunning iteration 971/1500... Est. remaining: 2m 47sRunning iteration 981/1500... Est. remaining: 2m 44sRunning iteration 991/1500... Est. remaining: 2m 41sRunning iteration 1001/1500... Est. remaining: 2m 38sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6924168991915578), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 34sRunning iteration 1021/1500... Est. remaining: 2m 31sRunning iteration 1031/1500... Est. remaining: 2m 28sRunning iteration 1041/1500... Est. remaining: 2m 25sRunning iteration 1051/1500... Est. remaining: 2m 21sRunning iteration 1061/1500... Est. remaining: 2m 18sRunning iteration 1071/1500... Est. remaining: 2m 15sRunning iteration 1081/1500... Est. remaining: 2m 12sRunning iteration 1091/1500... Est. remaining: 2m 9sRunning iteration 1101/1500... Est. remaining: 2m 5sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6924168991915578), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 2m 2sRunning iteration 1121/1500... Est. remaining: 1m 59sRunning iteration 1131/1500... Est. remaining: 1m 56sRunning iteration 1141/1500... Est. remaining: 1m 53sRunning iteration 1151/1500... Est. remaining: 1m 49sRunning iteration 1161/1500... Est. remaining: 1m 46sRunning iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 40sRunning iteration 1191/1500... Est. remaining: 1m 37sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6924168991915578), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 18sRunning iteration 1261/1500... Est. remaining: 1m 15sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6924168991915578), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 53sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46sRunning iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6924168991915578), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 1.69
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.6924168991915578), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.6924)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Mon Aug 25 14:33:16 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,246,470,227
Annual Return: 44.22%
Sharpe Ratio: 1.45517
Sortino Ratio: 1.419
Max Drawdown: -65.6%
Avg Drawdown: -11.8%
Normalized Score: -0.089
Lookback periods: [142, 179, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,425,036,837
Annual Return: 44.44%
Sharpe Ratio: 1.47447
Sortino Ratio: 1.438
Max Drawdown: -62.7%
Avg Drawdown: -12.3%
Normalized Score: -0.000
Lookback periods: [131, 134, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 20m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,279,201,992
Annual Return: 45.37%
Sharpe Ratio: 1.51442
Sortino Ratio: 1.463
Max Drawdown: -58.7%
Avg Drawdown: -11.7%
Normalized Score: 0.319
Lookback periods: [106, 137, 148] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 15m 0sRunning iteration 31/1500... Est. remaining: 12m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,948,817,648
Annual Return: 46.76%
Sharpe Ratio: 1.52013
Sortino Ratio: 1.485
Max Drawdown: -60.2%
Avg Drawdown: -11.9%
Normalized Score: 0.335
Lookback periods: [146, 189, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/1500... Est. remaining: 11m 34sRunning iteration 51/1500... Est. remaining: 10m 41sRunning iteration 61/1500... Est. remaining: 10m 4sRunning iteration 71/1500... Est. remaining: 9m 37sRunning iteration 81/1500... Est. remaining: 9m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,085,261,599
Annual Return: 46.86%
Sharpe Ratio: 1.54880
Sortino Ratio: 1.510
Max Drawdown: -59.7%
Avg Drawdown: -12.2%
Normalized Score: 0.392
Lookback periods: [136, 151, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/1500... Est. remaining: 9m 8sRunning iteration 101/1500... Est. remaining: 8m 53sbest_combination: {'lookbacks': [136, 151, 167], 'score': np.float64(0.39193182507905683), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 40sRunning iteration 121/1500... Est. remaining: 8m 26sRunning iteration 131/1500... Est. remaining: 8m 12sRunning iteration 141/1500... Est. remaining: 8m 0sRunning iteration 151/1500... Est. remaining: 7m 48sRunning iteration 161/1500... Est. remaining: 7m 37sRunning iteration 171/1500... Est. remaining: 7m 28sRunning iteration 181/1500... Est. remaining: 7m 19sRunning iteration 191/1500... Est. remaining: 7m 11sRunning iteration 201/1500... Est. remaining: 7m 5sbest_combination: {'lookbacks': [136, 151, 167], 'score': np.float64(0.39193182507905683), 'visits': 1}
Running iteration 211/1500... Est. remaining: 7m 0sRunning iteration 221/1500... Est. remaining: 6m 56sRunning iteration 231/1500... Est. remaining: 6m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,413,099,797
Annual Return: 48.72%
Sharpe Ratio: 1.58053
Sortino Ratio: 1.540
Max Drawdown: -59.7%
Avg Drawdown: -11.6%
Normalized Score: 0.611
Lookback periods: [155, 158, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 241/1500... Est. remaining: 6m 51sRunning iteration 251/1500... Est. remaining: 6m 47sRunning iteration 261/1500... Est. remaining: 6m 42sRunning iteration 271/1500... Est. remaining: 6m 38sRunning iteration 281/1500... Est. remaining: 6m 34sRunning iteration 291/1500... Est. remaining: 6m 29sRunning iteration 301/1500... Est. remaining: 6m 25sbest_combination: {'lookbacks': [155, 158, 178], 'score': np.float64(0.6110687513013026), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 22sRunning iteration 321/1500... Est. remaining: 6m 18sRunning iteration 331/1500... Est. remaining: 6m 14sRunning iteration 341/1500... Est. remaining: 6m 10sRunning iteration 351/1500... Est. remaining: 6m 6sRunning iteration 361/1500... Est. remaining: 6m 3sRunning iteration 371/1500... Est. remaining: 5m 59sRunning iteration 381/1500... Est. remaining: 5m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,720,900,724
Annual Return: 47.87%
Sharpe Ratio: 1.57091
Sortino Ratio: 1.526
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.791
Lookback periods: [157, 159, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 5m 54sRunning iteration 401/1500... Est. remaining: 5m 50sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(0.7907771832358136), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 47sRunning iteration 421/1500... Est. remaining: 5m 43sRunning iteration 431/1500... Est. remaining: 5m 40sRunning iteration 441/1500... Est. remaining: 5m 36sRunning iteration 451/1500... Est. remaining: 5m 32sRunning iteration 461/1500... Est. remaining: 5m 29sRunning iteration 471/1500... Est. remaining: 5m 26sRunning iteration 481/1500... Est. remaining: 5m 22sRunning iteration 491/1500... Est. remaining: 5m 19sRunning iteration 501/1500... Est. remaining: 5m 15sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(0.7907771832358136), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 12sRunning iteration 521/1500... Est. remaining: 5m 8sRunning iteration 531/1500... Est. remaining: 5m 5sRunning iteration 541/1500... Est. remaining: 5m 2sRunning iteration 551/1500... Est. remaining: 4m 59sRunning iteration 561/1500... Est. remaining: 4m 55sRunning iteration 571/1500... Est. remaining: 4m 52sRunning iteration 581/1500... Est. remaining: 4m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,776,118,390
Annual Return: 48.88%
Sharpe Ratio: 1.60169
Sortino Ratio: 1.567
Max Drawdown: -59.0%
Avg Drawdown: -10.7%
Normalized Score: 0.808
Lookback periods: [139, 171, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 591/1500... Est. remaining: 4m 46sRunning iteration 601/1500... Est. remaining: 4m 43sbest_combination: {'lookbacks': [139, 171, 178], 'score': np.float64(0.8078814228414414), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 40sRunning iteration 621/1500... Est. remaining: 4m 37sRunning iteration 631/1500... Est. remaining: 4m 33sRunning iteration 641/1500... Est. remaining: 4m 30sRunning iteration 651/1500... Est. remaining: 4m 27sRunning iteration 661/1500... Est. remaining: 4m 23sRunning iteration 671/1500... Est. remaining: 4m 20sRunning iteration 681/1500... Est. remaining: 4m 17sRunning iteration 691/1500... Est. remaining: 4m 14sRunning iteration 701/1500... Est. remaining: 4m 10sbest_combination: {'lookbacks': [139, 171, 178], 'score': np.float64(0.8078814228414414), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 7sRunning iteration 721/1500... Est. remaining: 4m 4sRunning iteration 731/1500... Est. remaining: 4m 1sRunning iteration 741/1500... Est. remaining: 3m 57sRunning iteration 751/1500... Est. remaining: 3m 54sRunning iteration 761/1500... Est. remaining: 3m 51sRunning iteration 771/1500... Est. remaining: 3m 48sRunning iteration 781/1500... Est. remaining: 3m 44sRunning iteration 791/1500... Est. remaining: 3m 41sRunning iteration 801/1500... Est. remaining: 3m 38sbest_combination: {'lookbacks': [139, 171, 178], 'score': np.float64(0.8078814228414414), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 35sRunning iteration 821/1500... Est. remaining: 3m 32sRunning iteration 831/1500... Est. remaining: 3m 28sRunning iteration 841/1500... Est. remaining: 3m 25sRunning iteration 851/1500... Est. remaining: 3m 22sRunning iteration 861/1500... Est. remaining: 3m 19sRunning iteration 871/1500... Est. remaining: 3m 16sRunning iteration 881/1500... Est. remaining: 3m 12sRunning iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 6sbest_combination: {'lookbacks': [139, 171, 178], 'score': np.float64(0.8078814228414414), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 3sRunning iteration 921/1500... Est. remaining: 3m 0sRunning iteration 931/1500... Est. remaining: 2m 57sRunning iteration 941/1500... Est. remaining: 2m 54sRunning iteration 951/1500... Est. remaining: 2m 50sRunning iteration 961/1500... Est. remaining: 2m 47sRunning iteration 971/1500... Est. remaining: 2m 44sRunning iteration 981/1500... Est. remaining: 2m 41sRunning iteration 991/1500... Est. remaining: 2m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,006,146,670
Annual Return: 39.42%
Sharpe Ratio: 1.42623
Sortino Ratio: 1.322
Max Drawdown: -34.7%
Avg Drawdown: -9.4%
Normalized Score: 0.884
Lookback periods: [50, 59, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1001/1500... Est. remaining: 2m 35sbest_combination: {'lookbacks': [50, 59, 84], 'score': np.float64(0.8840893045676289), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,350,146,651
Annual Return: 40.61%
Sharpe Ratio: 1.46889
Sortino Ratio: 1.368
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 1.062
Lookback periods: [50, 59, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1011/1500... Est. remaining: 2m 32sRunning iteration 1021/1500... Est. remaining: 2m 29sRunning iteration 1031/1500... Est. remaining: 2m 26sRunning iteration 1041/1500... Est. remaining: 2m 23sRunning iteration 1051/1500... Est. remaining: 2m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,650,069,972
Annual Return: 43.38%
Sharpe Ratio: 1.54673
Sortino Ratio: 1.453
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.398
Lookback periods: [50, 54, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1061/1500... Est. remaining: 2m 17sRunning iteration 1071/1500... Est. remaining: 2m 14sRunning iteration 1081/1500... Est. remaining: 2m 10sRunning iteration 1091/1500... Est. remaining: 2m 7sRunning iteration 1101/1500... Est. remaining: 2m 4sbest_combination: {'lookbacks': [50, 54, 84], 'score': np.float64(1.3982651049986334), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,315,947,560
Annual Return: 44.31%
Sharpe Ratio: 1.57346
Sortino Ratio: 1.481
Max Drawdown: -35.6%
Avg Drawdown: -9.2%
Normalized Score: 1.458
Lookback periods: [50, 53, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1111/1500... Est. remaining: 2m 1sRunning iteration 1121/1500... Est. remaining: 1m 58sRunning iteration 1131/1500... Est. remaining: 1m 55sRunning iteration 1141/1500... Est. remaining: 1m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,037,914,546
Annual Return: 43.94%
Sharpe Ratio: 1.57274
Sortino Ratio: 1.474
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.467
Lookback periods: [50, 54, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1151/1500... Est. remaining: 1m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,215,830,150
Annual Return: 45.31%
Sharpe Ratio: 1.62720
Sortino Ratio: 1.544
Max Drawdown: -36.6%
Avg Drawdown: -8.6%
Normalized Score: 1.693
Lookback periods: [52, 52, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1161/1500... Est. remaining: 1m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,463,708,650
Annual Return: 44.49%
Sharpe Ratio: 1.61834
Sortino Ratio: 1.515
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.740
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1171/1500... Est. remaining: 1m 43sRunning iteration 1181/1500... Est. remaining: 1m 40sRunning iteration 1191/1500... Est. remaining: 1m 37sRunning iteration 1201/1500... Est. remaining: 1m 33sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.7401231598004578), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.788
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1211/1500... Est. remaining: 1m 30sRunning iteration 1221/1500... Est. remaining: 1m 27sRunning iteration 1231/1500... Est. remaining: 1m 24sRunning iteration 1241/1500... Est. remaining: 1m 21sRunning iteration 1251/1500... Est. remaining: 1m 18sRunning iteration 1261/1500... Est. remaining: 1m 15sRunning iteration 1271/1500... Est. remaining: 1m 11sRunning iteration 1281/1500... Est. remaining: 1m 8sRunning iteration 1291/1500... Est. remaining: 1m 5sRunning iteration 1301/1500... Est. remaining: 1m 2sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.7876563579126366), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 59sRunning iteration 1321/1500... Est. remaining: 0m 56sRunning iteration 1331/1500... Est. remaining: 0m 53sRunning iteration 1341/1500... Est. remaining: 0m 49sRunning iteration 1351/1500... Est. remaining: 0m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,673,528,425
Annual Return: 46.56%
Sharpe Ratio: 1.66674
Sortino Ratio: 1.588
Max Drawdown: -36.6%
Avg Drawdown: -8.1%
Normalized Score: 1.906
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1361/1500... Est. remaining: 0m 43sRunning iteration 1371/1500... Est. remaining: 0m 40sRunning iteration 1381/1500... Est. remaining: 0m 37sRunning iteration 1391/1500... Est. remaining: 0m 34sRunning iteration 1401/1500... Est. remaining: 0m 31sbest_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.906447805373047), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 28sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.919
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 1.92
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9185449195056552), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9185)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Mon Aug 25 14:41:12 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $720,608,473
Annual Return: 38.09%
Sharpe Ratio: 1.31385
Sortino Ratio: 1.226
Max Drawdown: -62.2%
Avg Drawdown: -13.4%
Normalized Score: -0.766
Lookback periods: [63, 100, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $410,700,899
Annual Return: 35.87%
Sharpe Ratio: 1.26276
Sortino Ratio: 1.167
Max Drawdown: -52.3%
Avg Drawdown: -11.6%
Normalized Score: -0.443
Lookback periods: [77, 89, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,206,085,448
Annual Return: 40.16%
Sharpe Ratio: 1.38571
Sortino Ratio: 1.306
Max Drawdown: -52.3%
Avg Drawdown: -11.5%
Normalized Score: 0.064
Lookback periods: [92, 110, 140] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,880,019,933
Annual Return: 44.96%
Sharpe Ratio: 1.47160
Sortino Ratio: 1.435
Max Drawdown: -59.9%
Avg Drawdown: -12.2%
Normalized Score: 0.207
Lookback periods: [156, 177, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 24m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,310,461,072
Annual Return: 47.64%
Sharpe Ratio: 1.56187
Sortino Ratio: 1.533
Max Drawdown: -61.3%
Avg Drawdown: -11.4%
Normalized Score: 0.622
Lookback periods: [152, 159, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/1500... Est. remaining: 16m 45sRunning iteration 31/1500... Est. remaining: 13m 31sRunning iteration 41/1500... Est. remaining: 11m 53sRunning iteration 51/1500... Est. remaining: 10m 54sRunning iteration 61/1500... Est. remaining: 10m 13sRunning iteration 71/1500... Est. remaining: 9m 43sRunning iteration 81/1500... Est. remaining: 9m 20sRunning iteration 91/1500... Est. remaining: 9m 1sRunning iteration 101/1500... Est. remaining: 8m 41sbest_combination: {'lookbacks': [152, 159, 165], 'score': np.float64(0.6222201992190945), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 22sRunning iteration 121/1500... Est. remaining: 8m 7sRunning iteration 131/1500... Est. remaining: 7m 54sRunning iteration 141/1500... Est. remaining: 7m 42sRunning iteration 151/1500... Est. remaining: 7m 32sRunning iteration 161/1500... Est. remaining: 7m 22sRunning iteration 171/1500... Est. remaining: 7m 15sRunning iteration 181/1500... Est. remaining: 7m 9sRunning iteration 191/1500... Est. remaining: 7m 3sRunning iteration 201/1500... Est. remaining: 6m 58sbest_combination: {'lookbacks': [152, 159, 165], 'score': np.float64(0.6222201992190945), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 54sRunning iteration 221/1500... Est. remaining: 6m 50sRunning iteration 231/1500... Est. remaining: 6m 46sRunning iteration 241/1500... Est. remaining: 6m 41sRunning iteration 251/1500... Est. remaining: 6m 37sRunning iteration 261/1500... Est. remaining: 6m 34sRunning iteration 271/1500... Est. remaining: 6m 29sRunning iteration 281/1500... Est. remaining: 6m 26sRunning iteration 291/1500... Est. remaining: 6m 22sRunning iteration 301/1500... Est. remaining: 6m 18sbest_combination: {'lookbacks': [152, 159, 165], 'score': np.float64(0.6222201992190945), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 14sRunning iteration 321/1500... Est. remaining: 6m 10sRunning iteration 331/1500... Est. remaining: 6m 7sRunning iteration 341/1500... Est. remaining: 6m 3sRunning iteration 351/1500... Est. remaining: 5m 59sRunning iteration 361/1500... Est. remaining: 5m 56sRunning iteration 371/1500... Est. remaining: 5m 52sRunning iteration 381/1500... Est. remaining: 5m 49sRunning iteration 391/1500... Est. remaining: 5m 45sRunning iteration 401/1500... Est. remaining: 5m 42sbest_combination: {'lookbacks': [152, 159, 165], 'score': np.float64(0.6222201992190945), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 38sRunning iteration 421/1500... Est. remaining: 5m 35sRunning iteration 431/1500... Est. remaining: 5m 32sRunning iteration 441/1500... Est. remaining: 5m 28sRunning iteration 451/1500... Est. remaining: 5m 25sRunning iteration 461/1500... Est. remaining: 5m 22sRunning iteration 471/1500... Est. remaining: 5m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,834,878,559
Annual Return: 46.68%
Sharpe Ratio: 1.51909
Sortino Ratio: 1.490
Max Drawdown: -55.0%
Avg Drawdown: -10.9%
Normalized Score: 0.737
Lookback periods: [157, 163, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/1500... Est. remaining: 5m 17sRunning iteration 491/1500... Est. remaining: 5m 13sRunning iteration 501/1500... Est. remaining: 5m 10sbest_combination: {'lookbacks': [157, 163, 172], 'score': np.float64(0.7371380960005005), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 7sRunning iteration 521/1500... Est. remaining: 5m 3sRunning iteration 531/1500... Est. remaining: 5m 0sRunning iteration 541/1500... Est. remaining: 4m 57sRunning iteration 551/1500... Est. remaining: 4m 53sRunning iteration 561/1500... Est. remaining: 4m 50sRunning iteration 571/1500... Est. remaining: 4m 47s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,616,046,731
Annual Return: 41.34%
Sharpe Ratio: 1.48168
Sortino Ratio: 1.374
Max Drawdown: -35.7%
Avg Drawdown: -9.8%
Normalized Score: 1.053
Lookback periods: [51, 52, 78] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 581/1500... Est. remaining: 4m 45sRunning iteration 591/1500... Est. remaining: 4m 41s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,044,945,767
Annual Return: 43.95%
Sharpe Ratio: 1.57562
Sortino Ratio: 1.473
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.465
Lookback periods: [50, 52, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/1500... Est. remaining: 4m 39sbest_combination: {'lookbacks': [50, 52, 83], 'score': np.float64(1.4654903994686717), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 36sRunning iteration 621/1500... Est. remaining: 4m 33sRunning iteration 631/1500... Est. remaining: 4m 29sRunning iteration 641/1500... Est. remaining: 4m 26sRunning iteration 651/1500... Est. remaining: 4m 23sRunning iteration 661/1500... Est. remaining: 4m 20sRunning iteration 671/1500... Est. remaining: 4m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,109,906,920
Annual Return: 44.04%
Sharpe Ratio: 1.57266
Sortino Ratio: 1.479
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.472
Lookback periods: [50, 53, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/1500... Est. remaining: 4m 14sRunning iteration 691/1500... Est. remaining: 4m 11sRunning iteration 701/1500... Est. remaining: 4m 8sbest_combination: {'lookbacks': [50, 53, 89], 'score': np.float64(1.4719010169090094), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,191,381,502
Annual Return: 45.28%
Sharpe Ratio: 1.61433
Sortino Ratio: 1.533
Max Drawdown: -34.7%
Avg Drawdown: -8.7%
Normalized Score: 1.766
Lookback periods: [50, 53, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 721/1500... Est. remaining: 4m 2sRunning iteration 731/1500... Est. remaining: 3m 59sRunning iteration 741/1500... Est. remaining: 3m 56sRunning iteration 751/1500... Est. remaining: 3m 52sRunning iteration 761/1500... Est. remaining: 3m 49sRunning iteration 771/1500... Est. remaining: 3m 46sRunning iteration 781/1500... Est. remaining: 3m 43sRunning iteration 791/1500... Est. remaining: 3m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,748,142,591
Annual Return: 44.82%
Sharpe Ratio: 1.61128
Sortino Ratio: 1.518
Max Drawdown: -34.7%
Avg Drawdown: -7.7%
Normalized Score: 1.869
Lookback periods: [50, 50, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 801/1500... Est. remaining: 3m 37sbest_combination: {'lookbacks': [50, 50, 98], 'score': np.float64(1.8685908029874994), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 34sRunning iteration 821/1500... Est. remaining: 3m 30sRunning iteration 831/1500... Est. remaining: 3m 27sRunning iteration 841/1500... Est. remaining: 3m 24sRunning iteration 851/1500... Est. remaining: 3m 21sRunning iteration 861/1500... Est. remaining: 3m 18sRunning iteration 871/1500... Est. remaining: 3m 14sRunning iteration 881/1500... Est. remaining: 3m 11s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.986
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 891/1500... Est. remaining: 3m 9sRunning iteration 901/1500... Est. remaining: 3m 5sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9855345181762458), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 2sRunning iteration 921/1500... Est. remaining: 2m 59sRunning iteration 931/1500... Est. remaining: 2m 56sRunning iteration 941/1500... Est. remaining: 2m 53sRunning iteration 951/1500... Est. remaining: 2m 49sRunning iteration 961/1500... Est. remaining: 2m 46sRunning iteration 971/1500... Est. remaining: 2m 43sRunning iteration 981/1500... Est. remaining: 2m 40sRunning iteration 991/1500... Est. remaining: 2m 37sRunning iteration 1001/1500... Est. remaining: 2m 34sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9855345181762458), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 31sRunning iteration 1021/1500... Est. remaining: 2m 28sRunning iteration 1031/1500... Est. remaining: 2m 24sRunning iteration 1041/1500... Est. remaining: 2m 21sRunning iteration 1051/1500... Est. remaining: 2m 18sRunning iteration 1061/1500... Est. remaining: 2m 15sRunning iteration 1071/1500... Est. remaining: 2m 12sRunning iteration 1081/1500... Est. remaining: 2m 9sRunning iteration 1091/1500... Est. remaining: 2m 6sRunning iteration 1101/1500... Est. remaining: 2m 2sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9855345181762458), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 59sRunning iteration 1121/1500... Est. remaining: 1m 56sRunning iteration 1131/1500... Est. remaining: 1m 53sRunning iteration 1141/1500... Est. remaining: 1m 50sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 44sRunning iteration 1171/1500... Est. remaining: 1m 41sRunning iteration 1181/1500... Est. remaining: 1m 38sRunning iteration 1191/1500... Est. remaining: 1m 35sRunning iteration 1201/1500... Est. remaining: 1m 32sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9855345181762458), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 28sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9855345181762458), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 51sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9855345181762458), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 1.99
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9855345181762458), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [50, 52, 95] (score: 1.9855)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 109 selections (26.2%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 57 selections (13.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $4,888,650,278.42
Average Annualized Gain: 45.9%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Mon Aug 25 14:48:57 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $269,572,573
Annual Return: 34.23%
Sharpe Ratio: 1.21112
Sortino Ratio: 1.126
Max Drawdown: -62.2%
Avg Drawdown: -13.7%
Normalized Score: -1.237
Lookback periods: [63, 66, 132] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,106,612,592
Annual Return: 42.43%
Sharpe Ratio: 1.44849
Sortino Ratio: 1.377
Max Drawdown: -52.3%
Avg Drawdown: -11.1%
Normalized Score: 0.301
Lookback periods: [86, 102, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 20m 42sRunning iteration 21/1500... Est. remaining: 13m 55s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,206,786,214
Annual Return: 46.20%
Sharpe Ratio: 1.48892
Sortino Ratio: 1.457
Max Drawdown: -59.0%
Avg Drawdown: -12.3%
Normalized Score: 0.310
Lookback periods: [179, 181, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/1500... Est. remaining: 12m 16sRunning iteration 41/1500... Est. remaining: 10m 58sRunning iteration 51/1500... Est. remaining: 10m 12sRunning iteration 61/1500... Est. remaining: 9m 38s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,431,088,891
Annual Return: 46.38%
Sharpe Ratio: 1.51068
Sortino Ratio: 1.467
Max Drawdown: -59.0%
Avg Drawdown: -11.0%
Normalized Score: 0.499
Lookback periods: [156, 161, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/1500... Est. remaining: 9m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,687,966,149
Annual Return: 43.43%
Sharpe Ratio: 1.57296
Sortino Ratio: 1.472
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.405
Lookback periods: [50, 52, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/1500... Est. remaining: 9m 21sRunning iteration 91/1500... Est. remaining: 9m 3sRunning iteration 101/1500... Est. remaining: 8m 47sbest_combination: {'lookbacks': [50, 52, 97], 'score': np.float64(1.4054583552798179), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 30sRunning iteration 121/1500... Est. remaining: 8m 14sRunning iteration 131/1500... Est. remaining: 8m 0sRunning iteration 141/1500... Est. remaining: 7m 47sRunning iteration 151/1500... Est. remaining: 7m 36sRunning iteration 161/1500... Est. remaining: 7m 26sRunning iteration 171/1500... Est. remaining: 7m 18sRunning iteration 181/1500... Est. remaining: 7m 12sRunning iteration 191/1500... Est. remaining: 7m 6sRunning iteration 201/1500... Est. remaining: 7m 2sbest_combination: {'lookbacks': [50, 52, 97], 'score': np.float64(1.4054583552798179), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 57sRunning iteration 221/1500... Est. remaining: 6m 53sRunning iteration 231/1500... Est. remaining: 6m 48sRunning iteration 241/1500... Est. remaining: 6m 44sRunning iteration 251/1500... Est. remaining: 6m 40sRunning iteration 261/1500... Est. remaining: 6m 36sRunning iteration 271/1500... Est. remaining: 6m 32sRunning iteration 281/1500... Est. remaining: 6m 28sRunning iteration 291/1500... Est. remaining: 6m 24sRunning iteration 301/1500... Est. remaining: 6m 20sbest_combination: {'lookbacks': [50, 52, 97], 'score': np.float64(1.4054583552798179), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 16sRunning iteration 321/1500... Est. remaining: 6m 12sRunning iteration 331/1500... Est. remaining: 6m 8sRunning iteration 341/1500... Est. remaining: 6m 4sRunning iteration 351/1500... Est. remaining: 6m 1sRunning iteration 361/1500... Est. remaining: 5m 57sRunning iteration 371/1500... Est. remaining: 5m 54sRunning iteration 381/1500... Est. remaining: 5m 50sRunning iteration 391/1500... Est. remaining: 5m 47sRunning iteration 401/1500... Est. remaining: 5m 43sbest_combination: {'lookbacks': [50, 52, 97], 'score': np.float64(1.4054583552798179), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 40sRunning iteration 421/1500... Est. remaining: 5m 37sRunning iteration 431/1500... Est. remaining: 5m 33sRunning iteration 441/1500... Est. remaining: 5m 30sRunning iteration 451/1500... Est. remaining: 5m 26sRunning iteration 461/1500... Est. remaining: 5m 23sRunning iteration 471/1500... Est. remaining: 5m 19sRunning iteration 481/1500... Est. remaining: 5m 16sRunning iteration 491/1500... Est. remaining: 5m 13sRunning iteration 501/1500... Est. remaining: 5m 9sbest_combination: {'lookbacks': [50, 52, 97], 'score': np.float64(1.4054583552798179), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,888,650,278
Annual Return: 45.93%
Sharpe Ratio: 1.66209
Sortino Ratio: 1.568
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.795
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/1500... Est. remaining: 5m 8sRunning iteration 521/1500... Est. remaining: 5m 4sRunning iteration 531/1500... Est. remaining: 5m 1sRunning iteration 541/1500... Est. remaining: 4m 58sRunning iteration 551/1500... Est. remaining: 4m 55sRunning iteration 561/1500... Est. remaining: 4m 51sRunning iteration 571/1500... Est. remaining: 4m 48sRunning iteration 581/1500... Est. remaining: 4m 45sRunning iteration 591/1500... Est. remaining: 4m 41sRunning iteration 601/1500... Est. remaining: 4m 38sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.795115974204976), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 35sRunning iteration 621/1500... Est. remaining: 4m 32sRunning iteration 631/1500... Est. remaining: 4m 28sRunning iteration 641/1500... Est. remaining: 4m 25sRunning iteration 651/1500... Est. remaining: 4m 22sRunning iteration 661/1500... Est. remaining: 4m 19sRunning iteration 671/1500... Est. remaining: 4m 15sRunning iteration 681/1500... Est. remaining: 4m 12sRunning iteration 691/1500... Est. remaining: 4m 9sRunning iteration 701/1500... Est. remaining: 4m 6sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.795115974204976), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 3sRunning iteration 721/1500... Est. remaining: 4m 0sRunning iteration 731/1500... Est. remaining: 3m 56sRunning iteration 741/1500... Est. remaining: 3m 53sRunning iteration 751/1500... Est. remaining: 3m 50sRunning iteration 761/1500... Est. remaining: 3m 47sRunning iteration 771/1500... Est. remaining: 3m 44sRunning iteration 781/1500... Est. remaining: 3m 40sRunning iteration 791/1500... Est. remaining: 3m 37sRunning iteration 801/1500... Est. remaining: 3m 34sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.795115974204976), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 31sRunning iteration 821/1500... Est. remaining: 3m 28sRunning iteration 831/1500... Est. remaining: 3m 25sRunning iteration 841/1500... Est. remaining: 3m 22sRunning iteration 851/1500... Est. remaining: 3m 19sRunning iteration 861/1500... Est. remaining: 3m 15sRunning iteration 871/1500... Est. remaining: 3m 12sRunning iteration 881/1500... Est. remaining: 3m 9sRunning iteration 891/1500... Est. remaining: 3m 6sRunning iteration 901/1500... Est. remaining: 3m 3sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.795115974204976), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 0sRunning iteration 921/1500... Est. remaining: 2m 57sRunning iteration 931/1500... Est. remaining: 2m 54sRunning iteration 941/1500... Est. remaining: 2m 51sRunning iteration 951/1500... Est. remaining: 2m 48sRunning iteration 961/1500... Est. remaining: 2m 44sRunning iteration 971/1500... Est. remaining: 2m 41sRunning iteration 981/1500... Est. remaining: 2m 38sRunning iteration 991/1500... Est. remaining: 2m 35sRunning iteration 1001/1500... Est. remaining: 2m 32sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.795115974204976), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 29sRunning iteration 1021/1500... Est. remaining: 2m 26sRunning iteration 1031/1500... Est. remaining: 2m 23sRunning iteration 1041/1500... Est. remaining: 2m 20sRunning iteration 1051/1500... Est. remaining: 2m 17sRunning iteration 1061/1500... Est. remaining: 2m 14sRunning iteration 1071/1500... Est. remaining: 2m 11sRunning iteration 1081/1500... Est. remaining: 2m 7sRunning iteration 1091/1500... Est. remaining: 2m 4sRunning iteration 1101/1500... Est. remaining: 2m 1sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.795115974204976), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 58sRunning iteration 1121/1500... Est. remaining: 1m 55sRunning iteration 1131/1500... Est. remaining: 1m 52sRunning iteration 1141/1500... Est. remaining: 1m 49sRunning iteration 1151/1500... Est. remaining: 1m 46sRunning iteration 1161/1500... Est. remaining: 1m 43sRunning iteration 1171/1500... Est. remaining: 1m 40sRunning iteration 1181/1500... Est. remaining: 1m 37sRunning iteration 1191/1500... Est. remaining: 1m 34sRunning iteration 1201/1500... Est. remaining: 1m 31sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.795115974204976), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 28sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 15sRunning iteration 1261/1500... Est. remaining: 1m 12sRunning iteration 1271/1500... Est. remaining: 1m 9sRunning iteration 1281/1500... Est. remaining: 1m 6sRunning iteration 1291/1500... Est. remaining: 1m 3sRunning iteration 1301/1500... Est. remaining: 1m 0sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.795115974204976), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 57sRunning iteration 1321/1500... Est. remaining: 0m 54sRunning iteration 1331/1500... Est. remaining: 0m 51sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.795115974204976), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,673,528,425
Annual Return: 46.56%
Sharpe Ratio: 1.66674
Sortino Ratio: 1.588
Max Drawdown: -36.6%
Avg Drawdown: -8.1%
Normalized Score: 1.796
Lookback periods: [52, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 1.80
best_combination: {'lookbacks': [52, 52, 95], 'score': np.float64(1.7960045416696069), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [52, 52, 95] (score: 1.7960)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [52, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 103 selections (24.8%)
2. naz100_hma: 98 selections (23.6%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,673,528,425.50
Average Annualized Gain: 46.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Mon Aug 25 14:56:41 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,196,612,415
Annual Return: 42.60%
Sharpe Ratio: 1.40654
Sortino Ratio: 1.368
Max Drawdown: -60.3%
Avg Drawdown: -12.9%
Normalized Score: -0.472
Lookback periods: [134, 163, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,680,242,386
Annual Return: 41.50%
Sharpe Ratio: 1.42842
Sortino Ratio: 1.345
Max Drawdown: -55.0%
Avg Drawdown: -11.1%
Normalized Score: -0.222
Lookback periods: [52, 146, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,200,072,738
Annual Return: 47.57%
Sharpe Ratio: 1.55012
Sortino Ratio: 1.505
Max Drawdown: -57.2%
Avg Drawdown: -12.0%
Normalized Score: 0.419
Lookback periods: [138, 156, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 22m 36sRunning iteration 21/1500... Est. remaining: 15m 0sRunning iteration 31/1500... Est. remaining: 12m 24sRunning iteration 41/1500... Est. remaining: 11m 4sRunning iteration 51/1500... Est. remaining: 10m 15sRunning iteration 61/1500... Est. remaining: 9m 41sRunning iteration 71/1500... Est. remaining: 9m 16sRunning iteration 81/1500... Est. remaining: 8m 56sRunning iteration 91/1500... Est. remaining: 8m 40sRunning iteration 101/1500... Est. remaining: 8m 27sbest_combination: {'lookbacks': [138, 156, 198], 'score': np.float64(0.4191319479027074), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 16sRunning iteration 121/1500... Est. remaining: 8m 4sRunning iteration 131/1500... Est. remaining: 7m 51sRunning iteration 141/1500... Est. remaining: 7m 40sRunning iteration 151/1500... Est. remaining: 7m 30sRunning iteration 161/1500... Est. remaining: 7m 20sRunning iteration 171/1500... Est. remaining: 7m 11sRunning iteration 181/1500... Est. remaining: 7m 3sRunning iteration 191/1500... Est. remaining: 6m 56sRunning iteration 201/1500... Est. remaining: 6m 50sbest_combination: {'lookbacks': [138, 156, 198], 'score': np.float64(0.4191319479027074), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 45sRunning iteration 221/1500... Est. remaining: 6m 41sRunning iteration 231/1500... Est. remaining: 6m 37sRunning iteration 241/1500... Est. remaining: 6m 34sRunning iteration 251/1500... Est. remaining: 6m 30sRunning iteration 261/1500... Est. remaining: 6m 26sRunning iteration 271/1500... Est. remaining: 6m 23sRunning iteration 281/1500... Est. remaining: 6m 19sRunning iteration 291/1500... Est. remaining: 6m 16sRunning iteration 301/1500... Est. remaining: 6m 12sbest_combination: {'lookbacks': [138, 156, 198], 'score': np.float64(0.4191319479027074), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 8sRunning iteration 321/1500... Est. remaining: 6m 5sRunning iteration 331/1500... Est. remaining: 6m 2sRunning iteration 341/1500... Est. remaining: 5m 58sRunning iteration 351/1500... Est. remaining: 5m 55sRunning iteration 361/1500... Est. remaining: 5m 51sRunning iteration 371/1500... Est. remaining: 5m 48sRunning iteration 381/1500... Est. remaining: 5m 45s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,685,814,941
Annual Return: 48.37%
Sharpe Ratio: 1.58185
Sortino Ratio: 1.553
Max Drawdown: -57.8%
Avg Drawdown: -12.3%
Normalized Score: 0.535
Lookback periods: [131, 131, 133] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 391/1500... Est. remaining: 5m 44sRunning iteration 401/1500... Est. remaining: 5m 40sbest_combination: {'lookbacks': [131, 131, 133], 'score': np.float64(0.535388390195499), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 37sRunning iteration 421/1500... Est. remaining: 5m 33sRunning iteration 431/1500... Est. remaining: 5m 30sRunning iteration 441/1500... Est. remaining: 5m 27sRunning iteration 451/1500... Est. remaining: 5m 24sRunning iteration 461/1500... Est. remaining: 5m 20sRunning iteration 471/1500... Est. remaining: 5m 17sRunning iteration 481/1500... Est. remaining: 5m 14sRunning iteration 491/1500... Est. remaining: 5m 10sRunning iteration 501/1500... Est. remaining: 5m 7sbest_combination: {'lookbacks': [131, 131, 133], 'score': np.float64(0.535388390195499), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 4sRunning iteration 521/1500... Est. remaining: 5m 1sRunning iteration 531/1500... Est. remaining: 4m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,917,387,305
Annual Return: 47.98%
Sharpe Ratio: 1.57134
Sortino Ratio: 1.537
Max Drawdown: -58.5%
Avg Drawdown: -11.2%
Normalized Score: 0.569
Lookback periods: [143, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/1500... Est. remaining: 4m 56sRunning iteration 551/1500... Est. remaining: 4m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,989,941,669
Annual Return: 48.97%
Sharpe Ratio: 1.59907
Sortino Ratio: 1.568
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 0.871
Lookback periods: [156, 161, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 561/1500... Est. remaining: 4m 51sRunning iteration 571/1500... Est. remaining: 4m 47sRunning iteration 581/1500... Est. remaining: 4m 44sRunning iteration 591/1500... Est. remaining: 4m 41sRunning iteration 601/1500... Est. remaining: 4m 38sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.8707361979849366), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 34sRunning iteration 621/1500... Est. remaining: 4m 31sRunning iteration 631/1500... Est. remaining: 4m 28sRunning iteration 641/1500... Est. remaining: 4m 25sRunning iteration 651/1500... Est. remaining: 4m 22sRunning iteration 661/1500... Est. remaining: 4m 18sRunning iteration 671/1500... Est. remaining: 4m 15sRunning iteration 681/1500... Est. remaining: 4m 12sRunning iteration 691/1500... Est. remaining: 4m 9sRunning iteration 701/1500... Est. remaining: 4m 6sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.8707361979849366), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 3sRunning iteration 721/1500... Est. remaining: 4m 0sRunning iteration 731/1500... Est. remaining: 3m 57sRunning iteration 741/1500... Est. remaining: 3m 53sRunning iteration 751/1500... Est. remaining: 3m 50sRunning iteration 761/1500... Est. remaining: 3m 47sRunning iteration 771/1500... Est. remaining: 3m 44sRunning iteration 781/1500... Est. remaining: 3m 41sRunning iteration 791/1500... Est. remaining: 3m 38sRunning iteration 801/1500... Est. remaining: 3m 35sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.8707361979849366), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 31sRunning iteration 821/1500... Est. remaining: 3m 28sRunning iteration 831/1500... Est. remaining: 3m 25sRunning iteration 841/1500... Est. remaining: 3m 22sRunning iteration 851/1500... Est. remaining: 3m 19sRunning iteration 861/1500... Est. remaining: 3m 16sRunning iteration 871/1500... Est. remaining: 3m 13sRunning iteration 881/1500... Est. remaining: 3m 10sRunning iteration 891/1500... Est. remaining: 3m 7sRunning iteration 901/1500... Est. remaining: 3m 4sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.8707361979849366), 'visits': 1}
Running iteration 911/1500... Est. remaining: 3m 0sRunning iteration 921/1500... Est. remaining: 2m 57sRunning iteration 931/1500... Est. remaining: 2m 54sRunning iteration 941/1500... Est. remaining: 2m 51sRunning iteration 951/1500... Est. remaining: 2m 48sRunning iteration 961/1500... Est. remaining: 2m 45sRunning iteration 971/1500... Est. remaining: 2m 42sRunning iteration 981/1500... Est. remaining: 2m 39sRunning iteration 991/1500... Est. remaining: 2m 36sRunning iteration 1001/1500... Est. remaining: 2m 33sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.8707361979849366), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 30sRunning iteration 1021/1500... Est. remaining: 2m 27sRunning iteration 1031/1500... Est. remaining: 2m 23sRunning iteration 1041/1500... Est. remaining: 2m 20sRunning iteration 1051/1500... Est. remaining: 2m 17sRunning iteration 1061/1500... Est. remaining: 2m 14sRunning iteration 1071/1500... Est. remaining: 2m 11sRunning iteration 1081/1500... Est. remaining: 2m 8sRunning iteration 1091/1500... Est. remaining: 2m 5sRunning iteration 1101/1500... Est. remaining: 2m 2sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.8707361979849366), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 59sRunning iteration 1121/1500... Est. remaining: 1m 56sRunning iteration 1131/1500... Est. remaining: 1m 53sRunning iteration 1141/1500... Est. remaining: 1m 50sRunning iteration 1151/1500... Est. remaining: 1m 47sRunning iteration 1161/1500... Est. remaining: 1m 43sRunning iteration 1171/1500... Est. remaining: 1m 40sRunning iteration 1181/1500... Est. remaining: 1m 37sRunning iteration 1191/1500... Est. remaining: 1m 34sRunning iteration 1201/1500... Est. remaining: 1m 31sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.8707361979849366), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 28sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 7sRunning iteration 1291/1500... Est. remaining: 1m 4sRunning iteration 1301/1500... Est. remaining: 1m 1sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.8707361979849366), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 58sRunning iteration 1321/1500... Est. remaining: 0m 55sRunning iteration 1331/1500... Est. remaining: 0m 51sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.8707361979849366), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9sRunning iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 0.87
best_combination: {'lookbacks': [156, 161, 168], 'score': np.float64(0.8707361979849366), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [156, 161, 168] (score: 0.8707)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 161, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 108 selections (26.0%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,989,941,669.30
Average Annualized Gain: 49.0%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Mon Aug 25 15:04:27 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit --json=abacus_combined_PyTAAA_status.params.json --randomize

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Using JSON configuration: abacus_combined_PyTAAA_status.params.json

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 1500 iterations...
Running Monte Carlo simulations with 1500 iterations...

Starting Monte Carlo simulations with 1500 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 1500 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $404,541,440
Annual Return: 35.81%
Sharpe Ratio: 1.21658
Sortino Ratio: 1.145
Max Drawdown: -52.3%
Avg Drawdown: -13.4%
Normalized Score: -1.860
Lookback periods: [86, 101, 107] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $979,493,498
Annual Return: 39.32%
Sharpe Ratio: 1.36363
Sortino Ratio: 1.279
Max Drawdown: -55.9%
Avg Drawdown: -11.3%
Normalized Score: -0.848
Lookback periods: [50, 178, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,133,926,066
Annual Return: 47.53%
Sharpe Ratio: 1.58138
Sortino Ratio: 1.532
Max Drawdown: -55.0%
Avg Drawdown: -11.5%
Normalized Score: 0.710
Lookback periods: [129, 139, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/1500... Est. remaining: 22m 19sRunning iteration 21/1500... Est. remaining: 14m 51sRunning iteration 31/1500... Est. remaining: 12m 17sRunning iteration 41/1500... Est. remaining: 10m 59sRunning iteration 51/1500... Est. remaining: 10m 10sRunning iteration 61/1500... Est. remaining: 9m 36sRunning iteration 71/1500... Est. remaining: 9m 11sRunning iteration 81/1500... Est. remaining: 8m 53sRunning iteration 91/1500... Est. remaining: 8m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,797,743,439
Annual Return: 47.91%
Sharpe Ratio: 1.58555
Sortino Ratio: 1.546
Max Drawdown: -55.0%
Avg Drawdown: -11.9%
Normalized Score: 0.712
Lookback periods: [131, 134, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/1500... Est. remaining: 8m 35sbest_combination: {'lookbacks': [131, 134, 136], 'score': np.float64(0.7120918774349436), 'visits': 1}
Running iteration 111/1500... Est. remaining: 8m 23sRunning iteration 121/1500... Est. remaining: 8m 11sRunning iteration 131/1500... Est. remaining: 7m 57sRunning iteration 141/1500... Est. remaining: 7m 45sRunning iteration 151/1500... Est. remaining: 7m 34sRunning iteration 161/1500... Est. remaining: 7m 24sRunning iteration 171/1500... Est. remaining: 7m 15sRunning iteration 181/1500... Est. remaining: 7m 6sRunning iteration 191/1500... Est. remaining: 6m 59sRunning iteration 201/1500... Est. remaining: 6m 54sbest_combination: {'lookbacks': [131, 134, 136], 'score': np.float64(0.7120918774349436), 'visits': 1}
Running iteration 211/1500... Est. remaining: 6m 50sRunning iteration 221/1500... Est. remaining: 6m 46sRunning iteration 231/1500... Est. remaining: 6m 42sRunning iteration 241/1500... Est. remaining: 6m 37sRunning iteration 251/1500... Est. remaining: 6m 33sRunning iteration 261/1500... Est. remaining: 6m 30sRunning iteration 271/1500... Est. remaining: 6m 26sRunning iteration 281/1500... Est. remaining: 6m 22sRunning iteration 291/1500... Est. remaining: 6m 18sRunning iteration 301/1500... Est. remaining: 6m 15sbest_combination: {'lookbacks': [131, 134, 136], 'score': np.float64(0.7120918774349436), 'visits': 1}
Running iteration 311/1500... Est. remaining: 6m 12sRunning iteration 321/1500... Est. remaining: 6m 8sRunning iteration 331/1500... Est. remaining: 6m 5sRunning iteration 341/1500... Est. remaining: 6m 1sRunning iteration 351/1500... Est. remaining: 5m 58sRunning iteration 361/1500... Est. remaining: 5m 54sRunning iteration 371/1500... Est. remaining: 5m 51sRunning iteration 381/1500... Est. remaining: 5m 47sRunning iteration 391/1500... Est. remaining: 5m 44sRunning iteration 401/1500... Est. remaining: 5m 40sbest_combination: {'lookbacks': [131, 134, 136], 'score': np.float64(0.7120918774349436), 'visits': 1}
Running iteration 411/1500... Est. remaining: 5m 37sRunning iteration 421/1500... Est. remaining: 5m 34sRunning iteration 431/1500... Est. remaining: 5m 30sRunning iteration 441/1500... Est. remaining: 5m 27sRunning iteration 451/1500... Est. remaining: 5m 24sRunning iteration 461/1500... Est. remaining: 5m 20sRunning iteration 471/1500... Est. remaining: 5m 17sRunning iteration 481/1500... Est. remaining: 5m 14sRunning iteration 491/1500... Est. remaining: 5m 11sRunning iteration 501/1500... Est. remaining: 5m 7sbest_combination: {'lookbacks': [131, 134, 136], 'score': np.float64(0.7120918774349436), 'visits': 1}
Running iteration 511/1500... Est. remaining: 5m 4sRunning iteration 521/1500... Est. remaining: 5m 1sRunning iteration 531/1500... Est. remaining: 4m 58sRunning iteration 541/1500... Est. remaining: 4m 55sRunning iteration 551/1500... Est. remaining: 4m 51sRunning iteration 561/1500... Est. remaining: 4m 48sRunning iteration 571/1500... Est. remaining: 4m 45sRunning iteration 581/1500... Est. remaining: 4m 42sRunning iteration 591/1500... Est. remaining: 4m 39sRunning iteration 601/1500... Est. remaining: 4m 36sbest_combination: {'lookbacks': [131, 134, 136], 'score': np.float64(0.7120918774349436), 'visits': 1}
Running iteration 611/1500... Est. remaining: 4m 32sRunning iteration 621/1500... Est. remaining: 4m 29sRunning iteration 631/1500... Est. remaining: 4m 26sRunning iteration 641/1500... Est. remaining: 4m 23sRunning iteration 651/1500... Est. remaining: 4m 20sRunning iteration 661/1500... Est. remaining: 4m 17sRunning iteration 671/1500... Est. remaining: 4m 14sRunning iteration 681/1500... Est. remaining: 4m 11sRunning iteration 691/1500... Est. remaining: 4m 7sRunning iteration 701/1500... Est. remaining: 4m 4sbest_combination: {'lookbacks': [131, 134, 136], 'score': np.float64(0.7120918774349436), 'visits': 1}
Running iteration 711/1500... Est. remaining: 4m 1sRunning iteration 721/1500... Est. remaining: 3m 58sRunning iteration 731/1500... Est. remaining: 3m 55sRunning iteration 741/1500... Est. remaining: 3m 52sRunning iteration 751/1500... Est. remaining: 3m 49sRunning iteration 761/1500... Est. remaining: 3m 46sRunning iteration 771/1500... Est. remaining: 3m 42sRunning iteration 781/1500... Est. remaining: 3m 39sRunning iteration 791/1500... Est. remaining: 3m 36sRunning iteration 801/1500... Est. remaining: 3m 33sbest_combination: {'lookbacks': [131, 134, 136], 'score': np.float64(0.7120918774349436), 'visits': 1}
Running iteration 811/1500... Est. remaining: 3m 30sRunning iteration 821/1500... Est. remaining: 3m 27sRunning iteration 831/1500... Est. remaining: 3m 24sRunning iteration 841/1500... Est. remaining: 3m 21sRunning iteration 851/1500... Est. remaining: 3m 18sRunning iteration 861/1500... Est. remaining: 3m 15sRunning iteration 871/1500... Est. remaining: 3m 12sRunning iteration 881/1500... Est. remaining: 3m 9sRunning iteration 891/1500... Est. remaining: 3m 6sRunning iteration 901/1500... Est. remaining: 3m 2sbest_combination: {'lookbacks': [131, 134, 136], 'score': np.float64(0.7120918774349436), 'visits': 1}
Running iteration 911/1500... Est. remaining: 2m 59sRunning iteration 921/1500... Est. remaining: 2m 56sRunning iteration 931/1500... Est. remaining: 2m 53sRunning iteration 941/1500... Est. remaining: 2m 50sRunning iteration 951/1500... Est. remaining: 2m 47sRunning iteration 961/1500... Est. remaining: 2m 44sRunning iteration 971/1500... Est. remaining: 2m 41sRunning iteration 981/1500... Est. remaining: 2m 38sRunning iteration 991/1500... Est. remaining: 2m 35sRunning iteration 1001/1500... Est. remaining: 2m 32sbest_combination: {'lookbacks': [131, 134, 136], 'score': np.float64(0.7120918774349436), 'visits': 1}
Running iteration 1011/1500... Est. remaining: 2m 29sRunning iteration 1021/1500... Est. remaining: 2m 26sRunning iteration 1031/1500... Est. remaining: 2m 23sRunning iteration 1041/1500... Est. remaining: 2m 20sRunning iteration 1051/1500... Est. remaining: 2m 16sRunning iteration 1061/1500... Est. remaining: 2m 13sRunning iteration 1071/1500... Est. remaining: 2m 10sRunning iteration 1081/1500... Est. remaining: 2m 7sRunning iteration 1091/1500... Est. remaining: 2m 4sRunning iteration 1101/1500... Est. remaining: 2m 1sbest_combination: {'lookbacks': [131, 134, 136], 'score': np.float64(0.7120918774349436), 'visits': 1}
Running iteration 1111/1500... Est. remaining: 1m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,291,497,809
Annual Return: 48.66%
Sharpe Ratio: 1.59117
Sortino Ratio: 1.553
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: 0.828
Lookback periods: [129, 130, 137] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1121/1500... Est. remaining: 1m 55sRunning iteration 1131/1500... Est. remaining: 1m 52sRunning iteration 1141/1500... Est. remaining: 1m 49sRunning iteration 1151/1500... Est. remaining: 1m 46sRunning iteration 1161/1500... Est. remaining: 1m 43sRunning iteration 1171/1500... Est. remaining: 1m 40sRunning iteration 1181/1500... Est. remaining: 1m 37sRunning iteration 1191/1500... Est. remaining: 1m 34sRunning iteration 1201/1500... Est. remaining: 1m 31sbest_combination: {'lookbacks': [129, 130, 137], 'score': np.float64(0.8277248359456427), 'visits': 1}
Running iteration 1211/1500... Est. remaining: 1m 28sRunning iteration 1221/1500... Est. remaining: 1m 25sRunning iteration 1231/1500... Est. remaining: 1m 22sRunning iteration 1241/1500... Est. remaining: 1m 19sRunning iteration 1251/1500... Est. remaining: 1m 16sRunning iteration 1261/1500... Est. remaining: 1m 13sRunning iteration 1271/1500... Est. remaining: 1m 10sRunning iteration 1281/1500... Est. remaining: 1m 6sRunning iteration 1291/1500... Est. remaining: 1m 3sRunning iteration 1301/1500... Est. remaining: 1m 0sbest_combination: {'lookbacks': [129, 130, 137], 'score': np.float64(0.8277248359456427), 'visits': 1}
Running iteration 1311/1500... Est. remaining: 0m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,867,339,802
Annual Return: 48.92%
Sharpe Ratio: 1.59885
Sortino Ratio: 1.563
Max Drawdown: -55.0%
Avg Drawdown: -11.8%
Normalized Score: 0.878
Lookback periods: [129, 130, 136] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1321/1500... Est. remaining: 0m 54sRunning iteration 1331/1500... Est. remaining: 0m 51sRunning iteration 1341/1500... Est. remaining: 0m 48sRunning iteration 1351/1500... Est. remaining: 0m 45sRunning iteration 1361/1500... Est. remaining: 0m 42sRunning iteration 1371/1500... Est. remaining: 0m 39sRunning iteration 1381/1500... Est. remaining: 0m 36sRunning iteration 1391/1500... Est. remaining: 0m 33sRunning iteration 1401/1500... Est. remaining: 0m 30sbest_combination: {'lookbacks': [129, 130, 136], 'score': np.float64(0.8778758083754308), 'visits': 1}
Running iteration 1411/1500... Est. remaining: 0m 27sRunning iteration 1421/1500... Est. remaining: 0m 24sRunning iteration 1431/1500... Est. remaining: 0m 21sRunning iteration 1441/1500... Est. remaining: 0m 18sRunning iteration 1451/1500... Est. remaining: 0m 15sRunning iteration 1461/1500... Est. remaining: 0m 12sRunning iteration 1471/1500... Est. remaining: 0m 9s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,501,170,113
Annual Return: 49.58%
Sharpe Ratio: 1.62121
Sortino Ratio: 1.595
Max Drawdown: -55.0%
Avg Drawdown: -11.6%
Normalized Score: 1.063
Lookback periods: [127, 128, 130] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 1481/1500... Est. remaining: 0m 6sRunning iteration 1491/1500... Est. remaining: 0m 3s
Monte Carlo simulation completed in 7.6 minutes
Best normalized score: 1.06
best_combination: {'lookbacks': [127, 128, 130], 'score': np.float64(1.0629745029310425), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 1500
  Theoretical efficiency improvement: 0.004
  Best performing lookbacks: [127, 128, 130] (score: 1.0630)

Monte Carlo simulation completed in 7.6 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...
Using JSON web output directory: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 1500
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [127, 128, 130] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 111 selections (26.7%)
2. naz100_hma: 105 selections (25.2%)
3. naz100_pi: 86 selections (20.7%)
4. naz100_pine: 80 selections (19.2%)
5. cash: 34 selections (8.2%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,501,170,112.71
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: /Users/donaldpg/pyTAAA_data/naz100_sp500_abacus/pyTAAA_web/monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)

==============================================================
Monte Carlo Loop Runner - Final Summary
==============================================================
Total runs requested: 15
Successful runs: 15
Failed runs: 0
Total execution time: 142m 25s
End time: Mon Aug 25 15:12:07 EDT 2025
Average time per successful run: 9m 29s
==============================================================
✓ All runs completed successfully!
