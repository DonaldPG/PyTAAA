Using search strategy: explore-exploit
==============================================================
Monte Carlo Loop Runner
==============================================================
Number of runs: 15
Search strategy: explore-exploit
Verbose mode: disabled
Reset state after each run: --reset
JSON configuration: none
Start time: Sun Aug 24 00:46:57 EDT 2025
Working directory: /Users/donaldpg/PyProjects/worktree2/PyTAAA
==============================================================


--------------------------------------------------------------
Starting Monte Carlo Run 1 of 15
Time: Sun Aug 24 00:46:57 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $873,334,816
Annual Return: 38.86%
Sharpe Ratio: 1.33581
Sortino Ratio: 1.241
Max Drawdown: -55.0%
Avg Drawdown: -11.1%
Normalized Score: -0.509
Lookback periods: [54, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,195,690,242
Annual Return: 42.60%
Sharpe Ratio: 1.41064
Sortino Ratio: 1.367
Max Drawdown: -59.5%
Avg Drawdown: -13.8%
Normalized Score: -0.452
Lookback periods: [101, 148, 185] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,461,590,929
Annual Return: 44.49%
Sharpe Ratio: 1.47835
Sortino Ratio: 1.428
Max Drawdown: -61.7%
Avg Drawdown: -12.5%
Normalized Score: 0.027
Lookback periods: [102, 130, 138] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 13m 27sRunning iteration 21/750... Est. remaining: 9m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,154,203,645
Annual Return: 45.25%
Sharpe Ratio: 1.49972
Sortino Ratio: 1.458
Max Drawdown: -61.3%
Avg Drawdown: -13.1%
Normalized Score: 0.089
Lookback periods: [145, 152, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 8m 46sRunning iteration 41/750... Est. remaining: 7m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,276,167,130
Annual Return: 44.26%
Sharpe Ratio: 1.45566
Sortino Ratio: 1.417
Max Drawdown: -58.5%
Avg Drawdown: -11.9%
Normalized Score: 0.179
Lookback periods: [136, 163, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,155,812,767
Annual Return: 46.16%
Sharpe Ratio: 1.50198
Sortino Ratio: 1.456
Max Drawdown: -59.2%
Avg Drawdown: -13.0%
Normalized Score: 0.291
Lookback periods: [148, 155, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/750... Est. remaining: 7m 56sRunning iteration 61/750... Est. remaining: 7m 26sRunning iteration 71/750... Est. remaining: 7m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,912,021,945
Annual Return: 46.73%
Sharpe Ratio: 1.51989
Sortino Ratio: 1.484
Max Drawdown: -59.7%
Avg Drawdown: -12.0%
Normalized Score: 0.531
Lookback periods: [150, 156, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/750... Est. remaining: 6m 56sRunning iteration 91/750... Est. remaining: 6m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,011,182,465
Annual Return: 48.53%
Sharpe Ratio: 1.57258
Sortino Ratio: 1.539
Max Drawdown: -62.5%
Avg Drawdown: -11.7%
Normalized Score: 0.801
Lookback periods: [149, 155, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,591,473,456
Annual Return: 46.50%
Sharpe Ratio: 1.51090
Sortino Ratio: 1.484
Max Drawdown: -55.0%
Avg Drawdown: -10.7%
Normalized Score: 0.881
Lookback periods: [159, 164, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/750... Est. remaining: 6m 41sbest_combination: {'lookbacks': [159, 164, 170], 'score': np.float64(0.8805631626840288), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,504,025,403
Annual Return: 43.14%
Sharpe Ratio: 1.52524
Sortino Ratio: 1.433
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.582
Lookback periods: [52, 54, 84] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/750... Est. remaining: 6m 34sRunning iteration 121/750... Est. remaining: 6m 22sRunning iteration 131/750... Est. remaining: 6m 11sRunning iteration 141/750... Est. remaining: 6m 0sRunning iteration 151/750... Est. remaining: 5m 51sRunning iteration 161/750... Est. remaining: 5m 41sRunning iteration 171/750... Est. remaining: 5m 33sRunning iteration 181/750... Est. remaining: 5m 24sRunning iteration 191/750... Est. remaining: 5m 16sRunning iteration 201/750... Est. remaining: 5m 8sbest_combination: {'lookbacks': [52, 54, 84], 'score': np.float64(1.5823166971648814), 'visits': 1}
Running iteration 211/750... Est. remaining: 5m 1sRunning iteration 221/750... Est. remaining: 4m 53sRunning iteration 231/750... Est. remaining: 4m 46sRunning iteration 241/750... Est. remaining: 4m 39sRunning iteration 251/750... Est. remaining: 4m 32sRunning iteration 261/750... Est. remaining: 4m 25sRunning iteration 271/750... Est. remaining: 4m 18sRunning iteration 281/750... Est. remaining: 4m 12sRunning iteration 291/750... Est. remaining: 4m 5sRunning iteration 301/750... Est. remaining: 3m 59sbest_combination: {'lookbacks': [52, 54, 84], 'score': np.float64(1.5823166971648814), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 53sRunning iteration 321/750... Est. remaining: 3m 47sRunning iteration 331/750... Est. remaining: 3m 41sRunning iteration 341/750... Est. remaining: 3m 35sRunning iteration 351/750... Est. remaining: 3m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,310,623,929
Annual Return: 44.30%
Sharpe Ratio: 1.57279
Sortino Ratio: 1.480
Max Drawdown: -35.6%
Avg Drawdown: -9.2%
Normalized Score: 1.761
Lookback periods: [50, 53, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 361/750... Est. remaining: 3m 24sRunning iteration 371/750... Est. remaining: 3m 19sRunning iteration 381/750... Est. remaining: 3m 13sRunning iteration 391/750... Est. remaining: 3m 7sRunning iteration 401/750... Est. remaining: 3m 2sbest_combination: {'lookbacks': [50, 53, 83], 'score': np.float64(1.7609006729161525), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 56sRunning iteration 421/750... Est. remaining: 2m 50s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,224,222,968
Annual Return: 44.19%
Sharpe Ratio: 1.57543
Sortino Ratio: 1.488
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.803
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 431/750... Est. remaining: 2m 46sRunning iteration 441/750... Est. remaining: 2m 40s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,079,286,194
Annual Return: 44.00%
Sharpe Ratio: 1.57949
Sortino Ratio: 1.486
Max Drawdown: -34.8%
Avg Drawdown: -9.0%
Normalized Score: 1.818
Lookback periods: [50, 54, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 451/750... Est. remaining: 2m 36s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,928,518,176
Annual Return: 43.79%
Sharpe Ratio: 1.59880
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.928
Lookback periods: [50, 52, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 461/750... Est. remaining: 2m 31sRunning iteration 471/750... Est. remaining: 2m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,573,730,700
Annual Return: 44.62%
Sharpe Ratio: 1.59269
Sortino Ratio: 1.510
Max Drawdown: -34.7%
Avg Drawdown: -8.9%
Normalized Score: 1.944
Lookback periods: [50, 53, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 481/750... Est. remaining: 2m 21sRunning iteration 491/750... Est. remaining: 2m 15sRunning iteration 501/750... Est. remaining: 2m 10sbest_combination: {'lookbacks': [50, 53, 96], 'score': np.float64(1.9436218169275854), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.491
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/750... Est. remaining: 2m 5sRunning iteration 521/750... Est. remaining: 1m 59sRunning iteration 531/750... Est. remaining: 1m 54sRunning iteration 541/750... Est. remaining: 1m 49sRunning iteration 551/750... Est. remaining: 1m 43sRunning iteration 561/750... Est. remaining: 1m 38sRunning iteration 571/750... Est. remaining: 1m 33sRunning iteration 581/750... Est. remaining: 1m 27sRunning iteration 591/750... Est. remaining: 1m 22sRunning iteration 601/750... Est. remaining: 1m 17sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.4914882359425787), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 12sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 1sRunning iteration 641/750... Est. remaining: 0m 56sRunning iteration 651/750... Est. remaining: 0m 51sRunning iteration 661/750... Est. remaining: 0m 46sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.4914882359425787), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 2.49
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.4914882359425787), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 52, 95] (score: 2.4915)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 1 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 1/15 runs completed (1 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 2 of 15
Time: Sun Aug 24 00:53:26 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $523,403,259
Annual Return: 36.82%
Sharpe Ratio: 1.28668
Sortino Ratio: 1.195
Max Drawdown: -52.3%
Avg Drawdown: -12.9%
Normalized Score: -1.131
Lookback periods: [88, 94, 97] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $517,591,997
Annual Return: 36.78%
Sharpe Ratio: 1.30558
Sortino Ratio: 1.206
Max Drawdown: -52.3%
Avg Drawdown: -11.6%
Normalized Score: -0.921
Lookback periods: [53, 83, 122] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,587,495,502
Annual Return: 45.66%
Sharpe Ratio: 1.49010
Sortino Ratio: 1.447
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.062
Lookback periods: [168, 194, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 13m 44sRunning iteration 21/750... Est. remaining: 9m 46s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,253,833,054
Annual Return: 42.71%
Sharpe Ratio: 1.47260
Sortino Ratio: 1.402
Max Drawdown: -52.3%
Avg Drawdown: -10.7%
Normalized Score: 0.113
Lookback periods: [88, 105, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 8m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,001,560,148
Annual Return: 39.41%
Sharpe Ratio: 1.40689
Sortino Ratio: 1.303
Max Drawdown: -37.1%
Avg Drawdown: -10.3%
Normalized Score: 0.312
Lookback periods: [51, 57, 81] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 8m 18sRunning iteration 51/750... Est. remaining: 7m 42s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,268,296,480
Annual Return: 40.36%
Sharpe Ratio: 1.44832
Sortino Ratio: 1.339
Max Drawdown: -39.0%
Avg Drawdown: -10.7%
Normalized Score: 0.359
Lookback periods: [51, 56, 75] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,543,320,842
Annual Return: 41.16%
Sharpe Ratio: 1.46486
Sortino Ratio: 1.363
Max Drawdown: -36.9%
Avg Drawdown: -9.8%
Normalized Score: 0.665
Lookback periods: [50, 54, 77] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/750... Est. remaining: 7m 42sRunning iteration 71/750... Est. remaining: 7m 17sRunning iteration 81/750... Est. remaining: 6m 57sRunning iteration 91/750... Est. remaining: 6m 40sRunning iteration 101/750... Est. remaining: 6m 25sbest_combination: {'lookbacks': [50, 54, 77], 'score': np.float64(0.6648710324526418), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 13sRunning iteration 121/750... Est. remaining: 6m 1sRunning iteration 131/750... Est. remaining: 5m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,729,867,987
Annual Return: 43.50%
Sharpe Ratio: 1.54239
Sortino Ratio: 1.448
Max Drawdown: -36.1%
Avg Drawdown: -9.4%
Normalized Score: 1.149
Lookback periods: [50, 53, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/750... Est. remaining: 5m 47sRunning iteration 151/750... Est. remaining: 5m 38sRunning iteration 161/750... Est. remaining: 5m 29sRunning iteration 171/750... Est. remaining: 5m 21sRunning iteration 181/750... Est. remaining: 5m 14sRunning iteration 191/750... Est. remaining: 5m 6s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,934,300,309
Annual Return: 43.80%
Sharpe Ratio: 1.56598
Sortino Ratio: 1.470
Max Drawdown: -35.6%
Avg Drawdown: -9.3%
Normalized Score: 1.269
Lookback periods: [50, 54, 89] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/750... Est. remaining: 5m 2sbest_combination: {'lookbacks': [50, 54, 89], 'score': np.float64(1.269049966130722), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 55sRunning iteration 221/750... Est. remaining: 4m 48sRunning iteration 231/750... Est. remaining: 4m 41sRunning iteration 241/750... Est. remaining: 4m 34sRunning iteration 251/750... Est. remaining: 4m 27sRunning iteration 261/750... Est. remaining: 4m 21s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,942,937,289
Annual Return: 43.81%
Sharpe Ratio: 1.57848
Sortino Ratio: 1.484
Max Drawdown: -34.7%
Avg Drawdown: -7.8%
Normalized Score: 1.529
Lookback periods: [50, 50, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 271/750... Est. remaining: 4m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,031,844,594
Annual Return: 43.93%
Sharpe Ratio: 1.59905
Sortino Ratio: 1.495
Max Drawdown: -34.7%
Avg Drawdown: -8.1%
Normalized Score: 1.546
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/750... Est. remaining: 4m 13sRunning iteration 291/750... Est. remaining: 4m 6sRunning iteration 301/750... Est. remaining: 4m 0sbest_combination: {'lookbacks': [50, 51, 98], 'score': np.float64(1.5459995609716082), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,247,532,043
Annual Return: 44.22%
Sharpe Ratio: 1.60550
Sortino Ratio: 1.504
Max Drawdown: -34.7%
Avg Drawdown: -8.1%
Normalized Score: 1.585
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/750... Est. remaining: 3m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.977
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/750... Est. remaining: 3m 52sRunning iteration 331/750... Est. remaining: 3m 46sRunning iteration 341/750... Est. remaining: 3m 40sRunning iteration 351/750... Est. remaining: 3m 34sRunning iteration 361/750... Est. remaining: 3m 28sRunning iteration 371/750... Est. remaining: 3m 22sRunning iteration 381/750... Est. remaining: 3m 16sRunning iteration 391/750... Est. remaining: 3m 11sRunning iteration 401/750... Est. remaining: 3m 5sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9766679387624062), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 59sRunning iteration 421/750... Est. remaining: 2m 53sRunning iteration 431/750... Est. remaining: 2m 48sRunning iteration 441/750... Est. remaining: 2m 42sRunning iteration 451/750... Est. remaining: 2m 37sRunning iteration 461/750... Est. remaining: 2m 31sRunning iteration 471/750... Est. remaining: 2m 26sRunning iteration 481/750... Est. remaining: 2m 20sRunning iteration 491/750... Est. remaining: 2m 15sRunning iteration 501/750... Est. remaining: 2m 9sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9766679387624062), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 4sRunning iteration 521/750... Est. remaining: 1m 59sRunning iteration 531/750... Est. remaining: 1m 53sRunning iteration 541/750... Est. remaining: 1m 48sRunning iteration 551/750... Est. remaining: 1m 43sRunning iteration 561/750... Est. remaining: 1m 37sRunning iteration 571/750... Est. remaining: 1m 32sRunning iteration 581/750... Est. remaining: 1m 27sRunning iteration 591/750... Est. remaining: 1m 22sRunning iteration 601/750... Est. remaining: 1m 16sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9766679387624062), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 1sRunning iteration 641/750... Est. remaining: 0m 56sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9766679387624062), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 1.98
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.9766679387624062), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 52, 95] (score: 1.9767)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 2 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 2/15 runs completed (2 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 3 of 15
Time: Sun Aug 24 00:59:52 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,325,510,543
Annual Return: 44.32%
Sharpe Ratio: 1.47557
Sortino Ratio: 1.429
Max Drawdown: -55.0%
Avg Drawdown: -12.0%
Normalized Score: -0.049
Lookback periods: [124, 147, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,710,391,971
Annual Return: 47.27%
Sharpe Ratio: 1.54212
Sortino Ratio: 1.499
Max Drawdown: -59.2%
Avg Drawdown: -12.3%
Normalized Score: 0.072
Lookback periods: [148, 160, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 12m 4sRunning iteration 21/750... Est. remaining: 8m 52sRunning iteration 31/750... Est. remaining: 7m 48sRunning iteration 41/750... Est. remaining: 7m 12sRunning iteration 51/750... Est. remaining: 6m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,164,636,126
Annual Return: 47.55%
Sharpe Ratio: 1.52926
Sortino Ratio: 1.503
Max Drawdown: -59.5%
Avg Drawdown: -12.0%
Normalized Score: 0.116
Lookback periods: [176, 181, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/750... Est. remaining: 6m 44sRunning iteration 71/750... Est. remaining: 6m 27sRunning iteration 81/750... Est. remaining: 6m 14sRunning iteration 91/750... Est. remaining: 6m 2sRunning iteration 101/750... Est. remaining: 5m 52sbest_combination: {'lookbacks': [176, 181, 189], 'score': np.float64(0.11645896475833188), 'visits': 1}
Running iteration 111/750... Est. remaining: 5m 43sRunning iteration 121/750... Est. remaining: 5m 35sRunning iteration 131/750... Est. remaining: 5m 27sRunning iteration 141/750... Est. remaining: 5m 20sRunning iteration 151/750... Est. remaining: 5m 14sRunning iteration 161/750... Est. remaining: 5m 7sRunning iteration 171/750... Est. remaining: 5m 1sRunning iteration 181/750... Est. remaining: 4m 55sRunning iteration 191/750... Est. remaining: 4m 49sRunning iteration 201/750... Est. remaining: 4m 43sbest_combination: {'lookbacks': [176, 181, 189], 'score': np.float64(0.11645896475833188), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,678,720,604
Annual Return: 46.56%
Sharpe Ratio: 1.51388
Sortino Ratio: 1.482
Max Drawdown: -57.9%
Avg Drawdown: -11.4%
Normalized Score: 0.169
Lookback periods: [154, 162, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/750... Est. remaining: 4m 40sRunning iteration 221/750... Est. remaining: 4m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,270,815,164
Annual Return: 48.16%
Sharpe Ratio: 1.56516
Sortino Ratio: 1.532
Max Drawdown: -57.2%
Avg Drawdown: -10.7%
Normalized Score: 0.494
Lookback periods: [154, 159, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 231/750... Est. remaining: 4m 31sRunning iteration 241/750... Est. remaining: 4m 25sRunning iteration 251/750... Est. remaining: 4m 19sRunning iteration 261/750... Est. remaining: 4m 13sRunning iteration 271/750... Est. remaining: 4m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,930,337,315
Annual Return: 47.98%
Sharpe Ratio: 1.56398
Sortino Ratio: 1.543
Max Drawdown: -59.0%
Avg Drawdown: -10.3%
Normalized Score: 0.509
Lookback periods: [158, 162, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/750... Est. remaining: 4m 4sRunning iteration 291/750... Est. remaining: 3m 58sRunning iteration 301/750... Est. remaining: 3m 52sbest_combination: {'lookbacks': [158, 162, 166], 'score': np.float64(0.50853677710347), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $12,844,284,195
Annual Return: 50.06%
Sharpe Ratio: 1.62115
Sortino Ratio: 1.588
Max Drawdown: -59.7%
Avg Drawdown: -11.3%
Normalized Score: 0.552
Lookback periods: [149, 155, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/750... Est. remaining: 3m 48sRunning iteration 321/750... Est. remaining: 3m 42sRunning iteration 331/750... Est. remaining: 3m 37sRunning iteration 341/750... Est. remaining: 3m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,599,776,726
Annual Return: 48.80%
Sharpe Ratio: 1.59565
Sortino Ratio: 1.556
Max Drawdown: -55.0%
Avg Drawdown: -10.4%
Normalized Score: 0.716
Lookback periods: [157, 159, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 351/750... Est. remaining: 3m 27sRunning iteration 361/750... Est. remaining: 3m 22sRunning iteration 371/750... Est. remaining: 3m 16sRunning iteration 381/750... Est. remaining: 3m 11sRunning iteration 391/750... Est. remaining: 3m 5sRunning iteration 401/750... Est. remaining: 3m 0sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(0.715959531319786), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 55sRunning iteration 421/750... Est. remaining: 2m 49sRunning iteration 431/750... Est. remaining: 2m 44sRunning iteration 441/750... Est. remaining: 2m 39sRunning iteration 451/750... Est. remaining: 2m 33sRunning iteration 461/750... Est. remaining: 2m 28sRunning iteration 471/750... Est. remaining: 2m 23sRunning iteration 481/750... Est. remaining: 2m 18sRunning iteration 491/750... Est. remaining: 2m 12sRunning iteration 501/750... Est. remaining: 2m 7sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(0.715959531319786), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 2sRunning iteration 521/750... Est. remaining: 1m 56sRunning iteration 531/750... Est. remaining: 1m 51sRunning iteration 541/750... Est. remaining: 1m 46sRunning iteration 551/750... Est. remaining: 1m 41sRunning iteration 561/750... Est. remaining: 1m 36sRunning iteration 571/750... Est. remaining: 1m 31sRunning iteration 581/750... Est. remaining: 1m 25sRunning iteration 591/750... Est. remaining: 1m 20sRunning iteration 601/750... Est. remaining: 1m 15sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(0.715959531319786), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 10sRunning iteration 621/750... Est. remaining: 1m 5sRunning iteration 631/750... Est. remaining: 1m 0sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(0.715959531319786), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 4s
Monte Carlo simulation completed in 6.2 minutes
Best normalized score: 0.72
best_combination: {'lookbacks': [157, 159, 168], 'score': np.float64(0.715959531319786), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [157, 159, 168] (score: 0.7160)

Monte Carlo simulation completed in 6.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [157, 159, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 112 selections (26.9%)
2. sp500_hma: 112 selections (26.9%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,599,776,725.76
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 3 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 3/15 runs completed (3 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 4 of 15
Time: Sun Aug 24 01:06:14 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $217,374,001
Annual Return: 33.40%
Sharpe Ratio: 1.16236
Sortino Ratio: 1.076
Max Drawdown: -62.9%
Avg Drawdown: -14.0%
Normalized Score: -1.764
Lookback periods: [70, 85, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,948,742,973
Annual Return: 45.04%
Sharpe Ratio: 1.46455
Sortino Ratio: 1.436
Max Drawdown: -59.0%
Avg Drawdown: -11.4%
Normalized Score: 0.120
Lookback periods: [154, 174, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 12m 15sRunning iteration 21/750... Est. remaining: 9m 6sRunning iteration 31/750... Est. remaining: 7m 59s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,823,401,655
Annual Return: 41.84%
Sharpe Ratio: 1.42787
Sortino Ratio: 1.362
Max Drawdown: -52.3%
Avg Drawdown: -10.7%
Normalized Score: 0.202
Lookback periods: [84, 127, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 7m 43sRunning iteration 51/750... Est. remaining: 7m 13sRunning iteration 61/750... Est. remaining: 6m 51sRunning iteration 71/750... Est. remaining: 6m 35sRunning iteration 81/750... Est. remaining: 6m 21sRunning iteration 91/750... Est. remaining: 6m 10sRunning iteration 101/750... Est. remaining: 6m 1sbest_combination: {'lookbacks': [84, 127, 146], 'score': np.float64(0.20187594853213375), 'visits': 1}
Running iteration 111/750... Est. remaining: 5m 52sRunning iteration 121/750... Est. remaining: 5m 44sRunning iteration 131/750... Est. remaining: 5m 36sRunning iteration 141/750... Est. remaining: 5m 29sRunning iteration 151/750... Est. remaining: 5m 22sRunning iteration 161/750... Est. remaining: 5m 15sRunning iteration 171/750... Est. remaining: 5m 7s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $729,962,065
Annual Return: 38.14%
Sharpe Ratio: 1.37048
Sortino Ratio: 1.286
Max Drawdown: -34.7%
Avg Drawdown: -10.0%
Normalized Score: 0.554
Lookback periods: [50, 78, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,779,139,764
Annual Return: 41.74%
Sharpe Ratio: 1.48095
Sortino Ratio: 1.377
Max Drawdown: -37.1%
Avg Drawdown: -10.0%
Normalized Score: 0.863
Lookback periods: [51, 54, 79] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/750... Est. remaining: 5m 8s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,193,622,913
Annual Return: 42.60%
Sharpe Ratio: 1.52289
Sortino Ratio: 1.433
Max Drawdown: -34.7%
Avg Drawdown: -9.7%
Normalized Score: 1.153
Lookback periods: [50, 55, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/750... Est. remaining: 5m 4sRunning iteration 201/750... Est. remaining: 4m 57sbest_combination: {'lookbacks': [50, 55, 80], 'score': np.float64(1.1533303406501747), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 51sRunning iteration 221/750... Est. remaining: 4m 44sRunning iteration 231/750... Est. remaining: 4m 38sRunning iteration 241/750... Est. remaining: 4m 31s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,600,088,602
Annual Return: 43.30%
Sharpe Ratio: 1.54769
Sortino Ratio: 1.452
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.328
Lookback periods: [50, 54, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/750... Est. remaining: 4m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,310,623,929
Annual Return: 44.30%
Sharpe Ratio: 1.57279
Sortino Ratio: 1.480
Max Drawdown: -35.6%
Avg Drawdown: -9.2%
Normalized Score: 1.400
Lookback periods: [50, 53, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 261/750... Est. remaining: 4m 23sRunning iteration 271/750... Est. remaining: 4m 17sRunning iteration 281/750... Est. remaining: 4m 11sRunning iteration 291/750... Est. remaining: 4m 5sRunning iteration 301/750... Est. remaining: 3m 59sbest_combination: {'lookbacks': [50, 53, 83], 'score': np.float64(1.400079467874811), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 53sRunning iteration 321/750... Est. remaining: 3m 47sRunning iteration 331/750... Est. remaining: 3m 41sRunning iteration 341/750... Est. remaining: 3m 35sRunning iteration 351/750... Est. remaining: 3m 29sRunning iteration 361/750... Est. remaining: 3m 24sRunning iteration 371/750... Est. remaining: 3m 18sRunning iteration 381/750... Est. remaining: 3m 12sRunning iteration 391/750... Est. remaining: 3m 6sRunning iteration 401/750... Est. remaining: 3m 1sbest_combination: {'lookbacks': [50, 53, 83], 'score': np.float64(1.400079467874811), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 55sRunning iteration 421/750... Est. remaining: 2m 50sRunning iteration 431/750... Est. remaining: 2m 44sRunning iteration 441/750... Est. remaining: 2m 39sRunning iteration 451/750... Est. remaining: 2m 33sRunning iteration 461/750... Est. remaining: 2m 28sRunning iteration 471/750... Est. remaining: 2m 22sRunning iteration 481/750... Est. remaining: 2m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,224,222,968
Annual Return: 44.19%
Sharpe Ratio: 1.57543
Sortino Ratio: 1.488
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.442
Lookback periods: [50, 54, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 491/750... Est. remaining: 2m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,525,950,064
Annual Return: 43.18%
Sharpe Ratio: 1.55179
Sortino Ratio: 1.460
Max Drawdown: -34.7%
Avg Drawdown: -8.2%
Normalized Score: 1.539
Lookback periods: [50, 50, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 501/750... Est. remaining: 2m 8sbest_combination: {'lookbacks': [50, 50, 96], 'score': np.float64(1.53885425607769), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,928,518,176
Annual Return: 43.79%
Sharpe Ratio: 1.59880
Sortino Ratio: 1.497
Max Drawdown: -34.7%
Avg Drawdown: -8.4%
Normalized Score: 1.626
Lookback periods: [50, 52, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 511/750... Est. remaining: 2m 3sRunning iteration 521/750... Est. remaining: 1m 58sRunning iteration 531/750... Est. remaining: 1m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,916,119,872
Annual Return: 43.77%
Sharpe Ratio: 1.58945
Sortino Ratio: 1.492
Max Drawdown: -34.7%
Avg Drawdown: -8.3%
Normalized Score: 1.632
Lookback periods: [50, 51, 96] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 541/750... Est. remaining: 1m 48sRunning iteration 551/750... Est. remaining: 1m 42sRunning iteration 561/750... Est. remaining: 1m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,031,844,594
Annual Return: 43.93%
Sharpe Ratio: 1.59905
Sortino Ratio: 1.495
Max Drawdown: -34.7%
Avg Drawdown: -8.1%
Normalized Score: 1.694
Lookback periods: [50, 51, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 2.031
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/750... Est. remaining: 1m 32sRunning iteration 581/750... Est. remaining: 1m 27sRunning iteration 591/750... Est. remaining: 1m 22sRunning iteration 601/750... Est. remaining: 1m 17sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0306776036035687), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 1sRunning iteration 641/750... Est. remaining: 0m 56sRunning iteration 651/750... Est. remaining: 0m 51sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0306776036035687), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 2.03
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(2.0306776036035687), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 52, 95] (score: 2.0307)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 4 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 4/15 runs completed (4 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 5 of 15
Time: Sun Aug 24 01:12:42 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,517,279,228
Annual Return: 41.09%
Sharpe Ratio: 1.39451
Sortino Ratio: 1.316
Max Drawdown: -52.3%
Avg Drawdown: -12.3%
Normalized Score: -0.252
Lookback periods: [95, 96, 110] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,897,272,418
Annual Return: 43.75%
Sharpe Ratio: 1.44311
Sortino Ratio: 1.393
Max Drawdown: -56.8%
Avg Drawdown: -12.4%
Normalized Score: -0.110
Lookback periods: [140, 161, 179] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 12m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $753,143,309
Annual Return: 38.26%
Sharpe Ratio: 1.34824
Sortino Ratio: 1.250
Max Drawdown: -41.9%
Avg Drawdown: -9.8%
Normalized Score: 0.109
Lookback periods: [50, 50, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,260,259,843
Annual Return: 46.98%
Sharpe Ratio: 1.50687
Sortino Ratio: 1.458
Max Drawdown: -59.6%
Avg Drawdown: -11.5%
Normalized Score: 0.239
Lookback periods: [186, 188, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 10m 22sRunning iteration 31/750... Est. remaining: 8m 45sRunning iteration 41/750... Est. remaining: 7m 54sRunning iteration 51/750... Est. remaining: 7m 21sRunning iteration 61/750... Est. remaining: 6m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,656,349,560
Annual Return: 46.55%
Sharpe Ratio: 1.50772
Sortino Ratio: 1.468
Max Drawdown: -59.9%
Avg Drawdown: -11.3%
Normalized Score: 0.251
Lookback periods: [176, 200, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/750... Est. remaining: 6m 51sRunning iteration 81/750... Est. remaining: 6m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,842,633,517
Annual Return: 46.68%
Sharpe Ratio: 1.50130
Sortino Ratio: 1.474
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.288
Lookback periods: [176, 195, 196] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/750... Est. remaining: 6m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,639,178,252
Annual Return: 47.82%
Sharpe Ratio: 1.54852
Sortino Ratio: 1.505
Max Drawdown: -60.7%
Avg Drawdown: -11.8%
Normalized Score: 0.345
Lookback periods: [184, 187, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 101/750... Est. remaining: 6m 25sbest_combination: {'lookbacks': [184, 187, 200], 'score': np.float64(0.3448622388538311), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 14sRunning iteration 121/750... Est. remaining: 6m 3sRunning iteration 131/750... Est. remaining: 5m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,095,540,154
Annual Return: 46.86%
Sharpe Ratio: 1.54179
Sortino Ratio: 1.505
Max Drawdown: -57.2%
Avg Drawdown: -11.1%
Normalized Score: 0.489
Lookback periods: [141, 154, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 141/750... Est. remaining: 5m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,026,836,717
Annual Return: 47.47%
Sharpe Ratio: 1.54581
Sortino Ratio: 1.510
Max Drawdown: -57.2%
Avg Drawdown: -10.8%
Normalized Score: 0.572
Lookback periods: [154, 161, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 151/750... Est. remaining: 5m 45sRunning iteration 161/750... Est. remaining: 5m 36sRunning iteration 171/750... Est. remaining: 5m 28sRunning iteration 181/750... Est. remaining: 5m 19sRunning iteration 191/750... Est. remaining: 5m 11sRunning iteration 201/750... Est. remaining: 5m 3sbest_combination: {'lookbacks': [154, 161, 170], 'score': np.float64(0.5720801568943302), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 56sRunning iteration 221/750... Est. remaining: 4m 48sRunning iteration 231/750... Est. remaining: 4m 41sRunning iteration 241/750... Est. remaining: 4m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,301,456,641
Annual Return: 49.50%
Sharpe Ratio: 1.58586
Sortino Ratio: 1.557
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.633
Lookback periods: [177, 189, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/750... Est. remaining: 4m 30sRunning iteration 261/750... Est. remaining: 4m 24sRunning iteration 271/750... Est. remaining: 4m 17sRunning iteration 281/750... Est. remaining: 4m 11sRunning iteration 291/750... Est. remaining: 4m 5sRunning iteration 301/750... Est. remaining: 3m 58sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.6333205212279582), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 52sRunning iteration 321/750... Est. remaining: 3m 47sRunning iteration 331/750... Est. remaining: 3m 41sRunning iteration 341/750... Est. remaining: 3m 35sRunning iteration 351/750... Est. remaining: 3m 30sRunning iteration 361/750... Est. remaining: 3m 24sRunning iteration 371/750... Est. remaining: 3m 18sRunning iteration 381/750... Est. remaining: 3m 13sRunning iteration 391/750... Est. remaining: 3m 7sRunning iteration 401/750... Est. remaining: 3m 2sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.6333205212279582), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 56sRunning iteration 421/750... Est. remaining: 2m 51sRunning iteration 431/750... Est. remaining: 2m 45sRunning iteration 441/750... Est. remaining: 2m 40sRunning iteration 451/750... Est. remaining: 2m 34sRunning iteration 461/750... Est. remaining: 2m 29sRunning iteration 471/750... Est. remaining: 2m 24sRunning iteration 481/750... Est. remaining: 2m 18sRunning iteration 491/750... Est. remaining: 2m 13sRunning iteration 501/750... Est. remaining: 2m 8sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.6333205212279582), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 2sRunning iteration 521/750... Est. remaining: 1m 57sRunning iteration 531/750... Est. remaining: 1m 52sRunning iteration 541/750... Est. remaining: 1m 47sRunning iteration 551/750... Est. remaining: 1m 42sRunning iteration 561/750... Est. remaining: 1m 37sRunning iteration 571/750... Est. remaining: 1m 31sRunning iteration 581/750... Est. remaining: 1m 26sRunning iteration 591/750... Est. remaining: 1m 21sRunning iteration 601/750... Est. remaining: 1m 16sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.6333205212279582), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 1sRunning iteration 641/750... Est. remaining: 0m 55sRunning iteration 651/750... Est. remaining: 0m 50sRunning iteration 661/750... Est. remaining: 0m 45sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.6333205212279582), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.3 minutes
Best normalized score: 0.63
best_combination: {'lookbacks': [177, 189, 198], 'score': np.float64(0.6333205212279582), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [177, 189, 198] (score: 0.6333)

Monte Carlo simulation completed in 6.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [177, 189, 198] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 119 selections (28.6%)
2. sp500_hma: 104 selections (25.0%)
3. naz100_pine: 84 selections (20.2%)
4. naz100_pi: 71 selections (17.1%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,301,456,641.47
Average Annualized Gain: 49.5%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 5 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 5/15 runs completed (5 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 6 of 15
Time: Sun Aug 24 01:19:08 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,353,471,418
Annual Return: 44.35%
Sharpe Ratio: 1.46533
Sortino Ratio: 1.426
Max Drawdown: -69.0%
Avg Drawdown: -12.3%
Normalized Score: -0.582
Lookback periods: [123, 172, 190] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,214,789,573
Annual Return: 40.19%
Sharpe Ratio: 1.37798
Sortino Ratio: 1.286
Max Drawdown: -55.0%
Avg Drawdown: -11.5%
Normalized Score: -0.531
Lookback periods: [51, 123, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,919,375,486
Annual Return: 42.05%
Sharpe Ratio: 1.40622
Sortino Ratio: 1.356
Max Drawdown: -58.0%
Avg Drawdown: -12.6%
Normalized Score: -0.519
Lookback periods: [115, 146, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 13m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,430,098,758
Annual Return: 47.09%
Sharpe Ratio: 1.51119
Sortino Ratio: 1.482
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.242
Lookback periods: [155, 157, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 10m 28sRunning iteration 31/750... Est. remaining: 8m 51sRunning iteration 41/750... Est. remaining: 8m 0s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,872,627,948
Annual Return: 46.71%
Sharpe Ratio: 1.51806
Sortino Ratio: 1.483
Max Drawdown: -59.6%
Avg Drawdown: -11.0%
Normalized Score: 0.277
Lookback periods: [183, 185, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/750... Est. remaining: 7m 43sRunning iteration 61/750... Est. remaining: 7m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,592,136,623
Annual Return: 47.80%
Sharpe Ratio: 1.55975
Sortino Ratio: 1.520
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 0.696
Lookback periods: [156, 160, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/750... Est. remaining: 7m 6sRunning iteration 81/750... Est. remaining: 6m 49sRunning iteration 91/750... Est. remaining: 6m 35sRunning iteration 101/750... Est. remaining: 6m 22sbest_combination: {'lookbacks': [156, 160, 170], 'score': np.float64(0.6964422926228871), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 10sRunning iteration 121/750... Est. remaining: 6m 0sRunning iteration 131/750... Est. remaining: 5m 51sRunning iteration 141/750... Est. remaining: 5m 42sRunning iteration 151/750... Est. remaining: 5m 33sRunning iteration 161/750... Est. remaining: 5m 25sRunning iteration 171/750... Est. remaining: 5m 18sRunning iteration 181/750... Est. remaining: 5m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,499,820,549
Annual Return: 48.76%
Sharpe Ratio: 1.58242
Sortino Ratio: 1.557
Max Drawdown: -55.0%
Avg Drawdown: -10.5%
Normalized Score: 0.857
Lookback periods: [156, 162, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/750... Est. remaining: 5m 6sRunning iteration 201/750... Est. remaining: 4m 59sbest_combination: {'lookbacks': [156, 162, 169], 'score': np.float64(0.8571471703687422), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 52sRunning iteration 221/750... Est. remaining: 4m 45sRunning iteration 231/750... Est. remaining: 4m 38sRunning iteration 241/750... Est. remaining: 4m 32sRunning iteration 251/750... Est. remaining: 4m 25sRunning iteration 261/750... Est. remaining: 4m 19sRunning iteration 271/750... Est. remaining: 4m 13sRunning iteration 281/750... Est. remaining: 4m 7sRunning iteration 291/750... Est. remaining: 4m 1sRunning iteration 301/750... Est. remaining: 3m 56sbest_combination: {'lookbacks': [156, 162, 169], 'score': np.float64(0.8571471703687422), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 50sRunning iteration 321/750... Est. remaining: 3m 45sRunning iteration 331/750... Est. remaining: 3m 39sRunning iteration 341/750... Est. remaining: 22m 8sRunning iteration 351/750... Est. remaining: 39m 6sRunning iteration 361/750... Est. remaining: 37m 15sRunning iteration 371/750... Est. remaining: 35m 24sRunning iteration 381/750... Est. remaining: 105m 45sRunning iteration 391/750... Est. remaining: 100m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,624,431,828
Annual Return: 49.24%
Sharpe Ratio: 1.60609
Sortino Ratio: 1.568
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 0.865
Lookback periods: [154, 159, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 401/750... Est. remaining: 220m 27sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(0.8647794681839749), 'visits': 1}
Running iteration 411/750... Est. remaining: 209m 0sRunning iteration 421/750... Est. remaining: 221m 28sRunning iteration 431/750... Est. remaining: 209m 49sRunning iteration 441/750... Est. remaining: 212m 26sRunning iteration 451/750... Est. remaining: 201m 4sRunning iteration 461/750... Est. remaining: 245m 18sRunning iteration 471/750... Est. remaining: 231m 51sRunning iteration 481/750... Est. remaining: 226m 37sRunning iteration 491/750... Est. remaining: 213m 49sRunning iteration 501/750... Est. remaining: 231m 56sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(0.8647794681839749), 'visits': 1}
Running iteration 511/750... Est. remaining: 218m 20sRunning iteration 521/750... Est. remaining: 219m 14sRunning iteration 531/750... Est. remaining: 217m 52sRunning iteration 541/750... Est. remaining: 204m 8sRunning iteration 551/750... Est. remaining: 194m 30sRunning iteration 561/750... Est. remaining: 181m 30sRunning iteration 571/750... Est. remaining: 171m 15sRunning iteration 581/750... Est. remaining: 158m 58sRunning iteration 591/750... Est. remaining: 147m 33sRunning iteration 601/750... Est. remaining: 136m 3sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(0.8647794681839749), 'visits': 1}
Running iteration 611/750... Est. remaining: 125m 40sRunning iteration 621/750... Est. remaining: 114m 49sRunning iteration 631/750... Est. remaining: 105m 7sRunning iteration 641/750... Est. remaining: 97m 4sRunning iteration 651/750... Est. remaining: 86m 54sRunning iteration 661/750... Est. remaining: 77m 6sRunning iteration 671/750... Est. remaining: 67m 31sRunning iteration 681/750... Est. remaining: 58m 13sRunning iteration 691/750... Est. remaining: 49m 11sRunning iteration 701/750... Est. remaining: 40m 45sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(0.8647794681839749), 'visits': 1}
Running iteration 711/750... Est. remaining: 32m 9sRunning iteration 721/750... Est. remaining: 23m 54sRunning iteration 731/750... Est. remaining: 15m 45sRunning iteration 741/750... Est. remaining: 7m 47s
Monte Carlo simulation completed in 577.0 minutes
Best normalized score: 0.86
best_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(0.8647794681839749), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [154, 159, 167] (score: 0.8648)

Monte Carlo simulation completed in 577.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 159, 167] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,624,431,827.51
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 6 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 6/15 runs completed (6 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 7 of 15
Time: Sun Aug 24 10:58:51 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,038,499,091
Annual Return: 39.55%
Sharpe Ratio: 1.32980
Sortino Ratio: 1.257
Max Drawdown: -65.7%
Avg Drawdown: -13.0%
Normalized Score: -0.985
Lookback periods: [82, 168, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $923,311,760
Annual Return: 39.08%
Sharpe Ratio: 1.34983
Sortino Ratio: 1.253
Max Drawdown: -55.0%
Avg Drawdown: -12.3%
Normalized Score: -0.541
Lookback periods: [56, 130, 160] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,150,813,946
Annual Return: 39.97%
Sharpe Ratio: 1.41551
Sortino Ratio: 1.327
Max Drawdown: -53.3%
Avg Drawdown: -11.2%
Normalized Score: -0.113
Lookback periods: [51, 59, 59] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 460m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,459,376,302
Annual Return: 45.54%
Sharpe Ratio: 1.50874
Sortino Ratio: 1.462
Max Drawdown: -59.7%
Avg Drawdown: -12.1%
Normalized Score: 0.119
Lookback periods: [129, 152, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 473m 22sRunning iteration 31/750... Est. remaining: 366m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,394,455,619
Annual Return: 42.96%
Sharpe Ratio: 1.46715
Sortino Ratio: 1.387
Max Drawdown: -52.3%
Avg Drawdown: -11.0%
Normalized Score: 0.228
Lookback periods: [94, 97, 142] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 273m 6sRunning iteration 51/750... Est. remaining: 222m 30sRunning iteration 61/750... Est. remaining: 183m 43sRunning iteration 71/750... Est. remaining: 202m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,466,566,562
Annual Return: 43.08%
Sharpe Ratio: 1.47859
Sortino Ratio: 1.408
Max Drawdown: -52.3%
Avg Drawdown: -10.6%
Normalized Score: 0.339
Lookback periods: [88, 99, 138] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,943,410,653
Annual Return: 43.81%
Sharpe Ratio: 1.51629
Sortino Ratio: 1.447
Max Drawdown: -52.3%
Avg Drawdown: -11.3%
Normalized Score: 0.388
Lookback periods: [91, 93, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 81/750... Est. remaining: 189m 33s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,161,262,047
Annual Return: 49.04%
Sharpe Ratio: 1.58883
Sortino Ratio: 1.561
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.653
Lookback periods: [144, 158, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 91/750... Est. remaining: 243m 32sRunning iteration 101/750... Est. remaining: 216m 24sbest_combination: {'lookbacks': [144, 158, 188], 'score': np.float64(0.6529742920710735), 'visits': 1}
Running iteration 111/750... Est. remaining: 201m 3sRunning iteration 121/750... Est. remaining: 185m 51sRunning iteration 131/750... Est. remaining: 169m 14sRunning iteration 141/750... Est. remaining: 194m 36sRunning iteration 151/750... Est. remaining: 178m 58sRunning iteration 161/750... Est. remaining: 165m 20sRunning iteration 171/750... Est. remaining: 153m 15sRunning iteration 181/750... Est. remaining: 187m 49sRunning iteration 191/750... Est. remaining: 192m 0sRunning iteration 201/750... Est. remaining: 179m 22sbest_combination: {'lookbacks': [144, 158, 188], 'score': np.float64(0.6529742920710735), 'visits': 1}
Running iteration 211/750... Est. remaining: 172m 47sRunning iteration 221/750... Est. remaining: 167m 36sRunning iteration 231/750... Est. remaining: 157m 29sRunning iteration 241/750... Est. remaining: 180m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,058,925,261
Annual Return: 39.63%
Sharpe Ratio: 1.40903
Sortino Ratio: 1.320
Max Drawdown: -34.7%
Avg Drawdown: -9.6%
Normalized Score: 0.672
Lookback periods: [53, 64, 86] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 251/750... Est. remaining: 239m 52sRunning iteration 261/750... Est. remaining: 226m 11sRunning iteration 271/750... Est. remaining: 216m 3sRunning iteration 281/750... Est. remaining: 204m 7sRunning iteration 291/750... Est. remaining: 193m 7sRunning iteration 301/750... Est. remaining: 182m 44sbest_combination: {'lookbacks': [53, 64, 86], 'score': np.float64(0.6717207508826881), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,347,980,004
Annual Return: 40.61%
Sharpe Ratio: 1.46824
Sortino Ratio: 1.367
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 0.908
Lookback periods: [50, 59, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/750... Est. remaining: 175m 32s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,839,890,331
Annual Return: 41.87%
Sharpe Ratio: 1.52043
Sortino Ratio: 1.416
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.107
Lookback periods: [50, 56, 90] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,291,396,789
Annual Return: 42.78%
Sharpe Ratio: 1.54777
Sortino Ratio: 1.446
Max Drawdown: -34.7%
Avg Drawdown: -9.1%
Normalized Score: 1.240
Lookback periods: [50, 54, 94] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,247,532,043
Annual Return: 44.22%
Sharpe Ratio: 1.60550
Sortino Ratio: 1.504
Max Drawdown: -34.7%
Avg Drawdown: -8.1%
Normalized Score: 1.596
Lookback periods: [50, 52, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/750... Est. remaining: 167m 15sRunning iteration 331/750... Est. remaining: 163m 8sRunning iteration 341/750... Est. remaining: 155m 43sRunning iteration 351/750... Est. remaining: 147m 40sRunning iteration 361/750... Est. remaining: 142m 54sRunning iteration 371/750... Est. remaining: 135m 33sRunning iteration 381/750... Est. remaining: 132m 54sRunning iteration 391/750... Est. remaining: 126m 4sRunning iteration 401/750... Est. remaining: 119m 34sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.5957387916991774), 'visits': 1}
Running iteration 411/750... Est. remaining: 113m 23sRunning iteration 421/750... Est. remaining: 107m 30sRunning iteration 431/750... Est. remaining: 101m 52sRunning iteration 441/750... Est. remaining: 96m 30sRunning iteration 451/750... Est. remaining: 91m 22sRunning iteration 461/750... Est. remaining: 86m 27sRunning iteration 471/750... Est. remaining: 81m 45sRunning iteration 481/750... Est. remaining: 77m 14sRunning iteration 491/750... Est. remaining: 72m 54sRunning iteration 501/750... Est. remaining: 68m 44sbest_combination: {'lookbacks': [50, 52, 98], 'score': np.float64(1.5957387916991774), 'visits': 1}
Running iteration 511/750... Est. remaining: 64m 43sRunning iteration 521/750... Est. remaining: 60m 52sRunning iteration 531/750... Est. remaining: 57m 9sRunning iteration 541/750... Est. remaining: 53m 35sRunning iteration 551/750... Est. remaining: 50m 8sRunning iteration 561/750... Est. remaining: 46m 48sRunning iteration 571/750... Est. remaining: 43m 35sRunning iteration 581/750... Est. remaining: 40m 28sRunning iteration 591/750... Est. remaining: 37m 28s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,683,002,581
Annual Return: 44.74%
Sharpe Ratio: 1.62683
Sortino Ratio: 1.529
Max Drawdown: -34.7%
Avg Drawdown: -8.0%
Normalized Score: 1.694
Lookback periods: [50, 51, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 601/750... Est. remaining: 34m 34sbest_combination: {'lookbacks': [50, 51, 95], 'score': np.float64(1.6936278518615826), 'visits': 1}
Running iteration 611/750... Est. remaining: 31m 45sRunning iteration 621/750... Est. remaining: 29m 1sRunning iteration 631/750... Est. remaining: 26m 23sRunning iteration 641/750... Est. remaining: 23m 49s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $5,389,580,938
Annual Return: 46.34%
Sharpe Ratio: 1.67955
Sortino Ratio: 1.584
Max Drawdown: -34.7%
Avg Drawdown: -7.9%
Normalized Score: 1.930
Lookback periods: [50, 52, 95] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 651/750... Est. remaining: 21m 20sRunning iteration 661/750... Est. remaining: 18m 55sRunning iteration 671/750... Est. remaining: 16m 34sRunning iteration 681/750... Est. remaining: 14m 18sRunning iteration 691/750... Est. remaining: 12m 5sRunning iteration 701/750... Est. remaining: 9m 56sbest_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.929642831553576), 'visits': 1}
Running iteration 711/750... Est. remaining: 7m 50sRunning iteration 721/750... Est. remaining: 5m 48sRunning iteration 731/750... Est. remaining: 3m 49sRunning iteration 741/750... Est. remaining: 1m 53s
Monte Carlo simulation completed in 139.5 minutes
Best normalized score: 1.93
best_combination: {'lookbacks': [50, 52, 95], 'score': np.float64(1.929642831553576), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 52, 95] (score: 1.9296)

Monte Carlo simulation completed in 139.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 52, 95] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 108 selections (26.0%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 76 selections (18.3%)
4. naz100_pi: 74 selections (17.8%)
5. cash: 58 selections (13.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $5,389,580,937.96
Average Annualized Gain: 46.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 7 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 7/15 runs completed (7 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 8 of 15
Time: Sun Aug 24 13:18:29 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $713,831,706
Annual Return: 38.05%
Sharpe Ratio: 1.31596
Sortino Ratio: 1.219
Max Drawdown: -55.0%
Avg Drawdown: -12.1%
Normalized Score: -0.564
Lookback periods: [50, 97, 141] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,821,959,345
Annual Return: 43.64%
Sharpe Ratio: 1.47198
Sortino Ratio: 1.409
Max Drawdown: -55.0%
Avg Drawdown: -11.9%
Normalized Score: 0.276
Lookback periods: [88, 130, 155] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,276,932,560
Annual Return: 46.99%
Sharpe Ratio: 1.52253
Sortino Ratio: 1.491
Max Drawdown: -61.4%
Avg Drawdown: -11.8%
Normalized Score: 0.407
Lookback periods: [149, 192, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 13m 28sRunning iteration 21/750... Est. remaining: 9m 36sRunning iteration 31/750... Est. remaining: 8m 15s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,843,709,840
Annual Return: 41.88%
Sharpe Ratio: 1.42737
Sortino Ratio: 1.361
Max Drawdown: -52.3%
Avg Drawdown: -10.5%
Normalized Score: 0.442
Lookback periods: [84, 111, 139] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 7m 53s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,705,759,607
Annual Return: 45.77%
Sharpe Ratio: 1.51280
Sortino Ratio: 1.465
Max Drawdown: -56.8%
Avg Drawdown: -11.7%
Normalized Score: 0.494
Lookback periods: [135, 158, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/750... Est. remaining: 7m 39sRunning iteration 61/750... Est. remaining: 7m 15sRunning iteration 71/750... Est. remaining: 6m 55sRunning iteration 81/750... Est. remaining: 6m 39sRunning iteration 91/750... Est. remaining: 6m 25sRunning iteration 101/750... Est. remaining: 6m 14sbest_combination: {'lookbacks': [135, 158, 169], 'score': np.float64(0.49373175158588045), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 2sRunning iteration 121/750... Est. remaining: 5m 51sRunning iteration 131/750... Est. remaining: 5m 42sRunning iteration 141/750... Est. remaining: 5m 33sRunning iteration 151/750... Est. remaining: 5m 25sRunning iteration 161/750... Est. remaining: 5m 18sRunning iteration 171/750... Est. remaining: 5m 11sRunning iteration 181/750... Est. remaining: 5m 4s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,786,663,589
Annual Return: 47.90%
Sharpe Ratio: 1.58091
Sortino Ratio: 1.537
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.774
Lookback periods: [136, 159, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 191/750... Est. remaining: 5m 0sRunning iteration 201/750... Est. remaining: 4m 54sbest_combination: {'lookbacks': [136, 159, 168], 'score': np.float64(0.7739184940330242), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 48sRunning iteration 221/750... Est. remaining: 4m 41sRunning iteration 231/750... Est. remaining: 4m 35sRunning iteration 241/750... Est. remaining: 4m 29sRunning iteration 251/750... Est. remaining: 4m 23sRunning iteration 261/750... Est. remaining: 4m 17sRunning iteration 271/750... Est. remaining: 4m 11sRunning iteration 281/750... Est. remaining: 4m 5sRunning iteration 291/750... Est. remaining: 3m 59sRunning iteration 301/750... Est. remaining: 3m 54sbest_combination: {'lookbacks': [136, 159, 168], 'score': np.float64(0.7739184940330242), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 48s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,016,193,973
Annual Return: 47.46%
Sharpe Ratio: 1.58163
Sortino Ratio: 1.534
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.806
Lookback periods: [136, 152, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/750... Est. remaining: 3m 44sRunning iteration 331/750... Est. remaining: 3m 38sRunning iteration 341/750... Est. remaining: 3m 33sRunning iteration 351/750... Est. remaining: 3m 27sRunning iteration 361/750... Est. remaining: 3m 22s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,644,327,165
Annual Return: 47.23%
Sharpe Ratio: 1.55697
Sortino Ratio: 1.520
Max Drawdown: -56.9%
Avg Drawdown: -10.8%
Normalized Score: 0.897
Lookback periods: [146, 156, 161] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,740,717,361
Annual Return: 48.40%
Sharpe Ratio: 1.57241
Sortino Ratio: 1.539
Max Drawdown: -60.2%
Avg Drawdown: -10.3%
Normalized Score: 0.965
Lookback periods: [157, 158, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 371/750... Est. remaining: 3m 19s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,012,975,724
Annual Return: 48.53%
Sharpe Ratio: 1.58465
Sortino Ratio: 1.552
Max Drawdown: -58.2%
Avg Drawdown: -10.7%
Normalized Score: 1.021
Lookback periods: [157, 158, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,624,431,828
Annual Return: 49.24%
Sharpe Ratio: 1.60609
Sortino Ratio: 1.568
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 1.200
Lookback periods: [154, 159, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 381/750... Est. remaining: 3m 15sRunning iteration 391/750... Est. remaining: 3m 10sRunning iteration 401/750... Est. remaining: 3m 4sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(1.1996611411260918), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 59sRunning iteration 421/750... Est. remaining: 2m 53sRunning iteration 431/750... Est. remaining: 2m 47sRunning iteration 441/750... Est. remaining: 2m 42sRunning iteration 451/750... Est. remaining: 2m 36sRunning iteration 461/750... Est. remaining: 2m 31sRunning iteration 471/750... Est. remaining: 2m 25sRunning iteration 481/750... Est. remaining: 2m 20sRunning iteration 491/750... Est. remaining: 2m 15sRunning iteration 501/750... Est. remaining: 2m 9sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(1.1996611411260918), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 4sRunning iteration 521/750... Est. remaining: 1m 59sRunning iteration 531/750... Est. remaining: 1m 53sRunning iteration 541/750... Est. remaining: 1m 48sRunning iteration 551/750... Est. remaining: 1m 43sRunning iteration 561/750... Est. remaining: 1m 38sRunning iteration 571/750... Est. remaining: 1m 32sRunning iteration 581/750... Est. remaining: 1m 27sRunning iteration 591/750... Est. remaining: 1m 22sRunning iteration 601/750... Est. remaining: 1m 17sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(1.1996611411260918), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 11sRunning iteration 621/750... Est. remaining: 1m 6sRunning iteration 631/750... Est. remaining: 1m 1sRunning iteration 641/750... Est. remaining: 0m 56sRunning iteration 651/750... Est. remaining: 0m 51sRunning iteration 661/750... Est. remaining: 0m 46sRunning iteration 671/750... Est. remaining: 0m 40sRunning iteration 681/750... Est. remaining: 0m 35sRunning iteration 691/750... Est. remaining: 0m 30sRunning iteration 701/750... Est. remaining: 0m 25sbest_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(1.1996611411260918), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 20sRunning iteration 721/750... Est. remaining: 0m 15sRunning iteration 731/750... Est. remaining: 0m 10sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 6.4 minutes
Best normalized score: 1.20
best_combination: {'lookbacks': [154, 159, 167], 'score': np.float64(1.1996611411260918), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [154, 159, 167] (score: 1.1997)

Monte Carlo simulation completed in 6.4 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 159, 167] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 77 selections (18.5%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,624,431,827.51
Average Annualized Gain: 49.2%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 8 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 8/15 runs completed (8 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 9 of 15
Time: Sun Aug 24 13:24:59 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,284,259,732
Annual Return: 45.38%
Sharpe Ratio: 1.46440
Sortino Ratio: 1.440
Max Drawdown: -61.0%
Avg Drawdown: -12.3%
Normalized Score: 0.062
Lookback periods: [154, 181, 195] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 10m 56s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,390,487,605
Annual Return: 42.95%
Sharpe Ratio: 1.45344
Sortino Ratio: 1.386
Max Drawdown: -55.0%
Avg Drawdown: -12.0%
Normalized Score: 0.072
Lookback periods: [88, 133, 143] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 9m 1sRunning iteration 31/750... Est. remaining: 7m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,390,592,520
Annual Return: 40.73%
Sharpe Ratio: 1.42015
Sortino Ratio: 1.322
Max Drawdown: -41.9%
Avg Drawdown: -9.9%
Normalized Score: 0.432
Lookback periods: [50, 52, 149] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 7m 37sRunning iteration 51/750... Est. remaining: 7m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,057,370,317
Annual Return: 42.33%
Sharpe Ratio: 1.52165
Sortino Ratio: 1.416
Max Drawdown: -34.7%
Avg Drawdown: -9.3%
Normalized Score: 1.036
Lookback periods: [50, 51, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/750... Est. remaining: 7m 3sRunning iteration 71/750... Est. remaining: 6m 46sRunning iteration 81/750... Est. remaining: 6m 31sRunning iteration 91/750... Est. remaining: 6m 17sRunning iteration 101/750... Est. remaining: 6m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,600,088,602
Annual Return: 43.30%
Sharpe Ratio: 1.54769
Sortino Ratio: 1.452
Max Drawdown: -34.7%
Avg Drawdown: -9.2%
Normalized Score: 1.173
Lookback periods: [50, 54, 85] days
==================================================
Best parameters logged to: abacus_best_performers.csv
best_combination: {'lookbacks': [50, 54, 85], 'score': np.float64(1.1728087314644209), 'visits': 1}
Running iteration 111/750... Est. remaining: 6m 2sRunning iteration 121/750... Est. remaining: 5m 52sRunning iteration 131/750... Est. remaining: 5m 43sRunning iteration 141/750... Est. remaining: 5m 34sRunning iteration 151/750... Est. remaining: 5m 26s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,864,014,625
Annual Return: 44.94%
Sharpe Ratio: 1.60063
Sortino Ratio: 1.506
Max Drawdown: -34.7%
Avg Drawdown: -9.0%
Normalized Score: 1.401
Lookback periods: [50, 54, 83] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/750... Est. remaining: 5m 23sRunning iteration 171/750... Est. remaining: 5m 15sRunning iteration 181/750... Est. remaining: 5m 7sRunning iteration 191/750... Est. remaining: 5m 0sRunning iteration 201/750... Est. remaining: 4m 54sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.401062887589816), 'visits': 1}
Running iteration 211/750... Est. remaining: 4m 47sRunning iteration 221/750... Est. remaining: 4m 41sRunning iteration 231/750... Est. remaining: 4m 35sRunning iteration 241/750... Est. remaining: 4m 29sRunning iteration 251/750... Est. remaining: 4m 23sRunning iteration 261/750... Est. remaining: 4m 18sRunning iteration 271/750... Est. remaining: 4m 12sRunning iteration 281/750... Est. remaining: 4m 6sRunning iteration 291/750... Est. remaining: 4m 1sRunning iteration 301/750... Est. remaining: 3m 55sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.401062887589816), 'visits': 1}
Running iteration 311/750... Est. remaining: 3m 50sRunning iteration 321/750... Est. remaining: 3m 45sRunning iteration 331/750... Est. remaining: 3m 39sRunning iteration 341/750... Est. remaining: 3m 34sRunning iteration 351/750... Est. remaining: 3m 29sRunning iteration 361/750... Est. remaining: 3m 23sRunning iteration 371/750... Est. remaining: 3m 18sRunning iteration 381/750... Est. remaining: 3m 13sRunning iteration 391/750... Est. remaining: 3m 7sRunning iteration 401/750... Est. remaining: 3m 2sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.401062887589816), 'visits': 1}
Running iteration 411/750... Est. remaining: 2m 57sRunning iteration 421/750... Est. remaining: 2m 52sRunning iteration 431/750... Est. remaining: 2m 47sRunning iteration 441/750... Est. remaining: 2m 42sRunning iteration 451/750... Est. remaining: 2m 37sRunning iteration 461/750... Est. remaining: 2m 33sRunning iteration 471/750... Est. remaining: 2m 28sRunning iteration 481/750... Est. remaining: 2m 24sRunning iteration 491/750... Est. remaining: 2m 19sRunning iteration 501/750... Est. remaining: 2m 14sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.401062887589816), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 9sRunning iteration 521/750... Est. remaining: 2m 4sRunning iteration 531/750... Est. remaining: 1m 59sRunning iteration 541/750... Est. remaining: 1m 54sRunning iteration 551/750... Est. remaining: 1m 49sRunning iteration 561/750... Est. remaining: 1m 44sRunning iteration 571/750... Est. remaining: 1m 39sRunning iteration 581/750... Est. remaining: 1m 34sRunning iteration 591/750... Est. remaining: 1m 28sRunning iteration 601/750... Est. remaining: 1m 23sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.401062887589816), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 18sRunning iteration 621/750... Est. remaining: 1m 12sRunning iteration 631/750... Est. remaining: 1m 7sRunning iteration 641/750... Est. remaining: 1m 1sRunning iteration 651/750... Est. remaining: 0m 56sRunning iteration 661/750... Est. remaining: 0m 50sRunning iteration 671/750... Est. remaining: 0m 45sRunning iteration 681/750... Est. remaining: 0m 39sRunning iteration 691/750... Est. remaining: 0m 34sRunning iteration 701/750... Est. remaining: 0m 28sbest_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.401062887589816), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 22sRunning iteration 721/750... Est. remaining: 0m 17sRunning iteration 731/750... Est. remaining: 0m 11sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 7.2 minutes
Best normalized score: 1.40
best_combination: {'lookbacks': [50, 54, 83], 'score': np.float64(1.401062887589816), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 54, 83] (score: 1.4011)

Monte Carlo simulation completed in 7.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 54, 83] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 106 selections (25.5%)
2. naz100_hma: 100 selections (24.0%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 76 selections (18.3%)
5. cash: 56 selections (13.5%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $3,864,014,625.05
Average Annualized Gain: 44.9%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 9 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 9/15 runs completed (9 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 10 of 15
Time: Sun Aug 24 13:32:19 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,024,176,461
Annual Return: 42.27%
Sharpe Ratio: 1.44035
Sortino Ratio: 1.362
Max Drawdown: -52.3%
Avg Drawdown: -11.7%
Normalized Score: 0.154
Lookback periods: [94, 96, 153] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,301,076,310
Annual Return: 42.79%
Sharpe Ratio: 1.47594
Sortino Ratio: 1.406
Max Drawdown: -52.3%
Avg Drawdown: -11.6%
Normalized Score: 0.305
Lookback periods: [91, 94, 146] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 17m 17sRunning iteration 21/750... Est. remaining: 12m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,134,466,760
Annual Return: 46.89%
Sharpe Ratio: 1.52849
Sortino Ratio: 1.498
Max Drawdown: -59.7%
Avg Drawdown: -11.0%
Normalized Score: 0.537
Lookback periods: [162, 163, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 11m 29sRunning iteration 41/750... Est. remaining: 10m 27sRunning iteration 51/750... Est. remaining: 9m 44sRunning iteration 61/750... Est. remaining: 9m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $816,874,339
Annual Return: 38.59%
Sharpe Ratio: 1.35420
Sortino Ratio: 1.269
Max Drawdown: -34.7%
Avg Drawdown: -9.8%
Normalized Score: 0.573
Lookback periods: [50, 74, 82] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 71/750... Est. remaining: 9m 8sRunning iteration 81/750... Est. remaining: 8m 48sRunning iteration 91/750... Est. remaining: 8m 30sRunning iteration 101/750... Est. remaining: 8m 14sbest_combination: {'lookbacks': [50, 74, 82], 'score': np.float64(0.573367174671331), 'visits': 1}
Running iteration 111/750... Est. remaining: 7m 59sRunning iteration 121/750... Est. remaining: 7m 46sRunning iteration 131/750... Est. remaining: 7m 34sRunning iteration 141/750... Est. remaining: 7m 23sRunning iteration 151/750... Est. remaining: 7m 13sRunning iteration 161/750... Est. remaining: 7m 2sRunning iteration 171/750... Est. remaining: 6m 52sRunning iteration 181/750... Est. remaining: 6m 43sRunning iteration 191/750... Est. remaining: 6m 34sRunning iteration 201/750... Est. remaining: 6m 26sbest_combination: {'lookbacks': [50, 74, 82], 'score': np.float64(0.573367174671331), 'visits': 1}
Running iteration 211/750... Est. remaining: 6m 17s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,739,176,555
Annual Return: 48.86%
Sharpe Ratio: 1.58678
Sortino Ratio: 1.552
Max Drawdown: -57.9%
Avg Drawdown: -11.8%
Normalized Score: 0.810
Lookback periods: [148, 159, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 221/750... Est. remaining: 6m 13sRunning iteration 231/750... Est. remaining: 6m 5sRunning iteration 241/750... Est. remaining: 5m 57sRunning iteration 251/750... Est. remaining: 5m 49sRunning iteration 261/750... Est. remaining: 5m 41sRunning iteration 271/750... Est. remaining: 5m 33sRunning iteration 281/750... Est. remaining: 5m 26sRunning iteration 291/750... Est. remaining: 5m 18sRunning iteration 301/750... Est. remaining: 5m 10sbest_combination: {'lookbacks': [148, 159, 200], 'score': np.float64(0.8101346346478258), 'visits': 1}
Running iteration 311/750... Est. remaining: 5m 3sRunning iteration 321/750... Est. remaining: 4m 55sRunning iteration 331/750... Est. remaining: 4m 48sRunning iteration 341/750... Est. remaining: 4m 40sRunning iteration 351/750... Est. remaining: 4m 33sRunning iteration 361/750... Est. remaining: 4m 26sRunning iteration 371/750... Est. remaining: 4m 19sRunning iteration 381/750... Est. remaining: 4m 12sRunning iteration 391/750... Est. remaining: 4m 5sRunning iteration 401/750... Est. remaining: 3m 58sbest_combination: {'lookbacks': [148, 159, 200], 'score': np.float64(0.8101346346478258), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,798,714,230
Annual Return: 41.78%
Sharpe Ratio: 1.47031
Sortino Ratio: 1.386
Max Drawdown: -34.7%
Avg Drawdown: -8.8%
Normalized Score: 1.198
Lookback periods: [50, 96, 98] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 421/750... Est. remaining: 3m 45sRunning iteration 431/750... Est. remaining: 3m 38sRunning iteration 441/750... Est. remaining: 3m 31sRunning iteration 451/750... Est. remaining: 3m 24sRunning iteration 461/750... Est. remaining: 3m 17sRunning iteration 471/750... Est. remaining: 3m 10sRunning iteration 481/750... Est. remaining: 3m 3sRunning iteration 491/750... Est. remaining: 2m 56sRunning iteration 501/750... Est. remaining: 2m 49sbest_combination: {'lookbacks': [50, 96, 98], 'score': np.float64(1.1975164025598406), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 42sRunning iteration 521/750... Est. remaining: 2m 35sRunning iteration 531/750... Est. remaining: 2m 29sRunning iteration 541/750... Est. remaining: 2m 22sRunning iteration 551/750... Est. remaining: 2m 15sRunning iteration 561/750... Est. remaining: 2m 8sRunning iteration 571/750... Est. remaining: 2m 1sRunning iteration 581/750... Est. remaining: 1m 55sRunning iteration 591/750... Est. remaining: 1m 48sRunning iteration 601/750... Est. remaining: 1m 41sbest_combination: {'lookbacks': [50, 96, 98], 'score': np.float64(1.1975164025598406), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 34sRunning iteration 621/750... Est. remaining: 1m 28sRunning iteration 631/750... Est. remaining: 1m 21sRunning iteration 641/750... Est. remaining: 1m 14sRunning iteration 651/750... Est. remaining: 1m 7sRunning iteration 661/750... Est. remaining: 1m 0sRunning iteration 671/750... Est. remaining: 0m 53sRunning iteration 681/750... Est. remaining: 0m 46sRunning iteration 691/750... Est. remaining: 0m 40sRunning iteration 701/750... Est. remaining: 0m 33sbest_combination: {'lookbacks': [50, 96, 98], 'score': np.float64(1.1975164025598406), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 26sRunning iteration 721/750... Est. remaining: 0m 19sRunning iteration 731/750... Est. remaining: 0m 13sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 8.3 minutes
Best normalized score: 1.20
best_combination: {'lookbacks': [50, 96, 98], 'score': np.float64(1.1975164025598406), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [50, 96, 98] (score: 1.1975)

Monte Carlo simulation completed in 8.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [50, 96, 98] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 120 selections (28.8%)
2. naz100_hma: 99 selections (23.8%)
3. naz100_pi: 81 selections (19.5%)
4. naz100_pine: 65 selections (15.6%)
5. cash: 51 selections (12.3%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $1,798,714,230.31
Average Annualized Gain: 41.8%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 10 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 10/15 runs completed (10 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 11 of 15
Time: Sun Aug 24 13:40:45 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $144,061,301
Annual Return: 31.82%
Sharpe Ratio: 1.08836
Sortino Ratio: 1.009
Max Drawdown: -65.8%
Avg Drawdown: -16.9%
Normalized Score: -3.062
Lookback periods: [72, 117, 122] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $309,318,497
Annual Return: 34.76%
Sharpe Ratio: 1.22790
Sortino Ratio: 1.138
Max Drawdown: -62.2%
Avg Drawdown: -13.6%
Normalized Score: -1.756
Lookback periods: [62, 64, 124] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,028,072,857
Annual Return: 48.54%
Sharpe Ratio: 1.55327
Sortino Ratio: 1.522
Max Drawdown: -66.0%
Avg Drawdown: -11.2%
Normalized Score: 0.944
Lookback periods: [184, 193, 197] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 19m 20sRunning iteration 21/750... Est. remaining: 13m 17sRunning iteration 31/750... Est. remaining: 11m 13sRunning iteration 41/750... Est. remaining: 10m 10sRunning iteration 51/750... Est. remaining: 9m 28sRunning iteration 61/750... Est. remaining: 8m 58sRunning iteration 71/750... Est. remaining: 8m 35sRunning iteration 81/750... Est. remaining: 8m 15sRunning iteration 91/750... Est. remaining: 7m 59sRunning iteration 101/750... Est. remaining: 7m 45sbest_combination: {'lookbacks': [184, 193, 197], 'score': np.float64(0.9437743475720393), 'visits': 1}
Running iteration 111/750... Est. remaining: 7m 32sRunning iteration 121/750... Est. remaining: 7m 21sRunning iteration 131/750... Est. remaining: 7m 10sRunning iteration 141/750... Est. remaining: 7m 0sRunning iteration 151/750... Est. remaining: 6m 50sRunning iteration 161/750... Est. remaining: 6m 41sRunning iteration 171/750... Est. remaining: 6m 33sRunning iteration 181/750... Est. remaining: 6m 24sRunning iteration 191/750... Est. remaining: 6m 16sRunning iteration 201/750... Est. remaining: 6m 7sbest_combination: {'lookbacks': [184, 193, 197], 'score': np.float64(0.9437743475720393), 'visits': 1}
Running iteration 211/750... Est. remaining: 6m 0sRunning iteration 221/750... Est. remaining: 5m 52sRunning iteration 231/750... Est. remaining: 5m 45sRunning iteration 241/750... Est. remaining: 5m 37sRunning iteration 251/750... Est. remaining: 5m 31sRunning iteration 261/750... Est. remaining: 5m 24sRunning iteration 271/750... Est. remaining: 5m 18sRunning iteration 281/750... Est. remaining: 5m 11sRunning iteration 291/750... Est. remaining: 5m 4sRunning iteration 301/750... Est. remaining: 4m 57sbest_combination: {'lookbacks': [184, 193, 197], 'score': np.float64(0.9437743475720393), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,636,584,867
Annual Return: 48.35%
Sharpe Ratio: 1.56317
Sortino Ratio: 1.523
Max Drawdown: -59.0%
Avg Drawdown: -11.7%
Normalized Score: 1.071
Lookback periods: [181, 190, 200] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 311/750... Est. remaining: 4m 54sRunning iteration 321/750... Est. remaining: 4m 47sRunning iteration 331/750... Est. remaining: 4m 40sRunning iteration 341/750... Est. remaining: 4m 34s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,612,061,841
Annual Return: 49.23%
Sharpe Ratio: 1.57887
Sortino Ratio: 1.540
Max Drawdown: -59.6%
Avg Drawdown: -11.4%
Normalized Score: 1.242
Lookback periods: [184, 188, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 351/750... Est. remaining: 4m 29sRunning iteration 361/750... Est. remaining: 4m 23sRunning iteration 371/750... Est. remaining: 4m 15sRunning iteration 381/750... Est. remaining: 4m 9sRunning iteration 391/750... Est. remaining: 4m 3sRunning iteration 401/750... Est. remaining: 3m 56sbest_combination: {'lookbacks': [184, 188, 194], 'score': np.float64(1.2421896854821823), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 49sRunning iteration 421/750... Est. remaining: 3m 41sRunning iteration 431/750... Est. remaining: 3m 34sRunning iteration 441/750... Est. remaining: 3m 27sRunning iteration 451/750... Est. remaining: 3m 20sRunning iteration 461/750... Est. remaining: 3m 13sRunning iteration 471/750... Est. remaining: 3m 6sRunning iteration 481/750... Est. remaining: 2m 59sRunning iteration 491/750... Est. remaining: 2m 52sRunning iteration 501/750... Est. remaining: 2m 45sbest_combination: {'lookbacks': [184, 188, 194], 'score': np.float64(1.2421896854821823), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 39sRunning iteration 521/750... Est. remaining: 2m 32sRunning iteration 531/750... Est. remaining: 2m 25sRunning iteration 541/750... Est. remaining: 2m 18sRunning iteration 551/750... Est. remaining: 2m 12sRunning iteration 561/750... Est. remaining: 2m 5sRunning iteration 571/750... Est. remaining: 1m 58sRunning iteration 581/750... Est. remaining: 1m 51sRunning iteration 591/750... Est. remaining: 1m 45sRunning iteration 601/750... Est. remaining: 1m 38sbest_combination: {'lookbacks': [184, 188, 194], 'score': np.float64(1.2421896854821823), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 31sRunning iteration 621/750... Est. remaining: 1m 25sRunning iteration 631/750... Est. remaining: 1m 18sRunning iteration 641/750... Est. remaining: 1m 11sRunning iteration 651/750... Est. remaining: 1m 5s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,504,018,579
Annual Return: 47.75%
Sharpe Ratio: 1.55400
Sortino Ratio: 1.517
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 1.274
Lookback periods: [156, 161, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 661/750... Est. remaining: 0m 59sRunning iteration 671/750... Est. remaining: 0m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,475,254,678
Annual Return: 49.57%
Sharpe Ratio: 1.61090
Sortino Ratio: 1.581
Max Drawdown: -59.0%
Avg Drawdown: -9.9%
Normalized Score: 1.626
Lookback periods: [156, 158, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/750... Est. remaining: 0m 46sRunning iteration 691/750... Est. remaining: 0m 39sRunning iteration 701/750... Est. remaining: 0m 32sbest_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(1.6261405404251559), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 26sRunning iteration 721/750... Est. remaining: 0m 19sRunning iteration 731/750... Est. remaining: 0m 13sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 8.2 minutes
Best normalized score: 1.63
best_combination: {'lookbacks': [156, 158, 168], 'score': np.float64(1.6261405404251559), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [156, 158, 168] (score: 1.6261)

Monte Carlo simulation completed in 8.2 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 158, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 115 selections (27.6%)
2. sp500_hma: 109 selections (26.2%)
3. naz100_pi: 79 selections (19.0%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $11,475,254,678.31
Average Annualized Gain: 49.6%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 11 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 11/15 runs completed (11 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 12 of 15
Time: Sun Aug 24 13:49:05 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $376,627,773
Annual Return: 35.53%
Sharpe Ratio: 1.24415
Sortino Ratio: 1.160
Max Drawdown: -52.3%
Avg Drawdown: -12.8%
Normalized Score: -1.125
Lookback periods: [59, 78, 106] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $590,043,008
Annual Return: 37.29%
Sharpe Ratio: 1.30220
Sortino Ratio: 1.201
Max Drawdown: -61.2%
Avg Drawdown: -12.5%
Normalized Score: -1.087
Lookback periods: [56, 121, 139] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $533,516,791
Annual Return: 36.90%
Sharpe Ratio: 1.26429
Sortino Ratio: 1.179
Max Drawdown: -52.3%
Avg Drawdown: -11.8%
Normalized Score: -0.835
Lookback periods: [71, 77, 109] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,423,700,518
Annual Return: 40.83%
Sharpe Ratio: 1.35436
Sortino Ratio: 1.309
Max Drawdown: -64.8%
Avg Drawdown: -13.7%
Normalized Score: -0.775
Lookback periods: [113, 130, 176] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,751,773,521
Annual Return: 43.53%
Sharpe Ratio: 1.43840
Sortino Ratio: 1.399
Max Drawdown: -55.0%
Avg Drawdown: -13.0%
Normalized Score: 0.119
Lookback periods: [128, 134, 147] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 22m 25s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,340,014,135
Annual Return: 44.34%
Sharpe Ratio: 1.45468
Sortino Ratio: 1.408
Max Drawdown: -59.0%
Avg Drawdown: -11.6%
Normalized Score: 0.249
Lookback periods: [147, 193, 194] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 15m 52s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,829,494,727
Annual Return: 44.91%
Sharpe Ratio: 1.46300
Sortino Ratio: 1.432
Max Drawdown: -59.0%
Avg Drawdown: -11.3%
Normalized Score: 0.376
Lookback periods: [159, 165, 184] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 31/750... Est. remaining: 13m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,934,760,433
Annual Return: 47.41%
Sharpe Ratio: 1.55729
Sortino Ratio: 1.513
Max Drawdown: -57.2%
Avg Drawdown: -11.3%
Normalized Score: 0.910
Lookback periods: [136, 156, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 41/750... Est. remaining: 12m 25sRunning iteration 51/750... Est. remaining: 11m 17sRunning iteration 61/750... Est. remaining: 10m 28sRunning iteration 71/750... Est. remaining: 9m 52sRunning iteration 81/750... Est. remaining: 9m 25sRunning iteration 91/750... Est. remaining: 9m 4sRunning iteration 101/750... Est. remaining: 8m 42sbest_combination: {'lookbacks': [136, 156, 156], 'score': np.float64(0.9104927311058086), 'visits': 1}
Running iteration 111/750... Est. remaining: 8m 24s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,177,080,442
Annual Return: 48.11%
Sharpe Ratio: 1.56162
Sortino Ratio: 1.536
Max Drawdown: -61.3%
Avg Drawdown: -10.9%
Normalized Score: 0.921
Lookback periods: [155, 162, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 121/750... Est. remaining: 8m 20s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,365,193,239
Annual Return: 48.21%
Sharpe Ratio: 1.57538
Sortino Ratio: 1.548
Max Drawdown: -61.3%
Avg Drawdown: -11.1%
Normalized Score: 0.947
Lookback periods: [152, 159, 163] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 131/750... Est. remaining: 8m 15sRunning iteration 141/750... Est. remaining: 8m 3sRunning iteration 151/750... Est. remaining: 7m 52sRunning iteration 161/750... Est. remaining: 7m 42sRunning iteration 171/750... Est. remaining: 7m 28sRunning iteration 181/750... Est. remaining: 7m 15sRunning iteration 191/750... Est. remaining: 7m 2sRunning iteration 201/750... Est. remaining: 6m 51sbest_combination: {'lookbacks': [152, 159, 163], 'score': np.float64(0.9469266257329705), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,329,055,358
Annual Return: 48.19%
Sharpe Ratio: 1.57052
Sortino Ratio: 1.533
Max Drawdown: -58.5%
Avg Drawdown: -11.1%
Normalized Score: 1.010
Lookback periods: [153, 159, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 211/750... Est. remaining: 6m 44sRunning iteration 221/750... Est. remaining: 6m 33sRunning iteration 231/750... Est. remaining: 6m 23sRunning iteration 241/750... Est. remaining: 6m 12sRunning iteration 251/750... Est. remaining: 6m 2sRunning iteration 261/750... Est. remaining: 5m 53sRunning iteration 271/750... Est. remaining: 5m 44sRunning iteration 281/750... Est. remaining: 5m 35s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,019,258,284
Annual Return: 49.39%
Sharpe Ratio: 1.59925
Sortino Ratio: 1.565
Max Drawdown: -58.5%
Avg Drawdown: -11.3%
Normalized Score: 1.189
Lookback periods: [150, 154, 157] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 291/750... Est. remaining: 5m 29sRunning iteration 301/750... Est. remaining: 5m 21sbest_combination: {'lookbacks': [150, 154, 157], 'score': np.float64(1.1887244142819025), 'visits': 1}
Running iteration 311/750... Est. remaining: 5m 12s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,473,280,076
Annual Return: 48.74%
Sharpe Ratio: 1.59293
Sortino Ratio: 1.554
Max Drawdown: -55.0%
Avg Drawdown: -10.4%
Normalized Score: 1.310
Lookback periods: [156, 159, 168] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 321/750... Est. remaining: 5m 6sRunning iteration 331/750... Est. remaining: 4m 58sRunning iteration 341/750... Est. remaining: 4m 51sRunning iteration 351/750... Est. remaining: 4m 43sRunning iteration 361/750... Est. remaining: 4m 35sRunning iteration 371/750... Est. remaining: 4m 27sRunning iteration 381/750... Est. remaining: 4m 19sRunning iteration 391/750... Est. remaining: 4m 11sRunning iteration 401/750... Est. remaining: 4m 4sbest_combination: {'lookbacks': [156, 159, 168], 'score': np.float64(1.3098661816336377), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 56sRunning iteration 421/750... Est. remaining: 3m 49sRunning iteration 431/750... Est. remaining: 3m 41sRunning iteration 441/750... Est. remaining: 3m 34sRunning iteration 451/750... Est. remaining: 3m 27sRunning iteration 461/750... Est. remaining: 3m 20sRunning iteration 471/750... Est. remaining: 3m 13sRunning iteration 481/750... Est. remaining: 3m 6sRunning iteration 491/750... Est. remaining: 2m 59sRunning iteration 501/750... Est. remaining: 2m 52sbest_combination: {'lookbacks': [156, 159, 168], 'score': np.float64(1.3098661816336377), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 45sRunning iteration 521/750... Est. remaining: 2m 37sRunning iteration 531/750... Est. remaining: 2m 30sRunning iteration 541/750... Est. remaining: 2m 23sRunning iteration 551/750... Est. remaining: 2m 16sRunning iteration 561/750... Est. remaining: 2m 10sRunning iteration 571/750... Est. remaining: 2m 3sRunning iteration 581/750... Est. remaining: 1m 56sRunning iteration 591/750... Est. remaining: 1m 49sRunning iteration 601/750... Est. remaining: 1m 42sbest_combination: {'lookbacks': [156, 159, 168], 'score': np.float64(1.3098661816336377), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 35sRunning iteration 621/750... Est. remaining: 1m 28sRunning iteration 631/750... Est. remaining: 1m 21sRunning iteration 641/750... Est. remaining: 1m 14sRunning iteration 651/750... Est. remaining: 1m 8sRunning iteration 661/750... Est. remaining: 1m 1sRunning iteration 671/750... Est. remaining: 0m 54sRunning iteration 681/750... Est. remaining: 0m 47sRunning iteration 691/750... Est. remaining: 0m 40sRunning iteration 701/750... Est. remaining: 0m 34sbest_combination: {'lookbacks': [156, 159, 168], 'score': np.float64(1.3098661816336377), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 27sRunning iteration 721/750... Est. remaining: 0m 20sRunning iteration 731/750... Est. remaining: 0m 13sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 8.5 minutes
Best normalized score: 1.31
best_combination: {'lookbacks': [156, 159, 168], 'score': np.float64(1.3098661816336377), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [156, 159, 168] (score: 1.3099)

Monte Carlo simulation completed in 8.5 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [156, 159, 168] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 113 selections (27.2%)
2. sp500_hma: 110 selections (26.4%)
3. naz100_pi: 78 selections (18.8%)
4. naz100_pine: 78 selections (18.8%)
5. cash: 37 selections (8.9%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,473,280,075.91
Average Annualized Gain: 48.7%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 12 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 12/15 runs completed (12 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 13 of 15
Time: Sun Aug 24 13:57:44 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $1,128,922,386
Annual Return: 39.89%
Sharpe Ratio: 1.36188
Sortino Ratio: 1.272
Max Drawdown: -57.2%
Avg Drawdown: -12.1%
Normalized Score: -0.387
Lookback periods: [59, 155, 187] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,020,911,363
Annual Return: 43.92%
Sharpe Ratio: 1.45031
Sortino Ratio: 1.412
Max Drawdown: -69.1%
Avg Drawdown: -12.4%
Normalized Score: -0.359
Lookback periods: [109, 169, 173] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,116,337,083
Annual Return: 45.21%
Sharpe Ratio: 1.46153
Sortino Ratio: 1.431
Max Drawdown: -59.0%
Avg Drawdown: -11.9%
Normalized Score: 0.131
Lookback periods: [172, 180, 182] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 19m 54s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,213,554,540
Annual Return: 46.94%
Sharpe Ratio: 1.55877
Sortino Ratio: 1.511
Max Drawdown: -57.2%
Avg Drawdown: -11.5%
Normalized Score: 0.533
Lookback periods: [129, 152, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 14m 54sRunning iteration 31/750... Est. remaining: 12m 32sRunning iteration 41/750... Est. remaining: 11m 12sRunning iteration 51/750... Est. remaining: 10m 22sRunning iteration 61/750... Est. remaining: 9m 42sRunning iteration 71/750... Est. remaining: 9m 16sRunning iteration 81/750... Est. remaining: 8m 55sRunning iteration 91/750... Est. remaining: 8m 35sRunning iteration 101/750... Est. remaining: 8m 17sbest_combination: {'lookbacks': [129, 152, 156], 'score': np.float64(0.5334012803469336), 'visits': 1}
Running iteration 111/750... Est. remaining: 8m 0sRunning iteration 121/750... Est. remaining: 7m 46sRunning iteration 131/750... Est. remaining: 7m 33sRunning iteration 141/750... Est. remaining: 7m 21sRunning iteration 151/750... Est. remaining: 7m 10s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,236,336,379
Annual Return: 47.59%
Sharpe Ratio: 1.54658
Sortino Ratio: 1.515
Max Drawdown: -58.5%
Avg Drawdown: -10.9%
Normalized Score: 0.589
Lookback periods: [154, 162, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 161/750... Est. remaining: 7m 6sRunning iteration 171/750... Est. remaining: 6m 56sRunning iteration 181/750... Est. remaining: 6m 46sRunning iteration 191/750... Est. remaining: 6m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,042,564,963
Annual Return: 47.48%
Sharpe Ratio: 1.54923
Sortino Ratio: 1.522
Max Drawdown: -58.2%
Avg Drawdown: -10.7%
Normalized Score: 0.629
Lookback periods: [157, 162, 167] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 201/750... Est. remaining: 6m 31sbest_combination: {'lookbacks': [157, 162, 167], 'score': np.float64(0.6291832648741661), 'visits': 1}
Running iteration 211/750... Est. remaining: 6m 21sRunning iteration 221/750... Est. remaining: 6m 12sRunning iteration 231/750... Est. remaining: 6m 3sRunning iteration 241/750... Est. remaining: 5m 55sRunning iteration 251/750... Est. remaining: 5m 46sRunning iteration 261/750... Est. remaining: 5m 37sRunning iteration 271/750... Est. remaining: 5m 29s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,974,224,518
Annual Return: 49.75%
Sharpe Ratio: 1.60832
Sortino Ratio: 1.576
Max Drawdown: -57.2%
Avg Drawdown: -11.2%
Normalized Score: 0.832
Lookback periods: [154, 155, 156] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 281/750... Est. remaining: 5m 23sRunning iteration 291/750... Est. remaining: 5m 15sRunning iteration 301/750... Est. remaining: 5m 7sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(0.8323401012806079), 'visits': 1}
Running iteration 311/750... Est. remaining: 4m 59sRunning iteration 321/750... Est. remaining: 4m 52sRunning iteration 331/750... Est. remaining: 4m 44sRunning iteration 341/750... Est. remaining: 4m 36sRunning iteration 351/750... Est. remaining: 4m 29sRunning iteration 361/750... Est. remaining: 4m 21sRunning iteration 371/750... Est. remaining: 4m 13sRunning iteration 381/750... Est. remaining: 4m 5sRunning iteration 391/750... Est. remaining: 3m 58sRunning iteration 401/750... Est. remaining: 3m 51sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(0.8323401012806079), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 44sRunning iteration 421/750... Est. remaining: 3m 37sRunning iteration 431/750... Est. remaining: 3m 30sRunning iteration 441/750... Est. remaining: 3m 23sRunning iteration 451/750... Est. remaining: 3m 16sRunning iteration 461/750... Est. remaining: 3m 9sRunning iteration 471/750... Est. remaining: 3m 3sRunning iteration 481/750... Est. remaining: 2m 56sRunning iteration 491/750... Est. remaining: 2m 49sRunning iteration 501/750... Est. remaining: 2m 42sbest_combination: {'lookbacks': [154, 155, 156], 'score': np.float64(0.8323401012806079), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 36sRunning iteration 521/750... Est. remaining: 2m 29sRunning iteration 531/750... Est. remaining: 2m 22sRunning iteration 541/750... Est. remaining: 2m 16sRunning iteration 551/750... Est. remaining: 2m 9sRunning iteration 561/750... Est. remaining: 2m 2s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,950,313,522
Annual Return: 48.50%
Sharpe Ratio: 1.58018
Sortino Ratio: 1.552
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 0.861
Lookback periods: [159, 161, 169] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/750... Est. remaining: 1m 56sRunning iteration 581/750... Est. remaining: 1m 50sRunning iteration 591/750... Est. remaining: 1m 43sRunning iteration 601/750... Est. remaining: 1m 36sbest_combination: {'lookbacks': [159, 161, 169], 'score': np.float64(0.8614958495820535), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 30sRunning iteration 621/750... Est. remaining: 1m 23sRunning iteration 631/750... Est. remaining: 1m 17sRunning iteration 641/750... Est. remaining: 1m 10sRunning iteration 651/750... Est. remaining: 1m 4sRunning iteration 661/750... Est. remaining: 0m 57sRunning iteration 671/750... Est. remaining: 0m 51s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,500,708,271
Annual Return: 48.76%
Sharpe Ratio: 1.58829
Sortino Ratio: 1.558
Max Drawdown: -55.0%
Avg Drawdown: -10.6%
Normalized Score: 0.891
Lookback periods: [159, 161, 172] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 681/750... Est. remaining: 0m 45sRunning iteration 691/750... Est. remaining: 0m 38sRunning iteration 701/750... Est. remaining: 0m 32sbest_combination: {'lookbacks': [159, 161, 172], 'score': np.float64(0.8906342528806361), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 25sRunning iteration 721/750... Est. remaining: 0m 19sRunning iteration 731/750... Est. remaining: 0m 12sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 8.0 minutes
Best normalized score: 0.89
best_combination: {'lookbacks': [159, 161, 172], 'score': np.float64(0.8906342528806361), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [159, 161, 172] (score: 0.8906)

Monte Carlo simulation completed in 8.0 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [159, 161, 172] days

Model Selection Analysis:
----------------------------------------
1. naz100_hma: 116 selections (27.9%)
2. sp500_hma: 107 selections (25.7%)
3. naz100_pine: 80 selections (19.2%)
4. naz100_pi: 78 selections (18.8%)
5. cash: 35 selections (8.4%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $9,500,708,270.64
Average Annualized Gain: 48.8%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 13 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 13/15 runs completed (13 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 14 of 15
Time: Sun Aug 24 14:05:53 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $438,076,629
Annual Return: 36.12%
Sharpe Ratio: 1.23542
Sortino Ratio: 1.159
Max Drawdown: -62.8%
Avg Drawdown: -12.9%
Normalized Score: -1.955
Lookback periods: [52, 153, 198] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $474,247,082
Annual Return: 36.43%
Sharpe Ratio: 1.29186
Sortino Ratio: 1.194
Max Drawdown: -53.6%
Avg Drawdown: -11.4%
Normalized Score: -1.350
Lookback periods: [55, 59, 80] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $3,010,673,311
Annual Return: 43.90%
Sharpe Ratio: 1.45242
Sortino Ratio: 1.410
Max Drawdown: -65.6%
Avg Drawdown: -11.9%
Normalized Score: -0.535
Lookback periods: [111, 161, 178] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 17m 39s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,271,948,952
Annual Return: 45.36%
Sharpe Ratio: 1.47069
Sortino Ratio: 1.436
Max Drawdown: -61.2%
Avg Drawdown: -11.8%
Normalized Score: -0.174
Lookback periods: [159, 184, 193] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 21/750... Est. remaining: 13m 14sRunning iteration 31/750... Est. remaining: 11m 4sRunning iteration 41/750... Est. remaining: 9m 57s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,741,267,479
Annual Return: 47.29%
Sharpe Ratio: 1.53823
Sortino Ratio: 1.499
Max Drawdown: -59.5%
Avg Drawdown: -11.4%
Normalized Score: 0.296
Lookback periods: [146, 157, 174] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 51/750... Est. remaining: 9m 34sRunning iteration 61/750... Est. remaining: 9m 6sRunning iteration 71/750... Est. remaining: 8m 41sRunning iteration 81/750... Est. remaining: 8m 20sRunning iteration 91/750... Est. remaining: 8m 2sRunning iteration 101/750... Est. remaining: 7m 47sbest_combination: {'lookbacks': [146, 157, 174], 'score': np.float64(0.29583193230656474), 'visits': 1}
Running iteration 111/750... Est. remaining: 7m 32sRunning iteration 121/750... Est. remaining: 7m 20sRunning iteration 131/750... Est. remaining: 7m 8sRunning iteration 141/750... Est. remaining: 6m 57sRunning iteration 151/750... Est. remaining: 6m 47sRunning iteration 161/750... Est. remaining: 6m 37sRunning iteration 171/750... Est. remaining: 6m 27s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,401,816,874
Annual Return: 48.71%
Sharpe Ratio: 1.57288
Sortino Ratio: 1.534
Max Drawdown: -59.0%
Avg Drawdown: -11.8%
Normalized Score: 0.506
Lookback periods: [181, 185, 189] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 181/750... Est. remaining: 6m 23sRunning iteration 191/750... Est. remaining: 6m 14sRunning iteration 201/750... Est. remaining: 6m 6sbest_combination: {'lookbacks': [181, 185, 189], 'score': np.float64(0.506495599537068), 'visits': 1}
Running iteration 211/750... Est. remaining: 5m 58sRunning iteration 221/750... Est. remaining: 5m 49sRunning iteration 231/750... Est. remaining: 5m 42sRunning iteration 241/750... Est. remaining: 5m 34sRunning iteration 251/750... Est. remaining: 5m 26sRunning iteration 261/750... Est. remaining: 5m 19sRunning iteration 271/750... Est. remaining: 5m 12sRunning iteration 281/750... Est. remaining: 5m 4sRunning iteration 291/750... Est. remaining: 4m 57sRunning iteration 301/750... Est. remaining: 4m 50sbest_combination: {'lookbacks': [181, 185, 189], 'score': np.float64(0.506495599537068), 'visits': 1}
Running iteration 311/750... Est. remaining: 4m 43sRunning iteration 321/750... Est. remaining: 4m 36sRunning iteration 331/750... Est. remaining: 4m 29sRunning iteration 341/750... Est. remaining: 4m 22sRunning iteration 351/750... Est. remaining: 4m 15sRunning iteration 361/750... Est. remaining: 4m 8sRunning iteration 371/750... Est. remaining: 4m 2sRunning iteration 381/750... Est. remaining: 3m 55sRunning iteration 391/750... Est. remaining: 3m 48sRunning iteration 401/750... Est. remaining: 3m 41sbest_combination: {'lookbacks': [181, 185, 189], 'score': np.float64(0.506495599537068), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 35sRunning iteration 421/750... Est. remaining: 3m 28sRunning iteration 431/750... Est. remaining: 3m 22sRunning iteration 441/750... Est. remaining: 3m 15sRunning iteration 451/750... Est. remaining: 3m 9sRunning iteration 461/750... Est. remaining: 3m 2sRunning iteration 471/750... Est. remaining: 2m 56sRunning iteration 481/750... Est. remaining: 2m 49sRunning iteration 491/750... Est. remaining: 2m 43sRunning iteration 501/750... Est. remaining: 2m 36sbest_combination: {'lookbacks': [181, 185, 189], 'score': np.float64(0.506495599537068), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 30sRunning iteration 521/750... Est. remaining: 2m 24sRunning iteration 531/750... Est. remaining: 2m 17sRunning iteration 541/750... Est. remaining: 2m 11sRunning iteration 551/750... Est. remaining: 2m 5sRunning iteration 561/750... Est. remaining: 1m 58s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $11,097,230,507
Annual Return: 49.42%
Sharpe Ratio: 1.58987
Sortino Ratio: 1.560
Max Drawdown: -59.0%
Avg Drawdown: -11.5%
Normalized Score: 0.668
Lookback periods: [178, 185, 188] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 571/750... Est. remaining: 1m 52sRunning iteration 581/750... Est. remaining: 1m 46sRunning iteration 591/750... Est. remaining: 1m 40sRunning iteration 601/750... Est. remaining: 1m 34sbest_combination: {'lookbacks': [178, 185, 188], 'score': np.float64(0.6676443336172467), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 27sRunning iteration 621/750... Est. remaining: 1m 21sRunning iteration 631/750... Est. remaining: 1m 15sRunning iteration 641/750... Est. remaining: 1m 8sRunning iteration 651/750... Est. remaining: 1m 2sRunning iteration 661/750... Est. remaining: 0m 56sRunning iteration 671/750... Est. remaining: 0m 49sRunning iteration 681/750... Est. remaining: 0m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $9,012,975,724
Annual Return: 48.53%
Sharpe Ratio: 1.58465
Sortino Ratio: 1.552
Max Drawdown: -58.2%
Avg Drawdown: -10.7%
Normalized Score: 0.675
Lookback periods: [157, 158, 162] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 691/750... Est. remaining: 0m 37s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $10,787,460,186
Annual Return: 49.30%
Sharpe Ratio: 1.61007
Sortino Ratio: 1.577
Max Drawdown: -57.2%
Avg Drawdown: -10.4%
Normalized Score: 0.880
Lookback periods: [154, 159, 166] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 701/750... Est. remaining: 0m 31sbest_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(0.8796185750296728), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 25sRunning iteration 721/750... Est. remaining: 0m 18sRunning iteration 731/750... Est. remaining: 0m 12sRunning iteration 741/750... Est. remaining: 0m 6s
Monte Carlo simulation completed in 7.8 minutes
Best normalized score: 0.88
best_combination: {'lookbacks': [154, 159, 166], 'score': np.float64(0.8796185750296728), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [154, 159, 166] (score: 0.8796)

Monte Carlo simulation completed in 7.8 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [154, 159, 166] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 114 selections (27.4%)
2. naz100_hma: 113 selections (27.2%)
3. naz100_pine: 78 selections (18.8%)
4. naz100_pi: 75 selections (18.0%)
5. cash: 36 selections (8.7%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $10,787,460,185.92
Average Annualized Gain: 49.3%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 14 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 14/15 runs completed (14 successful, 0 failed)
Waiting 5 seconds before next run...

--------------------------------------------------------------
Starting Monte Carlo Run 15 of 15
Time: Sun Aug 24 14:13:51 EDT 2025
--------------------------------------------------------------
Executing: uv run python run_monte_carlo.py --search explore-exploit

Starting Monte Carlo backtesting process
Starting Monte Carlo backtesting process
Search strategy: explore-exploit
Search strategy: explore-exploit
Starting Monte Carlo backtesting process
Search strategy: explore-exploit

Initializing Monte Carlo backtesting...
Using backtested portfolio values
Reading from: pyTAAAweb_backtestPortfolioValue.params
Loading historical portfolio data...

Processing naz100_pine data from /Users/donaldpg/pyTAAA_data/naz100_pine/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pine

Processing naz100_hma data from /Users/donaldpg/pyTAAA_data/naz100_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_hma

Processing naz100_pi data from /Users/donaldpg/pyTAAA_data/naz100_pi/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...Processed 7000 lines...Processed 8000 lines...
Loaded 8725 data points for naz100_pi

Processing sp500_hma data from /Users/donaldpg/pyTAAA_data/sp500_hma/data_store/pyTAAAweb_backtestPortfolioValue.params
Using backtested portfolio values
Processed 1000 lines...Processed 2000 lines...Processed 3000 lines...Processed 4000 lines...Processed 5000 lines...Processed 6000 lines...
Loaded 6459 data points for sp500_hma

Total unique dates across all models: 8734
Date range: 1991-01-02 to 2025-08-22

Aligning data across models...
Aligned naz100_pine data starting at $10000.00
Aligned naz100_hma data starting at $10000.00
Aligned naz100_pi data starting at $10000.00
Aligned sp500_hma data starting at $10000.00

Data loading complete!

Checking for previous state in monte_carlo_state.pkl...
No previous state file found at monte_carlo_state.pkl
Running Monte Carlo simulations with 750 iterations...
Running Monte Carlo simulations with 750 iterations...

Starting Monte Carlo simulations with 750 iterations...
Note: This may take about 5 minutes to complete...
Press Ctrl+C to stop early with current best result


Running 750 Monte Carlo iterations...
Using 5 models over 8734 trading days
Press Ctrl+C to stop early with current best result


==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $2,019,721,343
Annual Return: 42.26%
Sharpe Ratio: 1.40565
Sortino Ratio: 1.356
Max Drawdown: -63.6%
Avg Drawdown: -13.3%
Normalized Score: -0.388
Lookback periods: [110, 154, 181] days
==================================================
Best parameters logged to: abacus_best_performers.csv

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $4,074,486,035
Annual Return: 45.17%
Sharpe Ratio: 1.47806
Sortino Ratio: 1.436
Max Drawdown: -56.0%
Avg Drawdown: -12.3%
Normalized Score: 0.267
Lookback periods: [138, 160, 192] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 11/750... Est. remaining: 16m 13sRunning iteration 21/750... Est. remaining: 11m 43sRunning iteration 31/750... Est. remaining: 10m 10sRunning iteration 41/750... Est. remaining: 9m 16sRunning iteration 51/750... Est. remaining: 8m 43s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $6,649,335,747
Annual Return: 47.23%
Sharpe Ratio: 1.54508
Sortino Ratio: 1.513
Max Drawdown: -58.5%
Avg Drawdown: -12.2%
Normalized Score: 0.489
Lookback periods: [136, 153, 170] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 61/750... Est. remaining: 8m 36sRunning iteration 71/750... Est. remaining: 8m 14sRunning iteration 81/750... Est. remaining: 7m 54sRunning iteration 91/750... Est. remaining: 7m 39sRunning iteration 101/750... Est. remaining: 7m 26sbest_combination: {'lookbacks': [136, 153, 170], 'score': np.float64(0.48910215666790907), 'visits': 1}

==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $7,614,003,788
Annual Return: 47.81%
Sharpe Ratio: 1.57364
Sortino Ratio: 1.543
Max Drawdown: -57.2%
Avg Drawdown: -11.8%
Normalized Score: 0.666
Lookback periods: [136, 158, 165] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 111/750... Est. remaining: 7m 23sRunning iteration 121/750... Est. remaining: 7m 12sRunning iteration 131/750... Est. remaining: 7m 2sRunning iteration 141/750... Est. remaining: 6m 53sRunning iteration 151/750... Est. remaining: 6m 43sRunning iteration 161/750... Est. remaining: 6m 33sRunning iteration 171/750... Est. remaining: 6m 22sRunning iteration 181/750... Est. remaining: 6m 12sRunning iteration 191/750... Est. remaining: 6m 3sRunning iteration 201/750... Est. remaining: 5m 54sbest_combination: {'lookbacks': [136, 158, 165], 'score': np.float64(0.666080466781559), 'visits': 1}
Running iteration 211/750... Est. remaining: 5m 46sRunning iteration 221/750... Est. remaining: 5m 38sRunning iteration 231/750... Est. remaining: 5m 30sRunning iteration 241/750... Est. remaining: 5m 22sRunning iteration 251/750... Est. remaining: 5m 14sRunning iteration 261/750... Est. remaining: 5m 7sRunning iteration 271/750... Est. remaining: 4m 59sRunning iteration 281/750... Est. remaining: 4m 52sRunning iteration 291/750... Est. remaining: 4m 45sRunning iteration 301/750... Est. remaining: 4m 37sbest_combination: {'lookbacks': [136, 158, 165], 'score': np.float64(0.666080466781559), 'visits': 1}
Running iteration 311/750... Est. remaining: 4m 30sRunning iteration 321/750... Est. remaining: 4m 23sRunning iteration 331/750... Est. remaining: 4m 16s
==================================================
NEW BEST PERFORMANCE FOUND!
==================================================
Final Value: $8,149,185,701
Annual Return: 48.10%
Sharpe Ratio: 1.58394
Sortino Ratio: 1.547
Max Drawdown: -58.5%
Avg Drawdown: -11.0%
Normalized Score: 0.743
Lookback periods: [139, 149, 171] days
==================================================
Best parameters logged to: abacus_best_performers.csv
Running iteration 341/750... Est. remaining: 4m 11sRunning iteration 351/750... Est. remaining: 4m 4sRunning iteration 361/750... Est. remaining: 3m 57sRunning iteration 371/750... Est. remaining: 3m 51sRunning iteration 381/750... Est. remaining: 3m 44sRunning iteration 391/750... Est. remaining: 3m 38sRunning iteration 401/750... Est. remaining: 3m 32sbest_combination: {'lookbacks': [139, 149, 171], 'score': np.float64(0.7429546403085725), 'visits': 1}
Running iteration 411/750... Est. remaining: 3m 25sRunning iteration 421/750... Est. remaining: 3m 19sRunning iteration 431/750... Est. remaining: 3m 13sRunning iteration 441/750... Est. remaining: 3m 6sRunning iteration 451/750... Est. remaining: 3m 0sRunning iteration 461/750... Est. remaining: 2m 54sRunning iteration 471/750... Est. remaining: 2m 48sRunning iteration 481/750... Est. remaining: 2m 41sRunning iteration 491/750... Est. remaining: 2m 35sRunning iteration 501/750... Est. remaining: 2m 29sbest_combination: {'lookbacks': [139, 149, 171], 'score': np.float64(0.7429546403085725), 'visits': 1}
Running iteration 511/750... Est. remaining: 2m 23sRunning iteration 521/750... Est. remaining: 2m 17sRunning iteration 531/750... Est. remaining: 2m 11sRunning iteration 541/750... Est. remaining: 2m 5sRunning iteration 551/750... Est. remaining: 1m 59sRunning iteration 561/750... Est. remaining: 1m 53sRunning iteration 571/750... Est. remaining: 1m 47sRunning iteration 581/750... Est. remaining: 1m 41sRunning iteration 591/750... Est. remaining: 1m 35sRunning iteration 601/750... Est. remaining: 1m 29sbest_combination: {'lookbacks': [139, 149, 171], 'score': np.float64(0.7429546403085725), 'visits': 1}
Running iteration 611/750... Est. remaining: 1m 23sRunning iteration 621/750... Est. remaining: 1m 17sRunning iteration 631/750... Est. remaining: 1m 11sRunning iteration 641/750... Est. remaining: 1m 5sRunning iteration 651/750... Est. remaining: 0m 59sRunning iteration 661/750... Est. remaining: 0m 53sRunning iteration 671/750... Est. remaining: 0m 47sRunning iteration 681/750... Est. remaining: 0m 41sRunning iteration 691/750... Est. remaining: 0m 35sRunning iteration 701/750... Est. remaining: 0m 29sbest_combination: {'lookbacks': [139, 149, 171], 'score': np.float64(0.7429546403085725), 'visits': 1}
Running iteration 711/750... Est. remaining: 0m 23sRunning iteration 721/750... Est. remaining: 0m 17sRunning iteration 731/750... Est. remaining: 0m 11sRunning iteration 741/750... Est. remaining: 0m 5s
Monte Carlo simulation completed in 7.3 minutes
Best normalized score: 0.74
best_combination: {'lookbacks': [139, 149, 171], 'score': np.float64(0.7429546403085725), 'visits': 1}

Permutation-Invariant Tracking Statistics:
  Total canonical combinations explored: 750
  Theoretical efficiency improvement: 0.008
  Best performing lookbacks: [139, 149, 171] (score: 0.7430)

Monte Carlo simulation completed in 7.3 minutes

Saving exploration/exploitation state to monte_carlo_state.pkl...

Creating final performance plot...

Monte Carlo Backtesting Results:
----------------------------------------
Total iterations: 750
Analyzed 8734 trading days
Date range: 1991-01-02 to 2025-08-22

Best performing configuration:
Lookback periods: [139, 149, 171] days

Model Selection Analysis:
----------------------------------------
1. sp500_hma: 113 selections (27.2%)
2. naz100_hma: 109 selections (26.2%)
3. naz100_pine: 79 selections (19.0%)
4. naz100_pi: 77 selections (18.5%)
5. cash: 38 selections (9.1%)

Portfolio Statistics:
----------------------------------------
Initial Value: $10,000.00
Final Value: $8,149,185,701.01
Average Annualized Gain: 48.1%
----------------------------------------
Performance plot saved to: monte_carlo_best_performance.png

✓ Run 15 completed successfully
Resetting saved state for next run...
Reset complete. monte_carlo_state.pkl has been removed.
✓ State reset completed
Progress: 15/15 runs completed (15 successful, 0 failed)
